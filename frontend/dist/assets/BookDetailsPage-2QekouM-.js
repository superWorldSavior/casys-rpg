import{r as b,j as t,a as r}from"./index-CTdJZ5md.js";import{r as n}from"./vendor-BBF-xwg4.js";import{i as _,j as C,P,b as o,d as a,e as c,C as R,f as S}from"./mui-CG_8jc0N.js";import{P as k}from"./PDFPreview-Dq2RCQZ1.js";import{b as I,u as $}from"./router-DvyW0KNU.js";import"./mui-deps-DIjIPAY3.js";import"./Close-jEuwfnBl.js";var p={},E=_;Object.defineProperty(p,"__esModule",{value:!0});var j=p.default=void 0,z=E(b()),M=C;j=p.default=(0,z.default)((0,M.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var m={},H=_;Object.defineProperty(m,"__esModule",{value:!0});var B=m.default=void 0,q=H(b()),L=C;B=m.default=(0,q.default)((0,L.jsx)("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 4h5v8l-2.5-1.5L6 12z"}),"Book");function W(){const{bookId:s}=I(),u=$(),[e,g]=n.useState(null),[w,h]=n.useState(!0),[v,D]=n.useState(null),[f,x]=n.useState(!1);return n.useEffect(()=>{(async()=>{try{h(!0);const i=await fetch(`/api/books/${s}`);if(!i.ok)throw new Error(`Impossible de charger les détails du livre : ${i.statusText}`);const d=await i.json(),y=await fetch(`/api/books/${s}/cover`);y.ok?d.cover_image=y.url:d.cover_image=null,g(d)}catch(i){console.error("Error fetching book details:",i),D(i.message),g(null)}finally{h(!1)}})()},[s]),w?t(o,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:t(S,{})}):v?r(o,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",p:3,children:[t(a,{color:"error",variant:"h6",gutterBottom:!0,children:v}),t(c,{variant:"contained",onClick:()=>u(-1),sx:{mt:2},children:"Retour"})]}):t(R,{maxWidth:"md",children:t(P,{elevation:0,sx:{p:4,mt:4,backgroundColor:"background.paper",borderRadius:2},children:r(o,{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,children:[t(o,{flex:"0 0 300px",height:"400px",bgcolor:"grey.100",borderRadius:1,display:"flex",justifyContent:"center",alignItems:"center",children:e&&e.cover_image?t(o,{component:"img",src:e.cover_image,alt:e.title,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}):t(B,{sx:{fontSize:60,color:"grey.400"}})}),r(o,{flex:"1",children:[t(a,{variant:"h4",component:"h1",gutterBottom:!0,children:(e==null?void 0:e.title)||"Sans titre"}),t(a,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:(e==null?void 0:e.author)||"Auteur inconnu"}),(e==null?void 0:e.publisher)&&r(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Édité par ",e.publisher]}),(e==null?void 0:e.publication_date)&&r(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Date de publication:"," ",new Date(e.publication_date).toLocaleDateString()]}),(e==null?void 0:e.language)&&r(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Langue: ",e.language.toUpperCase()]}),(e==null?void 0:e.total_pages)>0&&r(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Nombre de pages: ",e.total_pages]}),t(a,{variant:"body1",paragraph:!0,sx:{mt:3,mb:3},children:(e==null?void 0:e.description)||"Aucune description disponible"}),r(o,{sx:{display:"flex",gap:2,mt:3},children:[t(c,{variant:"contained",size:"large",onClick:()=>u(`/reader/${s}`),sx:{backgroundColor:l=>l.palette.primary.main,color:"white","&:hover":{backgroundColor:l=>l.palette.primary.dark}},children:"Commencer la lecture"}),t(c,{variant:"outlined",size:"large",startIcon:t(j,{}),onClick:()=>x(!0),children:"Aperçu"}),t(c,{variant:"outlined",size:"large",onClick:()=>u(-1),children:"Retour"})]}),f&&t(k,{open:f,onClose:()=>x(!1)})]})]})})})}export{W as default};
//# sourceMappingURL=BookDetailsPage-2QekouM-.js.map
