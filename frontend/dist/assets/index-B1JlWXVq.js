var Qn=Object.defineProperty;var bn=n=>{throw TypeError(n)};var Zn=(n,t,u)=>t in n?Qn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[t]=u;var Qt=(n,t,u)=>Zn(n,typeof t!="symbol"?t+"":t,u),Le=(n,t,u)=>t.has(n)||bn("Cannot "+u);var s=(n,t,u)=>(Le(n,t,"read from private field"),u?u.call(n):t.get(n)),ot=(n,t,u)=>t.has(n)?bn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,u),ct=(n,t,u,e)=>(Le(n,t,"write to private field"),e?e.call(n,u):t.set(n,u),u),Q=(n,t,u)=>(Le(n,t,"access private method"),u);var he=(n,t,u,e)=>({set _(a){ct(n,t,a,u)},get _(){return s(n,t,e)}});import{g as getDefaultExportFromCjs,u as useTheme,a as getThemeProps,r as reactExports,b as useEnhancedEffect,_ as _objectWithoutPropertiesLoose,c as _extends,d as useForkRef,e as generateUtilityClass,f as generateUtilityClasses,h as useDefaultProps,i as capitalize,j as composeClasses,k as jsxRuntimeExports,s as styled,B as ButtonBase,l as alpha_1,m as clsx,P as Paper,n as darken_1,o as lighten_1,p as useEventCallback,q as extendSxProp,t as resolveBreakpointValues,v as handleBreakpoints,w as css,x as keyframes,y as useTimeout,z as emphasize_1,A as interopRequireDefaultExports,C as getAugmentedNamespace,R as React,T as Typography,D as Button,E as useNavigate,F as Container}from"./index-D3zaVbkK.js";import{r as resolveComponentProps,m as mergeSlotProps,a as appendOwnerState,c as createSvgIcon,o as ownerDocument,u as useTheme$1,F as Fade,b as useId,M as Modal,B as Backdrop,d as useRtl,e as extractEventHandlers,G as Grow,f as useSlotProps,g as requireCreateSvgIcon,h as Box,i as default_1$4,j as default_1$5}from"./NavigateBefore-CkbDMWE6.js";function _mergeNamespaces(n,t){for(var u=0;u<t.length;u++){const e=t[u];if(typeof e!="string"&&!Array.isArray(e)){for(const a in e)if(a!=="default"&&!(a in n)){const L=Object.getOwnPropertyDescriptor(e,a);L&&Object.defineProperty(n,a,L.get?L:{enumerable:!0,get:()=>e[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function n(e,a,L,F,q,S){if(S!==ReactPropTypesSecret){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}n.isRequired=n;function t(){return n}var u={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,elementType:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return u.PropTypes=u,u};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function useMediaQueryOld(n,t,u,e,a){const[L,F]=reactExports.useState(()=>a&&u?u(n).matches:e?e(n).matches:t);return useEnhancedEffect(()=>{let q=!0;if(!u)return;const S=u(n),E=()=>{q&&F(S.matches)};return E(),S.addListener(E),()=>{q=!1,S.removeListener(E)}},[n,u]),L}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(n,t,u,e,a){const L=reactExports.useCallback(()=>t,[t]),F=reactExports.useMemo(()=>{if(a&&u)return()=>u(n).matches;if(e!==null){const{matches:p}=e(n);return()=>p}return L},[L,n,e,a,u]),[q,S]=reactExports.useMemo(()=>{if(u===null)return[L,()=>()=>{}];const p=u(n);return[()=>p.matches,w=>(p.addListener(w),()=>{p.removeListener(w)})]},[L,u,n]);return maybeReactUseSyncExternalStore(S,q,F)}function useMediaQuery(n,t={}){const u=useTheme(),e=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:L=e?window.matchMedia:null,ssrMatchMedia:F=null,noSsr:q=!1}=getThemeProps({name:"MuiUseMediaQuery",props:t,theme:u});let S=typeof n=="function"?n(u):n;return S=S.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(S,a,L,F,q)}const _excluded$b=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_excluded2$1=["component","slots","slotProps"],_excluded3=["component"];function useSlot(n,t){const{className:u,elementType:e,ownerState:a,externalForwardedProps:L,getSlotOwnerState:F,internalForwardedProps:q}=t,S=_objectWithoutPropertiesLoose(t,_excluded$b),{component:E,slots:p={[n]:void 0},slotProps:w={[n]:void 0}}=L,D=_objectWithoutPropertiesLoose(L,_excluded2$1),y=p[n]||e,m=resolveComponentProps(w[n],a),C=mergeSlotProps(_extends({className:u},S,{externalForwardedProps:n==="root"?D:void 0,externalSlotProps:m})),{props:{component:b},internalRef:h}=C,v=_objectWithoutPropertiesLoose(C.props,_excluded3),M=useForkRef(h,m==null?void 0:m.ref,t.ref),x=F?F(v):{},i=_extends({},a,x),f=n==="root"?b||E:b,c=appendOwnerState(y,_extends({},n==="root"&&!E&&!p[n]&&q,n!=="root"&&!p[n]&&q,v,f&&{as:f},{ref:M}),i);return Object.keys(x).forEach(d=>{delete c[d]}),[y,c]}function getAlertUtilityClass(n){return generateUtilityClass("MuiAlert",n)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(n){return generateUtilityClass("MuiIconButton",n)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$a=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$a=n=>{const{classes:t,disabled:u,color:e,edge:a,size:L}=n,F={root:["root",u&&"disabled",e!=="default"&&`color${capitalize(e)}`,a&&`edge${capitalize(a)}`,`size${capitalize(L)}`]};return composeClasses(F,getIconButtonUtilityClass,t)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,u.color!=="default"&&t[`color${capitalize(u.color)}`],u.edge&&t[`edge${capitalize(u.edge)}`],t[`size${capitalize(u.size)}`]]}})(({theme:n,ownerState:t})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:alpha_1(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:n,ownerState:t})=>{var u;const e=(u=(n.vars||n).palette)==null?void 0:u[t.color];return _extends({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&_extends({color:e==null?void 0:e.main},!t.disableRipple&&{"&:hover":_extends({},e&&{backgroundColor:n.vars?`rgba(${e.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:alpha_1(e.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiIconButton"}),{edge:a=!1,children:L,className:F,color:q="default",disabled:S=!1,disableFocusRipple:E=!1,size:p="medium"}=e,w=_objectWithoutPropertiesLoose(e,_excluded$a),D=_extends({},e,{edge:a,color:q,disabled:S,disableFocusRipple:E,size:p}),y=useUtilityClasses$a(D);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(y.root,F),centerRipple:!0,focusRipple:!E,disabled:S,ref:u},w,{ownerState:D,children:L}))}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$9=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$9=n=>{const{variant:t,color:u,severity:e,classes:a}=n,L={root:["root",`color${capitalize(u||e)}`,`${t}${capitalize(u||e)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(L,getAlertUtilityClass,a)},AlertRoot=styled(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,t[u.variant],t[`${u.variant}${capitalize(u.color||u.severity)}`]]}})(({theme:n})=>{const t=n.palette.mode==="light"?darken_1:lighten_1,u=n.palette.mode==="light"?lighten_1:darken_1;return _extends({},n.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{colorSeverity:e,variant:"standard"},style:{color:n.vars?n.vars.palette.Alert[`${e}Color`]:t(n.palette[e].light,.6),backgroundColor:n.vars?n.vars.palette.Alert[`${e}StandardBg`]:u(n.palette[e].light,.9),[`& .${alertClasses.icon}`]:n.vars?{color:n.vars.palette.Alert[`${e}IconColor`]}:{color:n.palette[e].main}}})),...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{colorSeverity:e,variant:"outlined"},style:{color:n.vars?n.vars.palette.Alert[`${e}Color`]:t(n.palette[e].light,.6),border:`1px solid ${(n.vars||n).palette[e].light}`,[`& .${alertClasses.icon}`]:n.vars?{color:n.vars.palette.Alert[`${e}IconColor`]}:{color:n.palette[e].main}}})),...Object.entries(n.palette).filter(([,e])=>e.main&&e.dark).map(([e])=>({props:{colorSeverity:e,variant:"filled"},style:_extends({fontWeight:n.typography.fontWeightMedium},n.vars?{color:n.vars.palette.Alert[`${e}FilledColor`],backgroundColor:n.vars.palette.Alert[`${e}FilledBg`]}:{backgroundColor:n.palette.mode==="dark"?n.palette[e].dark:n.palette[e].main,color:n.palette.getContrastText(n.palette[e].main)})}))]})}),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(n,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message",overridesResolver:(n,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action",overridesResolver:(n,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiAlert"}),{action:a,children:L,className:F,closeText:q="Close",color:S,components:E={},componentsProps:p={},icon:w,iconMapping:D=defaultIconMapping,onClose:y,role:m="alert",severity:C="success",slotProps:b={},slots:h={},variant:v="standard"}=e,M=_objectWithoutPropertiesLoose(e,_excluded$9),x=_extends({},e,{color:S,severity:C,variant:v,colorSeverity:S||C}),i=useUtilityClasses$9(x),f={slots:_extends({closeButton:E.CloseButton,closeIcon:E.CloseIcon},h),slotProps:_extends({},p,b)},[c,d]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:f,ownerState:x}),[g,N]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:f,ownerState:x});return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:m,elevation:0,ownerState:x,className:clsx(i.root,F),ref:u},M,{children:[w!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:x,className:i.icon,children:w||D[C]||defaultIconMapping[C]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:x,className:i.message,children:L}),a!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:x,className:i.action,children:a}):null,a==null&&y?jsxRuntimeExports.jsx(AlertAction,{ownerState:x,className:i.action,children:jsxRuntimeExports.jsx(c,_extends({size:"small","aria-label":q,title:q,color:"inherit",onClick:y},d,{children:jsxRuntimeExports.jsx(g,_extends({fontSize:"small"},N))}))}):null]}))});function getCardUtilityClass(n){return generateUtilityClass("MuiCard",n)}generateUtilityClasses("MuiCard",["root"]);const _excluded$8=["className","raised"],useUtilityClasses$8=n=>{const{classes:t}=n;return composeClasses({root:["root"]},getCardUtilityClass,t)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root",overridesResolver:(n,t)=>t.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiCard"}),{className:a,raised:L=!1}=e,F=_objectWithoutPropertiesLoose(e,_excluded$8),q=_extends({},e,{raised:L}),S=useUtilityClasses$8(q);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(S.root,a),elevation:L?8:void 0,ref:u,ownerState:q},F))});function getCardActionsUtilityClass(n){return generateUtilityClass("MuiCardActions",n)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$7=["disableSpacing","className"],useUtilityClasses$7=n=>{const{classes:t,disableSpacing:u}=n;return composeClasses({root:["root",!u&&"spacing"]},getCardActionsUtilityClass,t)},CardActionsRoot=styled("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,!u.disableSpacing&&t.spacing]}})(({ownerState:n})=>_extends({display:"flex",alignItems:"center",padding:8},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),CardActions=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiCardActions"}),{disableSpacing:a=!1,className:L}=e,F=_objectWithoutPropertiesLoose(e,_excluded$7),q=_extends({},e,{disableSpacing:a}),S=useUtilityClasses$7(q);return jsxRuntimeExports.jsx(CardActionsRoot,_extends({className:clsx(S.root,L),ownerState:q,ref:u},F))});function getCardContentUtilityClass(n){return generateUtilityClass("MuiCardContent",n)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$6=["className","component"],useUtilityClasses$6=n=>{const{classes:t}=n;return composeClasses({root:["root"]},getCardContentUtilityClass,t)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(n,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiCardContent"}),{className:a,component:L="div"}=e,F=_objectWithoutPropertiesLoose(e,_excluded$6),q=_extends({},e,{component:L}),S=useUtilityClasses$6(q);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:L,className:clsx(S.root,a),ownerState:q,ref:u},F))});function mapEventPropToEvent(n){return n.substring(2).toLowerCase()}function clickedRootScrollbar(n,t){return t.documentElement.clientWidth<n.clientX||t.documentElement.clientHeight<n.clientY}function ClickAwayListener(n){const{children:t,disableReactTree:u=!1,mouseEvent:e="onClick",onClickAway:a,touchEvent:L="onTouchEnd"}=n,F=reactExports.useRef(!1),q=reactExports.useRef(null),S=reactExports.useRef(!1),E=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{S.current=!0},0),()=>{S.current=!1}),[]);const p=useForkRef(t.ref,q),w=useEventCallback(m=>{const C=E.current;E.current=!1;const b=ownerDocument(q.current);if(!S.current||!q.current||"clientX"in m&&clickedRootScrollbar(m,b))return;if(F.current){F.current=!1;return}let h;m.composedPath?h=m.composedPath().indexOf(q.current)>-1:h=!b.documentElement.contains(m.target)||q.current.contains(m.target),!h&&(u||!C)&&a(m)}),D=m=>C=>{E.current=!0;const b=t.props[m];b&&b(C)},y={ref:p};return L!==!1&&(y[L]=D(L)),reactExports.useEffect(()=>{if(L!==!1){const m=mapEventPropToEvent(L),C=ownerDocument(q.current),b=()=>{F.current=!0};return C.addEventListener(m,w),C.addEventListener("touchmove",b),()=>{C.removeEventListener(m,w),C.removeEventListener("touchmove",b)}}},[w,L]),e!==!1&&(y[e]=D(e)),reactExports.useEffect(()=>{if(e!==!1){const m=mapEventPropToEvent(e),C=ownerDocument(q.current);return C.addEventListener(m,w),()=>{C.removeEventListener(m,w)}}},[w,e]),jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(t,y)})}function getDialogUtilityClass(n){return generateUtilityClass("MuiDialog",n)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),_excluded$5=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(n,t)=>t.backdrop})({zIndex:-1}),useUtilityClasses$5=n=>{const{classes:t,scroll:u,maxWidth:e,fullWidth:a,fullScreen:L}=n,F={root:["root"],container:["container",`scroll${capitalize(u)}`],paper:["paper",`paperScroll${capitalize(u)}`,`paperWidth${capitalize(String(e))}`,a&&"paperFullWidth",L&&"paperFullScreen"]};return composeClasses(F,getDialogUtilityClass,t)},DialogRoot=styled(Modal,{name:"MuiDialog",slot:"Root",overridesResolver:(n,t)=>t.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.container,t[`scroll${capitalize(u.scroll)}`]]}})(({ownerState:n})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.paper,t[`scrollPaper${capitalize(u.scroll)}`],t[`paperWidth${capitalize(String(u.maxWidth))}`],u.fullWidth&&t.paperFullWidth,u.fullScreen&&t.paperFullScreen]}})(({theme:n,ownerState:t})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[t.maxWidth]}${n.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiDialog"}),a=useTheme$1(),L={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":F,"aria-labelledby":q,BackdropComponent:S,BackdropProps:E,children:p,className:w,disableEscapeKeyDown:D=!1,fullScreen:y=!1,fullWidth:m=!1,maxWidth:C="sm",onBackdropClick:b,onClick:h,onClose:v,open:M,PaperComponent:x=Paper,PaperProps:i={},scroll:f="paper",TransitionComponent:c=Fade,transitionDuration:d=L,TransitionProps:g}=e,N=_objectWithoutPropertiesLoose(e,_excluded$5),l=_extends({},e,{disableEscapeKeyDown:D,fullScreen:y,fullWidth:m,maxWidth:C,scroll:f}),T=useUtilityClasses$5(l),O=reactExports.useRef(),nt=it=>{O.current=it.target===it.currentTarget},G=it=>{h&&h(it),O.current&&(O.current=null,b&&b(it),v&&v(it,"backdropClick"))},Y=useId(q),z=reactExports.useMemo(()=>({titleId:Y}),[Y]);return jsxRuntimeExports.jsx(DialogRoot,_extends({className:clsx(T.root,w),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:d,as:S},E)},disableEscapeKeyDown:D,onClose:v,open:M,ref:u,onClick:G,ownerState:l},N,{children:jsxRuntimeExports.jsx(c,_extends({appear:!0,in:M,timeout:d,role:"presentation"},g,{children:jsxRuntimeExports.jsx(DialogContainer,{className:clsx(T.container),onMouseDown:nt,ownerState:l,children:jsxRuntimeExports.jsx(DialogPaper,_extends({as:x,elevation:24,role:"dialog","aria-describedby":F,"aria-labelledby":Y},i,{className:clsx(T.paper,i.className),ownerState:l,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:z,children:p})}))})}))}))});function getDialogContentUtilityClass(n){return generateUtilityClass("MuiDialogContent",n)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),_excluded$4=["className","dividers"],useUtilityClasses$4=n=>{const{classes:t,dividers:u}=n;return composeClasses({root:["root",u&&"dividers"]},getDialogContentUtilityClass,t)},DialogContentRoot=styled("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,u.dividers&&t.dividers]}})(({theme:n,ownerState:t})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiDialogContent"}),{className:a,dividers:L=!1}=e,F=_objectWithoutPropertiesLoose(e,_excluded$4),q=_extends({},e,{dividers:L}),S=useUtilityClasses$4(q);return jsxRuntimeExports.jsx(DialogContentRoot,_extends({className:clsx(S.root,a),ownerState:q,ref:u},F))}),GridContext=reactExports.createContext();function getGridUtilityClass(n){return generateUtilityClass("MuiGrid",n)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(n=>`spacing-xs-${n}`),...DIRECTIONS.map(n=>`direction-xs-${n}`),...WRAPS.map(n=>`wrap-xs-${n}`),...GRID_SIZES.map(n=>`grid-xs-${n}`),...GRID_SIZES.map(n=>`grid-sm-${n}`),...GRID_SIZES.map(n=>`grid-md-${n}`),...GRID_SIZES.map(n=>`grid-lg-${n}`),...GRID_SIZES.map(n=>`grid-xl-${n}`)]),_excluded$3=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(n){const t=parseFloat(n);return`${t}${String(n).replace(String(t),"")||"px"}`}function generateGrid({theme:n,ownerState:t}){let u;return n.breakpoints.keys.reduce((e,a)=>{let L={};if(t[a]&&(u=t[a]),!u)return e;if(u===!0)L={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(u==="auto")L={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const F=resolveBreakpointValues({values:t.columns,breakpoints:n.breakpoints.values}),q=typeof F=="object"?F[a]:F;if(q==null)return e;const S=`${Math.round(u/q*1e8)/1e6}%`;let E={};if(t.container&&t.item&&t.columnSpacing!==0){const p=n.spacing(t.columnSpacing);if(p!=="0px"){const w=`calc(${S} + ${getOffset(p)})`;E={flexBasis:w,maxWidth:w}}}L=_extends({flexBasis:S,flexGrow:0,maxWidth:S},E)}return n.breakpoints.values[a]===0?Object.assign(e,L):e[n.breakpoints.up(a)]=L,e},{})}function generateDirection({theme:n,ownerState:t}){const u=resolveBreakpointValues({values:t.direction,breakpoints:n.breakpoints.values});return handleBreakpoints({theme:n},u,e=>{const a={flexDirection:e};return e.indexOf("column")===0&&(a[`& > .${gridClasses.item}`]={maxWidth:"none"}),a})}function extractZeroValueBreakpointKeys({breakpoints:n,values:t}){let u="";Object.keys(t).forEach(a=>{u===""&&t[a]!==0&&(u=a)});const e=Object.keys(n).sort((a,L)=>n[a]-n[L]);return e.slice(0,e.indexOf(u))}function generateRowGap({theme:n,ownerState:t}){const{container:u,rowSpacing:e}=t;let a={};if(u&&e!==0){const L=resolveBreakpointValues({values:e,breakpoints:n.breakpoints.values});let F;typeof L=="object"&&(F=extractZeroValueBreakpointKeys({breakpoints:n.breakpoints.values,values:L})),a=handleBreakpoints({theme:n},L,(q,S)=>{var E;const p=n.spacing(q);return p!=="0px"?{marginTop:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(p)}}:(E=F)!=null&&E.includes(S)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return a}function generateColumnGap({theme:n,ownerState:t}){const{container:u,columnSpacing:e}=t;let a={};if(u&&e!==0){const L=resolveBreakpointValues({values:e,breakpoints:n.breakpoints.values});let F;typeof L=="object"&&(F=extractZeroValueBreakpointKeys({breakpoints:n.breakpoints.values,values:L})),a=handleBreakpoints({theme:n},L,(q,S)=>{var E;const p=n.spacing(q);return p!=="0px"?{width:`calc(100% + ${getOffset(p)})`,marginLeft:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(p)}}:(E=F)!=null&&E.includes(S)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return a}function resolveSpacingStyles(n,t,u={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[u[`spacing-xs-${String(n)}`]];const e=[];return t.forEach(a=>{const L=n[a];Number(L)>0&&e.push(u[`spacing-${a}-${String(L)}`])}),e}const GridRoot=styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n,{container:e,direction:a,item:L,spacing:F,wrap:q,zeroMinWidth:S,breakpoints:E}=u;let p=[];e&&(p=resolveSpacingStyles(F,E,t));const w=[];return E.forEach(D=>{const y=u[D];y&&w.push(t[`grid-${D}-${String(y)}`])}),[t.root,e&&t.container,L&&t.item,S&&t.zeroMinWidth,...p,a!=="row"&&t[`direction-xs-${String(a)}`],q!=="wrap"&&t[`wrap-xs-${String(q)}`],...w]}})(({ownerState:n})=>_extends({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(n,t){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const u=[];return t.forEach(e=>{const a=n[e];if(Number(a)>0){const L=`spacing-${e}-${String(a)}`;u.push(L)}}),u}const useUtilityClasses$3=n=>{const{classes:t,container:u,direction:e,item:a,spacing:L,wrap:F,zeroMinWidth:q,breakpoints:S}=n;let E=[];u&&(E=resolveSpacingClasses(L,S));const p=[];S.forEach(D=>{const y=n[D];y&&p.push(`grid-${D}-${String(y)}`)});const w={root:["root",u&&"container",a&&"item",q&&"zeroMinWidth",...E,e!=="row"&&`direction-xs-${String(e)}`,F!=="wrap"&&`wrap-xs-${String(F)}`,...p]};return composeClasses(w,getGridUtilityClass,t)},Grid=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiGrid"}),{breakpoints:a}=useTheme$1(),L=extendSxProp(e),{className:F,columns:q,columnSpacing:S,component:E="div",container:p=!1,direction:w="row",item:D=!1,rowSpacing:y,spacing:m=0,wrap:C="wrap",zeroMinWidth:b=!1}=L,h=_objectWithoutPropertiesLoose(L,_excluded$3),v=y||m,M=S||m,x=reactExports.useContext(GridContext),i=p?q||12:x,f={},c=_extends({},h);a.keys.forEach(N=>{h[N]!=null&&(f[N]=h[N],delete c[N])});const d=_extends({},L,{columns:i,container:p,direction:w,item:D,rowSpacing:v,columnSpacing:M,wrap:C,zeroMinWidth:b,spacing:m},f,{breakpoints:a.keys}),g=useUtilityClasses$3(d);return jsxRuntimeExports.jsx(GridContext.Provider,{value:i,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:d,className:clsx(g.root,F),as:E,ref:u},c))})});function getLinearProgressUtilityClass(n){return generateUtilityClass("MuiLinearProgress",n)}generateUtilityClasses("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const _excluded$2=["className","color","value","valueBuffer","variant"];let _=n=>n,_t,_t2,_t3,_t4,_t5,_t6;const TRANSITION_DURATION=4,indeterminate1Keyframe=keyframes(_t||(_t=_`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),indeterminate2Keyframe=keyframes(_t2||(_t2=_`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),bufferKeyframe=keyframes(_t3||(_t3=_`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),useUtilityClasses$2=n=>{const{classes:t,variant:u,color:e}=n,a={root:["root",`color${capitalize(e)}`,u],dashed:["dashed",`dashedColor${capitalize(e)}`],bar1:["bar",`barColor${capitalize(e)}`,(u==="indeterminate"||u==="query")&&"bar1Indeterminate",u==="determinate"&&"bar1Determinate",u==="buffer"&&"bar1Buffer"],bar2:["bar",u!=="buffer"&&`barColor${capitalize(e)}`,u==="buffer"&&`color${capitalize(e)}`,(u==="indeterminate"||u==="query")&&"bar2Indeterminate",u==="buffer"&&"bar2Buffer"]};return composeClasses(a,getLinearProgressUtilityClass,t)},getColorShade=(n,t)=>t==="inherit"?"currentColor":n.vars?n.vars.palette.LinearProgress[`${t}Bg`]:n.palette.mode==="light"?lighten_1(n.palette[t].main,.62):darken_1(n.palette[t].main,.5),LinearProgressRoot=styled("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,t[`color${capitalize(u.color)}`],t[u.variant]]}})(({ownerState:n,theme:t})=>_extends({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:getColorShade(t,n.color)},n.color==="inherit"&&n.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},n.variant==="buffer"&&{backgroundColor:"transparent"},n.variant==="query"&&{transform:"rotate(180deg)"})),LinearProgressDashed=styled("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.dashed,t[`dashedColor${capitalize(u.color)}`]]}})(({ownerState:n,theme:t})=>{const u=getColorShade(t,n.color);return _extends({position:"absolute",marginTop:0,height:"100%",width:"100%"},n.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${u} 0%, ${u} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},css(_t4||(_t4=_`
    animation: ${0} 3s infinite linear;
  `),bufferKeyframe)),LinearProgressBar1=styled("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.bar,t[`barColor${capitalize(u.color)}`],(u.variant==="indeterminate"||u.variant==="query")&&t.bar1Indeterminate,u.variant==="determinate"&&t.bar1Determinate,u.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:n,theme:t})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:n.color==="inherit"?"currentColor":(t.vars||t).palette[n.color].main},n.variant==="determinate"&&{transition:`transform .${TRANSITION_DURATION}s linear`},n.variant==="buffer"&&{zIndex:1,transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:n})=>(n.variant==="indeterminate"||n.variant==="query")&&css(_t5||(_t5=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),indeterminate1Keyframe)),LinearProgressBar2=styled("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.bar,t[`barColor${capitalize(u.color)}`],(u.variant==="indeterminate"||u.variant==="query")&&t.bar2Indeterminate,u.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:n,theme:t})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},n.variant!=="buffer"&&{backgroundColor:n.color==="inherit"?"currentColor":(t.vars||t).palette[n.color].main},n.color==="inherit"&&{opacity:.3},n.variant==="buffer"&&{backgroundColor:getColorShade(t,n.color),transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:n})=>(n.variant==="indeterminate"||n.variant==="query")&&css(_t6||(_t6=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),indeterminate2Keyframe)),LinearProgress=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiLinearProgress"}),{className:a,color:L="primary",value:F,valueBuffer:q,variant:S="indeterminate"}=e,E=_objectWithoutPropertiesLoose(e,_excluded$2),p=_extends({},e,{color:L,variant:S}),w=useUtilityClasses$2(p),D=useRtl(),y={},m={bar1:{},bar2:{}};if((S==="determinate"||S==="buffer")&&F!==void 0){y["aria-valuenow"]=Math.round(F),y["aria-valuemin"]=0,y["aria-valuemax"]=100;let C=F-100;D&&(C=-C),m.bar1.transform=`translateX(${C}%)`}if(S==="buffer"&&q!==void 0){let C=(q||0)-100;D&&(C=-C),m.bar2.transform=`translateX(${C}%)`}return jsxRuntimeExports.jsxs(LinearProgressRoot,_extends({className:clsx(w.root,a),ownerState:p,role:"progressbar"},y,{ref:u},E,{children:[S==="buffer"?jsxRuntimeExports.jsx(LinearProgressDashed,{className:w.dashed,ownerState:p}):null,jsxRuntimeExports.jsx(LinearProgressBar1,{className:w.bar1,ownerState:p,style:m.bar1}),S==="determinate"?null:jsxRuntimeExports.jsx(LinearProgressBar2,{className:w.bar2,ownerState:p,style:m.bar2})]}))});function useSnackbar(n={}){const{autoHideDuration:t=null,disableWindowBlurListener:u=!1,onClose:e,open:a,resumeHideDuration:L}=n,F=useTimeout();reactExports.useEffect(()=>{if(!a)return;function h(v){v.defaultPrevented||(v.key==="Escape"||v.key==="Esc")&&(e==null||e(v,"escapeKeyDown"))}return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[a,e]);const q=useEventCallback((h,v)=>{e==null||e(h,v)}),S=useEventCallback(h=>{!e||h==null||F.start(h,()=>{q(null,"timeout")})});reactExports.useEffect(()=>(a&&S(t),F.clear),[a,t,S,F]);const E=h=>{e==null||e(h,"clickaway")},p=F.clear,w=reactExports.useCallback(()=>{t!=null&&S(L??t*.5)},[t,L,S]),D=h=>v=>{const M=h.onBlur;M==null||M(v),w()},y=h=>v=>{const M=h.onFocus;M==null||M(v),p()},m=h=>v=>{const M=h.onMouseEnter;M==null||M(v),p()},C=h=>v=>{const M=h.onMouseLeave;M==null||M(v),w()};return reactExports.useEffect(()=>{if(!u&&a)return window.addEventListener("focus",w),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",w),window.removeEventListener("blur",p)}},[u,a,w,p]),{getRootProps:(h={})=>{const v=_extends({},extractEventHandlers(n),extractEventHandlers(h));return _extends({role:"presentation"},h,v,{onBlur:D(v),onFocus:y(v),onMouseEnter:m(v),onMouseLeave:C(v)})},onClickAway:E}}function getSnackbarContentUtilityClass(n){return generateUtilityClass("MuiSnackbarContent",n)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$1=["action","className","message","role"],useUtilityClasses$1=n=>{const{classes:t}=n;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,t)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(n,t)=>t.root})(({theme:n})=>{const t=n.palette.mode==="light"?.8:.98,u=emphasize_1(n.palette.background.default,t);return _extends({},n.typography.body2,{color:n.vars?n.vars.palette.SnackbarContent.color:n.palette.getContrastText(u),backgroundColor:n.vars?n.vars.palette.SnackbarContent.bg:u,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,flexGrow:1,[n.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(n,t)=>t.message})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(n,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiSnackbarContent"}),{action:a,className:L,message:F,role:q="alert"}=e,S=_objectWithoutPropertiesLoose(e,_excluded$1),E=e,p=useUtilityClasses$1(E);return jsxRuntimeExports.jsxs(SnackbarContentRoot,_extends({role:q,square:!0,elevation:6,className:clsx(p.root,L),ownerState:E,ref:u},S,{children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:p.message,ownerState:E,children:F}),a?jsxRuntimeExports.jsx(SnackbarContentAction,{className:p.action,ownerState:E,children:a}):null]}))});function getSnackbarUtilityClass(n){return generateUtilityClass("MuiSnackbar",n)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded=["onEnter","onExited"],_excluded2=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses=n=>{const{classes:t,anchorOrigin:u}=n,e={root:["root",`anchorOrigin${capitalize(u.vertical)}${capitalize(u.horizontal)}`]};return composeClasses(e,getSnackbarUtilityClass,t)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:u}=n;return[t.root,t[`anchorOrigin${capitalize(u.anchorOrigin.vertical)}${capitalize(u.anchorOrigin.horizontal)}`]]}})(({theme:n,ownerState:t})=>{const u={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(n.vars||n).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[n.breakpoints.up("sm")]:_extends({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&u,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(t,u){const e=useDefaultProps({props:t,name:"MuiSnackbar"}),a=useTheme$1(),L={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:F,anchorOrigin:{vertical:q,horizontal:S}={vertical:"bottom",horizontal:"left"},autoHideDuration:E=null,children:p,className:w,ClickAwayListenerProps:D,ContentProps:y,disableWindowBlurListener:m=!1,message:C,open:b,TransitionComponent:h=Grow,transitionDuration:v=L,TransitionProps:{onEnter:M,onExited:x}={}}=e,i=_objectWithoutPropertiesLoose(e.TransitionProps,_excluded),f=_objectWithoutPropertiesLoose(e,_excluded2),c=_extends({},e,{anchorOrigin:{vertical:q,horizontal:S},autoHideDuration:E,disableWindowBlurListener:m,TransitionComponent:h,transitionDuration:v}),d=useUtilityClasses(c),{getRootProps:g,onClickAway:N}=useSnackbar(_extends({},c)),[l,T]=reactExports.useState(!0),O=useSlotProps({elementType:SnackbarRoot,getSlotProps:g,externalForwardedProps:f,ownerState:c,additionalProps:{ref:u},className:[d.root,w]}),nt=Y=>{T(!0),x&&x(Y)},G=(Y,z)=>{T(!1),M&&M(Y,z)};return!b&&l?null:jsxRuntimeExports.jsx(ClickAwayListener,_extends({onClickAway:N},D,{children:jsxRuntimeExports.jsx(SnackbarRoot,_extends({},O,{children:jsxRuntimeExports.jsx(h,_extends({appear:!0,in:b,timeout:v,direction:q==="top"?"down":"up",onEnter:G,onExited:nt},i,{children:p||jsxRuntimeExports.jsx(SnackbarContent,_extends({message:C,action:F},y))}))}))}))});var CloudUpload={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1$3=CloudUpload.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=CloudUpload.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var MenuBook={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(MenuBook,"__esModule",{value:!0});var default_1$2=MenuBook.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=MenuBook.default=(0,_createSvgIcon$2.default)([(0,_jsxRuntime$2.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,_jsxRuntime$2.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var Preview={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Preview,"__esModule",{value:!0});var default_1$1=Preview.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Preview.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,u){module.exports=t.pdfjsLib=u()})(globalThis,()=>(()=>{var __webpack_modules__=[,(n,t)=>{var Yt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=I,t.bytesToString=ut,t.createValidAbsoluteUrl=st,t.getModificationDate=Pt,t.getUuid=Nt,t.getVerbosityLevel=G,t.info=Y,t.isArrayBuffer=et,t.isArrayEqual=Tt,t.isNodeJS=void 0,t.normalizeUnicode=Ft,t.objectFromMap=vt,t.objectSize=bt,t.setVerbosityLevel=nt,t.shadow=R,t.string32=yt,t.stringToBytes=ft,t.stringToPDFString=gt,t.stringToUTF8String=xt,t.unreachable=it,t.utf8StringToString=Et,t.warn=z;const u=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=u;const e=[1,0,0,1,0,0];t.IDENTITY_MATRIX=e;const a=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=a;const L=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=L;const F=1.35;t.LINE_FACTOR=F;const q=.35;t.LINE_DESCENT_FACTOR=q;const S=q/F;t.BASELINE_FACTOR=S;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=E;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=p;const w="pdfjs_internal_editor_";t.AnnotationEditorPrefix=w;const D={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=D;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=y;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=m;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=C;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=b;const h={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=h;const v={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=v;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=M;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=x;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=i;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=f;const c={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=c;const d={O:"PageOpen",C:"PageClose"};t.PageActionEventType=d;const g={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=g;const N={NONE:0,BINARY:1};t.CMapCompressionType=N;const l={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=l;const T={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=T;let O=g.WARNINGS;function nt(St){Number.isInteger(St)&&(O=St)}function G(){return O}function Y(St){O>=g.INFOS&&console.log(`Info: ${St}`)}function z(St){O>=g.WARNINGS&&console.log(`Warning: ${St}`)}function it(St){throw new Error(St)}function I(St,lt){St||it(lt)}function V(St){switch(St==null?void 0:St.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function st(St,lt=null,dt=null){if(!St)return null;try{if(dt&&typeof St=="string"){if(dt.addDefaultProtocol&&St.startsWith("www.")){const Xt=St.match(/\./g);(Xt==null?void 0:Xt.length)>=2&&(St=`http://${St}`)}if(dt.tryConvertEncoding)try{St=xt(St)}catch{}}const Mt=lt?new URL(St,lt):new URL(St);if(V(Mt))return Mt}catch{}return null}function R(St,lt,dt,Mt=!1){return Object.defineProperty(St,lt,{value:dt,enumerable:!Mt,configurable:!0,writable:!1}),dt}const r=function(){function lt(dt,Mt){this.constructor===lt&&it("Cannot initialize BaseException."),this.message=dt,this.name=Mt}return lt.prototype=new Error,lt.constructor=lt,lt}();t.BaseException=r;class o extends r{constructor(lt,dt){super(lt,"PasswordException"),this.code=dt}}t.PasswordException=o;class A extends r{constructor(lt,dt){super(lt,"UnknownErrorException"),this.details=dt}}t.UnknownErrorException=A;class B extends r{constructor(lt){super(lt,"InvalidPDFException")}}t.InvalidPDFException=B;class U extends r{constructor(lt){super(lt,"MissingPDFException")}}t.MissingPDFException=U;class $ extends r{constructor(lt,dt){super(lt,"UnexpectedResponseException"),this.status=dt}}t.UnexpectedResponseException=$;class K extends r{constructor(lt){super(lt,"FormatError")}}t.FormatError=K;class rt extends r{constructor(lt){super(lt,"AbortException")}}t.AbortException=rt;function ut(St){(typeof St!="object"||(St==null?void 0:St.length)===void 0)&&it("Invalid argument for bytesToString");const lt=St.length,dt=8192;if(lt<dt)return String.fromCharCode.apply(null,St);const Mt=[];for(let Xt=0;Xt<lt;Xt+=dt){const Vt=Math.min(Xt+dt,lt),H=St.subarray(Xt,Vt);Mt.push(String.fromCharCode.apply(null,H))}return Mt.join("")}function ft(St){typeof St!="string"&&it("Invalid argument for stringToBytes");const lt=St.length,dt=new Uint8Array(lt);for(let Mt=0;Mt<lt;++Mt)dt[Mt]=St.charCodeAt(Mt)&255;return dt}function yt(St){return String.fromCharCode(St>>24&255,St>>16&255,St>>8&255,St&255)}function bt(St){return Object.keys(St).length}function vt(St){const lt=Object.create(null);for(const[dt,Mt]of St)lt[dt]=Mt;return lt}function Z(){const St=new Uint8Array(4);return St[0]=1,new Uint32Array(St.buffer,0,1)[0]===1}function tt(){try{return new Function(""),!0}catch{return!1}}class P{static get isLittleEndian(){return R(this,"isLittleEndian",Z())}static get isEvalSupported(){return R(this,"isEvalSupported",tt())}static get isOffscreenCanvasSupported(){return R(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?R(this,"platform",{isWin:!1,isMac:!1}):R(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var lt,dt;return R(this,"isCSSRoundSupported",(dt=(lt=globalThis.CSS)==null?void 0:lt.supports)==null?void 0:dt.call(lt,"width: round(1.5px, 1px)"))}}t.FeatureTest=P;const W=[...Array(256).keys()].map(St=>St.toString(16).padStart(2,"0"));class J{static makeHexColor(lt,dt,Mt){return`#${W[lt]}${W[dt]}${W[Mt]}`}static scaleMinMax(lt,dt){let Mt;lt[0]?(lt[0]<0&&(Mt=dt[0],dt[0]=dt[1],dt[1]=Mt),dt[0]*=lt[0],dt[1]*=lt[0],lt[3]<0&&(Mt=dt[2],dt[2]=dt[3],dt[3]=Mt),dt[2]*=lt[3],dt[3]*=lt[3]):(Mt=dt[0],dt[0]=dt[2],dt[2]=Mt,Mt=dt[1],dt[1]=dt[3],dt[3]=Mt,lt[1]<0&&(Mt=dt[2],dt[2]=dt[3],dt[3]=Mt),dt[2]*=lt[1],dt[3]*=lt[1],lt[2]<0&&(Mt=dt[0],dt[0]=dt[1],dt[1]=Mt),dt[0]*=lt[2],dt[1]*=lt[2]),dt[0]+=lt[4],dt[1]+=lt[4],dt[2]+=lt[5],dt[3]+=lt[5]}static transform(lt,dt){return[lt[0]*dt[0]+lt[2]*dt[1],lt[1]*dt[0]+lt[3]*dt[1],lt[0]*dt[2]+lt[2]*dt[3],lt[1]*dt[2]+lt[3]*dt[3],lt[0]*dt[4]+lt[2]*dt[5]+lt[4],lt[1]*dt[4]+lt[3]*dt[5]+lt[5]]}static applyTransform(lt,dt){const Mt=lt[0]*dt[0]+lt[1]*dt[2]+dt[4],Xt=lt[0]*dt[1]+lt[1]*dt[3]+dt[5];return[Mt,Xt]}static applyInverseTransform(lt,dt){const Mt=dt[0]*dt[3]-dt[1]*dt[2],Xt=(lt[0]*dt[3]-lt[1]*dt[2]+dt[2]*dt[5]-dt[4]*dt[3])/Mt,Vt=(-lt[0]*dt[1]+lt[1]*dt[0]+dt[4]*dt[1]-dt[5]*dt[0])/Mt;return[Xt,Vt]}static getAxialAlignedBoundingBox(lt,dt){const Mt=this.applyTransform(lt,dt),Xt=this.applyTransform(lt.slice(2,4),dt),Vt=this.applyTransform([lt[0],lt[3]],dt),H=this.applyTransform([lt[2],lt[1]],dt);return[Math.min(Mt[0],Xt[0],Vt[0],H[0]),Math.min(Mt[1],Xt[1],Vt[1],H[1]),Math.max(Mt[0],Xt[0],Vt[0],H[0]),Math.max(Mt[1],Xt[1],Vt[1],H[1])]}static inverseTransform(lt){const dt=lt[0]*lt[3]-lt[1]*lt[2];return[lt[3]/dt,-lt[1]/dt,-lt[2]/dt,lt[0]/dt,(lt[2]*lt[5]-lt[4]*lt[3])/dt,(lt[4]*lt[1]-lt[5]*lt[0])/dt]}static singularValueDecompose2dScale(lt){const dt=[lt[0],lt[2],lt[1],lt[3]],Mt=lt[0]*dt[0]+lt[1]*dt[2],Xt=lt[0]*dt[1]+lt[1]*dt[3],Vt=lt[2]*dt[0]+lt[3]*dt[2],H=lt[2]*dt[1]+lt[3]*dt[3],mt=(Mt+H)/2,wt=Math.sqrt((Mt+H)**2-4*(Mt*H-Vt*Xt))/2,It=mt+wt||1,Bt=mt-wt||1;return[Math.sqrt(It),Math.sqrt(Bt)]}static normalizeRect(lt){const dt=lt.slice(0);return lt[0]>lt[2]&&(dt[0]=lt[2],dt[2]=lt[0]),lt[1]>lt[3]&&(dt[1]=lt[3],dt[3]=lt[1]),dt}static intersect(lt,dt){const Mt=Math.max(Math.min(lt[0],lt[2]),Math.min(dt[0],dt[2])),Xt=Math.min(Math.max(lt[0],lt[2]),Math.max(dt[0],dt[2]));if(Mt>Xt)return null;const Vt=Math.max(Math.min(lt[1],lt[3]),Math.min(dt[1],dt[3])),H=Math.min(Math.max(lt[1],lt[3]),Math.max(dt[1],dt[3]));return Vt>H?null:[Mt,Vt,Xt,H]}static bezierBoundingBox(lt,dt,Mt,Xt,Vt,H,mt,wt){const It=[],Bt=[[],[]];let kt,j,k,X,ht,pt,At,Ct;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(j=6*lt-12*Mt+6*Vt,kt=-3*lt+9*Mt-9*Vt+3*mt,k=3*Mt-3*lt):(j=6*dt-12*Xt+6*H,kt=-3*dt+9*Xt-9*H+3*wt,k=3*Xt-3*dt),Math.abs(kt)<1e-12){if(Math.abs(j)<1e-12)continue;X=-k/j,0<X&&X<1&&It.push(X);continue}At=j*j-4*k*kt,Ct=Math.sqrt(At),!(At<0)&&(ht=(-j+Ct)/(2*kt),0<ht&&ht<1&&It.push(ht),pt=(-j-Ct)/(2*kt),0<pt&&pt<1&&It.push(pt))}let Ot=It.length,Dt;const Rt=Ot;for(;Ot--;)X=It[Ot],Dt=1-X,Bt[0][Ot]=Dt*Dt*Dt*lt+3*Dt*Dt*X*Mt+3*Dt*X*X*Vt+X*X*X*mt,Bt[1][Ot]=Dt*Dt*Dt*dt+3*Dt*Dt*X*Xt+3*Dt*X*X*H+X*X*X*wt;return Bt[0][Rt]=lt,Bt[1][Rt]=dt,Bt[0][Rt+1]=mt,Bt[1][Rt+1]=wt,Bt[0].length=Bt[1].length=Rt+2,[Math.min(...Bt[0]),Math.min(...Bt[1]),Math.max(...Bt[0]),Math.max(...Bt[1])]}}t.Util=J;const at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(St){if(St[0]>="ï"){let dt;if(St[0]==="þ"&&St[1]==="ÿ"?dt="utf-16be":St[0]==="ÿ"&&St[1]==="þ"?dt="utf-16le":St[0]==="ï"&&St[1]==="»"&&St[2]==="¿"&&(dt="utf-8"),dt)try{const Mt=new TextDecoder(dt,{fatal:!0}),Xt=ft(St);return Mt.decode(Xt)}catch(Mt){z(`stringToPDFString: "${Mt}".`)}}const lt=[];for(let dt=0,Mt=St.length;dt<Mt;dt++){const Xt=at[St.charCodeAt(dt)];lt.push(Xt?String.fromCharCode(Xt):St.charAt(dt))}return lt.join("")}function xt(St){return decodeURIComponent(escape(St))}function Et(St){return unescape(encodeURIComponent(St))}function et(St){return typeof St=="object"&&(St==null?void 0:St.byteLength)!==void 0}function Tt(St,lt){if(St.length!==lt.length)return!1;for(let dt=0,Mt=St.length;dt<Mt;dt++)if(St[dt]!==lt[dt])return!1;return!0}function Pt(St=new Date){return[St.getUTCFullYear().toString(),(St.getUTCMonth()+1).toString().padStart(2,"0"),St.getUTCDate().toString().padStart(2,"0"),St.getUTCHours().toString().padStart(2,"0"),St.getUTCMinutes().toString().padStart(2,"0"),St.getUTCSeconds().toString().padStart(2,"0")].join("")}class Wt{constructor(){ot(this,Yt,!1);this.promise=new Promise((lt,dt)=>{this.resolve=Mt=>{ct(this,Yt,!0),lt(Mt)},this.reject=Mt=>{ct(this,Yt,!0),dt(Mt)}})}get settled(){return s(this,Yt)}}Yt=new WeakMap,t.PromiseCapability=Wt;let Ut=null,qt=null;function Ft(St){return Ut||(Ut=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qt=new Map([["ﬅ","ſt"]])),St.replaceAll(Ut,(lt,dt,Mt)=>dt?dt.normalize("NFKC"):qt.get(Mt))}function Nt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const St=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(St);else for(let lt=0;lt<32;lt++)St[lt]=Math.floor(Math.random()*255);return ut(St)}const zt="pdfjs_internal_id_";t.AnnotationPrefix=zt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var n,u,e,a,oe,ve,q,S,E,p,w,D,y,m,C,Ae,h,v,Ie,x,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(c){if(typeof c=="string"||c instanceof URL?c={url:c}:(0,_util.isArrayBuffer)(c)&&(c={data:c}),typeof c!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const d=new PDFDocumentLoadingTask,{docId:g}=d,N=c.url?getUrlProp(c.url):null,l=c.data?getDataProp(c.data):null,T=c.httpHeaders||null,O=c.withCredentials===!0,nt=c.password??null,G=c.range instanceof PDFDataRangeTransport?c.range:null,Y=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let z=c.worker instanceof PDFWorker?c.worker:null;const it=c.verbosity,I=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,V=typeof c.cMapUrl=="string"?c.cMapUrl:null,st=c.cMapPacked!==!1,R=c.CMapReaderFactory||DefaultCMapReaderFactory,r=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,o=c.StandardFontDataFactory||DefaultStandardFontDataFactory,A=c.stopAtErrors!==!0,B=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,U=c.isEvalSupported!==!1,$=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_util.isNodeJS,K=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,rt=typeof c.disableFontFace=="boolean"?c.disableFontFace:_util.isNodeJS,ut=c.fontExtraProperties===!0,ft=c.enableXfa===!0,yt=c.ownerDocument||globalThis.document,bt=c.disableRange===!0,vt=c.disableStream===!0,Z=c.disableAutoFetch===!0,tt=c.pdfBug===!0,P=G?G.length:c.length??NaN,W=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_util.isNodeJS&&!rt,J=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:R===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&V&&r&&(0,_display_utils.isValidFetchUrl)(V,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(r,document.baseURI),at=c.canvasFactory||new DefaultCanvasFactory({ownerDocument:yt}),gt=c.filterFactory||new DefaultFilterFactory({docId:g,ownerDocument:yt}),xt=null;(0,_util.setVerbosityLevel)(it);const Et={canvasFactory:at,filterFactory:gt};if(J||(Et.cMapReaderFactory=new R({baseUrl:V,isCompressed:st}),Et.standardFontDataFactory=new o({baseUrl:r})),!z){const Pt={verbosity:it,port:_worker_options.GlobalWorkerOptions.workerPort};z=Pt.port?PDFWorker.fromPort(Pt):new PDFWorker(Pt),d._worker=z}const et={docId:g,apiVersion:"3.11.174",data:l,password:nt,disableAutoFetch:Z,rangeChunkSize:Y,length:P,docBaseUrl:I,enableXfa:ft,evaluatorOptions:{maxImageSize:B,disableFontFace:rt,ignoreErrors:A,isEvalSupported:U,isOffscreenCanvasSupported:$,canvasMaxAreaInBytes:K,fontExtraProperties:ut,useSystemFonts:W,cMapUrl:J?V:null,standardFontDataUrl:J?r:null}},Tt={ignoreErrors:A,isEvalSupported:U,disableFontFace:rt,fontExtraProperties:ut,enableXfa:ft,ownerDocument:yt,disableAutoFetch:Z,pdfBug:tt,styleElement:xt};return z.promise.then(function(){if(d.destroyed)throw new Error("Loading aborted");const Pt=_fetchDocument(z,et),Wt=new Promise(function(Ut){let qt;G?qt=new _transport_stream.PDFDataTransportStream({length:P,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:bt,disableStream:vt},G):l||(qt=(Nt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Nt):(0,_display_utils.isValidFetchUrl)(Nt.url)?new _displayFetch_stream.PDFFetchStream(Nt):new _displayNetwork.PDFNetworkStream(Nt))({url:N,length:P,httpHeaders:T,withCredentials:O,rangeChunkSize:Y,disableRange:bt,disableStream:vt})),Ut(qt)});return Promise.all([Pt,Wt]).then(function([Ut,qt]){if(d.destroyed)throw new Error("Loading aborted");const Ft=new _message_handler.MessageHandler(g,Ut,z.port),Nt=new WorkerTransport(Ft,d,qt,Tt,Et);d._transport=Nt,Ft.send("Ready",null)})}).catch(d._capability.reject),d}async function _fetchDocument(c,d){if(c.destroyed)throw new Error("Worker was destroyed");const g=await c.messageHandler.sendWithPromise("GetDocRequest",d,d.data?[d.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return g}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_util.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_util.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${he(t,n)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var d,g,N;this.destroyed=!0;try{(d=this._worker)!=null&&d.port&&(this._worker._pendingDestroy=!0),await((g=this._transport)==null?void 0:g.destroy())}catch(l){throw(N=this._worker)!=null&&N.port&&delete this._worker._pendingDestroy,l}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};n=new WeakMap,ot(t,n,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(d,g,N=!1,l=null){this.length=d,this.initialData=g,this.progressiveDone=N,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(d){this._rangeListeners.push(d)}addProgressListener(d){this._progressListeners.push(d)}addProgressiveReadListener(d){this._progressiveReadListeners.push(d)}addProgressiveDoneListener(d){this._progressiveDoneListeners.push(d)}onDataRange(d,g){for(const N of this._rangeListeners)N(d,g)}onDataProgress(d,g){this._readyCapability.promise.then(()=>{for(const N of this._progressListeners)N(d,g)})}onDataProgressiveRead(d){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(d)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const d of this._progressiveDoneListeners)d()})}transportReady(){this._readyCapability.resolve()}requestDataRange(d,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(d,g){this._pdfInfo=d,this._transport=g,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(N=>{if(!N)return N;const l=[];for(const T in N)l.push(...N[T]);return l}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(d){return this._transport.getPage(d)}getPageIndex(d){return this._transport.getPageIndex(d)}getDestinations(){return this._transport.getDestinations()}getDestination(d){return this._transport.getDestination(d)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(d=!1){return this._transport.startCleanup(d||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(d,g,N,l=!1){ot(this,a);ot(this,u,null);ot(this,e,!1);this._pageIndex=d,this._pageInfo=g,this._transport=N,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=N.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:d,rotation:g=this.rotate,offsetX:N=0,offsetY:l=0,dontFlip:T=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:d,rotation:g,offsetX:N,offsetY:l,dontFlip:T})}getAnnotations({intent:d="display"}={}){const g=this._transport.getRenderingIntent(d);return this._transport.getAnnotations(this._pageIndex,g.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var d;return((d=this._transport._htmlForXfa)==null?void 0:d.children[this._pageIndex])||null}render({canvasContext:d,viewport:g,intent:N="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:T=null,background:O=null,optionalContentConfigPromise:nt=null,annotationCanvasMap:G=null,pageColors:Y=null,printAnnotationStorage:z=null}){var o,A;(o=this._stats)==null||o.time("Overall");const it=this._transport.getRenderingIntent(N,l,z);ct(this,e,!1),Q(this,a,ve).call(this),nt||(nt=this._transport.getOptionalContentConfig());let I=this._intentStates.get(it.cacheKey);I||(I=Object.create(null),this._intentStates.set(it.cacheKey,I)),I.streamReaderCancelTimeout&&(clearTimeout(I.streamReaderCancelTimeout),I.streamReaderCancelTimeout=null);const V=!!(it.renderingIntent&_util.RenderingIntentFlag.PRINT);I.displayReadyCapability||(I.displayReadyCapability=new _util.PromiseCapability,I.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(it));const st=B=>{var U,$;I.renderTasks.delete(R),(this._maybeCleanupAfterRender||V)&&ct(this,e,!0),Q(this,a,oe).call(this,!V),B?(R.capability.reject(B),this._abortOperatorList({intentState:I,reason:B instanceof Error?B:new Error(B)})):R.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),($=this._stats)==null||$.timeEnd("Overall")},R=new InternalRenderTask({callback:st,params:{canvasContext:d,viewport:g,transform:T,background:O},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:I.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!V,pdfBug:this._pdfBug,pageColors:Y});(I.renderTasks||(I.renderTasks=new Set)).add(R);const r=R.task;return Promise.all([I.displayReadyCapability.promise,nt]).then(([B,U])=>{var $;if(this.destroyed){st();return}($=this._stats)==null||$.time("Rendering"),R.initializeGraphics({transparency:B,optionalContentConfig:U}),R.operatorListChanged()}).catch(st),r}getOperatorList({intent:d="display",annotationMode:g=_util.AnnotationMode.ENABLE,printAnnotationStorage:N=null}={}){var G;function l(){O.operatorList.lastChunk&&(O.opListReadCapability.resolve(O.operatorList),O.renderTasks.delete(nt))}const T=this._transport.getRenderingIntent(d,g,N,!0);let O=this._intentStates.get(T.cacheKey);O||(O=Object.create(null),this._intentStates.set(T.cacheKey,O));let nt;return O.opListReadCapability||(nt=Object.create(null),nt.operatorListChanged=l,O.opListReadCapability=new _util.PromiseCapability,(O.renderTasks||(O.renderTasks=new Set)).add(nt),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(T)),O.opListReadCapability.promise}streamTextContent({includeMarkedContent:d=!1,disableNormalization:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:d===!0,disableNormalization:g===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(d={}){if(this._transport._htmlForXfa)return this.getXfa().then(N=>_xfa_text.XfaText.textContent(N));const g=this.streamTextContent(d);return new Promise(function(N,l){function T(){O.read().then(function({value:G,done:Y}){if(Y){N(nt);return}Object.assign(nt.styles,G.styles),nt.items.push(...G.items),T()},l)}const O=g.getReader(),nt={items:[],styles:Object.create(null)};T()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const d=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const N of g.renderTasks)d.push(N.completed),N.cancel();return this.objs.clear(),ct(this,e,!1),Q(this,a,ve).call(this),Promise.all(d)}cleanup(d=!1){ct(this,e,!0);const g=Q(this,a,oe).call(this,!1);return d&&g&&this._stats&&(this._stats=new _display_utils.StatTimer),g}_startRenderPage(d,g){var l,T;const N=this._intentStates.get(g);N&&((l=this._stats)==null||l.timeEnd("Page Request"),(T=N.displayReadyCapability)==null||T.resolve(d))}_renderPageChunk(d,g){for(let N=0,l=d.length;N<l;N++)g.operatorList.fnArray.push(d.fnArray[N]),g.operatorList.argsArray.push(d.argsArray[N]);g.operatorList.lastChunk=d.lastChunk,g.operatorList.separateAnnots=d.separateAnnots;for(const N of g.renderTasks)N.operatorListChanged();d.lastChunk&&Q(this,a,oe).call(this,!0)}_pumpOperatorList({renderingIntent:d,cacheKey:g,annotationStorageSerializable:N}){const{map:l,transfers:T}=N,nt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:d,cacheKey:g,annotationStorage:l},T).getReader(),G=this._intentStates.get(g);G.streamReader=nt;const Y=()=>{nt.read().then(({value:z,done:it})=>{if(it){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(z,G),Y())},z=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const it of G.renderTasks)it.operatorListChanged();Q(this,a,oe).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(z);else if(G.opListReadCapability)G.opListReadCapability.reject(z);else throw z}})};Y()}_abortOperatorList({intentState:d,reason:g,force:N=!1}){if(d.streamReader){if(d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null),!N){if(d.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;g.extraDelay>0&&g.extraDelay<1e3&&(l+=g.extraDelay),d.streamReaderCancelTimeout=setTimeout(()=>{d.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:d,reason:g,force:!0})},l);return}}if(d.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),d.streamReader=null,!this._transport.destroyed){for(const[l,T]of this._intentStates)if(T===d){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}u=new WeakMap,e=new WeakMap,a=new WeakSet,oe=function(d=!1){if(Q(this,a,ve).call(this),!s(this,e)||this.destroyed)return!1;if(d)return ct(this,u,setTimeout(()=>{ct(this,u,null),Q(this,a,oe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:g,operatorList:N}of this._intentStates.values())if(g.size>0||!N.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ct(this,e,!1),!0},ve=function(){s(this,u)&&(clearTimeout(s(this,u)),ct(this,u,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ot(this,q,new Set);ot(this,S,Promise.resolve())}postMessage(d,g){const N={data:structuredClone(d,g?{transfer:g}:null)};s(this,S).then(()=>{for(const l of s(this,q))l.call(this,N)})}addEventListener(d,g){s(this,q).add(g)}removeEventListener(d,g){s(this,q).delete(g)}terminate(){s(this,q).clear()}}q=new WeakMap,S=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(E=document==null?void 0:document.currentScript)==null?void 0:E.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,d){let g;try{if(g=new URL(c),!g.origin||g.origin==="null")return!1}catch{return!1}const N=new URL(d,g);return g.origin===N.origin},PDFWorkerUtil.createCDNWrapper=function(c){const d=`importScripts("${c}");`;return URL.createObjectURL(new Blob([d]))}}const _PDFWorker=class _PDFWorker{constructor({name:c=null,port:d=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){var N;if(this.name=c,this.destroyed=!1,this.verbosity=g,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,d){if((N=s(_PDFWorker,p))!=null&&N.has(d))throw new Error("Cannot use more than one PDFWorker per port.");(s(_PDFWorker,p)||ct(_PDFWorker,p,new WeakMap)).set(d,this),this._initializeFromPort(d);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const d=new Worker(c),g=new _message_handler.MessageHandler("main","worker",d),N=()=>{d.removeEventListener("error",l),g.destroy(),d.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||N()};d.addEventListener("error",l),g.on("test",O=>{if(d.removeEventListener("error",l),this.destroyed){N();return}O?(this._messageHandler=g,this._port=d,this._webWorker=d,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),d.terminate())}),g.on("ready",O=>{if(d.removeEventListener("error",l),this.destroyed){N();return}try{T()}catch{this._setupFakeWorker()}});const T=()=>{const O=new Uint8Array;g.send("test",O,[O.buffer])};T();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const d=new LoopbackPort;this._port=d;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,N=new _message_handler.MessageHandler(g+"_worker",g,d);c.setup(N,d);const l=new _message_handler.MessageHandler(g,g+"_worker",d);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){var c;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(c=s(_PDFWorker,p))==null||c.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){var g;if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const d=(g=s(this,p))==null?void 0:g.get(c.port);if(d){if(d._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return d}return new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};p=new WeakMap,ot(_PDFWorker,p);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(d,g,N,l,T){ot(this,C);ot(this,w,new Map);ot(this,D,new Map);ot(this,y,new Map);ot(this,m,null);this.messageHandler=d,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=T.canvasFactory,this.filterFactory=T.filterFactory,this.cMapReaderFactory=T.cMapReaderFactory,this.standardFontDataFactory=T.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=N,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(d,g=_util.AnnotationMode.ENABLE,N=null,l=!1){let T=_util.RenderingIntentFlag.DISPLAY,O=_annotation_storage.SerializableEmpty;switch(d){case"any":T=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":T=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${d}`)}switch(g){case _util.AnnotationMode.DISABLE:T+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:T+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:T+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,O=(T&_util.RenderingIntentFlag.PRINT&&N instanceof _annotation_storage.PrintAnnotationStorage?N:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return l&&(T+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:T,cacheKey:`${T}_${O.hash}`,annotationStorageSerializable:O}}destroy(){var N;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(N=s(this,m))==null||N.reject(new Error("Worker was destroyed during onPassword callback"));const d=[];for(const l of s(this,D).values())d.push(l._destroy());s(this,D).clear(),s(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return d.push(g),Promise.all(d).then(()=>{var l;this.commonObjs.clear(),this.fontLoader.clear(),s(this,w).clear(),this.filterFactory.destroy(),(l=this._networkStream)==null||l.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:d,loadingTask:g}=this;d.on("GetReader",(N,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=T=>{this._lastProgress={loaded:T.loaded,total:T.total}},l.onPull=()=>{this._fullReader.read().then(function({value:T,done:O}){if(O){l.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{l.error(T)})},l.onCancel=T=>{this._fullReader.cancel(T),l.ready.catch(O=>{if(!this.destroyed)throw O})}}),d.on("ReaderHeadersReady",N=>{const l=new _util.PromiseCapability,T=this._fullReader;return T.headersReady.then(()=>{var O;(!T.isStreamingSupported||!T.isRangeSupported)&&(this._lastProgress&&((O=g.onProgress)==null||O.call(g,this._lastProgress)),T.onProgress=nt=>{var G;(G=g.onProgress)==null||G.call(g,{loaded:nt.loaded,total:nt.total})}),l.resolve({isStreamingSupported:T.isStreamingSupported,isRangeSupported:T.isRangeSupported,contentLength:T.contentLength})},l.reject),l.promise}),d.on("GetRangeReader",(N,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const T=this._networkStream.getRangeReader(N.begin,N.end);if(!T){l.close();return}l.onPull=()=>{T.read().then(function({value:O,done:nt}){if(nt){l.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{l.error(O)})},l.onCancel=O=>{T.cancel(O),l.ready.catch(nt=>{if(!this.destroyed)throw nt})}}),d.on("GetDoc",({pdfInfo:N})=>{this._numPages=N.numPages,this._htmlForXfa=N.htmlForXfa,delete N.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(N,this))}),d.on("DocException",function(N){let l;switch(N.name){case"PasswordException":l=new _util.PasswordException(N.message,N.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(N.message);break;case"MissingPDFException":l=new _util.MissingPDFException(N.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(N.message,N.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(N.message,N.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(l)}),d.on("PasswordRequest",N=>{if(ct(this,m,new _util.PromiseCapability),g.onPassword){const l=T=>{T instanceof Error?s(this,m).reject(T):s(this,m).resolve({password:T})};try{g.onPassword(l,N.code)}catch(T){s(this,m).reject(T)}}else s(this,m).reject(new _util.PasswordException(N.message,N.code));return s(this,m).promise}),d.on("DataLoaded",N=>{var l;(l=g.onProgress)==null||l.call(g,{loaded:N.length,total:N.length}),this.downloadInfoCapability.resolve(N)}),d.on("StartRenderPage",N=>{if(this.destroyed)return;s(this,D).get(N.pageIndex)._startRenderPage(N.transparency,N.cacheKey)}),d.on("commonobj",([N,l,T])=>{var O;if(!this.destroyed&&!this.commonObjs.has(N))switch(l){case"Font":const nt=this._params;if("error"in T){const z=T.error;(0,_util.warn)(`Error during font loading: ${z}`),this.commonObjs.resolve(N,z);break}const G=nt.pdfBug&&((O=globalThis.FontInspector)!=null&&O.enabled)?(z,it)=>globalThis.FontInspector.fontAdded(z,it):null,Y=new _font_loader.FontFaceObject(T,{isEvalSupported:nt.isEvalSupported,disableFontFace:nt.disableFontFace,ignoreErrors:nt.ignoreErrors,inspectFont:G});this.fontLoader.bind(Y).catch(z=>d.sendWithPromise("FontFallback",{id:N})).finally(()=>{!nt.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(N,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(N,T);break;default:throw new Error(`Got unknown common object type ${l}`)}}),d.on("obj",([N,l,T,O])=>{var G;if(this.destroyed)return;const nt=s(this,D).get(l);if(!nt.objs.has(N))switch(T){case"Image":if(nt.objs.resolve(N,O),O){let Y;if(O.bitmap){const{width:z,height:it}=O;Y=z*it*4}else Y=((G=O.data)==null?void 0:G.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(nt._maybeCleanupAfterRender=!0)}break;case"Pattern":nt.objs.resolve(N,O);break;default:throw new Error(`Got unknown object type ${T}`)}}),d.on("DocProgress",N=>{var l;this.destroyed||(l=g.onProgress)==null||l.call(g,{loaded:N.loaded,total:N.total})}),d.on("FetchBuiltInCMap",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(N):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),d.on("FetchStandardFontData",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(N):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var N;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:d,transfers:g}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:d,filename:((N=this._fullReader)==null?void 0:N.filename)??null},g).finally(()=>{this.annotationStorage.resetModified()})}getPage(d){if(!Number.isInteger(d)||d<=0||d>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=d-1,N=s(this,y).get(g);if(N)return N;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(T=>{if(this.destroyed)throw new Error("Transport destroyed");const O=new PDFPageProxy(g,T,this,this._params.pdfBug);return s(this,D).set(g,O),O});return s(this,y).set(g,l),l}getPageIndex(d){return typeof d!="object"||d===null||!Number.isInteger(d.num)||d.num<0||!Number.isInteger(d.gen)||d.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:d.num,gen:d.gen})}getAnnotations(d,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:d,intent:g})}getFieldObjects(){return Q(this,C,Ae).call(this,"GetFieldObjects")}hasJSActions(){return Q(this,C,Ae).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(d){return typeof d!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:d})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Q(this,C,Ae).call(this,"GetDocJSActions")}getPageJSActions(d){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:d})}getStructTree(d){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:d})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(d=>new _optional_content_config.OptionalContentConfig(d))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const d="GetMetadata",g=s(this,w).get(d);if(g)return g;const N=this.messageHandler.sendWithPromise(d,null).then(l=>{var T,O;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:((T=this._fullReader)==null?void 0:T.filename)??null,contentLength:((O=this._fullReader)==null?void 0:O.contentLength)??null}});return s(this,w).set(d,N),N}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(d=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const g of s(this,D).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),d||this.fontLoader.clear(),s(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:d,enableXfa:g}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:d,enableXfa:g})}}w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakSet,Ae=function(d,g=null){const N=s(this,w).get(d);if(N)return N;const l=this.messageHandler.sendWithPromise(d,g);return s(this,w).set(d,l),l};class PDFObjects{constructor(){ot(this,v);ot(this,h,Object.create(null))}get(d,g=null){if(g){const l=Q(this,v,Ie).call(this,d);return l.capability.promise.then(()=>g(l.data)),null}const N=s(this,h)[d];if(!(N!=null&&N.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${d}.`);return N.data}has(d){const g=s(this,h)[d];return(g==null?void 0:g.capability.settled)||!1}resolve(d,g=null){const N=Q(this,v,Ie).call(this,d);N.data=g,N.capability.resolve()}clear(){var d;for(const g in s(this,h)){const{data:N}=s(this,h)[g];(d=N==null?void 0:N.bitmap)==null||d.close()}ct(this,h,Object.create(null))}}h=new WeakMap,v=new WeakSet,Ie=function(d){var g;return(g=s(this,h))[d]||(g[d]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(d){ot(this,x,null);ct(this,x,d),this.onContinue=null}get promise(){return s(this,x).capability.promise}cancel(d=0){s(this,x).cancel(null,d)}get separateAnnots(){const{separateAnnots:d}=s(this,x).operatorList;if(!d)return!1;const{annotationCanvasMap:g}=s(this,x);return d.form||d.canvas&&(g==null?void 0:g.size)>0}}x=new WeakMap,exports.RenderTask=RenderTask;const f=class f{constructor({callback:d,params:g,objs:N,commonObjs:l,annotationCanvasMap:T,operatorList:O,pageIndex:nt,canvasFactory:G,filterFactory:Y,useRequestAnimationFrame:z=!1,pdfBug:it=!1,pageColors:I=null}){this.callback=d,this.params=g,this.objs=N,this.commonObjs=l,this.annotationCanvasMap=T,this.operatorListIdx=null,this.operatorList=O,this._pageIndex=nt,this.canvasFactory=G,this.filterFactory=Y,this._pdfBug=it,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=z===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:d=!1,optionalContentConfig:g}){var nt,G;if(this.cancelled)return;if(this._canvas){if(s(f,i).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s(f,i).add(this._canvas)}this._pdfBug&&((nt=globalThis.StepperManager)!=null&&nt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:N,viewport:l,transform:T,background:O}=this.params;this.gfx=new _canvas.CanvasGraphics(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:g},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:T,viewport:l,transparency:d,background:O}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(d=null,g=0){var N;this.running=!1,this.cancelled=!0,(N=this.gfx)==null||N.endDrawing(),s(f,i).delete(this._canvas),this.callback(d||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,g))}operatorListChanged(){var d;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(d=this.stepper)==null||d.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s(f,i).delete(this._canvas),this.callback())))}};i=new WeakMap,ot(f,i,new WeakSet);let InternalRenderTask=f;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(n,t,u)=>{var E,p,w,yn,y;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=u(1),a=u(4),L=u(8);const F=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=F;class q{constructor(){ot(this,w);ot(this,E,!1);ot(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,b){const h=s(this,p).get(C);return h===void 0?b:Object.assign(b,h)}getRawValue(C){return s(this,p).get(C)}remove(C){if(s(this,p).delete(C),s(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of s(this,p).values())if(b instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,b){const h=s(this,p).get(C);let v=!1;if(h!==void 0)for(const[M,x]of Object.entries(b))h[M]!==x&&(v=!0,h[M]=x);else v=!0,s(this,p).set(C,b);v&&Q(this,w,yn).call(this),b instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(C){return s(this,p).has(C)}getAll(){return s(this,p).size>0?(0,e.objectFromMap)(s(this,p)):null}setAll(C){for(const[b,h]of Object.entries(C))this.setValue(b,h)}get size(){return s(this,p).size}resetModified(){s(this,E)&&(ct(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new S(this)}get serializable(){if(s(this,p).size===0)return F;const C=new Map,b=new L.MurmurHash3_64,h=[],v=Object.create(null);let M=!1;for(const[x,i]of s(this,p)){const f=i instanceof a.AnnotationEditor?i.serialize(!1,v):i;f&&(C.set(x,f),b.update(`${x}:${JSON.stringify(f)}`),M||(M=!!f.bitmap))}if(M)for(const x of C.values())x.bitmap&&h.push(x.bitmap);return C.size>0?{map:C,hash:b.hexdigest(),transfers:h}:F}}E=new WeakMap,p=new WeakMap,w=new WeakSet,yn=function(){s(this,E)||(ct(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=q;class S extends q{constructor(b){super();ot(this,y);const{map:h,hash:v,transfers:M}=b.serializable,x=structuredClone(h,M?{transfer:M}:null);ct(this,y,{map:x,hash:v,transfers:M})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return s(this,y)}}y=new WeakMap,t.PrintAnnotationStorage=S},(n,t,u)=>{var S,E,p,w,D,y,m,C,b,h,v,M,x,i,f,Oe,Ne,g,je,Be,_n,vn,An,Ue,En;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=u(5),a=u(1),L=u(6);const z=class z{constructor(I){ot(this,f);ot(this,S,"");ot(this,E,!1);ot(this,p,null);ot(this,w,null);ot(this,D,null);ot(this,y,!1);ot(this,m,null);ot(this,C,this.focusin.bind(this));ot(this,b,this.focusout.bind(this));ot(this,h,!1);ot(this,v,!1);ot(this,M,!1);Qt(this,"_initialOptions",Object.create(null));Qt(this,"_uiManager",null);Qt(this,"_focusEventsAllowed",!0);Qt(this,"_l10nPromise",null);ot(this,x,!1);ot(this,i,z._zIndex++);this.constructor===z&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=I.parent,this.id=I.id,this.width=this.height=null,this.pageIndex=I.parent.pageIndex,this.name=I.name,this.div=null,this._uiManager=I.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=I.isCentered,this._structTreeParentId=null;const{rotation:V,rawDims:{pageWidth:st,pageHeight:R,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=V,this.pageRotation=(360+V-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[st,R],this.pageTranslation=[r,o];const[A,B]=this.parentDimensions;this.x=I.x/A,this.y=I.y/B,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(I){const V=new q({id:I.parent.getNextId(),parent:I.parent,uiManager:I._uiManager});V.annotationElementId=I.annotationElementId,V.deleted=!0,V._uiManager.addToAnnotationStorage(V)}static initialize(I,V=null){if(z._l10nPromise||(z._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(R=>[R,I.get(R)]))),V!=null&&V.strings)for(const R of V.strings)z._l10nPromise.set(R,I.get(R));if(z._borderLineWidth!==-1)return;const st=getComputedStyle(document.documentElement);z._borderLineWidth=parseFloat(st.getPropertyValue("--outline-width"))||0}static updateDefaultParams(I,V){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(I){return!1}static paste(I,V){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return s(this,x)}set _isDraggable(I){var V;ct(this,x,I),(V=this.div)==null||V.classList.toggle("draggable",I)}center(){const[I,V]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*V/(I*2),this.y+=this.width*I/(V*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*V/(I*2),this.y-=this.width*I/(V*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(I){this._uiManager.addCommands(I)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=s(this,i)}setParent(I){I!==null&&(this.pageIndex=I.pageIndex,this.pageDimensions=I.pageDimensions),this.parent=I}focusin(I){this._focusEventsAllowed&&(s(this,h)?ct(this,h,!1):this.parent.setSelected(this))}focusout(I){var st;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const V=I.relatedTarget;V!=null&&V.closest(`#${this.id}`)||(I.preventDefault(),(st=this.parent)!=null&&st.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(I,V,st,R){const[r,o]=this.parentDimensions;[st,R]=this.screenToPageTranslation(st,R),this.x=(I+st)/r,this.y=(V+R)/o,this.fixAndSetPosition()}translate(I,V){Q(this,f,Oe).call(this,this.parentDimensions,I,V)}translateInPage(I,V){Q(this,f,Oe).call(this,this.pageDimensions,I,V),this.div.scrollIntoView({block:"nearest"})}drag(I,V){const[st,R]=this.parentDimensions;if(this.x+=I/st,this.y+=V/R,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:U,y:$}=this.div.getBoundingClientRect();this.parent.findNewParent(this,U,$)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[A,B]=Q(this,f,Ne).call(this);r+=A,o+=B,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[I,V]=this.pageDimensions;let{x:st,y:R,width:r,height:o}=this;switch(r*=I,o*=V,st*=I,R*=V,this.rotation){case 0:st=Math.max(0,Math.min(I-r,st)),R=Math.max(0,Math.min(V-o,R));break;case 90:st=Math.max(0,Math.min(I-o,st)),R=Math.min(V,Math.max(r,R));break;case 180:st=Math.min(I,Math.max(r,st)),R=Math.min(V,Math.max(o,R));break;case 270:st=Math.min(I,Math.max(o,st)),R=Math.max(0,Math.min(V-r,R));break}this.x=st/=I,this.y=R/=V;const[A,B]=Q(this,f,Ne).call(this);st+=A,R+=B;const{style:U}=this.div;U.left=`${(100*st).toFixed(2)}%`,U.top=`${(100*R).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(I,V){var st;return Q(st=z,g,je).call(st,I,V,this.parentRotation)}pageTranslationToScreen(I,V){var st;return Q(st=z,g,je).call(st,I,V,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:I,pageDimensions:[V,st]}=this,R=V*I,r=st*I;return a.FeatureTest.isCSSRoundSupported?[Math.round(R),Math.round(r)]:[R,r]}setDims(I,V){var r;const[st,R]=this.parentDimensions;this.div.style.width=`${(100*I/st).toFixed(2)}%`,s(this,y)||(this.div.style.height=`${(100*V/R).toFixed(2)}%`),(r=s(this,p))==null||r.classList.toggle("small",I<z.SMALL_EDITOR_SIZE||V<z.SMALL_EDITOR_SIZE)}fixDims(){const{style:I}=this.div,{height:V,width:st}=I,R=st.endsWith("%"),r=!s(this,y)&&V.endsWith("%");if(R&&r)return;const[o,A]=this.parentDimensions;R||(I.width=`${(100*parseFloat(st)/o).toFixed(2)}%`),!s(this,y)&&!r&&(I.height=`${(100*parseFloat(V)/A).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(s(this,p))return;const I=ct(this,p,document.createElement("button"));I.className="altText";const V=await z._l10nPromise.get("editor_alt_text_button_label");I.textContent=V,I.setAttribute("aria-label",V),I.tabIndex="0",I.addEventListener("contextmenu",L.noContextMenu),I.addEventListener("pointerdown",st=>st.stopPropagation()),I.addEventListener("click",st=>{st.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),I.addEventListener("keydown",st=>{st.target===I&&st.key==="Enter"&&(st.preventDefault(),this._uiManager.editAltText(this))}),Q(this,f,Ue).call(this),this.div.append(I),z.SMALL_EDITOR_SIZE||(z.SMALL_EDITOR_SIZE=Math.min(128,Math.round(I.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:s(this,S),decorative:s(this,E)}}set altTextData({altText:I,decorative:V}){s(this,S)===I&&s(this,E)===V||(ct(this,S,I),ct(this,E,V),Q(this,f,Ue).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",s(this,C)),this.div.addEventListener("focusout",s(this,b));const[I,V]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*V/I).toFixed(2)}%`,this.div.style.maxHeight=`${(100*I/V).toFixed(2)}%`);const[st,R]=this.getInitialTranslation();return this.translate(st,R),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(I){const{isMac:V}=a.FeatureTest.platform;if(I.button!==0||I.ctrlKey&&V){I.preventDefault();return}ct(this,h,!0),Q(this,f,En).call(this,I)}moveInDOM(){var I;(I=this.parent)==null||I.moveEditorInDOM(this)}_setParentAndPosition(I,V,st){I.changeParent(this),this.x=V,this.y=st,this.fixAndSetPosition()}getRect(I,V){const st=this.parentScale,[R,r]=this.pageDimensions,[o,A]=this.pageTranslation,B=I/st,U=V/st,$=this.x*R,K=this.y*r,rt=this.width*R,ut=this.height*r;switch(this.rotation){case 0:return[$+B+o,r-K-U-ut+A,$+B+rt+o,r-K-U+A];case 90:return[$+U+o,r-K+B+A,$+U+ut+o,r-K+B+rt+A];case 180:return[$-B-rt+o,r-K+U+A,$-B+o,r-K+U+ut+A];case 270:return[$-U-ut+o,r-K-B-rt+A,$-U+o,r-K-B+A];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(I,V){const[st,R,r,o]=I,A=r-st,B=o-R;switch(this.rotation){case 0:return[st,V-o,A,B];case 90:return[st,V-R,B,A];case 180:return[r,V-R,A,B];case 270:return[r,V-o,B,A];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ct(this,M,!0)}disableEditMode(){ct(this,M,!1)}isInEditMode(){return s(this,M)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var I,V;(I=this.div)==null||I.addEventListener("focusin",s(this,C)),(V=this.div)==null||V.addEventListener("focusout",s(this,b))}serialize(I=!1,V=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(I,V,st){const R=new this.prototype.constructor({parent:V,id:V.getNextId(),uiManager:st});R.rotation=I.rotation;const[r,o]=R.pageDimensions,[A,B,U,$]=R.getRectInCurrentCoords(I.rect,o);return R.x=A/r,R.y=B/o,R.width=U/r,R.height=$/o,R}remove(){var I;this.div.removeEventListener("focusin",s(this,C)),this.div.removeEventListener("focusout",s(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(I=s(this,p))==null||I.remove(),ct(this,p,null),ct(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Q(this,f,_n).call(this),s(this,m).classList.remove("hidden"))}select(){var I;this.makeResizable(),(I=this.div)==null||I.classList.add("selectedEditor")}unselect(){var I,V,st;(I=s(this,m))==null||I.classList.add("hidden"),(V=this.div)==null||V.classList.remove("selectedEditor"),(st=this.div)!=null&&st.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(I,V){}disableEditing(){s(this,p)&&(s(this,p).hidden=!0)}enableEditing(){s(this,p)&&(s(this,p).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return s(this,v)}set isEditing(I){ct(this,v,I),this.parent&&(I?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(I,V){ct(this,y,!0);const st=I/V,{style:R}=this.div;R.aspectRatio=st,R.height="auto"}static get MIN_SIZE(){return 16}};S=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakMap,v=new WeakMap,M=new WeakMap,x=new WeakMap,i=new WeakMap,f=new WeakSet,Oe=function([I,V],st,R){[st,R]=this.screenToPageTranslation(st,R),this.x+=st/I,this.y+=R/V,this.fixAndSetPosition()},Ne=function(){const[I,V]=this.parentDimensions,{_borderLineWidth:st}=z,R=st/I,r=st/V;switch(this.rotation){case 90:return[-R,r];case 180:return[R,r];case 270:return[R,-r];default:return[-R,-r]}},g=new WeakSet,je=function(I,V,st){switch(st){case 90:return[V,-I];case 180:return[-I,-V];case 270:return[-V,I];default:return[I,V]}},Be=function(I){switch(I){case 90:{const[V,st]=this.pageDimensions;return[0,-V/st,st/V,0]}case 180:return[-1,0,0,-1];case 270:{const[V,st]=this.pageDimensions;return[0,V/st,-st/V,0]}default:return[1,0,0,1]}},_n=function(){if(s(this,m))return;ct(this,m,document.createElement("div")),s(this,m).classList.add("resizers");const I=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||I.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const V of I){const st=document.createElement("div");s(this,m).append(st),st.classList.add("resizer",V),st.addEventListener("pointerdown",Q(this,f,vn).bind(this,V)),st.addEventListener("contextmenu",L.noContextMenu)}this.div.prepend(s(this,m))},vn=function(I,V){V.preventDefault();const{isMac:st}=a.FeatureTest.platform;if(V.button!==0||V.ctrlKey&&st)return;const R=Q(this,f,An).bind(this,I),r=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};window.addEventListener("pointermove",R,o);const A=this.x,B=this.y,U=this.width,$=this.height,K=this.parent.div.style.cursor,rt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(V.target).cursor;const ut=()=>{this._isDraggable=r,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",R,o),this.parent.div.style.cursor=K,this.div.style.cursor=rt;const ft=this.x,yt=this.y,bt=this.width,vt=this.height;ft===A&&yt===B&&bt===U&&vt===$||this.addCommands({cmd:()=>{this.width=bt,this.height=vt,this.x=ft,this.y=yt;const[Z,tt]=this.parentDimensions;this.setDims(Z*bt,tt*vt),this.fixAndSetPosition()},undo:()=>{this.width=U,this.height=$,this.x=A,this.y=B;const[Z,tt]=this.parentDimensions;this.setDims(Z*U,tt*$),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},An=function(I,V){const[st,R]=this.parentDimensions,r=this.x,o=this.y,A=this.width,B=this.height,U=z.MIN_SIZE/st,$=z.MIN_SIZE/R,K=Ft=>Math.round(Ft*1e4)/1e4,rt=Q(this,f,Be).call(this,this.rotation),ut=(Ft,Nt)=>[rt[0]*Ft+rt[2]*Nt,rt[1]*Ft+rt[3]*Nt],ft=Q(this,f,Be).call(this,360-this.rotation),yt=(Ft,Nt)=>[ft[0]*Ft+ft[2]*Nt,ft[1]*Ft+ft[3]*Nt];let bt,vt,Z=!1,tt=!1;switch(I){case"topLeft":Z=!0,bt=(Ft,Nt)=>[0,0],vt=(Ft,Nt)=>[Ft,Nt];break;case"topMiddle":bt=(Ft,Nt)=>[Ft/2,0],vt=(Ft,Nt)=>[Ft/2,Nt];break;case"topRight":Z=!0,bt=(Ft,Nt)=>[Ft,0],vt=(Ft,Nt)=>[0,Nt];break;case"middleRight":tt=!0,bt=(Ft,Nt)=>[Ft,Nt/2],vt=(Ft,Nt)=>[0,Nt/2];break;case"bottomRight":Z=!0,bt=(Ft,Nt)=>[Ft,Nt],vt=(Ft,Nt)=>[0,0];break;case"bottomMiddle":bt=(Ft,Nt)=>[Ft/2,Nt],vt=(Ft,Nt)=>[Ft/2,0];break;case"bottomLeft":Z=!0,bt=(Ft,Nt)=>[0,Nt],vt=(Ft,Nt)=>[Ft,0];break;case"middleLeft":tt=!0,bt=(Ft,Nt)=>[0,Nt/2],vt=(Ft,Nt)=>[Ft,Nt/2];break}const P=bt(A,B),W=vt(A,B);let J=ut(...W);const at=K(r+J[0]),gt=K(o+J[1]);let xt=1,Et=1,[et,Tt]=this.screenToPageTranslation(V.movementX,V.movementY);if([et,Tt]=yt(et/st,Tt/R),Z){const Ft=Math.hypot(A,B);xt=Et=Math.max(Math.min(Math.hypot(W[0]-P[0]-et,W[1]-P[1]-Tt)/Ft,1/A,1/B),U/A,$/B)}else tt?xt=Math.max(U,Math.min(1,Math.abs(W[0]-P[0]-et)))/A:Et=Math.max($,Math.min(1,Math.abs(W[1]-P[1]-Tt)))/B;const Pt=K(A*xt),Wt=K(B*Et);J=ut(...vt(Pt,Wt));const Ut=at-J[0],qt=gt-J[1];this.width=Pt,this.height=Wt,this.x=Ut,this.y=qt,this.setDims(st*Pt,R*Wt),this.fixAndSetPosition()},Ue=async function(){var st;const I=s(this,p);if(!I)return;if(!s(this,S)&&!s(this,E)){I.classList.remove("done"),(st=s(this,w))==null||st.remove();return}z._l10nPromise.get("editor_alt_text_edit_button_label").then(R=>{I.setAttribute("aria-label",R)});let V=s(this,w);if(!V){ct(this,w,V=document.createElement("span")),V.className="tooltip",V.setAttribute("role","tooltip");const R=V.id=`alt-text-tooltip-${this.id}`;I.setAttribute("aria-describedby",R);const r=100;I.addEventListener("mouseenter",()=>{ct(this,D,setTimeout(()=>{ct(this,D,null),s(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},r))}),I.addEventListener("mouseleave",()=>{var o;clearTimeout(s(this,D)),ct(this,D,null),(o=s(this,w))==null||o.classList.remove("show")})}I.classList.add("done"),V.innerText=s(this,E)?await z._l10nPromise.get("editor_alt_text_decorative_tooltip"):s(this,S),V.parentNode||I.append(V)},En=function(I){if(!this._isDraggable)return;const V=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let st,R;V&&(st={passive:!0,capture:!0},R=o=>{const[A,B]=this.screenToPageTranslation(o.movementX,o.movementY);this._uiManager.dragSelectedEditors(A,B)},window.addEventListener("pointermove",R,st));const r=()=>{if(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),V&&window.removeEventListener("pointermove",R,st),ct(this,h,!1),!this._uiManager.endDragSession()){const{isMac:o}=a.FeatureTest.platform;I.ctrlKey&&!o||I.shiftKey||I.metaKey&&o?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",r),window.addEventListener("blur",r)},ot(z,g),Qt(z,"_borderLineWidth",-1),Qt(z,"_colorManager",new e.ColorManager),Qt(z,"_zIndex",1),Qt(z,"SMALL_EDITOR_SIZE",0);let F=z;t.AnnotationEditor=F;class q extends F{constructor(I){super(I),this.annotationElementId=I.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(n,t,u)=>{var y,m,C,b,h,$e,x,i,f,c,d,Sn,l,T,O,nt,G,Y,z,it,I,V,st,R,r,o,A,B,U,$,K,rt,ut,ft,yt,bt,vt,Z,tt,P,W,J,at,gt,xt,Et,et,xn,We,He,Ee,ze,Ge,ee,pe,Cn,Pn,Ve,fe,qe;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=L,t.opacityToHex=F;var e=u(1),a=u(6);function L(Vt,H,mt){for(const wt of mt)H.addEventListener(wt,Vt[wt].bind(Vt))}function F(Vt){return Math.round(Math.min(255,Math.max(1,255*Vt))).toString(16).padStart(2,"0")}class q{constructor(){ot(this,y,0)}getId(){return`${e.AnnotationEditorPrefix}${he(this,y)._++}`}}y=new WeakMap;const M=class M{constructor(){ot(this,h);ot(this,m,(0,e.getUuid)());ot(this,C,0);ot(this,b,null)}static get _isSVGFittingCanvas(){const H='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',wt=new OffscreenCanvas(1,3).getContext("2d"),It=new Image;It.src=H;const Bt=It.decode().then(()=>(wt.drawImage(It,0,0,1,1,0,0,1,3),new Uint32Array(wt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",Bt)}async getFromFile(H){const{lastModified:mt,name:wt,size:It,type:Bt}=H;return Q(this,h,$e).call(this,`${mt}_${wt}_${It}_${Bt}`,H)}async getFromUrl(H){return Q(this,h,$e).call(this,H,H)}async getFromId(H){s(this,b)||ct(this,b,new Map);const mt=s(this,b).get(H);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(H){const mt=s(this,b).get(H);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(H){s(this,b)||ct(this,b,new Map);const mt=s(this,b).get(H);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(H){return H.startsWith(`image_${s(this,m)}_`)}};m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakSet,$e=async function(H,mt){s(this,b)||ct(this,b,new Map);let wt=s(this,b).get(H);if(wt===null)return null;if(wt!=null&&wt.bitmap)return wt.refCounter+=1,wt;try{wt||(wt={bitmap:null,id:`image_${s(this,m)}_${he(this,C)._++}`,refCounter:0,isSvg:!1});let It;if(typeof mt=="string"){wt.url=mt;const Bt=await fetch(mt);if(!Bt.ok)throw new Error(Bt.statusText);It=await Bt.blob()}else It=wt.file=mt;if(It.type==="image/svg+xml"){const Bt=M._isSVGFittingCanvas,kt=new FileReader,j=new Image,k=new Promise((X,ht)=>{j.onload=()=>{wt.bitmap=j,wt.isSvg=!0,X()},kt.onload=async()=>{const pt=wt.svgUrl=kt.result;j.src=await Bt?`${pt}#svgView(preserveAspectRatio(none))`:pt},j.onerror=kt.onerror=ht});kt.readAsDataURL(It),await k}else wt.bitmap=await createImageBitmap(It);wt.refCounter=1}catch(It){console.error(It),wt=null}return s(this,b).set(H,wt),wt&&s(this,b).set(wt.id,wt),wt};let S=M;class E{constructor(H=128){ot(this,x,[]);ot(this,i,!1);ot(this,f);ot(this,c,-1);ct(this,f,H)}add({cmd:H,undo:mt,mustExec:wt,type:It=NaN,overwriteIfSameType:Bt=!1,keepUndo:kt=!1}){if(wt&&H(),s(this,i))return;const j={cmd:H,undo:mt,type:It};if(s(this,c)===-1){s(this,x).length>0&&(s(this,x).length=0),ct(this,c,0),s(this,x).push(j);return}if(Bt&&s(this,x)[s(this,c)].type===It){kt&&(j.undo=s(this,x)[s(this,c)].undo),s(this,x)[s(this,c)]=j;return}const k=s(this,c)+1;k===s(this,f)?s(this,x).splice(0,1):(ct(this,c,k),k<s(this,x).length&&s(this,x).splice(k)),s(this,x).push(j)}undo(){s(this,c)!==-1&&(ct(this,i,!0),s(this,x)[s(this,c)].undo(),ct(this,i,!1),ct(this,c,s(this,c)-1))}redo(){s(this,c)<s(this,x).length-1&&(ct(this,c,s(this,c)+1),ct(this,i,!0),s(this,x)[s(this,c)].cmd(),ct(this,i,!1))}hasSomethingToUndo(){return s(this,c)!==-1}hasSomethingToRedo(){return s(this,c)<s(this,x).length-1}destroy(){ct(this,x,null)}}x=new WeakMap,i=new WeakMap,f=new WeakMap,c=new WeakMap,t.CommandManager=E;class p{constructor(H){ot(this,d);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=e.FeatureTest.platform;for(const[wt,It,Bt={}]of H)for(const kt of wt){const j=kt.startsWith("mac+");mt&&j?(this.callbacks.set(kt.slice(4),{callback:It,options:Bt}),this.allKeys.add(kt.split("+").at(-1))):!mt&&!j&&(this.callbacks.set(kt,{callback:It,options:Bt}),this.allKeys.add(kt.split("+").at(-1)))}}exec(H,mt){if(!this.allKeys.has(mt.key))return;const wt=this.callbacks.get(Q(this,d,Sn).call(this,mt));if(!wt)return;const{callback:It,options:{bubbles:Bt=!1,args:kt=[],checker:j=null}}=wt;j&&!j(H,mt)||(It.bind(H,...kt)(),Bt||(mt.stopPropagation(),mt.preventDefault()))}}d=new WeakSet,Sn=function(H){H.altKey&&this.buffer.push("alt"),H.ctrlKey&&this.buffer.push("ctrl"),H.metaKey&&this.buffer.push("meta"),H.shiftKey&&this.buffer.push("shift"),this.buffer.push(H.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt},t.KeyboardManager=p;const N=class N{get _colors(){const H=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(H),(0,e.shadow)(this,"_colors",H)}convert(H){const mt=(0,a.getRGB)(H);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[wt,It]of this._colors)if(It.every((Bt,kt)=>Bt===mt[kt]))return N._colorsMapping.get(wt);return mt}getHexCode(H){const mt=this._colors.get(H);return mt?e.Util.makeHexColor(...mt):H}};Qt(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=N;t.ColorManager=w;const Xt=class Xt{constructor(H,mt,wt,It,Bt,kt){ot(this,et);ot(this,l,null);ot(this,T,new Map);ot(this,O,new Map);ot(this,nt,null);ot(this,G,null);ot(this,Y,new E);ot(this,z,0);ot(this,it,new Set);ot(this,I,null);ot(this,V,null);ot(this,st,new Set);ot(this,R,null);ot(this,r,new q);ot(this,o,!1);ot(this,A,!1);ot(this,B,null);ot(this,U,e.AnnotationEditorType.NONE);ot(this,$,new Set);ot(this,K,null);ot(this,rt,this.blur.bind(this));ot(this,ut,this.focus.bind(this));ot(this,ft,this.copy.bind(this));ot(this,yt,this.cut.bind(this));ot(this,bt,this.paste.bind(this));ot(this,vt,this.keydown.bind(this));ot(this,Z,this.onEditingAction.bind(this));ot(this,tt,this.onPageChanging.bind(this));ot(this,P,this.onScaleChanging.bind(this));ot(this,W,this.onRotationChanging.bind(this));ot(this,J,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ot(this,at,[0,0]);ot(this,gt,null);ot(this,xt,null);ot(this,Et,null);ct(this,xt,H),ct(this,Et,mt),ct(this,nt,wt),this._eventBus=It,this._eventBus._on("editingaction",s(this,Z)),this._eventBus._on("pagechanging",s(this,tt)),this._eventBus._on("scalechanging",s(this,P)),this._eventBus._on("rotationchanging",s(this,W)),ct(this,G,Bt.annotationStorage),ct(this,R,Bt.filterFactory),ct(this,K,kt),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const H=Xt.prototype,mt=Bt=>{const{activeElement:kt}=document;return kt&&s(Bt,xt).contains(kt)&&Bt.hasSomethingToControl()},wt=this.TRANSLATE_SMALL,It=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],H.selectAll],[["ctrl+z","mac+meta+z"],H.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],H.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],H.delete],[["Escape","mac+Escape"],H.unselectAll],[["ArrowLeft","mac+ArrowLeft"],H.translateSelectedEditors,{args:[-wt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H.translateSelectedEditors,{args:[-It,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],H.translateSelectedEditors,{args:[wt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H.translateSelectedEditors,{args:[It,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],H.translateSelectedEditors,{args:[0,-wt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H.translateSelectedEditors,{args:[0,-It],checker:mt}],[["ArrowDown","mac+ArrowDown"],H.translateSelectedEditors,{args:[0,wt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H.translateSelectedEditors,{args:[0,It],checker:mt}]]))}destroy(){Q(this,et,Ee).call(this),Q(this,et,We).call(this),this._eventBus._off("editingaction",s(this,Z)),this._eventBus._off("pagechanging",s(this,tt)),this._eventBus._off("scalechanging",s(this,P)),this._eventBus._off("rotationchanging",s(this,W));for(const H of s(this,O).values())H.destroy();s(this,O).clear(),s(this,T).clear(),s(this,st).clear(),ct(this,l,null),s(this,$).clear(),s(this,Y).destroy(),s(this,nt).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",s(this,K)?s(this,R).addHCMFilter(s(this,K).foreground,s(this,K).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(s(this,xt)).direction)}editAltText(H){var mt;(mt=s(this,nt))==null||mt.editAltText(this,H)}onPageChanging({pageNumber:H}){ct(this,z,H-1)}focusMainContainer(){s(this,xt).focus()}findParent(H,mt){for(const wt of s(this,O).values()){const{x:It,y:Bt,width:kt,height:j}=wt.div.getBoundingClientRect();if(H>=It&&H<=It+kt&&mt>=Bt&&mt<=Bt+j)return wt}return null}disableUserSelect(H=!1){s(this,Et).classList.toggle("noUserSelect",H)}addShouldRescale(H){s(this,st).add(H)}removeShouldRescale(H){s(this,st).delete(H)}onScaleChanging({scale:H}){this.commitOrRemove(),this.viewParameters.realScale=H*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of s(this,st))mt.onScaleChanging()}onRotationChanging({pagesRotation:H}){this.commitOrRemove(),this.viewParameters.rotation=H}addToAnnotationStorage(H){!H.isEmpty()&&s(this,G)&&!s(this,G).has(H.id)&&s(this,G).setValue(H.id,H)}blur(){if(!this.hasSelection)return;const{activeElement:H}=document;for(const mt of s(this,$))if(mt.div.contains(H)){ct(this,B,[mt,H]),mt._focusEventsAllowed=!1;break}}focus(){if(!s(this,B))return;const[H,mt]=s(this,B);ct(this,B,null),mt.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){Q(this,et,He).call(this),Q(this,et,ze).call(this)}removeEditListeners(){Q(this,et,Ee).call(this),Q(this,et,Ge).call(this)}copy(H){var wt;if(H.preventDefault(),(wt=s(this,l))==null||wt.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const It of s(this,$)){const Bt=It.serialize(!0);Bt&&mt.push(Bt)}mt.length!==0&&H.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(H){this.copy(H),this.delete()}paste(H){H.preventDefault();const{clipboardData:mt}=H;for(const Bt of mt.items)for(const kt of s(this,V))if(kt.isHandlingMimeForPasting(Bt.type)){kt.paste(Bt,this.currentLayer);return}let wt=mt.getData("application/pdfjs");if(!wt)return;try{wt=JSON.parse(wt)}catch(Bt){(0,e.warn)(`paste: "${Bt.message}".`);return}if(!Array.isArray(wt))return;this.unselectAll();const It=this.currentLayer;try{const Bt=[];for(const k of wt){const X=It.deserialize(k);if(!X)return;Bt.push(X)}const kt=()=>{for(const k of Bt)Q(this,et,Ve).call(this,k);Q(this,et,qe).call(this,Bt)},j=()=>{for(const k of Bt)k.remove()};this.addCommands({cmd:kt,undo:j,mustExec:!0})}catch(Bt){(0,e.warn)(`paste: "${Bt.message}".`)}}keydown(H){var mt;(mt=this.getActive())!=null&&mt.shouldGetKeyboardEvents()||Xt._keyboardManager.exec(this,H)}onEditingAction(H){["undo","redo","delete","selectAll"].includes(H.name)&&this[H.name]()}setEditingState(H){H?(Q(this,et,xn).call(this),Q(this,et,He).call(this),Q(this,et,ze).call(this),Q(this,et,ee).call(this,{isEditing:s(this,U)!==e.AnnotationEditorType.NONE,isEmpty:Q(this,et,fe).call(this),hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),hasSelectedEditor:!1})):(Q(this,et,We).call(this),Q(this,et,Ee).call(this),Q(this,et,Ge).call(this),Q(this,et,ee).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(H){if(!s(this,V)){ct(this,V,H);for(const mt of s(this,V))Q(this,et,pe).call(this,mt.defaultPropertiesToUpdate)}}getId(){return s(this,r).getId()}get currentLayer(){return s(this,O).get(s(this,z))}getLayer(H){return s(this,O).get(H)}get currentPageIndex(){return s(this,z)}addLayer(H){s(this,O).set(H.pageIndex,H),s(this,o)?H.enable():H.disable()}removeLayer(H){s(this,O).delete(H.pageIndex)}updateMode(H,mt=null){if(s(this,U)!==H){if(ct(this,U,H),H===e.AnnotationEditorType.NONE){this.setEditingState(!1),Q(this,et,Pn).call(this);return}this.setEditingState(!0),Q(this,et,Cn).call(this),this.unselectAll();for(const wt of s(this,O).values())wt.updateMode(H);if(mt){for(const wt of s(this,T).values())if(wt.annotationElementId===mt){this.setSelected(wt),wt.enterInEditMode();break}}}}updateToolbar(H){H!==s(this,U)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:H})}updateParams(H,mt){if(s(this,V)){if(H===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(H);return}for(const wt of s(this,$))wt.updateParams(H,mt);for(const wt of s(this,V))wt.updateDefaultParams(H,mt)}}enableWaiting(H=!1){if(s(this,A)!==H){ct(this,A,H);for(const mt of s(this,O).values())H?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",H)}}getEditors(H){const mt=[];for(const wt of s(this,T).values())wt.pageIndex===H&&mt.push(wt);return mt}getEditor(H){return s(this,T).get(H)}addEditor(H){s(this,T).set(H.id,H)}removeEditor(H){var mt;s(this,T).delete(H.id),this.unselect(H),(!H.annotationElementId||!s(this,it).has(H.annotationElementId))&&((mt=s(this,G))==null||mt.remove(H.id))}addDeletedAnnotationElement(H){s(this,it).add(H.annotationElementId),H.deleted=!0}isDeletedAnnotationElement(H){return s(this,it).has(H)}removeDeletedAnnotationElement(H){s(this,it).delete(H.annotationElementId),H.deleted=!1}setActiveEditor(H){s(this,l)!==H&&(ct(this,l,H),H&&Q(this,et,pe).call(this,H.propertiesToUpdate))}toggleSelected(H){if(s(this,$).has(H)){s(this,$).delete(H),H.unselect(),Q(this,et,ee).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,$).add(H),H.select(),Q(this,et,pe).call(this,H.propertiesToUpdate),Q(this,et,ee).call(this,{hasSelectedEditor:!0})}setSelected(H){for(const mt of s(this,$))mt!==H&&mt.unselect();s(this,$).clear(),s(this,$).add(H),H.select(),Q(this,et,pe).call(this,H.propertiesToUpdate),Q(this,et,ee).call(this,{hasSelectedEditor:!0})}isSelected(H){return s(this,$).has(H)}unselect(H){H.unselect(),s(this,$).delete(H),Q(this,et,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return s(this,$).size!==0}undo(){s(this,Y).undo(),Q(this,et,ee).call(this,{hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Q(this,et,fe).call(this)})}redo(){s(this,Y).redo(),Q(this,et,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),isEmpty:Q(this,et,fe).call(this)})}addCommands(H){s(this,Y).add(H),Q(this,et,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Q(this,et,fe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const H=[...s(this,$)],mt=()=>{for(const It of H)It.remove()},wt=()=>{for(const It of H)Q(this,et,Ve).call(this,It)};this.addCommands({cmd:mt,undo:wt,mustExec:!0})}commitOrRemove(){var H;(H=s(this,l))==null||H.commitOrRemove()}hasSomethingToControl(){return s(this,l)||this.hasSelection}selectAll(){for(const H of s(this,$))H.commit();Q(this,et,qe).call(this,s(this,T).values())}unselectAll(){if(s(this,l)){s(this,l).commitOrRemove();return}if(this.hasSelection){for(const H of s(this,$))H.unselect();s(this,$).clear(),Q(this,et,ee).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(H,mt,wt=!1){if(wt||this.commitOrRemove(),!this.hasSelection)return;s(this,at)[0]+=H,s(this,at)[1]+=mt;const[It,Bt]=s(this,at),kt=[...s(this,$)],j=1e3;s(this,gt)&&clearTimeout(s(this,gt)),ct(this,gt,setTimeout(()=>{ct(this,gt,null),s(this,at)[0]=s(this,at)[1]=0,this.addCommands({cmd:()=>{for(const k of kt)s(this,T).has(k.id)&&k.translateInPage(It,Bt)},undo:()=>{for(const k of kt)s(this,T).has(k.id)&&k.translateInPage(-It,-Bt)},mustExec:!1})},j));for(const k of kt)k.translateInPage(H,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ct(this,I,new Map);for(const H of s(this,$))s(this,I).set(H,{savedX:H.x,savedY:H.y,savedPageIndex:H.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!s(this,I))return!1;this.disableUserSelect(!1);const H=s(this,I);ct(this,I,null);let mt=!1;for(const[{x:It,y:Bt,pageIndex:kt},j]of H)j.newX=It,j.newY=Bt,j.newPageIndex=kt,mt||(mt=It!==j.savedX||Bt!==j.savedY||kt!==j.savedPageIndex);if(!mt)return!1;const wt=(It,Bt,kt,j)=>{if(s(this,T).has(It.id)){const k=s(this,O).get(j);k?It._setParentAndPosition(k,Bt,kt):(It.pageIndex=j,It.x=Bt,It.y=kt)}};return this.addCommands({cmd:()=>{for(const[It,{newX:Bt,newY:kt,newPageIndex:j}]of H)wt(It,Bt,kt,j)},undo:()=>{for(const[It,{savedX:Bt,savedY:kt,savedPageIndex:j}]of H)wt(It,Bt,kt,j)},mustExec:!0}),!0}dragSelectedEditors(H,mt){if(s(this,I))for(const wt of s(this,I).keys())wt.drag(H,mt)}rebuild(H){if(H.parent===null){const mt=this.getLayer(H.pageIndex);mt?(mt.changeParent(H),mt.addOrRebuild(H)):(this.addEditor(H),this.addToAnnotationStorage(H),H.rebuild())}else H.parent.addOrRebuild(H)}isActive(H){return s(this,l)===H}getActive(){return s(this,l)}getMode(){return s(this,U)}get imageManager(){return(0,e.shadow)(this,"imageManager",new S)}};l=new WeakMap,T=new WeakMap,O=new WeakMap,nt=new WeakMap,G=new WeakMap,Y=new WeakMap,z=new WeakMap,it=new WeakMap,I=new WeakMap,V=new WeakMap,st=new WeakMap,R=new WeakMap,r=new WeakMap,o=new WeakMap,A=new WeakMap,B=new WeakMap,U=new WeakMap,$=new WeakMap,K=new WeakMap,rt=new WeakMap,ut=new WeakMap,ft=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,Z=new WeakMap,tt=new WeakMap,P=new WeakMap,W=new WeakMap,J=new WeakMap,at=new WeakMap,gt=new WeakMap,xt=new WeakMap,Et=new WeakMap,et=new WeakSet,xn=function(){window.addEventListener("focus",s(this,ut)),window.addEventListener("blur",s(this,rt))},We=function(){window.removeEventListener("focus",s(this,ut)),window.removeEventListener("blur",s(this,rt))},He=function(){window.addEventListener("keydown",s(this,vt),{capture:!0})},Ee=function(){window.removeEventListener("keydown",s(this,vt),{capture:!0})},ze=function(){document.addEventListener("copy",s(this,ft)),document.addEventListener("cut",s(this,yt)),document.addEventListener("paste",s(this,bt))},Ge=function(){document.removeEventListener("copy",s(this,ft)),document.removeEventListener("cut",s(this,yt)),document.removeEventListener("paste",s(this,bt))},ee=function(H){Object.entries(H).some(([wt,It])=>s(this,J)[wt]!==It)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,J),H)})},pe=function(H){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:H})},Cn=function(){if(!s(this,o)){ct(this,o,!0);for(const H of s(this,O).values())H.enable()}},Pn=function(){if(this.unselectAll(),s(this,o)){ct(this,o,!1);for(const H of s(this,O).values())H.disable()}},Ve=function(H){const mt=s(this,O).get(H.pageIndex);mt?mt.addOrRebuild(H):this.addEditor(H)},fe=function(){if(s(this,T).size===0)return!0;if(s(this,T).size===1)for(const H of s(this,T).values())return H.isEmpty();return!1},qe=function(H){s(this,$).clear();for(const mt of H)mt.isEmpty()||(s(this,$).add(mt),mt.select());Q(this,et,ee).call(this,{hasSelectedEditor:!0})},Qt(Xt,"TRANSLATE_SMALL",1),Qt(Xt,"TRANSLATE_BIG",10);let D=Xt;t.AnnotationEditorUIManager=D},(n,t,u)=>{var z,it,I,V,st,R,r,o,A,B,U,$,le,ce,Xe,Se,xe,ge,me;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=c,t.getColorValues=T,t.getCurrentTransform=O,t.getCurrentTransformInverse=nt,t.getFilenameFromUrl=h,t.getPdfFilenameFromUrl=v,t.getRGB=l,t.getXfaPageViewport=N,t.isDataScheme=C,t.isPdfFile=b,t.isValidFetchUrl=x,t.loadScript=f,t.noContextMenu=i,t.setLayerDimensions=G;var e=u(7),a=u(1);const L="http://www.w3.org/2000/svg",Y=class Y{};Qt(Y,"CSS",96),Qt(Y,"PDF",72),Qt(Y,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF);let F=Y;t.PixelsPerInch=F;class q extends e.BaseFilterFactory{constructor({docId:P,ownerDocument:W=globalThis.document}={}){super();ot(this,$);ot(this,z);ot(this,it);ot(this,I);ot(this,V);ot(this,st);ot(this,R);ot(this,r);ot(this,o);ot(this,A);ot(this,B);ot(this,U,0);ct(this,I,P),ct(this,V,W)}addFilter(P){if(!P)return"none";let W=s(this,$,le).get(P);if(W)return W;let J,at,gt,xt;if(P.length===1){const Pt=P[0],Wt=new Array(256);for(let Ut=0;Ut<256;Ut++)Wt[Ut]=Pt[Ut]/255;xt=J=at=gt=Wt.join(",")}else{const[Pt,Wt,Ut]=P,qt=new Array(256),Ft=new Array(256),Nt=new Array(256);for(let zt=0;zt<256;zt++)qt[zt]=Pt[zt]/255,Ft[zt]=Wt[zt]/255,Nt[zt]=Ut[zt]/255;J=qt.join(","),at=Ft.join(","),gt=Nt.join(","),xt=`${J}${at}${gt}`}if(W=s(this,$,le).get(xt),W)return s(this,$,le).set(P,W),W;const Et=`g_${s(this,I)}_transfer_map_${he(this,U)._++}`,et=`url(#${Et})`;s(this,$,le).set(P,et),s(this,$,le).set(xt,et);const Tt=Q(this,$,Se).call(this,Et);return Q(this,$,ge).call(this,J,at,gt,Tt),et}addHCMFilter(P,W){var Wt;const J=`${P}-${W}`;if(s(this,R)===J)return s(this,r);if(ct(this,R,J),ct(this,r,"none"),(Wt=s(this,st))==null||Wt.remove(),!P||!W)return s(this,r);const at=Q(this,$,me).call(this,P);P=a.Util.makeHexColor(...at);const gt=Q(this,$,me).call(this,W);if(W=a.Util.makeHexColor(...gt),s(this,$,ce).style.color="",P==="#000000"&&W==="#ffffff"||P===W)return s(this,r);const xt=new Array(256);for(let Ut=0;Ut<=255;Ut++){const qt=Ut/255;xt[Ut]=qt<=.03928?qt/12.92:((qt+.055)/1.055)**2.4}const Et=xt.join(","),et=`g_${s(this,I)}_hcm_filter`,Tt=ct(this,o,Q(this,$,Se).call(this,et));Q(this,$,ge).call(this,Et,Et,Et,Tt),Q(this,$,Xe).call(this,Tt);const Pt=(Ut,qt)=>{const Ft=at[Ut]/255,Nt=gt[Ut]/255,zt=new Array(qt+1);for(let Yt=0;Yt<=qt;Yt++)zt[Yt]=Ft+Yt/qt*(Nt-Ft);return zt.join(",")};return Q(this,$,ge).call(this,Pt(0,5),Pt(1,5),Pt(2,5),Tt),ct(this,r,`url(#${et})`),s(this,r)}addHighlightHCMFilter(P,W,J,at){var Nt;const gt=`${P}-${W}-${J}-${at}`;if(s(this,A)===gt)return s(this,B);if(ct(this,A,gt),ct(this,B,"none"),(Nt=s(this,o))==null||Nt.remove(),!P||!W)return s(this,B);const[xt,Et]=[P,W].map(Q(this,$,me).bind(this));let et=Math.round(.2126*xt[0]+.7152*xt[1]+.0722*xt[2]),Tt=Math.round(.2126*Et[0]+.7152*Et[1]+.0722*Et[2]),[Pt,Wt]=[J,at].map(Q(this,$,me).bind(this));Tt<et&&([et,Tt,Pt,Wt]=[Tt,et,Wt,Pt]),s(this,$,ce).style.color="";const Ut=(zt,Yt,St)=>{const lt=new Array(256),dt=(Tt-et)/St,Mt=zt/255,Xt=(Yt-zt)/(255*St);let Vt=0;for(let H=0;H<=St;H++){const mt=Math.round(et+H*dt),wt=Mt+H*Xt;for(let It=Vt;It<=mt;It++)lt[It]=wt;Vt=mt+1}for(let H=Vt;H<256;H++)lt[H]=lt[Vt-1];return lt.join(",")},qt=`g_${s(this,I)}_hcm_highlight_filter`,Ft=ct(this,o,Q(this,$,Se).call(this,qt));return Q(this,$,Xe).call(this,Ft),Q(this,$,ge).call(this,Ut(Pt[0],Wt[0],5),Ut(Pt[1],Wt[1],5),Ut(Pt[2],Wt[2],5),Ft),ct(this,B,`url(#${qt})`),s(this,B)}destroy(P=!1){P&&(s(this,r)||s(this,B))||(s(this,it)&&(s(this,it).parentNode.parentNode.remove(),ct(this,it,null)),s(this,z)&&(s(this,z).clear(),ct(this,z,null)),ct(this,U,0))}}z=new WeakMap,it=new WeakMap,I=new WeakMap,V=new WeakMap,st=new WeakMap,R=new WeakMap,r=new WeakMap,o=new WeakMap,A=new WeakMap,B=new WeakMap,U=new WeakMap,$=new WeakSet,le=function(){return s(this,z)||ct(this,z,new Map)},ce=function(){if(!s(this,it)){const P=s(this,V).createElement("div"),{style:W}=P;W.visibility="hidden",W.contain="strict",W.width=W.height=0,W.position="absolute",W.top=W.left=0,W.zIndex=-1;const J=s(this,V).createElementNS(L,"svg");J.setAttribute("width",0),J.setAttribute("height",0),ct(this,it,s(this,V).createElementNS(L,"defs")),P.append(J),J.append(s(this,it)),s(this,V).body.append(P)}return s(this,it)},Xe=function(P){const W=s(this,V).createElementNS(L,"feColorMatrix");W.setAttribute("type","matrix"),W.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),P.append(W)},Se=function(P){const W=s(this,V).createElementNS(L,"filter");return W.setAttribute("color-interpolation-filters","sRGB"),W.setAttribute("id",P),s(this,$,ce).append(W),W},xe=function(P,W,J){const at=s(this,V).createElementNS(L,W);at.setAttribute("type","discrete"),at.setAttribute("tableValues",J),P.append(at)},ge=function(P,W,J,at){const gt=s(this,V).createElementNS(L,"feComponentTransfer");at.append(gt),Q(this,$,xe).call(this,gt,"feFuncR",P),Q(this,$,xe).call(this,gt,"feFuncG",W),Q(this,$,xe).call(this,gt,"feFuncB",J)},me=function(P){return s(this,$,ce).style.color=P,l(getComputedStyle(s(this,$,ce)).getPropertyValue("color"))},t.DOMFilterFactory=q;class S extends e.BaseCanvasFactory{constructor({ownerDocument:tt=globalThis.document}={}){super(),this._document=tt}_createCanvas(tt,P){const W=this._document.createElement("canvas");return W.width=tt,W.height=P,W}}t.DOMCanvasFactory=S;async function E(Z,tt=!1){if(x(Z,document.baseURI)){const P=await fetch(Z);if(!P.ok)throw new Error(P.statusText);return tt?new Uint8Array(await P.arrayBuffer()):(0,a.stringToBytes)(await P.text())}return new Promise((P,W)=>{const J=new XMLHttpRequest;J.open("GET",Z,!0),tt&&(J.responseType="arraybuffer"),J.onreadystatechange=()=>{if(J.readyState===XMLHttpRequest.DONE){if(J.status===200||J.status===0){let at;if(tt&&J.response?at=new Uint8Array(J.response):!tt&&J.responseText&&(at=(0,a.stringToBytes)(J.responseText)),at){P(at);return}}W(new Error(J.statusText))}},J.send(null)})}class p extends e.BaseCMapReaderFactory{_fetchData(tt,P){return E(tt,this.isCompressed).then(W=>({cMapData:W,compressionType:P}))}}t.DOMCMapReaderFactory=p;class w extends e.BaseStandardFontDataFactory{_fetchData(tt){return E(tt,!0)}}t.DOMStandardFontDataFactory=w;class D extends e.BaseSVGFactory{_createSVG(tt){return document.createElementNS(L,tt)}}t.DOMSVGFactory=D;class y{constructor({viewBox:tt,scale:P,rotation:W,offsetX:J=0,offsetY:at=0,dontFlip:gt=!1}){this.viewBox=tt,this.scale=P,this.rotation=W,this.offsetX=J,this.offsetY=at;const xt=(tt[2]+tt[0])/2,Et=(tt[3]+tt[1])/2;let et,Tt,Pt,Wt;switch(W%=360,W<0&&(W+=360),W){case 180:et=-1,Tt=0,Pt=0,Wt=1;break;case 90:et=0,Tt=1,Pt=1,Wt=0;break;case 270:et=0,Tt=-1,Pt=-1,Wt=0;break;case 0:et=1,Tt=0,Pt=0,Wt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}gt&&(Pt=-Pt,Wt=-Wt);let Ut,qt,Ft,Nt;et===0?(Ut=Math.abs(Et-tt[1])*P+J,qt=Math.abs(xt-tt[0])*P+at,Ft=(tt[3]-tt[1])*P,Nt=(tt[2]-tt[0])*P):(Ut=Math.abs(xt-tt[0])*P+J,qt=Math.abs(Et-tt[1])*P+at,Ft=(tt[2]-tt[0])*P,Nt=(tt[3]-tt[1])*P),this.transform=[et*P,Tt*P,Pt*P,Wt*P,Ut-et*P*xt-Pt*P*Et,qt-Tt*P*xt-Wt*P*Et],this.width=Ft,this.height=Nt}get rawDims(){const{viewBox:tt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:tt[2]-tt[0],pageHeight:tt[3]-tt[1],pageX:tt[0],pageY:tt[1]})}clone({scale:tt=this.scale,rotation:P=this.rotation,offsetX:W=this.offsetX,offsetY:J=this.offsetY,dontFlip:at=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:tt,rotation:P,offsetX:W,offsetY:J,dontFlip:at})}convertToViewportPoint(tt,P){return a.Util.applyTransform([tt,P],this.transform)}convertToViewportRectangle(tt){const P=a.Util.applyTransform([tt[0],tt[1]],this.transform),W=a.Util.applyTransform([tt[2],tt[3]],this.transform);return[P[0],P[1],W[0],W[1]]}convertToPdfPoint(tt,P){return a.Util.applyInverseTransform([tt,P],this.transform)}}t.PageViewport=y;class m extends a.BaseException{constructor(tt,P=0){super(tt,"RenderingCancelledException"),this.extraDelay=P}}t.RenderingCancelledException=m;function C(Z){const tt=Z.length;let P=0;for(;P<tt&&Z[P].trim()==="";)P++;return Z.substring(P,P+5).toLowerCase()==="data:"}function b(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function h(Z,tt=!1){return tt||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function v(Z,tt="document.pdf"){if(typeof Z!="string")return tt;if(C(Z))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tt;const P=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,W=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,J=P.exec(Z);let at=W.exec(J[1])||W.exec(J[2])||W.exec(J[3]);if(at&&(at=at[0],at.includes("%")))try{at=W.exec(decodeURIComponent(at))[0]}catch{}return at||tt}class M{constructor(){Qt(this,"started",Object.create(null));Qt(this,"times",[])}time(tt){tt in this.started&&(0,a.warn)(`Timer is already running for ${tt}`),this.started[tt]=Date.now()}timeEnd(tt){tt in this.started||(0,a.warn)(`Timer has not been started for ${tt}`),this.times.push({name:tt,start:this.started[tt],end:Date.now()}),delete this.started[tt]}toString(){const tt=[];let P=0;for(const{name:W}of this.times)P=Math.max(W.length,P);for(const{name:W,start:J,end:at}of this.times)tt.push(`${W.padEnd(P)} ${at-J}ms
`);return tt.join("")}}t.StatTimer=M;function x(Z,tt){try{const{protocol:P}=tt?new URL(Z,tt):new URL(Z);return P==="http:"||P==="https:"}catch{return!1}}function i(Z){Z.preventDefault()}function f(Z,tt=!1){return new Promise((P,W)=>{const J=document.createElement("script");J.src=Z,J.onload=function(at){tt&&J.remove(),P(at)},J.onerror=function(){W(new Error(`Cannot load script at: ${J.src}`))},(document.head||document.documentElement).append(J)})}function c(Z){console.log("Deprecated API usage: "+Z)}let d;class g{static toDateObject(tt){if(!tt||typeof tt!="string")return null;d||(d=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const P=d.exec(tt);if(!P)return null;const W=parseInt(P[1],10);let J=parseInt(P[2],10);J=J>=1&&J<=12?J-1:0;let at=parseInt(P[3],10);at=at>=1&&at<=31?at:1;let gt=parseInt(P[4],10);gt=gt>=0&&gt<=23?gt:0;let xt=parseInt(P[5],10);xt=xt>=0&&xt<=59?xt:0;let Et=parseInt(P[6],10);Et=Et>=0&&Et<=59?Et:0;const et=P[7]||"Z";let Tt=parseInt(P[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Pt=parseInt(P[9],10)||0;return Pt=Pt>=0&&Pt<=59?Pt:0,et==="-"?(gt+=Tt,xt+=Pt):et==="+"&&(gt-=Tt,xt-=Pt),new Date(Date.UTC(W,J,at,gt,xt,Et))}}t.PDFDateString=g;function N(Z,{scale:tt=1,rotation:P=0}){const{width:W,height:J}=Z.attributes.style,at=[0,0,parseInt(W),parseInt(J)];return new y({viewBox:at,scale:tt,rotation:P})}function l(Z){if(Z.startsWith("#")){const tt=parseInt(Z.slice(1),16);return[(tt&16711680)>>16,(tt&65280)>>8,tt&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(tt=>parseInt(tt)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(tt=>parseInt(tt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function T(Z){const tt=document.createElement("span");tt.style.visibility="hidden",document.body.append(tt);for(const P of Z.keys()){tt.style.color=P;const W=window.getComputedStyle(tt).color;Z.set(P,l(W))}tt.remove()}function O(Z){const{a:tt,b:P,c:W,d:J,e:at,f:gt}=Z.getTransform();return[tt,P,W,J,at,gt]}function nt(Z){const{a:tt,b:P,c:W,d:J,e:at,f:gt}=Z.getTransform().invertSelf();return[tt,P,W,J,at,gt]}function G(Z,tt,P=!1,W=!0){if(tt instanceof y){const{pageWidth:J,pageHeight:at}=tt.rawDims,{style:gt}=Z,xt=a.FeatureTest.isCSSRoundSupported,Et=`var(--scale-factor) * ${J}px`,et=`var(--scale-factor) * ${at}px`,Tt=xt?`round(${Et}, 1px)`:`calc(${Et})`,Pt=xt?`round(${et}, 1px)`:`calc(${et})`;!P||tt.rotation%180===0?(gt.width=Tt,gt.height=Pt):(gt.width=Pt,gt.height=Tt)}W&&Z.setAttribute("data-main-rotation",tt.rotation)}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=u(1);class a{constructor(){this.constructor===a&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,w){return"none"}addHighlightHCMFilter(p,w,D,y){return"none"}destroy(p=!1){}}t.BaseFilterFactory=a;class L{constructor(){this.constructor===L&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,w){if(p<=0||w<=0)throw new Error("Invalid canvas size");const D=this._createCanvas(p,w);return{canvas:D,context:D.getContext("2d")}}reset(p,w,D){if(!p.canvas)throw new Error("Canvas is not specified");if(w<=0||D<=0)throw new Error("Invalid canvas size");p.canvas.width=w,p.canvas.height=D}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,w){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=L;class F{constructor({baseUrl:p=null,isCompressed:w=!0}){this.constructor===F&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=w}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const w=this.baseUrl+p+(this.isCompressed?".bcmap":""),D=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(w,D).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(p,w){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=F;class q{constructor({baseUrl:p=null}){this.constructor===q&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${p}`;return this._fetchData(w).catch(D=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(p){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=q;class S{constructor(){this.constructor===S&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,w,D=!1){if(p<=0||w<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),D||(y.setAttribute("width",`${p}px`),y.setAttribute("height",`${w}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${p} ${w}`),y}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=S},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=u(1);const a=3285377520,L=4294901760,F=65535;class q{constructor(E){this.h1=E?E&4294967295:a,this.h2=E?E&4294967295:a}update(E){let p,w;if(typeof E=="string"){p=new Uint8Array(E.length*2),w=0;for(let c=0,d=E.length;c<d;c++){const g=E.charCodeAt(c);g<=255?p[w++]=g:(p[w++]=g>>>8,p[w++]=g&255)}}else if((0,e.isArrayBuffer)(E))p=E.slice(),w=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const D=w>>2,y=w-D*4,m=new Uint32Array(p.buffer,0,D);let C=0,b=0,h=this.h1,v=this.h2;const M=3432918353,x=461845907,i=M&F,f=x&F;for(let c=0;c<D;c++)c&1?(C=m[c],C=C*M&L|C*i&F,C=C<<15|C>>>17,C=C*x&L|C*f&F,h^=C,h=h<<13|h>>>19,h=h*5+3864292196):(b=m[c],b=b*M&L|b*i&F,b=b<<15|b>>>17,b=b*x&L|b*f&F,v^=b,v=v<<13|v>>>19,v=v*5+3864292196);switch(C=0,y){case 3:C^=p[D*4+2]<<16;case 2:C^=p[D*4+1]<<8;case 1:C^=p[D*4],C=C*M&L|C*i&F,C=C<<15|C>>>17,C=C*x&L|C*f&F,D&1?h^=C:v^=C}this.h1=h,this.h2=v}hexdigest(){let E=this.h1,p=this.h2;return E^=p>>>1,E=E*3981806797&L|E*36045&F,p=p*4283543511&L|((p<<16|E>>>16)*2950163797&L)>>>16,E^=p>>>1,E=E*444984403&L|E*60499&F,p=p*3301882366&L|((p<<16|E>>>16)*3120437893&L)>>>16,E^=p>>>1,(E>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=q},(n,t,u)=>{var F;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=u(1);class a{constructor({ownerDocument:S=globalThis.document,styleElement:E=null}){ot(this,F,new Set);this._document=S,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(S){this.nativeFontFaces.add(S),this._document.fonts.add(S)}removeNativeFontFace(S){this.nativeFontFaces.delete(S),this._document.fonts.delete(S)}insertRule(S){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(S,E.cssRules.length)}clear(){for(const S of this.nativeFontFaces)this._document.fonts.delete(S);this.nativeFontFaces.clear(),s(this,F).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(S){if(!(!S||s(this,F).has(S.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:E,src:p,style:w}=S,D=new FontFace(E,p,w);this.addNativeFontFace(D);try{await D.load(),s(this,F).add(E)}catch{(0,e.warn)(`Cannot load system font: ${S.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(D)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(S){if(S.attached||S.missingFile&&!S.systemFontInfo)return;if(S.attached=!0,S.systemFontInfo){await this.loadSystemFont(S.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=S.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(w){throw(0,e.warn)(`Failed to load font '${p.family}': '${w}'.`),S.disableFontFace=!0,w}}return}const E=S.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const w=this._queueLoadingCallback(p);this._prepareFontLoadEvent(S,w)})}}get isFontLoadingAPISupported(){var E;const S=!!((E=this._document)!=null&&E.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",S)}get isSyncFontLoadingSupported(){let S=!1;return(e.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(S=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",S)}_queueLoadingCallback(S){function E(){for((0,e.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;p.length>0&&p[0].done;){const D=p.shift();setTimeout(D.callback,0)}}const{loadingRequests:p}=this,w={done:!1,complete:E,callback:S};return p.push(w),w}get _loadTestFont(){const S=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",S)}_prepareFontLoadEvent(S,E){function p(l,T){return l.charCodeAt(T)<<24|l.charCodeAt(T+1)<<16|l.charCodeAt(T+2)<<8|l.charCodeAt(T+3)&255}function w(l,T,O,nt){const G=l.substring(0,T),Y=l.substring(T+O);return G+nt+Y}let D,y;const m=this._document.createElement("canvas");m.width=1,m.height=1;const C=m.getContext("2d");let b=0;function h(l,T){if(++b>30){(0,e.warn)("Load test font never loaded."),T();return}if(C.font="30px "+l,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,l,T))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=w(M,976,v.length,v);const i=16,f=1482184792;let c=p(M,i);for(D=0,y=v.length-3;D<y;D+=4)c=c-f+p(v,D)|0;D<v.length&&(c=c-f+p(v+"XXX",D)|0),M=w(M,i,4,(0,e.string32)(c));const d=`url(data:font/opentype;base64,${btoa(M)});`,g=`@font-face {font-family:"${v}";src:${d}}`;this.insertRule(g);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const l of[S.loadedName,v]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=l,N.append(T)}this._document.body.append(N),h(v,()=>{N.remove(),E.complete()})}}F=new WeakMap,t.FontLoader=a;class L{constructor(S,{isEvalSupported:E=!0,disableFontFace:p=!1,ignoreErrors:w=!1,inspectFont:D=null}){this.compiledGlyphs=Object.create(null);for(const y in S)this[y]=S[y];this.isEvalSupported=E!==!1,this.disableFontFace=p===!0,this.ignoreErrors=w===!0,this._inspectFont=D}createNativeFontFace(){var E;if(!this.data||this.disableFontFace)return null;let S;if(!this.cssFontInfo)S=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),S=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(E=this._inspectFont)==null||E.call(this,this),S}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const S=(0,e.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(S)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let D=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(D+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${D}src:${E}}`}return(w=this._inspectFont)==null||w.call(this,this,E),p}getPathGenerator(S,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let p;try{p=S.get(this.loadedName+"_path_"+E)}catch(w){if(!this.ignoreErrors)throw w;return(0,e.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[E]=function(D,y){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const w=[];for(const D of p){const y=D.args!==void 0?D.args.join(","):"";w.push("c.",D.cmd,"(",y,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",w.join(""))}return this.compiledGlyphs[E]=function(w,D){for(const y of p)y.cmd==="scale"&&(y.args=[D,-D]),w[y.cmd].apply(w,y.args)}}}t.FontFaceObject=L},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=u(7);u(1);const a=function(E){return new Promise((p,w)=>{require$$5.readFile(E,(y,m)=>{if(y||!m){w(new Error(y));return}p(new Uint8Array(m))})})};class L extends e.BaseFilterFactory{}t.NodeFilterFactory=L;class F extends e.BaseCanvasFactory{_createCanvas(p,w){return require$$5.createCanvas(p,w)}}t.NodeCanvasFactory=F;class q extends e.BaseCMapReaderFactory{_fetchData(p,w){return a(p).then(D=>({cMapData:D,compressionType:w}))}}t.NodeCMapReaderFactory=q;class S extends e.BaseStandardFontDataFactory{_fetchData(p){return a(p)}}t.NodeStandardFontDataFactory=S},(n,t,u)=>{var it,Ye,Ke;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=u(1),a=u(6),L=u(12),F=u(13);const q=16,S=100,E=4096,p=15,w=10,D=1e3,y=16;function m(R,r){if(R._removeMirroring)throw new Error("Context is already forwarding operations.");R.__originalSave=R.save,R.__originalRestore=R.restore,R.__originalRotate=R.rotate,R.__originalScale=R.scale,R.__originalTranslate=R.translate,R.__originalTransform=R.transform,R.__originalSetTransform=R.setTransform,R.__originalResetTransform=R.resetTransform,R.__originalClip=R.clip,R.__originalMoveTo=R.moveTo,R.__originalLineTo=R.lineTo,R.__originalBezierCurveTo=R.bezierCurveTo,R.__originalRect=R.rect,R.__originalClosePath=R.closePath,R.__originalBeginPath=R.beginPath,R._removeMirroring=()=>{R.save=R.__originalSave,R.restore=R.__originalRestore,R.rotate=R.__originalRotate,R.scale=R.__originalScale,R.translate=R.__originalTranslate,R.transform=R.__originalTransform,R.setTransform=R.__originalSetTransform,R.resetTransform=R.__originalResetTransform,R.clip=R.__originalClip,R.moveTo=R.__originalMoveTo,R.lineTo=R.__originalLineTo,R.bezierCurveTo=R.__originalBezierCurveTo,R.rect=R.__originalRect,R.closePath=R.__originalClosePath,R.beginPath=R.__originalBeginPath,delete R._removeMirroring},R.save=function(){r.save(),this.__originalSave()},R.restore=function(){r.restore(),this.__originalRestore()},R.translate=function(A,B){r.translate(A,B),this.__originalTranslate(A,B)},R.scale=function(A,B){r.scale(A,B),this.__originalScale(A,B)},R.transform=function(A,B,U,$,K,rt){r.transform(A,B,U,$,K,rt),this.__originalTransform(A,B,U,$,K,rt)},R.setTransform=function(A,B,U,$,K,rt){r.setTransform(A,B,U,$,K,rt),this.__originalSetTransform(A,B,U,$,K,rt)},R.resetTransform=function(){r.resetTransform(),this.__originalResetTransform()},R.rotate=function(A){r.rotate(A),this.__originalRotate(A)},R.clip=function(A){r.clip(A),this.__originalClip(A)},R.moveTo=function(o,A){r.moveTo(o,A),this.__originalMoveTo(o,A)},R.lineTo=function(o,A){r.lineTo(o,A),this.__originalLineTo(o,A)},R.bezierCurveTo=function(o,A,B,U,$,K){r.bezierCurveTo(o,A,B,U,$,K),this.__originalBezierCurveTo(o,A,B,U,$,K)},R.rect=function(o,A,B,U){r.rect(o,A,B,U),this.__originalRect(o,A,B,U)},R.closePath=function(){r.closePath(),this.__originalClosePath()},R.beginPath=function(){r.beginPath(),this.__originalBeginPath()}}class C{constructor(r){this.canvasFactory=r,this.cache=Object.create(null)}getCanvas(r,o,A){let B;return this.cache[r]!==void 0?(B=this.cache[r],this.canvasFactory.reset(B,o,A)):(B=this.canvasFactory.create(o,A),this.cache[r]=B),B}delete(r){delete this.cache[r]}clear(){for(const r in this.cache){const o=this.cache[r];this.canvasFactory.destroy(o),delete this.cache[r]}}}function b(R,r,o,A,B,U,$,K,rt,ut){const[ft,yt,bt,vt,Z,tt]=(0,a.getCurrentTransform)(R);if(yt===0&&bt===0){const J=$*ft+Z,at=Math.round(J),gt=K*vt+tt,xt=Math.round(gt),Et=($+rt)*ft+Z,et=Math.abs(Math.round(Et)-at)||1,Tt=(K+ut)*vt+tt,Pt=Math.abs(Math.round(Tt)-xt)||1;return R.setTransform(Math.sign(ft),0,0,Math.sign(vt),at,xt),R.drawImage(r,o,A,B,U,0,0,et,Pt),R.setTransform(ft,yt,bt,vt,Z,tt),[et,Pt]}if(ft===0&&vt===0){const J=K*bt+Z,at=Math.round(J),gt=$*yt+tt,xt=Math.round(gt),Et=(K+ut)*bt+Z,et=Math.abs(Math.round(Et)-at)||1,Tt=($+rt)*yt+tt,Pt=Math.abs(Math.round(Tt)-xt)||1;return R.setTransform(0,Math.sign(yt),Math.sign(bt),0,at,xt),R.drawImage(r,o,A,B,U,0,0,Pt,et),R.setTransform(ft,yt,bt,vt,Z,tt),[Pt,et]}R.drawImage(r,o,A,B,U,$,K,rt,ut);const P=Math.hypot(ft,yt),W=Math.hypot(bt,vt);return[P*rt,W*ut]}function h(R){const{width:r,height:o}=R;if(r>D||o>D)return null;const A=1e3,B=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=r+1;let $=new Uint8Array(U*(o+1)),K,rt,ut;const ft=r+7&-8;let yt=new Uint8Array(ft*o),bt=0;for(const W of R.data){let J=128;for(;J>0;)yt[bt++]=W&J?0:255,J>>=1}let vt=0;for(bt=0,yt[bt]!==0&&($[0]=1,++vt),rt=1;rt<r;rt++)yt[bt]!==yt[bt+1]&&($[rt]=yt[bt]?2:1,++vt),bt++;for(yt[bt]!==0&&($[rt]=2,++vt),K=1;K<o;K++){bt=K*ft,ut=K*U,yt[bt-ft]!==yt[bt]&&($[ut]=yt[bt]?1:8,++vt);let W=(yt[bt]?4:0)+(yt[bt-ft]?8:0);for(rt=1;rt<r;rt++)W=(W>>2)+(yt[bt+1]?4:0)+(yt[bt-ft+1]?8:0),B[W]&&($[ut+rt]=B[W],++vt),bt++;if(yt[bt-ft]!==yt[bt]&&($[ut+rt]=yt[bt]?2:4,++vt),vt>A)return null}for(bt=ft*(o-1),ut=K*U,yt[bt]!==0&&($[ut]=8,++vt),rt=1;rt<r;rt++)yt[bt]!==yt[bt+1]&&($[ut+rt]=yt[bt]?4:8,++vt),bt++;if(yt[bt]!==0&&($[ut+rt]=4,++vt),vt>A)return null;const Z=new Int32Array([0,U,-1,0,-U,0,0,0,1]),tt=new Path2D;for(K=0;vt&&K<=o;K++){let W=K*U;const J=W+r;for(;W<J&&!$[W];)W++;if(W===J)continue;tt.moveTo(W%U,K);const at=W;let gt=$[W];do{const xt=Z[gt];do W+=xt;while(!$[W]);const Et=$[W];Et!==5&&Et!==10?(gt=Et,$[W]=0):(gt=Et&51*gt>>4,$[W]&=gt>>2|gt<<2),tt.lineTo(W%U,W/U|0),$[W]||--vt}while(at!==W);--K}return yt=null,$=null,function(W){W.save(),W.scale(1/r,-1/o),W.translate(0,-o),W.fill(tt),W.beginPath(),W.restore()}}class v{constructor(r,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,r,o])}clone(){const r=Object.create(this);return r.clipBox=this.clipBox.slice(),r}setCurrentPoint(r,o){this.x=r,this.y=o}updatePathMinMax(r,o,A){[o,A]=e.Util.applyTransform([o,A],r),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,A),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,A)}updateRectMinMax(r,o){const A=e.Util.applyTransform(o,r),B=e.Util.applyTransform(o.slice(2),r);this.minX=Math.min(this.minX,A[0],B[0]),this.minY=Math.min(this.minY,A[1],B[1]),this.maxX=Math.max(this.maxX,A[0],B[0]),this.maxY=Math.max(this.maxY,A[1],B[1])}updateScalingPathMinMax(r,o){e.Util.scaleMinMax(r,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(r,o,A,B,U,$,K,rt,ut,ft){const yt=e.Util.bezierBoundingBox(o,A,B,U,$,K,rt,ut);if(ft){ft[0]=Math.min(ft[0],yt[0],yt[2]),ft[1]=Math.max(ft[1],yt[0],yt[2]),ft[2]=Math.min(ft[2],yt[1],yt[3]),ft[3]=Math.max(ft[3],yt[1],yt[3]);return}this.updateRectMinMax(r,yt)}getPathBoundingBox(r=L.PathType.FILL,o=null){const A=[this.minX,this.minY,this.maxX,this.maxY];if(r===L.PathType.STROKE){o||(0,e.unreachable)("Stroke bounding box must include transform.");const B=e.Util.singularValueDecompose2dScale(o),U=B[0]*this.lineWidth/2,$=B[1]*this.lineWidth/2;A[0]-=U,A[1]-=$,A[2]+=U,A[3]+=$}return A}updateClipFromPath(){const r=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(r||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(r){this.clipBox=r,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(r=L.PathType.FILL,o=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(r,o))}}function M(R,r){if(typeof ImageData<"u"&&r instanceof ImageData){R.putImageData(r,0,0);return}const o=r.height,A=r.width,B=o%y,U=(o-B)/y,$=B===0?U:U+1,K=R.createImageData(A,y);let rt=0,ut;const ft=r.data,yt=K.data;let bt,vt,Z,tt;if(r.kind===e.ImageKind.GRAYSCALE_1BPP){const P=ft.byteLength,W=new Uint32Array(yt.buffer,0,yt.byteLength>>2),J=W.length,at=A+7>>3,gt=4294967295,xt=e.FeatureTest.isLittleEndian?4278190080:255;for(bt=0;bt<$;bt++){for(Z=bt<U?y:B,ut=0,vt=0;vt<Z;vt++){const Et=P-rt;let et=0;const Tt=Et>at?A:Et*8-7,Pt=Tt&-8;let Wt=0,Ut=0;for(;et<Pt;et+=8)Ut=ft[rt++],W[ut++]=Ut&128?gt:xt,W[ut++]=Ut&64?gt:xt,W[ut++]=Ut&32?gt:xt,W[ut++]=Ut&16?gt:xt,W[ut++]=Ut&8?gt:xt,W[ut++]=Ut&4?gt:xt,W[ut++]=Ut&2?gt:xt,W[ut++]=Ut&1?gt:xt;for(;et<Tt;et++)Wt===0&&(Ut=ft[rt++],Wt=128),W[ut++]=Ut&Wt?gt:xt,Wt>>=1}for(;ut<J;)W[ut++]=0;R.putImageData(K,0,bt*y)}}else if(r.kind===e.ImageKind.RGBA_32BPP){for(vt=0,tt=A*y*4,bt=0;bt<U;bt++)yt.set(ft.subarray(rt,rt+tt)),rt+=tt,R.putImageData(K,0,vt),vt+=y;bt<$&&(tt=A*B*4,yt.set(ft.subarray(rt,rt+tt)),R.putImageData(K,0,vt))}else if(r.kind===e.ImageKind.RGB_24BPP)for(Z=y,tt=A*Z,bt=0;bt<$;bt++){for(bt>=U&&(Z=B,tt=A*Z),ut=0,vt=tt;vt--;)yt[ut++]=ft[rt++],yt[ut++]=ft[rt++],yt[ut++]=ft[rt++],yt[ut++]=255;R.putImageData(K,0,bt*y)}else throw new Error(`bad image kind: ${r.kind}`)}function x(R,r){if(r.bitmap){R.drawImage(r.bitmap,0,0);return}const o=r.height,A=r.width,B=o%y,U=(o-B)/y,$=B===0?U:U+1,K=R.createImageData(A,y);let rt=0;const ut=r.data,ft=K.data;for(let yt=0;yt<$;yt++){const bt=yt<U?y:B;({srcPos:rt}=(0,F.convertBlackAndWhiteToRGBA)({src:ut,srcPos:rt,dest:ft,width:A,height:bt,nonBlackColor:0})),R.putImageData(K,0,yt*y)}}function i(R,r){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const A of o)R[A]!==void 0&&(r[A]=R[A]);R.setLineDash!==void 0&&(r.setLineDash(R.getLineDash()),r.lineDashOffset=R.lineDashOffset)}function f(R){if(R.strokeStyle=R.fillStyle="#000000",R.fillRule="nonzero",R.globalAlpha=1,R.lineWidth=1,R.lineCap="butt",R.lineJoin="miter",R.miterLimit=10,R.globalCompositeOperation="source-over",R.font="10px sans-serif",R.setLineDash!==void 0&&(R.setLineDash([]),R.lineDashOffset=0),!e.isNodeJS){const{filter:r}=R;r!=="none"&&r!==""&&(R.filter="none")}}function c(R,r,o,A){const B=R.length;for(let U=3;U<B;U+=4){const $=R[U];if($===0)R[U-3]=r,R[U-2]=o,R[U-1]=A;else if($<255){const K=255-$;R[U-3]=R[U-3]*$+r*K>>8,R[U-2]=R[U-2]*$+o*K>>8,R[U-1]=R[U-1]*$+A*K>>8}}}function d(R,r,o){const A=R.length,B=1/255;for(let U=3;U<A;U+=4){const $=o?o[R[U]]:R[U];r[U]=r[U]*$*B|0}}function g(R,r,o){const A=R.length;for(let B=3;B<A;B+=4){const U=R[B-3]*77+R[B-2]*152+R[B-1]*28;r[B]=o?r[B]*o[U>>8]>>8:r[B]*U>>16}}function N(R,r,o,A,B,U,$,K,rt,ut,ft){const yt=!!U,bt=yt?U[0]:0,vt=yt?U[1]:0,Z=yt?U[2]:0,tt=B==="Luminosity"?g:d,W=Math.min(A,Math.ceil(1048576/o));for(let J=0;J<A;J+=W){const at=Math.min(W,A-J),gt=R.getImageData(K-ut,J+(rt-ft),o,at),xt=r.getImageData(K,J+rt,o,at);yt&&c(gt.data,bt,vt,Z),tt(gt.data,xt.data,$),r.putImageData(xt,K,J+rt)}}function l(R,r,o,A){const B=A[0],U=A[1],$=A[2]-B,K=A[3]-U;$===0||K===0||(N(r.context,o,$,K,r.subtype,r.backdrop,r.transferMap,B,U,r.offsetX,r.offsetY),R.save(),R.globalAlpha=1,R.globalCompositeOperation="source-over",R.setTransform(1,0,0,1,0,0),R.drawImage(o.canvas,0,0),R.restore())}function T(R,r){const o=e.Util.singularValueDecompose2dScale(R);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const A=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return r!==void 0?r:o[0]<=A||o[1]<=A}const O=["butt","round","square"],nt=["miter","round","bevel"],G={},Y={},st=class st{constructor(r,o,A,B,U,{optionalContentConfig:$,markedContentStack:K=null},rt,ut){ot(this,it);this.ctx=r,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=A,this.canvasFactory=B,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=$,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=rt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ut,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(r,o=null){return typeof r=="string"?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):o}beginDrawing({transform:r,viewport:o,transparency:A=!1,background:B=null}){const U=this.ctx.canvas.width,$=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=B||"#ffffff",this.ctx.fillRect(0,0,U,$),this.ctx.fillStyle=K,A){const rt=this.cachedCanvases.getCanvas("transparent",U,$);this.compositeCtx=this.ctx,this.transparentCanvas=rt.canvas,this.ctx=rt.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),r&&(this.ctx.transform(...r),this.outputScaleX=r[0],this.outputScaleY=r[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(r,o,A,B){const U=r.argsArray,$=r.fnArray;let K=o||0;const rt=U.length;if(rt===K)return K;const ut=rt-K>w&&typeof A=="function",ft=ut?Date.now()+p:0;let yt=0;const bt=this.commonObjs,vt=this.objs;let Z;for(;;){if(B!==void 0&&K===B.nextBreakPoint)return B.breakIt(K,A),K;if(Z=$[K],Z!==e.OPS.dependency)this[Z].apply(this,U[K]);else for(const tt of U[K]){const P=tt.startsWith("g_")?bt:vt;if(!P.has(tt))return P.get(tt,A),K}if(K++,K===rt)return K;if(ut&&++yt>w){if(Date.now()>ft)return A(),K;yt=0}}}endDrawing(){Q(this,it,Ye).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const r of this._cachedBitmapsMap.values()){for(const o of r.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);r.clear()}this._cachedBitmapsMap.clear(),Q(this,it,Ke).call(this)}_scaleImage(r,o){const A=r.width,B=r.height;let U=Math.max(Math.hypot(o[0],o[1]),1),$=Math.max(Math.hypot(o[2],o[3]),1),K=A,rt=B,ut="prescale1",ft,yt;for(;U>2&&K>1||$>2&&rt>1;){let bt=K,vt=rt;U>2&&K>1&&(bt=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),U/=K/bt),$>2&&rt>1&&(vt=rt>=16384?Math.floor(rt/2)-1||1:Math.ceil(rt)/2,$/=rt/vt),ft=this.cachedCanvases.getCanvas(ut,bt,vt),yt=ft.context,yt.clearRect(0,0,bt,vt),yt.drawImage(r,0,0,K,rt,0,0,bt,vt),r=ft.canvas,K=bt,rt=vt,ut=ut==="prescale1"?"prescale2":"prescale1"}return{img:r,paintWidth:K,paintHeight:rt}}_createMaskCanvas(r){const o=this.ctx,{width:A,height:B}=r,U=this.current.fillColor,$=this.current.patternFill,K=(0,a.getCurrentTransform)(o);let rt,ut,ft,yt;if((r.bitmap||r.data)&&r.count>1){const et=r.bitmap||r.data.buffer;ut=JSON.stringify($?K:[K.slice(0,4),U]),rt=this._cachedBitmapsMap.get(et),rt||(rt=new Map,this._cachedBitmapsMap.set(et,rt));const Tt=rt.get(ut);if(Tt&&!$){const Pt=Math.round(Math.min(K[0],K[2])+K[4]),Wt=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Tt,offsetX:Pt,offsetY:Wt}}ft=Tt}ft||(yt=this.cachedCanvases.getCanvas("maskCanvas",A,B),x(yt.context,r));let bt=e.Util.transform(K,[1/A,0,0,-1/B,0,0]);bt=e.Util.transform(bt,[1,0,0,1,0,-B]);const vt=e.Util.applyTransform([0,0],bt),Z=e.Util.applyTransform([A,B],bt),tt=e.Util.normalizeRect([vt[0],vt[1],Z[0],Z[1]]),P=Math.round(tt[2]-tt[0])||1,W=Math.round(tt[3]-tt[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",P,W),at=J.context,gt=Math.min(vt[0],Z[0]),xt=Math.min(vt[1],Z[1]);at.translate(-gt,-xt),at.transform(...bt),ft||(ft=this._scaleImage(yt.canvas,(0,a.getCurrentTransformInverse)(at)),ft=ft.img,rt&&$&&rt.set(ut,ft)),at.imageSmoothingEnabled=T((0,a.getCurrentTransform)(at),r.interpolate),b(at,ft,0,0,ft.width,ft.height,0,0,A,B),at.globalCompositeOperation="source-in";const Et=e.Util.transform((0,a.getCurrentTransformInverse)(at),[1,0,0,1,-gt,-xt]);return at.fillStyle=$?U.getPattern(o,this,Et,L.PathType.FILL):U,at.fillRect(0,0,A,B),rt&&!$&&(this.cachedCanvases.delete("fillCanvas"),rt.set(ut,J.canvas)),{canvas:J.canvas,offsetX:Math.round(gt),offsetY:Math.round(xt)}}setLineWidth(r){r!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(r){this.ctx.lineCap=O[r]}setLineJoin(r){this.ctx.lineJoin=nt[r]}setMiterLimit(r){this.ctx.miterLimit=r}setDash(r,o){const A=this.ctx;A.setLineDash!==void 0&&(A.setLineDash(r),A.lineDashOffset=o)}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[o,A]of r)switch(o){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A[0],A[1]);break;case"CA":this.current.strokeAlpha=A;break;case"ca":this.current.fillAlpha=A,this.ctx.globalAlpha=A;break;case"BM":this.ctx.globalCompositeOperation=A;break;case"SMask":this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(A);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const r=this.inSMaskMode;this.current.activeSMask&&!r?this.beginSMaskMode():!this.current.activeSMask&&r&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.ctx.canvas.width,o=this.ctx.canvas.height,A="smaskGroupAt"+this.groupLevel,B=this.cachedCanvases.getCanvas(A,r,o);this.suspendedCtx=this.ctx,this.ctx=B.context;const U=this.ctx;U.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,U),m(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(r){if(!this.current.activeSMask)return;r?(r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r[2]=Math.ceil(r[2]),r[3]=Math.ceil(r[3])):r=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,A=this.suspendedCtx;l(A,o,this.ctx,r),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(r,o,A,B,U,$){this.ctx.transform(r,o,A,B,U,$),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(r,o,A){const B=this.ctx,U=this.current;let $=U.x,K=U.y,rt,ut;const ft=(0,a.getCurrentTransform)(B),yt=ft[0]===0&&ft[3]===0||ft[1]===0&&ft[2]===0,bt=yt?A.slice(0):null;for(let vt=0,Z=0,tt=r.length;vt<tt;vt++)switch(r[vt]|0){case e.OPS.rectangle:$=o[Z++],K=o[Z++];const P=o[Z++],W=o[Z++],J=$+P,at=K+W;B.moveTo($,K),P===0||W===0?B.lineTo(J,at):(B.lineTo(J,K),B.lineTo(J,at),B.lineTo($,at)),yt||U.updateRectMinMax(ft,[$,K,J,at]),B.closePath();break;case e.OPS.moveTo:$=o[Z++],K=o[Z++],B.moveTo($,K),yt||U.updatePathMinMax(ft,$,K);break;case e.OPS.lineTo:$=o[Z++],K=o[Z++],B.lineTo($,K),yt||U.updatePathMinMax(ft,$,K);break;case e.OPS.curveTo:rt=$,ut=K,$=o[Z+4],K=o[Z+5],B.bezierCurveTo(o[Z],o[Z+1],o[Z+2],o[Z+3],$,K),U.updateCurvePathMinMax(ft,rt,ut,o[Z],o[Z+1],o[Z+2],o[Z+3],$,K,bt),Z+=6;break;case e.OPS.curveTo2:rt=$,ut=K,B.bezierCurveTo($,K,o[Z],o[Z+1],o[Z+2],o[Z+3]),U.updateCurvePathMinMax(ft,rt,ut,$,K,o[Z],o[Z+1],o[Z+2],o[Z+3],bt),$=o[Z+2],K=o[Z+3],Z+=4;break;case e.OPS.curveTo3:rt=$,ut=K,$=o[Z+2],K=o[Z+3],B.bezierCurveTo(o[Z],o[Z+1],$,K,$,K),U.updateCurvePathMinMax(ft,rt,ut,o[Z],o[Z+1],$,K,$,K,bt),Z+=4;break;case e.OPS.closePath:B.closePath();break}yt&&U.updateScalingPathMinMax(ft,bt),U.setCurrentPoint($,K)}closePath(){this.ctx.closePath()}stroke(r=!0){const o=this.ctx,A=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof A=="object"&&(A!=null&&A.getPattern)?(o.save(),o.strokeStyle=A.getPattern(o,this,(0,a.getCurrentTransformInverse)(o),L.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),r&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(r=!0){const o=this.ctx,A=this.current.fillColor,B=this.current.patternFill;let U=!1;B&&(o.save(),o.fillStyle=A.getPattern(o,this,(0,a.getCurrentTransformInverse)(o),L.PathType.FILL),U=!0);const $=this.current.getClippedPathBoundingBox();this.contentVisible&&$!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),U&&o.restore(),r&&this.consumePath($)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const r=this.pendingTextPaths,o=this.ctx;if(r===void 0){o.beginPath();return}o.save(),o.beginPath();for(const A of r)o.setTransform(...A.transform),o.translate(A.x,A.y),A.addToPath(o,A.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(r){this.current.charSpacing=r}setWordSpacing(r){this.current.wordSpacing=r}setHScale(r){this.current.textHScale=r/100}setLeading(r){this.current.leading=-r}setFont(r,o){var ft;const A=this.commonObjs.get(r),B=this.current;if(!A)throw new Error(`Can't find font for ${r}`);if(B.fontMatrix=A.fontMatrix||e.FONT_IDENTITY_MATRIX,(B.fontMatrix[0]===0||B.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+r),o<0?(o=-o,B.fontDirection=-1):B.fontDirection=1,this.current.font=A,this.current.fontSize=o,A.isType3Font)return;const U=A.loadedName||"sans-serif",$=((ft=A.systemFontInfo)==null?void 0:ft.css)||`"${U}", ${A.fallbackName}`;let K="normal";A.black?K="900":A.bold&&(K="bold");const rt=A.italic?"italic":"normal";let ut=o;o<q?ut=q:o>S&&(ut=S),this.current.fontSizeScale=o/ut,this.ctx.font=`${rt} ${K} ${ut}px ${$}`}setTextRenderingMode(r){this.current.textRenderingMode=r}setTextRise(r){this.current.textRise=r}moveText(r,o){this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=o}setLeadingMoveText(r,o){this.setLeading(-o),this.moveText(r,o)}setTextMatrix(r,o,A,B,U,$){this.current.textMatrix=[r,o,A,B,U,$],this.current.textMatrixScale=Math.hypot(r,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(r,o,A,B){const U=this.ctx,$=this.current,K=$.font,rt=$.textRenderingMode,ut=$.fontSize/$.fontSizeScale,ft=rt&e.TextRenderingMode.FILL_STROKE_MASK,yt=!!(rt&e.TextRenderingMode.ADD_TO_PATH_FLAG),bt=$.patternFill&&!K.missingFile;let vt;(K.disableFontFace||yt||bt)&&(vt=K.getPathGenerator(this.commonObjs,r)),K.disableFontFace||bt?(U.save(),U.translate(o,A),U.beginPath(),vt(U,ut),B&&U.setTransform(...B),(ft===e.TextRenderingMode.FILL||ft===e.TextRenderingMode.FILL_STROKE)&&U.fill(),(ft===e.TextRenderingMode.STROKE||ft===e.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((ft===e.TextRenderingMode.FILL||ft===e.TextRenderingMode.FILL_STROKE)&&U.fillText(r,o,A),(ft===e.TextRenderingMode.STROKE||ft===e.TextRenderingMode.FILL_STROKE)&&U.strokeText(r,o,A)),yt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(U),x:o,y:A,fontSize:ut,addToPath:vt})}get isFontSubpixelAAEnabled(){const{context:r}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);r.scale(1.5,1),r.fillText("I",0,10);const o=r.getImageData(0,0,10,10).data;let A=!1;for(let B=3;B<o.length;B+=4)if(o[B]>0&&o[B]<255){A=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",A)}showText(r){const o=this.current,A=o.font;if(A.isType3Font)return this.showType3Text(r);const B=o.fontSize;if(B===0)return;const U=this.ctx,$=o.fontSizeScale,K=o.charSpacing,rt=o.wordSpacing,ut=o.fontDirection,ft=o.textHScale*ut,yt=r.length,bt=A.vertical,vt=bt?1:-1,Z=A.defaultVMetrics,tt=B*o.fontMatrix[0],P=o.textRenderingMode===e.TextRenderingMode.FILL&&!A.disableFontFace&&!o.patternFill;U.save(),U.transform(...o.textMatrix),U.translate(o.x,o.y+o.textRise),ut>0?U.scale(ft,-1):U.scale(ft,1);let W;if(o.patternFill){U.save();const Et=o.fillColor.getPattern(U,this,(0,a.getCurrentTransformInverse)(U),L.PathType.FILL);W=(0,a.getCurrentTransform)(U),U.restore(),U.fillStyle=Et}let J=o.lineWidth;const at=o.textMatrixScale;if(at===0||J===0){const Et=o.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(Et===e.TextRenderingMode.STROKE||Et===e.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=at;if($!==1&&(U.scale($,$),J/=$),U.lineWidth=J,A.isInvalidPDFjsFont){const Et=[];let et=0;for(const Tt of r)Et.push(Tt.unicode),et+=Tt.width;U.fillText(Et.join(""),0,0),o.x+=et*tt*ft,U.restore(),this.compose();return}let gt=0,xt;for(xt=0;xt<yt;++xt){const Et=r[xt];if(typeof Et=="number"){gt+=vt*Et*B/1e3;continue}let et=!1;const Tt=(Et.isSpace?rt:0)+K,Pt=Et.fontChar,Wt=Et.accent;let Ut,qt,Ft=Et.width;if(bt){const zt=Et.vmetric||Z,Yt=-(Et.vmetric?zt[1]:Ft*.5)*tt,St=zt[2]*tt;Ft=zt?-zt[0]:Ft,Ut=Yt/$,qt=(gt+St)/$}else Ut=gt/$,qt=0;if(A.remeasure&&Ft>0){const zt=U.measureText(Pt).width*1e3/B*$;if(Ft<zt&&this.isFontSubpixelAAEnabled){const Yt=Ft/zt;et=!0,U.save(),U.scale(Yt,1),Ut/=Yt}else Ft!==zt&&(Ut+=(Ft-zt)/2e3*B/$)}if(this.contentVisible&&(Et.isInFont||A.missingFile)){if(P&&!Wt)U.fillText(Pt,Ut,qt);else if(this.paintChar(Pt,Ut,qt,W),Wt){const zt=Ut+B*Wt.offset.x/$,Yt=qt-B*Wt.offset.y/$;this.paintChar(Wt.fontChar,zt,Yt,W)}}const Nt=bt?Ft*tt-Tt*ut:Ft*tt+Tt*ut;gt+=Nt,et&&U.restore()}bt?o.y-=gt:o.x+=gt*ft,U.restore(),this.compose()}showType3Text(r){const o=this.ctx,A=this.current,B=A.font,U=A.fontSize,$=A.fontDirection,K=B.vertical?1:-1,rt=A.charSpacing,ut=A.wordSpacing,ft=A.textHScale*$,yt=A.fontMatrix||e.FONT_IDENTITY_MATRIX,bt=r.length,vt=A.textRenderingMode===e.TextRenderingMode.INVISIBLE;let Z,tt,P,W;if(!(vt||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...A.textMatrix),o.translate(A.x,A.y),o.scale(ft,$),Z=0;Z<bt;++Z){if(tt=r[Z],typeof tt=="number"){W=K*tt*U/1e3,this.ctx.translate(W,0),A.x+=W*ft;continue}const J=(tt.isSpace?ut:0)+rt,at=B.charProcOperatorList[tt.operatorListId];if(!at){(0,e.warn)(`Type3 character "${tt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=tt,this.save(),o.scale(U,U),o.transform(...yt),this.executeOperatorList(at),this.restore()),P=e.Util.applyTransform([tt.width,0],yt)[0]*U+J,o.translate(P,0),A.x+=P*ft}o.restore(),this.processingType3=null}}setCharWidth(r,o){}setCharWidthAndBounds(r,o,A,B,U,$){this.ctx.rect(A,B,U-A,$-B),this.ctx.clip(),this.endPath()}getColorN_Pattern(r){let o;if(r[0]==="TilingPattern"){const A=r[1],B=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),U={createCanvasGraphics:$=>new st($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new L.TilingPattern(r,A,this.ctx,U,B)}else o=this._getPattern(r[1],r[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,o,A){const B=e.Util.makeHexColor(r,o,A);this.ctx.strokeStyle=B,this.current.strokeColor=B}setFillRGBColor(r,o,A){const B=e.Util.makeHexColor(r,o,A);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}_getPattern(r,o=null){let A;return this.cachedPatterns.has(r)?A=this.cachedPatterns.get(r):(A=(0,L.getShadingPattern)(this.getObject(r)),this.cachedPatterns.set(r,A)),o&&(A.matrix=o),A}shadingFill(r){if(!this.contentVisible)return;const o=this.ctx;this.save();const A=this._getPattern(r);o.fillStyle=A.getPattern(o,this,(0,a.getCurrentTransformInverse)(o),L.PathType.SHADING);const B=(0,a.getCurrentTransformInverse)(o);if(B){const{width:U,height:$}=o.canvas,[K,rt,ut,ft]=e.Util.getAxialAlignedBoundingBox([0,0,U,$],B);this.ctx.fillRect(K,rt,ut-K,ft-rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(r,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(r)&&r.length===6&&this.transform(...r),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),o)){const A=o[2]-o[0],B=o[3]-o[1];this.ctx.rect(o[0],o[1],A,B),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(r){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;r.isolated||(0,e.info)("TODO: Support non-isolated groups."),r.knockout&&(0,e.warn)("Knockout groups not supported.");const A=(0,a.getCurrentTransform)(o);if(r.matrix&&o.transform(...r.matrix),!r.bbox)throw new Error("Bounding box is required.");let B=e.Util.getAxialAlignedBoundingBox(r.bbox,(0,a.getCurrentTransform)(o));const U=[0,0,o.canvas.width,o.canvas.height];B=e.Util.intersect(B,U)||[0,0,0,0];const $=Math.floor(B[0]),K=Math.floor(B[1]);let rt=Math.max(Math.ceil(B[2])-$,1),ut=Math.max(Math.ceil(B[3])-K,1),ft=1,yt=1;rt>E&&(ft=rt/E,rt=E),ut>E&&(yt=ut/E,ut=E),this.current.startNewPathAndClipBox([0,0,rt,ut]);let bt="groupAt"+this.groupLevel;r.smask&&(bt+="_smask_"+this.smaskCounter++%2);const vt=this.cachedCanvases.getCanvas(bt,rt,ut),Z=vt.context;Z.scale(1/ft,1/yt),Z.translate(-$,-K),Z.transform(...A),r.smask?this.smaskStack.push({canvas:vt.canvas,context:Z,offsetX:$,offsetY:K,scaleX:ft,scaleY:yt,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate($,K),o.scale(ft,yt),o.save()),i(o,Z),this.ctx=Z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(r){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,A=this.groupStack.pop();if(this.ctx=A,this.ctx.imageSmoothingEnabled=!1,r.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const B=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...B);const U=e.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],B);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(r,o,A,B,U){if(Q(this,it,Ye).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const $=o[2]-o[0],K=o[3]-o[1];if(U&&this.annotationCanvasMap){A=A.slice(),A[4]-=o[0],A[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=$,o[3]=K;const[rt,ut]=e.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:ft}=this,yt=Math.ceil($*this.outputScaleX*ft),bt=Math.ceil(K*this.outputScaleY*ft);this.annotationCanvas=this.canvasFactory.create(yt,bt);const{canvas:vt,context:Z}=this.annotationCanvas;this.annotationCanvasMap.set(r,vt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Z,this.ctx.save(),this.ctx.setTransform(rt,0,0,-ut,0,K*ut),f(this.ctx)}else f(this.ctx),this.ctx.rect(o[0],o[1],$,K),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...A),this.transform(...B)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Q(this,it,Ke).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(r){if(!this.contentVisible)return;const o=r.count;r=this.getObject(r.data,r),r.count=o;const A=this.ctx,B=this.processingType3;if(B&&(B.compiled===void 0&&(B.compiled=h(r)),B.compiled)){B.compiled(A);return}const U=this._createMaskCanvas(r),$=U.canvas;A.save(),A.setTransform(1,0,0,1,0,0),A.drawImage($,U.offsetX,U.offsetY),A.restore(),this.compose()}paintImageMaskXObjectRepeat(r,o,A=0,B=0,U,$){if(!this.contentVisible)return;r=this.getObject(r.data,r);const K=this.ctx;K.save();const rt=(0,a.getCurrentTransform)(K);K.transform(o,A,B,U,0,0);const ut=this._createMaskCanvas(r);K.setTransform(1,0,0,1,ut.offsetX-rt[4],ut.offsetY-rt[5]);for(let ft=0,yt=$.length;ft<yt;ft+=2){const bt=e.Util.transform(rt,[o,A,B,U,$[ft],$[ft+1]]),[vt,Z]=e.Util.applyTransform([0,0],bt);K.drawImage(ut.canvas,vt,Z)}K.restore(),this.compose()}paintImageMaskXObjectGroup(r){if(!this.contentVisible)return;const o=this.ctx,A=this.current.fillColor,B=this.current.patternFill;for(const U of r){const{data:$,width:K,height:rt,transform:ut}=U,ft=this.cachedCanvases.getCanvas("maskCanvas",K,rt),yt=ft.context;yt.save();const bt=this.getObject($,U);x(yt,bt),yt.globalCompositeOperation="source-in",yt.fillStyle=B?A.getPattern(yt,this,(0,a.getCurrentTransformInverse)(o),L.PathType.FILL):A,yt.fillRect(0,0,K,rt),yt.restore(),o.save(),o.transform(...ut),o.scale(1,-1),b(o,ft.canvas,0,0,K,rt,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(r){if(!this.contentVisible)return;const o=this.getObject(r);if(!o){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(r,o,A,B){if(!this.contentVisible)return;const U=this.getObject(r);if(!U){(0,e.warn)("Dependent image isn't ready yet");return}const $=U.width,K=U.height,rt=[];for(let ut=0,ft=B.length;ut<ft;ut+=2)rt.push({transform:[o,0,0,A,B[ut],B[ut+1]],x:0,y:0,w:$,h:K});this.paintInlineImageXObjectGroup(U,rt)}applyTransferMapsToCanvas(r){return this.current.transferMaps!=="none"&&(r.filter=this.current.transferMaps,r.drawImage(r.canvas,0,0),r.filter="none"),r.canvas}applyTransferMapsToBitmap(r){if(this.current.transferMaps==="none")return r.bitmap;const{bitmap:o,width:A,height:B}=r,U=this.cachedCanvases.getCanvas("inlineImage",A,B),$=U.context;return $.filter=this.current.transferMaps,$.drawImage(o,0,0),$.filter="none",U.canvas}paintInlineImageXObject(r){if(!this.contentVisible)return;const o=r.width,A=r.height,B=this.ctx;if(this.save(),!e.isNodeJS){const{filter:K}=B;K!=="none"&&K!==""&&(B.filter="none")}B.scale(1/o,-1/A);let U;if(r.bitmap)U=this.applyTransferMapsToBitmap(r);else if(typeof HTMLElement=="function"&&r instanceof HTMLElement||!r.data)U=r;else{const rt=this.cachedCanvases.getCanvas("inlineImage",o,A).context;M(rt,r),U=this.applyTransferMapsToCanvas(rt)}const $=this._scaleImage(U,(0,a.getCurrentTransformInverse)(B));B.imageSmoothingEnabled=T((0,a.getCurrentTransform)(B),r.interpolate),b(B,$.img,0,0,$.paintWidth,$.paintHeight,0,-A,o,A),this.compose(),this.restore()}paintInlineImageXObjectGroup(r,o){if(!this.contentVisible)return;const A=this.ctx;let B;if(r.bitmap)B=r.bitmap;else{const U=r.width,$=r.height,rt=this.cachedCanvases.getCanvas("inlineImage",U,$).context;M(rt,r),B=this.applyTransferMapsToCanvas(rt)}for(const U of o)A.save(),A.transform(...U.transform),A.scale(1,-1),b(A,B,U.x,U.y,U.w,U.h,0,-1,1,1),A.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(r){}markPointProps(r,o){}beginMarkedContent(r){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(r,o){r==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(r){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const A=this.ctx;this.pendingClip&&(o||(this.pendingClip===Y?A.clip("evenodd"):A.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),A.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const r=(0,a.getCurrentTransform)(this.ctx);if(r[1]===0&&r[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(r[0]),Math.abs(r[3]));else{const o=Math.abs(r[0]*r[3]-r[2]*r[1]),A=Math.hypot(r[0],r[2]),B=Math.hypot(r[1],r[3]);this._cachedGetSinglePixelWidth=Math.max(A,B)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:r}=this.current,{a:o,b:A,c:B,d:U}=this.ctx.getTransform();let $,K;if(A===0&&B===0){const rt=Math.abs(o),ut=Math.abs(U);if(rt===ut)if(r===0)$=K=1/rt;else{const ft=rt*r;$=K=ft<1?1/ft:1}else if(r===0)$=1/rt,K=1/ut;else{const ft=rt*r,yt=ut*r;$=ft<1?1/ft:1,K=yt<1?1/yt:1}}else{const rt=Math.abs(o*U-A*B),ut=Math.hypot(o,A),ft=Math.hypot(B,U);if(r===0)$=ft/rt,K=ut/rt;else{const yt=r*rt;$=ft>yt?ft/yt:1,K=ut>yt?ut/yt:1}}this._cachedScaleForStroking[0]=$,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(r){const{ctx:o}=this,{lineWidth:A}=this.current,[B,U]=this.getScaleForStroking();if(o.lineWidth=A||1,B===1&&U===1){o.stroke();return}const $=o.getLineDash();if(r&&o.save(),o.scale(B,U),$.length>0){const K=Math.max(B,U);o.setLineDash($.map(rt=>rt/K)),o.lineDashOffset/=K}o.stroke(),r&&o.restore()}isContentVisible(){for(let r=this.markedContentStack.length-1;r>=0;r--)if(!this.markedContentStack[r].visible)return!1;return!0}};it=new WeakSet,Ye=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ke=function(){if(this.pageColors){const r=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(r!=="none"){const o=this.ctx.filter;this.ctx.filter=r,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let z=st;t.CanvasGraphics=z;for(const R in e.OPS)z.prototype[R]!==void 0&&(z.prototype[e.OPS[R]]=z.prototype[R])},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=y;var e=u(1),a=u(6);const L={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=L;function F(h,v){if(!v)return;const M=v[2]-v[0],x=v[3]-v[1],i=new Path2D;i.rect(v[0],v[1],M,x),h.clip(i)}class q{constructor(){this.constructor===q&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class S extends q{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let M;this._type==="axial"?M=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)M.addColorStop(x[0],x[1]);return M}getPattern(v,M,x,i){let f;if(i===L.STROKE||i===L.FILL){const c=M.current.getClippedPathBoundingBox(i,(0,a.getCurrentTransform)(v))||[0,0,0,0],d=Math.ceil(c[2]-c[0])||1,g=Math.ceil(c[3]-c[1])||1,N=M.cachedCanvases.getCanvas("pattern",d,g,!0),l=N.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-c[0],-c[1]),x=e.Util.transform(x,[1,0,0,1,c[0],c[1]]),l.transform(...M.baseTransform),this.matrix&&l.transform(...this.matrix),F(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),f=v.createPattern(N.canvas,"no-repeat");const T=new DOMMatrix(x);f.setTransform(T)}else F(v,this._bbox),f=this._createGradient(v);return f}}function E(h,v,M,x,i,f,c,d){const g=v.coords,N=v.colors,l=h.data,T=h.width*4;let O;g[M+1]>g[x+1]&&(O=M,M=x,x=O,O=f,f=c,c=O),g[x+1]>g[i+1]&&(O=x,x=i,i=O,O=c,c=d,d=O),g[M+1]>g[x+1]&&(O=M,M=x,x=O,O=f,f=c,c=O);const nt=(g[M]+v.offsetX)*v.scaleX,G=(g[M+1]+v.offsetY)*v.scaleY,Y=(g[x]+v.offsetX)*v.scaleX,z=(g[x+1]+v.offsetY)*v.scaleY,it=(g[i]+v.offsetX)*v.scaleX,I=(g[i+1]+v.offsetY)*v.scaleY;if(G>=I)return;const V=N[f],st=N[f+1],R=N[f+2],r=N[c],o=N[c+1],A=N[c+2],B=N[d],U=N[d+1],$=N[d+2],K=Math.round(G),rt=Math.round(I);let ut,ft,yt,bt,vt,Z,tt,P;for(let W=K;W<=rt;W++){if(W<z){const Et=W<G?0:(G-W)/(G-z);ut=nt-(nt-Y)*Et,ft=V-(V-r)*Et,yt=st-(st-o)*Et,bt=R-(R-A)*Et}else{let Et;W>I?Et=1:z===I?Et=0:Et=(z-W)/(z-I),ut=Y-(Y-it)*Et,ft=r-(r-B)*Et,yt=o-(o-U)*Et,bt=A-(A-$)*Et}let J;W<G?J=0:W>I?J=1:J=(G-W)/(G-I),vt=nt-(nt-it)*J,Z=V-(V-B)*J,tt=st-(st-U)*J,P=R-(R-$)*J;const at=Math.round(Math.min(ut,vt)),gt=Math.round(Math.max(ut,vt));let xt=T*W+at*4;for(let Et=at;Et<=gt;Et++)J=(ut-Et)/(ut-vt),J<0?J=0:J>1&&(J=1),l[xt++]=ft-(ft-Z)*J|0,l[xt++]=yt-(yt-tt)*J|0,l[xt++]=bt-(bt-P)*J|0,l[xt++]=255}}function p(h,v,M){const x=v.coords,i=v.colors;let f,c;switch(v.type){case"lattice":const d=v.verticesPerRow,g=Math.floor(x.length/d)-1,N=d-1;for(f=0;f<g;f++){let l=f*d;for(let T=0;T<N;T++,l++)E(h,M,x[l],x[l+1],x[l+d],i[l],i[l+1],i[l+d]),E(h,M,x[l+d+1],x[l+1],x[l+d],i[l+d+1],i[l+1],i[l+d])}break;case"triangles":for(f=0,c=x.length;f<c;f+=3)E(h,M,x[f],x[f+1],x[f+2],i[f],i[f+1],i[f+2]);break;default:throw new Error("illegal figure")}}class w extends q{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,M,x){const d=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-d,l=Math.ceil(this._bounds[3])-g,T=Math.min(Math.ceil(Math.abs(N*v[0]*1.1)),3e3),O=Math.min(Math.ceil(Math.abs(l*v[1]*1.1)),3e3),nt=N/T,G=l/O,Y={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-g,scaleX:1/nt,scaleY:1/G},z=T+2*2,it=O+2*2,I=x.getCanvas("mesh",z,it,!1),V=I.context,st=V.createImageData(T,O);if(M){const r=st.data;for(let o=0,A=r.length;o<A;o+=4)r[o]=M[0],r[o+1]=M[1],r[o+2]=M[2],r[o+3]=255}for(const r of this._figures)p(st,r,Y);return V.putImageData(st,2,2),{canvas:I.canvas,offsetX:d-2*nt,offsetY:g-2*G,scaleX:nt,scaleY:G}}getPattern(v,M,x,i){F(v,this._bbox);let f;if(i===L.SHADING)f=e.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(v));else if(f=e.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const d=e.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*d[0],f[1]*d[1]]}const c=this._createMeshCanvas(f,i===L.SHADING?null:this._background,M.cachedCanvases);return i!==L.SHADING&&(v.setTransform(...M.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(c.offsetX,c.offsetY),v.scale(c.scaleX,c.scaleY),v.createPattern(c.canvas,"no-repeat")}}class D extends q{getPattern(){return"hotpink"}}function y(h){switch(h[0]){case"RadialAxial":return new S(h);case"Mesh":return new w(h);case"Dummy":return new D}throw new Error(`Unknown IR type: ${h[0]}`)}const m={COLORED:1,UNCOLORED:2},b=class b{constructor(v,M,x,i,f){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=M,this.ctx=x,this.canvasGraphicsFactory=i,this.baseTransform=f}createPatternCanvas(v){const M=this.operatorList,x=this.bbox,i=this.xstep,f=this.ystep,c=this.paintType,d=this.tilingType,g=this.color,N=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+d);const l=x[0],T=x[1],O=x[2],nt=x[3],G=e.Util.singularValueDecompose2dScale(this.matrix),Y=e.Util.singularValueDecompose2dScale(this.baseTransform),z=[G[0]*Y[0],G[1]*Y[1]],it=this.getSizeAndScale(i,this.ctx.canvas.width,z[0]),I=this.getSizeAndScale(f,this.ctx.canvas.height,z[1]),V=v.cachedCanvases.getCanvas("pattern",it.size,I.size,!0),st=V.context,R=N.createCanvasGraphics(st);R.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(R,c,g);let r=l,o=T,A=O,B=nt;return l<0&&(r=0,A+=Math.abs(l)),T<0&&(o=0,B+=Math.abs(T)),st.translate(-(it.scale*r),-(I.scale*o)),R.transform(it.scale,0,0,I.scale,0,0),st.save(),this.clipBbox(R,r,o,A,B),R.baseTransform=(0,a.getCurrentTransform)(R.ctx),R.executeOperatorList(M),R.endDrawing(),{canvas:V.canvas,scaleX:it.scale,scaleY:I.scale,offsetX:r,offsetY:o}}getSizeAndScale(v,M,x){v=Math.abs(v);const i=Math.max(b.MAX_PATTERN_SIZE,M);let f=Math.ceil(v*x);return f>=i?f=i:x=f/v,{scale:x,size:f}}clipBbox(v,M,x,i,f){const c=i-M,d=f-x;v.ctx.rect(M,x,c,d),v.current.updateRectMinMax((0,a.getCurrentTransform)(v.ctx),[M,x,i,f]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,M,x){const i=v.ctx,f=v.current;switch(M){case m.COLORED:const c=this.ctx;i.fillStyle=c.fillStyle,i.strokeStyle=c.strokeStyle,f.fillColor=c.fillStyle,f.strokeColor=c.strokeStyle;break;case m.UNCOLORED:const d=e.Util.makeHexColor(x[0],x[1],x[2]);i.fillStyle=d,i.strokeStyle=d,f.fillColor=d,f.strokeColor=d;break;default:throw new e.FormatError(`Unsupported paint type: ${M}`)}}getPattern(v,M,x,i){let f=x;i!==L.SHADING&&(f=e.Util.transform(f,M.baseTransform),this.matrix&&(f=e.Util.transform(f,this.matrix)));const c=this.createPatternCanvas(M);let d=new DOMMatrix(f);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const g=v.createPattern(c.canvas,"repeat");return g.setTransform(d),g}};Qt(b,"MAX_PATTERN_SIZE",3e3);let C=b;t.TilingPattern=C},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=L,t.convertToRGBA=a,t.grayToRGBA=q;var e=u(1);function a(S){switch(S.kind){case e.ImageKind.GRAYSCALE_1BPP:return L(S);case e.ImageKind.RGB_24BPP:return F(S)}return null}function L({src:S,srcPos:E=0,dest:p,width:w,height:D,nonBlackColor:y=4294967295,inverseDecode:m=!1}){const C=e.FeatureTest.isLittleEndian?4278190080:255,[b,h]=m?[y,C]:[C,y],v=w>>3,M=w&7,x=S.length;p=new Uint32Array(p.buffer);let i=0;for(let f=0;f<D;f++){for(const d=E+v;E<d;E++){const g=E<x?S[E]:255;p[i++]=g&128?h:b,p[i++]=g&64?h:b,p[i++]=g&32?h:b,p[i++]=g&16?h:b,p[i++]=g&8?h:b,p[i++]=g&4?h:b,p[i++]=g&2?h:b,p[i++]=g&1?h:b}if(M===0)continue;const c=E<x?S[E++]:255;for(let d=0;d<M;d++)p[i++]=c&1<<7-d?h:b}return{srcPos:E,destPos:i}}function F({src:S,srcPos:E=0,dest:p,destPos:w=0,width:D,height:y}){let m=0;const C=S.length>>2,b=new Uint32Array(S.buffer,E,C);if(e.FeatureTest.isLittleEndian){for(;m<C-2;m+=3,w+=4){const h=b[m],v=b[m+1],M=b[m+2];p[w]=h|4278190080,p[w+1]=h>>>24|v<<8|4278190080,p[w+2]=v>>>16|M<<16|4278190080,p[w+3]=M>>>8|4278190080}for(let h=m*4,v=S.length;h<v;h+=3)p[w++]=S[h]|S[h+1]<<8|S[h+2]<<16|4278190080}else{for(;m<C-2;m+=3,w+=4){const h=b[m],v=b[m+1],M=b[m+2];p[w]=h|255,p[w+1]=h<<24|v>>>8|255,p[w+2]=v<<16|M>>>16|255,p[w+3]=M<<8|255}for(let h=m*4,v=S.length;h<v;h+=3)p[w++]=S[h]<<24|S[h+1]<<16|S[h+2]<<8|255}return{srcPos:E,destPos:w}}function q(S,E){if(e.FeatureTest.isLittleEndian)for(let p=0,w=S.length;p<w;p++)E[p]=S[p]*65793|4278190080;else for(let p=0,w=S.length;p<w;p++)E[p]=S[p]*16843008|255}},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const u=Object.create(null);t.GlobalWorkerOptions=u,u.workerPort=null,u.workerSrc=""},(n,t,u)=>{var S,Tn,wn,Ce;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=u(1);const a={DATA:1,ERROR:2},L={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function F(D){switch(D instanceof Error||typeof D=="object"&&D!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),D.name){case"AbortException":return new e.AbortException(D.message);case"MissingPDFException":return new e.MissingPDFException(D.message);case"PasswordException":return new e.PasswordException(D.message,D.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(D.message,D.status);case"UnknownErrorException":return new e.UnknownErrorException(D.message,D.details);default:return new e.UnknownErrorException(D.message,D.toString())}}class q{constructor(y,m,C){ot(this,S);this.sourceName=y,this.targetName=m,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const h=b.data;if(h.targetName!==this.sourceName)return;if(h.stream){Q(this,S,wn).call(this,h);return}if(h.callback){const M=h.callbackId,x=this.callbackCapabilities[M];if(!x)throw new Error(`Cannot resolve callback ${M}`);if(delete this.callbackCapabilities[M],h.callback===a.DATA)x.resolve(h.data);else if(h.callback===a.ERROR)x.reject(F(h.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[h.action];if(!v)throw new Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){const M=this.sourceName,x=h.sourceName;new Promise(function(i){i(v(h.data))}).then(function(i){C.postMessage({sourceName:M,targetName:x,callback:a.DATA,callbackId:h.callbackId,data:i})},function(i){C.postMessage({sourceName:M,targetName:x,callback:a.ERROR,callbackId:h.callbackId,reason:F(i)})});return}if(h.streamId){Q(this,S,Tn).call(this,h);return}v(h.data)},C.addEventListener("message",this._onComObjOnMessage)}on(y,m){const C=this.actionHandler;if(C[y])throw new Error(`There is already an actionName called "${y}"`);C[y]=m}send(y,m,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:m},C)}sendWithPromise(y,m,C){const b=this.callbackId++,h=new e.PromiseCapability;this.callbackCapabilities[b]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:b,data:m},C)}catch(v){h.reject(v)}return h.promise}sendWithStream(y,m,C,b){const h=this.streamId++,v=this.sourceName,M=this.targetName,x=this.comObj;return new ReadableStream({start:i=>{const f=new e.PromiseCapability;return this.streamControllers[h]={controller:i,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:v,targetName:M,action:y,streamId:h,data:m,desiredSize:i.desiredSize},b),f.promise},pull:i=>{const f=new e.PromiseCapability;return this.streamControllers[h].pullCall=f,x.postMessage({sourceName:v,targetName:M,stream:L.PULL,streamId:h,desiredSize:i.desiredSize}),f.promise},cancel:i=>{(0,e.assert)(i instanceof Error,"cancel must have a valid reason");const f=new e.PromiseCapability;return this.streamControllers[h].cancelCall=f,this.streamControllers[h].isClosed=!0,x.postMessage({sourceName:v,targetName:M,stream:L.CANCEL,streamId:h,reason:F(i)}),f.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}S=new WeakSet,Tn=function(y){const m=y.streamId,C=this.sourceName,b=y.sourceName,h=this.comObj,v=this,M=this.actionHandler[y.action],x={enqueue(i,f=1,c){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=f,d>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),h.postMessage({sourceName:C,targetName:b,stream:L.ENQUEUE,streamId:m,chunk:i},c)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:C,targetName:b,stream:L.CLOSE,streamId:m}),delete v.streamSinks[m])},error(i){(0,e.assert)(i instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,h.postMessage({sourceName:C,targetName:b,stream:L.ERROR,streamId:m,reason:F(i)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[m]=x,new Promise(function(i){i(M(y.data,x))}).then(function(){h.postMessage({sourceName:C,targetName:b,stream:L.START_COMPLETE,streamId:m,success:!0})},function(i){h.postMessage({sourceName:C,targetName:b,stream:L.START_COMPLETE,streamId:m,reason:F(i)})})},wn=function(y){const m=y.streamId,C=this.sourceName,b=y.sourceName,h=this.comObj,v=this.streamControllers[m],M=this.streamSinks[m];switch(y.stream){case L.START_COMPLETE:y.success?v.startCall.resolve():v.startCall.reject(F(y.reason));break;case L.PULL_COMPLETE:y.success?v.pullCall.resolve():v.pullCall.reject(F(y.reason));break;case L.PULL:if(!M){h.postMessage({sourceName:C,targetName:b,stream:L.PULL_COMPLETE,streamId:m,success:!0});break}M.desiredSize<=0&&y.desiredSize>0&&M.sinkCapability.resolve(),M.desiredSize=y.desiredSize,new Promise(function(x){var i;x((i=M.onPull)==null?void 0:i.call(M))}).then(function(){h.postMessage({sourceName:C,targetName:b,stream:L.PULL_COMPLETE,streamId:m,success:!0})},function(x){h.postMessage({sourceName:C,targetName:b,stream:L.PULL_COMPLETE,streamId:m,reason:F(x)})});break;case L.ENQUEUE:if((0,e.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(y.chunk);break;case L.CLOSE:if((0,e.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),Q(this,S,Ce).call(this,v,m);break;case L.ERROR:(0,e.assert)(v,"error should have stream controller"),v.controller.error(F(y.reason)),Q(this,S,Ce).call(this,v,m);break;case L.CANCEL_COMPLETE:y.success?v.cancelCall.resolve():v.cancelCall.reject(F(y.reason)),Q(this,S,Ce).call(this,v,m);break;case L.CANCEL:if(!M)break;new Promise(function(x){var i;x((i=M.onCancel)==null?void 0:i.call(M,F(y.reason)))}).then(function(){h.postMessage({sourceName:C,targetName:b,stream:L.CANCEL_COMPLETE,streamId:m,success:!0})},function(x){h.postMessage({sourceName:C,targetName:b,stream:L.CANCEL_COMPLETE,streamId:m,reason:F(x)})}),M.sinkCapability.reject(F(y.reason)),M.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},Ce=async function(y,m){var C,b,h;await Promise.allSettled([(C=y.startCall)==null?void 0:C.promise,(b=y.pullCall)==null?void 0:b.promise,(h=y.cancelCall)==null?void 0:h.promise]),delete this.streamControllers[m]},t.MessageHandler=q},(n,t,u)=>{var L,F;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=u(1);class a{constructor({parsedData:S,rawData:E}){ot(this,L);ot(this,F);ct(this,L,S),ct(this,F,E)}getRaw(){return s(this,F)}get(S){return s(this,L).get(S)??null}getAll(){return(0,e.objectFromMap)(s(this,L))}has(S){return s(this,L).has(S)}}L=new WeakMap,F=new WeakMap,t.Metadata=a},(n,t,u)=>{var S,E,p,w,D,y,Je;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=u(1),a=u(8);const L=Symbol("INTERNAL");class F{constructor(b,h){ot(this,S,!0);this.name=b,this.intent=h}get visible(){return s(this,S)}_setVisible(b,h){b!==L&&(0,e.unreachable)("Internal method `_setVisible` called."),ct(this,S,h)}}S=new WeakMap;class q{constructor(b){ot(this,y);ot(this,E,null);ot(this,p,new Map);ot(this,w,null);ot(this,D,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,ct(this,D,b.order);for(const h of b.groups)s(this,p).set(h.id,new F(h.name,h.intent));if(b.baseState==="OFF")for(const h of s(this,p).values())h._setVisible(L,!1);for(const h of b.on)s(this,p).get(h)._setVisible(L,!0);for(const h of b.off)s(this,p).get(h)._setVisible(L,!1);ct(this,w,this.getHash())}}isVisible(b){if(s(this,p).size===0)return!0;if(!b)return(0,e.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return s(this,p).has(b.id)?s(this,p).get(b.id).visible:((0,e.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return Q(this,y,Je).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const h of b.ids){if(!s(this,p).has(h))return(0,e.warn)(`Optional content group not found: ${h}`),!0;if(s(this,p).get(h).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const h of b.ids){if(!s(this,p).has(h))return(0,e.warn)(`Optional content group not found: ${h}`),!0;if(!s(this,p).get(h).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const h of b.ids){if(!s(this,p).has(h))return(0,e.warn)(`Optional content group not found: ${h}`),!0;if(!s(this,p).get(h).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const h of b.ids){if(!s(this,p).has(h))return(0,e.warn)(`Optional content group not found: ${h}`),!0;if(s(this,p).get(h).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,e.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,h=!0){if(!s(this,p).has(b)){(0,e.warn)(`Optional content group not found: ${b}`);return}s(this,p).get(b)._setVisible(L,!!h),ct(this,E,null)}get hasInitialVisibility(){return s(this,w)===null||this.getHash()===s(this,w)}getOrder(){return s(this,p).size?s(this,D)?s(this,D).slice():[...s(this,p).keys()]:null}getGroups(){return s(this,p).size>0?(0,e.objectFromMap)(s(this,p)):null}getGroup(b){return s(this,p).get(b)||null}getHash(){if(s(this,E)!==null)return s(this,E);const b=new a.MurmurHash3_64;for(const[h,v]of s(this,p))b.update(`${h}:${v.visible}`);return ct(this,E,b.hexdigest())}}E=new WeakMap,p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakSet,Je=function(b){const h=b.length;if(h<2)return!0;const v=b[0];for(let M=1;M<h;M++){const x=b[M];let i;if(Array.isArray(x))i=Q(this,y,Je).call(this,x);else if(s(this,p).has(x))i=s(this,p).get(x).visible;else return(0,e.warn)(`Optional content group not found: ${x}`),!0;switch(v){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return v==="And"},t.OptionalContentConfig=q},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=u(1),a=u(6);class L{constructor({length:E,initialData:p,progressiveDone:w=!1,contentDispositionFilename:D=null,disableRange:y=!1,disableStream:m=!1},C){if((0,e.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=D,(p==null?void 0:p.length)>0){const b=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!m,this._isRangeSupported=!y,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,h)=>{this._onReceiveData({begin:b,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((b,h)=>{this._onProgress({loaded:b,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:p}){const w=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const D=this._rangeReaders.some(function(y){return y._begin!==E?!1:(y._enqueue(w),!0)});(0,e.assert)(D,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}_onProgress(E){var p,w,D,y;E.total===void 0?(w=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||w.call(p,{loaded:E.loaded}):(y=(D=this._fullRequestReader)==null?void 0:D.onProgress)==null||y.call(D,{loaded:E.loaded,total:E.total})}_onProgressiveDone(){var E;(E=this._fullRequestReader)==null||E.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const p=this._rangeReaders.indexOf(E);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new F(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,p){if(p<=this._progressiveDataLength)return null;const w=new q(this,E,p);return this._pdfDataRangeTransport.requestDataRange(E,p),this._rangeReaders.push(w),w}cancelAllRequests(E){var p;(p=this._fullRequestReader)==null||p.cancel(E);for(const w of this._rangeReaders.slice(0))w.cancel(E);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=L;class F{constructor(E,p,w=!1,D=null){this._stream=E,this._done=w||!1,this._filename=(0,a.isPdfFile)(D)?D:null,this._queuedChunks=p||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new e.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class q{constructor(E,p,w){this._stream=E,this._begin=p,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new e.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=u(1),a=u(20);function L(w,D,y){return{method:"GET",headers:w,signal:y.signal,mode:"cors",credentials:D?"include":"same-origin",redirect:"follow"}}function F(w){const D=new Headers;for(const y in w){const m=w[y];m!==void 0&&D.append(y,m)}return D}function q(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,e.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class S{constructor(D){this.source=D,this.isHttp=/^https?:/i.test(D.url),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var D;return((D=this._fullRequestReader)==null?void 0:D._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(D,y){if(y<=this._progressiveDataLength)return null;const m=new p(this,D,y);return this._rangeRequestReaders.push(m),m}cancelAllRequests(D){var y;(y=this._fullRequestReader)==null||y.cancel(D);for(const m of this._rangeRequestReaders.slice(0))m.cancel(D)}}t.PDFFetchStream=S;class E{constructor(D){this._stream=D,this._reader=null,this._loaded=0,this._filename=null;const y=D.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new e.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=F(this._stream.httpHeaders);const m=y.url;fetch(m,L(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,a.validateResponseStatus)(C.status))throw(0,a.createResponseStatusError)(C.status,m);this._reader=C.body.getReader(),this._headersCapability.resolve();const b=M=>C.headers.get(M),{allowRangeRequests:h,suggestedLength:v}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=v||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:D,done:y}=await this._reader.read();return y?{value:D,done:y}:(this._loaded+=D.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:q(D),done:!1})}cancel(D){var y;(y=this._reader)==null||y.cancel(D),this._abortController.abort()}}class p{constructor(D,y,m){this._stream=D,this._reader=null,this._loaded=0;const C=D.source;this._withCredentials=C.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=F(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${m-1}`);const b=C.url;fetch(b,L(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,a.validateResponseStatus)(h.status))throw(0,a.createResponseStatusError)(h.status,b);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:D,done:y}=await this._reader.read();return y?{value:D,done:y}:(this._loaded+=D.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:q(D),done:!1})}cancel(D){var y;(y=this._reader)==null||y.cancel(D),this._abortController.abort()}}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=S,t.extractFilenameFromHeader=q,t.validateRangeRequestCapabilities=F,t.validateResponseStatus=E;var e=u(1),a=u(21),L=u(6);function F({getResponseHeader:p,isHttp:w,rangeChunkSize:D,disableRange:y}){const m={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(p("Content-Length"),10);return!Number.isInteger(C)||(m.suggestedLength=C,C<=2*D)||y||!w||p("Accept-Ranges")!=="bytes"||(p("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function q(p){const w=p("Content-Disposition");if(w){let D=(0,a.getFilenameFromContentDispositionHeader)(w);if(D.includes("%"))try{D=decodeURIComponent(D)}catch{}if((0,L.isPdfFile)(D))return D}return null}function S(p,w){return p===404||p===0&&w.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+w+'".'):new e.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${w}".`,p)}function E(p){return p===200||p===206}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=a;var e=u(1);function a(L){let F=!0,q=S("filename\\*","i").exec(L);if(q){q=q[1];let C=D(q);return C=unescape(C),C=y(C),C=m(C),p(C)}if(q=w(L),q){const C=m(q);return p(C)}if(q=S("filename","i").exec(L),q){q=q[1];let C=D(q);return C=m(C),p(C)}function S(C,b){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function E(C,b){if(C){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const h=new TextDecoder(C,{fatal:!0}),v=(0,e.stringToBytes)(b);b=h.decode(v),F=!1}catch{}}return b}function p(C){return F&&/[\x80-\xff]/.test(C)&&(C=E("utf-8",C),F&&(C=E("iso-8859-1",C))),C}function w(C){const b=[];let h;const v=S("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=v.exec(C))!==null;){let[,x,i,f]=h;if(x=parseInt(x,10),x in b){if(x===0)break;continue}b[x]=[i,f]}const M=[];for(let x=0;x<b.length&&x in b;++x){let[i,f]=b[x];f=D(f),i&&(f=unescape(f),x===0&&(f=y(f))),M.push(f)}return M.join("")}function D(C){if(C.startsWith('"')){const b=C.slice(1).split('\\"');for(let h=0;h<b.length;++h){const v=b[h].indexOf('"');v!==-1&&(b[h]=b[h].slice(0,v),b.length=h+1),b[h]=b[h].replaceAll(/\\(.)/g,"$1")}C=b.join('"')}return C}function y(C){const b=C.indexOf("'");if(b===-1)return C;const h=C.slice(0,b),M=C.slice(b+1).replace(/^[^']*'/,"");return E(h,M)}function m(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,h,v,M){if(v==="q"||v==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,i){return String.fromCharCode(parseInt(i,16))}),E(h,M);try{M=atob(M)}catch{}return E(h,M)})}return""}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=u(1),a=u(20);const L=200,F=206;function q(D){const y=D.response;return typeof y!="string"?y:(0,e.stringToBytes)(y).buffer}class S{constructor(y,m={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,m,C){const b={begin:y,end:m};for(const h in C)b[h]=C[h];return this.request(b)}requestFull(y){return this.request(y)}request(y){const m=new XMLHttpRequest,C=this.currXhrId++,b=this.pendingRequests[C]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const h in this.httpHeaders){const v=this.httpHeaders[h];v!==void 0&&m.setRequestHeader(h,v)}return this.isHttp&&"begin"in y&&"end"in y?(m.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),b.expectedStatus=F):b.expectedStatus=L,m.responseType="arraybuffer",y.onError&&(m.onerror=function(h){y.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,C),m.onprogress=this.onProgress.bind(this,C),b.onHeadersReceived=y.onHeadersReceived,b.onDone=y.onDone,b.onError=y.onError,b.onProgress=y.onProgress,m.send(null),C}onProgress(y,m){var b;const C=this.pendingRequests[y];C&&((b=C.onProgress)==null||b.call(C,m))}onStateChange(y,m){var x,i,f;const C=this.pendingRequests[y];if(!C)return;const b=C.xhr;if(b.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),b.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],b.status===0&&this.isHttp){(x=C.onError)==null||x.call(C,b.status);return}const h=b.status||L;if(!(h===L&&C.expectedStatus===F)&&h!==C.expectedStatus){(i=C.onError)==null||i.call(C,b.status);return}const M=q(b);if(h===F){const c=b.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);C.onDone({begin:parseInt(d[1],10),chunk:M})}else M?C.onDone({begin:0,chunk:M}):(f=C.onError)==null||f.call(C,b.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const m=this.pendingRequests[y].xhr;delete this.pendingRequests[y],m.abort()}}class E{constructor(y){this._source=y,this._manager=new S(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const m=this._rangeRequestReaders.indexOf(y);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(y,m){const C=new w(this._manager,y,m);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(y){var m;(m=this._fullRequestReader)==null||m.cancel(y);for(const C of this._rangeRequestReaders.slice(0))C.cancel(y)}}t.PDFNetworkStream=E;class p{constructor(y,m){this._manager=y;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=y.requestFull(C),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,m=this._manager.getRequestXhr(y),C=v=>m.getResponseHeader(v),{allowRangeRequests:b,suggestedLength:h}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,a.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var m;(m=this.onProgress)==null||m.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new e.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(y,m,C){this._manager=y;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(m,C,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const m=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,a.createResponseStatusError)(y,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new e.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=u(1),a=u(20);const L=/^file:\/\/\/[a-zA-Z]:\//;function F(C){const b=require$$5,h=b.parse(C);return h.protocol==="file:"||h.host?h:/^[a-z]:[/\\]/i.test(C)?b.parse(`file:///${C}`):(h.host||(h.protocol="file:"),h)}class q{constructor(b){this.source=b,this.url=F(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new w(this),this._fullRequestReader}getRangeReader(b,h){if(h<=this._progressiveDataLength)return null;const v=this.isFsUrl?new m(this,b,h):new D(this,b,h);return this._rangeRequestReaders.push(v),v}cancelAllRequests(b){var h;(h=this._fullRequestReader)==null||h.cancel(b);for(const v of this._rangeRequestReaders.slice(0))v.cancel(b)}}t.PDFNodeStream=q;class S{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const h=b.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=b.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",h=>{this._error(h)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const h=b.source;this._isStreamingSupported=!h.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=b.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",h=>{this._error(h)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(C,b){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:b}}class w extends S{constructor(b){super(b);const h=v=>{if(v.statusCode===404){const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(v);const M=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:x,suggestedLength:i}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=i||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){const v=require$$5;this._request=v.request(p(this._url,b.httpHeaders),h)}else{const v=require$$5;this._request=v.request(p(this._url,b.httpHeaders),h)}this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class D extends E{constructor(b,h,v){super(b),this._httpHeaders={};for(const x in b.httpHeaders){const i=b.httpHeaders[x];i!==void 0&&(this._httpHeaders[x]=i)}this._httpHeaders.Range=`bytes=${h}-${v-1}`;const M=x=>{if(x.statusCode===404){const i=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(p(this._url,this._httpHeaders),M)}else{const x=require$$5;this._request=x.request(p(this._url,this._httpHeaders),M)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class y extends S{constructor(b){super(b);let h=decodeURIComponent(this._url.path);L.test(this._url.href)&&(h=h.replace(/^\//,""));const v=require$$5;v.lstat(h,(M,x)=>{if(M){M.code==="ENOENT"&&(M=new e.MissingPDFException(`Missing PDF "${h}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=x.size,this._setReadableStream(v.createReadStream(h)),this._headersCapability.resolve()})}}class m extends E{constructor(b,h,v){super(b);let M=decodeURIComponent(this._url.path);L.test(this._url.href)&&(M=M.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(M,{start:h,end:v-1}))}}},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=u(6),a=u(1);const L={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},F="http://www.w3.org/XML/1998/namespace",q="http://www.w3.org/1999/xlink",S=["butt","round","square"],E=["miter","round","bevel"],p=function(x,i="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([x],{type:i}));const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let d=`data:${i};base64,`;for(let g=0,N=x.length;g<N;g+=3){const l=x[g]&255,T=x[g+1]&255,O=x[g+2]&255,nt=l>>2,G=(l&3)<<4|T>>4,Y=g+1<N?(T&15)<<2|O>>6:64,z=g+2<N?O&63:64;d+=c[nt]+c[G]+c[Y]+c[z]}return d},w=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,f=new Int32Array(256);for(let O=0;O<256;O++){let nt=O;for(let G=0;G<8;G++)nt=nt&1?3988292384^nt>>1&2147483647:nt>>1&2147483647;f[O]=nt}function c(O,nt,G){let Y=-1;for(let z=nt;z<G;z++){const it=(Y^O[z])&255,I=f[it];Y=Y>>>8^I}return Y^-1}function d(O,nt,G,Y){let z=Y;const it=nt.length;G[z]=it>>24&255,G[z+1]=it>>16&255,G[z+2]=it>>8&255,G[z+3]=it&255,z+=4,G[z]=O.charCodeAt(0)&255,G[z+1]=O.charCodeAt(1)&255,G[z+2]=O.charCodeAt(2)&255,G[z+3]=O.charCodeAt(3)&255,z+=4,G.set(nt,z),z+=nt.length;const I=c(G,Y+4,z);G[z]=I>>24&255,G[z+1]=I>>16&255,G[z+2]=I>>8&255,G[z+3]=I&255}function g(O,nt,G){let Y=1,z=0;for(let it=nt;it<G;++it)Y=(Y+(O[it]&255))%65521,z=(z+Y)%65521;return z<<16|Y}function N(O){if(!a.isNodeJS)return l(O);try{const nt=parseInt(process.versions.node)>=8?O:Buffer.from(O),G=require$$5.deflateSync(nt,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(nt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+nt)}return l(O)}function l(O){let nt=O.length;const G=65535,Y=Math.ceil(nt/G),z=new Uint8Array(2+nt+Y*5+4);let it=0;z[it++]=120,z[it++]=156;let I=0;for(;nt>G;)z[it++]=0,z[it++]=255,z[it++]=255,z[it++]=0,z[it++]=0,z.set(O.subarray(I,I+G),it),it+=G,I+=G,nt-=G;z[it++]=1,z[it++]=nt&255,z[it++]=nt>>8&255,z[it++]=~nt&65535&255,z[it++]=(~nt&65535)>>8&255,z.set(O.subarray(I),it),it+=O.length-I;const V=g(O,0,O.length);return z[it++]=V>>24&255,z[it++]=V>>16&255,z[it++]=V>>8&255,z[it++]=V&255,z}function T(O,nt,G,Y){const z=O.width,it=O.height;let I,V,st;const R=O.data;switch(nt){case a.ImageKind.GRAYSCALE_1BPP:V=0,I=1,st=z+7>>3;break;case a.ImageKind.RGB_24BPP:V=2,I=8,st=z*3;break;case a.ImageKind.RGBA_32BPP:V=6,I=8,st=z*4;break;default:throw new Error("invalid format")}const r=new Uint8Array((1+st)*it);let o=0,A=0;for(let ut=0;ut<it;++ut)r[o++]=0,r.set(R.subarray(A,A+st),o),A+=st,o+=st;if(nt===a.ImageKind.GRAYSCALE_1BPP&&Y){o=0;for(let ut=0;ut<it;ut++){o++;for(let ft=0;ft<st;ft++)r[o++]^=255}}const B=new Uint8Array([z>>24&255,z>>16&255,z>>8&255,z&255,it>>24&255,it>>16&255,it>>8&255,it&255,I,V,0,0,0]),U=N(r),$=x.length+i*3+B.length+U.length,K=new Uint8Array($);let rt=0;return K.set(x,rt),rt+=x.length,d("IHDR",B,K,rt),rt+=i+B.length,d("IDATA",U,K,rt),rt+=i+U.length,d("IEND",new Uint8Array(0),K,rt),p(K,"image/png",G)}return function(nt,G,Y){const z=nt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:nt.kind;return T(nt,z,G,Y)}}();class D{constructor(){this.fontSizeScale=1,this.fontWeight=L.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=L.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,f){this.x=i,this.y=f}}function y(x){let i=[];const f=[];for(const c of x){if(c.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),f.push(i),i=i.at(-1).items;continue}c.fn==="restore"?i=f.pop():i.push(c)}return i}function m(x){if(Number.isInteger(x))return x.toString();const i=x.toFixed(10);let f=i.length-1;if(i[f]!=="0")return i;do f--;while(i[f]==="0");return i.substring(0,i[f]==="."?f:f+1)}function C(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${m(x[0])} ${m(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const i=Math.acos(x[0])*180/Math.PI;return`rotate(${m(i)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${m(x[4])} ${m(x[5])})`;return`matrix(${m(x[0])} ${m(x[1])} ${m(x[2])} ${m(x[3])} ${m(x[4])} ${m(x[5])})`}let b=0,h=0,v=0;class M{constructor(i,f,c=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new D,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!c,this._operatorIdMapping=[];for(const d in a.OPS)this._operatorIdMapping[a.OPS[d]]=d}getObject(i,f=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):f}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const f=i.fnArray,c=i.argsArray;for(let d=0,g=f.length;d<g;d++)if(f[d]===a.OPS.dependency)for(const N of c[d]){const l=N.startsWith("g_")?this.commonObjs:this.objs,T=new Promise(O=>{l.get(N,O)});this.current.dependencies.push(T)}return Promise.all(this.current.dependencies)}transform(i,f,c,d,g,N){const l=[i,f,c,d,g,N];this.transformMatrix=a.Util.transform(this.transformMatrix,l),this.tgrp=null}getSVG(i,f){this.viewport=f;const c=this._initialize(f);return this.loadDependencies(i).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),c))}convertOpList(i){const f=this._operatorIdMapping,c=i.argsArray,d=i.fnArray,g=[];for(let N=0,l=d.length;N<l;N++){const T=d[N];g.push({fnId:T,fn:f[T],args:c[N]})}return y(g)}executeOpTree(i){for(const f of i){const c=f.fn,d=f.fnId,g=f.args;switch(d|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(g);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(g[0],g[1]);break;case a.OPS.setFont:this.setFont(g);break;case a.OPS.showText:this.showText(g[0]);break;case a.OPS.showSpacedText:this.showText(g[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(g[0],g[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(g[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(g[0]);break;case a.OPS.setHScale:this.setHScale(g[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(g[0],g[1],g[2],g[3],g[4],g[5]);break;case a.OPS.setTextRise:this.setTextRise(g[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(g[0]);break;case a.OPS.setLineWidth:this.setLineWidth(g[0]);break;case a.OPS.setLineJoin:this.setLineJoin(g[0]);break;case a.OPS.setLineCap:this.setLineCap(g[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(g[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(g[0],g[1],g[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(g[0],g[1],g[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(g);break;case a.OPS.setFillColorN:this.setFillColorN(g);break;case a.OPS.shadingFill:this.shadingFill(g[0]);break;case a.OPS.setDash:this.setDash(g[0],g[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(g[0]);break;case a.OPS.setFlatness:this.setFlatness(g[0]);break;case a.OPS.setGState:this.setGState(g[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(g[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(g[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(g[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(g[0],g[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(g[0],g[1],g[2],g[3],g[4],g[5]);break;case a.OPS.constructPath:this.constructPath(g[0],g[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,a.warn)(`Unimplemented operator ${c}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,f,c,d,g,N){const l=this.current;l.textMatrix=l.lineMatrix=[i,f,c,d,g,N],l.textMatrixScale=Math.hypot(i,f),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${m(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",m(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=a.IDENTITY_MATRIX,i.lineMatrix=a.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,f){const c=this.current;c.x=c.lineX+=i,c.y=c.lineY+=f,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${m(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",m(-c.y))}showText(i){const f=this.current,c=f.font,d=f.fontSize;if(d===0)return;const g=f.fontSizeScale,N=f.charSpacing,l=f.wordSpacing,T=f.fontDirection,O=f.textHScale*T,nt=c.vertical,G=nt?1:-1,Y=c.defaultVMetrics,z=d*f.fontMatrix[0];let it=0;for(const st of i){if(st===null){it+=T*l;continue}else if(typeof st=="number"){it+=G*st*d/1e3;continue}const R=(st.isSpace?l:0)+N,r=st.fontChar;let o,A,B=st.width;if(nt){let $;const K=st.vmetric||Y;$=st.vmetric?K[1]:B*.5,$=-$*z;const rt=K[2]*z;B=K?-K[0]:B,o=$/g,A=(it+rt)/g}else o=it/g,A=0;(st.isInFont||c.missingFile)&&(f.xcoords.push(f.x+o),nt&&f.ycoords.push(-f.y+A),f.tspan.textContent+=r);const U=nt?B*z-R*T:B*z+R*T;it+=U}f.tspan.setAttributeNS(null,"x",f.xcoords.map(m).join(" ")),nt?f.tspan.setAttributeNS(null,"y",f.ycoords.map(m).join(" ")):f.tspan.setAttributeNS(null,"y",m(-f.y)),nt?f.y-=it:f.x+=it*O,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${m(f.fontSize)}px`),f.fontStyle!==L.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==L.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const I=f.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(I===a.TextRenderingMode.FILL||I===a.TextRenderingMode.FILL_STROKE?(f.fillColor!==L.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?f.tspan.setAttributeNS(null,"fill","transparent"):f.tspan.setAttributeNS(null,"fill","none"),I===a.TextRenderingMode.STROKE||I===a.TextRenderingMode.FILL_STROKE){const st=1/(f.textMatrixScale||1);this._setStrokeAttributes(f.tspan,st)}let V=f.textMatrix;f.textRise!==0&&(V=V.slice(),V[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${C(V)} scale(${m(O)}, -1)`),f.txtElement.setAttributeNS(F,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(i,f){this.setLeading(-f),this.moveText(i,f)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=p(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${f}); }
`}setFont(i){const f=this.current,c=this.commonObjs.get(i[0]);let d=i[1];f.font=c,this.embedFonts&&!c.missingFile&&!this.embeddedFonts[c.loadedName]&&(this.addFontStyle(c),this.embeddedFonts[c.loadedName]=c),f.fontMatrix=c.fontMatrix||a.FONT_IDENTITY_MATRIX;let g="normal";c.black?g="900":c.bold&&(g="bold");const N=c.italic?"italic":"normal";d<0?(d=-d,f.fontDirection=-1):f.fontDirection=1,f.fontSize=d,f.fontFamily=c.loadedName,f.fontWeight=g,f.fontStyle=N,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",m(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const i=this.current;i.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((f=i.txtElement)!=null&&f.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=S[i]}setLineJoin(i){this.current.lineJoin=E[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,f,c){this.current.strokeColor=a.Util.makeHexColor(i,f,c)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,f,c){this.current.fillColor=a.Util.makeHexColor(i,f,c),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:f,height:c}=this.viewport,d=a.Util.inverseTransform(this.transformMatrix),[g,N,l,T]=a.Util.getAxialAlignedBoundingBox([0,0,f,c],d),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x",g),O.setAttributeNS(null,"y",N),O.setAttributeNS(null,"width",l-g),O.setAttributeNS(null,"height",T-N),O.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&O.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(O)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const f=i[1],c=i[2],d=i[3]||a.IDENTITY_MATRIX,[g,N,l,T]=i[4],O=i[5],nt=i[6],G=i[7],Y=`shading${v++}`,[z,it,I,V]=a.Util.normalizeRect([...a.Util.applyTransform([g,N],d),...a.Util.applyTransform([l,T],d)]),[st,R]=a.Util.singularValueDecompose2dScale(d),r=O*st,o=nt*R,A=this.svgFactory.createElement("svg:pattern");A.setAttributeNS(null,"id",Y),A.setAttributeNS(null,"patternUnits","userSpaceOnUse"),A.setAttributeNS(null,"width",r),A.setAttributeNS(null,"height",o),A.setAttributeNS(null,"x",`${z}`),A.setAttributeNS(null,"y",`${it}`);const B=this.svg,U=this.transformMatrix,$=this.current.fillColor,K=this.current.strokeColor,rt=this.svgFactory.create(I-z,V-it);if(this.svg=rt,this.transformMatrix=d,G===2){const ut=a.Util.makeHexColor(...f);this.current.fillColor=ut,this.current.strokeColor=ut}return this.executeOpTree(this.convertOpList(c)),this.svg=B,this.transformMatrix=U,this.current.fillColor=$,this.current.strokeColor=K,A.append(rt.childNodes[0]),this.defs.append(A),`url(#${Y})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const f=`shading${v++}`,c=i[3];let d;switch(i[1]){case"axial":const g=i[4],N=i[5];d=this.svgFactory.createElement("svg:linearGradient"),d.setAttributeNS(null,"id",f),d.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),d.setAttributeNS(null,"x1",g[0]),d.setAttributeNS(null,"y1",g[1]),d.setAttributeNS(null,"x2",N[0]),d.setAttributeNS(null,"y2",N[1]);break;case"radial":const l=i[4],T=i[5],O=i[6],nt=i[7];d=this.svgFactory.createElement("svg:radialGradient"),d.setAttributeNS(null,"id",f),d.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),d.setAttributeNS(null,"cx",T[0]),d.setAttributeNS(null,"cy",T[1]),d.setAttributeNS(null,"r",nt),d.setAttributeNS(null,"fx",l[0]),d.setAttributeNS(null,"fy",l[1]),d.setAttributeNS(null,"fr",O);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const g of c){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",g[0]),N.setAttributeNS(null,"stop-color",g[1]),d.append(N)}return this.defs.append(d),`url(#${f})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,f){this.current.dashArray=i,this.current.dashPhase=f}constructPath(i,f){const c=this.current;let d=c.x,g=c.y,N=[],l=0;for(const T of i)switch(T|0){case a.OPS.rectangle:d=f[l++],g=f[l++];const O=f[l++],nt=f[l++],G=d+O,Y=g+nt;N.push("M",m(d),m(g),"L",m(G),m(g),"L",m(G),m(Y),"L",m(d),m(Y),"Z");break;case a.OPS.moveTo:d=f[l++],g=f[l++],N.push("M",m(d),m(g));break;case a.OPS.lineTo:d=f[l++],g=f[l++],N.push("L",m(d),m(g));break;case a.OPS.curveTo:d=f[l+4],g=f[l+5],N.push("C",m(f[l]),m(f[l+1]),m(f[l+2]),m(f[l+3]),m(d),m(g)),l+=6;break;case a.OPS.curveTo2:N.push("C",m(d),m(g),m(f[l]),m(f[l+1]),m(f[l+2]),m(f[l+3])),d=f[l+2],g=f[l+3],l+=4;break;case a.OPS.curveTo3:d=f[l+2],g=f[l+3],N.push("C",m(f[l]),m(f[l+1]),m(d),m(g),m(d),m(g)),l+=4;break;case a.OPS.closePath:N.push("Z");break}N=N.join(" "),c.path&&i.length>0&&i[0]!==a.OPS.rectangle&&i[0]!==a.OPS.moveTo?N=c.path.getAttributeNS(null,"d")+N:(c.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(c.path)),c.path.setAttributeNS(null,"d",N),c.path.setAttributeNS(null,"fill","none"),c.element=c.path,c.setCurrentPoint(d,g)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const f=`clippath${b++}`,c=this.svgFactory.createElement("svg:clipPath");c.setAttributeNS(null,"id",f),c.setAttributeNS(null,"transform",C(this.transformMatrix));const d=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?d.setAttributeNS(null,"clip-rule","evenodd"):d.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,c.append(d),this.defs.append(c),i.activeClipUrl){i.clipGroup=null;for(const g of this.extraStack)g.clipGroup=null;c.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const f=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",f)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[f,c]of i)switch(f){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,a.warn)(`Unimplemented graphic state operator ${f}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,f=1){const c=this.current;let d=c.dashArray;f!==1&&d.length>0&&(d=d.map(function(g){return f*g})),i.setAttributeNS(null,"stroke",c.strokeColor),i.setAttributeNS(null,"stroke-opacity",c.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",m(c.miterLimit)),i.setAttributeNS(null,"stroke-linecap",c.lineCap),i.setAttributeNS(null,"stroke-linejoin",c.lineJoin),i.setAttributeNS(null,"stroke-width",m(f*c.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",d.map(m).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",m(f*c.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const f=this.getObject(i);if(!f){(0,a.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(f)}paintInlineImageXObject(i,f){const c=i.width,d=i.height,g=w(i,this.forceDataSchema,!!f),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",m(c)),N.setAttributeNS(null,"height",m(d)),this.current.element=N,this.clip("nonzero");const l=this.svgFactory.createElement("svg:image");l.setAttributeNS(q,"xlink:href",g),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",m(-d)),l.setAttributeNS(null,"width",m(c)+"px"),l.setAttributeNS(null,"height",m(d)+"px"),l.setAttributeNS(null,"transform",`scale(${m(1/c)} ${m(-1/d)})`),f?f.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(i){const f=this.getObject(i.data,i);if(f.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const c=this.current,d=f.width,g=f.height,N=c.fillColor;c.maskId=`mask${h++}`;const l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",c.maskId);const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",m(d)),T.setAttributeNS(null,"height",m(g)),T.setAttributeNS(null,"fill",N),T.setAttributeNS(null,"mask",`url(#${c.maskId})`),this.defs.append(l),this._ensureTransformGroup().append(T),this.paintInlineImageXObject(f,l)}paintFormXObjectBegin(i,f){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),f){const c=f[2]-f[0],d=f[3]-f[1],g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",f[0]),g.setAttributeNS(null,"y",f[1]),g.setAttributeNS(null,"width",m(c)),g.setAttributeNS(null,"height",m(d)),this.current.element=g,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const f=this.svgFactory.create(i.width,i.height),c=this.svgFactory.createElement("svg:defs");f.append(c),this.defs=c;const d=this.svgFactory.createElement("svg:g");return d.setAttributeNS(null,"transform",C(i.transform)),f.append(d),this.svg=d,f}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=M},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class u{static textContent(a){const L=[],F={items:L,styles:Object.create(null)};function q(S){var w;if(!S)return;let E=null;const p=S.name;if(p==="#text")E=S.value;else if(u.shouldBuildText(p))(w=S==null?void 0:S.attributes)!=null&&w.textContent?E=S.attributes.textContent:S.value&&(E=S.value);else return;if(E!==null&&L.push({str:E}),!!S.children)for(const D of S.children)q(D)}return q(a),F}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}t.XfaText=u},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=C,t.updateTextLayer=b;var e=u(1),a=u(6);const L=1e5,F=30,q=.8,S=new Map;function E(h,v){let M;if(v&&e.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(h,h).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=h,M=x.getContext("2d",{alpha:!1})}return M}function p(h,v){const M=S.get(h);if(M)return M;const x=E(F,v);x.font=`${F}px ${h}`;const i=x.measureText("");let f=i.fontBoundingBoxAscent,c=Math.abs(i.fontBoundingBoxDescent);if(f){const g=f/(f+c);return S.set(h,g),x.canvas.width=x.canvas.height=0,g}x.strokeStyle="red",x.clearRect(0,0,F,F),x.strokeText("g",0,0);let d=x.getImageData(0,0,F,F).data;c=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){c=Math.ceil(g/4/F);break}x.clearRect(0,0,F,F),x.strokeText("A",0,F),d=x.getImageData(0,0,F,F).data,f=0;for(let g=0,N=d.length;g<N;g+=4)if(d[g]>0){f=F-Math.floor(g/4/F);break}if(x.canvas.width=x.canvas.height=0,f){const g=f/(f+c);return S.set(h,g),g}return S.set(h,q),q}function w(h,v,M){const x=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};h._textDivs.push(x);const f=e.Util.transform(h._transform,v.transform);let c=Math.atan2(f[1],f[0]);const d=M[v.fontName];d.vertical&&(c+=Math.PI/2);const g=Math.hypot(f[2],f[3]),N=g*p(d.fontFamily,h._isOffscreenCanvasSupported);let l,T;c===0?(l=f[4],T=f[5]-N):(l=f[4]+N*Math.sin(c),T=f[5]-N*Math.cos(c));const O="calc(var(--scale-factor)*",nt=x.style;h._container===h._rootContainer?(nt.left=`${(100*l/h._pageWidth).toFixed(2)}%`,nt.top=`${(100*T/h._pageHeight).toFixed(2)}%`):(nt.left=`${O}${l.toFixed(2)}px)`,nt.top=`${O}${T.toFixed(2)}px)`),nt.fontSize=`${O}${g.toFixed(2)}px)`,nt.fontFamily=d.fontFamily,i.fontSize=g,x.setAttribute("role","presentation"),x.textContent=v.str,x.dir=v.dir,h._fontInspectorEnabled&&(x.dataset.fontName=v.fontName),c!==0&&(i.angle=c*(180/Math.PI));let G=!1;if(v.str.length>1)G=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const Y=Math.abs(v.transform[0]),z=Math.abs(v.transform[3]);Y!==z&&Math.max(Y,z)/Math.min(Y,z)>1.5&&(G=!0)}G&&(i.canvasWidth=d.vertical?v.height:v.width),h._textDivProperties.set(x,i),h._isReadableStream&&h._layoutText(x)}function D(h){const{div:v,scale:M,properties:x,ctx:i,prevFontSize:f,prevFontFamily:c}=h,{style:d}=v;let g="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:N}=d,{canvasWidth:l,fontSize:T}=x;(f!==T||c!==N)&&(i.font=`${T*M}px ${N}`,h.prevFontSize=T,h.prevFontFamily=N);const{width:O}=i.measureText(v.textContent);O>0&&(g=`scaleX(${l*M/O})`)}x.angle!==0&&(g=`rotate(${x.angle}deg) ${g}`),g.length>0&&(d.transform=g)}function y(h){if(h._canceled)return;const v=h._textDivs,M=h._capability;if(v.length>L){M.resolve();return}if(!h._isReadableStream)for(const i of v)h._layoutText(i);M.resolve()}class m{constructor({textContentSource:v,container:M,viewport:x,textDivs:i,textDivProperties:f,textContentItemsStr:c,isOffscreenCanvasSupported:d}){var O;this._textContentSource=v,this._isReadableStream=v instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=i||[],this._textContentItemsStr=c||[],this._isOffscreenCanvasSupported=d,this._fontInspectorEnabled=!!((O=globalThis.FontInspector)!=null&&O.enabled),this._reader=null,this._textDivProperties=f||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,d)};const{pageWidth:g,pageHeight:N,pageX:l,pageY:T}=x.rawDims;this._transform=[1,0,0,-1,-l,T+N],this._pageWidth=g,this._pageHeight=N,(0,a.setLayerDimensions)(M,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(v,M){for(const x of v){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),i.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),w(this,x,M)}}_layoutText(v){const M=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,D(this._layoutTextParams),M.hasText&&this._container.append(v),M.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const v=new e.PromiseCapability;let M=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:i,done:f})=>{if(f){v.resolve();return}Object.assign(M,i.styles),this._processItems(i.items,M),x()},v.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:i}=this._textContentSource;this._processItems(x,i),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{M=null,y(this)},this._capability.reject)}}t.TextLayerRenderTask=m;function C(h){!h.textContentSource&&(h.textContent||h.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),h.textContentSource=h.textContent||h.textContentStream);const{container:v,viewport:M}=h,x=getComputedStyle(v),i=x.getPropertyValue("visibility"),f=parseFloat(x.getPropertyValue("--scale-factor"));i==="visible"&&(!f||Math.abs(f-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const c=new m(h);return c._render(),c}function b({container:h,viewport:v,textDivs:M,textDivProperties:x,isOffscreenCanvasSupported:i,mustRotate:f=!0,mustRescale:c=!0}){if(f&&(0,a.setLayerDimensions)(h,{rotation:v.rotation}),c){const d=E(0,i),N={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d};for(const l of M)N.properties=x.get(l),N.div=l,D(N)}}},(n,t,u)=>{var p,w,D,y,m,C,b,h,v,M,x,Qe,Pe,Ze,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=u(1),a=u(4),L=u(28),F=u(33),q=u(6),S=u(34);const g=class g{constructor({uiManager:l,pageIndex:T,div:O,accessibilityManager:nt,annotationLayer:G,viewport:Y,l10n:z}){ot(this,x);ot(this,p);ot(this,w,!1);ot(this,D,null);ot(this,y,this.pointerup.bind(this));ot(this,m,this.pointerdown.bind(this));ot(this,C,new Map);ot(this,b,!1);ot(this,h,!1);ot(this,v,!1);ot(this,M);const it=[L.FreeTextEditor,F.InkEditor,S.StampEditor];if(!g._initialized){g._initialized=!0;for(const I of it)I.initialize(z)}l.registerEditorTypes(it),ct(this,M,l),this.pageIndex=T,this.div=O,ct(this,p,nt),ct(this,D,G),this.viewport=Y,s(this,M).addLayer(this)}get isEmpty(){return s(this,C).size===0}updateToolbar(l){s(this,M).updateToolbar(l)}updateMode(l=s(this,M).getMode()){Q(this,x,tn).call(this),l===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),l!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",l===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",l===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",l===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(l){if(!l&&s(this,M).getMode()!==e.AnnotationEditorType.INK)return;if(!l){for(const O of s(this,C).values())if(O.isEmpty()){O.setInBackground();return}}Q(this,x,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(l){s(this,M).setEditingState(l)}addCommands(l){s(this,M).addCommands(l)}enable(){this.div.style.pointerEvents="auto";const l=new Set;for(const O of s(this,C).values())O.enableEditing(),O.annotationElementId&&l.add(O.annotationElementId);if(!s(this,D))return;const T=s(this,D).getEditableAnnotations();for(const O of T){if(O.hide(),s(this,M).isDeletedAnnotationElement(O.data.id)||l.has(O.data.id))continue;const nt=this.deserialize(O);nt&&(this.addOrRebuild(nt),nt.enableEditing())}}disable(){var T;ct(this,v,!0),this.div.style.pointerEvents="none";const l=new Set;for(const O of s(this,C).values()){if(O.disableEditing(),!O.annotationElementId||O.serialize()!==null){l.add(O.annotationElementId);continue}(T=this.getEditableAnnotation(O.annotationElementId))==null||T.show(),O.remove()}if(s(this,D)){const O=s(this,D).getEditableAnnotations();for(const nt of O){const{id:G}=nt.data;l.has(G)||s(this,M).isDeletedAnnotationElement(G)||nt.show()}}Q(this,x,tn).call(this),this.isEmpty&&(this.div.hidden=!0),ct(this,v,!1)}getEditableAnnotation(l){var T;return((T=s(this,D))==null?void 0:T.getEditableAnnotation(l))||null}setActiveEditor(l){s(this,M).getActive()!==l&&s(this,M).setActiveEditor(l)}enableClick(){this.div.addEventListener("pointerdown",s(this,m)),this.div.addEventListener("pointerup",s(this,y))}disableClick(){this.div.removeEventListener("pointerdown",s(this,m)),this.div.removeEventListener("pointerup",s(this,y))}attach(l){s(this,C).set(l.id,l);const{annotationElementId:T}=l;T&&s(this,M).isDeletedAnnotationElement(T)&&s(this,M).removeDeletedAnnotationElement(l)}detach(l){var T;s(this,C).delete(l.id),(T=s(this,p))==null||T.removePointerInTextLayer(l.contentDiv),!s(this,v)&&l.annotationElementId&&s(this,M).addDeletedAnnotationElement(l)}remove(l){this.detach(l),s(this,M).removeEditor(l),l.div.contains(document.activeElement)&&setTimeout(()=>{s(this,M).focusMainContainer()},0),l.div.remove(),l.isAttachedToDOM=!1,s(this,h)||this.addInkEditorIfNeeded(!1)}changeParent(l){var T;l.parent!==this&&(l.annotationElementId&&(s(this,M).addDeletedAnnotationElement(l.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(l),l.annotationElementId=null),this.attach(l),(T=l.parent)==null||T.detach(l),l.setParent(this),l.div&&l.isAttachedToDOM&&(l.div.remove(),this.div.append(l.div)))}add(l){if(this.changeParent(l),s(this,M).addEditor(l),this.attach(l),!l.isAttachedToDOM){const T=l.render();this.div.append(T),l.isAttachedToDOM=!0}l.fixAndSetPosition(),l.onceAdded(),s(this,M).addToAnnotationStorage(l)}moveEditorInDOM(l){var O;if(!l.isAttachedToDOM)return;const{activeElement:T}=document;l.div.contains(T)&&(l._focusEventsAllowed=!1,setTimeout(()=>{l.div.contains(document.activeElement)?l._focusEventsAllowed=!0:(l.div.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),T.focus())},0)),l._structTreeParentId=(O=s(this,p))==null?void 0:O.moveElementInDOM(this.div,l.div,l.contentDiv,!0)}addOrRebuild(l){l.needsToBeRebuilt()?l.rebuild():this.add(l)}addUndoableEditor(l){const T=()=>l._uiManager.rebuild(l),O=()=>{l.remove()};this.addCommands({cmd:T,undo:O,mustExec:!1})}getNextId(){return s(this,M).getId()}pasteEditor(l,T){s(this,M).updateToolbar(l),s(this,M).updateMode(l);const{offsetX:O,offsetY:nt}=Q(this,x,Ze).call(this),G=this.getNextId(),Y=Q(this,x,Qe).call(this,{parent:this,id:G,x:O,y:nt,uiManager:s(this,M),isCentered:!0,...T});Y&&this.add(Y)}deserialize(l){switch(l.annotationType??l.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return L.FreeTextEditor.deserialize(l,this,s(this,M));case e.AnnotationEditorType.INK:return F.InkEditor.deserialize(l,this,s(this,M));case e.AnnotationEditorType.STAMP:return S.StampEditor.deserialize(l,this,s(this,M))}return null}addNewEditor(){Q(this,x,Pe).call(this,Q(this,x,Ze).call(this),!0)}setSelected(l){s(this,M).setSelected(l)}toggleSelected(l){s(this,M).toggleSelected(l)}isSelected(l){return s(this,M).isSelected(l)}unselect(l){s(this,M).unselect(l)}pointerup(l){const{isMac:T}=e.FeatureTest.platform;if(!(l.button!==0||l.ctrlKey&&T)&&l.target===this.div&&s(this,b)){if(ct(this,b,!1),!s(this,w)){ct(this,w,!0);return}if(s(this,M).getMode()===e.AnnotationEditorType.STAMP){s(this,M).unselectAll();return}Q(this,x,Pe).call(this,l,!1)}}pointerdown(l){if(s(this,b)){ct(this,b,!1);return}const{isMac:T}=e.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&T||l.target!==this.div)return;ct(this,b,!0);const O=s(this,M).getActive();ct(this,w,!O||O.isEmpty())}findNewParent(l,T,O){const nt=s(this,M).findParent(T,O);return nt===null||nt===this?!1:(nt.changeParent(l),!0)}destroy(){var l,T;((l=s(this,M).getActive())==null?void 0:l.parent)===this&&(s(this,M).commitOrRemove(),s(this,M).setActiveEditor(null));for(const O of s(this,C).values())(T=s(this,p))==null||T.removePointerInTextLayer(O.contentDiv),O.setParent(null),O.isAttachedToDOM=!1,O.div.remove();this.div=null,s(this,C).clear(),s(this,M).removeLayer(this)}render({viewport:l}){this.viewport=l,(0,q.setLayerDimensions)(this.div,l);for(const T of s(this,M).getEditors(this.pageIndex))this.add(T);this.updateMode()}update({viewport:l}){s(this,M).commitOrRemove(),this.viewport=l,(0,q.setLayerDimensions)(this.div,{rotation:l.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:l,pageHeight:T}=this.viewport.rawDims;return[l,T]}};p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakMap,v=new WeakMap,M=new WeakMap,x=new WeakSet,Qe=function(l){switch(s(this,M).getMode()){case e.AnnotationEditorType.FREETEXT:return new L.FreeTextEditor(l);case e.AnnotationEditorType.INK:return new F.InkEditor(l);case e.AnnotationEditorType.STAMP:return new S.StampEditor(l)}return null},Pe=function(l,T){const O=this.getNextId(),nt=Q(this,x,Qe).call(this,{parent:this,id:O,x:l.offsetX,y:l.offsetY,uiManager:s(this,M),isCentered:T});return nt&&this.add(nt),nt},Ze=function(){const{x:l,y:T,width:O,height:nt}=this.div.getBoundingClientRect(),G=Math.max(0,l),Y=Math.max(0,T),z=Math.min(window.innerWidth,l+O),it=Math.min(window.innerHeight,T+nt),I=(G+z)/2-l,V=(Y+it)/2-T,[st,R]=this.viewport.rotation%180===0?[I,V]:[V,I];return{offsetX:st,offsetY:R}},tn=function(){ct(this,h,!0);for(const l of s(this,C).values())l.isEmpty()&&l.remove();ct(this,h,!1)},Qt(g,"_initialized",!1);let E=g;t.AnnotationEditorLayer=E},(n,t,u)=>{var S,E,p,w,D,y,m,C,b,h,Rn,kn,Mn,be,en,Fn,nn;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=u(1),a=u(5),L=u(4),F=u(29);const g=class g extends L.AnnotationEditor{constructor(T){super({...T,name:"freeTextEditor"});ot(this,h);ot(this,S,this.editorDivBlur.bind(this));ot(this,E,this.editorDivFocus.bind(this));ot(this,p,this.editorDivInput.bind(this));ot(this,w,this.editorDivKeydown.bind(this));ot(this,D);ot(this,y,"");ot(this,m,`${this.id}-editor`);ot(this,C);ot(this,b,null);ct(this,D,T.color||g._defaultColor||L.AnnotationEditor._defaultLineColor),ct(this,C,T.fontSize||g._defaultFontSize)}static get _keyboardManager(){const T=g.prototype,O=Y=>Y.isEmpty(),nt=a.AnnotationEditorUIManager.TRANSLATE_SMALL,G=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],T.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],T._translateEmpty,{args:[-nt,0],checker:O}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],T._translateEmpty,{args:[-G,0],checker:O}],[["ArrowRight","mac+ArrowRight"],T._translateEmpty,{args:[nt,0],checker:O}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],T._translateEmpty,{args:[G,0],checker:O}],[["ArrowUp","mac+ArrowUp"],T._translateEmpty,{args:[0,-nt],checker:O}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],T._translateEmpty,{args:[0,-G],checker:O}],[["ArrowDown","mac+ArrowDown"],T._translateEmpty,{args:[0,nt],checker:O}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],T._translateEmpty,{args:[0,G],checker:O}]]))}static initialize(T){L.AnnotationEditor.initialize(T,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const O=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(O.getPropertyValue("--freetext-padding"))}static updateDefaultParams(T,O){switch(T){case e.AnnotationEditorParamsType.FREETEXT_SIZE:g._defaultFontSize=O;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:g._defaultColor=O;break}}updateParams(T,O){switch(T){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Q(this,h,Rn).call(this,O);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Q(this,h,kn).call(this,O);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,g._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,g._defaultColor||L.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,C)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,D)]]}_translateEmpty(T,O){this._uiManager.translateSelectedEditors(T,O,!0)}getInitialTranslation(){const T=this.parentScale;return[-g._internalPadding*T,-(g._internalPadding+s(this,C))*T]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",s(this,w)),this.editorDiv.addEventListener("focus",s(this,E)),this.editorDiv.addEventListener("blur",s(this,S)),this.editorDiv.addEventListener("input",s(this,p)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",s(this,m)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",s(this,w)),this.editorDiv.removeEventListener("focus",s(this,E)),this.editorDiv.removeEventListener("blur",s(this,S)),this.editorDiv.removeEventListener("input",s(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(T){this._focusEventsAllowed&&(super.focusin(T),T.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var T;if(this.width){Q(this,h,nn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(T=this._initialOptions)!=null&&T.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const T=s(this,y),O=ct(this,y,Q(this,h,Mn).call(this).trimEnd());if(T===O)return;const nt=G=>{if(ct(this,y,G),!G){this.remove();return}Q(this,h,en).call(this),this._uiManager.rebuild(this),Q(this,h,be).call(this)};this.addCommands({cmd:()=>{nt(O)},undo:()=>{nt(T)},mustExec:!1}),Q(this,h,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(T){this.enterInEditMode()}keydown(T){T.target===this.div&&T.key==="Enter"&&(this.enterInEditMode(),T.preventDefault())}editorDivKeydown(T){g._keyboardManager.exec(this,T)}editorDivFocus(T){this.isEditing=!0}editorDivBlur(T){this.isEditing=!1}editorDivInput(T){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let T,O;this.width&&(T=this.x,O=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",s(this,m)),this.enableEditing(),L.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("aria-label",G)}),L.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(G=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:nt}=this.editorDiv;if(nt.fontSize=`calc(${s(this,C)}px * var(--scale-factor))`,nt.color=s(this,D),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,Y]=this.parentDimensions;if(this.annotationElementId){const{position:z}=s(this,b);let[it,I]=this.getInitialTranslation();[it,I]=this.pageTranslationToScreen(it,I);const[V,st]=this.pageDimensions,[R,r]=this.pageTranslation;let o,A;switch(this.rotation){case 0:o=T+(z[0]-R)/V,A=O+this.height-(z[1]-r)/st;break;case 90:o=T+(z[0]-R)/V,A=O-(z[1]-r)/st,[it,I]=[I,-it];break;case 180:o=T-this.width+(z[0]-R)/V,A=O-(z[1]-r)/st,[it,I]=[-it,-I];break;case 270:o=T+(z[0]-R-this.height*st)/V,A=O+(z[1]-r-this.width*V)/st,[it,I]=[-I,it];break}this.setAt(o*G,A*Y,it,I)}else this.setAt(T*G,O*Y,this.width*G,this.height*Y);Q(this,h,en).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(T,O,nt){let G=null;if(T instanceof F.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:z,fontColor:it},rect:I,rotation:V,id:st},textContent:R,textPosition:r,parent:{page:{pageNumber:o}}}=T;if(!R||R.length===0)return null;G=T={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(it),fontSize:z,value:R.join(`
`),position:r,pageIndex:o-1,rect:I,rotation:V,id:st,deleted:!1}}const Y=super.deserialize(T,O,nt);return ct(Y,C,T.fontSize),ct(Y,D,e.Util.makeHexColor(...T.color)),ct(Y,y,T.value),Y.annotationElementId=T.id||null,ct(Y,b,G),Y}serialize(T=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const O=g._internalPadding*this.parentScale,nt=this.getRect(O,O),G=L.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:s(this,D)),Y={annotationType:e.AnnotationEditorType.FREETEXT,color:G,fontSize:s(this,C),value:s(this,y),pageIndex:this.pageIndex,rect:nt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return T?Y:this.annotationElementId&&!Q(this,h,Fn).call(this,Y)?null:(Y.id=this.annotationElementId,Y)}};S=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakSet,Rn=function(T){const O=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-s(this,C))*this.parentScale),ct(this,C,G),Q(this,h,be).call(this)},nt=s(this,C);this.addCommands({cmd:()=>{O(T)},undo:()=>{O(nt)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kn=function(T){const O=s(this,D);this.addCommands({cmd:()=>{ct(this,D,this.editorDiv.style.color=T)},undo:()=>{ct(this,D,this.editorDiv.style.color=O)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=function(){const T=this.editorDiv.getElementsByTagName("div");if(T.length===0)return this.editorDiv.innerText;const O=[];for(const nt of T)O.push(nt.innerText.replace(/\r\n?|\n/,""));return O.join(`
`)},be=function(){const[T,O]=this.parentDimensions;let nt;if(this.isAttachedToDOM)nt=this.div.getBoundingClientRect();else{const{currentLayer:G,div:Y}=this,z=Y.style.display;Y.style.display="hidden",G.div.append(this.div),nt=Y.getBoundingClientRect(),Y.remove(),Y.style.display=z}this.rotation%180===this.parentRotation%180?(this.width=nt.width/T,this.height=nt.height/O):(this.width=nt.height/T,this.height=nt.width/O),this.fixAndSetPosition()},en=function(){if(this.editorDiv.replaceChildren(),!!s(this,y))for(const T of s(this,y).split(`
`)){const O=document.createElement("div");O.append(T?document.createTextNode(T):document.createElement("br")),this.editorDiv.append(O)}},Fn=function(T){const{value:O,fontSize:nt,color:G,rect:Y,pageIndex:z}=s(this,b);return T.value!==O||T.fontSize!==nt||T.rect.some((it,I)=>Math.abs(it-Y[I])>=1)||T.color.some((it,I)=>it!==G[I])||T.pageIndex!==z},nn=function(T=!1){if(!this.annotationElementId)return;if(Q(this,h,be).call(this),!T&&(this.width===0||this.height===0)){setTimeout(()=>Q(this,h,nn).call(this,!0),0);return}const O=g._internalPadding*this.parentScale;s(this,b).rect=this.getRect(O,O)},Qt(g,"_freeTextDefaultContent",""),Qt(g,"_internalPadding",0),Qt(g,"_defaultColor",null),Qt(g,"_defaultFontSize",10),Qt(g,"_type","freetext");let q=g;t.FreeTextEditor=q},(n,t,u)=>{var A,U,ae,Dn,rt,ut,ft,yt,bt,vt,Z,tt,P,W,J,at,gt,xt,Et,et,Tt,Pt,Ln,Te,sn,rn,Nt,zt,Yt,St,lt,dt,Mt,an,Vt,H,mt,wt,In,on;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var e=u(1),a=u(6),L=u(3),F=u(30),q=u(31),S=u(32);const E=1e3,p=9,w=new WeakSet;function D(kt){return{width:kt[2]-kt[0],height:kt[3]-kt[1]}}class y{static create(j){switch(j.data.annotationType){case e.AnnotationType.LINK:return new C(j);case e.AnnotationType.TEXT:return new b(j);case e.AnnotationType.WIDGET:switch(j.data.fieldType){case"Tx":return new v(j);case"Btn":return j.data.radioButton?new i(j):j.data.checkBox?new x(j):new f(j);case"Ch":return new c(j);case"Sig":return new M(j)}return new h(j);case e.AnnotationType.POPUP:return new d(j);case e.AnnotationType.FREETEXT:return new N(j);case e.AnnotationType.LINE:return new l(j);case e.AnnotationType.SQUARE:return new T(j);case e.AnnotationType.CIRCLE:return new O(j);case e.AnnotationType.POLYLINE:return new nt(j);case e.AnnotationType.CARET:return new Y(j);case e.AnnotationType.INK:return new z(j);case e.AnnotationType.POLYGON:return new G(j);case e.AnnotationType.HIGHLIGHT:return new it(j);case e.AnnotationType.UNDERLINE:return new I(j);case e.AnnotationType.SQUIGGLY:return new V(j);case e.AnnotationType.STRIKEOUT:return new st(j);case e.AnnotationType.STAMP:return new R(j);case e.AnnotationType.FILEATTACHMENT:return new r(j);default:return new m(j)}}}const B=class B{constructor(j,{isRenderable:k=!1,ignoreBorder:X=!1,createQuadrilaterals:ht=!1}={}){ot(this,A,!1);this.isRenderable=k,this.data=j.data,this.layer=j.layer,this.linkService=j.linkService,this.downloadManager=j.downloadManager,this.imageResourcesPath=j.imageResourcesPath,this.renderForms=j.renderForms,this.svgFactory=j.svgFactory,this.annotationStorage=j.annotationStorage,this.enableScripting=j.enableScripting,this.hasJSActions=j.hasJSActions,this._fieldObjects=j.fieldObjects,this.parent=j.parent,k&&(this.container=this._createContainer(X)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:j,contentsObj:k,richText:X}){return!!(j!=null&&j.str||k!=null&&k.str||X!=null&&X.str)}get hasPopupData(){return B._hasPopupData(this.data)}_createContainer(j){const{data:k,parent:{page:X,viewport:ht}}=this,pt=document.createElement("section");pt.setAttribute("data-annotation-id",k.id),this instanceof h||(pt.tabIndex=E),pt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pt.setAttribute("aria-haspopup","dialog"),k.noRotate&&pt.classList.add("norotate");const{pageWidth:At,pageHeight:Ct,pageX:Ot,pageY:Dt}=ht.rawDims;if(!k.rect||this instanceof d){const{rotation:$t}=k;return!k.hasOwnCanvas&&$t!==0&&this.setRotation($t,pt),pt}const{width:Rt,height:Ht}=D(k.rect),Lt=e.Util.normalizeRect([k.rect[0],X.view[3]-k.rect[1]+X.view[1],k.rect[2],X.view[3]-k.rect[3]+X.view[1]]);if(!j&&k.borderStyle.width>0){pt.style.borderWidth=`${k.borderStyle.width}px`;const $t=k.borderStyle.horizontalCornerRadius,Gt=k.borderStyle.verticalCornerRadius;if($t>0||Gt>0){const Jt=`calc(${$t}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;pt.style.borderRadius=Jt}else if(this instanceof i){const Jt=`calc(${Rt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;pt.style.borderRadius=Jt}switch(k.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:pt.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:pt.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:pt.style.borderBottomStyle="solid";break}const Kt=k.borderColor||null;Kt?(ct(this,A,!0),pt.style.borderColor=e.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):pt.style.borderWidth=0}pt.style.left=`${100*(Lt[0]-Ot)/At}%`,pt.style.top=`${100*(Lt[1]-Dt)/Ct}%`;const{rotation:jt}=k;return k.hasOwnCanvas||jt===0?(pt.style.width=`${100*Rt/At}%`,pt.style.height=`${100*Ht/Ct}%`):this.setRotation(jt,pt),pt}setRotation(j,k=this.container){if(!this.data.rect)return;const{pageWidth:X,pageHeight:ht}=this.parent.viewport.rawDims,{width:pt,height:At}=D(this.data.rect);let Ct,Ot;j%180===0?(Ct=100*pt/X,Ot=100*At/ht):(Ct=100*At/X,Ot=100*pt/ht),k.style.width=`${Ct}%`,k.style.height=`${Ot}%`,k.setAttribute("data-main-rotation",(360-j)%360)}get _commonActions(){const j=(k,X,ht)=>{const pt=ht.detail[k],At=pt[0],Ct=pt.slice(1);ht.target.style[X]=F.ColorConverters[`${At}_HTML`](Ct),this.annotationStorage.setValue(this.data.id,{[X]:F.ColorConverters[`${At}_rgb`](Ct)})};return(0,e.shadow)(this,"_commonActions",{display:k=>{const{display:X}=k.detail,ht=X%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:X===1||X===2})},print:k=>{this.annotationStorage.setValue(this.data.id,{noPrint:!k.detail.print})},hidden:k=>{const{hidden:X}=k.detail;this.container.style.visibility=X?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:X,noView:X})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.target.disabled=k.detail.readonly},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{j("bgColor","backgroundColor",k)},fillColor:k=>{j("fillColor","backgroundColor",k)},fgColor:k=>{j("fgColor","color",k)},textColor:k=>{j("textColor","color",k)},borderColor:k=>{j("borderColor","borderColor",k)},strokeColor:k=>{j("strokeColor","borderColor",k)},rotation:k=>{const X=k.detail.rotation;this.setRotation(X),this.annotationStorage.setValue(this.data.id,{rotation:X})}})}_dispatchEventFromSandbox(j,k){const X=this._commonActions;for(const ht of Object.keys(k.detail)){const pt=j[ht]||X[ht];pt==null||pt(k)}}_setDefaultPropertiesFromJS(j){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const X=this._commonActions;for(const[ht,pt]of Object.entries(k)){const At=X[ht];if(At){const Ct={detail:{[ht]:pt},target:j};At(Ct),delete k[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:j}=this.data;if(!j)return;const[k,X,ht,pt]=this.data.rect;if(j.length===1){const[,{x:Gt,y:Kt},{x:Jt,y:te}]=j[0];if(ht===Gt&&pt===Kt&&k===Jt&&X===te)return}const{style:At}=this.container;let Ct;if(s(this,A)){const{borderColor:Gt,borderWidth:Kt}=At;At.borderWidth=0,Ct=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Gt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const Ot=ht-k,Dt=pt-X,{svgFactory:Rt}=this,Ht=Rt.createElement("svg");Ht.classList.add("quadrilateralsContainer"),Ht.setAttribute("width",0),Ht.setAttribute("height",0);const Lt=Rt.createElement("defs");Ht.append(Lt);const jt=Rt.createElement("clipPath"),$t=`clippath_${this.data.id}`;jt.setAttribute("id",$t),jt.setAttribute("clipPathUnits","objectBoundingBox"),Lt.append(jt);for(const[,{x:Gt,y:Kt},{x:Jt,y:te}]of j){const Zt=Rt.createElement("rect"),ne=(Jt-k)/Ot,ie=(pt-Kt)/Dt,re=(Gt-Jt)/Ot,mn=(Kt-te)/Dt;Zt.setAttribute("x",ne),Zt.setAttribute("y",ie),Zt.setAttribute("width",re),Zt.setAttribute("height",mn),jt.append(Zt),Ct==null||Ct.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${ie}" width="${re}" height="${mn}"/>`)}s(this,A)&&(Ct.push("</g></svg>')"),At.backgroundImage=Ct.join("")),this.container.append(Ht),this.container.style.clipPath=`url(#${$t})`}_createPopup(){const{container:j,data:k}=this;j.setAttribute("aria-haspopup","dialog");const X=new d({data:{color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,parentRect:k.rect,borderStyle:0,id:`popup_${k.id}`,rotation:k.rotation},parent:this.parent,elements:[this]});this.parent.div.append(X.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(j,k=null){const X=[];if(this._fieldObjects){const ht=this._fieldObjects[j];if(ht)for(const{page:pt,id:At,exportValues:Ct}of ht){if(pt===-1||At===k)continue;const Ot=typeof Ct=="string"?Ct:null,Dt=document.querySelector(`[data-element-id="${At}"]`);if(Dt&&!w.has(Dt)){(0,e.warn)(`_getElementsByName - element not allowed: ${At}`);continue}X.push({id:At,exportValue:Ot,domElement:Dt})}return X}for(const ht of document.getElementsByName(j)){const{exportValue:pt}=ht,At=ht.getAttribute("data-element-id");At!==k&&w.has(ht)&&X.push({id:At,exportValue:pt,domElement:ht})}return X}show(){var j;this.container&&(this.container.hidden=!1),(j=this.popup)==null||j.maybeShow()}hide(){var j;this.container&&(this.container.hidden=!0),(j=this.popup)==null||j.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const j=this.getElementsToTriggerPopup();if(Array.isArray(j))for(const k of j)k.classList.add("highlightArea");else j.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:j,data:{id:k}}=this;this.container.addEventListener("dblclick",()=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("switchannotationeditormode",{source:this,mode:j,editId:k})})}};A=new WeakMap;let m=B;class C extends m{constructor(k,X=null){super(k,{isRenderable:!0,ignoreBorder:!!(X!=null&&X.ignoreBorder),createQuadrilaterals:!0});ot(this,U);this.isTooltipOnly=k.data.isTooltipOnly}render(){const{data:k,linkService:X}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",k.id);let pt=!1;return k.url?(X.addLinkAttributes(ht,k.url,k.newWindow),pt=!0):k.action?(this._bindNamedAction(ht,k.action),pt=!0):k.attachment?(this._bindAttachment(ht,k.attachment),pt=!0):k.setOCGState?(Q(this,U,Dn).call(this,ht,k.setOCGState),pt=!0):k.dest?(this._bindLink(ht,k.dest),pt=!0):(k.actions&&(k.actions.Action||k.actions["Mouse Up"]||k.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,k),pt=!0),k.resetForm?(this._bindResetFormAction(ht,k.resetForm),pt=!0):this.isTooltipOnly&&!pt&&(this._bindLink(ht,""),pt=!0)),this.container.classList.add("linkAnnotation"),pt&&this.container.append(ht),this.container}_bindLink(k,X){k.href=this.linkService.getDestinationHash(X),k.onclick=()=>(X&&this.linkService.goToDestination(X),!1),(X||X==="")&&Q(this,U,ae).call(this)}_bindNamedAction(k,X){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeNamedAction(X),!1),Q(this,U,ae).call(this)}_bindAttachment(k,X){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,X.content,X.filename),!1},Q(this,U,ae).call(this)}_bindJSAction(k,X){k.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pt of Object.keys(X.actions)){const At=ht.get(pt);At&&(k[At]=()=>{var Ct;return(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X.id,name:pt}}),!1})}k.onclick||(k.onclick=()=>!1),Q(this,U,ae).call(this)}_bindResetFormAction(k,X){const ht=k.onclick;if(ht||(k.href=this.linkService.getAnchorUrl("")),Q(this,U,ae).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(k.onclick=()=>!1);return}k.onclick=()=>{var Ht;ht==null||ht();const{fields:pt,refs:At,include:Ct}=X,Ot=[];if(pt.length!==0||At.length!==0){const Lt=new Set(At);for(const jt of pt){const $t=this._fieldObjects[jt]||[];for(const{id:Gt}of $t)Lt.add(Gt)}for(const jt of Object.values(this._fieldObjects))for(const $t of jt)Lt.has($t.id)===Ct&&Ot.push($t)}else for(const Lt of Object.values(this._fieldObjects))Ot.push(...Lt);const Dt=this.annotationStorage,Rt=[];for(const Lt of Ot){const{id:jt}=Lt;switch(Rt.push(jt),Lt.type){case"text":{const Gt=Lt.defaultValue||"";Dt.setValue(jt,{value:Gt});break}case"checkbox":case"radiobutton":{const Gt=Lt.defaultValue===Lt.exportValues;Dt.setValue(jt,{value:Gt});break}case"combobox":case"listbox":{const Gt=Lt.defaultValue||"";Dt.setValue(jt,{value:Gt});break}default:continue}const $t=document.querySelector(`[data-element-id="${jt}"]`);if($t){if(!w.has($t)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}U=new WeakSet,ae=function(){this.container.setAttribute("data-internal-link","")},Dn=function(k,X){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeSetOCGState(X),!1),Q(this,U,ae).call(this)};class b extends m{constructor(j){super(j,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const j=document.createElement("img");return j.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",j.alt="[{{type}} Annotation]",j.dataset.l10nId="text_annotation_type",j.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(j),this.container}}class h extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(j){var k;this.data.hasOwnCanvas&&(((k=j.previousSibling)==null?void 0:k.nodeName)==="CANVAS"&&(j.previousSibling.hidden=!0),j.hidden=!1)}_getKeyModifier(j){const{isWin:k,isMac:X}=e.FeatureTest.platform;return k&&j.ctrlKey||X&&j.metaKey}_setEventListener(j,k,X,ht,pt){X.includes("mouse")?j.addEventListener(X,At=>{var Ct;(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:pt(At),shift:At.shiftKey,modifier:this._getKeyModifier(At)}})}):j.addEventListener(X,At=>{var Ct;if(X==="blur"){if(!k.focused||!At.relatedTarget)return;k.focused=!1}else if(X==="focus"){if(k.focused)return;k.focused=!0}pt&&((Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:pt(At)}}))})}_setEventListeners(j,k,X,ht){var pt,At,Ct;for(const[Ot,Dt]of X)(Dt==="Action"||(pt=this.data.actions)!=null&&pt[Dt])&&((Dt==="Focus"||Dt==="Blur")&&(k||(k={focused:!1})),this._setEventListener(j,k,Ot,Dt,ht),Dt==="Focus"&&!((At=this.data.actions)!=null&&At.Blur)?this._setEventListener(j,k,"blur","Blur",null):Dt==="Blur"&&!((Ct=this.data.actions)!=null&&Ct.Focus)&&this._setEventListener(j,k,"focus","Focus",null))}_setBackgroundColor(j){const k=this.data.backgroundColor||null;j.style.backgroundColor=k===null?"transparent":e.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(j){const k=["left","center","right"],{fontColor:X}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||p,pt=j.style;let At;const Ct=2,Ot=Dt=>Math.round(10*Dt)/10;if(this.data.multiLine){const Dt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ct),Rt=Math.round(Dt/(e.LINE_FACTOR*ht))||1,Ht=Dt/Rt;At=Math.min(ht,Ot(Ht/e.LINE_FACTOR))}else{const Dt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ct);At=Math.min(ht,Ot(Dt/e.LINE_FACTOR))}pt.fontSize=`calc(${At}px * var(--scale-factor))`,pt.color=e.Util.makeHexColor(X[0],X[1],X[2]),this.data.textAlignment!==null&&(pt.textAlign=k[this.data.textAlignment])}_setRequired(j,k){k?j.setAttribute("required",!0):j.removeAttribute("required"),j.setAttribute("aria-required",k)}}class v extends h{constructor(j){const k=j.renderForms||!j.data.hasAppearance&&!!j.data.fieldValue;super(j,{isRenderable:k})}setPropertyOnSiblings(j,k,X,ht){const pt=this.annotationStorage;for(const At of this._getElementsByName(j.name,j.id))At.domElement&&(At.domElement[k]=X),pt.setValue(At.id,{[ht]:X})}render(){var ht,pt;const j=this.annotationStorage,k=this.data.id;this.container.classList.add("textWidgetAnnotation");let X=null;if(this.renderForms){const At=j.getValue(k,{value:this.data.fieldValue});let Ct=At.value||"";const Ot=j.getValue(k,{charLimit:this.data.maxLen}).charLimit;Ot&&Ct.length>Ot&&(Ct=Ct.slice(0,Ot));let Dt=At.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join(`
`))||null;Dt&&this.data.comb&&(Dt=Dt.replaceAll(/\s+/g,""));const Rt={userValue:Ct,formattedValue:Dt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(X=document.createElement("textarea"),X.textContent=Dt??Ct,this.data.doNotScroll&&(X.style.overflowY="hidden")):(X=document.createElement("input"),X.type="text",X.setAttribute("value",Dt??Ct),this.data.doNotScroll&&(X.style.overflowX="hidden")),this.data.hasOwnCanvas&&(X.hidden=!0),w.add(X),X.setAttribute("data-element-id",k),X.disabled=this.data.readOnly,X.name=this.data.fieldName,X.tabIndex=E,this._setRequired(X,this.data.required),Ot&&(X.maxLength=Ot),X.addEventListener("input",Lt=>{j.setValue(k,{value:Lt.target.value}),this.setPropertyOnSiblings(X,"value",Lt.target.value,"value"),Rt.formattedValue=null}),X.addEventListener("resetform",Lt=>{const jt=this.data.defaultFieldValue??"";X.value=Rt.userValue=jt,Rt.formattedValue=null});let Ht=Lt=>{const{formattedValue:jt}=Rt;jt!=null&&(Lt.target.value=jt),Lt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){X.addEventListener("focus",jt=>{if(Rt.focused)return;const{target:$t}=jt;Rt.userValue&&($t.value=Rt.userValue),Rt.lastCommittedValue=$t.value,Rt.commitKey=1,Rt.focused=!0}),X.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const $t={value(Gt){Rt.userValue=Gt.detail.value??"",j.setValue(k,{value:Rt.userValue.toString()}),Gt.target.value=Rt.userValue},formattedValue(Gt){const{formattedValue:Kt}=Gt.detail;Rt.formattedValue=Kt,Kt!=null&&Gt.target!==document.activeElement&&(Gt.target.value=Kt),j.setValue(k,{formattedValue:Kt})},selRange(Gt){Gt.target.setSelectionRange(...Gt.detail.selRange)},charLimit:Gt=>{var Zt;const{charLimit:Kt}=Gt.detail,{target:Jt}=Gt;if(Kt===0){Jt.removeAttribute("maxLength");return}Jt.setAttribute("maxLength",Kt);let te=Rt.userValue;!te||te.length<=Kt||(te=te.slice(0,Kt),Jt.value=Rt.userValue=te,j.setValue(k,{value:te}),(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:te,willCommit:!0,commitKey:1,selStart:Jt.selectionStart,selEnd:Jt.selectionEnd}}))}};this._dispatchEventFromSandbox($t,jt)}),X.addEventListener("keydown",jt=>{var Kt;Rt.commitKey=1;let $t=-1;if(jt.key==="Escape"?$t=0:jt.key==="Enter"&&!this.data.multiLine?$t=2:jt.key==="Tab"&&(Rt.commitKey=3),$t===-1)return;const{value:Gt}=jt.target;Rt.lastCommittedValue!==Gt&&(Rt.lastCommittedValue=Gt,Rt.userValue=Gt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Gt,willCommit:!0,commitKey:$t,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Lt=Ht;Ht=null,X.addEventListener("blur",jt=>{var Gt;if(!Rt.focused||!jt.relatedTarget)return;Rt.focused=!1;const{value:$t}=jt.target;Rt.userValue=$t,Rt.lastCommittedValue!==$t&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:$t,willCommit:!0,commitKey:Rt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Lt(jt)}),(pt=this.data.actions)!=null&&pt.Keystroke&&X.addEventListener("beforeinput",jt=>{var ie;Rt.lastCommittedValue=null;const{data:$t,target:Gt}=jt,{value:Kt,selectionStart:Jt,selectionEnd:te}=Gt;let Zt=Jt,ne=te;switch(jt.inputType){case"deleteWordBackward":{const re=Kt.substring(0,Jt).match(/\w*[^\w]*$/);re&&(Zt-=re[0].length);break}case"deleteWordForward":{const re=Kt.substring(Jt).match(/^[^\w]*\w*/);re&&(ne+=re[0].length);break}case"deleteContentBackward":Jt===te&&(Zt-=1);break;case"deleteContentForward":Jt===te&&(ne+=1);break}jt.preventDefault(),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Kt,change:$t||"",willCommit:!1,selStart:Zt,selEnd:ne}})}),this._setEventListeners(X,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(Ht&&X.addEventListener("blur",Ht),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/Ot;X.classList.add("comb"),X.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else X=document.createElement("div"),X.textContent=this.data.fieldValue,X.style.verticalAlign="middle",X.style.display="table-cell";return this._setTextStyle(X),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class M extends h{constructor(j){super(j,{isRenderable:!!j.data.hasOwnCanvas})}}class x extends h{constructor(j){super(j,{isRenderable:j.renderForms})}render(){const j=this.annotationStorage,k=this.data,X=k.id;let ht=j.getValue(X,{value:k.exportValue===k.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",j.setValue(X,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pt=document.createElement("input");return w.add(pt),pt.setAttribute("data-element-id",X),pt.disabled=k.readOnly,this._setRequired(pt,this.data.required),pt.type="checkbox",pt.name=k.fieldName,ht&&pt.setAttribute("checked",!0),pt.setAttribute("exportValue",k.exportValue),pt.tabIndex=E,pt.addEventListener("change",At=>{const{name:Ct,checked:Ot}=At.target;for(const Dt of this._getElementsByName(Ct,X)){const Rt=Ot&&Dt.exportValue===k.exportValue;Dt.domElement&&(Dt.domElement.checked=Rt),j.setValue(Dt.id,{value:Rt})}j.setValue(X,{value:Ot})}),pt.addEventListener("resetform",At=>{const Ct=k.defaultFieldValue||"Off";At.target.checked=Ct===k.exportValue}),this.enableScripting&&this.hasJSActions&&(pt.addEventListener("updatefromsandbox",At=>{const Ct={value(Ot){Ot.target.checked=Ot.detail.value!=="Off",j.setValue(X,{value:Ot.target.checked})}};this._dispatchEventFromSandbox(Ct,At)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],At=>At.target.checked)),this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class i extends h{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const j=this.annotationStorage,k=this.data,X=k.id;let ht=j.getValue(X,{value:k.fieldValue===k.buttonValue}).value;typeof ht=="string"&&(ht=ht!==k.buttonValue,j.setValue(X,{value:ht}));const pt=document.createElement("input");if(w.add(pt),pt.setAttribute("data-element-id",X),pt.disabled=k.readOnly,this._setRequired(pt,this.data.required),pt.type="radio",pt.name=k.fieldName,ht&&pt.setAttribute("checked",!0),pt.tabIndex=E,pt.addEventListener("change",At=>{const{name:Ct,checked:Ot}=At.target;for(const Dt of this._getElementsByName(Ct,X))j.setValue(Dt.id,{value:!1});j.setValue(X,{value:Ot})}),pt.addEventListener("resetform",At=>{const Ct=k.defaultFieldValue;At.target.checked=Ct!=null&&Ct===k.buttonValue}),this.enableScripting&&this.hasJSActions){const At=k.buttonValue;pt.addEventListener("updatefromsandbox",Ct=>{const Ot={value:Dt=>{const Rt=At===Dt.detail.value;for(const Ht of this._getElementsByName(Dt.target.name)){const Lt=Rt&&Ht.id===X;Ht.domElement&&(Ht.domElement.checked=Lt),j.setValue(Ht.id,{value:Lt})}}};this._dispatchEventFromSandbox(Ot,Ct)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ct=>Ct.target.checked)}return this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class f extends C{constructor(j){super(j,{ignoreBorder:j.data.hasAppearance})}render(){const j=super.render();j.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(j.title=this.data.alternativeText);const k=j.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({},X)})),j}}class c extends h{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const j=this.annotationStorage,k=this.data.id,X=j.getValue(k,{value:this.data.fieldValue}),ht=document.createElement("select");w.add(ht),ht.setAttribute("data-element-id",k),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=E;let pt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Rt=>{const Ht=this.data.defaultFieldValue;for(const Lt of ht.options)Lt.selected=Lt.value===Ht});for(const Rt of this.data.options){const Ht=document.createElement("option");Ht.textContent=Rt.displayValue,Ht.value=Rt.exportValue,X.value.includes(Rt.exportValue)&&(Ht.setAttribute("selected",!0),pt=!1),ht.append(Ht)}let At=null;if(pt){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),ht.prepend(Rt),At=()=>{Rt.remove(),ht.removeEventListener("input",At),At=null},ht.addEventListener("input",At)}const Ct=Rt=>{const Ht=Rt?"value":"textContent",{options:Lt,multiple:jt}=ht;return jt?Array.prototype.filter.call(Lt,$t=>$t.selected).map($t=>$t[Ht]):Lt.selectedIndex===-1?null:Lt[Lt.selectedIndex][Ht]};let Ot=Ct(!1);const Dt=Rt=>{const Ht=Rt.target.options;return Array.prototype.map.call(Ht,Lt=>({displayValue:Lt.textContent,exportValue:Lt.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Rt=>{const Ht={value(Lt){At==null||At();const jt=Lt.detail.value,$t=new Set(Array.isArray(jt)?jt:[jt]);for(const Gt of ht.options)Gt.selected=$t.has(Gt.value);j.setValue(k,{value:Ct(!0)}),Ot=Ct(!1)},multipleSelection(Lt){ht.multiple=!0},remove(Lt){const jt=ht.options,$t=Lt.detail.remove;jt[$t].selected=!1,ht.remove($t),jt.length>0&&Array.prototype.findIndex.call(jt,Kt=>Kt.selected)===-1&&(jt[0].selected=!0),j.setValue(k,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},clear(Lt){for(;ht.length!==0;)ht.remove(0);j.setValue(k,{value:null,items:[]}),Ot=Ct(!1)},insert(Lt){const{index:jt,displayValue:$t,exportValue:Gt}=Lt.detail.insert,Kt=ht.children[jt],Jt=document.createElement("option");Jt.textContent=$t,Jt.value=Gt,Kt?Kt.before(Jt):ht.append(Jt),j.setValue(k,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},items(Lt){const{items:jt}=Lt.detail;for(;ht.length!==0;)ht.remove(0);for(const $t of jt){const{displayValue:Gt,exportValue:Kt}=$t,Jt=document.createElement("option");Jt.textContent=Gt,Jt.value=Kt,ht.append(Jt)}ht.options.length>0&&(ht.options[0].selected=!0),j.setValue(k,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},indices(Lt){const jt=new Set(Lt.detail.indices);for(const $t of Lt.target.options)$t.selected=jt.has($t.index);j.setValue(k,{value:Ct(!0)}),Ot=Ct(!1)},editable(Lt){Lt.target.disabled=!Lt.detail.editable}};this._dispatchEventFromSandbox(Ht,Rt)}),ht.addEventListener("input",Rt=>{var Lt;const Ht=Ct(!0);j.setValue(k,{value:Ht}),Rt.preventDefault(),(Lt=this.linkService.eventBus)==null||Lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ot,changeEx:Ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):ht.addEventListener("input",function(Rt){j.setValue(k,{value:Ct(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class d extends m{constructor(j){const{data:k,elements:X}=j;super(j,{isRenderable:m._hasPopupData(k)}),this.elements=X}render(){this.container.classList.add("popupAnnotation");const j=new g({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),k=[];for(const X of this.elements)X.popup=j,k.push(X.data.id),X.addHighlightArea();return this.container.setAttribute("aria-controls",k.map(X=>`${e.AnnotationPrefix}${X}`).join(",")),this.container}}class g{constructor({container:j,color:k,elements:X,titleObj:ht,modificationDate:pt,contentsObj:At,richText:Ct,parent:Ot,rect:Dt,parentRect:Rt,open:Ht}){ot(this,Pt);ot(this,rt,null);ot(this,ut,Q(this,Pt,Ln).bind(this));ot(this,ft,Q(this,Pt,rn).bind(this));ot(this,yt,Q(this,Pt,sn).bind(this));ot(this,bt,Q(this,Pt,Te).bind(this));ot(this,vt,null);ot(this,Z,null);ot(this,tt,null);ot(this,P,null);ot(this,W,null);ot(this,J,null);ot(this,at,!1);ot(this,gt,null);ot(this,xt,null);ot(this,Et,null);ot(this,et,null);ot(this,Tt,!1);var jt;ct(this,Z,j),ct(this,et,ht),ct(this,tt,At),ct(this,Et,Ct),ct(this,W,Ot),ct(this,vt,k),ct(this,xt,Dt),ct(this,J,Rt),ct(this,P,X);const Lt=a.PDFDateString.toDateObject(pt);Lt&&ct(this,rt,Ot.l10n.get("annotation_date_string",{date:Lt.toLocaleDateString(),time:Lt.toLocaleTimeString()})),this.trigger=X.flatMap($t=>$t.getElementsToTriggerPopup());for(const $t of this.trigger)$t.addEventListener("click",s(this,bt)),$t.addEventListener("mouseenter",s(this,yt)),$t.addEventListener("mouseleave",s(this,ft)),$t.classList.add("popupTriggerArea");for(const $t of X)(jt=$t.container)==null||jt.addEventListener("keydown",s(this,ut));s(this,Z).hidden=!0,Ht&&Q(this,Pt,Te).call(this)}render(){if(s(this,gt))return;const{page:{view:j},viewport:{rawDims:{pageWidth:k,pageHeight:X,pageX:ht,pageY:pt}}}=s(this,W),At=ct(this,gt,document.createElement("div"));if(At.className="popup",s(this,vt)){const Zt=At.style.outlineColor=e.Util.makeHexColor(...s(this,vt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?At.style.backgroundColor=`color-mix(in srgb, ${Zt} 30%, white)`:At.style.backgroundColor=e.Util.makeHexColor(...s(this,vt).map(ie=>Math.floor(.7*(255-ie)+ie)))}const Ct=document.createElement("span");Ct.className="header";const Ot=document.createElement("h1");if(Ct.append(Ot),{dir:Ot.dir,str:Ot.textContent}=s(this,et),At.append(Ct),s(this,rt)){const Zt=document.createElement("span");Zt.classList.add("popupDate"),s(this,rt).then(ne=>{Zt.textContent=ne}),Ct.append(Zt)}const Dt=s(this,tt),Rt=s(this,Et);if(Rt!=null&&Rt.str&&(!(Dt!=null&&Dt.str)||Dt.str===Rt.str))S.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:At}),At.lastChild.classList.add("richText","popupContent");else{const Zt=this._formatContents(Dt);At.append(Zt)}let Ht=!!s(this,J),Lt=Ht?s(this,J):s(this,xt);for(const Zt of s(this,P))if(!Lt||e.Util.intersect(Zt.data.rect,Lt)!==null){Lt=Zt.data.rect,Ht=!0;break}const jt=e.Util.normalizeRect([Lt[0],j[3]-Lt[1]+j[1],Lt[2],j[3]-Lt[3]+j[1]]),Gt=Ht?Lt[2]-Lt[0]+5:0,Kt=jt[0]+Gt,Jt=jt[1],{style:te}=s(this,Z);te.left=`${100*(Kt-ht)/k}%`,te.top=`${100*(Jt-pt)/X}%`,s(this,Z).append(At)}_formatContents({str:j,dir:k}){const X=document.createElement("p");X.classList.add("popupContent"),X.dir=k;const ht=j.split(/(?:\r\n?|\n)/);for(let pt=0,At=ht.length;pt<At;++pt){const Ct=ht[pt];X.append(document.createTextNode(Ct)),pt<At-1&&X.append(document.createElement("br"))}return X}forceHide(){ct(this,Tt,this.isVisible),s(this,Tt)&&(s(this,Z).hidden=!0)}maybeShow(){s(this,Tt)&&(ct(this,Tt,!1),s(this,Z).hidden=!1)}get isVisible(){return s(this,Z).hidden===!1}}rt=new WeakMap,ut=new WeakMap,ft=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,Z=new WeakMap,tt=new WeakMap,P=new WeakMap,W=new WeakMap,J=new WeakMap,at=new WeakMap,gt=new WeakMap,xt=new WeakMap,Et=new WeakMap,et=new WeakMap,Tt=new WeakMap,Pt=new WeakSet,Ln=function(j){j.altKey||j.shiftKey||j.ctrlKey||j.metaKey||(j.key==="Enter"||j.key==="Escape"&&s(this,at))&&Q(this,Pt,Te).call(this)},Te=function(){ct(this,at,!s(this,at)),s(this,at)?(Q(this,Pt,sn).call(this),s(this,Z).addEventListener("click",s(this,bt)),s(this,Z).addEventListener("keydown",s(this,ut))):(Q(this,Pt,rn).call(this),s(this,Z).removeEventListener("click",s(this,bt)),s(this,Z).removeEventListener("keydown",s(this,ut)))},sn=function(){s(this,gt)||this.render(),this.isVisible?s(this,at)&&s(this,Z).classList.add("focused"):(s(this,Z).hidden=!1,s(this,Z).style.zIndex=parseInt(s(this,Z).style.zIndex)+1e3)},rn=function(){s(this,Z).classList.remove("focused"),!(s(this,at)||!this.isVisible)&&(s(this,Z).hidden=!0,s(this,Z).style.zIndex=parseInt(s(this,Z).style.zIndex)-1e3)};class N extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0}),this.textContent=j.data.textContent,this.textPosition=j.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const j=document.createElement("div");j.classList.add("annotationTextContent"),j.setAttribute("role","comment");for(const k of this.textContent){const X=document.createElement("span");X.textContent=k,j.append(X)}this.container.append(j)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=N;class l extends m{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});ot(this,Nt,null)}render(){this.container.classList.add("lineAnnotation");const k=this.data,{width:X,height:ht}=D(k.rect),pt=this.svgFactory.create(X,ht,!0),At=ct(this,Nt,this.svgFactory.createElement("svg:line"));return At.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),At.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),At.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),At.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),At.setAttribute("stroke-width",k.borderStyle.width||1),At.setAttribute("stroke","transparent"),At.setAttribute("fill","transparent"),pt.append(At),this.container.append(pt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nt=new WeakMap;class T extends m{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});ot(this,zt,null)}render(){this.container.classList.add("squareAnnotation");const k=this.data,{width:X,height:ht}=D(k.rect),pt=this.svgFactory.create(X,ht,!0),At=k.borderStyle.width,Ct=ct(this,zt,this.svgFactory.createElement("svg:rect"));return Ct.setAttribute("x",At/2),Ct.setAttribute("y",At/2),Ct.setAttribute("width",X-At),Ct.setAttribute("height",ht-At),Ct.setAttribute("stroke-width",At||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class O extends m{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});ot(this,Yt,null)}render(){this.container.classList.add("circleAnnotation");const k=this.data,{width:X,height:ht}=D(k.rect),pt=this.svgFactory.create(X,ht,!0),At=k.borderStyle.width,Ct=ct(this,Yt,this.svgFactory.createElement("svg:ellipse"));return Ct.setAttribute("cx",X/2),Ct.setAttribute("cy",ht/2),Ct.setAttribute("rx",X/2-At/2),Ct.setAttribute("ry",ht/2-At/2),Ct.setAttribute("stroke-width",At||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yt=new WeakMap;class nt extends m{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});ot(this,St,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:X,height:ht}=D(k.rect),pt=this.svgFactory.create(X,ht,!0);let At=[];for(const Ot of k.vertices){const Dt=Ot.x-k.rect[0],Rt=k.rect[3]-Ot.y;At.push(Dt+","+Rt)}At=At.join(" ");const Ct=ct(this,St,this.svgFactory.createElement(this.svgElementName));return Ct.setAttribute("points",At),Ct.setAttribute("stroke-width",k.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,St)}addHighlightArea(){this.container.classList.add("highlightArea")}}St=new WeakMap;class G extends nt{constructor(j){super(j),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class z extends m{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});ot(this,lt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:X,height:ht}=D(k.rect),pt=this.svgFactory.create(X,ht,!0);for(const At of k.inkLists){let Ct=[];for(const Dt of At){const Rt=Dt.x-k.rect[0],Ht=k.rect[3]-Dt.y;Ct.push(`${Rt},${Ht}`)}Ct=Ct.join(" ");const Ot=this.svgFactory.createElement(this.svgElementName);s(this,lt).push(Ot),Ot.setAttribute("points",Ct),Ot.setAttribute("stroke-width",k.borderStyle.width||1),Ot.setAttribute("stroke","transparent"),Ot.setAttribute("fill","transparent"),!k.popupRef&&this.hasPopupData&&this._createPopup(),pt.append(Ot)}return this.container.append(pt),this.container}getElementsToTriggerPopup(){return s(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap,t.InkAnnotationElement=z;class it extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class I extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class V extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class st extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class R extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=R;class r extends m{constructor(k){var pt;super(k,{isRenderable:!0});ot(this,Mt);ot(this,dt,null);const{filename:X,content:ht}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(X,!0),this.content=ht,(pt=this.linkService.eventBus)==null||pt.dispatch("fileattachmentannotation",{source:this,filename:X,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:k,data:X}=this;let ht;X.hasAppearance||X.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(X.name)?"paperclip":"pushpin"}.svg`,X.fillAlpha&&X.fillAlpha<1&&(ht.style=`filter: opacity(${Math.round(X.fillAlpha*100)}%);`)),ht.addEventListener("dblclick",Q(this,Mt,an).bind(this)),ct(this,dt,ht);const{isMac:pt}=e.FeatureTest.platform;return k.addEventListener("keydown",At=>{At.key==="Enter"&&(pt?At.metaKey:At.ctrlKey)&&Q(this,Mt,an).call(this)}),!X.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),k.append(ht),k}getElementsToTriggerPopup(){return s(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap,Mt=new WeakSet,an=function(){var k;(k=this.downloadManager)==null||k.openOrDownloadData(this.container,this.content,this.filename)};class o{constructor({div:j,accessibilityManager:k,annotationCanvasMap:X,l10n:ht,page:pt,viewport:At}){ot(this,wt);ot(this,Vt,null);ot(this,H,null);ot(this,mt,new Map);this.div=j,ct(this,Vt,k),ct(this,H,X),this.l10n=ht,this.page=pt,this.viewport=At,this.zIndex=0,this.l10n||(this.l10n=q.NullL10n)}async render(j){const{annotations:k}=j,X=this.div;(0,a.setLayerDimensions)(X,this.viewport);const ht=new Map,pt={data:null,layer:X,linkService:j.linkService,downloadManager:j.downloadManager,imageResourcesPath:j.imageResourcesPath||"",renderForms:j.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:j.annotationStorage||new L.AnnotationStorage,enableScripting:j.enableScripting===!0,hasJSActions:j.hasJSActions,fieldObjects:j.fieldObjects,parent:this,elements:null};for(const At of k){if(At.noHTML)continue;const Ct=At.annotationType===e.AnnotationType.POPUP;if(Ct){const Rt=ht.get(At.id);if(!Rt)continue;pt.elements=Rt}else{const{width:Rt,height:Ht}=D(At.rect);if(Rt<=0||Ht<=0)continue}pt.data=At;const Ot=y.create(pt);if(!Ot.isRenderable)continue;if(!Ct&&At.popupRef){const Rt=ht.get(At.popupRef);Rt?Rt.push(Ot):ht.set(At.popupRef,[Ot])}Ot.annotationEditorType>0&&s(this,mt).set(Ot.data.id,Ot);const Dt=Ot.render();At.hidden&&(Dt.style.visibility="hidden"),Q(this,wt,In).call(this,Dt,At.id)}Q(this,wt,on).call(this),await this.l10n.translate(X)}update({viewport:j}){const k=this.div;this.viewport=j,(0,a.setLayerDimensions)(k,{rotation:j.rotation}),Q(this,wt,on).call(this),k.hidden=!1}getEditableAnnotations(){return Array.from(s(this,mt).values())}getEditableAnnotation(j){return s(this,mt).get(j)}}Vt=new WeakMap,H=new WeakMap,mt=new WeakMap,wt=new WeakSet,In=function(j,k){var ht;const X=j.firstChild||j;X.id=`${e.AnnotationPrefix}${k}`,this.div.append(j),(ht=s(this,Vt))==null||ht.moveElementInDOM(this.div,j,X,!1)},on=function(){if(!s(this,H))return;const j=this.div;for(const[k,X]of s(this,H)){const ht=j.querySelector(`[data-annotation-id="${k}"]`);if(!ht)continue;const{firstChild:pt}=ht;pt?pt.nodeName==="CANVAS"?pt.replaceWith(X):pt.before(X):ht.append(X)}s(this,H).clear()},t.AnnotationLayer=o},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function u(L){return Math.floor(Math.max(0,Math.min(1,L))*255).toString(16).padStart(2,"0")}function e(L){return Math.max(0,Math.min(255,255*L))}class a{static CMYK_G([F,q,S,E]){return["G",1-Math.min(1,.3*F+.59*S+.11*q+E)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_rgb([F]){return F=e(F),[F,F,F]}static G_HTML([F]){const q=u(F);return`#${q}${q}${q}`}static RGB_G([F,q,S]){return["G",.3*F+.59*q+.11*S]}static RGB_rgb(F){return F.map(e)}static RGB_HTML(F){return`#${F.map(u).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([F,q,S,E]){return["RGB",1-Math.min(1,F+E),1-Math.min(1,S+E),1-Math.min(1,q+E)]}static CMYK_rgb([F,q,S,E]){return[e(1-Math.min(1,F+E)),e(1-Math.min(1,S+E)),e(1-Math.min(1,q+E))]}static CMYK_HTML(F){const q=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([F,q,S]){const E=1-F,p=1-q,w=1-S,D=Math.min(E,p,w);return["CMYK",E,p,w,D]}}t.ColorConverters=a},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=e;const u={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};u.print_progress_percent="{{progress}}%";function e(F,q){switch(F){case"find_match_count":F=`find_match_count[${q.total===1?"one":"other"}]`;break;case"find_match_count_limit":F=`find_match_count_limit[${q.limit===1?"one":"other"}]`;break}return u[F]||""}function a(F,q){return q?F.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(S,E)=>E in q?q[E]:"{{"+E+"}}"):F}const L={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(F,q=null,S=e(F,q)){return a(S,q)},async translate(F){}};t.NullL10n=L},(n,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=u(25);class a{static setupStorage(F,q,S,E,p){const w=E.getValue(q,{value:null});switch(S.name){case"textarea":if(w.value!==null&&(F.textContent=w.value),p==="print")break;F.addEventListener("input",D=>{E.setValue(q,{value:D.target.value})});break;case"input":if(S.attributes.type==="radio"||S.attributes.type==="checkbox"){if(w.value===S.attributes.xfaOn?F.setAttribute("checked",!0):w.value===S.attributes.xfaOff&&F.removeAttribute("checked"),p==="print")break;F.addEventListener("change",D=>{E.setValue(q,{value:D.target.checked?D.target.getAttribute("xfaOn"):D.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&F.setAttribute("value",w.value),p==="print")break;F.addEventListener("input",D=>{E.setValue(q,{value:D.target.value})})}break;case"select":if(w.value!==null){F.setAttribute("value",w.value);for(const D of S.children)D.attributes.value===w.value?D.attributes.selected=!0:D.attributes.hasOwnProperty("selected")&&delete D.attributes.selected}F.addEventListener("input",D=>{const y=D.target.options,m=y.selectedIndex===-1?"":y[y.selectedIndex].value;E.setValue(q,{value:m})});break}}static setAttributes({html:F,element:q,storage:S=null,intent:E,linkService:p}){const{attributes:w}=q,D=F instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${E}`);for(const[y,m]of Object.entries(w))if(m!=null)switch(y){case"class":m.length&&F.setAttribute(y,m.join(" "));break;case"dataId":break;case"id":F.setAttribute("data-element-id",m);break;case"style":Object.assign(F.style,m);break;case"textContent":F.textContent=m;break;default:(!D||y!=="href"&&y!=="newWindow")&&F.setAttribute(y,m)}D&&p.addLinkAttributes(F,w.href,w.newWindow),S&&w.dataId&&this.setupStorage(F,w.dataId,q,S)}static render(F){var C;const q=F.annotationStorage,S=F.linkService,E=F.xfaHtml,p=F.intent||"display",w=document.createElement(E.name);E.attributes&&this.setAttributes({html:w,element:E,intent:p,linkService:S});const D=[[E,-1,w]],y=F.div;if(y.append(w),F.viewport){const b=`matrix(${F.viewport.transform.join(",")})`;y.style.transform=b}p!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const m=[];for(;D.length>0;){const[b,h,v]=D.at(-1);if(h+1===b.children.length){D.pop();continue}const M=b.children[++D.at(-1)[1]];if(M===null)continue;const{name:x}=M;if(x==="#text"){const f=document.createTextNode(M.value);m.push(f),v.append(f);continue}const i=(C=M==null?void 0:M.attributes)!=null&&C.xmlns?document.createElementNS(M.attributes.xmlns,x):document.createElement(x);if(v.append(i),M.attributes&&this.setAttributes({html:i,element:M,storage:q,intent:p,linkService:S}),M.children&&M.children.length>0)D.push([M,-1,i]);else if(M.value){const f=document.createTextNode(M.value);e.XfaText.shouldBuildText(x)&&m.push(f),i.append(f)}}for(const b of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:m}}static update(F){const q=`matrix(${F.viewport.transform.join(",")})`;F.div.style.transform=q,F.div.hidden=!1}}t.XfaLayer=a},(n,t,u)=>{var E,p,w,D,y,m,C,b,h,v,M,x,i,f,c,On,Nn,jn,Bn,ln,Un,cn,$n,Wn,Hn,zn,Gn,se,dn,we,Re,de,un,ke,U,Vn,hn,qn,Xn,pn,Me,ue;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var e=u(1),a=u(4),L=u(29),F=u(6),q=u(5);const vt=class vt extends a.AnnotationEditor{constructor(P){super({...P,name:"inkEditor"});ot(this,c);ot(this,E,0);ot(this,p,0);ot(this,w,this.canvasPointermove.bind(this));ot(this,D,this.canvasPointerleave.bind(this));ot(this,y,this.canvasPointerup.bind(this));ot(this,m,this.canvasPointerdown.bind(this));ot(this,C,new Path2D);ot(this,b,!1);ot(this,h,!1);ot(this,v,!1);ot(this,M,null);ot(this,x,0);ot(this,i,0);ot(this,f,null);this.color=P.color||null,this.thickness=P.thickness||null,this.opacity=P.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(P){a.AnnotationEditor.initialize(P,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(P,W){switch(P){case e.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=W;break;case e.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=W;break;case e.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=W/100;break}}updateParams(P,W){switch(P){case e.AnnotationEditorParamsType.INK_THICKNESS:Q(this,c,On).call(this,W);break;case e.AnnotationEditorParamsType.INK_COLOR:Q(this,c,Nn).call(this,W);break;case e.AnnotationEditorParamsType.INK_OPACITY:Q(this,c,jn).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||a.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Q(this,c,we).call(this),Q(this,c,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),Q(this,c,de).call(this)),Q(this,c,ue).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,s(this,M).disconnect(),ct(this,M,null),super.remove())}setParent(P){!this.parent&&P?this._uiManager.removeShouldRescale(this):this.parent&&P===null&&this._uiManager.addShouldRescale(this),super.setParent(P)}onScaleChanging(){const[P,W]=this.parentDimensions,J=this.width*P,at=this.height*W;this.setDimensions(J,at)}enableEditMode(){s(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",s(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",s(this,m)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){s(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ct(this,b,!0),this.div.classList.add("disabled"),Q(this,c,ue).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(P){this._focusEventsAllowed&&(super.focusin(P),this.enableEditMode())}canvasPointerdown(P){P.button!==0||!this.isInEditMode()||s(this,b)||(this.setInForeground(),P.preventDefault(),P.type!=="mouse"&&this.div.focus(),Q(this,c,Un).call(this,P.offsetX,P.offsetY))}canvasPointermove(P){P.preventDefault(),Q(this,c,cn).call(this,P.offsetX,P.offsetY)}canvasPointerup(P){P.preventDefault(),Q(this,c,dn).call(this,P)}canvasPointerleave(P){Q(this,c,dn).call(this,P)}get isResizable(){return!this.isEmpty()&&s(this,b)}render(){if(this.div)return this.div;let P,W;this.width&&(P=this.x,W=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Et=>{var et;return(et=this.div)==null?void 0:et.setAttribute("aria-label",Et)});const[J,at,gt,xt]=Q(this,c,Bn).call(this);if(this.setAt(J,at,0,0),this.setDims(gt,xt),Q(this,c,we).call(this),this.width){const[Et,et]=this.parentDimensions;this.setAspectRatio(this.width*Et,this.height*et),this.setAt(P*Et,W*et,this.width*Et,this.height*et),ct(this,v,!0),Q(this,c,de).call(this),this.setDims(this.width*Et,this.height*et),Q(this,c,se).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Q(this,c,Re).call(this),this.div}setDimensions(P,W){const J=Math.round(P),at=Math.round(W);if(s(this,x)===J&&s(this,i)===at)return;ct(this,x,J),ct(this,i,at),this.canvas.style.visibility="hidden";const[gt,xt]=this.parentDimensions;this.width=P/gt,this.height=W/xt,this.fixAndSetPosition(),s(this,b)&&Q(this,c,un).call(this,P,W),Q(this,c,de).call(this),Q(this,c,se).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(P,W,J){var Nt,zt,Yt;if(P instanceof L.InkAnnotationElement)return null;const at=super.deserialize(P,W,J);at.thickness=P.thickness,at.color=e.Util.makeHexColor(...P.color),at.opacity=P.opacity;const[gt,xt]=at.pageDimensions,Et=at.width*gt,et=at.height*xt,Tt=at.parentScale,Pt=P.thickness/2;ct(at,b,!0),ct(at,x,Math.round(Et)),ct(at,i,Math.round(et));const{paths:Wt,rect:Ut,rotation:qt}=P;for(let{bezier:St}of Wt){St=Q(Nt=vt,U,qn).call(Nt,St,Ut,qt);const lt=[];at.paths.push(lt);let dt=Tt*(St[0]-Pt),Mt=Tt*(St[1]-Pt);for(let Vt=2,H=St.length;Vt<H;Vt+=6){const mt=Tt*(St[Vt]-Pt),wt=Tt*(St[Vt+1]-Pt),It=Tt*(St[Vt+2]-Pt),Bt=Tt*(St[Vt+3]-Pt),kt=Tt*(St[Vt+4]-Pt),j=Tt*(St[Vt+5]-Pt);lt.push([[dt,Mt],[mt,wt],[It,Bt],[kt,j]]),dt=kt,Mt=j}const Xt=Q(this,U,Vn).call(this,lt);at.bezierPath2D.push(Xt)}const Ft=Q(zt=at,c,pn).call(zt);return ct(at,p,Math.max(a.AnnotationEditor.MIN_SIZE,Ft[2]-Ft[0])),ct(at,E,Math.max(a.AnnotationEditor.MIN_SIZE,Ft[3]-Ft[1])),Q(Yt=at,c,un).call(Yt,Et,et),at}serialize(){if(this.isEmpty())return null;const P=this.getRect(0,0),W=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:W,thickness:this.thickness,opacity:this.opacity,paths:Q(this,c,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,P),pageIndex:this.pageIndex,rect:P,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};E=new WeakMap,p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakMap,v=new WeakMap,M=new WeakMap,x=new WeakMap,i=new WeakMap,f=new WeakMap,c=new WeakSet,On=function(P){const W=this.thickness;this.addCommands({cmd:()=>{this.thickness=P,Q(this,c,ue).call(this)},undo:()=>{this.thickness=W,Q(this,c,ue).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(P){const W=this.color;this.addCommands({cmd:()=>{this.color=P,Q(this,c,se).call(this)},undo:()=>{this.color=W,Q(this,c,se).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jn=function(P){P/=100;const W=this.opacity;this.addCommands({cmd:()=>{this.opacity=P,Q(this,c,se).call(this)},undo:()=>{this.opacity=W,Q(this,c,se).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bn=function(){const{parentRotation:P,parentDimensions:[W,J]}=this;switch(P){case 90:return[0,J,J,W];case 180:return[W,J,W,J];case 270:return[W,0,J,W];default:return[0,0,W,J]}},ln=function(){const{ctx:P,color:W,opacity:J,thickness:at,parentScale:gt,scaleFactor:xt}=this;P.lineWidth=at*gt/xt,P.lineCap="round",P.lineJoin="round",P.miterLimit=10,P.strokeStyle=`${W}${(0,q.opacityToHex)(J)}`},Un=function(P,W){this.canvas.addEventListener("contextmenu",F.noContextMenu),this.canvas.addEventListener("pointerleave",s(this,D)),this.canvas.addEventListener("pointermove",s(this,w)),this.canvas.addEventListener("pointerup",s(this,y)),this.canvas.removeEventListener("pointerdown",s(this,m)),this.isEditing=!0,s(this,v)||(ct(this,v,!0),Q(this,c,de).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([P,W]),ct(this,h,!1),Q(this,c,ln).call(this),ct(this,f,()=>{Q(this,c,Hn).call(this),s(this,f)&&window.requestAnimationFrame(s(this,f))}),window.requestAnimationFrame(s(this,f))},cn=function(P,W){const[J,at]=this.currentPath.at(-1);if(this.currentPath.length>1&&P===J&&W===at)return;const gt=this.currentPath;let xt=s(this,C);if(gt.push([P,W]),ct(this,h,!0),gt.length<=2){xt.moveTo(...gt[0]),xt.lineTo(P,W);return}gt.length===3&&(ct(this,C,xt=new Path2D),xt.moveTo(...gt[0])),Q(this,c,zn).call(this,xt,...gt.at(-3),...gt.at(-2),P,W)},$n=function(){if(this.currentPath.length===0)return;const P=this.currentPath.at(-1);s(this,C).lineTo(...P)},Wn=function(P,W){ct(this,f,null),P=Math.min(Math.max(P,0),this.canvas.width),W=Math.min(Math.max(W,0),this.canvas.height),Q(this,c,cn).call(this,P,W),Q(this,c,$n).call(this);let J;if(this.currentPath.length!==1)J=Q(this,c,Gn).call(this);else{const et=[P,W];J=[[et,et.slice(),et.slice(),et]]}const at=s(this,C),gt=this.currentPath;this.currentPath=[],ct(this,C,new Path2D);const xt=()=>{this.allRawPaths.push(gt),this.paths.push(J),this.bezierPath2D.push(at),this.rebuild()},Et=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Q(this,c,we).call(this),Q(this,c,Re).call(this)),Q(this,c,ue).call(this))};this.addCommands({cmd:xt,undo:Et,mustExec:!0})},Hn=function(){if(!s(this,h))return;ct(this,h,!1);const P=Math.ceil(this.thickness*this.parentScale),W=this.currentPath.slice(-3),J=W.map(xt=>xt[0]),at=W.map(xt=>xt[1]);Math.min(...J)-P,Math.max(...J)+P,Math.min(...at)-P,Math.max(...at)+P;const{ctx:gt}=this;gt.save(),gt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const xt of this.bezierPath2D)gt.stroke(xt);gt.stroke(s(this,C)),gt.restore()},zn=function(P,W,J,at,gt,xt,Et){const et=(W+at)/2,Tt=(J+gt)/2,Pt=(at+xt)/2,Wt=(gt+Et)/2;P.bezierCurveTo(et+2*(at-et)/3,Tt+2*(gt-Tt)/3,Pt+2*(at-Pt)/3,Wt+2*(gt-Wt)/3,Pt,Wt)},Gn=function(){const P=this.currentPath;if(P.length<=2)return[[P[0],P[0],P.at(-1),P.at(-1)]];const W=[];let J,[at,gt]=P[0];for(J=1;J<P.length-2;J++){const[Ut,qt]=P[J],[Ft,Nt]=P[J+1],zt=(Ut+Ft)/2,Yt=(qt+Nt)/2,St=[at+2*(Ut-at)/3,gt+2*(qt-gt)/3],lt=[zt+2*(Ut-zt)/3,Yt+2*(qt-Yt)/3];W.push([[at,gt],St,lt,[zt,Yt]]),[at,gt]=[zt,Yt]}const[xt,Et]=P[J],[et,Tt]=P[J+1],Pt=[at+2*(xt-at)/3,gt+2*(Et-gt)/3],Wt=[et+2*(xt-et)/3,Tt+2*(Et-Tt)/3];return W.push([[at,gt],Pt,Wt,[et,Tt]]),W},se=function(){if(this.isEmpty()){Q(this,c,ke).call(this);return}Q(this,c,ln).call(this);const{canvas:P,ctx:W}=this;W.setTransform(1,0,0,1,0,0),W.clearRect(0,0,P.width,P.height),Q(this,c,ke).call(this);for(const J of this.bezierPath2D)W.stroke(J)},dn=function(P){this.canvas.removeEventListener("pointerleave",s(this,D)),this.canvas.removeEventListener("pointermove",s(this,w)),this.canvas.removeEventListener("pointerup",s(this,y)),this.canvas.addEventListener("pointerdown",s(this,m)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",F.noContextMenu)},10),Q(this,c,Wn).call(this,P.offsetX,P.offsetY),this.addToAnnotationStorage(),this.setInBackground()},we=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(P=>{var W;return(W=this.canvas)==null?void 0:W.setAttribute("aria-label",P)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Re=function(){ct(this,M,new ResizeObserver(P=>{const W=P[0].contentRect;W.width&&W.height&&this.setDimensions(W.width,W.height)})),s(this,M).observe(this.div)},de=function(){if(!s(this,v))return;const[P,W]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*P),this.canvas.height=Math.ceil(this.height*W),Q(this,c,ke).call(this)},un=function(P,W){const J=Q(this,c,Me).call(this),at=(P-J)/s(this,p),gt=(W-J)/s(this,E);this.scaleFactor=Math.min(at,gt)},ke=function(){const P=Q(this,c,Me).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+P,this.translationY*this.scaleFactor+P)},U=new WeakSet,Vn=function(P){const W=new Path2D;for(let J=0,at=P.length;J<at;J++){const[gt,xt,Et,et]=P[J];J===0&&W.moveTo(...gt),W.bezierCurveTo(xt[0],xt[1],Et[0],Et[1],et[0],et[1])}return W},hn=function(P,W,J){const[at,gt,xt,Et]=W;switch(J){case 0:for(let et=0,Tt=P.length;et<Tt;et+=2)P[et]+=at,P[et+1]=Et-P[et+1];break;case 90:for(let et=0,Tt=P.length;et<Tt;et+=2){const Pt=P[et];P[et]=P[et+1]+at,P[et+1]=Pt+gt}break;case 180:for(let et=0,Tt=P.length;et<Tt;et+=2)P[et]=xt-P[et],P[et+1]+=gt;break;case 270:for(let et=0,Tt=P.length;et<Tt;et+=2){const Pt=P[et];P[et]=xt-P[et+1],P[et+1]=Et-Pt}break;default:throw new Error("Invalid rotation")}return P},qn=function(P,W,J){const[at,gt,xt,Et]=W;switch(J){case 0:for(let et=0,Tt=P.length;et<Tt;et+=2)P[et]-=at,P[et+1]=Et-P[et+1];break;case 90:for(let et=0,Tt=P.length;et<Tt;et+=2){const Pt=P[et];P[et]=P[et+1]-gt,P[et+1]=Pt-at}break;case 180:for(let et=0,Tt=P.length;et<Tt;et+=2)P[et]=xt-P[et],P[et+1]-=gt;break;case 270:for(let et=0,Tt=P.length;et<Tt;et+=2){const Pt=P[et];P[et]=Et-P[et+1],P[et+1]=xt-Pt}break;default:throw new Error("Invalid rotation")}return P},Xn=function(P,W,J,at){var Tt,Pt;const gt=[],xt=this.thickness/2,Et=P*W+xt,et=P*J+xt;for(const Wt of this.paths){const Ut=[],qt=[];for(let Ft=0,Nt=Wt.length;Ft<Nt;Ft++){const[zt,Yt,St,lt]=Wt[Ft],dt=P*zt[0]+Et,Mt=P*zt[1]+et,Xt=P*Yt[0]+Et,Vt=P*Yt[1]+et,H=P*St[0]+Et,mt=P*St[1]+et,wt=P*lt[0]+Et,It=P*lt[1]+et;Ft===0&&(Ut.push(dt,Mt),qt.push(dt,Mt)),Ut.push(Xt,Vt,H,mt,wt,It),qt.push(Xt,Vt),Ft===Nt-1&&qt.push(wt,It)}gt.push({bezier:Q(Tt=vt,U,hn).call(Tt,Ut,at,this.rotation),points:Q(Pt=vt,U,hn).call(Pt,qt,at,this.rotation)})}return gt},pn=function(){let P=1/0,W=-1/0,J=1/0,at=-1/0;for(const gt of this.paths)for(const[xt,Et,et,Tt]of gt){const Pt=e.Util.bezierBoundingBox(...xt,...Et,...et,...Tt);P=Math.min(P,Pt[0]),J=Math.min(J,Pt[1]),W=Math.max(W,Pt[2]),at=Math.max(at,Pt[3])}return[P,J,W,at]},Me=function(){return s(this,b)?Math.ceil(this.thickness*this.parentScale):0},ue=function(P=!1){if(this.isEmpty())return;if(!s(this,b)){Q(this,c,se).call(this);return}const W=Q(this,c,pn).call(this),J=Q(this,c,Me).call(this);ct(this,p,Math.max(a.AnnotationEditor.MIN_SIZE,W[2]-W[0])),ct(this,E,Math.max(a.AnnotationEditor.MIN_SIZE,W[3]-W[1]));const at=Math.ceil(J+s(this,p)*this.scaleFactor),gt=Math.ceil(J+s(this,E)*this.scaleFactor),[xt,Et]=this.parentDimensions;this.width=at/xt,this.height=gt/Et,this.setAspectRatio(at,gt);const et=this.translationX,Tt=this.translationY;this.translationX=-W[0],this.translationY=-W[1],Q(this,c,de).call(this),Q(this,c,se).call(this),ct(this,x,at),ct(this,i,gt),this.setDims(at,gt);const Pt=P?J/this.scaleFactor/2:0;this.translate(et-this.translationX-Pt,Tt-this.translationY-Pt)},ot(vt,U),Qt(vt,"_defaultColor",null),Qt(vt,"_defaultOpacity",1),Qt(vt,"_defaultThickness",1),Qt(vt,"_type","ink");let S=vt;t.InkEditor=S},(n,t,u)=>{var S,E,p,w,D,y,m,C,b,h,v,ye,_e,Fe,fn,Yn,Kn,gn,De,Jn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var e=u(1),a=u(4),L=u(6),F=u(29);const T=class T extends a.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});ot(this,v);ot(this,S,null);ot(this,E,null);ot(this,p,null);ot(this,w,null);ot(this,D,null);ot(this,y,null);ot(this,m,null);ot(this,C,null);ot(this,b,!1);ot(this,h,!1);ct(this,w,G.bitmapUrl),ct(this,D,G.bitmapFile)}static initialize(G){a.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",G.map(Y=>`image/${Y}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,Y){Y.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,Y;s(this,E)&&(ct(this,S,null),this._uiManager.imageManager.deleteId(s(this,E)),(G=s(this,y))==null||G.remove(),ct(this,y,null),(Y=s(this,m))==null||Y.disconnect(),ct(this,m,null)),super.remove()}rebuild(){if(!this.parent){s(this,E)&&Q(this,v,Fe).call(this);return}super.rebuild(),this.div!==null&&(s(this,E)&&Q(this,v,Fe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(s(this,p)||s(this,S)||s(this,w)||s(this,D))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,Y;if(this.width&&(G=this.x,Y=this.y),super.render(),this.div.hidden=!0,s(this,S)?Q(this,v,fn).call(this):Q(this,v,Fe).call(this),this.width){const[z,it]=this.parentDimensions;this.setAt(G*z,Y*it,this.width*z,this.height*it)}return this.div}static deserialize(G,Y,z){if(G instanceof F.StampAnnotationElement)return null;const it=super.deserialize(G,Y,z),{rect:I,bitmapUrl:V,bitmapId:st,isSvg:R,accessibilityData:r}=G;st&&z.imageManager.isValidId(st)?ct(it,E,st):ct(it,w,V),ct(it,b,R);const[o,A]=it.pageDimensions;return it.width=(I[2]-I[0])/o,it.height=(I[3]-I[1])/A,r&&(it.altTextData=r),it}serialize(G=!1,Y=null){if(this.isEmpty())return null;const z={annotationType:e.AnnotationEditorType.STAMP,bitmapId:s(this,E),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:s(this,b),structTreeParentId:this._structTreeParentId};if(G)return z.bitmapUrl=Q(this,v,De).call(this,!0),z.accessibilityData=this.altTextData,z;const{decorative:it,altText:I}=this.altTextData;if(!it&&I&&(z.accessibilityData={type:"Figure",alt:I}),Y===null)return z;Y.stamps||(Y.stamps=new Map);const V=s(this,b)?(z.rect[2]-z.rect[0])*(z.rect[3]-z.rect[1]):null;if(!Y.stamps.has(s(this,E)))Y.stamps.set(s(this,E),{area:V,serialized:z}),z.bitmap=Q(this,v,De).call(this,!1);else if(s(this,b)){const st=Y.stamps.get(s(this,E));V>st.area&&(st.area=V,st.serialized.bitmap.close(),st.serialized.bitmap=Q(this,v,De).call(this,!1))}return z}};S=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,D=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,h=new WeakMap,v=new WeakSet,ye=function(G,Y=!1){if(!G){this.remove();return}ct(this,S,G.bitmap),Y||(ct(this,E,G.id),ct(this,b,G.isSvg)),Q(this,v,fn).call(this)},_e=function(){ct(this,p,null),this._uiManager.enableWaiting(!1),s(this,y)&&this.div.focus()},Fe=function(){if(s(this,E)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(s(this,E)).then(Y=>Q(this,v,ye).call(this,Y,!0)).finally(()=>Q(this,v,_e).call(this));return}if(s(this,w)){const Y=s(this,w);ct(this,w,null),this._uiManager.enableWaiting(!0),ct(this,p,this._uiManager.imageManager.getFromUrl(Y).then(z=>Q(this,v,ye).call(this,z)).finally(()=>Q(this,v,_e).call(this)));return}if(s(this,D)){const Y=s(this,D);ct(this,D,null),this._uiManager.enableWaiting(!0),ct(this,p,this._uiManager.imageManager.getFromFile(Y).then(z=>Q(this,v,ye).call(this,z)).finally(()=>Q(this,v,_e).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=T.supportedTypesStr,ct(this,p,new Promise(Y=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const z=await this._uiManager.imageManager.getFromFile(G.files[0]);Q(this,v,ye).call(this,z)}Y()}),G.addEventListener("cancel",()=>{this.remove(),Y()})}).finally(()=>Q(this,v,_e).call(this))),G.click()},fn=function(){const{div:G}=this;let{width:Y,height:z}=s(this,S);const[it,I]=this.pageDimensions,V=.75;if(this.width)Y=this.width*it,z=this.height*I;else if(Y>V*it||z>V*I){const o=Math.min(V*it/Y,V*I/z);Y*=o,z*=o}const[st,R]=this.parentDimensions;this.setDims(Y*st/it,z*R/I),this._uiManager.enableWaiting(!1);const r=ct(this,y,document.createElement("canvas"));G.append(r),G.hidden=!1,Q(this,v,gn).call(this,Y,z),Q(this,v,Jn).call(this),s(this,h)||(this.parent.addUndoableEditor(this),ct(this,h,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Yn=function(G,Y){var V;const[z,it]=this.parentDimensions;this.width=G/z,this.height=Y/it,this.setDims(G,Y),(V=this._initialOptions)!=null&&V.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,s(this,C)!==null&&clearTimeout(s(this,C)),ct(this,C,setTimeout(()=>{ct(this,C,null),Q(this,v,gn).call(this,G,Y)},200))},Kn=function(G,Y){const{width:z,height:it}=s(this,S);let I=z,V=it,st=s(this,S);for(;I>2*G||V>2*Y;){const R=I,r=V;I>2*G&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2)),V>2*Y&&(V=V>=16384?Math.floor(V/2)-1:Math.ceil(V/2));const o=new OffscreenCanvas(I,V);o.getContext("2d").drawImage(st,0,0,R,r,0,0,I,V),st=o.transferToImageBitmap()}return st},gn=function(G,Y){G=Math.ceil(G),Y=Math.ceil(Y);const z=s(this,y);if(!z||z.width===G&&z.height===Y)return;z.width=G,z.height=Y;const it=s(this,b)?s(this,S):Q(this,v,Kn).call(this,G,Y),I=z.getContext("2d");I.filter=this._uiManager.hcmFilter,I.drawImage(it,0,0,it.width,it.height,0,0,G,Y)},De=function(G){if(G){if(s(this,b)){const it=this._uiManager.imageManager.getSvgUrl(s(this,E));if(it)return it}const Y=document.createElement("canvas");return{width:Y.width,height:Y.height}=s(this,S),Y.getContext("2d").drawImage(s(this,S),0,0),Y.toDataURL()}if(s(this,b)){const[Y,z]=this.pageDimensions,it=Math.round(this.width*Y*L.PixelsPerInch.PDF_TO_CSS_UNITS),I=Math.round(this.height*z*L.PixelsPerInch.PDF_TO_CSS_UNITS),V=new OffscreenCanvas(it,I);return V.getContext("2d").drawImage(s(this,S),0,0,s(this,S).width,s(this,S).height,0,0,it,I),V.transferToImageBitmap()}return structuredClone(s(this,S))},Jn=function(){ct(this,m,new ResizeObserver(G=>{const Y=G[0].contentRect;Y.width&&Y.height&&Q(this,v,Yn).call(this,Y.width,Y.height)})),s(this,m).observe(this.div)},Qt(T,"_type","stamp");let q=T;t.StampEditor=q}],__webpack_module_cache__={};function __w_pdfjs_require__(n){var t=__webpack_module_cache__[n];if(t!==void 0)return t.exports;var u=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](u,u.exports,__w_pdfjs_require__),u.exports}var __webpack_exports__={};return(()=>{var n=__webpack_exports__;Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return L.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return q.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(n,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(n,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return S.GlobalWorkerOptions}}),Object.defineProperty(n,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return u.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return u.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(n,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return u.build}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return u.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(n,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(n,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(n,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(n,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(n,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return u.version}});var t=__w_pdfjs_require__(1),u=__w_pdfjs_require__(2),e=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),L=__w_pdfjs_require__(27),F=__w_pdfjs_require__(5),q=__w_pdfjs_require__(29),S=__w_pdfjs_require__(14),E=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(n,t,u){if(u||arguments.length===2)for(var e=0,a=t.length,L;e<a;e++)(L||!(e in t))&&(L||(L=Array.prototype.slice.call(t,0,e)),L[e]=t[e]);return n.concat(L||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(n,t){var u={};return allEvents.forEach(function(e){var a=n[e];a&&(t?u[e]=function(L){return a(L,t(e))}:u[e]=a)}),u}function makeCancellablePromise(n){var t=!1,u=new Promise(function(e,a){n.then(function(L){return!t&&e(L)}).catch(function(L){return!t&&a(L)})});return{promise:u,cancel:function(){t=!0}}}var prefix="Invariant failed";function invariant(n,t){if(!n)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(n,t,u){for(u of n.keys())if(dequal(u,t))return u}function dequal(n,t){var u,e,a;if(n===t)return!0;if(n&&t&&(u=n.constructor)===t.constructor){if(u===Date)return n.getTime()===t.getTime();if(u===RegExp)return n.toString()===t.toString();if(u===Array){if((e=n.length)===t.length)for(;e--&&dequal(n[e],t[e]););return e===-1}if(u===Set){if(n.size!==t.size)return!1;for(e of n)if(a=e,a&&typeof a=="object"&&(a=find(t,a),!a)||!t.has(a))return!1;return!0}if(u===Map){if(n.size!==t.size)return!1;for(e of n)if(a=e[0],a&&typeof a=="object"&&(a=find(t,a),!a)||!dequal(e[1],t.get(a)))return!1;return!0}if(u===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(u===DataView){if((e=n.byteLength)===t.byteLength)for(;e--&&n.getInt8(e)===t.getInt8(e););return e===-1}if(ArrayBuffer.isView(n)){if((e=n.byteLength)===t.byteLength)for(;e--&&n[e]===t[e];);return e===-1}if(!u||typeof n=="object"){e=0;for(u in n)if(has.call(n,u)&&++e&&!has.call(t,u)||!(u in t)||!dequal(n[u],t[u]))return!1;return Object.keys(t).length===e}}return n!==n&&t!==t}const DocumentContext=reactExports.createContext(null);function Message({children:n,type:t}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${t}`},n)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(u=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(u):Array.isArray(t)?u(t):t.then(u)}).then(u=>{invariant(Array.isArray(u));const e=u[0];new Promise(a=>{invariant(this.pdfDocument),e instanceof Object?this.pdfDocument.getPageIndex(e).then(L=>{a(L)}).catch(()=>{invariant(!1)}):typeof e=="number"?a(e):invariant(!1)}).then(a=>{const L=a+1;invariant(this.pdfViewer),invariant(L>=1&&L<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:u,pageIndex:a,pageNumber:L})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const u=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:u,pageNumber:t})}addLinkAttributes(t,u,e){t.href=u,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=e?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(n){return typeof n<"u"}function isProvided(n){return isDefined(n)&&n!==null}function isString(n){return typeof n=="string"}function isArrayBuffer(n){return n instanceof ArrayBuffer}function isBlob(n){return invariant(isBrowser),n instanceof Blob}function isDataURI(n){return isString(n)&&/^data:/.test(n)}function dataURItoByteString(n){invariant(isDataURI(n));const[t="",u=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(u):unescape(u)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(n){n&&n.cancel&&n.cancel()}function makePageCallback(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function isCancelException(n){return n.name==="RenderingCancelledException"}function loadFromFile(n){return new Promise((t,u)=>{const e=new FileReader;e.onload=()=>{if(!e.result)return u(new Error("Error while reading a file."));t(e.result)},e.onerror=a=>{if(!a.target)return u(new Error("Error while reading a file."));const{error:L}=a.target;if(!L)return u(new Error("Error while reading a file."));switch(L.code){case L.NOT_FOUND_ERR:return u(new Error("Error while reading a file: File not found."));case L.SECURITY_ERR:return u(new Error("Error while reading a file: Security error."));case L.ABORT_ERR:return u(new Error("Error while reading a file: Aborted."));default:return u(new Error("Error while reading a file."))}},e.readAsArrayBuffer(n)})}function reducer(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const n={};return allEvents.forEach(t=>{n[t]=PropTypes.func}),n})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function n(t,u,e){const{[u]:a,pageNumber:L,pdf:F}=t;if(!isDefined(F))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${u}\` of type \`${typeof a}\` supplied to \`${e}\`, expected \`number\`.`);if(a<0)return new Error(`Expected \`${u}\` to be greater or equal to 0.`);const{numPages:q}=F;if(a+1>q)return new Error(`Expected \`${u}\` to be less or equal to ${q-1}.`)}else if(!isDefined(L))return new Error(`\`${u}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${e}\`.`);return null},isPageNumber=function n(t,u,e){const{[u]:a,pageIndex:L,pdf:F}=t;if(!isDefined(F))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${u}\` of type \`${typeof a}\` supplied to \`${e}\`, expected \`number\`.`);if(a<1)return new Error(`Expected \`${u}\` to be greater or equal to 1.`);const{numPages:q}=F;if(a>q)return new Error(`Expected \`${u}\` to be less or equal to ${q}.`)}else if(!isDefined(L))return new Error(`\`${u}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${e}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(n,t,u,e){function a(L){return L instanceof u?L:new u(function(F){F(L)})}return new(u||(u=Promise))(function(L,F){function q(p){try{E(e.next(p))}catch(w){F(w)}}function S(p){try{E(e.throw(p))}catch(w){F(w)}}function E(p){p.done?L(p.value):a(p.value).then(q,S)}E((e=e.apply(n,t||[])).next())})},__rest$1=function(n,t){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(n);a<e.length;a++)t.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(n,e[a])&&(u[e[a]]=n[e[a]]);return u};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(n,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const u=prompt("Enter the password to open this PDF file.");n(u);break}case PasswordResponses.INCORRECT_PASSWORD:{const u=prompt("Invalid password. Please try again.");n(u);break}}};function isParameterObject(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const Document=reactExports.forwardRef(function n(t,u){var{children:e,className:a,error:L="Failed to load PDF file.",externalLinkRel:F,externalLinkTarget:q,file:S,inputRef:E,imageResourcesPath:p,loading:w="Loading PDF…",noData:D="No PDF file specified.",onItemClick:y,onLoadError:m,onLoadProgress:C,onLoadSuccess:b,onPassword:h=defaultOnPassword,onSourceError:v,onSourceSuccess:M,options:x,renderMode:i,rotate:f}=t,c=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[d,g]=useResolver(),{value:N,error:l}=d,[T,O]=useResolver(),{value:nt,error:G}=T,Y=reactExports.useRef(new LinkService),z=reactExports.useRef([]),it=reactExports.useRef(),I=reactExports.useRef();reactExports.useEffect(()=>{S&&S!==it.current&&isParameterObject(S)&&(warning$1(!dequal(S,it.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),it.current=S)},[S]),reactExports.useEffect(()=>{x&&x!==I.current&&(warning$1(!dequal(x,I.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),I.current=x)},[x]);const V=reactExports.useRef({scrollPageIntoView:Z=>{const{dest:tt,pageNumber:P,pageIndex:W=P-1}=Z;if(y){y({dest:tt,pageIndex:W,pageNumber:P});return}const J=z.current[W];if(J){J.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${P} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(u,()=>({linkService:Y,pages:z,viewer:V}),[]);function st(){M&&M()}function R(){l&&(warning$1(!1,l.toString()),v&&v(l))}function r(){g({type:"RESET"})}reactExports.useEffect(r,[S,g]);const o=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!S)return null;if(typeof S=="string")return isDataURI(S)?{data:dataURItoByteString(S)}:(displayCORSWarning(),{url:S});if(S instanceof PDFDataRangeTransport)return{range:S};if(isArrayBuffer(S))return{data:S};if(isBrowser&&isBlob(S))return{data:yield loadFromFile(S)};if(invariant(typeof S=="object"),invariant(isParameterObject(S)),"url"in S&&typeof S.url=="string"){if(isDataURI(S.url)){const{url:Z}=S,tt=__rest$1(S,["url"]),P=dataURItoByteString(Z);return Object.assign({data:P},tt)}displayCORSWarning()}return S}),[S]);reactExports.useEffect(()=>{const Z=makeCancellablePromise(o());return Z.promise.then(tt=>{g({type:"RESOLVE",value:tt})}).catch(tt=>{g({type:"REJECT",error:tt})}),()=>{cancelRunningTask(Z)}},[o,g]),reactExports.useEffect(()=>{if(!(typeof N>"u")){if(N===!1){R();return}st()}},[N]);function A(){nt&&(b&&b(nt),z.current=new Array(nt.numPages),Y.current.setDocument(nt))}function B(){G&&(warning$1(!1,G.toString()),m&&m(G))}function U(){O({type:"RESET"})}reactExports.useEffect(U,[O,N]);function $(){if(!N)return;const Z=Object.assign(Object.assign({},x),{isEvalSupported:!1}),tt=Object.assign(Object.assign({},N),Z),P=pdfjs.getDocument(tt);C&&(P.onProgress=C),h&&(P.onPassword=h);const W=P;return W.promise.then(J=>{O({type:"RESOLVE",value:J})}).catch(J=>{W.destroyed||O({type:"REJECT",error:J})}),()=>{W.destroy()}}reactExports.useEffect($,[x,O,N]),reactExports.useEffect(()=>{if(!(typeof nt>"u")){if(nt===!1){B();return}A()}},[nt]);function K(){Y.current.setViewer(V.current),Y.current.setExternalLinkRel(F),Y.current.setExternalLinkTarget(q)}reactExports.useEffect(K,[F,q]);function rt(Z,tt){z.current[Z]=tt}function ut(Z){delete z.current[Z]}const ft=reactExports.useMemo(()=>({imageResourcesPath:p,linkService:Y.current,onItemClick:y,pdf:nt,registerPage:rt,renderMode:i,rotate:f,unregisterPage:ut}),[p,y,nt,i,f]),yt=reactExports.useMemo(()=>makeEventProps(c,()=>nt),[c,nt]);function bt(){return React.createElement(DocumentContext.Provider,{value:ft},e)}function vt(){return S?nt==null?React.createElement(Message,{type:"loading"},typeof w=="function"?w():w):nt===!1?React.createElement(Message,{type:"error"},typeof L=="function"?L():L):bt():React.createElement(Message,{type:"no-data"},typeof D=="function"?D():D)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",a),ref:E,style:{"--scale-factor":"1"}},yt),vt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var u=n.filter(Boolean);if(u.length<=1){var e=u[0];return e||null}return function(L){u.forEach(function(F){typeof F=="function"?F(L):F&&(F.current=L)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(n){return n in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(n){return"children"in n}function isStructTreeNodeWithOnlyContentChild(n){return isStructTreeNode(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function getRoleAttributes(n){const t={};if(isStructTreeNode(n)){const{role:u}=n,e=u.match(HEADING_PATTERN);if(e)t.role="heading",t["aria-level"]=Number(e[1]);else if(isPdfRole(u)){const a=PDF_ROLE_TO_HTML_ROLE[u];a&&(t.role=a)}}return t}function getBaseAttributes(n){const t={};if(isStructTreeNode(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),isStructTreeNodeWithOnlyContentChild(n)){const[u]=n.children;if(u){const e=getBaseAttributes(u);return Object.assign(Object.assign({},t),e)}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function getAttributes(n){return n?Object.assign(Object.assign({},getRoleAttributes(n)),getBaseAttributes(n)):null}function StructTreeItem({className:n,node:t}){const u=reactExports.useMemo(()=>getAttributes(t),[t]),e=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((a,L)=>React.createElement(StructTreeItem,{key:L,node:a})),[t]);return React.createElement("span",Object.assign({className:n},u),e)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const n=usePageContext();invariant(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:u}=n,[e,a]=useResolver(),{value:L,error:F}=e,{customTextRenderer:q,page:S}=n;function E(){L&&u&&u(L)}function p(){F&&(warning$1(!1,F.toString()),t&&t(F))}function w(){a({type:"RESET"})}reactExports.useEffect(w,[a,S]);function D(){if(q||!S)return;const y=makeCancellablePromise(S.getStructTree()),m=y;return y.promise.then(C=>{a({type:"RESOLVE",value:C})}).catch(C=>{a({type:"REJECT",error:C})}),()=>cancelRunningTask(m)}return reactExports.useEffect(D,[q,S,a]),reactExports.useEffect(()=>{if(L!==void 0){if(L===!1){p();return}E()}},[L]),L?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:L}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(n){const t=usePageContext();invariant(t);const u=Object.assign(Object.assign({},t),n),{_className:e,canvasBackground:a,devicePixelRatio:L=getDevicePixelRatio(),onRenderError:F,onRenderSuccess:q,page:S,renderForms:E,renderTextLayer:p,rotate:w,scale:D}=u,{canvasRef:y}=n;invariant(S);const m=reactExports.useRef(null);function C(){S&&q&&q(makePageCallback(S,D))}function b(i){isCancelException(i)||(warning$1(!1,i.toString()),F&&F(i))}const h=reactExports.useMemo(()=>S.getViewport({scale:D*L,rotation:w}),[L,S,w,D]),v=reactExports.useMemo(()=>S.getViewport({scale:D,rotation:w}),[S,w,D]);function M(){if(!S)return;S.cleanup();const{current:i}=m;if(!i)return;i.width=h.width,i.height=h.height,i.style.width=`${Math.floor(v.width)}px`,i.style.height=`${Math.floor(v.height)}px`,i.style.visibility="hidden";const f={annotationMode:E?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:i.getContext("2d",{alpha:!1}),viewport:h};a&&(f.background=a);const c=S.render(f),d=c;return c.promise.then(()=>{i.style.visibility="",C()}).catch(b),()=>cancelRunningTask(d)}reactExports.useEffect(M,[a,m,L,S,E,h,v]);const x=reactExports.useCallback(()=>{const{current:i}=m;i&&(i.width=0,i.height=0)},[m]);return reactExports.useEffect(()=>x,[x]),React.createElement("canvas",{className:`${e}__canvas`,dir:"ltr",ref:mergeRefs(y,m),style:{display:"block",userSelect:"none"}},p?React.createElement(StructTree,null):null)}function PageSVG(){const n=usePageContext();invariant(n);const{_className:t,onRenderSuccess:u,onRenderError:e,page:a,rotate:L,scale:F}=n;invariant(a);const[q,S]=useResolver(),{value:E,error:p}=q;function w(){a&&u&&u(makePageCallback(a,F))}function D(){p&&(isCancelException(p)||(warning$1(!1,p.toString()),e&&e(p)))}const y=reactExports.useMemo(()=>a.getViewport({scale:F,rotation:L}),[a,L,F]);function m(){S({type:"RESET"})}reactExports.useEffect(m,[a,S,y]);function C(){if(!a)return;const M=makeCancellablePromise(a.getOperatorList());return M.promise.then(x=>{new pdfjs.SVGGraphics(a.commonObjs,a.objs).getSVG(x,y).then(f=>{if(!(f instanceof SVGElement))throw new Error("getSVG returned unexpected result.");S({type:"RESOLVE",value:f})}).catch(f=>{S({type:"REJECT",error:f})})}).catch(x=>{S({type:"REJECT",error:x})}),()=>cancelRunningTask(M)}reactExports.useEffect(C,[a,S,y]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){D();return}w()}},[E]);function b(M){if(!M||!E)return;M.firstElementChild||M.appendChild(E);const{width:x,height:i}=y;E.setAttribute("width",`${x}`),E.setAttribute("height",`${i}`)}const{width:h,height:v}=y;return React.createElement("div",{className:`${t}__svg`,ref:M=>b(M),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:h,height:v,userSelect:"none"}})}function isTextItem(n){return"str"in n}function TextLayer(){const n=usePageContext();invariant(n);const{customTextRenderer:t,onGetTextError:u,onGetTextSuccess:e,onRenderTextLayerError:a,onRenderTextLayerSuccess:L,page:F,pageIndex:q,pageNumber:S,rotate:E,scale:p}=n;invariant(F);const[w,D]=useResolver(),{value:y,error:m}=w,C=reactExports.useRef(null),b=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function h(){y&&e&&e(y)}function v(){m&&(warning$1(!1,m.toString()),u&&u(m))}function M(){D({type:"RESET"})}reactExports.useEffect(M,[F,D]);function x(){if(!F)return;const l=makeCancellablePromise(F.getTextContent()),T=l;return l.promise.then(O=>{D({type:"RESOLVE",value:O})}).catch(O=>{D({type:"REJECT",error:O})}),()=>cancelRunningTask(T)}reactExports.useEffect(x,[F,D]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){v();return}h()}},[y]);const i=reactExports.useCallback(()=>{L&&L()},[L]),f=reactExports.useCallback(l=>{warning$1(!1,l.toString()),a&&a(l)},[a]);function c(){const l=b.current;l&&l.classList.add("active")}function d(){const l=b.current;l&&l.classList.remove("active")}const g=reactExports.useMemo(()=>F.getViewport({scale:p,rotation:E}),[F,E,p]);function N(){if(!F||!y)return;const{current:l}=C;if(!l)return;l.innerHTML="";const T=F.streamTextContent({includeMarkedContent:!0}),O={container:l,textContentSource:T,viewport:g},nt=pdfjs.renderTextLayer(O),G=nt;return nt.promise.then(()=>{const Y=document.createElement("div");Y.className="endOfContent",l.append(Y),b.current=Y;const z=l.querySelectorAll('[role="presentation"]');if(t){let it=0;y.items.forEach((I,V)=>{if(!isTextItem(I))return;const st=z[it];if(!st)return;const R=t(Object.assign({pageIndex:q,pageNumber:S,itemIndex:V},I));st.innerHTML=R,it+=I.str&&I.hasEOL?2:1})}i()}).catch(f),()=>cancelRunningTask(G)}return reactExports.useLayoutEffect(N,[t,f,i,F,q,S,y,g]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:d,onMouseDown:c,ref:C})}function AnnotationLayer(){const n=useDocumentContext(),t=usePageContext();invariant(t);const u=Object.assign(Object.assign({},n),t),{imageResourcesPath:e,linkService:a,onGetAnnotationsError:L,onGetAnnotationsSuccess:F,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:S,page:E,pdf:p,renderForms:w,rotate:D,scale:y=1}=u;invariant(p),invariant(E),invariant(a);const[m,C]=useResolver(),{value:b,error:h}=m,v=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){b&&F&&F(b)}function x(){h&&(warning$1(!1,h.toString()),L&&L(h))}function i(){C({type:"RESET"})}reactExports.useEffect(i,[C,E]);function f(){if(!E)return;const l=makeCancellablePromise(E.getAnnotations()),T=l;return l.promise.then(O=>{C({type:"RESOLVE",value:O})}).catch(O=>{C({type:"REJECT",error:O})}),()=>{cancelRunningTask(T)}}reactExports.useEffect(f,[C,E,w]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){x();return}M()}},[b]);function c(){S&&S()}function d(l){warning$1(!1,`${l}`),q&&q(l)}const g=reactExports.useMemo(()=>E.getViewport({scale:y,rotation:D}),[E,D,y]);function N(){if(!p||!E||!a||!b)return;const{current:l}=v;if(!l)return;const T=g.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,div:l,l10n:null,page:E,viewport:T},nt={annotations:b,annotationStorage:p.annotationStorage,div:l,downloadManager:null,imageResourcesPath:e,linkService:a,page:E,renderForms:w,viewport:T};l.innerHTML="";try{new pdfjs.AnnotationLayer(O).render(nt),c()}catch(G){d(G)}return()=>{}}return reactExports.useEffect(N,[b,e,a,E,w,g]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:v})}var __rest=function(n,t){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(n);a<e.length;a++)t.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(n,e[a])&&(u[e[a]]=n[e[a]]);return u};const defaultScale=1,Page=function n(t){const u=useDocumentContext(),e=Object.assign(Object.assign({},u),t),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:L=!0,canvasBackground:F,canvasRef:q,children:S,className:E,customRenderer:p,customTextRenderer:w,devicePixelRatio:D,error:y="Failed to load the page.",height:m,inputRef:C,loading:b="Loading page…",noData:h="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:M,onGetStructTreeError:x,onGetStructTreeSuccess:i,onGetTextError:f,onGetTextSuccess:c,onLoadError:d,onLoadSuccess:g,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:l,onRenderError:T,onRenderSuccess:O,onRenderTextLayerError:nt,onRenderTextLayerSuccess:G,pageIndex:Y,pageNumber:z,pdf:it,registerPage:I,renderAnnotationLayer:V=!0,renderForms:st=!1,renderMode:R="canvas",renderTextLayer:r=!0,rotate:o,scale:A=defaultScale,unregisterPage:B,width:U}=e,$=__rest(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[K,rt]=useResolver(),{value:ut,error:ft}=K,yt=reactExports.useRef(null);invariant(it);const bt=isProvided(z)?z-1:Y??null,vt=z??(isProvided(Y)?Y+1:null),Z=o??(ut?ut.rotate:null),tt=reactExports.useMemo(()=>{if(!ut)return null;let Nt=1;const zt=A??defaultScale;if(U||m){const Yt=ut.getViewport({scale:1,rotation:Z});U?Nt=U/Yt.width:m&&(Nt=m/Yt.height)}return zt*Nt},[m,ut,Z,A,U]);function P(){return()=>{isProvided(bt)&&L&&B&&B(bt)}}reactExports.useEffect(P,[L,it,bt,B]);function W(){if(g){if(!ut||!tt)return;g(makePageCallback(ut,tt))}if(L&&I){if(!isProvided(bt)||!yt.current)return;I(bt,yt.current)}}function J(){ft&&(warning$1(!1,ft.toString()),d&&d(ft))}function at(){rt({type:"RESET"})}reactExports.useEffect(at,[rt,it,bt]);function gt(){if(!it||!vt)return;const Nt=makeCancellablePromise(it.getPage(vt)),zt=Nt;return Nt.promise.then(Yt=>{rt({type:"RESOLVE",value:Yt})}).catch(Yt=>{rt({type:"REJECT",error:Yt})}),()=>cancelRunningTask(zt)}reactExports.useEffect(gt,[rt,it,bt,vt,I]),reactExports.useEffect(()=>{if(ut!==void 0){if(ut===!1){J();return}W()}},[ut,tt]);const xt=reactExports.useMemo(()=>ut&&isProvided(bt)&&vt&&isProvided(Z)&&isProvided(tt)?{_className:a,canvasBackground:F,customTextRenderer:w,devicePixelRatio:D,onGetAnnotationsError:v,onGetAnnotationsSuccess:M,onGetStructTreeError:x,onGetStructTreeSuccess:i,onGetTextError:f,onGetTextSuccess:c,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:l,onRenderError:T,onRenderSuccess:O,onRenderTextLayerError:nt,onRenderTextLayerSuccess:G,page:ut,pageIndex:bt,pageNumber:vt,renderForms:st,renderTextLayer:r,rotate:Z,scale:tt}:null,[a,F,w,D,v,M,x,i,f,c,N,l,T,O,nt,G,ut,bt,vt,st,r,Z,tt]),Et=reactExports.useMemo(()=>makeEventProps($,()=>ut&&(tt?makePageCallback(ut,tt):void 0)),[$,ut,tt]),et=`${bt}@${tt}/${Z}`,Tt=`${bt}/${Z}`;function Pt(){switch(R){case"custom":return invariant(p),React.createElement(p,{key:`${et}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Tt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${et}_canvas`,canvasRef:q})}}function Wt(){return r?React.createElement(TextLayer,{key:`${et}_text`}):null}function Ut(){return V?React.createElement(AnnotationLayer,{key:`${et}_annotations`}):null}function qt(){return React.createElement(PageContext.Provider,{value:xt},Pt(),Wt(),Ut(),S)}function Ft(){return vt?it===null||ut===void 0||ut===null?React.createElement(Message,{type:"loading"},typeof b=="function"?b():b):it===!1||ut===!1?React.createElement(Message,{type:"error"},typeof y=="function"?y():y):qt():React.createElement(Message,{type:"no-data"},typeof h=="function"?h():h)}return React.createElement("div",Object.assign({className:clsx(a,E),"data-page-number":vt,ref:mergeRefs(C,yt),style:{"--scale-factor":`${tt}`,backgroundColor:F||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Et),Ft())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";var Close={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1=Close.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Close.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const PDFPreview=({open:n,onClose:t,pdfUrl:u,bookTitle:e})=>{const[a,L]=reactExports.useState(null),[F,q]=reactExports.useState(1),[S,E]=reactExports.useState(null),p=({numPages:y})=>{L(y),E(null)},w=y=>{E("Erreur lors du chargement du PDF"),console.error("Error loading PDF:",y)},D=y=>{q(m=>{const C=m+y;return Math.min(Math.max(1,C),a)})};return jsxRuntimeExports.jsxs(Dialog,{open:n,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:e}),jsxRuntimeExports.jsx(IconButton,{onClick:t,children:jsxRuntimeExports.jsx(default_1,{})})]}),jsxRuntimeExports.jsx(DialogContent,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:S?jsxRuntimeExports.jsx(Typography,{color:"error",sx:{mt:2},children:S}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Document,{file:u,onLoadSuccess:p,onLoadError:w,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement du PDF..."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:F,width:window.innerWidth*.7,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement de la page..."})})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>D(-1),disabled:F<=1,children:"Précédent"}),jsxRuntimeExports.jsxs(Typography,{children:["Page ",F," sur ",a]}),jsxRuntimeExports.jsx(Button,{endIcon:jsxRuntimeExports.jsx(default_1$5,{}),onClick:()=>D(1),disabled:F>=a,children:"Suivant"})]})]})})]})},HomePage=()=>{const[n,t]=reactExports.useState([]),[u,e]=reactExports.useState(!0),[a,L]=reactExports.useState(!1),[F,q]=reactExports.useState(null),[S,E]=reactExports.useState(""),[p,w]=reactExports.useState(!1),[D,y]=reactExports.useState(null),m=useTheme$1(),C=useMediaQuery(m.breakpoints.down("sm")),b=useNavigate();reactExports.useEffect(()=>{h()},[]);const h=async()=>{try{e(!0);const i=await fetch("/api/books");if(i.ok){const f=await i.json();t(f)}else q("Erreur lors du chargement des livres")}catch(i){console.error("Error fetching books:",i),q("Erreur de connexion au serveur")}finally{e(!1)}},v=async i=>{const f=i.target.files[0];if(!f)return;if(f.type!=="application/pdf"){q("Veuillez sélectionner un fichier PDF valide");return}const c=new FormData;c.append("pdf",f);try{L(!0),q(null);const d=await fetch("/api/upload-pdf",{method:"POST",body:c});if(d.ok){const g=await d.json();t(N=>[...N,g.metadata]),E("Le livre a été téléchargé avec succès"),i.target.value=""}else{const g=await d.json();q(g.error||"Erreur lors du téléchargement du PDF")}}catch(d){console.error("Error uploading PDF:",d),q("Erreur lors du téléchargement du fichier")}finally{L(!1)}},M=i=>{b(`/reader/${i}`)},x=i=>{y(i),w(!0)};return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:C?"h4":"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:m.palette.primary.main},children:"Bibliothèque Numérique"}),jsxRuntimeExports.jsxs(Button,{variant:"contained",component:"label",startIcon:jsxRuntimeExports.jsx(default_1$3,{}),sx:{mt:2,px:3,py:1.5,borderRadius:2,backgroundColor:m.palette.primary.main,"&:hover":{backgroundColor:m.palette.primary.dark}},disabled:a,children:[a?"Téléchargement...":"Ajouter un livre PDF",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:v})]})]}),F&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:3},onClose:()=>q(null),children:F}),jsxRuntimeExports.jsx(Snackbar,{open:!!S,autoHideDuration:6e3,onClose:()=>E(""),message:S}),u?jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mt:4},children:jsxRuntimeExports.jsx(LinearProgress,{})}):jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:n.map((i,f)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:i.title||"Livre sans titre"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Auteur: ",i.author||"Inconnu"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Pages: ",i.pages||"?"]})]}),jsxRuntimeExports.jsxs(CardActions,{sx:{padding:2,justifyContent:"space-between",backgroundColor:m.palette.background.paper,borderTop:1,borderColor:m.palette.divider},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$1,{}),onClick:()=>x(i),children:"Aperçu"}),jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$2,{}),onClick:()=>M(i.id),children:"Lire"})]})]})},i.id||f))}),!u&&n.length===0&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:"Aucun livre dans la bibliothèque"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Commencez par télécharger un PDF"})]}),D&&jsxRuntimeExports.jsx(PDFPreview,{open:p,onClose:()=>{w(!1),y(null)},pdfUrl:`/api/books/${D.filename}`,bookTitle:D.title})]})};export{HomePage as default};
//# sourceMappingURL=index-B1JlWXVq.js.map
