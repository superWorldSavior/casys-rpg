var Qn=Object.defineProperty;var vn=t=>{throw TypeError(t)};var Zn=(t,e,s)=>e in t?Qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Qe=(t,e,s)=>Zn(t,typeof e!="symbol"?e+"":e,s),Dt=(t,e,s)=>e.has(t)||vn("Cannot "+s);var i=(t,e,s)=>(Dt(t,e,"read from private field"),s?s.call(t):e.get(t)),ce=(t,e,s)=>e.has(t)?vn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),ue=(t,e,s,n)=>(Dt(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),ne=(t,e,s)=>(Dt(t,e,"access private method"),s);var ut=(t,e,s,n)=>({set _(r){ue(t,e,r,s)},get _(){return i(t,e,n)}});import{g as getDefaultExportFromCjs,u as useTheme$1,a as getThemeProps,r as reactExports,b as useEnhancedEffect,_ as _extends,h as handleBreakpoints,c as resolveBreakpointValues,d as createUnarySpacing,e as deepmerge,f as getValue,m as mergeBreakpointsInOrder,i as extendSxProp,j as _objectWithoutPropertiesLoose,k as composeClasses,l as generateUtilityClass,n as jsxRuntimeExports,o as clsx,s as styled,p as useThemeProps,q as createTheme,t as useForkRef,v as generateUtilityClasses,w as useDefaultProps,x as capitalize,y as styled$1,B as ButtonBase,z as alpha_1,P as Paper,A as darken_1,C as lighten_1,D as require$$1,E as useEventCallback,F as css,G as keyframes,H as useTimeout,I as emphasize_1,T as Timeout,J as useIsFocusVisible,K as interopRequireDefaultExports,L as getAugmentedNamespace,R as React$1,M as Typography,N as Button,O as useNavigate,Q as Container}from"./index-Cvt1ew4f.js";import{r as resolveComponentProps,m as mergeSlotProps,a as appendOwnerState,c as createSvgIcon,o as ownerDocument,P as Portal,u as useSlotProps,b as useTheme$2,F as Fade,d as useId,M as Modal,B as Backdrop,e as useRtl,f as extractEventHandlers,G as Grow,g as useControlled,h as requireCreateSvgIcon,i as Box,j as default_1$7,k as default_1$8}from"./NavigateBefore-Bdku4Ybb.js";function _mergeNamespaces(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const A=Object.getOwnPropertyDescriptor(n,r);A&&Object.defineProperty(t,r,A.get?A:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function t(n,r,A,P,O,h){if(h!==ReactPropTypesSecret){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function useMediaQueryOld(t,e,s,n,r){const[A,P]=reactExports.useState(()=>r&&s?s(t).matches:n?n(t).matches:e);return useEnhancedEffect(()=>{let O=!0;if(!s)return;const h=s(t),v=()=>{O&&P(h.matches)};return v(),h.addListener(v),()=>{O=!1,h.removeListener(v)}},[t,s]),A}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(t,e,s,n,r){const A=reactExports.useCallback(()=>e,[e]),P=reactExports.useMemo(()=>{if(r&&s)return()=>s(t).matches;if(n!==null){const{matches:o}=n(t);return()=>o}return A},[A,t,n,r,s]),[O,h]=reactExports.useMemo(()=>{if(s===null)return[A,()=>()=>{}];const o=s(t);return[()=>o.matches,w=>(o.addListener(w),()=>{o.removeListener(w)})]},[A,s,t]);return maybeReactUseSyncExternalStore(h,O,P)}function useMediaQuery(t,e={}){const s=useTheme$1(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:r=!1,matchMedia:A=n?window.matchMedia:null,ssrMatchMedia:P=null,noSsr:O=!1}=getThemeProps({name:"MuiUseMediaQuery",props:e,theme:s});let h=typeof t=="function"?t(s):t;return h=h.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(h,r,A,P,O)}const _excluded$h=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme=createTheme(),defaultCreateStyledComponent=styled("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme})}function joinChildren(t,e){const s=reactExports.Children.toArray(t).filter(Boolean);return s.reduce((n,r,A)=>(n.push(r),A<s.length-1&&n.push(reactExports.cloneElement(e,{key:`separator-${A}`})),n),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:e})=>{let s=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:e},resolveBreakpointValues({values:t.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(t.spacing){const n=createUnarySpacing(e),r=Object.keys(e.breakpoints.values).reduce((h,v)=>((typeof t.spacing=="object"&&t.spacing[v]!=null||typeof t.direction=="object"&&t.direction[v]!=null)&&(h[v]=!0),h),{}),A=resolveBreakpointValues({values:t.direction,base:r}),P=resolveBreakpointValues({values:t.spacing,base:r});typeof A=="object"&&Object.keys(A).forEach((h,v,o)=>{if(!A[h]){const k=v>0?A[o[v-1]]:"column";A[h]=k}}),s=deepmerge(s,handleBreakpoints({theme:e},P,(h,v)=>t.useFlexGap?{gap:getValue(n,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(v?A[v]:t.direction)}`]:getValue(n,h)}}))}return s=mergeBreakpointsInOrder(e.breakpoints,s),s};function createStack(t={}){const{createStyledComponent:e=defaultCreateStyledComponent,useThemeProps:s=useThemePropsDefault,componentName:n="MuiStack"}=t,r=()=>composeClasses({root:["root"]},h=>generateUtilityClass(n,h),{}),A=e(style);return reactExports.forwardRef(function(h,v){const o=s(h),w=extendSxProp(o),{component:k="div",direction:y="column",spacing:b=0,divider:C,children:x,className:p,useFlexGap:E=!1}=w,F=_objectWithoutPropertiesLoose(w,_excluded$h),S={direction:y,spacing:b,useFlexGap:E},c=r();return jsxRuntimeExports.jsx(A,_extends({as:k,ownerState:S,ref:v,className:clsx(c.root,p)},F,{children:C?joinChildren(x,C):x}))})}const _excluded$g=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_excluded2$2=["component","slots","slotProps"],_excluded3=["component"];function useSlot(t,e){const{className:s,elementType:n,ownerState:r,externalForwardedProps:A,getSlotOwnerState:P,internalForwardedProps:O}=e,h=_objectWithoutPropertiesLoose(e,_excluded$g),{component:v,slots:o={[t]:void 0},slotProps:w={[t]:void 0}}=A,k=_objectWithoutPropertiesLoose(A,_excluded2$2),y=o[t]||n,b=resolveComponentProps(w[t],r),C=mergeSlotProps(_extends({className:s},h,{externalForwardedProps:t==="root"?k:void 0,externalSlotProps:b})),{props:{component:x},internalRef:p}=C,E=_objectWithoutPropertiesLoose(C.props,_excluded3),F=useForkRef(p,b==null?void 0:b.ref,e.ref),S=P?P(E):{},c=_extends({},r,S),g=t==="root"?x||v:x,a=appendOwnerState(y,_extends({},t==="root"&&!v&&!o[t]&&O,t!=="root"&&!o[t]&&O,E,g&&{as:g},{ref:F}),c);return Object.keys(S).forEach(f=>{delete a[f]}),[y,a]}function getAlertUtilityClass(t){return generateUtilityClass("MuiAlert",t)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$f=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$e=t=>{const{classes:e,disabled:s,color:n,edge:r,size:A}=t,P={root:["root",s&&"disabled",n!=="default"&&`color${capitalize(n)}`,r&&`edge${capitalize(r)}`,`size${capitalize(A)}`]};return composeClasses(P,getIconButtonUtilityClass,e)},IconButtonRoot=styled$1(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.color!=="default"&&e[`color${capitalize(s.color)}`],s.edge&&e[`edge${capitalize(s.edge)}`],e[`size${capitalize(s.size)}`]]}})(({theme:t,ownerState:e})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var s;const n=(s=(t.vars||t).palette)==null?void 0:s[e.color];return _extends({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&_extends({color:n==null?void 0:n.main},!e.disableRipple&&{"&:hover":_extends({},n&&{backgroundColor:t.vars?`rgba(${n.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(n.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiIconButton"}),{edge:r=!1,children:A,className:P,color:O="default",disabled:h=!1,disableFocusRipple:v=!1,size:o="medium"}=n,w=_objectWithoutPropertiesLoose(n,_excluded$f),k=_extends({},n,{edge:r,color:O,disabled:h,disableFocusRipple:v,size:o}),y=useUtilityClasses$e(k);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(y.root,P),centerRipple:!0,focusRipple:!v,disabled:h,ref:s},w,{ownerState:k,children:A}))}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$e=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$d=t=>{const{variant:e,color:s,severity:n,classes:r}=t,A={root:["root",`color${capitalize(s||n)}`,`${e}${capitalize(s||n)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(A,getAlertUtilityClass,r)},AlertRoot=styled$1(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],e[`${s.variant}${capitalize(s.color||s.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?darken_1:lighten_1,s=t.palette.mode==="light"?lighten_1:darken_1;return _extends({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${n}StandardBg`]:s(t.palette[n].light,.9),[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),border:`1px solid ${(t.vars||t).palette[n].light}`,[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:_extends({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}))]})}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiAlert"}),{action:r,children:A,className:P,closeText:O="Close",color:h,components:v={},componentsProps:o={},icon:w,iconMapping:k=defaultIconMapping,onClose:y,role:b="alert",severity:C="success",slotProps:x={},slots:p={},variant:E="standard"}=n,F=_objectWithoutPropertiesLoose(n,_excluded$e),S=_extends({},n,{color:h,severity:C,variant:E,colorSeverity:h||C}),c=useUtilityClasses$d(S),g={slots:_extends({closeButton:v.CloseButton,closeIcon:v.CloseIcon},p),slotProps:_extends({},o,x)},[a,f]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:g,ownerState:S}),[m,D]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:g,ownerState:S});return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:b,elevation:0,ownerState:S,className:clsx(c.root,P),ref:s},F,{children:[w!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:S,className:c.icon,children:w||k[C]||defaultIconMapping[C]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:S,className:c.message,children:A}),r!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:c.action,children:r}):null,r==null&&y?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:c.action,children:jsxRuntimeExports.jsx(a,_extends({size:"small","aria-label":O,title:O,color:"inherit",onClick:y},f,{children:jsxRuntimeExports.jsx(m,_extends({fontSize:"small"},D))}))}):null]}))});var useThemeWithoutDefault={};Object.defineProperty(useThemeWithoutDefault,"__esModule",{value:!0});var default_1$6=useThemeWithoutDefault.default=void 0,React=_interopRequireWildcard(reactExports),_styledEngine=require$$1;function _getRequireWildcardCache(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(n){return n?s:e})(t)}function _interopRequireWildcard(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var s=_getRequireWildcardCache(e);if(s&&s.has(t))return s.get(t);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in t)if(A!=="default"&&Object.prototype.hasOwnProperty.call(t,A)){var P=r?Object.getOwnPropertyDescriptor(t,A):null;P&&(P.get||P.set)?Object.defineProperty(n,A,P):n[A]=t[A]}return n.default=t,s&&s.set(t,n),n}function isObjectEmpty(t){return Object.keys(t).length===0}function useTheme(t=null){const e=React.useContext(_styledEngine.ThemeContext);return!e||isObjectEmpty(e)?t:e}default_1$6=useThemeWithoutDefault.default=useTheme;var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,e){return t.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,e){return t.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function isElement(t){var e=getWindow(t).Element;return t instanceof e||t instanceof Element}function isHTMLElement$1(t){var e=getWindow(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var e=getWindow(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function applyStyles(t){var e=t.state;Object.keys(e.elements).forEach(function(s){var n=e.styles[s]||{},r=e.attributes[s]||{},A=e.elements[s];!isHTMLElement$1(A)||!getNodeName(A)||(Object.assign(A.style,n),Object.keys(r).forEach(function(P){var O=r[P];O===!1?A.removeAttribute(P):A.setAttribute(P,O===!0?"":O)}))})}function effect$2(t){var e=t.state,s={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,s.popper),e.styles=s,e.elements.arrow&&Object.assign(e.elements.arrow.style,s.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],A=e.attributes[n]||{},P=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:s[n]),O=P.reduce(function(h,v){return h[v]="",h},{});!isHTMLElement$1(r)||!getNodeName(r)||(Object.assign(r.style,O),Object.keys(A).forEach(function(h){r.removeAttribute(h)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);var n=t.getBoundingClientRect(),r=1,A=1;e&&isHTMLElement$1(t)&&(r=t.offsetWidth>0&&round$1(n.width)/t.offsetWidth||1,A=t.offsetHeight>0&&round$1(n.height)/t.offsetHeight||1);var P=isElement(t)?getWindow(t):window,O=P.visualViewport,h=!isLayoutViewport()&&s,v=(n.left+(h&&O?O.offsetLeft:0))/r,o=(n.top+(h&&O?O.offsetTop:0))/A,w=n.width/r,k=n.height/A;return{width:w,height:k,top:o,right:v+w,bottom:o+k,left:v,x:v,y:o}}function getLayoutRect(t){var e=getBoundingClientRect(t),s=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-s)<=1&&(s=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:s,height:n}}function contains(t,e){var s=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(s&&isShadowRoot(s)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$1(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var e=/firefox/i.test(getUAString()),s=/Trident/i.test(getUAString());if(s&&isHTMLElement$1(t)){var n=getComputedStyle$1(t);if(n.position==="fixed")return null}var r=getParentNode(t);for(isShadowRoot(r)&&(r=r.host);isHTMLElement$1(r)&&["html","body"].indexOf(getNodeName(r))<0;){var A=getComputedStyle$1(r);if(A.transform!=="none"||A.perspective!=="none"||A.contain==="paint"||["transform","perspective"].indexOf(A.willChange)!==-1||e&&A.willChange==="filter"||e&&A.filter&&A.filter!=="none")return r;r=r.parentNode}return null}function getOffsetParent(t){for(var e=getWindow(t),s=getTrueOffsetParent(t);s&&isTableElement(s)&&getComputedStyle$1(s).position==="static";)s=getTrueOffsetParent(s);return s&&(getNodeName(s)==="html"||getNodeName(s)==="body"&&getComputedStyle$1(s).position==="static")?e:s||getContainingBlock(t)||e}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,e,s){return max(t,min(e,s))}function withinMaxClamp(t,e,s){var n=within(t,e,s);return n>s?s:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,e){return e.reduce(function(s,n){return s[n]=t,s},{})}var toPaddingObject=function(e,s){return e=typeof e=="function"?e(Object.assign({},s.rects,{placement:s.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(t){var e,s=t.state,n=t.name,r=t.options,A=s.elements.arrow,P=s.modifiersData.popperOffsets,O=getBasePlacement(s.placement),h=getMainAxisFromPlacement(O),v=[left,right].indexOf(O)>=0,o=v?"height":"width";if(!(!A||!P)){var w=toPaddingObject(r.padding,s),k=getLayoutRect(A),y=h==="y"?top:left,b=h==="y"?bottom:right,C=s.rects.reference[o]+s.rects.reference[h]-P[h]-s.rects.popper[o],x=P[h]-s.rects.reference[h],p=getOffsetParent(A),E=p?h==="y"?p.clientHeight||0:p.clientWidth||0:0,F=C/2-x/2,S=w[y],c=E-k[o]-w[b],g=E/2-k[o]/2+F,a=within(S,g,c),f=h;s.modifiersData[n]=(e={},e[f]=a,e.centerOffset=a-g,e)}}function effect$1(t){var e=t.state,s=t.options,n=s.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||contains(e.elements.popper,r)&&(e.elements.arrow=r))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,e){var s=t.x,n=t.y,r=e.devicePixelRatio||1;return{x:round$1(s*r)/r||0,y:round$1(n*r)/r||0}}function mapToStyles(t){var e,s=t.popper,n=t.popperRect,r=t.placement,A=t.variation,P=t.offsets,O=t.position,h=t.gpuAcceleration,v=t.adaptive,o=t.roundOffsets,w=t.isFixed,k=P.x,y=k===void 0?0:k,b=P.y,C=b===void 0?0:b,x=typeof o=="function"?o({x:y,y:C}):{x:y,y:C};y=x.x,C=x.y;var p=P.hasOwnProperty("x"),E=P.hasOwnProperty("y"),F=left,S=top,c=window;if(v){var g=getOffsetParent(s),a="clientHeight",f="clientWidth";if(g===getWindow(s)&&(g=getDocumentElement(s),getComputedStyle$1(g).position!=="static"&&O==="absolute"&&(a="scrollHeight",f="scrollWidth")),g=g,r===top||(r===left||r===right)&&A===end){S=bottom;var m=w&&g===c&&c.visualViewport?c.visualViewport.height:g[a];C-=m-n.height,C*=h?1:-1}if(r===left||(r===top||r===bottom)&&A===end){F=right;var D=w&&g===c&&c.visualViewport?c.visualViewport.width:g[f];y-=D-n.width,y*=h?1:-1}}var l=Object.assign({position:O},v&&unsetSides),R=o===!0?roundOffsetsByDPR({x:y,y:C},getWindow(s)):{x:y,y:C};if(y=R.x,C=R.y,h){var I;return Object.assign({},l,(I={},I[S]=E?"0":"",I[F]=p?"0":"",I.transform=(c.devicePixelRatio||1)<=1?"translate("+y+"px, "+C+"px)":"translate3d("+y+"px, "+C+"px, 0)",I))}return Object.assign({},l,(e={},e[S]=E?C+"px":"",e[F]=p?y+"px":"",e.transform="",e))}function computeStyles(t){var e=t.state,s=t.options,n=s.gpuAcceleration,r=n===void 0?!0:n,A=s.adaptive,P=A===void 0?!0:A,O=s.roundOffsets,h=O===void 0?!0:O,v={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},v,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:P,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},v,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var e=t.state,s=t.instance,n=t.options,r=n.scroll,A=r===void 0?!0:r,P=n.resize,O=P===void 0?!0:P,h=getWindow(e.elements.popper),v=[].concat(e.scrollParents.reference,e.scrollParents.popper);return A&&v.forEach(function(o){o.addEventListener("scroll",s.update,passive)}),O&&h.addEventListener("resize",s.update,passive),function(){A&&v.forEach(function(o){o.removeEventListener("scroll",s.update,passive)}),O&&h.removeEventListener("resize",s.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(t){var e=getWindow(t),s=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:s,scrollTop:n}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,e){var s=getWindow(t),n=getDocumentElement(t),r=s.visualViewport,A=n.clientWidth,P=n.clientHeight,O=0,h=0;if(r){A=r.width,P=r.height;var v=isLayoutViewport();(v||!v&&e==="fixed")&&(O=r.offsetLeft,h=r.offsetTop)}return{width:A,height:P,x:O+getWindowScrollBarX(t),y:h}}function getDocumentRect(t){var e,s=getDocumentElement(t),n=getWindowScroll(t),r=(e=t.ownerDocument)==null?void 0:e.body,A=max(s.scrollWidth,s.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),P=max(s.scrollHeight,s.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),O=-n.scrollLeft+getWindowScrollBarX(t),h=-n.scrollTop;return getComputedStyle$1(r||s).direction==="rtl"&&(O+=max(s.clientWidth,r?r.clientWidth:0)-A),{width:A,height:P,x:O,y:h}}function isScrollParent(t){var e=getComputedStyle$1(t),s=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(s+r+n)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,e){var s;e===void 0&&(e=[]);var n=getScrollParent(t),r=n===((s=t.ownerDocument)==null?void 0:s.body),A=getWindow(n),P=r?[A].concat(A.visualViewport||[],isScrollParent(n)?n:[]):n,O=e.concat(P);return r?O:O.concat(listScrollParents(getParentNode(P)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,e){var s=getBoundingClientRect(t,!1,e==="fixed");return s.top=s.top+t.clientTop,s.left=s.left+t.clientLeft,s.bottom=s.top+t.clientHeight,s.right=s.left+t.clientWidth,s.width=t.clientWidth,s.height=t.clientHeight,s.x=s.left,s.y=s.top,s}function getClientRectFromMixedType(t,e,s){return e===viewport?rectToClientRect(getViewportRect(t,s)):isElement(e)?getInnerBoundingClientRect(e,s):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var e=listScrollParents(getParentNode(t)),s=["absolute","fixed"].indexOf(getComputedStyle$1(t).position)>=0,n=s&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(n)?e.filter(function(r){return isElement(r)&&contains(r,n)&&getNodeName(r)!=="body"}):[]}function getClippingRect(t,e,s,n){var r=e==="clippingParents"?getClippingParents(t):[].concat(e),A=[].concat(r,[s]),P=A[0],O=A.reduce(function(h,v){var o=getClientRectFromMixedType(t,v,n);return h.top=max(o.top,h.top),h.right=min(o.right,h.right),h.bottom=min(o.bottom,h.bottom),h.left=max(o.left,h.left),h},getClientRectFromMixedType(t,P,n));return O.width=O.right-O.left,O.height=O.bottom-O.top,O.x=O.left,O.y=O.top,O}function computeOffsets(t){var e=t.reference,s=t.element,n=t.placement,r=n?getBasePlacement(n):null,A=n?getVariation(n):null,P=e.x+e.width/2-s.width/2,O=e.y+e.height/2-s.height/2,h;switch(r){case top:h={x:P,y:e.y-s.height};break;case bottom:h={x:P,y:e.y+e.height};break;case right:h={x:e.x+e.width,y:O};break;case left:h={x:e.x-s.width,y:O};break;default:h={x:e.x,y:e.y}}var v=r?getMainAxisFromPlacement(r):null;if(v!=null){var o=v==="y"?"height":"width";switch(A){case start:h[v]=h[v]-(e[o]/2-s[o]/2);break;case end:h[v]=h[v]+(e[o]/2-s[o]/2);break}}return h}function detectOverflow(t,e){e===void 0&&(e={});var s=e,n=s.placement,r=n===void 0?t.placement:n,A=s.strategy,P=A===void 0?t.strategy:A,O=s.boundary,h=O===void 0?clippingParents:O,v=s.rootBoundary,o=v===void 0?viewport:v,w=s.elementContext,k=w===void 0?popper:w,y=s.altBoundary,b=y===void 0?!1:y,C=s.padding,x=C===void 0?0:C,p=mergePaddingObject(typeof x!="number"?x:expandToHashMap(x,basePlacements)),E=k===popper?reference:popper,F=t.rects.popper,S=t.elements[b?E:k],c=getClippingRect(isElement(S)?S:S.contextElement||getDocumentElement(t.elements.popper),h,o,P),g=getBoundingClientRect(t.elements.reference),a=computeOffsets({reference:g,element:F,placement:r}),f=rectToClientRect(Object.assign({},F,a)),m=k===popper?f:g,D={top:c.top-m.top+p.top,bottom:m.bottom-c.bottom+p.bottom,left:c.left-m.left+p.left,right:m.right-c.right+p.right},l=t.modifiersData.offset;if(k===popper&&l){var R=l[r];Object.keys(D).forEach(function(I){var Q=[right,bottom].indexOf(I)>=0?1:-1,G=[top,bottom].indexOf(I)>=0?"y":"x";D[I]+=R[G]*Q})}return D}function computeAutoPlacement(t,e){e===void 0&&(e={});var s=e,n=s.placement,r=s.boundary,A=s.rootBoundary,P=s.padding,O=s.flipVariations,h=s.allowedAutoPlacements,v=h===void 0?placements:h,o=getVariation(n),w=o?O?variationPlacements:variationPlacements.filter(function(b){return getVariation(b)===o}):basePlacements,k=w.filter(function(b){return v.indexOf(b)>=0});k.length===0&&(k=w);var y=k.reduce(function(b,C){return b[C]=detectOverflow(t,{placement:C,boundary:r,rootBoundary:A,padding:P})[getBasePlacement(C)],b},{});return Object.keys(y).sort(function(b,C){return y[b]-y[C]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var e=getOppositePlacement(t);return[getOppositeVariationPlacement(t),e,getOppositeVariationPlacement(e)]}function flip(t){var e=t.state,s=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=s.mainAxis,A=r===void 0?!0:r,P=s.altAxis,O=P===void 0?!0:P,h=s.fallbackPlacements,v=s.padding,o=s.boundary,w=s.rootBoundary,k=s.altBoundary,y=s.flipVariations,b=y===void 0?!0:y,C=s.allowedAutoPlacements,x=e.options.placement,p=getBasePlacement(x),E=p===x,F=h||(E||!b?[getOppositePlacement(x)]:getExpandedFallbackPlacements(x)),S=[x].concat(F).reduce(function(u,T){return u.concat(getBasePlacement(T)===auto?computeAutoPlacement(e,{placement:T,boundary:o,rootBoundary:w,padding:v,flipVariations:b,allowedAutoPlacements:C}):T)},[]),c=e.rects.reference,g=e.rects.popper,a=new Map,f=!0,m=S[0],D=0;D<S.length;D++){var l=S[D],R=getBasePlacement(l),I=getVariation(l)===start,Q=[top,bottom].indexOf(R)>=0,G=Q?"width":"height",q=detectOverflow(e,{placement:l,boundary:o,rootBoundary:w,altBoundary:k,padding:v}),V=Q?I?right:left:I?bottom:top;c[G]>g[G]&&(V=getOppositePlacement(V));var se=getOppositePlacement(V),L=[];if(A&&L.push(q[R]<=0),O&&L.push(q[V]<=0,q[se]<=0),L.every(function(u){return u})){m=l,f=!1;break}a.set(l,L)}if(f)for(var X=b?3:1,re=function(T){var j=S.find(function(U){var B=a.get(U);if(B)return B.slice(0,T).every(function(Y){return Y})});if(j)return m=j,"break"},N=X;N>0;N--){var d=re(N);if(d==="break")break}e.placement!==m&&(e.modifiersData[n]._skip=!0,e.placement=m,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,e,s){return s===void 0&&(s={x:0,y:0}),{top:t.top-e.height-s.y,right:t.right-e.width+s.x,bottom:t.bottom-e.height+s.y,left:t.left-e.width-s.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(e){return t[e]>=0})}function hide(t){var e=t.state,s=t.name,n=e.rects.reference,r=e.rects.popper,A=e.modifiersData.preventOverflow,P=detectOverflow(e,{elementContext:"reference"}),O=detectOverflow(e,{altBoundary:!0}),h=getSideOffsets(P,n),v=getSideOffsets(O,r,A),o=isAnySideFullyClipped(h),w=isAnySideFullyClipped(v);e.modifiersData[s]={referenceClippingOffsets:h,popperEscapeOffsets:v,isReferenceHidden:o,hasPopperEscaped:w},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":o,"data-popper-escaped":w})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,e,s){var n=getBasePlacement(t),r=[left,top].indexOf(n)>=0?-1:1,A=typeof s=="function"?s(Object.assign({},e,{placement:t})):s,P=A[0],O=A[1];return P=P||0,O=(O||0)*r,[left,right].indexOf(n)>=0?{x:O,y:P}:{x:P,y:O}}function offset(t){var e=t.state,s=t.options,n=t.name,r=s.offset,A=r===void 0?[0,0]:r,P=placements.reduce(function(o,w){return o[w]=distanceAndSkiddingToXY(w,e.rects,A),o},{}),O=P[e.placement],h=O.x,v=O.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=v),e.modifiersData[n]=P}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var e=t.state,s=t.name;e.modifiersData[s]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var e=t.state,s=t.options,n=t.name,r=s.mainAxis,A=r===void 0?!0:r,P=s.altAxis,O=P===void 0?!1:P,h=s.boundary,v=s.rootBoundary,o=s.altBoundary,w=s.padding,k=s.tether,y=k===void 0?!0:k,b=s.tetherOffset,C=b===void 0?0:b,x=detectOverflow(e,{boundary:h,rootBoundary:v,padding:w,altBoundary:o}),p=getBasePlacement(e.placement),E=getVariation(e.placement),F=!E,S=getMainAxisFromPlacement(p),c=getAltAxis(S),g=e.modifiersData.popperOffsets,a=e.rects.reference,f=e.rects.popper,m=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,D=typeof m=="number"?{mainAxis:m,altAxis:m}:Object.assign({mainAxis:0,altAxis:0},m),l=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(g){if(A){var I,Q=S==="y"?top:left,G=S==="y"?bottom:right,q=S==="y"?"height":"width",V=g[S],se=V+x[Q],L=V-x[G],X=y?-f[q]/2:0,re=E===start?a[q]:f[q],N=E===start?-f[q]:-a[q],d=e.elements.arrow,u=y&&d?getLayoutRect(d):{width:0,height:0},T=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),j=T[Q],U=T[G],B=within(0,a[q],u[q]),Y=F?a[q]/2-X-B-j-D.mainAxis:re-B-j-D.mainAxis,ie=F?-a[q]/2+X+B+U+D.mainAxis:N+B+U+D.mainAxis,le=e.elements.arrow&&getOffsetParent(e.elements.arrow),fe=le?S==="y"?le.clientTop||0:le.clientLeft||0:0,ye=(I=l==null?void 0:l[S])!=null?I:0,me=V+Y-ye-fe,ve=V+ie-ye,Z=within(y?min(se,me):se,V,y?max(L,ve):L);g[S]=Z,R[S]=Z-V}if(O){var ee,M=S==="x"?top:left,z=S==="x"?bottom:right,J=g[c],ae=c==="y"?"height":"width",ge=J+x[M],Ae=J-x[z],_e=[top,left].indexOf(p)!==-1,te=(ee=l==null?void 0:l[c])!=null?ee:0,Pe=_e?ge:J-a[ae]-f[ae]-te+D.altAxis,Ce=_e?J+a[ae]+f[ae]-te-D.altAxis:Ae,Ue=y&&_e?withinMaxClamp(Pe,J,Ce):within(y?Pe:ge,J,y?Ce:Ae);g[c]=Ue,R[c]=Ue-J}e.modifiersData[n]=R}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var e=t.getBoundingClientRect(),s=round$1(e.width)/t.offsetWidth||1,n=round$1(e.height)/t.offsetHeight||1;return s!==1||n!==1}function getCompositeRect(t,e,s){s===void 0&&(s=!1);var n=isHTMLElement$1(e),r=isHTMLElement$1(e)&&isElementScaled(e),A=getDocumentElement(e),P=getBoundingClientRect(t,r,s),O={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!s)&&((getNodeName(e)!=="body"||isScrollParent(A))&&(O=getNodeScroll(e)),isHTMLElement$1(e)?(h=getBoundingClientRect(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):A&&(h.x=getWindowScrollBarX(A))),{x:P.left+O.scrollLeft-h.x,y:P.top+O.scrollTop-h.y,width:P.width,height:P.height}}function order(t){var e=new Map,s=new Set,n=[];t.forEach(function(A){e.set(A.name,A)});function r(A){s.add(A.name);var P=[].concat(A.requires||[],A.requiresIfExists||[]);P.forEach(function(O){if(!s.has(O)){var h=e.get(O);h&&r(h)}}),n.push(A)}return t.forEach(function(A){s.has(A.name)||r(A)}),n}function orderModifiers(t){var e=order(t);return modifierPhases.reduce(function(s,n){return s.concat(e.filter(function(r){return r.phase===n}))},[])}function debounce(t){var e;return function(){return e||(e=new Promise(function(s){Promise.resolve().then(function(){e=void 0,s(t())})})),e}}function mergeByName(t){var e=t.reduce(function(s,n){var r=s[n.name];return s[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,s},{});return Object.keys(e).map(function(s){return e[s]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var e=t,s=e.defaultModifiers,n=s===void 0?[]:s,r=e.defaultOptions,A=r===void 0?DEFAULT_OPTIONS:r;return function(O,h,v){v===void 0&&(v=A);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,A),modifiersData:{},elements:{reference:O,popper:h},attributes:{},styles:{}},w=[],k=!1,y={state:o,setOptions:function(p){var E=typeof p=="function"?p(o.options):p;C(),o.options=Object.assign({},A,o.options,E),o.scrollParents={reference:isElement(O)?listScrollParents(O):O.contextElement?listScrollParents(O.contextElement):[],popper:listScrollParents(h)};var F=orderModifiers(mergeByName([].concat(n,o.options.modifiers)));return o.orderedModifiers=F.filter(function(S){return S.enabled}),b(),y.update()},forceUpdate:function(){if(!k){var p=o.elements,E=p.reference,F=p.popper;if(areValidElements(E,F)){o.rects={reference:getCompositeRect(E,getOffsetParent(F),o.options.strategy==="fixed"),popper:getLayoutRect(F)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(D){return o.modifiersData[D.name]=Object.assign({},D.data)});for(var S=0;S<o.orderedModifiers.length;S++){if(o.reset===!0){o.reset=!1,S=-1;continue}var c=o.orderedModifiers[S],g=c.fn,a=c.options,f=a===void 0?{}:a,m=c.name;typeof g=="function"&&(o=g({state:o,options:f,name:m,instance:y})||o)}}}},update:debounce(function(){return new Promise(function(x){y.forceUpdate(),x(o)})}),destroy:function(){C(),k=!0}};if(!areValidElements(O,h))return y;y.setOptions(v).then(function(x){!k&&v.onFirstUpdate&&v.onFirstUpdate(x)});function b(){o.orderedModifiers.forEach(function(x){var p=x.name,E=x.options,F=E===void 0?{}:E,S=x.effect;if(typeof S=="function"){var c=S({state:o,name:p,instance:y,options:F}),g=function(){};w.push(c||g)}})}function C(){w.forEach(function(x){return x()}),w=[]}return y}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$d=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$1=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$c=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getPopperUtilityClass,e)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(e,s){var n;const{anchorEl:r,children:A,direction:P,disablePortal:O,modifiers:h,open:v,placement:o,popperOptions:w,popperRef:k,slotProps:y={},slots:b={},TransitionProps:C}=e,x=_objectWithoutPropertiesLoose(e,_excluded$d),p=reactExports.useRef(null),E=useForkRef(p,s),F=reactExports.useRef(null),S=useForkRef(F,k),c=reactExports.useRef(S);useEnhancedEffect(()=>{c.current=S},[S]),reactExports.useImperativeHandle(k,()=>F.current,[]);const g=flipPlacement(o,P),[a,f]=reactExports.useState(g),[m,D]=reactExports.useState(resolveAnchorEl(r));reactExports.useEffect(()=>{F.current&&F.current.forceUpdate()}),reactExports.useEffect(()=>{r&&D(resolveAnchorEl(r))},[r]),useEnhancedEffect(()=>{if(!m||!v)return;const G=se=>{f(se.placement)};let q=[{name:"preventOverflow",options:{altBoundary:O}},{name:"flip",options:{altBoundary:O}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:se})=>{G(se)}}];h!=null&&(q=q.concat(h)),w&&w.modifiers!=null&&(q=q.concat(w.modifiers));const V=createPopper(m,p.current,_extends({placement:g},w,{modifiers:q}));return c.current(V),()=>{V.destroy(),c.current(null)}},[m,O,h,v,w,g]);const l={placement:a};C!==null&&(l.TransitionProps=C);const R=useUtilityClasses$c(e),I=(n=b.root)!=null?n:"div",Q=useSlotProps({elementType:I,externalSlotProps:y.root,externalForwardedProps:x,additionalProps:{role:"tooltip",ref:E},ownerState:e,className:R.root});return jsxRuntimeExports.jsx(I,_extends({},Q,{children:typeof A=="function"?A(l):A}))}),Popper$1=reactExports.forwardRef(function(e,s){const{anchorEl:n,children:r,container:A,direction:P="ltr",disablePortal:O=!1,keepMounted:h=!1,modifiers:v,open:o,placement:w="bottom",popperOptions:k=defaultPopperOptions,popperRef:y,style:b,transition:C=!1,slotProps:x={},slots:p={}}=e,E=_objectWithoutPropertiesLoose(e,_excluded2$1),[F,S]=reactExports.useState(!0),c=()=>{S(!1)},g=()=>{S(!0)};if(!h&&!o&&(!C||F))return null;let a;if(A)a=A;else if(n){const D=resolveAnchorEl(n);a=D&&isHTMLElement(D)?ownerDocument(D).body:ownerDocument(null).body}const f=!o&&h&&(!C||F)?"none":void 0,m=C?{in:o,onEnter:c,onExited:g}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:O,container:a,children:jsxRuntimeExports.jsx(PopperTooltip,_extends({anchorEl:n,direction:P,disablePortal:O,modifiers:v,ref:s,open:C?!F:o,placement:w,popperOptions:k,popperRef:y,slotProps:x,slots:p},E,{style:_extends({position:"fixed",top:0,left:0,display:f},b),TransitionProps:m,children:r}))})}),_excluded$c=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled$1(Popper$1,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Popper=reactExports.forwardRef(function(e,s){var n;const r=default_1$6(),A=useDefaultProps({props:e,name:"MuiPopper"}),{anchorEl:P,component:O,components:h,componentsProps:v,container:o,disablePortal:w,keepMounted:k,modifiers:y,open:b,placement:C,popperOptions:x,popperRef:p,transition:E,slots:F,slotProps:S}=A,c=_objectWithoutPropertiesLoose(A,_excluded$c),g=(n=F==null?void 0:F.root)!=null?n:h==null?void 0:h.Root,a=_extends({anchorEl:P,container:o,disablePortal:w,keepMounted:k,modifiers:y,open:b,placement:C,popperOptions:x,popperRef:p,transition:E},c);return jsxRuntimeExports.jsx(PopperRoot,_extends({as:O,direction:r==null?void 0:r.direction,slots:{root:g},slotProps:S??v},a,{ref:s}))}),CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(t){return generateUtilityClass("MuiChip",t)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$b=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$b=t=>{const{classes:e,disabled:s,size:n,color:r,iconColor:A,onDelete:P,clickable:O,variant:h}=t,v={root:["root",h,s&&"disabled",`size${capitalize(n)}`,`color${capitalize(r)}`,O&&"clickable",O&&`clickableColor${capitalize(r)}`,P&&"deletable",P&&`deletableColor${capitalize(r)}`,`${h}${capitalize(r)}`],label:["label",`label${capitalize(n)}`],avatar:["avatar",`avatar${capitalize(n)}`,`avatarColor${capitalize(r)}`],icon:["icon",`icon${capitalize(n)}`,`iconColor${capitalize(A)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(n)}`,`deleteIconColor${capitalize(r)}`,`deleteIcon${capitalize(h)}Color${capitalize(r)}`]};return composeClasses(v,getChipUtilityClass,e)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{color:n,iconColor:r,clickable:A,onDelete:P,size:O,variant:h}=s;return[{[`& .${chipClasses.avatar}`]:e.avatar},{[`& .${chipClasses.avatar}`]:e[`avatar${capitalize(O)}`]},{[`& .${chipClasses.avatar}`]:e[`avatarColor${capitalize(n)}`]},{[`& .${chipClasses.icon}`]:e.icon},{[`& .${chipClasses.icon}`]:e[`icon${capitalize(O)}`]},{[`& .${chipClasses.icon}`]:e[`iconColor${capitalize(r)}`]},{[`& .${chipClasses.deleteIcon}`]:e.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(O)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIconColor${capitalize(n)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(h)}Color${capitalize(n)}`]},e.root,e[`size${capitalize(O)}`],e[`color${capitalize(n)}`],A&&e.clickable,A&&n!=="default"&&e[`clickableColor${capitalize(n)})`],P&&e.deletable,P&&n!=="default"&&e[`deletableColor${capitalize(n)}`],e[h],e[`${h}${capitalize(n)}`]]}})(({theme:t,ownerState:e})=>{const s=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:s,fontSize:t.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&_extends({color:t.vars?t.vars.palette.Chip.defaultIconColor:s},e.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:alpha_1(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>_extends({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>_extends({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:s}=t,{size:n}=s;return[e.label,e[`label${capitalize(n)}`]]}})(({ownerState:t})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(t){return t.key==="Backspace"||t.key==="Delete"}const Chip=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiChip"}),{avatar:r,className:A,clickable:P,color:O="default",component:h,deleteIcon:v,disabled:o=!1,icon:w,label:k,onClick:y,onDelete:b,onKeyDown:C,onKeyUp:x,size:p="medium",variant:E="filled",tabIndex:F,skipFocusWhenDisabled:S=!1}=n,c=_objectWithoutPropertiesLoose(n,_excluded$b),g=reactExports.useRef(null),a=useForkRef(g,s),f=L=>{L.stopPropagation(),b&&b(L)},m=L=>{L.currentTarget===L.target&&isDeleteKeyboardEvent(L)&&L.preventDefault(),C&&C(L)},D=L=>{L.currentTarget===L.target&&(b&&isDeleteKeyboardEvent(L)?b(L):L.key==="Escape"&&g.current&&g.current.blur()),x&&x(L)},l=P!==!1&&y?!0:P,R=l||b?ButtonBase:h||"div",I=_extends({},n,{component:R,disabled:o,size:p,color:O,iconColor:reactExports.isValidElement(w)&&w.props.color||O,onDelete:!!b,clickable:l,variant:E}),Q=useUtilityClasses$b(I),G=R===ButtonBase?_extends({component:h||"div",focusVisibleClassName:Q.focusVisible},b&&{disableRipple:!0}):{};let q=null;b&&(q=v&&reactExports.isValidElement(v)?reactExports.cloneElement(v,{className:clsx(v.props.className,Q.deleteIcon),onClick:f}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Q.deleteIcon),onClick:f}));let V=null;r&&reactExports.isValidElement(r)&&(V=reactExports.cloneElement(r,{className:clsx(Q.avatar,r.props.className)}));let se=null;return w&&reactExports.isValidElement(w)&&(se=reactExports.cloneElement(w,{className:clsx(Q.icon,w.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:R,className:clsx(Q.root,A),disabled:l&&o?!0:void 0,onClick:y,onKeyDown:m,onKeyUp:D,ref:a,tabIndex:S&&o?-1:F,ownerState:I},G,c,{children:[V||se,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Q.label),ownerState:I,children:k}),q]}))});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const _excluded$a=["className","raised"],useUtilityClasses$a=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardUtilityClass,e)},CardRoot=styled$1(Paper,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCard"}),{className:r,raised:A=!1}=n,P=_objectWithoutPropertiesLoose(n,_excluded$a),O=_extends({},n,{raised:A}),h=useUtilityClasses$a(O);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(h.root,r),elevation:A?8:void 0,ref:s,ownerState:O},P))});function getCardActionsUtilityClass(t){return generateUtilityClass("MuiCardActions",t)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$9=["disableSpacing","className"],useUtilityClasses$9=t=>{const{classes:e,disableSpacing:s}=t;return composeClasses({root:["root",!s&&"spacing"]},getCardActionsUtilityClass,e)},CardActionsRoot=styled$1("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,!s.disableSpacing&&e.spacing]}})(({ownerState:t})=>_extends({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),CardActions=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:A}=n,P=_objectWithoutPropertiesLoose(n,_excluded$9),O=_extends({},n,{disableSpacing:r}),h=useUtilityClasses$9(O);return jsxRuntimeExports.jsx(CardActionsRoot,_extends({className:clsx(h.root,A),ownerState:O,ref:s},P))});function getCardContentUtilityClass(t){return generateUtilityClass("MuiCardContent",t)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$8=["className","component"],useUtilityClasses$8=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardContentUtilityClass,e)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardContent"}),{className:r,component:A="div"}=n,P=_objectWithoutPropertiesLoose(n,_excluded$8),O=_extends({},n,{component:A}),h=useUtilityClasses$8(O);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:A,className:clsx(h.root,r),ownerState:O,ref:s},P))});function getCardMediaUtilityClass(t){return generateUtilityClass("MuiCardMedia",t)}generateUtilityClasses("MuiCardMedia",["root","media","img"]);const _excluded$7=["children","className","component","image","src","style"],useUtilityClasses$7=t=>{const{classes:e,isMediaComponent:s,isImageComponent:n}=t;return composeClasses({root:["root",s&&"media",n&&"img"]},getCardMediaUtilityClass,e)},CardMediaRoot=styled$1("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{isMediaComponent:n,isImageComponent:r}=s;return[e.root,n&&e.media,r&&e.img]}})(({ownerState:t})=>_extends({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),MEDIA_COMPONENTS=["video","audio","picture","iframe","img"],IMAGE_COMPONENTS=["picture","img"],CardMedia=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardMedia"}),{children:r,className:A,component:P="div",image:O,src:h,style:v}=n,o=_objectWithoutPropertiesLoose(n,_excluded$7),w=MEDIA_COMPONENTS.indexOf(P)!==-1,k=!w&&O?_extends({backgroundImage:`url("${O}")`},v):v,y=_extends({},n,{component:P,isMediaComponent:w,isImageComponent:IMAGE_COMPONENTS.indexOf(P)!==-1}),b=useUtilityClasses$7(y);return jsxRuntimeExports.jsx(CardMediaRoot,_extends({className:clsx(b.root,A),as:P,role:!w&&O?"img":void 0,ref:s,style:k,ownerState:y,src:w?O||h:void 0},o,{children:r}))});function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:e,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:r,touchEvent:A="onTouchEnd"}=t,P=reactExports.useRef(!1),O=reactExports.useRef(null),h=reactExports.useRef(!1),v=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const o=useForkRef(e.ref,O),w=useEventCallback(b=>{const C=v.current;v.current=!1;const x=ownerDocument(O.current);if(!h.current||!O.current||"clientX"in b&&clickedRootScrollbar(b,x))return;if(P.current){P.current=!1;return}let p;b.composedPath?p=b.composedPath().indexOf(O.current)>-1:p=!x.documentElement.contains(b.target)||O.current.contains(b.target),!p&&(s||!C)&&r(b)}),k=b=>C=>{v.current=!0;const x=e.props[b];x&&x(C)},y={ref:o};return A!==!1&&(y[A]=k(A)),reactExports.useEffect(()=>{if(A!==!1){const b=mapEventPropToEvent(A),C=ownerDocument(O.current),x=()=>{P.current=!0};return C.addEventListener(b,w),C.addEventListener("touchmove",x),()=>{C.removeEventListener(b,w),C.removeEventListener("touchmove",x)}}},[w,A]),n!==!1&&(y[n]=k(n)),reactExports.useEffect(()=>{if(n!==!1){const b=mapEventPropToEvent(n),C=ownerDocument(O.current);return C.addEventListener(b,w),()=>{C.removeEventListener(b,w)}}},[w,n]),jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(e,y)})}function getDialogUtilityClass(t){return generateUtilityClass("MuiDialog",t)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),_excluded$6=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled$1(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),useUtilityClasses$6=t=>{const{classes:e,scroll:s,maxWidth:n,fullWidth:r,fullScreen:A}=t,P={root:["root"],container:["container",`scroll${capitalize(s)}`],paper:["paper",`paperScroll${capitalize(s)}`,`paperWidth${capitalize(String(n))}`,r&&"paperFullWidth",A&&"paperFullScreen"]};return composeClasses(P,getDialogUtilityClass,e)},DialogRoot=styled$1(Modal,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled$1("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.container,e[`scroll${capitalize(s.scroll)}`]]}})(({ownerState:t})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled$1(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.paper,e[`scrollPaper${capitalize(s.scroll)}`],e[`paperWidth${capitalize(String(s.maxWidth))}`],s.fullWidth&&e.paperFullWidth,s.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiDialog"}),r=useTheme$2(),A={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":P,"aria-labelledby":O,BackdropComponent:h,BackdropProps:v,children:o,className:w,disableEscapeKeyDown:k=!1,fullScreen:y=!1,fullWidth:b=!1,maxWidth:C="sm",onBackdropClick:x,onClick:p,onClose:E,open:F,PaperComponent:S=Paper,PaperProps:c={},scroll:g="paper",TransitionComponent:a=Fade,transitionDuration:f=A,TransitionProps:m}=n,D=_objectWithoutPropertiesLoose(n,_excluded$6),l=_extends({},n,{disableEscapeKeyDown:k,fullScreen:y,fullWidth:b,maxWidth:C,scroll:g}),R=useUtilityClasses$6(l),I=reactExports.useRef(),Q=se=>{I.current=se.target===se.currentTarget},G=se=>{p&&p(se),I.current&&(I.current=null,x&&x(se),E&&E(se,"backdropClick"))},q=useId(O),V=reactExports.useMemo(()=>({titleId:q}),[q]);return jsxRuntimeExports.jsx(DialogRoot,_extends({className:clsx(R.root,w),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:f,as:h},v)},disableEscapeKeyDown:k,onClose:E,open:F,ref:s,onClick:G,ownerState:l},D,{children:jsxRuntimeExports.jsx(a,_extends({appear:!0,in:F,timeout:f,role:"presentation"},m,{children:jsxRuntimeExports.jsx(DialogContainer,{className:clsx(R.container),onMouseDown:Q,ownerState:l,children:jsxRuntimeExports.jsx(DialogPaper,_extends({as:S,elevation:24,role:"dialog","aria-describedby":P,"aria-labelledby":q},c,{className:clsx(R.paper,c.className),ownerState:l,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:V,children:o})}))})}))}))});function getDialogContentUtilityClass(t){return generateUtilityClass("MuiDialogContent",t)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),_excluded$5=["className","dividers"],useUtilityClasses$5=t=>{const{classes:e,dividers:s}=t;return composeClasses({root:["root",s&&"dividers"]},getDialogContentUtilityClass,e)},DialogContentRoot=styled$1("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiDialogContent"}),{className:r,dividers:A=!1}=n,P=_objectWithoutPropertiesLoose(n,_excluded$5),O=_extends({},n,{dividers:A}),h=useUtilityClasses$5(O);return jsxRuntimeExports.jsx(DialogContentRoot,_extends({className:clsx(h.root,r),ownerState:O,ref:s},P))}),Stack=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),GridContext=reactExports.createContext();function getGridUtilityClass(t){return generateUtilityClass("MuiGrid",t)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(t=>`spacing-xs-${t}`),...DIRECTIONS.map(t=>`direction-xs-${t}`),...WRAPS.map(t=>`wrap-xs-${t}`),...GRID_SIZES.map(t=>`grid-xs-${t}`),...GRID_SIZES.map(t=>`grid-sm-${t}`),...GRID_SIZES.map(t=>`grid-md-${t}`),...GRID_SIZES.map(t=>`grid-lg-${t}`),...GRID_SIZES.map(t=>`grid-xl-${t}`)]),_excluded$4=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function generateGrid({theme:t,ownerState:e}){let s;return t.breakpoints.keys.reduce((n,r)=>{let A={};if(e[r]&&(s=e[r]),!s)return n;if(s===!0)A={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")A={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const P=resolveBreakpointValues({values:e.columns,breakpoints:t.breakpoints.values}),O=typeof P=="object"?P[r]:P;if(O==null)return n;const h=`${Math.round(s/O*1e8)/1e6}%`;let v={};if(e.container&&e.item&&e.columnSpacing!==0){const o=t.spacing(e.columnSpacing);if(o!=="0px"){const w=`calc(${h} + ${getOffset(o)})`;v={flexBasis:w,maxWidth:w}}}A=_extends({flexBasis:h,flexGrow:0,maxWidth:h},v)}return t.breakpoints.values[r]===0?Object.assign(n,A):n[t.breakpoints.up(r)]=A,n},{})}function generateDirection({theme:t,ownerState:e}){const s=resolveBreakpointValues({values:e.direction,breakpoints:t.breakpoints.values});return handleBreakpoints({theme:t},s,n=>{const r={flexDirection:n};return n.indexOf("column")===0&&(r[`& > .${gridClasses.item}`]={maxWidth:"none"}),r})}function extractZeroValueBreakpointKeys({breakpoints:t,values:e}){let s="";Object.keys(e).forEach(r=>{s===""&&e[r]!==0&&(s=r)});const n=Object.keys(t).sort((r,A)=>t[r]-t[A]);return n.slice(0,n.indexOf(s))}function generateRowGap({theme:t,ownerState:e}){const{container:s,rowSpacing:n}=e;let r={};if(s&&n!==0){const A=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let P;typeof A=="object"&&(P=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:A})),r=handleBreakpoints({theme:t},A,(O,h)=>{var v;const o=t.spacing(O);return o!=="0px"?{marginTop:`-${getOffset(o)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(o)}}:(v=P)!=null&&v.includes(h)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return r}function generateColumnGap({theme:t,ownerState:e}){const{container:s,columnSpacing:n}=e;let r={};if(s&&n!==0){const A=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let P;typeof A=="object"&&(P=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:A})),r=handleBreakpoints({theme:t},A,(O,h)=>{var v;const o=t.spacing(O);return o!=="0px"?{width:`calc(100% + ${getOffset(o)})`,marginLeft:`-${getOffset(o)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(o)}}:(v=P)!=null&&v.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return r}function resolveSpacingStyles(t,e,s={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[s[`spacing-xs-${String(t)}`]];const n=[];return e.forEach(r=>{const A=t[r];Number(A)>0&&n.push(s[`spacing-${r}-${String(A)}`])}),n}const GridRoot=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{container:n,direction:r,item:A,spacing:P,wrap:O,zeroMinWidth:h,breakpoints:v}=s;let o=[];n&&(o=resolveSpacingStyles(P,v,e));const w=[];return v.forEach(k=>{const y=s[k];y&&w.push(e[`grid-${k}-${String(y)}`])}),[e.root,n&&e.container,A&&e.item,h&&e.zeroMinWidth,...o,r!=="row"&&e[`direction-xs-${String(r)}`],O!=="wrap"&&e[`wrap-xs-${String(O)}`],...w]}})(({ownerState:t})=>_extends({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const s=[];return e.forEach(n=>{const r=t[n];if(Number(r)>0){const A=`spacing-${n}-${String(r)}`;s.push(A)}}),s}const useUtilityClasses$4=t=>{const{classes:e,container:s,direction:n,item:r,spacing:A,wrap:P,zeroMinWidth:O,breakpoints:h}=t;let v=[];s&&(v=resolveSpacingClasses(A,h));const o=[];h.forEach(k=>{const y=t[k];y&&o.push(`grid-${k}-${String(y)}`)});const w={root:["root",s&&"container",r&&"item",O&&"zeroMinWidth",...v,n!=="row"&&`direction-xs-${String(n)}`,P!=="wrap"&&`wrap-xs-${String(P)}`,...o]};return composeClasses(w,getGridUtilityClass,e)},Grid=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiGrid"}),{breakpoints:r}=useTheme$2(),A=extendSxProp(n),{className:P,columns:O,columnSpacing:h,component:v="div",container:o=!1,direction:w="row",item:k=!1,rowSpacing:y,spacing:b=0,wrap:C="wrap",zeroMinWidth:x=!1}=A,p=_objectWithoutPropertiesLoose(A,_excluded$4),E=y||b,F=h||b,S=reactExports.useContext(GridContext),c=o?O||12:S,g={},a=_extends({},p);r.keys.forEach(D=>{p[D]!=null&&(g[D]=p[D],delete a[D])});const f=_extends({},A,{columns:c,container:o,direction:w,item:k,rowSpacing:E,columnSpacing:F,wrap:C,zeroMinWidth:x,spacing:b},g,{breakpoints:r.keys}),m=useUtilityClasses$4(f);return jsxRuntimeExports.jsx(GridContext.Provider,{value:c,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:f,className:clsx(m.root,P),as:v,ref:s},a))})});function getLinearProgressUtilityClass(t){return generateUtilityClass("MuiLinearProgress",t)}generateUtilityClasses("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const _excluded$3=["className","color","value","valueBuffer","variant"];let _=t=>t,_t,_t2,_t3,_t4,_t5,_t6;const TRANSITION_DURATION=4,indeterminate1Keyframe=keyframes(_t||(_t=_`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),indeterminate2Keyframe=keyframes(_t2||(_t2=_`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),bufferKeyframe=keyframes(_t3||(_t3=_`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),useUtilityClasses$3=t=>{const{classes:e,variant:s,color:n}=t,r={root:["root",`color${capitalize(n)}`,s],dashed:["dashed",`dashedColor${capitalize(n)}`],bar1:["bar",`barColor${capitalize(n)}`,(s==="indeterminate"||s==="query")&&"bar1Indeterminate",s==="determinate"&&"bar1Determinate",s==="buffer"&&"bar1Buffer"],bar2:["bar",s!=="buffer"&&`barColor${capitalize(n)}`,s==="buffer"&&`color${capitalize(n)}`,(s==="indeterminate"||s==="query")&&"bar2Indeterminate",s==="buffer"&&"bar2Buffer"]};return composeClasses(r,getLinearProgressUtilityClass,e)},getColorShade=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?lighten_1(t.palette[e].main,.62):darken_1(t.palette[e].main,.5),LinearProgressRoot=styled$1("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[`color${capitalize(s.color)}`],e[s.variant]]}})(({ownerState:t,theme:e})=>_extends({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:getColorShade(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),LinearProgressDashed=styled$1("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.dashed,e[`dashedColor${capitalize(s.color)}`]]}})(({ownerState:t,theme:e})=>{const s=getColorShade(e,t.color);return _extends({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${s} 0%, ${s} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},css(_t4||(_t4=_`
    animation: ${0} 3s infinite linear;
  `),bufferKeyframe)),LinearProgressBar1=styled$1("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.bar,e[`barColor${capitalize(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&e.bar1Indeterminate,s.variant==="determinate"&&e.bar1Determinate,s.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${TRANSITION_DURATION}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&css(_t5||(_t5=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),indeterminate1Keyframe)),LinearProgressBar2=styled$1("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.bar,e[`barColor${capitalize(s.color)}`],(s.variant==="indeterminate"||s.variant==="query")&&e.bar2Indeterminate,s.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:getColorShade(e,t.color),transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&css(_t6||(_t6=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),indeterminate2Keyframe)),LinearProgress=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiLinearProgress"}),{className:r,color:A="primary",value:P,valueBuffer:O,variant:h="indeterminate"}=n,v=_objectWithoutPropertiesLoose(n,_excluded$3),o=_extends({},n,{color:A,variant:h}),w=useUtilityClasses$3(o),k=useRtl(),y={},b={bar1:{},bar2:{}};if((h==="determinate"||h==="buffer")&&P!==void 0){y["aria-valuenow"]=Math.round(P),y["aria-valuemin"]=0,y["aria-valuemax"]=100;let C=P-100;k&&(C=-C),b.bar1.transform=`translateX(${C}%)`}if(h==="buffer"&&O!==void 0){let C=(O||0)-100;k&&(C=-C),b.bar2.transform=`translateX(${C}%)`}return jsxRuntimeExports.jsxs(LinearProgressRoot,_extends({className:clsx(w.root,r),ownerState:o,role:"progressbar"},y,{ref:s},v,{children:[h==="buffer"?jsxRuntimeExports.jsx(LinearProgressDashed,{className:w.dashed,ownerState:o}):null,jsxRuntimeExports.jsx(LinearProgressBar1,{className:w.bar1,ownerState:o,style:b.bar1}),h==="determinate"?null:jsxRuntimeExports.jsx(LinearProgressBar2,{className:w.bar2,ownerState:o,style:b.bar2})]}))});function useSnackbar(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:s=!1,onClose:n,open:r,resumeHideDuration:A}=t,P=useTimeout();reactExports.useEffect(()=>{if(!r)return;function p(E){E.defaultPrevented||(E.key==="Escape"||E.key==="Esc")&&(n==null||n(E,"escapeKeyDown"))}return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[r,n]);const O=useEventCallback((p,E)=>{n==null||n(p,E)}),h=useEventCallback(p=>{!n||p==null||P.start(p,()=>{O(null,"timeout")})});reactExports.useEffect(()=>(r&&h(e),P.clear),[r,e,h,P]);const v=p=>{n==null||n(p,"clickaway")},o=P.clear,w=reactExports.useCallback(()=>{e!=null&&h(A??e*.5)},[e,A,h]),k=p=>E=>{const F=p.onBlur;F==null||F(E),w()},y=p=>E=>{const F=p.onFocus;F==null||F(E),o()},b=p=>E=>{const F=p.onMouseEnter;F==null||F(E),o()},C=p=>E=>{const F=p.onMouseLeave;F==null||F(E),w()};return reactExports.useEffect(()=>{if(!s&&r)return window.addEventListener("focus",w),window.addEventListener("blur",o),()=>{window.removeEventListener("focus",w),window.removeEventListener("blur",o)}},[s,r,w,o]),{getRootProps:(p={})=>{const E=_extends({},extractEventHandlers(t),extractEventHandlers(p));return _extends({role:"presentation"},p,E,{onBlur:k(E),onFocus:y(E),onMouseEnter:b(E),onMouseLeave:C(E)})},onClickAway:v}}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$2=["action","className","message","role"],useUtilityClasses$2=t=>{const{classes:e}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,e)},SnackbarContentRoot=styled$1(Paper,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,s=emphasize_1(t.palette.background.default,e);return _extends({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(s),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:s,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled$1("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),SnackbarContentAction=styled$1("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiSnackbarContent"}),{action:r,className:A,message:P,role:O="alert"}=n,h=_objectWithoutPropertiesLoose(n,_excluded$2),v=n,o=useUtilityClasses$2(v);return jsxRuntimeExports.jsxs(SnackbarContentRoot,_extends({role:O,square:!0,elevation:6,className:clsx(o.root,A),ownerState:v,ref:s},h,{children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:o.message,ownerState:v,children:P}),r?jsxRuntimeExports.jsx(SnackbarContentAction,{className:o.action,ownerState:v,children:r}):null]}))});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded$1=["onEnter","onExited"],_excluded2=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses$1=t=>{const{classes:e,anchorOrigin:s}=t,n={root:["root",`anchorOrigin${capitalize(s.vertical)}${capitalize(s.horizontal)}`]};return composeClasses(n,getSnackbarUtilityClass,e)},SnackbarRoot=styled$1("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[`anchorOrigin${capitalize(s.anchorOrigin.vertical)}${capitalize(s.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const s={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:_extends({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&s,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiSnackbar"}),r=useTheme$2(),A={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:P,anchorOrigin:{vertical:O,horizontal:h}={vertical:"bottom",horizontal:"left"},autoHideDuration:v=null,children:o,className:w,ClickAwayListenerProps:k,ContentProps:y,disableWindowBlurListener:b=!1,message:C,open:x,TransitionComponent:p=Grow,transitionDuration:E=A,TransitionProps:{onEnter:F,onExited:S}={}}=n,c=_objectWithoutPropertiesLoose(n.TransitionProps,_excluded$1),g=_objectWithoutPropertiesLoose(n,_excluded2),a=_extends({},n,{anchorOrigin:{vertical:O,horizontal:h},autoHideDuration:v,disableWindowBlurListener:b,TransitionComponent:p,transitionDuration:E}),f=useUtilityClasses$1(a),{getRootProps:m,onClickAway:D}=useSnackbar(_extends({},a)),[l,R]=reactExports.useState(!0),I=useSlotProps({elementType:SnackbarRoot,getSlotProps:m,externalForwardedProps:g,ownerState:a,additionalProps:{ref:s},className:[f.root,w]}),Q=q=>{R(!0),S&&S(q)},G=(q,V)=>{R(!1),F&&F(q,V)};return!x&&l?null:jsxRuntimeExports.jsx(ClickAwayListener,_extends({onClickAway:D},k,{children:jsxRuntimeExports.jsx(SnackbarRoot,_extends({},I,{children:jsxRuntimeExports.jsx(p,_extends({appear:!0,in:x,timeout:E,direction:O==="top"?"down":"up",onEnter:G,onExited:Q},c,{children:o||jsxRuntimeExports.jsx(SnackbarContent,_extends({message:C,action:P},y))}))}))}))});function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),_excluded=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(t){return Math.round(t*1e5)/1e5}const useUtilityClasses=t=>{const{classes:e,disableInteractive:s,arrow:n,touch:r,placement:A}=t,P={popper:["popper",!s&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",r&&"touch",`tooltipPlacement${capitalize(A.split("-")[0])}`],arrow:["arrow"]};return composeClasses(P,getTooltipUtilityClass,e)},TooltipPopper=styled$1(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.popper,!s.disableInteractive&&e.popperInteractive,s.arrow&&e.popperArrow,!s.open&&e.popperClose]}})(({theme:t,ownerState:e,open:s})=>_extends({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!s&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:_extends({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:_extends({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.tooltip,s.touch&&e.touch,s.arrow&&e.tooltipArrow,e[`tooltipPlacement${capitalize(s.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>_extends({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:alpha_1(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},e.isRtl?_extends({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},e.isRtl?_extends({marginRight:"14px"},e.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:alpha_1(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,e){return(s,...n)=>{e&&e(s,...n),t(s,...n)}}const Tooltip=reactExports.forwardRef(function(e,s){var n,r,A,P,O,h,v,o,w,k,y,b,C,x,p,E,F,S,c;const g=useDefaultProps({props:e,name:"MuiTooltip"}),{arrow:a=!1,children:f,components:m={},componentsProps:D={},describeChild:l=!1,disableFocusListener:R=!1,disableHoverListener:I=!1,disableInteractive:Q=!1,disableTouchListener:G=!1,enterDelay:q=100,enterNextDelay:V=0,enterTouchDelay:se=700,followCursor:L=!1,id:X,leaveDelay:re=0,leaveTouchDelay:N=1500,onClose:d,onOpen:u,open:T,placement:j="bottom",PopperComponent:U,PopperProps:B={},slotProps:Y={},slots:ie={},title:le,TransitionComponent:fe=Grow,TransitionProps:ye}=g,me=_objectWithoutPropertiesLoose(g,_excluded),ve=reactExports.isValidElement(f)?f:jsxRuntimeExports.jsx("span",{children:f}),Z=useTheme$2(),ee=useRtl(),[M,z]=reactExports.useState(),[J,ae]=reactExports.useState(null),ge=reactExports.useRef(!1),Ae=Q||L,_e=useTimeout(),te=useTimeout(),Pe=useTimeout(),Ce=useTimeout(),[Ue,je]=useControlled({controlled:T,default:!1,name:"Tooltip",state:"open"});let ze=Ue;const ke=useId(X),Oe=reactExports.useRef(),He=useEventCallback(()=>{Oe.current!==void 0&&(document.body.style.WebkitUserSelect=Oe.current,Oe.current=void 0),Ce.clear()});reactExports.useEffect(()=>He,[He]);const Xe=Ye=>{hystersisTimer.clear(),hystersisOpen=!0,je(!0),u&&!ze&&u(Ye)},Ee=useEventCallback(Ye=>{hystersisTimer.start(800+re,()=>{hystersisOpen=!1}),je(!1),d&&ze&&d(Ye),_e.start(Z.transitions.duration.shortest,()=>{ge.current=!1})}),oe=Ye=>{ge.current&&Ye.type!=="touchstart"||(M&&M.removeAttribute("title"),te.clear(),Pe.clear(),q||hystersisOpen&&V?te.start(hystersisOpen?V:q,()=>{Xe(Ye)}):Xe(Ye))},de=Ye=>{te.clear(),Pe.start(re,()=>{Ee(Ye)})},{isFocusVisibleRef:Me,onBlur:qe,onFocus:Ge,ref:H}=useIsFocusVisible(),[,be]=reactExports.useState(!1),we=Ye=>{qe(Ye),Me.current===!1&&(be(!1),de(Ye))},Ie=Ye=>{M||z(Ye.currentTarget),Ge(Ye),Me.current===!0&&(be(!0),oe(Ye))},$e=Ye=>{ge.current=!0;const et=ve.props;et.onTouchStart&&et.onTouchStart(Ye)},Re=Ye=>{$e(Ye),Pe.clear(),_e.clear(),He(),Oe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ce.start(se,()=>{document.body.style.WebkitUserSelect=Oe.current,oe(Ye)})},W=Ye=>{ve.props.onTouchEnd&&ve.props.onTouchEnd(Ye),He(),Pe.start(N,()=>{Ee(Ye)})};reactExports.useEffect(()=>{if(!ze)return;function Ye(et){(et.key==="Escape"||et.key==="Esc")&&Ee(et)}return document.addEventListener("keydown",Ye),()=>{document.removeEventListener("keydown",Ye)}},[Ee,ze]);const $=useForkRef(ve.ref,H,z,s);!le&&le!==0&&(ze=!1);const K=reactExports.useRef(),he=Ye=>{const et=ve.props;et.onMouseMove&&et.onMouseMove(Ye),cursorPosition={x:Ye.clientX,y:Ye.clientY},K.current&&K.current.update()},pe={},xe=typeof le=="string";l?(pe.title=!ze&&xe&&!I?le:null,pe["aria-describedby"]=ze?ke:null):(pe["aria-label"]=xe?le:null,pe["aria-labelledby"]=ze&&!xe?ke:null);const Se=_extends({},pe,me,ve.props,{className:clsx(me.className,ve.props.className),onTouchStart:$e,ref:$},L?{onMouseMove:he}:{}),Fe={};G||(Se.onTouchStart=Re,Se.onTouchEnd=W),I||(Se.onMouseOver=composeEventHandler(oe,Se.onMouseOver),Se.onMouseLeave=composeEventHandler(de,Se.onMouseLeave),Ae||(Fe.onMouseOver=oe,Fe.onMouseLeave=de)),R||(Se.onFocus=composeEventHandler(Ie,Se.onFocus),Se.onBlur=composeEventHandler(we,Se.onBlur),Ae||(Fe.onFocus=Ie,Fe.onBlur=we));const De=reactExports.useMemo(()=>{var Ye;let et=[{name:"arrow",enabled:!!J,options:{element:J,padding:4}}];return(Ye=B.popperOptions)!=null&&Ye.modifiers&&(et=et.concat(B.popperOptions.modifiers)),_extends({},B.popperOptions,{modifiers:et})},[J,B]),Te=_extends({},g,{isRtl:ee,arrow:a,disableInteractive:Ae,placement:j,PopperComponentProp:U,touch:ge.current}),We=useUtilityClasses(Te),Le=(n=(r=ie.popper)!=null?r:m.Popper)!=null?n:TooltipPopper,Ne=(A=(P=(O=ie.transition)!=null?O:m.Transition)!=null?P:fe)!=null?A:Grow,Be=(h=(v=ie.tooltip)!=null?v:m.Tooltip)!=null?h:TooltipTooltip,Ve=(o=(w=ie.arrow)!=null?w:m.Arrow)!=null?o:TooltipArrow,Ke=appendOwnerState(Le,_extends({},B,(k=Y.popper)!=null?k:D.popper,{className:clsx(We.popper,B==null?void 0:B.className,(y=(b=Y.popper)!=null?b:D.popper)==null?void 0:y.className)}),Te),Je=appendOwnerState(Ne,_extends({},ye,(C=Y.transition)!=null?C:D.transition),Te),tt=appendOwnerState(Be,_extends({},(x=Y.tooltip)!=null?x:D.tooltip,{className:clsx(We.tooltip,(p=(E=Y.tooltip)!=null?E:D.tooltip)==null?void 0:p.className)}),Te),Ze=appendOwnerState(Ve,_extends({},(F=Y.arrow)!=null?F:D.arrow,{className:clsx(We.arrow,(S=(c=Y.arrow)!=null?c:D.arrow)==null?void 0:S.className)}),Te);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(ve,Se),jsxRuntimeExports.jsx(Le,_extends({as:U??Popper,placement:j,anchorEl:L?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:M,popperRef:K,open:M?ze:!1,id:ke,transition:!0},Fe,Ke,{popperOptions:De,children:({TransitionProps:Ye})=>jsxRuntimeExports.jsx(Ne,_extends({timeout:Z.transitions.duration.shorter},Ye,Je,{children:jsxRuntimeExports.jsxs(Be,_extends({},tt,{children:[le,a?jsxRuntimeExports.jsx(Ve,_extends({},Ze,{ref:ae})):null]}))}))}))]})});var CloudUpload={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1$5=CloudUpload.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=CloudUpload.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var MenuBook={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(MenuBook,"__esModule",{value:!0});var default_1$4=MenuBook.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=MenuBook.default=(0,_createSvgIcon$4.default)([(0,_jsxRuntime$4.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,_jsxRuntime$4.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var Preview={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Preview,"__esModule",{value:!0});var default_1$3=Preview.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=Preview.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var Image$1={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Image$1,"__esModule",{value:!0});var default_1$2=Image$1.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=Image$1.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");var Article={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Article,"__esModule",{value:!0});var default_1$1=Article.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Article.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Xe;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=L,e.bytesToString=le,e.createValidAbsoluteUrl=re,e.getModificationDate=Ce,e.getUuid=Oe,e.getVerbosityLevel=G,e.info=q,e.isArrayBuffer=te,e.isArrayEqual=Pe,e.isNodeJS=void 0,e.normalizeUnicode=ke,e.objectFromMap=ve,e.objectSize=me,e.setVerbosityLevel=Q,e.shadow=N,e.string32=ye,e.stringToBytes=fe,e.stringToPDFString=ge,e.stringToUTF8String=Ae,e.unreachable=se,e.utf8StringToString=_e,e.warn=V;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const r=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=r;const A=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=A;const P=1.35;e.LINE_FACTOR=P;const O=.35;e.LINE_DESCENT_FACTOR=O;const h=O/P;e.BASELINE_FACTOR=h;const v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=v;const o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=o;const w="pdfjs_internal_editor_";e.AnnotationEditorPrefix=w;const k={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=k;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=y;const b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=b;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=C;const x={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=x;const p={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=p;const E={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=E;const F={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=F;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=S;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=c;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=g;const a={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=a;const f={O:"PageOpen",C:"PageClose"};e.PageActionEventType=f;const m={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=m;const D={NONE:0,BINARY:1};e.CMapCompressionType=D;const l={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=l;const R={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=R;let I=m.WARNINGS;function Q(Ee){Number.isInteger(Ee)&&(I=Ee)}function G(){return I}function q(Ee){I>=m.INFOS&&console.log(`Info: ${Ee}`)}function V(Ee){I>=m.WARNINGS&&console.log(`Warning: ${Ee}`)}function se(Ee){throw new Error(Ee)}function L(Ee,oe){Ee||se(oe)}function X(Ee){switch(Ee==null?void 0:Ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function re(Ee,oe=null,de=null){if(!Ee)return null;try{if(de&&typeof Ee=="string"){if(de.addDefaultProtocol&&Ee.startsWith("www.")){const qe=Ee.match(/\./g);(qe==null?void 0:qe.length)>=2&&(Ee=`http://${Ee}`)}if(de.tryConvertEncoding)try{Ee=Ae(Ee)}catch{}}const Me=oe?new URL(Ee,oe):new URL(Ee);if(X(Me))return Me}catch{}return null}function N(Ee,oe,de,Me=!1){return Object.defineProperty(Ee,oe,{value:de,enumerable:!Me,configurable:!0,writable:!1}),de}const d=function(){function oe(de,Me){this.constructor===oe&&se("Cannot initialize BaseException."),this.message=de,this.name=Me}return oe.prototype=new Error,oe.constructor=oe,oe}();e.BaseException=d;class u extends d{constructor(oe,de){super(oe,"PasswordException"),this.code=de}}e.PasswordException=u;class T extends d{constructor(oe,de){super(oe,"UnknownErrorException"),this.details=de}}e.UnknownErrorException=T;class j extends d{constructor(oe){super(oe,"InvalidPDFException")}}e.InvalidPDFException=j;class U extends d{constructor(oe){super(oe,"MissingPDFException")}}e.MissingPDFException=U;class B extends d{constructor(oe,de){super(oe,"UnexpectedResponseException"),this.status=de}}e.UnexpectedResponseException=B;class Y extends d{constructor(oe){super(oe,"FormatError")}}e.FormatError=Y;class ie extends d{constructor(oe){super(oe,"AbortException")}}e.AbortException=ie;function le(Ee){(typeof Ee!="object"||(Ee==null?void 0:Ee.length)===void 0)&&se("Invalid argument for bytesToString");const oe=Ee.length,de=8192;if(oe<de)return String.fromCharCode.apply(null,Ee);const Me=[];for(let qe=0;qe<oe;qe+=de){const Ge=Math.min(qe+de,oe),H=Ee.subarray(qe,Ge);Me.push(String.fromCharCode.apply(null,H))}return Me.join("")}function fe(Ee){typeof Ee!="string"&&se("Invalid argument for stringToBytes");const oe=Ee.length,de=new Uint8Array(oe);for(let Me=0;Me<oe;++Me)de[Me]=Ee.charCodeAt(Me)&255;return de}function ye(Ee){return String.fromCharCode(Ee>>24&255,Ee>>16&255,Ee>>8&255,Ee&255)}function me(Ee){return Object.keys(Ee).length}function ve(Ee){const oe=Object.create(null);for(const[de,Me]of Ee)oe[de]=Me;return oe}function Z(){const Ee=new Uint8Array(4);return Ee[0]=1,new Uint32Array(Ee.buffer,0,1)[0]===1}function ee(){try{return new Function(""),!0}catch{return!1}}class M{static get isLittleEndian(){return N(this,"isLittleEndian",Z())}static get isEvalSupported(){return N(this,"isEvalSupported",ee())}static get isOffscreenCanvasSupported(){return N(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?N(this,"platform",{isWin:!1,isMac:!1}):N(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var oe,de;return N(this,"isCSSRoundSupported",(de=(oe=globalThis.CSS)==null?void 0:oe.supports)==null?void 0:de.call(oe,"width: round(1.5px, 1px)"))}}e.FeatureTest=M;const z=[...Array(256).keys()].map(Ee=>Ee.toString(16).padStart(2,"0"));class J{static makeHexColor(oe,de,Me){return`#${z[oe]}${z[de]}${z[Me]}`}static scaleMinMax(oe,de){let Me;oe[0]?(oe[0]<0&&(Me=de[0],de[0]=de[1],de[1]=Me),de[0]*=oe[0],de[1]*=oe[0],oe[3]<0&&(Me=de[2],de[2]=de[3],de[3]=Me),de[2]*=oe[3],de[3]*=oe[3]):(Me=de[0],de[0]=de[2],de[2]=Me,Me=de[1],de[1]=de[3],de[3]=Me,oe[1]<0&&(Me=de[2],de[2]=de[3],de[3]=Me),de[2]*=oe[1],de[3]*=oe[1],oe[2]<0&&(Me=de[0],de[0]=de[1],de[1]=Me),de[0]*=oe[2],de[1]*=oe[2]),de[0]+=oe[4],de[1]+=oe[4],de[2]+=oe[5],de[3]+=oe[5]}static transform(oe,de){return[oe[0]*de[0]+oe[2]*de[1],oe[1]*de[0]+oe[3]*de[1],oe[0]*de[2]+oe[2]*de[3],oe[1]*de[2]+oe[3]*de[3],oe[0]*de[4]+oe[2]*de[5]+oe[4],oe[1]*de[4]+oe[3]*de[5]+oe[5]]}static applyTransform(oe,de){const Me=oe[0]*de[0]+oe[1]*de[2]+de[4],qe=oe[0]*de[1]+oe[1]*de[3]+de[5];return[Me,qe]}static applyInverseTransform(oe,de){const Me=de[0]*de[3]-de[1]*de[2],qe=(oe[0]*de[3]-oe[1]*de[2]+de[2]*de[5]-de[4]*de[3])/Me,Ge=(-oe[0]*de[1]+oe[1]*de[0]+de[4]*de[1]-de[5]*de[0])/Me;return[qe,Ge]}static getAxialAlignedBoundingBox(oe,de){const Me=this.applyTransform(oe,de),qe=this.applyTransform(oe.slice(2,4),de),Ge=this.applyTransform([oe[0],oe[3]],de),H=this.applyTransform([oe[2],oe[1]],de);return[Math.min(Me[0],qe[0],Ge[0],H[0]),Math.min(Me[1],qe[1],Ge[1],H[1]),Math.max(Me[0],qe[0],Ge[0],H[0]),Math.max(Me[1],qe[1],Ge[1],H[1])]}static inverseTransform(oe){const de=oe[0]*oe[3]-oe[1]*oe[2];return[oe[3]/de,-oe[1]/de,-oe[2]/de,oe[0]/de,(oe[2]*oe[5]-oe[4]*oe[3])/de,(oe[4]*oe[1]-oe[5]*oe[0])/de]}static singularValueDecompose2dScale(oe){const de=[oe[0],oe[2],oe[1],oe[3]],Me=oe[0]*de[0]+oe[1]*de[2],qe=oe[0]*de[1]+oe[1]*de[3],Ge=oe[2]*de[0]+oe[3]*de[2],H=oe[2]*de[1]+oe[3]*de[3],be=(Me+H)/2,we=Math.sqrt((Me+H)**2-4*(Me*H-Ge*qe))/2,Ie=be+we||1,$e=be-we||1;return[Math.sqrt(Ie),Math.sqrt($e)]}static normalizeRect(oe){const de=oe.slice(0);return oe[0]>oe[2]&&(de[0]=oe[2],de[2]=oe[0]),oe[1]>oe[3]&&(de[1]=oe[3],de[3]=oe[1]),de}static intersect(oe,de){const Me=Math.max(Math.min(oe[0],oe[2]),Math.min(de[0],de[2])),qe=Math.min(Math.max(oe[0],oe[2]),Math.max(de[0],de[2]));if(Me>qe)return null;const Ge=Math.max(Math.min(oe[1],oe[3]),Math.min(de[1],de[3])),H=Math.min(Math.max(oe[1],oe[3]),Math.max(de[1],de[3]));return Ge>H?null:[Me,Ge,qe,H]}static bezierBoundingBox(oe,de,Me,qe,Ge,H,be,we){const Ie=[],$e=[[],[]];let Re,W,$,K,he,pe,xe,Se;for(let We=0;We<2;++We){if(We===0?(W=6*oe-12*Me+6*Ge,Re=-3*oe+9*Me-9*Ge+3*be,$=3*Me-3*oe):(W=6*de-12*qe+6*H,Re=-3*de+9*qe-9*H+3*we,$=3*qe-3*de),Math.abs(Re)<1e-12){if(Math.abs(W)<1e-12)continue;K=-$/W,0<K&&K<1&&Ie.push(K);continue}xe=W*W-4*$*Re,Se=Math.sqrt(xe),!(xe<0)&&(he=(-W+Se)/(2*Re),0<he&&he<1&&Ie.push(he),pe=(-W-Se)/(2*Re),0<pe&&pe<1&&Ie.push(pe))}let Fe=Ie.length,De;const Te=Fe;for(;Fe--;)K=Ie[Fe],De=1-K,$e[0][Fe]=De*De*De*oe+3*De*De*K*Me+3*De*K*K*Ge+K*K*K*be,$e[1][Fe]=De*De*De*de+3*De*De*K*qe+3*De*K*K*H+K*K*K*we;return $e[0][Te]=oe,$e[1][Te]=de,$e[0][Te+1]=be,$e[1][Te+1]=we,$e[0].length=$e[1].length=Te+2,[Math.min(...$e[0]),Math.min(...$e[1]),Math.max(...$e[0]),Math.max(...$e[1])]}}e.Util=J;const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ge(Ee){if(Ee[0]>=""){let de;if(Ee[0]===""&&Ee[1]===""?de="utf-16be":Ee[0]===""&&Ee[1]===""?de="utf-16le":Ee[0]===""&&Ee[1]===""&&Ee[2]===""&&(de="utf-8"),de)try{const Me=new TextDecoder(de,{fatal:!0}),qe=fe(Ee);return Me.decode(qe)}catch(Me){V(`stringToPDFString: "${Me}".`)}}const oe=[];for(let de=0,Me=Ee.length;de<Me;de++){const qe=ae[Ee.charCodeAt(de)];oe.push(qe?String.fromCharCode(qe):Ee.charAt(de))}return oe.join("")}function Ae(Ee){return decodeURIComponent(escape(Ee))}function _e(Ee){return unescape(encodeURIComponent(Ee))}function te(Ee){return typeof Ee=="object"&&(Ee==null?void 0:Ee.byteLength)!==void 0}function Pe(Ee,oe){if(Ee.length!==oe.length)return!1;for(let de=0,Me=Ee.length;de<Me;de++)if(Ee[de]!==oe[de])return!1;return!0}function Ce(Ee=new Date){return[Ee.getUTCFullYear().toString(),(Ee.getUTCMonth()+1).toString().padStart(2,"0"),Ee.getUTCDate().toString().padStart(2,"0"),Ee.getUTCHours().toString().padStart(2,"0"),Ee.getUTCMinutes().toString().padStart(2,"0"),Ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ue{constructor(){ce(this,Xe,!1);this.promise=new Promise((oe,de)=>{this.resolve=Me=>{ue(this,Xe,!0),oe(Me)},this.reject=Me=>{ue(this,Xe,!0),de(Me)}})}get settled(){return i(this,Xe)}}Xe=new WeakMap,e.PromiseCapability=Ue;let je=null,ze=null;function ke(Ee){return je||(je=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ze=new Map([["","t"]])),Ee.replaceAll(je,(oe,de,Me)=>de?de.normalize("NFKC"):ze.get(Me))}function Oe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ee);else for(let oe=0;oe<32;oe++)Ee[oe]=Math.floor(Math.random()*255);return le(Ee)}const He="pdfjs_internal_id_";e.AnnotationPrefix=He},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,r,at,yt,O,h,v,o,w,k,y,b,C,xt,p,E,Lt,S,c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(a){if(typeof a=="string"||a instanceof URL?a={url:a}:(0,_util.isArrayBuffer)(a)&&(a={data:a}),typeof a!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!a.url&&!a.data&&!a.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const f=new PDFDocumentLoadingTask,{docId:m}=f,D=a.url?getUrlProp(a.url):null,l=a.data?getDataProp(a.data):null,R=a.httpHeaders||null,I=a.withCredentials===!0,Q=a.password??null,G=a.range instanceof PDFDataRangeTransport?a.range:null,q=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=a.worker instanceof PDFWorker?a.worker:null;const se=a.verbosity,L=typeof a.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(a.docBaseUrl)?a.docBaseUrl:null,X=typeof a.cMapUrl=="string"?a.cMapUrl:null,re=a.cMapPacked!==!1,N=a.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,u=a.StandardFontDataFactory||DefaultStandardFontDataFactory,T=a.stopAtErrors!==!0,j=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,U=a.isEvalSupported!==!1,B=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!_util.isNodeJS,Y=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,ie=typeof a.disableFontFace=="boolean"?a.disableFontFace:_util.isNodeJS,le=a.fontExtraProperties===!0,fe=a.enableXfa===!0,ye=a.ownerDocument||globalThis.document,me=a.disableRange===!0,ve=a.disableStream===!0,Z=a.disableAutoFetch===!0,ee=a.pdfBug===!0,M=G?G.length:a.length??NaN,z=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!_util.isNodeJS&&!ie,J=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:N===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&X&&d&&(0,_display_utils.isValidFetchUrl)(X,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),ae=a.canvasFactory||new DefaultCanvasFactory({ownerDocument:ye}),ge=a.filterFactory||new DefaultFilterFactory({docId:m,ownerDocument:ye}),Ae=null;(0,_util.setVerbosityLevel)(se);const _e={canvasFactory:ae,filterFactory:ge};if(J||(_e.cMapReaderFactory=new N({baseUrl:X,isCompressed:re}),_e.standardFontDataFactory=new u({baseUrl:d})),!V){const Ce={verbosity:se,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ce.port?PDFWorker.fromPort(Ce):new PDFWorker(Ce),f._worker=V}const te={docId:m,apiVersion:"3.11.174",data:l,password:Q,disableAutoFetch:Z,rangeChunkSize:q,length:M,docBaseUrl:L,enableXfa:fe,evaluatorOptions:{maxImageSize:j,disableFontFace:ie,ignoreErrors:T,isEvalSupported:U,isOffscreenCanvasSupported:B,canvasMaxAreaInBytes:Y,fontExtraProperties:le,useSystemFonts:z,cMapUrl:J?X:null,standardFontDataUrl:J?d:null}},Pe={ignoreErrors:T,isEvalSupported:U,disableFontFace:ie,fontExtraProperties:le,enableXfa:fe,ownerDocument:ye,disableAutoFetch:Z,pdfBug:ee,styleElement:Ae};return V.promise.then(function(){if(f.destroyed)throw new Error("Loading aborted");const Ce=_fetchDocument(V,te),Ue=new Promise(function(je){let ze;G?ze=new _transport_stream.PDFDataTransportStream({length:M,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:me,disableStream:ve},G):l||(ze=(Oe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Oe):(0,_display_utils.isValidFetchUrl)(Oe.url)?new _displayFetch_stream.PDFFetchStream(Oe):new _displayNetwork.PDFNetworkStream(Oe))({url:D,length:M,httpHeaders:R,withCredentials:I,rangeChunkSize:q,disableRange:me,disableStream:ve})),je(ze)});return Promise.all([Ce,Ue]).then(function([je,ze]){if(f.destroyed)throw new Error("Loading aborted");const ke=new _message_handler.MessageHandler(m,je,V.port),Oe=new WorkerTransport(ke,f,ze,Pe,_e);f._transport=Oe,ke.send("Ready",null)})}).catch(f._capability.reject),f}async function _fetchDocument(a,f){if(a.destroyed)throw new Error("Worker was destroyed");const m=await a.messageHandler.sendWithPromise("GetDocRequest",f,f.data?[f.data.buffer]:null);if(a.destroyed)throw new Error("Worker was destroyed");return m}function getUrlProp(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(_util.isNodeJS&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(a){if(_util.isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return(0,_util.stringToBytes)(a);if(typeof a=="object"&&!isNaN(a==null?void 0:a.length)||(0,_util.isArrayBuffer)(a))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ut(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var f,m,D;this.destroyed=!0;try{(f=this._worker)!=null&&f.port&&(this._worker._pendingDestroy=!0),await((m=this._transport)==null?void 0:m.destroy())}catch(l){throw(D=this._worker)!=null&&D.port&&delete this._worker._pendingDestroy,l}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,ce(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(f,m,D=!1,l=null){this.length=f,this.initialData=m,this.progressiveDone=D,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(f){this._rangeListeners.push(f)}addProgressListener(f){this._progressListeners.push(f)}addProgressiveReadListener(f){this._progressiveReadListeners.push(f)}addProgressiveDoneListener(f){this._progressiveDoneListeners.push(f)}onDataRange(f,m){for(const D of this._rangeListeners)D(f,m)}onDataProgress(f,m){this._readyCapability.promise.then(()=>{for(const D of this._progressListeners)D(f,m)})}onDataProgressiveRead(f){this._readyCapability.promise.then(()=>{for(const m of this._progressiveReadListeners)m(f)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const f of this._progressiveDoneListeners)f()})}transportReady(){this._readyCapability.resolve()}requestDataRange(f,m){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(f,m){this._pdfInfo=f,this._transport=m,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(D=>{if(!D)return D;const l=[];for(const R in D)l.push(...D[R]);return l}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(f){return this._transport.getPage(f)}getPageIndex(f){return this._transport.getPageIndex(f)}getDestinations(){return this._transport.getDestinations()}getDestination(f){return this._transport.getDestination(f)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(f=!1){return this._transport.startCleanup(f||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(f,m,D,l=!1){ce(this,r);ce(this,s,null);ce(this,n,!1);this._pageIndex=f,this._pageInfo=m,this._transport=D,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=D.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:f,rotation:m=this.rotate,offsetX:D=0,offsetY:l=0,dontFlip:R=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:f,rotation:m,offsetX:D,offsetY:l,dontFlip:R})}getAnnotations({intent:f="display"}={}){const m=this._transport.getRenderingIntent(f);return this._transport.getAnnotations(this._pageIndex,m.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var f;return((f=this._transport._htmlForXfa)==null?void 0:f.children[this._pageIndex])||null}render({canvasContext:f,viewport:m,intent:D="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:R=null,background:I=null,optionalContentConfigPromise:Q=null,annotationCanvasMap:G=null,pageColors:q=null,printAnnotationStorage:V=null}){var u,T;(u=this._stats)==null||u.time("Overall");const se=this._transport.getRenderingIntent(D,l,V);ue(this,n,!1),ne(this,r,yt).call(this),Q||(Q=this._transport.getOptionalContentConfig());let L=this._intentStates.get(se.cacheKey);L||(L=Object.create(null),this._intentStates.set(se.cacheKey,L)),L.streamReaderCancelTimeout&&(clearTimeout(L.streamReaderCancelTimeout),L.streamReaderCancelTimeout=null);const X=!!(se.renderingIntent&_util.RenderingIntentFlag.PRINT);L.displayReadyCapability||(L.displayReadyCapability=new _util.PromiseCapability,L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(se));const re=j=>{var U,B;L.renderTasks.delete(N),(this._maybeCleanupAfterRender||X)&&ue(this,n,!0),ne(this,r,at).call(this,!X),j?(N.capability.reject(j),this._abortOperatorList({intentState:L,reason:j instanceof Error?j:new Error(j)})):N.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),(B=this._stats)==null||B.timeEnd("Overall")},N=new InternalRenderTask({callback:re,params:{canvasContext:f,viewport:m,transform:R,background:I},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:L.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:q});(L.renderTasks||(L.renderTasks=new Set)).add(N);const d=N.task;return Promise.all([L.displayReadyCapability.promise,Q]).then(([j,U])=>{var B;if(this.destroyed){re();return}(B=this._stats)==null||B.time("Rendering"),N.initializeGraphics({transparency:j,optionalContentConfig:U}),N.operatorListChanged()}).catch(re),d}getOperatorList({intent:f="display",annotationMode:m=_util.AnnotationMode.ENABLE,printAnnotationStorage:D=null}={}){var G;function l(){I.operatorList.lastChunk&&(I.opListReadCapability.resolve(I.operatorList),I.renderTasks.delete(Q))}const R=this._transport.getRenderingIntent(f,m,D,!0);let I=this._intentStates.get(R.cacheKey);I||(I=Object.create(null),this._intentStates.set(R.cacheKey,I));let Q;return I.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=l,I.opListReadCapability=new _util.PromiseCapability,(I.renderTasks||(I.renderTasks=new Set)).add(Q),I.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(R)),I.opListReadCapability.promise}streamTextContent({includeMarkedContent:f=!1,disableNormalization:m=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:f===!0,disableNormalization:m===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(f={}){if(this._transport._htmlForXfa)return this.getXfa().then(D=>_xfa_text.XfaText.textContent(D));const m=this.streamTextContent(f);return new Promise(function(D,l){function R(){I.read().then(function({value:G,done:q}){if(q){D(Q);return}Object.assign(Q.styles,G.styles),Q.items.push(...G.items),R()},l)}const I=m.getReader(),Q={items:[],styles:Object.create(null)};R()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const f=[];for(const m of this._intentStates.values())if(this._abortOperatorList({intentState:m,reason:new Error("Page was destroyed."),force:!0}),!m.opListReadCapability)for(const D of m.renderTasks)f.push(D.completed),D.cancel();return this.objs.clear(),ue(this,n,!1),ne(this,r,yt).call(this),Promise.all(f)}cleanup(f=!1){ue(this,n,!0);const m=ne(this,r,at).call(this,!1);return f&&m&&this._stats&&(this._stats=new _display_utils.StatTimer),m}_startRenderPage(f,m){var l,R;const D=this._intentStates.get(m);D&&((l=this._stats)==null||l.timeEnd("Page Request"),(R=D.displayReadyCapability)==null||R.resolve(f))}_renderPageChunk(f,m){for(let D=0,l=f.length;D<l;D++)m.operatorList.fnArray.push(f.fnArray[D]),m.operatorList.argsArray.push(f.argsArray[D]);m.operatorList.lastChunk=f.lastChunk,m.operatorList.separateAnnots=f.separateAnnots;for(const D of m.renderTasks)D.operatorListChanged();f.lastChunk&&ne(this,r,at).call(this,!0)}_pumpOperatorList({renderingIntent:f,cacheKey:m,annotationStorageSerializable:D}){const{map:l,transfers:R}=D,Q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:f,cacheKey:m,annotationStorage:l},R).getReader(),G=this._intentStates.get(m);G.streamReader=Q;const q=()=>{Q.read().then(({value:V,done:se})=>{if(se){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,G),q())},V=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const se of G.renderTasks)se.operatorListChanged();ne(this,r,at).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(V);else if(G.opListReadCapability)G.opListReadCapability.reject(V);else throw V}})};q()}_abortOperatorList({intentState:f,reason:m,force:D=!1}){if(f.streamReader){if(f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null),!D){if(f.renderTasks.size>0)return;if(m instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;m.extraDelay>0&&m.extraDelay<1e3&&(l+=m.extraDelay),f.streamReaderCancelTimeout=setTimeout(()=>{f.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:f,reason:m,force:!0})},l);return}}if(f.streamReader.cancel(new _util.AbortException(m.message)).catch(()=>{}),f.streamReader=null,!this._transport.destroyed){for(const[l,R]of this._intentStates)if(R===f){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,r=new WeakSet,at=function(f=!1){if(ne(this,r,yt).call(this),!i(this,n)||this.destroyed)return!1;if(f)return ue(this,s,setTimeout(()=>{ue(this,s,null),ne(this,r,at).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:m,operatorList:D}of this._intentStates.values())if(m.size>0||!D.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ue(this,n,!1),!0},yt=function(){i(this,s)&&(clearTimeout(i(this,s)),ue(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ce(this,O,new Set);ce(this,h,Promise.resolve())}postMessage(f,m){const D={data:structuredClone(f,m?{transfer:m}:null)};i(this,h).then(()=>{for(const l of i(this,O))l.call(this,D)})}addEventListener(f,m){i(this,O).add(m)}removeEventListener(f,m){i(this,O).delete(m)}terminate(){i(this,O).clear()}}O=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const a=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;a&&(PDFWorkerUtil.fallbackWorkerSrc=a.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,f){let m;try{if(m=new URL(a),!m.origin||m.origin==="null")return!1}catch{return!1}const D=new URL(f,m);return m.origin===D.origin},PDFWorkerUtil.createCDNWrapper=function(a){const f=`importScripts("${a}");`;return URL.createObjectURL(new Blob([f]))}}const _PDFWorker=class _PDFWorker{constructor({name:a=null,port:f=null,verbosity:m=(0,_util.getVerbosityLevel)()}={}){var D;if(this.name=a,this.destroyed=!1,this.verbosity=m,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,f){if((D=i(_PDFWorker,o))!=null&&D.has(f))throw new Error("Cannot use more than one PDFWorker per port.");(i(_PDFWorker,o)||ue(_PDFWorker,o,new WeakMap)).set(f,this),this._initializeFromPort(f);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));const f=new Worker(a),m=new _message_handler.MessageHandler("main","worker",f),D=()=>{f.removeEventListener("error",l),m.destroy(),f.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||D()};f.addEventListener("error",l),m.on("test",I=>{if(f.removeEventListener("error",l),this.destroyed){D();return}I?(this._messageHandler=m,this._port=f,this._webWorker=f,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),m.destroy(),f.terminate())}),m.on("ready",I=>{if(f.removeEventListener("error",l),this.destroyed){D();return}try{R()}catch{this._setupFakeWorker()}});const R=()=>{const I=new Uint8Array;m.send("test",I,[I.buffer])};R();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const f=new LoopbackPort;this._port=f;const m=`fake${PDFWorkerUtil.fakeWorkerId++}`,D=new _message_handler.MessageHandler(m+"_worker",m,f);a.setup(D,f);const l=new _message_handler.MessageHandler(m,m+"_worker",f);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){var a;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(a=i(_PDFWorker,o))==null||a.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){var m;if(!(a!=null&&a.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const f=(m=i(this,o))==null?void 0:m.get(a.port);if(f){if(f._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return f}return new _PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var a;try{return((a=globalThis.pdfjsWorker)==null?void 0:a.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};o=new WeakMap,ce(_PDFWorker,o);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(f,m,D,l,R){ce(this,C);ce(this,w,new Map);ce(this,k,new Map);ce(this,y,new Map);ce(this,b,null);this.messageHandler=f,this.loadingTask=m,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=R.canvasFactory,this.filterFactory=R.filterFactory,this.cMapReaderFactory=R.cMapReaderFactory,this.standardFontDataFactory=R.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=D,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(f,m=_util.AnnotationMode.ENABLE,D=null,l=!1){let R=_util.RenderingIntentFlag.DISPLAY,I=_annotation_storage.SerializableEmpty;switch(f){case"any":R=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":R=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${f}`)}switch(m){case _util.AnnotationMode.DISABLE:R+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:R+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:R+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,I=(R&_util.RenderingIntentFlag.PRINT&&D instanceof _annotation_storage.PrintAnnotationStorage?D:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${m}`)}return l&&(R+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:R,cacheKey:`${R}_${I.hash}`,annotationStorageSerializable:I}}destroy(){var D;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(D=i(this,b))==null||D.reject(new Error("Worker was destroyed during onPassword callback"));const f=[];for(const l of i(this,k).values())f.push(l._destroy());i(this,k).clear(),i(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const m=this.messageHandler.sendWithPromise("Terminate",null);return f.push(m),Promise.all(f).then(()=>{var l;this.commonObjs.clear(),this.fontLoader.clear(),i(this,w).clear(),this.filterFactory.destroy(),(l=this._networkStream)==null||l.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:f,loadingTask:m}=this;f.on("GetReader",(D,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=R=>{this._lastProgress={loaded:R.loaded,total:R.total}},l.onPull=()=>{this._fullReader.read().then(function({value:R,done:I}){if(I){l.close();return}(0,_util.assert)(R instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{l.error(R)})},l.onCancel=R=>{this._fullReader.cancel(R),l.ready.catch(I=>{if(!this.destroyed)throw I})}}),f.on("ReaderHeadersReady",D=>{const l=new _util.PromiseCapability,R=this._fullReader;return R.headersReady.then(()=>{var I;(!R.isStreamingSupported||!R.isRangeSupported)&&(this._lastProgress&&((I=m.onProgress)==null||I.call(m,this._lastProgress)),R.onProgress=Q=>{var G;(G=m.onProgress)==null||G.call(m,{loaded:Q.loaded,total:Q.total})}),l.resolve({isStreamingSupported:R.isStreamingSupported,isRangeSupported:R.isRangeSupported,contentLength:R.contentLength})},l.reject),l.promise}),f.on("GetRangeReader",(D,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const R=this._networkStream.getRangeReader(D.begin,D.end);if(!R){l.close();return}l.onPull=()=>{R.read().then(function({value:I,done:Q}){if(Q){l.close();return}(0,_util.assert)(I instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(I),1,[I])}).catch(I=>{l.error(I)})},l.onCancel=I=>{R.cancel(I),l.ready.catch(Q=>{if(!this.destroyed)throw Q})}}),f.on("GetDoc",({pdfInfo:D})=>{this._numPages=D.numPages,this._htmlForXfa=D.htmlForXfa,delete D.htmlForXfa,m._capability.resolve(new PDFDocumentProxy(D,this))}),f.on("DocException",function(D){let l;switch(D.name){case"PasswordException":l=new _util.PasswordException(D.message,D.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(D.message);break;case"MissingPDFException":l=new _util.MissingPDFException(D.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(D.message,D.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(D.message,D.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}m._capability.reject(l)}),f.on("PasswordRequest",D=>{if(ue(this,b,new _util.PromiseCapability),m.onPassword){const l=R=>{R instanceof Error?i(this,b).reject(R):i(this,b).resolve({password:R})};try{m.onPassword(l,D.code)}catch(R){i(this,b).reject(R)}}else i(this,b).reject(new _util.PasswordException(D.message,D.code));return i(this,b).promise}),f.on("DataLoaded",D=>{var l;(l=m.onProgress)==null||l.call(m,{loaded:D.length,total:D.length}),this.downloadInfoCapability.resolve(D)}),f.on("StartRenderPage",D=>{if(this.destroyed)return;i(this,k).get(D.pageIndex)._startRenderPage(D.transparency,D.cacheKey)}),f.on("commonobj",([D,l,R])=>{var I;if(!this.destroyed&&!this.commonObjs.has(D))switch(l){case"Font":const Q=this._params;if("error"in R){const V=R.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(D,V);break}const G=Q.pdfBug&&((I=globalThis.FontInspector)!=null&&I.enabled)?(V,se)=>globalThis.FontInspector.fontAdded(V,se):null,q=new _font_loader.FontFaceObject(R,{isEvalSupported:Q.isEvalSupported,disableFontFace:Q.disableFontFace,ignoreErrors:Q.ignoreErrors,inspectFont:G});this.fontLoader.bind(q).catch(V=>f.sendWithPromise("FontFallback",{id:D})).finally(()=>{!Q.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(D,q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(D,R);break;default:throw new Error(`Got unknown common object type ${l}`)}}),f.on("obj",([D,l,R,I])=>{var G;if(this.destroyed)return;const Q=i(this,k).get(l);if(!Q.objs.has(D))switch(R){case"Image":if(Q.objs.resolve(D,I),I){let q;if(I.bitmap){const{width:V,height:se}=I;q=V*se*4}else q=((G=I.data)==null?void 0:G.length)||0;q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Q._maybeCleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(D,I);break;default:throw new Error(`Got unknown object type ${R}`)}}),f.on("DocProgress",D=>{var l;this.destroyed||(l=m.onProgress)==null||l.call(m,{loaded:D.loaded,total:D.total})}),f.on("FetchBuiltInCMap",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(D):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),f.on("FetchStandardFontData",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(D):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var D;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:f,transfers:m}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:f,filename:((D=this._fullReader)==null?void 0:D.filename)??null},m).finally(()=>{this.annotationStorage.resetModified()})}getPage(f){if(!Number.isInteger(f)||f<=0||f>this._numPages)return Promise.reject(new Error("Invalid page request."));const m=f-1,D=i(this,y).get(m);if(D)return D;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:m}).then(R=>{if(this.destroyed)throw new Error("Transport destroyed");const I=new PDFPageProxy(m,R,this,this._params.pdfBug);return i(this,k).set(m,I),I});return i(this,y).set(m,l),l}getPageIndex(f){return typeof f!="object"||f===null||!Number.isInteger(f.num)||f.num<0||!Number.isInteger(f.gen)||f.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:f.num,gen:f.gen})}getAnnotations(f,m){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:f,intent:m})}getFieldObjects(){return ne(this,C,xt).call(this,"GetFieldObjects")}hasJSActions(){return ne(this,C,xt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(f){return typeof f!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:f})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ne(this,C,xt).call(this,"GetDocJSActions")}getPageJSActions(f){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:f})}getStructTree(f){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:f})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(f=>new _optional_content_config.OptionalContentConfig(f))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const f="GetMetadata",m=i(this,w).get(f);if(m)return m;const D=this.messageHandler.sendWithPromise(f,null).then(l=>{var R,I;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:((R=this._fullReader)==null?void 0:R.filename)??null,contentLength:((I=this._fullReader)==null?void 0:I.contentLength)??null}});return i(this,w).set(f,D),D}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(f=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const m of i(this,k).values())if(!m.cleanup())throw new Error(`startCleanup: Page ${m.pageNumber} is currently rendering.`);this.commonObjs.clear(),f||this.fontLoader.clear(),i(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:f,enableXfa:m}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:f,enableXfa:m})}}w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakSet,xt=function(f,m=null){const D=i(this,w).get(f);if(D)return D;const l=this.messageHandler.sendWithPromise(f,m);return i(this,w).set(f,l),l};class PDFObjects{constructor(){ce(this,E);ce(this,p,Object.create(null))}get(f,m=null){if(m){const l=ne(this,E,Lt).call(this,f);return l.capability.promise.then(()=>m(l.data)),null}const D=i(this,p)[f];if(!(D!=null&&D.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${f}.`);return D.data}has(f){const m=i(this,p)[f];return(m==null?void 0:m.capability.settled)||!1}resolve(f,m=null){const D=ne(this,E,Lt).call(this,f);D.data=m,D.capability.resolve()}clear(){var f;for(const m in i(this,p)){const{data:D}=i(this,p)[m];(f=D==null?void 0:D.bitmap)==null||f.close()}ue(this,p,Object.create(null))}}p=new WeakMap,E=new WeakSet,Lt=function(f){var m;return(m=i(this,p))[f]||(m[f]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(f){ce(this,S,null);ue(this,S,f),this.onContinue=null}get promise(){return i(this,S).capability.promise}cancel(f=0){i(this,S).cancel(null,f)}get separateAnnots(){const{separateAnnots:f}=i(this,S).operatorList;if(!f)return!1;const{annotationCanvasMap:m}=i(this,S);return f.form||f.canvas&&(m==null?void 0:m.size)>0}}S=new WeakMap,exports.RenderTask=RenderTask;const g=class g{constructor({callback:f,params:m,objs:D,commonObjs:l,annotationCanvasMap:R,operatorList:I,pageIndex:Q,canvasFactory:G,filterFactory:q,useRequestAnimationFrame:V=!1,pdfBug:se=!1,pageColors:L=null}){this.callback=f,this.params=m,this.objs=D,this.commonObjs=l,this.annotationCanvasMap=R,this.operatorListIdx=null,this.operatorList=I,this._pageIndex=Q,this.canvasFactory=G,this.filterFactory=q,this._pdfBug=se,this.pageColors=L,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=m.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:f=!1,optionalContentConfig:m}){var Q,G;if(this.cancelled)return;if(this._canvas){if(i(g,c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i(g,c).add(this._canvas)}this._pdfBug&&((Q=globalThis.StepperManager)!=null&&Q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:D,viewport:l,transform:R,background:I}=this.params;this.gfx=new _canvas.CanvasGraphics(D,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:m},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:R,viewport:l,transparency:f,background:I}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(f=null,m=0){var D;this.running=!1,this.cancelled=!0,(D=this.gfx)==null||D.endDrawing(),i(g,c).delete(this._canvas),this.callback(f||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,m))}operatorListChanged(){var f;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(f=this.stepper)==null||f.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i(g,c).delete(this._canvas),this.callback())))}};c=new WeakMap,ce(g,c,new WeakSet);let InternalRenderTask=g;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,s)=>{var v,o,w,bn,y;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),r=s(4),A=s(8);const P=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=P;class O{constructor(){ce(this,w);ce(this,v,!1);ce(this,o,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,x){const p=i(this,o).get(C);return p===void 0?x:Object.assign(x,p)}getRawValue(C){return i(this,o).get(C)}remove(C){if(i(this,o).delete(C),i(this,o).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const x of i(this,o).values())if(x instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,x){const p=i(this,o).get(C);let E=!1;if(p!==void 0)for(const[F,S]of Object.entries(x))p[F]!==S&&(E=!0,p[F]=S);else E=!0,i(this,o).set(C,x);E&&ne(this,w,bn).call(this),x instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(x.constructor._type)}has(C){return i(this,o).has(C)}getAll(){return i(this,o).size>0?(0,n.objectFromMap)(i(this,o)):null}setAll(C){for(const[x,p]of Object.entries(C))this.setValue(x,p)}get size(){return i(this,o).size}resetModified(){i(this,v)&&(ue(this,v,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(i(this,o).size===0)return P;const C=new Map,x=new A.MurmurHash3_64,p=[],E=Object.create(null);let F=!1;for(const[S,c]of i(this,o)){const g=c instanceof r.AnnotationEditor?c.serialize(!1,E):c;g&&(C.set(S,g),x.update(`${S}:${JSON.stringify(g)}`),F||(F=!!g.bitmap))}if(F)for(const S of C.values())S.bitmap&&p.push(S.bitmap);return C.size>0?{map:C,hash:x.hexdigest(),transfers:p}:P}}v=new WeakMap,o=new WeakMap,w=new WeakSet,bn=function(){i(this,v)||(ue(this,v,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=O;class h extends O{constructor(x){super();ce(this,y);const{map:p,hash:E,transfers:F}=x.serializable,S=structuredClone(p,F?{transfer:F}:null);ue(this,y,{map:S,hash:E,transfers:F})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return i(this,y)}}y=new WeakMap,e.PrintAnnotationStorage=h},(t,e,s)=>{var h,v,o,w,k,y,b,C,x,p,E,F,S,c,g,It,Nt,m,$t,jt,yn,_n,xn,Bt,An;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),r=s(1),A=s(6);const V=class V{constructor(L){ce(this,g);ce(this,h,"");ce(this,v,!1);ce(this,o,null);ce(this,w,null);ce(this,k,null);ce(this,y,!1);ce(this,b,null);ce(this,C,this.focusin.bind(this));ce(this,x,this.focusout.bind(this));ce(this,p,!1);ce(this,E,!1);ce(this,F,!1);Qe(this,"_initialOptions",Object.create(null));Qe(this,"_uiManager",null);Qe(this,"_focusEventsAllowed",!0);Qe(this,"_l10nPromise",null);ce(this,S,!1);ce(this,c,V._zIndex++);this.constructor===V&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=L.parent,this.id=L.id,this.width=this.height=null,this.pageIndex=L.parent.pageIndex,this.name=L.name,this.div=null,this._uiManager=L.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=L.isCentered,this._structTreeParentId=null;const{rotation:X,rawDims:{pageWidth:re,pageHeight:N,pageX:d,pageY:u}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[re,N],this.pageTranslation=[d,u];const[T,j]=this.parentDimensions;this.x=L.x/T,this.y=L.y/j,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(L){const X=new O({id:L.parent.getNextId(),parent:L.parent,uiManager:L._uiManager});X.annotationElementId=L.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(L,X=null){if(V._l10nPromise||(V._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,L.get(N)]))),X!=null&&X.strings)for(const N of X.strings)V._l10nPromise.set(N,L.get(N));if(V._borderLineWidth!==-1)return;const re=getComputedStyle(document.documentElement);V._borderLineWidth=parseFloat(re.getPropertyValue("--outline-width"))||0}static updateDefaultParams(L,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(L){return!1}static paste(L,X){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return i(this,S)}set _isDraggable(L){var X;ue(this,S,L),(X=this.div)==null||X.classList.toggle("draggable",L)}center(){const[L,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(L*2),this.y+=this.width*L/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(L*2),this.y-=this.width*L/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(L){this._uiManager.addCommands(L)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=i(this,c)}setParent(L){L!==null&&(this.pageIndex=L.pageIndex,this.pageDimensions=L.pageDimensions),this.parent=L}focusin(L){this._focusEventsAllowed&&(i(this,p)?ue(this,p,!1):this.parent.setSelected(this))}focusout(L){var re;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=L.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(L.preventDefault(),(re=this.parent)!=null&&re.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(L,X,re,N){const[d,u]=this.parentDimensions;[re,N]=this.screenToPageTranslation(re,N),this.x=(L+re)/d,this.y=(X+N)/u,this.fixAndSetPosition()}translate(L,X){ne(this,g,It).call(this,this.parentDimensions,L,X)}translateInPage(L,X){ne(this,g,It).call(this,this.pageDimensions,L,X),this.div.scrollIntoView({block:"nearest"})}drag(L,X){const[re,N]=this.parentDimensions;if(this.x+=L/re,this.y+=X/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:U,y:B}=this.div.getBoundingClientRect();this.parent.findNewParent(this,U,B)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:u}=this;const[T,j]=ne(this,g,Nt).call(this);d+=T,u+=j,this.div.style.left=`${(100*d).toFixed(2)}%`,this.div.style.top=`${(100*u).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[L,X]=this.pageDimensions;let{x:re,y:N,width:d,height:u}=this;switch(d*=L,u*=X,re*=L,N*=X,this.rotation){case 0:re=Math.max(0,Math.min(L-d,re)),N=Math.max(0,Math.min(X-u,N));break;case 90:re=Math.max(0,Math.min(L-u,re)),N=Math.min(X,Math.max(d,N));break;case 180:re=Math.min(L,Math.max(d,re)),N=Math.min(X,Math.max(u,N));break;case 270:re=Math.min(L,Math.max(u,re)),N=Math.max(0,Math.min(X-d,N));break}this.x=re/=L,this.y=N/=X;const[T,j]=ne(this,g,Nt).call(this);re+=T,N+=j;const{style:U}=this.div;U.left=`${(100*re).toFixed(2)}%`,U.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(L,X){var re;return ne(re=V,m,$t).call(re,L,X,this.parentRotation)}pageTranslationToScreen(L,X){var re;return ne(re=V,m,$t).call(re,L,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:L,pageDimensions:[X,re]}=this,N=X*L,d=re*L;return r.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(d)]:[N,d]}setDims(L,X){var d;const[re,N]=this.parentDimensions;this.div.style.width=`${(100*L/re).toFixed(2)}%`,i(this,y)||(this.div.style.height=`${(100*X/N).toFixed(2)}%`),(d=i(this,o))==null||d.classList.toggle("small",L<V.SMALL_EDITOR_SIZE||X<V.SMALL_EDITOR_SIZE)}fixDims(){const{style:L}=this.div,{height:X,width:re}=L,N=re.endsWith("%"),d=!i(this,y)&&X.endsWith("%");if(N&&d)return;const[u,T]=this.parentDimensions;N||(L.width=`${(100*parseFloat(re)/u).toFixed(2)}%`),!i(this,y)&&!d&&(L.height=`${(100*parseFloat(X)/T).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(i(this,o))return;const L=ue(this,o,document.createElement("button"));L.className="altText";const X=await V._l10nPromise.get("editor_alt_text_button_label");L.textContent=X,L.setAttribute("aria-label",X),L.tabIndex="0",L.addEventListener("contextmenu",A.noContextMenu),L.addEventListener("pointerdown",re=>re.stopPropagation()),L.addEventListener("click",re=>{re.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),L.addEventListener("keydown",re=>{re.target===L&&re.key==="Enter"&&(re.preventDefault(),this._uiManager.editAltText(this))}),ne(this,g,Bt).call(this),this.div.append(L),V.SMALL_EDITOR_SIZE||(V.SMALL_EDITOR_SIZE=Math.min(128,Math.round(L.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:i(this,h),decorative:i(this,v)}}set altTextData({altText:L,decorative:X}){i(this,h)===L&&i(this,v)===X||(ue(this,h,L),ue(this,v,X),ne(this,g,Bt).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",i(this,C)),this.div.addEventListener("focusout",i(this,x));const[L,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/L).toFixed(2)}%`,this.div.style.maxHeight=`${(100*L/X).toFixed(2)}%`);const[re,N]=this.getInitialTranslation();return this.translate(re,N),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(L){const{isMac:X}=r.FeatureTest.platform;if(L.button!==0||L.ctrlKey&&X){L.preventDefault();return}ue(this,p,!0),ne(this,g,An).call(this,L)}moveInDOM(){var L;(L=this.parent)==null||L.moveEditorInDOM(this)}_setParentAndPosition(L,X,re){L.changeParent(this),this.x=X,this.y=re,this.fixAndSetPosition()}getRect(L,X){const re=this.parentScale,[N,d]=this.pageDimensions,[u,T]=this.pageTranslation,j=L/re,U=X/re,B=this.x*N,Y=this.y*d,ie=this.width*N,le=this.height*d;switch(this.rotation){case 0:return[B+j+u,d-Y-U-le+T,B+j+ie+u,d-Y-U+T];case 90:return[B+U+u,d-Y+j+T,B+U+le+u,d-Y+j+ie+T];case 180:return[B-j-ie+u,d-Y+U+T,B-j+u,d-Y+U+le+T];case 270:return[B-U-le+u,d-Y-j-ie+T,B-U+u,d-Y-j+T];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(L,X){const[re,N,d,u]=L,T=d-re,j=u-N;switch(this.rotation){case 0:return[re,X-u,T,j];case 90:return[re,X-N,j,T];case 180:return[d,X-N,T,j];case 270:return[d,X-u,j,T];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ue(this,F,!0)}disableEditMode(){ue(this,F,!1)}isInEditMode(){return i(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var L,X;(L=this.div)==null||L.addEventListener("focusin",i(this,C)),(X=this.div)==null||X.addEventListener("focusout",i(this,x))}serialize(L=!1,X=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(L,X,re){const N=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:re});N.rotation=L.rotation;const[d,u]=N.pageDimensions,[T,j,U,B]=N.getRectInCurrentCoords(L.rect,u);return N.x=T/d,N.y=j/u,N.width=U/d,N.height=B/u,N}remove(){var L;this.div.removeEventListener("focusin",i(this,C)),this.div.removeEventListener("focusout",i(this,x)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(L=i(this,o))==null||L.remove(),ue(this,o,null),ue(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ne(this,g,yn).call(this),i(this,b).classList.remove("hidden"))}select(){var L;this.makeResizable(),(L=this.div)==null||L.classList.add("selectedEditor")}unselect(){var L,X,re;(L=i(this,b))==null||L.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(re=this.div)!=null&&re.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(L,X){}disableEditing(){i(this,o)&&(i(this,o).hidden=!0)}enableEditing(){i(this,o)&&(i(this,o).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return i(this,E)}set isEditing(L){ue(this,E,L),this.parent&&(L?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(L,X){ue(this,y,!0);const re=L/X,{style:N}=this.div;N.aspectRatio=re,N.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,v=new WeakMap,o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakMap,c=new WeakMap,g=new WeakSet,It=function([L,X],re,N){[re,N]=this.screenToPageTranslation(re,N),this.x+=re/L,this.y+=N/X,this.fixAndSetPosition()},Nt=function(){const[L,X]=this.parentDimensions,{_borderLineWidth:re}=V,N=re/L,d=re/X;switch(this.rotation){case 90:return[-N,d];case 180:return[N,d];case 270:return[N,-d];default:return[-N,-d]}},m=new WeakSet,$t=function(L,X,re){switch(re){case 90:return[X,-L];case 180:return[-L,-X];case 270:return[-X,L];default:return[L,X]}},jt=function(L){switch(L){case 90:{const[X,re]=this.pageDimensions;return[0,-X/re,re/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,re]=this.pageDimensions;return[0,X/re,-re/X,0]}default:return[1,0,0,1]}},yn=function(){if(i(this,b))return;ue(this,b,document.createElement("div")),i(this,b).classList.add("resizers");const L=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||L.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of L){const re=document.createElement("div");i(this,b).append(re),re.classList.add("resizer",X),re.addEventListener("pointerdown",ne(this,g,_n).bind(this,X)),re.addEventListener("contextmenu",A.noContextMenu)}this.div.prepend(i(this,b))},_n=function(L,X){X.preventDefault();const{isMac:re}=r.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&re)return;const N=ne(this,g,xn).bind(this,L),d=this._isDraggable;this._isDraggable=!1;const u={passive:!0,capture:!0};window.addEventListener("pointermove",N,u);const T=this.x,j=this.y,U=this.width,B=this.height,Y=this.parent.div.style.cursor,ie=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const le=()=>{this._isDraggable=d,window.removeEventListener("pointerup",le),window.removeEventListener("blur",le),window.removeEventListener("pointermove",N,u),this.parent.div.style.cursor=Y,this.div.style.cursor=ie;const fe=this.x,ye=this.y,me=this.width,ve=this.height;fe===T&&ye===j&&me===U&&ve===B||this.addCommands({cmd:()=>{this.width=me,this.height=ve,this.x=fe,this.y=ye;const[Z,ee]=this.parentDimensions;this.setDims(Z*me,ee*ve),this.fixAndSetPosition()},undo:()=>{this.width=U,this.height=B,this.x=T,this.y=j;const[Z,ee]=this.parentDimensions;this.setDims(Z*U,ee*B),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",le),window.addEventListener("blur",le)},xn=function(L,X){const[re,N]=this.parentDimensions,d=this.x,u=this.y,T=this.width,j=this.height,U=V.MIN_SIZE/re,B=V.MIN_SIZE/N,Y=ke=>Math.round(ke*1e4)/1e4,ie=ne(this,g,jt).call(this,this.rotation),le=(ke,Oe)=>[ie[0]*ke+ie[2]*Oe,ie[1]*ke+ie[3]*Oe],fe=ne(this,g,jt).call(this,360-this.rotation),ye=(ke,Oe)=>[fe[0]*ke+fe[2]*Oe,fe[1]*ke+fe[3]*Oe];let me,ve,Z=!1,ee=!1;switch(L){case"topLeft":Z=!0,me=(ke,Oe)=>[0,0],ve=(ke,Oe)=>[ke,Oe];break;case"topMiddle":me=(ke,Oe)=>[ke/2,0],ve=(ke,Oe)=>[ke/2,Oe];break;case"topRight":Z=!0,me=(ke,Oe)=>[ke,0],ve=(ke,Oe)=>[0,Oe];break;case"middleRight":ee=!0,me=(ke,Oe)=>[ke,Oe/2],ve=(ke,Oe)=>[0,Oe/2];break;case"bottomRight":Z=!0,me=(ke,Oe)=>[ke,Oe],ve=(ke,Oe)=>[0,0];break;case"bottomMiddle":me=(ke,Oe)=>[ke/2,Oe],ve=(ke,Oe)=>[ke/2,0];break;case"bottomLeft":Z=!0,me=(ke,Oe)=>[0,Oe],ve=(ke,Oe)=>[ke,0];break;case"middleLeft":ee=!0,me=(ke,Oe)=>[0,Oe/2],ve=(ke,Oe)=>[ke,Oe/2];break}const M=me(T,j),z=ve(T,j);let J=le(...z);const ae=Y(d+J[0]),ge=Y(u+J[1]);let Ae=1,_e=1,[te,Pe]=this.screenToPageTranslation(X.movementX,X.movementY);if([te,Pe]=ye(te/re,Pe/N),Z){const ke=Math.hypot(T,j);Ae=_e=Math.max(Math.min(Math.hypot(z[0]-M[0]-te,z[1]-M[1]-Pe)/ke,1/T,1/j),U/T,B/j)}else ee?Ae=Math.max(U,Math.min(1,Math.abs(z[0]-M[0]-te)))/T:_e=Math.max(B,Math.min(1,Math.abs(z[1]-M[1]-Pe)))/j;const Ce=Y(T*Ae),Ue=Y(j*_e);J=le(...ve(Ce,Ue));const je=ae-J[0],ze=ge-J[1];this.width=Ce,this.height=Ue,this.x=je,this.y=ze,this.setDims(re*Ce,N*Ue),this.fixAndSetPosition()},Bt=async function(){var re;const L=i(this,o);if(!L)return;if(!i(this,h)&&!i(this,v)){L.classList.remove("done"),(re=i(this,w))==null||re.remove();return}V._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{L.setAttribute("aria-label",N)});let X=i(this,w);if(!X){ue(this,w,X=document.createElement("span")),X.className="tooltip",X.setAttribute("role","tooltip");const N=X.id=`alt-text-tooltip-${this.id}`;L.setAttribute("aria-describedby",N);const d=100;L.addEventListener("mouseenter",()=>{ue(this,k,setTimeout(()=>{ue(this,k,null),i(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},d))}),L.addEventListener("mouseleave",()=>{var u;clearTimeout(i(this,k)),ue(this,k,null),(u=i(this,w))==null||u.classList.remove("show")})}L.classList.add("done"),X.innerText=i(this,v)?await V._l10nPromise.get("editor_alt_text_decorative_tooltip"):i(this,h),X.parentNode||L.append(X)},An=function(L){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let re,N;X&&(re={passive:!0,capture:!0},N=u=>{const[T,j]=this.screenToPageTranslation(u.movementX,u.movementY);this._uiManager.dragSelectedEditors(T,j)},window.addEventListener("pointermove",N,re));const d=()=>{if(window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),X&&window.removeEventListener("pointermove",N,re),ue(this,p,!1),!this._uiManager.endDragSession()){const{isMac:u}=r.FeatureTest.platform;L.ctrlKey&&!u||L.shiftKey||L.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",d),window.addEventListener("blur",d)},ce(V,m),Qe(V,"_borderLineWidth",-1),Qe(V,"_colorManager",new n.ColorManager),Qe(V,"_zIndex",1),Qe(V,"SMALL_EDITOR_SIZE",0);let P=V;e.AnnotationEditor=P;class O extends P{constructor(L){super(L),this.annotationElementId=L.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var y,b,C,x,p,Ut,S,c,g,a,f,En,l,R,I,Q,G,q,V,se,L,X,re,N,d,u,T,j,U,B,Y,ie,le,fe,ye,me,ve,Z,ee,M,z,J,ae,ge,Ae,_e,te,Sn,Wt,zt,At,Ht,Vt,nt,ht,Cn,Pn,Gt,pt,qt;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=A,e.opacityToHex=P;var n=s(1),r=s(6);function A(Ge,H,be){for(const we of be)H.addEventListener(we,Ge[we].bind(Ge))}function P(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class O{constructor(){ce(this,y,0)}getId(){return`${n.AnnotationEditorPrefix}${ut(this,y)._++}`}}y=new WeakMap;const F=class F{constructor(){ce(this,p);ce(this,b,(0,n.getUuid)());ce(this,C,0);ce(this,x,null)}static get _isSVGFittingCanvas(){const H='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',we=new OffscreenCanvas(1,3).getContext("2d"),Ie=new Image;Ie.src=H;const $e=Ie.decode().then(()=>(we.drawImage(Ie,0,0,1,1,0,0,1,3),new Uint32Array(we.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",$e)}async getFromFile(H){const{lastModified:be,name:we,size:Ie,type:$e}=H;return ne(this,p,Ut).call(this,`${be}_${we}_${Ie}_${$e}`,H)}async getFromUrl(H){return ne(this,p,Ut).call(this,H,H)}async getFromId(H){i(this,x)||ue(this,x,new Map);const be=i(this,x).get(H);return be?be.bitmap?(be.refCounter+=1,be):be.file?this.getFromFile(be.file):this.getFromUrl(be.url):null}getSvgUrl(H){const be=i(this,x).get(H);return be!=null&&be.isSvg?be.svgUrl:null}deleteId(H){i(this,x)||ue(this,x,new Map);const be=i(this,x).get(H);be&&(be.refCounter-=1,be.refCounter===0&&(be.bitmap=null))}isValidId(H){return H.startsWith(`image_${i(this,b)}_`)}};b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakSet,Ut=async function(H,be){i(this,x)||ue(this,x,new Map);let we=i(this,x).get(H);if(we===null)return null;if(we!=null&&we.bitmap)return we.refCounter+=1,we;try{we||(we={bitmap:null,id:`image_${i(this,b)}_${ut(this,C)._++}`,refCounter:0,isSvg:!1});let Ie;if(typeof be=="string"){we.url=be;const $e=await fetch(be);if(!$e.ok)throw new Error($e.statusText);Ie=await $e.blob()}else Ie=we.file=be;if(Ie.type==="image/svg+xml"){const $e=F._isSVGFittingCanvas,Re=new FileReader,W=new Image,$=new Promise((K,he)=>{W.onload=()=>{we.bitmap=W,we.isSvg=!0,K()},Re.onload=async()=>{const pe=we.svgUrl=Re.result;W.src=await $e?`${pe}#svgView(preserveAspectRatio(none))`:pe},W.onerror=Re.onerror=he});Re.readAsDataURL(Ie),await $}else we.bitmap=await createImageBitmap(Ie);we.refCounter=1}catch(Ie){console.error(Ie),we=null}return i(this,x).set(H,we),we&&i(this,x).set(we.id,we),we};let h=F;class v{constructor(H=128){ce(this,S,[]);ce(this,c,!1);ce(this,g);ce(this,a,-1);ue(this,g,H)}add({cmd:H,undo:be,mustExec:we,type:Ie=NaN,overwriteIfSameType:$e=!1,keepUndo:Re=!1}){if(we&&H(),i(this,c))return;const W={cmd:H,undo:be,type:Ie};if(i(this,a)===-1){i(this,S).length>0&&(i(this,S).length=0),ue(this,a,0),i(this,S).push(W);return}if($e&&i(this,S)[i(this,a)].type===Ie){Re&&(W.undo=i(this,S)[i(this,a)].undo),i(this,S)[i(this,a)]=W;return}const $=i(this,a)+1;$===i(this,g)?i(this,S).splice(0,1):(ue(this,a,$),$<i(this,S).length&&i(this,S).splice($)),i(this,S).push(W)}undo(){i(this,a)!==-1&&(ue(this,c,!0),i(this,S)[i(this,a)].undo(),ue(this,c,!1),ue(this,a,i(this,a)-1))}redo(){i(this,a)<i(this,S).length-1&&(ue(this,a,i(this,a)+1),ue(this,c,!0),i(this,S)[i(this,a)].cmd(),ue(this,c,!1))}hasSomethingToUndo(){return i(this,a)!==-1}hasSomethingToRedo(){return i(this,a)<i(this,S).length-1}destroy(){ue(this,S,null)}}S=new WeakMap,c=new WeakMap,g=new WeakMap,a=new WeakMap,e.CommandManager=v;class o{constructor(H){ce(this,f);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:be}=n.FeatureTest.platform;for(const[we,Ie,$e={}]of H)for(const Re of we){const W=Re.startsWith("mac+");be&&W?(this.callbacks.set(Re.slice(4),{callback:Ie,options:$e}),this.allKeys.add(Re.split("+").at(-1))):!be&&!W&&(this.callbacks.set(Re,{callback:Ie,options:$e}),this.allKeys.add(Re.split("+").at(-1)))}}exec(H,be){if(!this.allKeys.has(be.key))return;const we=this.callbacks.get(ne(this,f,En).call(this,be));if(!we)return;const{callback:Ie,options:{bubbles:$e=!1,args:Re=[],checker:W=null}}=we;W&&!W(H,be)||(Ie.bind(H,...Re)(),$e||(be.stopPropagation(),be.preventDefault()))}}f=new WeakSet,En=function(H){H.altKey&&this.buffer.push("alt"),H.ctrlKey&&this.buffer.push("ctrl"),H.metaKey&&this.buffer.push("meta"),H.shiftKey&&this.buffer.push("shift"),this.buffer.push(H.key);const be=this.buffer.join("+");return this.buffer.length=0,be},e.KeyboardManager=o;const D=class D{get _colors(){const H=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(H),(0,n.shadow)(this,"_colors",H)}convert(H){const be=(0,r.getRGB)(H);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[we,Ie]of this._colors)if(Ie.every(($e,Re)=>$e===be[Re]))return D._colorsMapping.get(we);return be}getHexCode(H){const be=this._colors.get(H);return be?n.Util.makeHexColor(...be):H}};Qe(D,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=D;e.ColorManager=w;const qe=class qe{constructor(H,be,we,Ie,$e,Re){ce(this,te);ce(this,l,null);ce(this,R,new Map);ce(this,I,new Map);ce(this,Q,null);ce(this,G,null);ce(this,q,new v);ce(this,V,0);ce(this,se,new Set);ce(this,L,null);ce(this,X,null);ce(this,re,new Set);ce(this,N,null);ce(this,d,new O);ce(this,u,!1);ce(this,T,!1);ce(this,j,null);ce(this,U,n.AnnotationEditorType.NONE);ce(this,B,new Set);ce(this,Y,null);ce(this,ie,this.blur.bind(this));ce(this,le,this.focus.bind(this));ce(this,fe,this.copy.bind(this));ce(this,ye,this.cut.bind(this));ce(this,me,this.paste.bind(this));ce(this,ve,this.keydown.bind(this));ce(this,Z,this.onEditingAction.bind(this));ce(this,ee,this.onPageChanging.bind(this));ce(this,M,this.onScaleChanging.bind(this));ce(this,z,this.onRotationChanging.bind(this));ce(this,J,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ce(this,ae,[0,0]);ce(this,ge,null);ce(this,Ae,null);ce(this,_e,null);ue(this,Ae,H),ue(this,_e,be),ue(this,Q,we),this._eventBus=Ie,this._eventBus._on("editingaction",i(this,Z)),this._eventBus._on("pagechanging",i(this,ee)),this._eventBus._on("scalechanging",i(this,M)),this._eventBus._on("rotationchanging",i(this,z)),ue(this,G,$e.annotationStorage),ue(this,N,$e.filterFactory),ue(this,Y,Re),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const H=qe.prototype,be=$e=>{const{activeElement:Re}=document;return Re&&i($e,Ae).contains(Re)&&$e.hasSomethingToControl()},we=this.TRANSLATE_SMALL,Ie=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new o([[["ctrl+a","mac+meta+a"],H.selectAll],[["ctrl+z","mac+meta+z"],H.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],H.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],H.delete],[["Escape","mac+Escape"],H.unselectAll],[["ArrowLeft","mac+ArrowLeft"],H.translateSelectedEditors,{args:[-we,0],checker:be}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H.translateSelectedEditors,{args:[-Ie,0],checker:be}],[["ArrowRight","mac+ArrowRight"],H.translateSelectedEditors,{args:[we,0],checker:be}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H.translateSelectedEditors,{args:[Ie,0],checker:be}],[["ArrowUp","mac+ArrowUp"],H.translateSelectedEditors,{args:[0,-we],checker:be}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H.translateSelectedEditors,{args:[0,-Ie],checker:be}],[["ArrowDown","mac+ArrowDown"],H.translateSelectedEditors,{args:[0,we],checker:be}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H.translateSelectedEditors,{args:[0,Ie],checker:be}]]))}destroy(){ne(this,te,At).call(this),ne(this,te,Wt).call(this),this._eventBus._off("editingaction",i(this,Z)),this._eventBus._off("pagechanging",i(this,ee)),this._eventBus._off("scalechanging",i(this,M)),this._eventBus._off("rotationchanging",i(this,z));for(const H of i(this,I).values())H.destroy();i(this,I).clear(),i(this,R).clear(),i(this,re).clear(),ue(this,l,null),i(this,B).clear(),i(this,q).destroy(),i(this,Q).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",i(this,Y)?i(this,N).addHCMFilter(i(this,Y).foreground,i(this,Y).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(i(this,Ae)).direction)}editAltText(H){var be;(be=i(this,Q))==null||be.editAltText(this,H)}onPageChanging({pageNumber:H}){ue(this,V,H-1)}focusMainContainer(){i(this,Ae).focus()}findParent(H,be){for(const we of i(this,I).values()){const{x:Ie,y:$e,width:Re,height:W}=we.div.getBoundingClientRect();if(H>=Ie&&H<=Ie+Re&&be>=$e&&be<=$e+W)return we}return null}disableUserSelect(H=!1){i(this,_e).classList.toggle("noUserSelect",H)}addShouldRescale(H){i(this,re).add(H)}removeShouldRescale(H){i(this,re).delete(H)}onScaleChanging({scale:H}){this.commitOrRemove(),this.viewParameters.realScale=H*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const be of i(this,re))be.onScaleChanging()}onRotationChanging({pagesRotation:H}){this.commitOrRemove(),this.viewParameters.rotation=H}addToAnnotationStorage(H){!H.isEmpty()&&i(this,G)&&!i(this,G).has(H.id)&&i(this,G).setValue(H.id,H)}blur(){if(!this.hasSelection)return;const{activeElement:H}=document;for(const be of i(this,B))if(be.div.contains(H)){ue(this,j,[be,H]),be._focusEventsAllowed=!1;break}}focus(){if(!i(this,j))return;const[H,be]=i(this,j);ue(this,j,null),be.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),be.focus()}addEditListeners(){ne(this,te,zt).call(this),ne(this,te,Ht).call(this)}removeEditListeners(){ne(this,te,At).call(this),ne(this,te,Vt).call(this)}copy(H){var we;if(H.preventDefault(),(we=i(this,l))==null||we.commitOrRemove(),!this.hasSelection)return;const be=[];for(const Ie of i(this,B)){const $e=Ie.serialize(!0);$e&&be.push($e)}be.length!==0&&H.clipboardData.setData("application/pdfjs",JSON.stringify(be))}cut(H){this.copy(H),this.delete()}paste(H){H.preventDefault();const{clipboardData:be}=H;for(const $e of be.items)for(const Re of i(this,X))if(Re.isHandlingMimeForPasting($e.type)){Re.paste($e,this.currentLayer);return}let we=be.getData("application/pdfjs");if(!we)return;try{we=JSON.parse(we)}catch($e){(0,n.warn)(`paste: "${$e.message}".`);return}if(!Array.isArray(we))return;this.unselectAll();const Ie=this.currentLayer;try{const $e=[];for(const $ of we){const K=Ie.deserialize($);if(!K)return;$e.push(K)}const Re=()=>{for(const $ of $e)ne(this,te,Gt).call(this,$);ne(this,te,qt).call(this,$e)},W=()=>{for(const $ of $e)$.remove()};this.addCommands({cmd:Re,undo:W,mustExec:!0})}catch($e){(0,n.warn)(`paste: "${$e.message}".`)}}keydown(H){var be;(be=this.getActive())!=null&&be.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,H)}onEditingAction(H){["undo","redo","delete","selectAll"].includes(H.name)&&this[H.name]()}setEditingState(H){H?(ne(this,te,Sn).call(this),ne(this,te,zt).call(this),ne(this,te,Ht).call(this),ne(this,te,nt).call(this,{isEditing:i(this,U)!==n.AnnotationEditorType.NONE,isEmpty:ne(this,te,pt).call(this),hasSomethingToUndo:i(this,q).hasSomethingToUndo(),hasSomethingToRedo:i(this,q).hasSomethingToRedo(),hasSelectedEditor:!1})):(ne(this,te,Wt).call(this),ne(this,te,At).call(this),ne(this,te,Vt).call(this),ne(this,te,nt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(H){if(!i(this,X)){ue(this,X,H);for(const be of i(this,X))ne(this,te,ht).call(this,be.defaultPropertiesToUpdate)}}getId(){return i(this,d).getId()}get currentLayer(){return i(this,I).get(i(this,V))}getLayer(H){return i(this,I).get(H)}get currentPageIndex(){return i(this,V)}addLayer(H){i(this,I).set(H.pageIndex,H),i(this,u)?H.enable():H.disable()}removeLayer(H){i(this,I).delete(H.pageIndex)}updateMode(H,be=null){if(i(this,U)!==H){if(ue(this,U,H),H===n.AnnotationEditorType.NONE){this.setEditingState(!1),ne(this,te,Pn).call(this);return}this.setEditingState(!0),ne(this,te,Cn).call(this),this.unselectAll();for(const we of i(this,I).values())we.updateMode(H);if(be){for(const we of i(this,R).values())if(we.annotationElementId===be){this.setSelected(we),we.enterInEditMode();break}}}}updateToolbar(H){H!==i(this,U)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:H})}updateParams(H,be){if(i(this,X)){if(H===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(H);return}for(const we of i(this,B))we.updateParams(H,be);for(const we of i(this,X))we.updateDefaultParams(H,be)}}enableWaiting(H=!1){if(i(this,T)!==H){ue(this,T,H);for(const be of i(this,I).values())H?be.disableClick():be.enableClick(),be.div.classList.toggle("waiting",H)}}getEditors(H){const be=[];for(const we of i(this,R).values())we.pageIndex===H&&be.push(we);return be}getEditor(H){return i(this,R).get(H)}addEditor(H){i(this,R).set(H.id,H)}removeEditor(H){var be;i(this,R).delete(H.id),this.unselect(H),(!H.annotationElementId||!i(this,se).has(H.annotationElementId))&&((be=i(this,G))==null||be.remove(H.id))}addDeletedAnnotationElement(H){i(this,se).add(H.annotationElementId),H.deleted=!0}isDeletedAnnotationElement(H){return i(this,se).has(H)}removeDeletedAnnotationElement(H){i(this,se).delete(H.annotationElementId),H.deleted=!1}setActiveEditor(H){i(this,l)!==H&&(ue(this,l,H),H&&ne(this,te,ht).call(this,H.propertiesToUpdate))}toggleSelected(H){if(i(this,B).has(H)){i(this,B).delete(H),H.unselect(),ne(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection});return}i(this,B).add(H),H.select(),ne(this,te,ht).call(this,H.propertiesToUpdate),ne(this,te,nt).call(this,{hasSelectedEditor:!0})}setSelected(H){for(const be of i(this,B))be!==H&&be.unselect();i(this,B).clear(),i(this,B).add(H),H.select(),ne(this,te,ht).call(this,H.propertiesToUpdate),ne(this,te,nt).call(this,{hasSelectedEditor:!0})}isSelected(H){return i(this,B).has(H)}unselect(H){H.unselect(),i(this,B).delete(H),ne(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return i(this,B).size!==0}undo(){i(this,q).undo(),ne(this,te,nt).call(this,{hasSomethingToUndo:i(this,q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ne(this,te,pt).call(this)})}redo(){i(this,q).redo(),ne(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:i(this,q).hasSomethingToRedo(),isEmpty:ne(this,te,pt).call(this)})}addCommands(H){i(this,q).add(H),ne(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ne(this,te,pt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const H=[...i(this,B)],be=()=>{for(const Ie of H)Ie.remove()},we=()=>{for(const Ie of H)ne(this,te,Gt).call(this,Ie)};this.addCommands({cmd:be,undo:we,mustExec:!0})}commitOrRemove(){var H;(H=i(this,l))==null||H.commitOrRemove()}hasSomethingToControl(){return i(this,l)||this.hasSelection}selectAll(){for(const H of i(this,B))H.commit();ne(this,te,qt).call(this,i(this,R).values())}unselectAll(){if(i(this,l)){i(this,l).commitOrRemove();return}if(this.hasSelection){for(const H of i(this,B))H.unselect();i(this,B).clear(),ne(this,te,nt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(H,be,we=!1){if(we||this.commitOrRemove(),!this.hasSelection)return;i(this,ae)[0]+=H,i(this,ae)[1]+=be;const[Ie,$e]=i(this,ae),Re=[...i(this,B)],W=1e3;i(this,ge)&&clearTimeout(i(this,ge)),ue(this,ge,setTimeout(()=>{ue(this,ge,null),i(this,ae)[0]=i(this,ae)[1]=0,this.addCommands({cmd:()=>{for(const $ of Re)i(this,R).has($.id)&&$.translateInPage(Ie,$e)},undo:()=>{for(const $ of Re)i(this,R).has($.id)&&$.translateInPage(-Ie,-$e)},mustExec:!1})},W));for(const $ of Re)$.translateInPage(H,be)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ue(this,L,new Map);for(const H of i(this,B))i(this,L).set(H,{savedX:H.x,savedY:H.y,savedPageIndex:H.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!i(this,L))return!1;this.disableUserSelect(!1);const H=i(this,L);ue(this,L,null);let be=!1;for(const[{x:Ie,y:$e,pageIndex:Re},W]of H)W.newX=Ie,W.newY=$e,W.newPageIndex=Re,be||(be=Ie!==W.savedX||$e!==W.savedY||Re!==W.savedPageIndex);if(!be)return!1;const we=(Ie,$e,Re,W)=>{if(i(this,R).has(Ie.id)){const $=i(this,I).get(W);$?Ie._setParentAndPosition($,$e,Re):(Ie.pageIndex=W,Ie.x=$e,Ie.y=Re)}};return this.addCommands({cmd:()=>{for(const[Ie,{newX:$e,newY:Re,newPageIndex:W}]of H)we(Ie,$e,Re,W)},undo:()=>{for(const[Ie,{savedX:$e,savedY:Re,savedPageIndex:W}]of H)we(Ie,$e,Re,W)},mustExec:!0}),!0}dragSelectedEditors(H,be){if(i(this,L))for(const we of i(this,L).keys())we.drag(H,be)}rebuild(H){if(H.parent===null){const be=this.getLayer(H.pageIndex);be?(be.changeParent(H),be.addOrRebuild(H)):(this.addEditor(H),this.addToAnnotationStorage(H),H.rebuild())}else H.parent.addOrRebuild(H)}isActive(H){return i(this,l)===H}getActive(){return i(this,l)}getMode(){return i(this,U)}get imageManager(){return(0,n.shadow)(this,"imageManager",new h)}};l=new WeakMap,R=new WeakMap,I=new WeakMap,Q=new WeakMap,G=new WeakMap,q=new WeakMap,V=new WeakMap,se=new WeakMap,L=new WeakMap,X=new WeakMap,re=new WeakMap,N=new WeakMap,d=new WeakMap,u=new WeakMap,T=new WeakMap,j=new WeakMap,U=new WeakMap,B=new WeakMap,Y=new WeakMap,ie=new WeakMap,le=new WeakMap,fe=new WeakMap,ye=new WeakMap,me=new WeakMap,ve=new WeakMap,Z=new WeakMap,ee=new WeakMap,M=new WeakMap,z=new WeakMap,J=new WeakMap,ae=new WeakMap,ge=new WeakMap,Ae=new WeakMap,_e=new WeakMap,te=new WeakSet,Sn=function(){window.addEventListener("focus",i(this,le)),window.addEventListener("blur",i(this,ie))},Wt=function(){window.removeEventListener("focus",i(this,le)),window.removeEventListener("blur",i(this,ie))},zt=function(){window.addEventListener("keydown",i(this,ve),{capture:!0})},At=function(){window.removeEventListener("keydown",i(this,ve),{capture:!0})},Ht=function(){document.addEventListener("copy",i(this,fe)),document.addEventListener("cut",i(this,ye)),document.addEventListener("paste",i(this,me))},Vt=function(){document.removeEventListener("copy",i(this,fe)),document.removeEventListener("cut",i(this,ye)),document.removeEventListener("paste",i(this,me))},nt=function(H){Object.entries(H).some(([we,Ie])=>i(this,J)[we]!==Ie)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(i(this,J),H)})},ht=function(H){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:H})},Cn=function(){if(!i(this,u)){ue(this,u,!0);for(const H of i(this,I).values())H.enable()}},Pn=function(){if(this.unselectAll(),i(this,u)){ue(this,u,!1);for(const H of i(this,I).values())H.disable()}},Gt=function(H){const be=i(this,I).get(H.pageIndex);be?be.addOrRebuild(H):this.addEditor(H)},pt=function(){if(i(this,R).size===0)return!0;if(i(this,R).size===1)for(const H of i(this,R).values())return H.isEmpty();return!1},qt=function(H){i(this,B).clear();for(const be of H)be.isEmpty()||(i(this,B).add(be),be.select());ne(this,te,nt).call(this,{hasSelectedEditor:!0})},Qe(qe,"TRANSLATE_SMALL",1),Qe(qe,"TRANSLATE_BIG",10);let k=qe;e.AnnotationEditorUIManager=k},(t,e,s)=>{var V,se,L,X,re,N,d,u,T,j,U,B,ot,lt,Xt,Et,St,ft,gt;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=a,e.getColorValues=R,e.getCurrentTransform=I,e.getCurrentTransformInverse=Q,e.getFilenameFromUrl=p,e.getPdfFilenameFromUrl=E,e.getRGB=l,e.getXfaPageViewport=D,e.isDataScheme=C,e.isPdfFile=x,e.isValidFetchUrl=S,e.loadScript=g,e.noContextMenu=c,e.setLayerDimensions=G;var n=s(7),r=s(1);const A="http://www.w3.org/2000/svg",q=class q{};Qe(q,"CSS",96),Qe(q,"PDF",72),Qe(q,"PDF_TO_CSS_UNITS",q.CSS/q.PDF);let P=q;e.PixelsPerInch=P;class O extends n.BaseFilterFactory{constructor({docId:M,ownerDocument:z=globalThis.document}={}){super();ce(this,B);ce(this,V);ce(this,se);ce(this,L);ce(this,X);ce(this,re);ce(this,N);ce(this,d);ce(this,u);ce(this,T);ce(this,j);ce(this,U,0);ue(this,L,M),ue(this,X,z)}addFilter(M){if(!M)return"none";let z=i(this,B,ot).get(M);if(z)return z;let J,ae,ge,Ae;if(M.length===1){const Ce=M[0],Ue=new Array(256);for(let je=0;je<256;je++)Ue[je]=Ce[je]/255;Ae=J=ae=ge=Ue.join(",")}else{const[Ce,Ue,je]=M,ze=new Array(256),ke=new Array(256),Oe=new Array(256);for(let He=0;He<256;He++)ze[He]=Ce[He]/255,ke[He]=Ue[He]/255,Oe[He]=je[He]/255;J=ze.join(","),ae=ke.join(","),ge=Oe.join(","),Ae=`${J}${ae}${ge}`}if(z=i(this,B,ot).get(Ae),z)return i(this,B,ot).set(M,z),z;const _e=`g_${i(this,L)}_transfer_map_${ut(this,U)._++}`,te=`url(#${_e})`;i(this,B,ot).set(M,te),i(this,B,ot).set(Ae,te);const Pe=ne(this,B,Et).call(this,_e);return ne(this,B,ft).call(this,J,ae,ge,Pe),te}addHCMFilter(M,z){var Ue;const J=`${M}-${z}`;if(i(this,N)===J)return i(this,d);if(ue(this,N,J),ue(this,d,"none"),(Ue=i(this,re))==null||Ue.remove(),!M||!z)return i(this,d);const ae=ne(this,B,gt).call(this,M);M=r.Util.makeHexColor(...ae);const ge=ne(this,B,gt).call(this,z);if(z=r.Util.makeHexColor(...ge),i(this,B,lt).style.color="",M==="#000000"&&z==="#ffffff"||M===z)return i(this,d);const Ae=new Array(256);for(let je=0;je<=255;je++){const ze=je/255;Ae[je]=ze<=.03928?ze/12.92:((ze+.055)/1.055)**2.4}const _e=Ae.join(","),te=`g_${i(this,L)}_hcm_filter`,Pe=ue(this,u,ne(this,B,Et).call(this,te));ne(this,B,ft).call(this,_e,_e,_e,Pe),ne(this,B,Xt).call(this,Pe);const Ce=(je,ze)=>{const ke=ae[je]/255,Oe=ge[je]/255,He=new Array(ze+1);for(let Xe=0;Xe<=ze;Xe++)He[Xe]=ke+Xe/ze*(Oe-ke);return He.join(",")};return ne(this,B,ft).call(this,Ce(0,5),Ce(1,5),Ce(2,5),Pe),ue(this,d,`url(#${te})`),i(this,d)}addHighlightHCMFilter(M,z,J,ae){var Oe;const ge=`${M}-${z}-${J}-${ae}`;if(i(this,T)===ge)return i(this,j);if(ue(this,T,ge),ue(this,j,"none"),(Oe=i(this,u))==null||Oe.remove(),!M||!z)return i(this,j);const[Ae,_e]=[M,z].map(ne(this,B,gt).bind(this));let te=Math.round(.2126*Ae[0]+.7152*Ae[1]+.0722*Ae[2]),Pe=Math.round(.2126*_e[0]+.7152*_e[1]+.0722*_e[2]),[Ce,Ue]=[J,ae].map(ne(this,B,gt).bind(this));Pe<te&&([te,Pe,Ce,Ue]=[Pe,te,Ue,Ce]),i(this,B,lt).style.color="";const je=(He,Xe,Ee)=>{const oe=new Array(256),de=(Pe-te)/Ee,Me=He/255,qe=(Xe-He)/(255*Ee);let Ge=0;for(let H=0;H<=Ee;H++){const be=Math.round(te+H*de),we=Me+H*qe;for(let Ie=Ge;Ie<=be;Ie++)oe[Ie]=we;Ge=be+1}for(let H=Ge;H<256;H++)oe[H]=oe[Ge-1];return oe.join(",")},ze=`g_${i(this,L)}_hcm_highlight_filter`,ke=ue(this,u,ne(this,B,Et).call(this,ze));return ne(this,B,Xt).call(this,ke),ne(this,B,ft).call(this,je(Ce[0],Ue[0],5),je(Ce[1],Ue[1],5),je(Ce[2],Ue[2],5),ke),ue(this,j,`url(#${ze})`),i(this,j)}destroy(M=!1){M&&(i(this,d)||i(this,j))||(i(this,se)&&(i(this,se).parentNode.parentNode.remove(),ue(this,se,null)),i(this,V)&&(i(this,V).clear(),ue(this,V,null)),ue(this,U,0))}}V=new WeakMap,se=new WeakMap,L=new WeakMap,X=new WeakMap,re=new WeakMap,N=new WeakMap,d=new WeakMap,u=new WeakMap,T=new WeakMap,j=new WeakMap,U=new WeakMap,B=new WeakSet,ot=function(){return i(this,V)||ue(this,V,new Map)},lt=function(){if(!i(this,se)){const M=i(this,X).createElement("div"),{style:z}=M;z.visibility="hidden",z.contain="strict",z.width=z.height=0,z.position="absolute",z.top=z.left=0,z.zIndex=-1;const J=i(this,X).createElementNS(A,"svg");J.setAttribute("width",0),J.setAttribute("height",0),ue(this,se,i(this,X).createElementNS(A,"defs")),M.append(J),J.append(i(this,se)),i(this,X).body.append(M)}return i(this,se)},Xt=function(M){const z=i(this,X).createElementNS(A,"feColorMatrix");z.setAttribute("type","matrix"),z.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),M.append(z)},Et=function(M){const z=i(this,X).createElementNS(A,"filter");return z.setAttribute("color-interpolation-filters","sRGB"),z.setAttribute("id",M),i(this,B,lt).append(z),z},St=function(M,z,J){const ae=i(this,X).createElementNS(A,z);ae.setAttribute("type","discrete"),ae.setAttribute("tableValues",J),M.append(ae)},ft=function(M,z,J,ae){const ge=i(this,X).createElementNS(A,"feComponentTransfer");ae.append(ge),ne(this,B,St).call(this,ge,"feFuncR",M),ne(this,B,St).call(this,ge,"feFuncG",z),ne(this,B,St).call(this,ge,"feFuncB",J)},gt=function(M){return i(this,B,lt).style.color=M,l(getComputedStyle(i(this,B,lt)).getPropertyValue("color"))},e.DOMFilterFactory=O;class h extends n.BaseCanvasFactory{constructor({ownerDocument:ee=globalThis.document}={}){super(),this._document=ee}_createCanvas(ee,M){const z=this._document.createElement("canvas");return z.width=ee,z.height=M,z}}e.DOMCanvasFactory=h;async function v(Z,ee=!1){if(S(Z,document.baseURI)){const M=await fetch(Z);if(!M.ok)throw new Error(M.statusText);return ee?new Uint8Array(await M.arrayBuffer()):(0,r.stringToBytes)(await M.text())}return new Promise((M,z)=>{const J=new XMLHttpRequest;J.open("GET",Z,!0),ee&&(J.responseType="arraybuffer"),J.onreadystatechange=()=>{if(J.readyState===XMLHttpRequest.DONE){if(J.status===200||J.status===0){let ae;if(ee&&J.response?ae=new Uint8Array(J.response):!ee&&J.responseText&&(ae=(0,r.stringToBytes)(J.responseText)),ae){M(ae);return}}z(new Error(J.statusText))}},J.send(null)})}class o extends n.BaseCMapReaderFactory{_fetchData(ee,M){return v(ee,this.isCompressed).then(z=>({cMapData:z,compressionType:M}))}}e.DOMCMapReaderFactory=o;class w extends n.BaseStandardFontDataFactory{_fetchData(ee){return v(ee,!0)}}e.DOMStandardFontDataFactory=w;class k extends n.BaseSVGFactory{_createSVG(ee){return document.createElementNS(A,ee)}}e.DOMSVGFactory=k;class y{constructor({viewBox:ee,scale:M,rotation:z,offsetX:J=0,offsetY:ae=0,dontFlip:ge=!1}){this.viewBox=ee,this.scale=M,this.rotation=z,this.offsetX=J,this.offsetY=ae;const Ae=(ee[2]+ee[0])/2,_e=(ee[3]+ee[1])/2;let te,Pe,Ce,Ue;switch(z%=360,z<0&&(z+=360),z){case 180:te=-1,Pe=0,Ce=0,Ue=1;break;case 90:te=0,Pe=1,Ce=1,Ue=0;break;case 270:te=0,Pe=-1,Ce=-1,Ue=0;break;case 0:te=1,Pe=0,Ce=0,Ue=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ge&&(Ce=-Ce,Ue=-Ue);let je,ze,ke,Oe;te===0?(je=Math.abs(_e-ee[1])*M+J,ze=Math.abs(Ae-ee[0])*M+ae,ke=(ee[3]-ee[1])*M,Oe=(ee[2]-ee[0])*M):(je=Math.abs(Ae-ee[0])*M+J,ze=Math.abs(_e-ee[1])*M+ae,ke=(ee[2]-ee[0])*M,Oe=(ee[3]-ee[1])*M),this.transform=[te*M,Pe*M,Ce*M,Ue*M,je-te*M*Ae-Ce*M*_e,ze-Pe*M*Ae-Ue*M*_e],this.width=ke,this.height=Oe}get rawDims(){const{viewBox:ee}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:ee[2]-ee[0],pageHeight:ee[3]-ee[1],pageX:ee[0],pageY:ee[1]})}clone({scale:ee=this.scale,rotation:M=this.rotation,offsetX:z=this.offsetX,offsetY:J=this.offsetY,dontFlip:ae=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:ee,rotation:M,offsetX:z,offsetY:J,dontFlip:ae})}convertToViewportPoint(ee,M){return r.Util.applyTransform([ee,M],this.transform)}convertToViewportRectangle(ee){const M=r.Util.applyTransform([ee[0],ee[1]],this.transform),z=r.Util.applyTransform([ee[2],ee[3]],this.transform);return[M[0],M[1],z[0],z[1]]}convertToPdfPoint(ee,M){return r.Util.applyInverseTransform([ee,M],this.transform)}}e.PageViewport=y;class b extends r.BaseException{constructor(ee,M=0){super(ee,"RenderingCancelledException"),this.extraDelay=M}}e.RenderingCancelledException=b;function C(Z){const ee=Z.length;let M=0;for(;M<ee&&Z[M].trim()==="";)M++;return Z.substring(M,M+5).toLowerCase()==="data:"}function x(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function p(Z,ee=!1){return ee||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function E(Z,ee="document.pdf"){if(typeof Z!="string")return ee;if(C(Z))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ee;const M=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,J=M.exec(Z);let ae=z.exec(J[1])||z.exec(J[2])||z.exec(J[3]);if(ae&&(ae=ae[0],ae.includes("%")))try{ae=z.exec(decodeURIComponent(ae))[0]}catch{}return ae||ee}class F{constructor(){Qe(this,"started",Object.create(null));Qe(this,"times",[])}time(ee){ee in this.started&&(0,r.warn)(`Timer is already running for ${ee}`),this.started[ee]=Date.now()}timeEnd(ee){ee in this.started||(0,r.warn)(`Timer has not been started for ${ee}`),this.times.push({name:ee,start:this.started[ee],end:Date.now()}),delete this.started[ee]}toString(){const ee=[];let M=0;for(const{name:z}of this.times)M=Math.max(z.length,M);for(const{name:z,start:J,end:ae}of this.times)ee.push(`${z.padEnd(M)} ${ae-J}ms
`);return ee.join("")}}e.StatTimer=F;function S(Z,ee){try{const{protocol:M}=ee?new URL(Z,ee):new URL(Z);return M==="http:"||M==="https:"}catch{return!1}}function c(Z){Z.preventDefault()}function g(Z,ee=!1){return new Promise((M,z)=>{const J=document.createElement("script");J.src=Z,J.onload=function(ae){ee&&J.remove(),M(ae)},J.onerror=function(){z(new Error(`Cannot load script at: ${J.src}`))},(document.head||document.documentElement).append(J)})}function a(Z){console.log("Deprecated API usage: "+Z)}let f;class m{static toDateObject(ee){if(!ee||typeof ee!="string")return null;f||(f=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const M=f.exec(ee);if(!M)return null;const z=parseInt(M[1],10);let J=parseInt(M[2],10);J=J>=1&&J<=12?J-1:0;let ae=parseInt(M[3],10);ae=ae>=1&&ae<=31?ae:1;let ge=parseInt(M[4],10);ge=ge>=0&&ge<=23?ge:0;let Ae=parseInt(M[5],10);Ae=Ae>=0&&Ae<=59?Ae:0;let _e=parseInt(M[6],10);_e=_e>=0&&_e<=59?_e:0;const te=M[7]||"Z";let Pe=parseInt(M[8],10);Pe=Pe>=0&&Pe<=23?Pe:0;let Ce=parseInt(M[9],10)||0;return Ce=Ce>=0&&Ce<=59?Ce:0,te==="-"?(ge+=Pe,Ae+=Ce):te==="+"&&(ge-=Pe,Ae-=Ce),new Date(Date.UTC(z,J,ae,ge,Ae,_e))}}e.PDFDateString=m;function D(Z,{scale:ee=1,rotation:M=0}){const{width:z,height:J}=Z.attributes.style,ae=[0,0,parseInt(z),parseInt(J)];return new y({viewBox:ae,scale:ee,rotation:M})}function l(Z){if(Z.startsWith("#")){const ee=parseInt(Z.slice(1),16);return[(ee&16711680)>>16,(ee&65280)>>8,ee&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(ee=>parseInt(ee)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(ee=>parseInt(ee)).slice(0,3):((0,r.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function R(Z){const ee=document.createElement("span");ee.style.visibility="hidden",document.body.append(ee);for(const M of Z.keys()){ee.style.color=M;const z=window.getComputedStyle(ee).color;Z.set(M,l(z))}ee.remove()}function I(Z){const{a:ee,b:M,c:z,d:J,e:ae,f:ge}=Z.getTransform();return[ee,M,z,J,ae,ge]}function Q(Z){const{a:ee,b:M,c:z,d:J,e:ae,f:ge}=Z.getTransform().invertSelf();return[ee,M,z,J,ae,ge]}function G(Z,ee,M=!1,z=!0){if(ee instanceof y){const{pageWidth:J,pageHeight:ae}=ee.rawDims,{style:ge}=Z,Ae=r.FeatureTest.isCSSRoundSupported,_e=`var(--scale-factor) * ${J}px`,te=`var(--scale-factor) * ${ae}px`,Pe=Ae?`round(${_e}, 1px)`:`calc(${_e})`,Ce=Ae?`round(${te}, 1px)`:`calc(${te})`;!M||ee.rotation%180===0?(ge.width=Pe,ge.height=Ce):(ge.width=Ce,ge.height=Pe)}z&&Z.setAttribute("data-main-rotation",ee.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(o){return"none"}addHCMFilter(o,w){return"none"}addHighlightHCMFilter(o,w,k,y){return"none"}destroy(o=!1){}}e.BaseFilterFactory=r;class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,w){if(o<=0||w<=0)throw new Error("Invalid canvas size");const k=this._createCanvas(o,w);return{canvas:k,context:k.getContext("2d")}}reset(o,w,k){if(!o.canvas)throw new Error("Canvas is not specified");if(w<=0||k<=0)throw new Error("Invalid canvas size");o.canvas.width=w,o.canvas.height=k}destroy(o){if(!o.canvas)throw new Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,w){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=A;class P{constructor({baseUrl:o=null,isCompressed:w=!0}){this.constructor===P&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=w}async fetch({name:o}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw new Error("CMap name must be specified.");const w=this.baseUrl+o+(this.isCompressed?".bcmap":""),k=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(w,k).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(o,w){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=P;class O{constructor({baseUrl:o=null}){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${o}`;return this._fetchData(w).catch(k=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(o){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=O;class h{constructor(){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,w,k=!1){if(o<=0||w<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),k||(y.setAttribute("width",`${o}px`),y.setAttribute("height",`${w}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${o} ${w}`),y}createElement(o){if(typeof o!="string")throw new Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const r=3285377520,A=4294901760,P=65535;class O{constructor(v){this.h1=v?v&4294967295:r,this.h2=v?v&4294967295:r}update(v){let o,w;if(typeof v=="string"){o=new Uint8Array(v.length*2),w=0;for(let a=0,f=v.length;a<f;a++){const m=v.charCodeAt(a);m<=255?o[w++]=m:(o[w++]=m>>>8,o[w++]=m&255)}}else if((0,n.isArrayBuffer)(v))o=v.slice(),w=o.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=w>>2,y=w-k*4,b=new Uint32Array(o.buffer,0,k);let C=0,x=0,p=this.h1,E=this.h2;const F=3432918353,S=461845907,c=F&P,g=S&P;for(let a=0;a<k;a++)a&1?(C=b[a],C=C*F&A|C*c&P,C=C<<15|C>>>17,C=C*S&A|C*g&P,p^=C,p=p<<13|p>>>19,p=p*5+3864292196):(x=b[a],x=x*F&A|x*c&P,x=x<<15|x>>>17,x=x*S&A|x*g&P,E^=x,E=E<<13|E>>>19,E=E*5+3864292196);switch(C=0,y){case 3:C^=o[k*4+2]<<16;case 2:C^=o[k*4+1]<<8;case 1:C^=o[k*4],C=C*F&A|C*c&P,C=C<<15|C>>>17,C=C*S&A|C*g&P,k&1?p^=C:E^=C}this.h1=p,this.h2=E}hexdigest(){let v=this.h1,o=this.h2;return v^=o>>>1,v=v*3981806797&A|v*36045&P,o=o*4283543511&A|((o<<16|v>>>16)*2950163797&A)>>>16,v^=o>>>1,v=v*444984403&A|v*60499&P,o=o*3301882366&A|((o<<16|v>>>16)*3120437893&A)>>>16,v^=o>>>1,(v>>>0).toString(16).padStart(8,"0")+(o>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=O},(t,e,s)=>{var P;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class r{constructor({ownerDocument:h=globalThis.document,styleElement:v=null}){ce(this,P,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(h,v.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),i(this,P).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||i(this,P).has(h.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:v,src:o,style:w}=h,k=new FontFace(v,o,w);this.addNativeFontFace(k);try{await k.load(),i(this,P).add(v)}catch{(0,n.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(k)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const o=h.createNativeFontFace();if(o){this.addNativeFontFace(o);try{await o.loaded}catch(w){throw(0,n.warn)(`Failed to load font '${o.family}': '${w}'.`),h.disableFontFace=!0,w}}return}const v=h.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(o=>{const w=this._queueLoadingCallback(o);this._prepareFontLoadEvent(h,w)})}}get isFontLoadingAPISupported(){var v;const h=!!((v=this._document)!=null&&v.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function v(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;o.length>0&&o[0].done;){const k=o.shift();setTimeout(k.callback,0)}}const{loadingRequests:o}=this,w={done:!1,complete:v,callback:h};return o.push(w),w}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,v){function o(l,R){return l.charCodeAt(R)<<24|l.charCodeAt(R+1)<<16|l.charCodeAt(R+2)<<8|l.charCodeAt(R+3)&255}function w(l,R,I,Q){const G=l.substring(0,R),q=l.substring(R+I);return G+Q+q}let k,y;const b=this._document.createElement("canvas");b.width=1,b.height=1;const C=b.getContext("2d");let x=0;function p(l,R){if(++x>30){(0,n.warn)("Load test font never loaded."),R();return}if(C.font="30px "+l,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,l,R))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=w(F,976,E.length,E);const c=16,g=1482184792;let a=o(F,c);for(k=0,y=E.length-3;k<y;k+=4)a=a-g+o(E,k)|0;k<E.length&&(a=a-g+o(E+"XXX",k)|0),F=w(F,c,4,(0,n.string32)(a));const f=`url(data:font/opentype;base64,${btoa(F)});`,m=`@font-face {font-family:"${E}";src:${f}}`;this.insertRule(m);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const l of[h.loadedName,E]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=l,D.append(R)}this._document.body.append(D),p(E,()=>{D.remove(),v.complete()})}}P=new WeakMap,e.FontLoader=r;class A{constructor(h,{isEvalSupported:v=!0,disableFontFace:o=!1,ignoreErrors:w=!1,inspectFont:k=null}){this.compiledGlyphs=Object.create(null);for(const y in h)this[y]=h[y];this.isEvalSupported=v!==!1,this.disableFontFace=o===!0,this.ignoreErrors=w===!0,this._inspectFont=k}createNativeFontFace(){var v;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const o={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(o.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,o)}return(v=this._inspectFont)==null||v.call(this,this),h}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const h=(0,n.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(h)});`;let o;if(!this.cssFontInfo)o=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),o=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${v}}`}return(w=this._inspectFont)==null||w.call(this,this,v),o}getPathGenerator(h,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let o;try{o=h.get(this.loadedName+"_path_"+v)}catch(w){if(!this.ignoreErrors)throw w;return(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[v]=function(k,y){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const k of o){const y=k.args!==void 0?k.args.join(","):"";w.push("c.",k.cmd,"(",y,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",w.join(""))}return this.compiledGlyphs[v]=function(w,k){for(const y of o)y.cmd==="scale"&&(y.args=[k,-k]),w[y.cmd].apply(w,y.args)}}}e.FontFaceObject=A},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const r=function(v){return new Promise((o,w)=>{require$$5.readFile(v,(y,b)=>{if(y||!b){w(new Error(y));return}o(new Uint8Array(b))})})};class A extends n.BaseFilterFactory{}e.NodeFilterFactory=A;class P extends n.BaseCanvasFactory{_createCanvas(o,w){return require$$5.createCanvas(o,w)}}e.NodeCanvasFactory=P;class O extends n.BaseCMapReaderFactory{_fetchData(o,w){return r(o).then(k=>({cMapData:k,compressionType:w}))}}e.NodeCMapReaderFactory=O;class h extends n.BaseStandardFontDataFactory{_fetchData(o){return r(o)}}e.NodeStandardFontDataFactory=h},(t,e,s)=>{var se,Yt,Kt;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),r=s(6),A=s(12),P=s(13);const O=16,h=100,v=4096,o=15,w=10,k=1e3,y=16;function b(N,d){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){d.save(),this.__originalSave()},N.restore=function(){d.restore(),this.__originalRestore()},N.translate=function(T,j){d.translate(T,j),this.__originalTranslate(T,j)},N.scale=function(T,j){d.scale(T,j),this.__originalScale(T,j)},N.transform=function(T,j,U,B,Y,ie){d.transform(T,j,U,B,Y,ie),this.__originalTransform(T,j,U,B,Y,ie)},N.setTransform=function(T,j,U,B,Y,ie){d.setTransform(T,j,U,B,Y,ie),this.__originalSetTransform(T,j,U,B,Y,ie)},N.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},N.rotate=function(T){d.rotate(T),this.__originalRotate(T)},N.clip=function(T){d.clip(T),this.__originalClip(T)},N.moveTo=function(u,T){d.moveTo(u,T),this.__originalMoveTo(u,T)},N.lineTo=function(u,T){d.lineTo(u,T),this.__originalLineTo(u,T)},N.bezierCurveTo=function(u,T,j,U,B,Y){d.bezierCurveTo(u,T,j,U,B,Y),this.__originalBezierCurveTo(u,T,j,U,B,Y)},N.rect=function(u,T,j,U){d.rect(u,T,j,U),this.__originalRect(u,T,j,U)},N.closePath=function(){d.closePath(),this.__originalClosePath()},N.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class C{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,u,T){let j;return this.cache[d]!==void 0?(j=this.cache[d],this.canvasFactory.reset(j,u,T)):(j=this.canvasFactory.create(u,T),this.cache[d]=j),j}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const u=this.cache[d];this.canvasFactory.destroy(u),delete this.cache[d]}}}function x(N,d,u,T,j,U,B,Y,ie,le){const[fe,ye,me,ve,Z,ee]=(0,r.getCurrentTransform)(N);if(ye===0&&me===0){const J=B*fe+Z,ae=Math.round(J),ge=Y*ve+ee,Ae=Math.round(ge),_e=(B+ie)*fe+Z,te=Math.abs(Math.round(_e)-ae)||1,Pe=(Y+le)*ve+ee,Ce=Math.abs(Math.round(Pe)-Ae)||1;return N.setTransform(Math.sign(fe),0,0,Math.sign(ve),ae,Ae),N.drawImage(d,u,T,j,U,0,0,te,Ce),N.setTransform(fe,ye,me,ve,Z,ee),[te,Ce]}if(fe===0&&ve===0){const J=Y*me+Z,ae=Math.round(J),ge=B*ye+ee,Ae=Math.round(ge),_e=(Y+le)*me+Z,te=Math.abs(Math.round(_e)-ae)||1,Pe=(B+ie)*ye+ee,Ce=Math.abs(Math.round(Pe)-Ae)||1;return N.setTransform(0,Math.sign(ye),Math.sign(me),0,ae,Ae),N.drawImage(d,u,T,j,U,0,0,Ce,te),N.setTransform(fe,ye,me,ve,Z,ee),[Ce,te]}N.drawImage(d,u,T,j,U,B,Y,ie,le);const M=Math.hypot(fe,ye),z=Math.hypot(me,ve);return[M*ie,z*le]}function p(N){const{width:d,height:u}=N;if(d>k||u>k)return null;const T=1e3,j=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=d+1;let B=new Uint8Array(U*(u+1)),Y,ie,le;const fe=d+7&-8;let ye=new Uint8Array(fe*u),me=0;for(const z of N.data){let J=128;for(;J>0;)ye[me++]=z&J?0:255,J>>=1}let ve=0;for(me=0,ye[me]!==0&&(B[0]=1,++ve),ie=1;ie<d;ie++)ye[me]!==ye[me+1]&&(B[ie]=ye[me]?2:1,++ve),me++;for(ye[me]!==0&&(B[ie]=2,++ve),Y=1;Y<u;Y++){me=Y*fe,le=Y*U,ye[me-fe]!==ye[me]&&(B[le]=ye[me]?1:8,++ve);let z=(ye[me]?4:0)+(ye[me-fe]?8:0);for(ie=1;ie<d;ie++)z=(z>>2)+(ye[me+1]?4:0)+(ye[me-fe+1]?8:0),j[z]&&(B[le+ie]=j[z],++ve),me++;if(ye[me-fe]!==ye[me]&&(B[le+ie]=ye[me]?2:4,++ve),ve>T)return null}for(me=fe*(u-1),le=Y*U,ye[me]!==0&&(B[le]=8,++ve),ie=1;ie<d;ie++)ye[me]!==ye[me+1]&&(B[le+ie]=ye[me]?4:8,++ve),me++;if(ye[me]!==0&&(B[le+ie]=4,++ve),ve>T)return null;const Z=new Int32Array([0,U,-1,0,-U,0,0,0,1]),ee=new Path2D;for(Y=0;ve&&Y<=u;Y++){let z=Y*U;const J=z+d;for(;z<J&&!B[z];)z++;if(z===J)continue;ee.moveTo(z%U,Y);const ae=z;let ge=B[z];do{const Ae=Z[ge];do z+=Ae;while(!B[z]);const _e=B[z];_e!==5&&_e!==10?(ge=_e,B[z]=0):(ge=_e&51*ge>>4,B[z]&=ge>>2|ge<<2),ee.lineTo(z%U,z/U|0),B[z]||--ve}while(ae!==z);--Y}return ye=null,B=null,function(z){z.save(),z.scale(1/d,-1/u),z.translate(0,-u),z.fill(ee),z.beginPath(),z.restore()}}class E{constructor(d,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,u])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,u){this.x=d,this.y=u}updatePathMinMax(d,u,T){[u,T]=n.Util.applyTransform([u,T],d),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(d,u){const T=n.Util.applyTransform(u,d),j=n.Util.applyTransform(u.slice(2),d);this.minX=Math.min(this.minX,T[0],j[0]),this.minY=Math.min(this.minY,T[1],j[1]),this.maxX=Math.max(this.maxX,T[0],j[0]),this.maxY=Math.max(this.maxY,T[1],j[1])}updateScalingPathMinMax(d,u){n.Util.scaleMinMax(d,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(d,u,T,j,U,B,Y,ie,le,fe){const ye=n.Util.bezierBoundingBox(u,T,j,U,B,Y,ie,le);if(fe){fe[0]=Math.min(fe[0],ye[0],ye[2]),fe[1]=Math.max(fe[1],ye[0],ye[2]),fe[2]=Math.min(fe[2],ye[1],ye[3]),fe[3]=Math.max(fe[3],ye[1],ye[3]);return}this.updateRectMinMax(d,ye)}getPathBoundingBox(d=A.PathType.FILL,u=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(d===A.PathType.STROKE){u||(0,n.unreachable)("Stroke bounding box must include transform.");const j=n.Util.singularValueDecompose2dScale(u),U=j[0]*this.lineWidth/2,B=j[1]*this.lineWidth/2;T[0]-=U,T[1]-=B,T[2]+=U,T[3]+=B}return T}updateClipFromPath(){const d=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=A.PathType.FILL,u=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(d,u))}}function F(N,d){if(typeof ImageData<"u"&&d instanceof ImageData){N.putImageData(d,0,0);return}const u=d.height,T=d.width,j=u%y,U=(u-j)/y,B=j===0?U:U+1,Y=N.createImageData(T,y);let ie=0,le;const fe=d.data,ye=Y.data;let me,ve,Z,ee;if(d.kind===n.ImageKind.GRAYSCALE_1BPP){const M=fe.byteLength,z=new Uint32Array(ye.buffer,0,ye.byteLength>>2),J=z.length,ae=T+7>>3,ge=4294967295,Ae=n.FeatureTest.isLittleEndian?4278190080:255;for(me=0;me<B;me++){for(Z=me<U?y:j,le=0,ve=0;ve<Z;ve++){const _e=M-ie;let te=0;const Pe=_e>ae?T:_e*8-7,Ce=Pe&-8;let Ue=0,je=0;for(;te<Ce;te+=8)je=fe[ie++],z[le++]=je&128?ge:Ae,z[le++]=je&64?ge:Ae,z[le++]=je&32?ge:Ae,z[le++]=je&16?ge:Ae,z[le++]=je&8?ge:Ae,z[le++]=je&4?ge:Ae,z[le++]=je&2?ge:Ae,z[le++]=je&1?ge:Ae;for(;te<Pe;te++)Ue===0&&(je=fe[ie++],Ue=128),z[le++]=je&Ue?ge:Ae,Ue>>=1}for(;le<J;)z[le++]=0;N.putImageData(Y,0,me*y)}}else if(d.kind===n.ImageKind.RGBA_32BPP){for(ve=0,ee=T*y*4,me=0;me<U;me++)ye.set(fe.subarray(ie,ie+ee)),ie+=ee,N.putImageData(Y,0,ve),ve+=y;me<B&&(ee=T*j*4,ye.set(fe.subarray(ie,ie+ee)),N.putImageData(Y,0,ve))}else if(d.kind===n.ImageKind.RGB_24BPP)for(Z=y,ee=T*Z,me=0;me<B;me++){for(me>=U&&(Z=j,ee=T*Z),le=0,ve=ee;ve--;)ye[le++]=fe[ie++],ye[le++]=fe[ie++],ye[le++]=fe[ie++],ye[le++]=255;N.putImageData(Y,0,me*y)}else throw new Error(`bad image kind: ${d.kind}`)}function S(N,d){if(d.bitmap){N.drawImage(d.bitmap,0,0);return}const u=d.height,T=d.width,j=u%y,U=(u-j)/y,B=j===0?U:U+1,Y=N.createImageData(T,y);let ie=0;const le=d.data,fe=Y.data;for(let ye=0;ye<B;ye++){const me=ye<U?y:j;({srcPos:ie}=(0,P.convertBlackAndWhiteToRGBA)({src:le,srcPos:ie,dest:fe,width:T,height:me,nonBlackColor:0})),N.putImageData(Y,0,ye*y)}}function c(N,d){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const T of u)N[T]!==void 0&&(d[T]=N[T]);N.setLineDash!==void 0&&(d.setLineDash(N.getLineDash()),d.lineDashOffset=N.lineDashOffset)}function g(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!n.isNodeJS){const{filter:d}=N;d!=="none"&&d!==""&&(N.filter="none")}}function a(N,d,u,T){const j=N.length;for(let U=3;U<j;U+=4){const B=N[U];if(B===0)N[U-3]=d,N[U-2]=u,N[U-1]=T;else if(B<255){const Y=255-B;N[U-3]=N[U-3]*B+d*Y>>8,N[U-2]=N[U-2]*B+u*Y>>8,N[U-1]=N[U-1]*B+T*Y>>8}}}function f(N,d,u){const T=N.length,j=1/255;for(let U=3;U<T;U+=4){const B=u?u[N[U]]:N[U];d[U]=d[U]*B*j|0}}function m(N,d,u){const T=N.length;for(let j=3;j<T;j+=4){const U=N[j-3]*77+N[j-2]*152+N[j-1]*28;d[j]=u?d[j]*u[U>>8]>>8:d[j]*U>>16}}function D(N,d,u,T,j,U,B,Y,ie,le,fe){const ye=!!U,me=ye?U[0]:0,ve=ye?U[1]:0,Z=ye?U[2]:0,ee=j==="Luminosity"?m:f,z=Math.min(T,Math.ceil(1048576/u));for(let J=0;J<T;J+=z){const ae=Math.min(z,T-J),ge=N.getImageData(Y-le,J+(ie-fe),u,ae),Ae=d.getImageData(Y,J+ie,u,ae);ye&&a(ge.data,me,ve,Z),ee(ge.data,Ae.data,B),d.putImageData(Ae,Y,J+ie)}}function l(N,d,u,T){const j=T[0],U=T[1],B=T[2]-j,Y=T[3]-U;B===0||Y===0||(D(d.context,u,B,Y,d.subtype,d.backdrop,d.transferMap,j,U,d.offsetX,d.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(u.canvas,0,0),N.restore())}function R(N,d){const u=n.Util.singularValueDecompose2dScale(N);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:u[0]<=T||u[1]<=T}const I=["butt","round","square"],Q=["miter","round","bevel"],G={},q={},re=class re{constructor(d,u,T,j,U,{optionalContentConfig:B,markedContentStack:Y=null},ie,le){ce(this,se);this.ctx=d,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=T,this.canvasFactory=j,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Y||[],this.optionalContentConfig=B,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ie,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=le,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,u=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):u}beginDrawing({transform:d,viewport:u,transparency:T=!1,background:j=null}){const U=this.ctx.canvas.width,B=this.ctx.canvas.height,Y=this.ctx.fillStyle;if(this.ctx.fillStyle=j||"#ffffff",this.ctx.fillRect(0,0,U,B),this.ctx.fillStyle=Y,T){const ie=this.cachedCanvases.getCanvas("transparent",U,B);this.compositeCtx=this.ctx,this.transparentCanvas=ie.canvas,this.ctx=ie.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(d,u,T,j){const U=d.argsArray,B=d.fnArray;let Y=u||0;const ie=U.length;if(ie===Y)return Y;const le=ie-Y>w&&typeof T=="function",fe=le?Date.now()+o:0;let ye=0;const me=this.commonObjs,ve=this.objs;let Z;for(;;){if(j!==void 0&&Y===j.nextBreakPoint)return j.breakIt(Y,T),Y;if(Z=B[Y],Z!==n.OPS.dependency)this[Z].apply(this,U[Y]);else for(const ee of U[Y]){const M=ee.startsWith("g_")?me:ve;if(!M.has(ee))return M.get(ee,T),Y}if(Y++,Y===ie)return Y;if(le&&++ye>w){if(Date.now()>fe)return T(),Y;ye=0}}}endDrawing(){ne(this,se,Yt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const u of d.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);d.clear()}this._cachedBitmapsMap.clear(),ne(this,se,Kt).call(this)}_scaleImage(d,u){const T=d.width,j=d.height;let U=Math.max(Math.hypot(u[0],u[1]),1),B=Math.max(Math.hypot(u[2],u[3]),1),Y=T,ie=j,le="prescale1",fe,ye;for(;U>2&&Y>1||B>2&&ie>1;){let me=Y,ve=ie;U>2&&Y>1&&(me=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y/2),U/=Y/me),B>2&&ie>1&&(ve=ie>=16384?Math.floor(ie/2)-1||1:Math.ceil(ie)/2,B/=ie/ve),fe=this.cachedCanvases.getCanvas(le,me,ve),ye=fe.context,ye.clearRect(0,0,me,ve),ye.drawImage(d,0,0,Y,ie,0,0,me,ve),d=fe.canvas,Y=me,ie=ve,le=le==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:Y,paintHeight:ie}}_createMaskCanvas(d){const u=this.ctx,{width:T,height:j}=d,U=this.current.fillColor,B=this.current.patternFill,Y=(0,r.getCurrentTransform)(u);let ie,le,fe,ye;if((d.bitmap||d.data)&&d.count>1){const te=d.bitmap||d.data.buffer;le=JSON.stringify(B?Y:[Y.slice(0,4),U]),ie=this._cachedBitmapsMap.get(te),ie||(ie=new Map,this._cachedBitmapsMap.set(te,ie));const Pe=ie.get(le);if(Pe&&!B){const Ce=Math.round(Math.min(Y[0],Y[2])+Y[4]),Ue=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Pe,offsetX:Ce,offsetY:Ue}}fe=Pe}fe||(ye=this.cachedCanvases.getCanvas("maskCanvas",T,j),S(ye.context,d));let me=n.Util.transform(Y,[1/T,0,0,-1/j,0,0]);me=n.Util.transform(me,[1,0,0,1,0,-j]);const ve=n.Util.applyTransform([0,0],me),Z=n.Util.applyTransform([T,j],me),ee=n.Util.normalizeRect([ve[0],ve[1],Z[0],Z[1]]),M=Math.round(ee[2]-ee[0])||1,z=Math.round(ee[3]-ee[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",M,z),ae=J.context,ge=Math.min(ve[0],Z[0]),Ae=Math.min(ve[1],Z[1]);ae.translate(-ge,-Ae),ae.transform(...me),fe||(fe=this._scaleImage(ye.canvas,(0,r.getCurrentTransformInverse)(ae)),fe=fe.img,ie&&B&&ie.set(le,fe)),ae.imageSmoothingEnabled=R((0,r.getCurrentTransform)(ae),d.interpolate),x(ae,fe,0,0,fe.width,fe.height,0,0,T,j),ae.globalCompositeOperation="source-in";const _e=n.Util.transform((0,r.getCurrentTransformInverse)(ae),[1,0,0,1,-ge,-Ae]);return ae.fillStyle=B?U.getPattern(u,this,_e,A.PathType.FILL):U,ae.fillRect(0,0,T,j),ie&&!B&&(this.cachedCanvases.delete("fillCanvas"),ie.set(le,J.canvas)),{canvas:J.canvas,offsetX:Math.round(ge),offsetY:Math.round(Ae)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=I[d]}setLineJoin(d){this.ctx.lineJoin=Q[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,u){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(d),T.lineDashOffset=u)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[u,T]of d)switch(u){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,u=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,j=this.cachedCanvases.getCanvas(T,d,u);this.suspendedCtx=this.ctx,this.ctx=j.context;const U=this.ctx;U.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,U),b(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,T=this.suspendedCtx;l(T,u,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(d,u,T,j,U,B){this.ctx.transform(d,u,T,j,U,B),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(d,u,T){const j=this.ctx,U=this.current;let B=U.x,Y=U.y,ie,le;const fe=(0,r.getCurrentTransform)(j),ye=fe[0]===0&&fe[3]===0||fe[1]===0&&fe[2]===0,me=ye?T.slice(0):null;for(let ve=0,Z=0,ee=d.length;ve<ee;ve++)switch(d[ve]|0){case n.OPS.rectangle:B=u[Z++],Y=u[Z++];const M=u[Z++],z=u[Z++],J=B+M,ae=Y+z;j.moveTo(B,Y),M===0||z===0?j.lineTo(J,ae):(j.lineTo(J,Y),j.lineTo(J,ae),j.lineTo(B,ae)),ye||U.updateRectMinMax(fe,[B,Y,J,ae]),j.closePath();break;case n.OPS.moveTo:B=u[Z++],Y=u[Z++],j.moveTo(B,Y),ye||U.updatePathMinMax(fe,B,Y);break;case n.OPS.lineTo:B=u[Z++],Y=u[Z++],j.lineTo(B,Y),ye||U.updatePathMinMax(fe,B,Y);break;case n.OPS.curveTo:ie=B,le=Y,B=u[Z+4],Y=u[Z+5],j.bezierCurveTo(u[Z],u[Z+1],u[Z+2],u[Z+3],B,Y),U.updateCurvePathMinMax(fe,ie,le,u[Z],u[Z+1],u[Z+2],u[Z+3],B,Y,me),Z+=6;break;case n.OPS.curveTo2:ie=B,le=Y,j.bezierCurveTo(B,Y,u[Z],u[Z+1],u[Z+2],u[Z+3]),U.updateCurvePathMinMax(fe,ie,le,B,Y,u[Z],u[Z+1],u[Z+2],u[Z+3],me),B=u[Z+2],Y=u[Z+3],Z+=4;break;case n.OPS.curveTo3:ie=B,le=Y,B=u[Z+2],Y=u[Z+3],j.bezierCurveTo(u[Z],u[Z+1],B,Y,B,Y),U.updateCurvePathMinMax(fe,ie,le,u[Z],u[Z+1],B,Y,B,Y,me),Z+=4;break;case n.OPS.closePath:j.closePath();break}ye&&U.updateScalingPathMinMax(fe,me),U.setCurrentPoint(B,Y)}closePath(){this.ctx.closePath()}stroke(d=!0){const u=this.ctx,T=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&(T!=null&&T.getPattern)?(u.save(),u.strokeStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),A.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const u=this.ctx,T=this.current.fillColor,j=this.current.patternFill;let U=!1;j&&(u.save(),u.fillStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),A.PathType.FILL),U=!0);const B=this.current.getClippedPathBoundingBox();this.contentVisible&&B!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),U&&u.restore(),d&&this.consumePath(B)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=q}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,u=this.ctx;if(d===void 0){u.beginPath();return}u.save(),u.beginPath();for(const T of d)u.setTransform(...T.transform),u.translate(T.x,T.y),T.addToPath(u,T.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,u){var fe;const T=this.commonObjs.get(d),j=this.current;if(!T)throw new Error(`Can't find font for ${d}`);if(j.fontMatrix=T.fontMatrix||n.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+d),u<0?(u=-u,j.fontDirection=-1):j.fontDirection=1,this.current.font=T,this.current.fontSize=u,T.isType3Font)return;const U=T.loadedName||"sans-serif",B=((fe=T.systemFontInfo)==null?void 0:fe.css)||`"${U}", ${T.fallbackName}`;let Y="normal";T.black?Y="900":T.bold&&(Y="bold");const ie=T.italic?"italic":"normal";let le=u;u<O?le=O:u>h&&(le=h),this.current.fontSizeScale=u/le,this.ctx.font=`${ie} ${Y} ${le}px ${B}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,u){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=u}setLeadingMoveText(d,u){this.setLeading(-u),this.moveText(d,u)}setTextMatrix(d,u,T,j,U,B){this.current.textMatrix=[d,u,T,j,U,B],this.current.textMatrixScale=Math.hypot(d,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,u,T,j){const U=this.ctx,B=this.current,Y=B.font,ie=B.textRenderingMode,le=B.fontSize/B.fontSizeScale,fe=ie&n.TextRenderingMode.FILL_STROKE_MASK,ye=!!(ie&n.TextRenderingMode.ADD_TO_PATH_FLAG),me=B.patternFill&&!Y.missingFile;let ve;(Y.disableFontFace||ye||me)&&(ve=Y.getPathGenerator(this.commonObjs,d)),Y.disableFontFace||me?(U.save(),U.translate(u,T),U.beginPath(),ve(U,le),j&&U.setTransform(...j),(fe===n.TextRenderingMode.FILL||fe===n.TextRenderingMode.FILL_STROKE)&&U.fill(),(fe===n.TextRenderingMode.STROKE||fe===n.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((fe===n.TextRenderingMode.FILL||fe===n.TextRenderingMode.FILL_STROKE)&&U.fillText(d,u,T),(fe===n.TextRenderingMode.STROKE||fe===n.TextRenderingMode.FILL_STROKE)&&U.strokeText(d,u,T)),ye&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(U),x:u,y:T,fontSize:le,addToPath:ve})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const u=d.getImageData(0,0,10,10).data;let T=!1;for(let j=3;j<u.length;j+=4)if(u[j]>0&&u[j]<255){T=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(d){const u=this.current,T=u.font;if(T.isType3Font)return this.showType3Text(d);const j=u.fontSize;if(j===0)return;const U=this.ctx,B=u.fontSizeScale,Y=u.charSpacing,ie=u.wordSpacing,le=u.fontDirection,fe=u.textHScale*le,ye=d.length,me=T.vertical,ve=me?1:-1,Z=T.defaultVMetrics,ee=j*u.fontMatrix[0],M=u.textRenderingMode===n.TextRenderingMode.FILL&&!T.disableFontFace&&!u.patternFill;U.save(),U.transform(...u.textMatrix),U.translate(u.x,u.y+u.textRise),le>0?U.scale(fe,-1):U.scale(fe,1);let z;if(u.patternFill){U.save();const _e=u.fillColor.getPattern(U,this,(0,r.getCurrentTransformInverse)(U),A.PathType.FILL);z=(0,r.getCurrentTransform)(U),U.restore(),U.fillStyle=_e}let J=u.lineWidth;const ae=u.textMatrixScale;if(ae===0||J===0){const _e=u.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(_e===n.TextRenderingMode.STROKE||_e===n.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=ae;if(B!==1&&(U.scale(B,B),J/=B),U.lineWidth=J,T.isInvalidPDFjsFont){const _e=[];let te=0;for(const Pe of d)_e.push(Pe.unicode),te+=Pe.width;U.fillText(_e.join(""),0,0),u.x+=te*ee*fe,U.restore(),this.compose();return}let ge=0,Ae;for(Ae=0;Ae<ye;++Ae){const _e=d[Ae];if(typeof _e=="number"){ge+=ve*_e*j/1e3;continue}let te=!1;const Pe=(_e.isSpace?ie:0)+Y,Ce=_e.fontChar,Ue=_e.accent;let je,ze,ke=_e.width;if(me){const He=_e.vmetric||Z,Xe=-(_e.vmetric?He[1]:ke*.5)*ee,Ee=He[2]*ee;ke=He?-He[0]:ke,je=Xe/B,ze=(ge+Ee)/B}else je=ge/B,ze=0;if(T.remeasure&&ke>0){const He=U.measureText(Ce).width*1e3/j*B;if(ke<He&&this.isFontSubpixelAAEnabled){const Xe=ke/He;te=!0,U.save(),U.scale(Xe,1),je/=Xe}else ke!==He&&(je+=(ke-He)/2e3*j/B)}if(this.contentVisible&&(_e.isInFont||T.missingFile)){if(M&&!Ue)U.fillText(Ce,je,ze);else if(this.paintChar(Ce,je,ze,z),Ue){const He=je+j*Ue.offset.x/B,Xe=ze-j*Ue.offset.y/B;this.paintChar(Ue.fontChar,He,Xe,z)}}const Oe=me?ke*ee-Pe*le:ke*ee+Pe*le;ge+=Oe,te&&U.restore()}me?u.y-=ge:u.x+=ge*fe,U.restore(),this.compose()}showType3Text(d){const u=this.ctx,T=this.current,j=T.font,U=T.fontSize,B=T.fontDirection,Y=j.vertical?1:-1,ie=T.charSpacing,le=T.wordSpacing,fe=T.textHScale*B,ye=T.fontMatrix||n.FONT_IDENTITY_MATRIX,me=d.length,ve=T.textRenderingMode===n.TextRenderingMode.INVISIBLE;let Z,ee,M,z;if(!(ve||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...T.textMatrix),u.translate(T.x,T.y),u.scale(fe,B),Z=0;Z<me;++Z){if(ee=d[Z],typeof ee=="number"){z=Y*ee*U/1e3,this.ctx.translate(z,0),T.x+=z*fe;continue}const J=(ee.isSpace?le:0)+ie,ae=j.charProcOperatorList[ee.operatorListId];if(!ae){(0,n.warn)(`Type3 character "${ee.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ee,this.save(),u.scale(U,U),u.transform(...ye),this.executeOperatorList(ae),this.restore()),M=n.Util.applyTransform([ee.width,0],ye)[0]*U+J,u.translate(M,0),T.x+=M*fe}u.restore(),this.processingType3=null}}setCharWidth(d,u){}setCharWidthAndBounds(d,u,T,j,U,B){this.ctx.rect(T,j,U-T,B-j),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let u;if(d[0]==="TilingPattern"){const T=d[1],j=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),U={createCanvasGraphics:B=>new re(B,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};u=new A.TilingPattern(d,T,this.ctx,U,j)}else u=this._getPattern(d[1],d[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,u,T){const j=n.Util.makeHexColor(d,u,T);this.ctx.strokeStyle=j,this.current.strokeColor=j}setFillRGBColor(d,u,T){const j=n.Util.makeHexColor(d,u,T);this.ctx.fillStyle=j,this.current.fillColor=j,this.current.patternFill=!1}_getPattern(d,u=null){let T;return this.cachedPatterns.has(d)?T=this.cachedPatterns.get(d):(T=(0,A.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,T)),u&&(T.matrix=u),T}shadingFill(d){if(!this.contentVisible)return;const u=this.ctx;this.save();const T=this._getPattern(d);u.fillStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),A.PathType.SHADING);const j=(0,r.getCurrentTransformInverse)(u);if(j){const{width:U,height:B}=u.canvas,[Y,ie,le,fe]=n.Util.getAxialAlignedBoundingBox([0,0,U,B],j);this.ctx.fillRect(Y,ie,le-Y,fe-ie)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),u)){const T=u[2]-u[0],j=u[3]-u[1];this.ctx.rect(u[0],u[1],T,j),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;d.isolated||(0,n.info)("TODO: Support non-isolated groups."),d.knockout&&(0,n.warn)("Knockout groups not supported.");const T=(0,r.getCurrentTransform)(u);if(d.matrix&&u.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let j=n.Util.getAxialAlignedBoundingBox(d.bbox,(0,r.getCurrentTransform)(u));const U=[0,0,u.canvas.width,u.canvas.height];j=n.Util.intersect(j,U)||[0,0,0,0];const B=Math.floor(j[0]),Y=Math.floor(j[1]);let ie=Math.max(Math.ceil(j[2])-B,1),le=Math.max(Math.ceil(j[3])-Y,1),fe=1,ye=1;ie>v&&(fe=ie/v,ie=v),le>v&&(ye=le/v,le=v),this.current.startNewPathAndClipBox([0,0,ie,le]);let me="groupAt"+this.groupLevel;d.smask&&(me+="_smask_"+this.smaskCounter++%2);const ve=this.cachedCanvases.getCanvas(me,ie,le),Z=ve.context;Z.scale(1/fe,1/ye),Z.translate(-B,-Y),Z.transform(...T),d.smask?this.smaskStack.push({canvas:ve.canvas,context:Z,offsetX:B,offsetY:Y,scaleX:fe,scaleY:ye,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(B,Y),u.scale(fe,ye),u.save()),c(u,Z),this.ctx=Z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const j=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...j);const U=n.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],j);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(d,u,T,j,U){if(ne(this,se,Yt).call(this),g(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const B=u[2]-u[0],Y=u[3]-u[1];if(U&&this.annotationCanvasMap){T=T.slice(),T[4]-=u[0],T[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=B,u[3]=Y;const[ie,le]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:fe}=this,ye=Math.ceil(B*this.outputScaleX*fe),me=Math.ceil(Y*this.outputScaleY*fe);this.annotationCanvas=this.canvasFactory.create(ye,me);const{canvas:ve,context:Z}=this.annotationCanvas;this.annotationCanvasMap.set(d,ve),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Z,this.ctx.save(),this.ctx.setTransform(ie,0,0,-le,0,Y*le),g(this.ctx)}else g(this.ctx),this.ctx.rect(u[0],u[1],B,Y),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...j)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ne(this,se,Kt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const u=d.count;d=this.getObject(d.data,d),d.count=u;const T=this.ctx,j=this.processingType3;if(j&&(j.compiled===void 0&&(j.compiled=p(d)),j.compiled)){j.compiled(T);return}const U=this._createMaskCanvas(d),B=U.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(B,U.offsetX,U.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(d,u,T=0,j=0,U,B){if(!this.contentVisible)return;d=this.getObject(d.data,d);const Y=this.ctx;Y.save();const ie=(0,r.getCurrentTransform)(Y);Y.transform(u,T,j,U,0,0);const le=this._createMaskCanvas(d);Y.setTransform(1,0,0,1,le.offsetX-ie[4],le.offsetY-ie[5]);for(let fe=0,ye=B.length;fe<ye;fe+=2){const me=n.Util.transform(ie,[u,T,j,U,B[fe],B[fe+1]]),[ve,Z]=n.Util.applyTransform([0,0],me);Y.drawImage(le.canvas,ve,Z)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const u=this.ctx,T=this.current.fillColor,j=this.current.patternFill;for(const U of d){const{data:B,width:Y,height:ie,transform:le}=U,fe=this.cachedCanvases.getCanvas("maskCanvas",Y,ie),ye=fe.context;ye.save();const me=this.getObject(B,U);S(ye,me),ye.globalCompositeOperation="source-in",ye.fillStyle=j?T.getPattern(ye,this,(0,r.getCurrentTransformInverse)(u),A.PathType.FILL):T,ye.fillRect(0,0,Y,ie),ye.restore(),u.save(),u.transform(...le),u.scale(1,-1),x(u,fe.canvas,0,0,Y,ie,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const u=this.getObject(d);if(!u){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(d,u,T,j){if(!this.contentVisible)return;const U=this.getObject(d);if(!U){(0,n.warn)("Dependent image isn't ready yet");return}const B=U.width,Y=U.height,ie=[];for(let le=0,fe=j.length;le<fe;le+=2)ie.push({transform:[u,0,0,T,j[le],j[le+1]],x:0,y:0,w:B,h:Y});this.paintInlineImageXObjectGroup(U,ie)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:u,width:T,height:j}=d,U=this.cachedCanvases.getCanvas("inlineImage",T,j),B=U.context;return B.filter=this.current.transferMaps,B.drawImage(u,0,0),B.filter="none",U.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const u=d.width,T=d.height,j=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Y}=j;Y!=="none"&&Y!==""&&(j.filter="none")}j.scale(1/u,-1/T);let U;if(d.bitmap)U=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)U=d;else{const ie=this.cachedCanvases.getCanvas("inlineImage",u,T).context;F(ie,d),U=this.applyTransferMapsToCanvas(ie)}const B=this._scaleImage(U,(0,r.getCurrentTransformInverse)(j));j.imageSmoothingEnabled=R((0,r.getCurrentTransform)(j),d.interpolate),x(j,B.img,0,0,B.paintWidth,B.paintHeight,0,-T,u,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,u){if(!this.contentVisible)return;const T=this.ctx;let j;if(d.bitmap)j=d.bitmap;else{const U=d.width,B=d.height,ie=this.cachedCanvases.getCanvas("inlineImage",U,B).context;F(ie,d),j=this.applyTransferMapsToCanvas(ie)}for(const U of u)T.save(),T.transform(...U.transform),T.scale(1,-1),x(T,j,U.x,U.y,U.w,U.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,u){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,u){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const T=this.ctx;this.pendingClip&&(u||(this.pendingClip===q?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,r.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const u=Math.abs(d[0]*d[3]-d[2]*d[1]),T=Math.hypot(d[0],d[2]),j=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(T,j)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:d}=this.current,{a:u,b:T,c:j,d:U}=this.ctx.getTransform();let B,Y;if(T===0&&j===0){const ie=Math.abs(u),le=Math.abs(U);if(ie===le)if(d===0)B=Y=1/ie;else{const fe=ie*d;B=Y=fe<1?1/fe:1}else if(d===0)B=1/ie,Y=1/le;else{const fe=ie*d,ye=le*d;B=fe<1?1/fe:1,Y=ye<1?1/ye:1}}else{const ie=Math.abs(u*U-T*j),le=Math.hypot(u,T),fe=Math.hypot(j,U);if(d===0)B=fe/ie,Y=le/ie;else{const ye=d*ie;B=fe>ye?fe/ye:1,Y=le>ye?le/ye:1}}this._cachedScaleForStroking[0]=B,this._cachedScaleForStroking[1]=Y}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:u}=this,{lineWidth:T}=this.current,[j,U]=this.getScaleForStroking();if(u.lineWidth=T||1,j===1&&U===1){u.stroke();return}const B=u.getLineDash();if(d&&u.save(),u.scale(j,U),B.length>0){const Y=Math.max(j,U);u.setLineDash(B.map(ie=>ie/Y)),u.lineDashOffset/=Y}u.stroke(),d&&u.restore()}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};se=new WeakSet,Yt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kt=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const u=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=u}}};let V=re;e.CanvasGraphics=V;for(const N in n.OPS)V.prototype[N]!==void 0&&(V.prototype[n.OPS[N]]=V.prototype[N])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=y;var n=s(1),r=s(6);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=A;function P(p,E){if(!E)return;const F=E[2]-E[0],S=E[3]-E[1],c=new Path2D;c.rect(E[0],E[1],F,S),p.clip(c)}class O{constructor(){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class h extends O{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let F;this._type==="axial"?F=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)F.addColorStop(S[0],S[1]);return F}getPattern(E,F,S,c){let g;if(c===A.STROKE||c===A.FILL){const a=F.current.getClippedPathBoundingBox(c,(0,r.getCurrentTransform)(E))||[0,0,0,0],f=Math.ceil(a[2]-a[0])||1,m=Math.ceil(a[3]-a[1])||1,D=F.cachedCanvases.getCanvas("pattern",f,m,!0),l=D.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-a[0],-a[1]),S=n.Util.transform(S,[1,0,0,1,a[0],a[1]]),l.transform(...F.baseTransform),this.matrix&&l.transform(...this.matrix),P(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),g=E.createPattern(D.canvas,"no-repeat");const R=new DOMMatrix(S);g.setTransform(R)}else P(E,this._bbox),g=this._createGradient(E);return g}}function v(p,E,F,S,c,g,a,f){const m=E.coords,D=E.colors,l=p.data,R=p.width*4;let I;m[F+1]>m[S+1]&&(I=F,F=S,S=I,I=g,g=a,a=I),m[S+1]>m[c+1]&&(I=S,S=c,c=I,I=a,a=f,f=I),m[F+1]>m[S+1]&&(I=F,F=S,S=I,I=g,g=a,a=I);const Q=(m[F]+E.offsetX)*E.scaleX,G=(m[F+1]+E.offsetY)*E.scaleY,q=(m[S]+E.offsetX)*E.scaleX,V=(m[S+1]+E.offsetY)*E.scaleY,se=(m[c]+E.offsetX)*E.scaleX,L=(m[c+1]+E.offsetY)*E.scaleY;if(G>=L)return;const X=D[g],re=D[g+1],N=D[g+2],d=D[a],u=D[a+1],T=D[a+2],j=D[f],U=D[f+1],B=D[f+2],Y=Math.round(G),ie=Math.round(L);let le,fe,ye,me,ve,Z,ee,M;for(let z=Y;z<=ie;z++){if(z<V){const _e=z<G?0:(G-z)/(G-V);le=Q-(Q-q)*_e,fe=X-(X-d)*_e,ye=re-(re-u)*_e,me=N-(N-T)*_e}else{let _e;z>L?_e=1:V===L?_e=0:_e=(V-z)/(V-L),le=q-(q-se)*_e,fe=d-(d-j)*_e,ye=u-(u-U)*_e,me=T-(T-B)*_e}let J;z<G?J=0:z>L?J=1:J=(G-z)/(G-L),ve=Q-(Q-se)*J,Z=X-(X-j)*J,ee=re-(re-U)*J,M=N-(N-B)*J;const ae=Math.round(Math.min(le,ve)),ge=Math.round(Math.max(le,ve));let Ae=R*z+ae*4;for(let _e=ae;_e<=ge;_e++)J=(le-_e)/(le-ve),J<0?J=0:J>1&&(J=1),l[Ae++]=fe-(fe-Z)*J|0,l[Ae++]=ye-(ye-ee)*J|0,l[Ae++]=me-(me-M)*J|0,l[Ae++]=255}}function o(p,E,F){const S=E.coords,c=E.colors;let g,a;switch(E.type){case"lattice":const f=E.verticesPerRow,m=Math.floor(S.length/f)-1,D=f-1;for(g=0;g<m;g++){let l=g*f;for(let R=0;R<D;R++,l++)v(p,F,S[l],S[l+1],S[l+f],c[l],c[l+1],c[l+f]),v(p,F,S[l+f+1],S[l+1],S[l+f],c[l+f+1],c[l+1],c[l+f])}break;case"triangles":for(g=0,a=S.length;g<a;g+=3)v(p,F,S[g],S[g+1],S[g+2],c[g],c[g+1],c[g+2]);break;default:throw new Error("illegal figure")}}class w extends O{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,F,S){const f=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-f,l=Math.ceil(this._bounds[3])-m,R=Math.min(Math.ceil(Math.abs(D*E[0]*1.1)),3e3),I=Math.min(Math.ceil(Math.abs(l*E[1]*1.1)),3e3),Q=D/R,G=l/I,q={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-m,scaleX:1/Q,scaleY:1/G},V=R+2*2,se=I+2*2,L=S.getCanvas("mesh",V,se,!1),X=L.context,re=X.createImageData(R,I);if(F){const d=re.data;for(let u=0,T=d.length;u<T;u+=4)d[u]=F[0],d[u+1]=F[1],d[u+2]=F[2],d[u+3]=255}for(const d of this._figures)o(re,d,q);return X.putImageData(re,2,2),{canvas:L.canvas,offsetX:f-2*Q,offsetY:m-2*G,scaleX:Q,scaleY:G}}getPattern(E,F,S,c){P(E,this._bbox);let g;if(c===A.SHADING)g=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(E));else if(g=n.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const f=n.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*f[0],g[1]*f[1]]}const a=this._createMeshCanvas(g,c===A.SHADING?null:this._background,F.cachedCanvases);return c!==A.SHADING&&(E.setTransform(...F.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(a.offsetX,a.offsetY),E.scale(a.scaleX,a.scaleY),E.createPattern(a.canvas,"no-repeat")}}class k extends O{getPattern(){return"hotpink"}}function y(p){switch(p[0]){case"RadialAxial":return new h(p);case"Mesh":return new w(p);case"Dummy":return new k}throw new Error(`Unknown IR type: ${p[0]}`)}const b={COLORED:1,UNCOLORED:2},x=class x{constructor(E,F,S,c,g){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=F,this.ctx=S,this.canvasGraphicsFactory=c,this.baseTransform=g}createPatternCanvas(E){const F=this.operatorList,S=this.bbox,c=this.xstep,g=this.ystep,a=this.paintType,f=this.tilingType,m=this.color,D=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+f);const l=S[0],R=S[1],I=S[2],Q=S[3],G=n.Util.singularValueDecompose2dScale(this.matrix),q=n.Util.singularValueDecompose2dScale(this.baseTransform),V=[G[0]*q[0],G[1]*q[1]],se=this.getSizeAndScale(c,this.ctx.canvas.width,V[0]),L=this.getSizeAndScale(g,this.ctx.canvas.height,V[1]),X=E.cachedCanvases.getCanvas("pattern",se.size,L.size,!0),re=X.context,N=D.createCanvasGraphics(re);N.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(N,a,m);let d=l,u=R,T=I,j=Q;return l<0&&(d=0,T+=Math.abs(l)),R<0&&(u=0,j+=Math.abs(R)),re.translate(-(se.scale*d),-(L.scale*u)),N.transform(se.scale,0,0,L.scale,0,0),re.save(),this.clipBbox(N,d,u,T,j),N.baseTransform=(0,r.getCurrentTransform)(N.ctx),N.executeOperatorList(F),N.endDrawing(),{canvas:X.canvas,scaleX:se.scale,scaleY:L.scale,offsetX:d,offsetY:u}}getSizeAndScale(E,F,S){E=Math.abs(E);const c=Math.max(x.MAX_PATTERN_SIZE,F);let g=Math.ceil(E*S);return g>=c?g=c:S=g/E,{scale:S,size:g}}clipBbox(E,F,S,c,g){const a=c-F,f=g-S;E.ctx.rect(F,S,a,f),E.current.updateRectMinMax((0,r.getCurrentTransform)(E.ctx),[F,S,c,g]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,F,S){const c=E.ctx,g=E.current;switch(F){case b.COLORED:const a=this.ctx;c.fillStyle=a.fillStyle,c.strokeStyle=a.strokeStyle,g.fillColor=a.fillStyle,g.strokeColor=a.strokeStyle;break;case b.UNCOLORED:const f=n.Util.makeHexColor(S[0],S[1],S[2]);c.fillStyle=f,c.strokeStyle=f,g.fillColor=f,g.strokeColor=f;break;default:throw new n.FormatError(`Unsupported paint type: ${F}`)}}getPattern(E,F,S,c){let g=S;c!==A.SHADING&&(g=n.Util.transform(g,F.baseTransform),this.matrix&&(g=n.Util.transform(g,this.matrix)));const a=this.createPatternCanvas(F);let f=new DOMMatrix(g);f=f.translate(a.offsetX,a.offsetY),f=f.scale(1/a.scaleX,1/a.scaleY);const m=E.createPattern(a.canvas,"repeat");return m.setTransform(f),m}};Qe(x,"MAX_PATTERN_SIZE",3e3);let C=x;e.TilingPattern=C},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=A,e.convertToRGBA=r,e.grayToRGBA=O;var n=s(1);function r(h){switch(h.kind){case n.ImageKind.GRAYSCALE_1BPP:return A(h);case n.ImageKind.RGB_24BPP:return P(h)}return null}function A({src:h,srcPos:v=0,dest:o,width:w,height:k,nonBlackColor:y=4294967295,inverseDecode:b=!1}){const C=n.FeatureTest.isLittleEndian?4278190080:255,[x,p]=b?[y,C]:[C,y],E=w>>3,F=w&7,S=h.length;o=new Uint32Array(o.buffer);let c=0;for(let g=0;g<k;g++){for(const f=v+E;v<f;v++){const m=v<S?h[v]:255;o[c++]=m&128?p:x,o[c++]=m&64?p:x,o[c++]=m&32?p:x,o[c++]=m&16?p:x,o[c++]=m&8?p:x,o[c++]=m&4?p:x,o[c++]=m&2?p:x,o[c++]=m&1?p:x}if(F===0)continue;const a=v<S?h[v++]:255;for(let f=0;f<F;f++)o[c++]=a&1<<7-f?p:x}return{srcPos:v,destPos:c}}function P({src:h,srcPos:v=0,dest:o,destPos:w=0,width:k,height:y}){let b=0;const C=h.length>>2,x=new Uint32Array(h.buffer,v,C);if(n.FeatureTest.isLittleEndian){for(;b<C-2;b+=3,w+=4){const p=x[b],E=x[b+1],F=x[b+2];o[w]=p|4278190080,o[w+1]=p>>>24|E<<8|4278190080,o[w+2]=E>>>16|F<<16|4278190080,o[w+3]=F>>>8|4278190080}for(let p=b*4,E=h.length;p<E;p+=3)o[w++]=h[p]|h[p+1]<<8|h[p+2]<<16|4278190080}else{for(;b<C-2;b+=3,w+=4){const p=x[b],E=x[b+1],F=x[b+2];o[w]=p|255,o[w+1]=p<<24|E>>>8|255,o[w+2]=E<<16|F>>>16|255,o[w+3]=F<<8|255}for(let p=b*4,E=h.length;p<E;p+=3)o[w++]=h[p]<<24|h[p+1]<<16|h[p+2]<<8|255}return{srcPos:v,destPos:w}}function O(h,v){if(n.FeatureTest.isLittleEndian)for(let o=0,w=h.length;o<w;o++)v[o]=h[o]*65793|4278190080;else for(let o=0,w=h.length;o<w;o++)v[o]=h[o]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var h,wn,Tn,Ct;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const r={DATA:1,ERROR:2},A={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function P(k){switch(k instanceof Error||typeof k=="object"&&k!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k.name){case"AbortException":return new n.AbortException(k.message);case"MissingPDFException":return new n.MissingPDFException(k.message);case"PasswordException":return new n.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new n.UnknownErrorException(k.message,k.details);default:return new n.UnknownErrorException(k.message,k.toString())}}class O{constructor(y,b,C){ce(this,h);this.sourceName=y,this.targetName=b,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const p=x.data;if(p.targetName!==this.sourceName)return;if(p.stream){ne(this,h,Tn).call(this,p);return}if(p.callback){const F=p.callbackId,S=this.callbackCapabilities[F];if(!S)throw new Error(`Cannot resolve callback ${F}`);if(delete this.callbackCapabilities[F],p.callback===r.DATA)S.resolve(p.data);else if(p.callback===r.ERROR)S.reject(P(p.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[p.action];if(!E)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){const F=this.sourceName,S=p.sourceName;new Promise(function(c){c(E(p.data))}).then(function(c){C.postMessage({sourceName:F,targetName:S,callback:r.DATA,callbackId:p.callbackId,data:c})},function(c){C.postMessage({sourceName:F,targetName:S,callback:r.ERROR,callbackId:p.callbackId,reason:P(c)})});return}if(p.streamId){ne(this,h,wn).call(this,p);return}E(p.data)},C.addEventListener("message",this._onComObjOnMessage)}on(y,b){const C=this.actionHandler;if(C[y])throw new Error(`There is already an actionName called "${y}"`);C[y]=b}send(y,b,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:b},C)}sendWithPromise(y,b,C){const x=this.callbackId++,p=new n.PromiseCapability;this.callbackCapabilities[x]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:x,data:b},C)}catch(E){p.reject(E)}return p.promise}sendWithStream(y,b,C,x){const p=this.streamId++,E=this.sourceName,F=this.targetName,S=this.comObj;return new ReadableStream({start:c=>{const g=new n.PromiseCapability;return this.streamControllers[p]={controller:c,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},S.postMessage({sourceName:E,targetName:F,action:y,streamId:p,data:b,desiredSize:c.desiredSize},x),g.promise},pull:c=>{const g=new n.PromiseCapability;return this.streamControllers[p].pullCall=g,S.postMessage({sourceName:E,targetName:F,stream:A.PULL,streamId:p,desiredSize:c.desiredSize}),g.promise},cancel:c=>{(0,n.assert)(c instanceof Error,"cancel must have a valid reason");const g=new n.PromiseCapability;return this.streamControllers[p].cancelCall=g,this.streamControllers[p].isClosed=!0,S.postMessage({sourceName:E,targetName:F,stream:A.CANCEL,streamId:p,reason:P(c)}),g.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,wn=function(y){const b=y.streamId,C=this.sourceName,x=y.sourceName,p=this.comObj,E=this,F=this.actionHandler[y.action],S={enqueue(c,g=1,a){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=g,f>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:C,targetName:x,stream:A.ENQUEUE,streamId:b,chunk:c},a)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:C,targetName:x,stream:A.CLOSE,streamId:b}),delete E.streamSinks[b])},error(c){(0,n.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:C,targetName:x,stream:A.ERROR,streamId:b,reason:P(c)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};S.sinkCapability.resolve(),S.ready=S.sinkCapability.promise,this.streamSinks[b]=S,new Promise(function(c){c(F(y.data,S))}).then(function(){p.postMessage({sourceName:C,targetName:x,stream:A.START_COMPLETE,streamId:b,success:!0})},function(c){p.postMessage({sourceName:C,targetName:x,stream:A.START_COMPLETE,streamId:b,reason:P(c)})})},Tn=function(y){const b=y.streamId,C=this.sourceName,x=y.sourceName,p=this.comObj,E=this.streamControllers[b],F=this.streamSinks[b];switch(y.stream){case A.START_COMPLETE:y.success?E.startCall.resolve():E.startCall.reject(P(y.reason));break;case A.PULL_COMPLETE:y.success?E.pullCall.resolve():E.pullCall.reject(P(y.reason));break;case A.PULL:if(!F){p.postMessage({sourceName:C,targetName:x,stream:A.PULL_COMPLETE,streamId:b,success:!0});break}F.desiredSize<=0&&y.desiredSize>0&&F.sinkCapability.resolve(),F.desiredSize=y.desiredSize,new Promise(function(S){var c;S((c=F.onPull)==null?void 0:c.call(F))}).then(function(){p.postMessage({sourceName:C,targetName:x,stream:A.PULL_COMPLETE,streamId:b,success:!0})},function(S){p.postMessage({sourceName:C,targetName:x,stream:A.PULL_COMPLETE,streamId:b,reason:P(S)})});break;case A.ENQUEUE:if((0,n.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(y.chunk);break;case A.CLOSE:if((0,n.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),ne(this,h,Ct).call(this,E,b);break;case A.ERROR:(0,n.assert)(E,"error should have stream controller"),E.controller.error(P(y.reason)),ne(this,h,Ct).call(this,E,b);break;case A.CANCEL_COMPLETE:y.success?E.cancelCall.resolve():E.cancelCall.reject(P(y.reason)),ne(this,h,Ct).call(this,E,b);break;case A.CANCEL:if(!F)break;new Promise(function(S){var c;S((c=F.onCancel)==null?void 0:c.call(F,P(y.reason)))}).then(function(){p.postMessage({sourceName:C,targetName:x,stream:A.CANCEL_COMPLETE,streamId:b,success:!0})},function(S){p.postMessage({sourceName:C,targetName:x,stream:A.CANCEL_COMPLETE,streamId:b,reason:P(S)})}),F.sinkCapability.reject(P(y.reason)),F.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},Ct=async function(y,b){var C,x,p;await Promise.allSettled([(C=y.startCall)==null?void 0:C.promise,(x=y.pullCall)==null?void 0:x.promise,(p=y.cancelCall)==null?void 0:p.promise]),delete this.streamControllers[b]},e.MessageHandler=O},(t,e,s)=>{var A,P;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class r{constructor({parsedData:h,rawData:v}){ce(this,A);ce(this,P);ue(this,A,h),ue(this,P,v)}getRaw(){return i(this,P)}get(h){return i(this,A).get(h)??null}getAll(){return(0,n.objectFromMap)(i(this,A))}has(h){return i(this,A).has(h)}}A=new WeakMap,P=new WeakMap,e.Metadata=r},(t,e,s)=>{var h,v,o,w,k,y,Jt;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),r=s(8);const A=Symbol("INTERNAL");class P{constructor(x,p){ce(this,h,!0);this.name=x,this.intent=p}get visible(){return i(this,h)}_setVisible(x,p){x!==A&&(0,n.unreachable)("Internal method `_setVisible` called."),ue(this,h,p)}}h=new WeakMap;class O{constructor(x){ce(this,y);ce(this,v,null);ce(this,o,new Map);ce(this,w,null);ce(this,k,null);if(this.name=null,this.creator=null,x!==null){this.name=x.name,this.creator=x.creator,ue(this,k,x.order);for(const p of x.groups)i(this,o).set(p.id,new P(p.name,p.intent));if(x.baseState==="OFF")for(const p of i(this,o).values())p._setVisible(A,!1);for(const p of x.on)i(this,o).get(p)._setVisible(A,!0);for(const p of x.off)i(this,o).get(p)._setVisible(A,!1);ue(this,w,this.getHash())}}isVisible(x){if(i(this,o).size===0)return!0;if(!x)return(0,n.warn)("Optional content group not defined."),!0;if(x.type==="OCG")return i(this,o).has(x.id)?i(this,o).get(x.id).visible:((0,n.warn)(`Optional content group not found: ${x.id}`),!0);if(x.type==="OCMD"){if(x.expression)return ne(this,y,Jt).call(this,x.expression);if(!x.policy||x.policy==="AnyOn"){for(const p of x.ids){if(!i(this,o).has(p))return(0,n.warn)(`Optional content group not found: ${p}`),!0;if(i(this,o).get(p).visible)return!0}return!1}else if(x.policy==="AllOn"){for(const p of x.ids){if(!i(this,o).has(p))return(0,n.warn)(`Optional content group not found: ${p}`),!0;if(!i(this,o).get(p).visible)return!1}return!0}else if(x.policy==="AnyOff"){for(const p of x.ids){if(!i(this,o).has(p))return(0,n.warn)(`Optional content group not found: ${p}`),!0;if(!i(this,o).get(p).visible)return!0}return!1}else if(x.policy==="AllOff"){for(const p of x.ids){if(!i(this,o).has(p))return(0,n.warn)(`Optional content group not found: ${p}`),!0;if(i(this,o).get(p).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${x.policy}.`),!0}return(0,n.warn)(`Unknown group type ${x.type}.`),!0}setVisibility(x,p=!0){if(!i(this,o).has(x)){(0,n.warn)(`Optional content group not found: ${x}`);return}i(this,o).get(x)._setVisible(A,!!p),ue(this,v,null)}get hasInitialVisibility(){return i(this,w)===null||this.getHash()===i(this,w)}getOrder(){return i(this,o).size?i(this,k)?i(this,k).slice():[...i(this,o).keys()]:null}getGroups(){return i(this,o).size>0?(0,n.objectFromMap)(i(this,o)):null}getGroup(x){return i(this,o).get(x)||null}getHash(){if(i(this,v)!==null)return i(this,v);const x=new r.MurmurHash3_64;for(const[p,E]of i(this,o))x.update(`${p}:${E.visible}`);return ue(this,v,x.hexdigest())}}v=new WeakMap,o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakSet,Jt=function(x){const p=x.length;if(p<2)return!0;const E=x[0];for(let F=1;F<p;F++){const S=x[F];let c;if(Array.isArray(S))c=ne(this,y,Jt).call(this,S);else if(i(this,o).has(S))c=i(this,o).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(E){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return E==="And"},e.OptionalContentConfig=O},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),r=s(6);class A{constructor({length:v,initialData:o,progressiveDone:w=!1,contentDispositionFilename:k=null,disableRange:y=!1,disableStream:b=!1},C){if((0,n.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=k,(o==null?void 0:o.length)>0){const x=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(x)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!b,this._isRangeSupported=!y,this._contentLength=v,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((x,p)=>{this._onReceiveData({begin:x,chunk:p})}),this._pdfDataRangeTransport.addProgressListener((x,p)=>{this._onProgress({loaded:x,total:p})}),this._pdfDataRangeTransport.addProgressiveReadListener(x=>{this._onReceiveData({chunk:x})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:v,chunk:o}){const w=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;if(v===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const k=this._rangeReaders.some(function(y){return y._begin!==v?!1:(y._enqueue(w),!0)});(0,n.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){var o,w,k,y;v.total===void 0?(w=(o=this._rangeReaders[0])==null?void 0:o.onProgress)==null||w.call(o,{loaded:v.loaded}):(y=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||y.call(k,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;(v=this._fullRequestReader)==null||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const o=this._rangeReaders.indexOf(v);o>=0&&this._rangeReaders.splice(o,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new P(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,o){if(o<=this._progressiveDataLength)return null;const w=new O(this,v,o);return this._pdfDataRangeTransport.requestDataRange(v,o),this._rangeReaders.push(w),w}cancelAllRequests(v){var o;(o=this._fullRequestReader)==null||o.cancel(v);for(const w of this._rangeReaders.slice(0))w.cancel(v);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=A;class P{constructor(v,o,w=!1,k=null){this._stream=v,this._done=w||!1,this._filename=(0,r.isPdfFile)(k)?k:null,this._queuedChunks=o||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O{constructor(v,o,w){this._stream=v,this._begin=o,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),r=s(20);function A(w,k,y){return{method:"GET",headers:w,signal:y.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function P(w){const k=new Headers;for(const y in w){const b=w[y];b!==void 0&&k.append(y,b)}return k}function O(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class h{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v(this),this._fullRequestReader}getRangeReader(k,y){if(y<=this._progressiveDataLength)return null;const b=new o(this,k,y);return this._rangeRequestReaders.push(b),b}cancelAllRequests(k){var y;(y=this._fullRequestReader)==null||y.cancel(k);for(const b of this._rangeRequestReaders.slice(0))b.cancel(k)}}e.PDFFetchStream=h;class v{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const y=k.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new n.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=P(this._stream.httpHeaders);const b=y.url;fetch(b,A(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,r.validateResponseStatus)(C.status))throw(0,r.createResponseStatusError)(C.status,b);this._reader=C.body.getReader(),this._headersCapability.resolve();const x=F=>C.headers.get(F),{allowRangeRequests:p,suggestedLength:E}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=E||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._headersCapability.promise;const{value:k,done:y}=await this._reader.read();return y?{value:k,done:y}:(this._loaded+=k.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:O(k),done:!1})}cancel(k){var y;(y=this._reader)==null||y.cancel(k),this._abortController.abort()}}class o{constructor(k,y,b){this._stream=k,this._reader=null,this._loaded=0;const C=k.source;this._withCredentials=C.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=P(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${b-1}`);const x=C.url;fetch(x,A(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,r.validateResponseStatus)(p.status))throw(0,r.createResponseStatusError)(p.status,x);this._readCapability.resolve(),this._reader=p.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._readCapability.promise;const{value:k,done:y}=await this._reader.read();return y?{value:k,done:y}:(this._loaded+=k.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:O(k),done:!1})}cancel(k){var y;(y=this._reader)==null||y.cancel(k),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=O,e.validateRangeRequestCapabilities=P,e.validateResponseStatus=v;var n=s(1),r=s(21),A=s(6);function P({getResponseHeader:o,isHttp:w,rangeChunkSize:k,disableRange:y}){const b={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(o("Content-Length"),10);return!Number.isInteger(C)||(b.suggestedLength=C,C<=2*k)||y||!w||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function O(o){const w=o("Content-Disposition");if(w){let k=(0,r.getFilenameFromContentDispositionHeader)(w);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,A.isPdfFile)(k))return k}return null}function h(o,w){return o===404||o===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${w}".`,o)}function v(o){return o===200||o===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=r;var n=s(1);function r(A){let P=!0,O=h("filename\\*","i").exec(A);if(O){O=O[1];let C=k(O);return C=unescape(C),C=y(C),C=b(C),o(C)}if(O=w(A),O){const C=b(O);return o(C)}if(O=h("filename","i").exec(A),O){O=O[1];let C=k(O);return C=b(C),o(C)}function h(C,x){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function v(C,x){if(C){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const p=new TextDecoder(C,{fatal:!0}),E=(0,n.stringToBytes)(x);x=p.decode(E),P=!1}catch{}}return x}function o(C){return P&&/[\x80-\xff]/.test(C)&&(C=v("utf-8",C),P&&(C=v("iso-8859-1",C))),C}function w(C){const x=[];let p;const E=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=E.exec(C))!==null;){let[,S,c,g]=p;if(S=parseInt(S,10),S in x){if(S===0)break;continue}x[S]=[c,g]}const F=[];for(let S=0;S<x.length&&S in x;++S){let[c,g]=x[S];g=k(g),c&&(g=unescape(g),S===0&&(g=y(g))),F.push(g)}return F.join("")}function k(C){if(C.startsWith('"')){const x=C.slice(1).split('\\"');for(let p=0;p<x.length;++p){const E=x[p].indexOf('"');E!==-1&&(x[p]=x[p].slice(0,E),x.length=p+1),x[p]=x[p].replaceAll(/\\(.)/g,"$1")}C=x.join('"')}return C}function y(C){const x=C.indexOf("'");if(x===-1)return C;const p=C.slice(0,x),F=C.slice(x+1).replace(/^[^']*'/,"");return v(p,F)}function b(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,p,E,F){if(E==="q"||E==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,c){return String.fromCharCode(parseInt(c,16))}),v(p,F);try{F=atob(F)}catch{}return v(p,F)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),r=s(20);const A=200,P=206;function O(k){const y=k.response;return typeof y!="string"?y:(0,n.stringToBytes)(y).buffer}class h{constructor(y,b={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,b,C){const x={begin:y,end:b};for(const p in C)x[p]=C[p];return this.request(x)}requestFull(y){return this.request(y)}request(y){const b=new XMLHttpRequest,C=this.currXhrId++,x=this.pendingRequests[C]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const p in this.httpHeaders){const E=this.httpHeaders[p];E!==void 0&&b.setRequestHeader(p,E)}return this.isHttp&&"begin"in y&&"end"in y?(b.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),x.expectedStatus=P):x.expectedStatus=A,b.responseType="arraybuffer",y.onError&&(b.onerror=function(p){y.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,C),b.onprogress=this.onProgress.bind(this,C),x.onHeadersReceived=y.onHeadersReceived,x.onDone=y.onDone,x.onError=y.onError,x.onProgress=y.onProgress,b.send(null),C}onProgress(y,b){var x;const C=this.pendingRequests[y];C&&((x=C.onProgress)==null||x.call(C,b))}onStateChange(y,b){var S,c,g;const C=this.pendingRequests[y];if(!C)return;const x=C.xhr;if(x.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),x.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],x.status===0&&this.isHttp){(S=C.onError)==null||S.call(C,x.status);return}const p=x.status||A;if(!(p===A&&C.expectedStatus===P)&&p!==C.expectedStatus){(c=C.onError)==null||c.call(C,x.status);return}const F=O(x);if(p===P){const a=x.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);C.onDone({begin:parseInt(f[1],10),chunk:F})}else F?C.onDone({begin:0,chunk:F}):(g=C.onError)==null||g.call(C,x.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const b=this.pendingRequests[y].xhr;delete this.pendingRequests[y],b.abort()}}class v{constructor(y){this._source=y,this._manager=new h(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const b=this._rangeRequestReaders.indexOf(y);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(y,b){const C=new w(this._manager,y,b);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(y){var b;(b=this._fullRequestReader)==null||b.cancel(y);for(const C of this._rangeRequestReaders.slice(0))C.cancel(y)}}e.PDFNetworkStream=v;class o{constructor(y,b){this._manager=y;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=y.requestFull(C),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,b=this._manager.getRequestXhr(y),C=E=>b.getResponseHeader(E),{allowRangeRequests:x,suggestedLength:p}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=p||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,r.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var b;(b=this.onProgress)==null||b.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(y,b,C){this._manager=y;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(b,C,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const b=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,r.createResponseStatusError)(y,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var b;this.isStreamingSupported||(b=this.onProgress)==null||b.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),r=s(20);const A=/^file:\/\/\/[a-zA-Z]:\//;function P(C){const x=require$$5,p=x.parse(C);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(C)?x.parse(`file:///${C}`):(p.host||(p.protocol="file:"),p)}class O{constructor(x){this.source=x,this.url=P(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new w(this),this._fullRequestReader}getRangeReader(x,p){if(p<=this._progressiveDataLength)return null;const E=this.isFsUrl?new b(this,x,p):new k(this,x,p);return this._rangeRequestReaders.push(E),E}cancelAllRequests(x){var p;(p=this._fullRequestReader)==null||p.cancel(x);for(const E of this._rangeRequestReaders.slice(0))E.cancel(x)}}e.PDFNodeStream=O;class h{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const p=x.source;this._contentLength=p.length,this._loaded=0,this._filename=null,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=x.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",p=>{this._error(p)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const p=x.source;this._isStreamingSupported=!p.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=x.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",p=>{this._error(p)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(C,x){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:x}}class w extends h{constructor(x){super(x);const p=E=>{if(E.statusCode===404){const g=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g,this._headersCapability.reject(g);return}this._headersCapability.resolve(),this._setReadableStream(E);const F=g=>this._readableStream.headers[g.toLowerCase()],{allowRangeRequests:S,suggestedLength:c}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=c||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(F)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(o(this._url,x.httpHeaders),p)}else{const E=require$$5;this._request=E.request(o(this._url,x.httpHeaders),p)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class k extends v{constructor(x,p,E){super(x),this._httpHeaders={};for(const S in x.httpHeaders){const c=x.httpHeaders[S];c!==void 0&&(this._httpHeaders[S]=c)}this._httpHeaders.Range=`bytes=${p}-${E-1}`;const F=S=>{if(S.statusCode===404){const c=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(o(this._url,this._httpHeaders),F)}else{const S=require$$5;this._request=S.request(o(this._url,this._httpHeaders),F)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class y extends h{constructor(x){super(x);let p=decodeURIComponent(this._url.path);A.test(this._url.href)&&(p=p.replace(/^\//,""));const E=require$$5;E.lstat(p,(F,S)=>{if(F){F.code==="ENOENT"&&(F=new n.MissingPDFException(`Missing PDF "${p}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=S.size,this._setReadableStream(E.createReadStream(p)),this._headersCapability.resolve()})}}class b extends v{constructor(x,p,E){super(x);let F=decodeURIComponent(this._url.path);A.test(this._url.href)&&(F=F.replace(/^\//,""));const S=require$$5;this._setReadableStream(S.createReadStream(F,{start:p,end:E-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),r=s(1);const A={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},P="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/1999/xlink",h=["butt","round","square"],v=["miter","round","bevel"],o=function(S,c="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([S],{type:c}));const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f=`data:${c};base64,`;for(let m=0,D=S.length;m<D;m+=3){const l=S[m]&255,R=S[m+1]&255,I=S[m+2]&255,Q=l>>2,G=(l&3)<<4|R>>4,q=m+1<D?(R&15)<<2|I>>6:64,V=m+2<D?I&63:64;f+=a[Q]+a[G]+a[q]+a[V]}return f},w=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,g=new Int32Array(256);for(let I=0;I<256;I++){let Q=I;for(let G=0;G<8;G++)Q=Q&1?3988292384^Q>>1&2147483647:Q>>1&2147483647;g[I]=Q}function a(I,Q,G){let q=-1;for(let V=Q;V<G;V++){const se=(q^I[V])&255,L=g[se];q=q>>>8^L}return q^-1}function f(I,Q,G,q){let V=q;const se=Q.length;G[V]=se>>24&255,G[V+1]=se>>16&255,G[V+2]=se>>8&255,G[V+3]=se&255,V+=4,G[V]=I.charCodeAt(0)&255,G[V+1]=I.charCodeAt(1)&255,G[V+2]=I.charCodeAt(2)&255,G[V+3]=I.charCodeAt(3)&255,V+=4,G.set(Q,V),V+=Q.length;const L=a(G,q+4,V);G[V]=L>>24&255,G[V+1]=L>>16&255,G[V+2]=L>>8&255,G[V+3]=L&255}function m(I,Q,G){let q=1,V=0;for(let se=Q;se<G;++se)q=(q+(I[se]&255))%65521,V=(V+q)%65521;return V<<16|q}function D(I){if(!r.isNodeJS)return l(I);try{const Q=parseInt(process.versions.node)>=8?I:Buffer.from(I),G=require$$5.deflateSync(Q,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(Q){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return l(I)}function l(I){let Q=I.length;const G=65535,q=Math.ceil(Q/G),V=new Uint8Array(2+Q+q*5+4);let se=0;V[se++]=120,V[se++]=156;let L=0;for(;Q>G;)V[se++]=0,V[se++]=255,V[se++]=255,V[se++]=0,V[se++]=0,V.set(I.subarray(L,L+G),se),se+=G,L+=G,Q-=G;V[se++]=1,V[se++]=Q&255,V[se++]=Q>>8&255,V[se++]=~Q&65535&255,V[se++]=(~Q&65535)>>8&255,V.set(I.subarray(L),se),se+=I.length-L;const X=m(I,0,I.length);return V[se++]=X>>24&255,V[se++]=X>>16&255,V[se++]=X>>8&255,V[se++]=X&255,V}function R(I,Q,G,q){const V=I.width,se=I.height;let L,X,re;const N=I.data;switch(Q){case r.ImageKind.GRAYSCALE_1BPP:X=0,L=1,re=V+7>>3;break;case r.ImageKind.RGB_24BPP:X=2,L=8,re=V*3;break;case r.ImageKind.RGBA_32BPP:X=6,L=8,re=V*4;break;default:throw new Error("invalid format")}const d=new Uint8Array((1+re)*se);let u=0,T=0;for(let le=0;le<se;++le)d[u++]=0,d.set(N.subarray(T,T+re),u),T+=re,u+=re;if(Q===r.ImageKind.GRAYSCALE_1BPP&&q){u=0;for(let le=0;le<se;le++){u++;for(let fe=0;fe<re;fe++)d[u++]^=255}}const j=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,V&255,se>>24&255,se>>16&255,se>>8&255,se&255,L,X,0,0,0]),U=D(d),B=S.length+c*3+j.length+U.length,Y=new Uint8Array(B);let ie=0;return Y.set(S,ie),ie+=S.length,f("IHDR",j,Y,ie),ie+=c+j.length,f("IDATA",U,Y,ie),ie+=c+U.length,f("IEND",new Uint8Array(0),Y,ie),o(Y,"image/png",G)}return function(Q,G,q){const V=Q.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:Q.kind;return R(Q,V,G,q)}}();class k{constructor(){this.fontSizeScale=1,this.fontWeight=A.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=A.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,g){this.x=c,this.y=g}}function y(S){let c=[];const g=[];for(const a of S){if(a.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),g.push(c),c=c.at(-1).items;continue}a.fn==="restore"?c=g.pop():c.push(a)}return c}function b(S){if(Number.isInteger(S))return S.toString();const c=S.toFixed(10);let g=c.length-1;if(c[g]!=="0")return c;do g--;while(c[g]==="0");return c.substring(0,c[g]==="."?g:g+1)}function C(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${b(S[0])} ${b(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const c=Math.acos(S[0])*180/Math.PI;return`rotate(${b(c)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${b(S[4])} ${b(S[5])})`;return`matrix(${b(S[0])} ${b(S[1])} ${b(S[2])} ${b(S[3])} ${b(S[4])} ${b(S[5])})`}let x=0,p=0,E=0;class F{constructor(c,g,a=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new k,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const f in r.OPS)this._operatorIdMapping[r.OPS[f]]=f}getObject(c,g=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):g}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const g=c.fnArray,a=c.argsArray;for(let f=0,m=g.length;f<m;f++)if(g[f]===r.OPS.dependency)for(const D of a[f]){const l=D.startsWith("g_")?this.commonObjs:this.objs,R=new Promise(I=>{l.get(D,I)});this.current.dependencies.push(R)}return Promise.all(this.current.dependencies)}transform(c,g,a,f,m,D){const l=[c,g,a,f,m,D];this.transformMatrix=r.Util.transform(this.transformMatrix,l),this.tgrp=null}getSVG(c,g){this.viewport=g;const a=this._initialize(g);return this.loadDependencies(c).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),a))}convertOpList(c){const g=this._operatorIdMapping,a=c.argsArray,f=c.fnArray,m=[];for(let D=0,l=f.length;D<l;D++){const R=f[D];m.push({fnId:R,fn:g[R],args:a[D]})}return y(m)}executeOpTree(c){for(const g of c){const a=g.fn,f=g.fnId,m=g.args;switch(f|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(m);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(m[0],m[1]);break;case r.OPS.setFont:this.setFont(m);break;case r.OPS.showText:this.showText(m[0]);break;case r.OPS.showSpacedText:this.showText(m[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(m[0],m[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(m[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(m[0]);break;case r.OPS.setHScale:this.setHScale(m[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case r.OPS.setTextRise:this.setTextRise(m[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(m[0]);break;case r.OPS.setLineWidth:this.setLineWidth(m[0]);break;case r.OPS.setLineJoin:this.setLineJoin(m[0]);break;case r.OPS.setLineCap:this.setLineCap(m[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(m[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(m[0],m[1],m[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(m[0],m[1],m[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(m);break;case r.OPS.setFillColorN:this.setFillColorN(m);break;case r.OPS.shadingFill:this.shadingFill(m[0]);break;case r.OPS.setDash:this.setDash(m[0],m[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(m[0]);break;case r.OPS.setFlatness:this.setFlatness(m[0]);break;case r.OPS.setGState:this.setGState(m[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(m[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(m[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(m[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(m[0],m[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(m[0],m[1],m[2],m[3],m[4],m[5]);break;case r.OPS.constructPath:this.constructPath(m[0],m[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,r.warn)(`Unimplemented operator ${a}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,g,a,f,m,D){const l=this.current;l.textMatrix=l.lineMatrix=[c,g,a,f,m,D],l.textMatrixScale=Math.hypot(c,g),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${b(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",b(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=r.IDENTITY_MATRIX,c.lineMatrix=r.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,g){const a=this.current;a.x=a.lineX+=c,a.y=a.lineY+=g,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${b(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",b(-a.y))}showText(c){const g=this.current,a=g.font,f=g.fontSize;if(f===0)return;const m=g.fontSizeScale,D=g.charSpacing,l=g.wordSpacing,R=g.fontDirection,I=g.textHScale*R,Q=a.vertical,G=Q?1:-1,q=a.defaultVMetrics,V=f*g.fontMatrix[0];let se=0;for(const re of c){if(re===null){se+=R*l;continue}else if(typeof re=="number"){se+=G*re*f/1e3;continue}const N=(re.isSpace?l:0)+D,d=re.fontChar;let u,T,j=re.width;if(Q){let B;const Y=re.vmetric||q;B=re.vmetric?Y[1]:j*.5,B=-B*V;const ie=Y[2]*V;j=Y?-Y[0]:j,u=B/m,T=(se+ie)/m}else u=se/m,T=0;(re.isInFont||a.missingFile)&&(g.xcoords.push(g.x+u),Q&&g.ycoords.push(-g.y+T),g.tspan.textContent+=d);const U=Q?j*V-N*R:j*V+N*R;se+=U}g.tspan.setAttributeNS(null,"x",g.xcoords.map(b).join(" ")),Q?g.tspan.setAttributeNS(null,"y",g.ycoords.map(b).join(" ")):g.tspan.setAttributeNS(null,"y",b(-g.y)),Q?g.y-=se:g.x+=se*I,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${b(g.fontSize)}px`),g.fontStyle!==A.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==A.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const L=g.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(L===r.TextRenderingMode.FILL||L===r.TextRenderingMode.FILL_STROKE?(g.fillColor!==A.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?g.tspan.setAttributeNS(null,"fill","transparent"):g.tspan.setAttributeNS(null,"fill","none"),L===r.TextRenderingMode.STROKE||L===r.TextRenderingMode.FILL_STROKE){const re=1/(g.textMatrixScale||1);this._setStrokeAttributes(g.tspan,re)}let X=g.textMatrix;g.textRise!==0&&(X=X.slice(),X[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${C(X)} scale(${b(I)}, -1)`),g.txtElement.setAttributeNS(P,"xml:space","preserve"),g.txtElement.append(g.tspan),g.txtgrp.append(g.txtElement),this._ensureTransformGroup().append(g.txtElement)}setLeadingMoveText(c,g){this.setLeading(-g),this.moveText(c,g)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const g=o(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${g}); }
`}setFont(c){const g=this.current,a=this.commonObjs.get(c[0]);let f=c[1];g.font=a,this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),g.fontMatrix=a.fontMatrix||r.FONT_IDENTITY_MATRIX;let m="normal";a.black?m="900":a.bold&&(m="bold");const D=a.italic?"italic":"normal";f<0?(f=-f,g.fontDirection=-1):g.fontDirection=1,g.fontSize=f,g.fontFamily=a.loadedName,g.fontWeight=m,g.fontStyle=D,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",b(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const c=this.current;c.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((g=c.txtElement)!=null&&g.hasChildNodes())&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=h[c]}setLineJoin(c){this.current.lineJoin=v[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,g,a){this.current.strokeColor=r.Util.makeHexColor(c,g,a)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,g,a){this.current.fillColor=r.Util.makeHexColor(c,g,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const{width:g,height:a}=this.viewport,f=r.Util.inverseTransform(this.transformMatrix),[m,D,l,R]=r.Util.getAxialAlignedBoundingBox([0,0,g,a],f),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x",m),I.setAttributeNS(null,"y",D),I.setAttributeNS(null,"width",l-m),I.setAttributeNS(null,"height",R-D),I.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&I.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(I)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const g=c[1],a=c[2],f=c[3]||r.IDENTITY_MATRIX,[m,D,l,R]=c[4],I=c[5],Q=c[6],G=c[7],q=`shading${E++}`,[V,se,L,X]=r.Util.normalizeRect([...r.Util.applyTransform([m,D],f),...r.Util.applyTransform([l,R],f)]),[re,N]=r.Util.singularValueDecompose2dScale(f),d=I*re,u=Q*N,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",q),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",d),T.setAttributeNS(null,"height",u),T.setAttributeNS(null,"x",`${V}`),T.setAttributeNS(null,"y",`${se}`);const j=this.svg,U=this.transformMatrix,B=this.current.fillColor,Y=this.current.strokeColor,ie=this.svgFactory.create(L-V,X-se);if(this.svg=ie,this.transformMatrix=f,G===2){const le=r.Util.makeHexColor(...g);this.current.fillColor=le,this.current.strokeColor=le}return this.executeOpTree(this.convertOpList(a)),this.svg=j,this.transformMatrix=U,this.current.fillColor=B,this.current.strokeColor=Y,T.append(ie.childNodes[0]),this.defs.append(T),`url(#${q})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const g=`shading${E++}`,a=c[3];let f;switch(c[1]){case"axial":const m=c[4],D=c[5];f=this.svgFactory.createElement("svg:linearGradient"),f.setAttributeNS(null,"id",g),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"x1",m[0]),f.setAttributeNS(null,"y1",m[1]),f.setAttributeNS(null,"x2",D[0]),f.setAttributeNS(null,"y2",D[1]);break;case"radial":const l=c[4],R=c[5],I=c[6],Q=c[7];f=this.svgFactory.createElement("svg:radialGradient"),f.setAttributeNS(null,"id",g),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"cx",R[0]),f.setAttributeNS(null,"cy",R[1]),f.setAttributeNS(null,"r",Q),f.setAttributeNS(null,"fx",l[0]),f.setAttributeNS(null,"fy",l[1]),f.setAttributeNS(null,"fr",I);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const m of a){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",m[0]),D.setAttributeNS(null,"stop-color",m[1]),f.append(D)}return this.defs.append(f),`url(#${g})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,g){this.current.dashArray=c,this.current.dashPhase=g}constructPath(c,g){const a=this.current;let f=a.x,m=a.y,D=[],l=0;for(const R of c)switch(R|0){case r.OPS.rectangle:f=g[l++],m=g[l++];const I=g[l++],Q=g[l++],G=f+I,q=m+Q;D.push("M",b(f),b(m),"L",b(G),b(m),"L",b(G),b(q),"L",b(f),b(q),"Z");break;case r.OPS.moveTo:f=g[l++],m=g[l++],D.push("M",b(f),b(m));break;case r.OPS.lineTo:f=g[l++],m=g[l++],D.push("L",b(f),b(m));break;case r.OPS.curveTo:f=g[l+4],m=g[l+5],D.push("C",b(g[l]),b(g[l+1]),b(g[l+2]),b(g[l+3]),b(f),b(m)),l+=6;break;case r.OPS.curveTo2:D.push("C",b(f),b(m),b(g[l]),b(g[l+1]),b(g[l+2]),b(g[l+3])),f=g[l+2],m=g[l+3],l+=4;break;case r.OPS.curveTo3:f=g[l+2],m=g[l+3],D.push("C",b(g[l]),b(g[l+1]),b(f),b(m),b(f),b(m)),l+=4;break;case r.OPS.closePath:D.push("Z");break}D=D.join(" "),a.path&&c.length>0&&c[0]!==r.OPS.rectangle&&c[0]!==r.OPS.moveTo?D=a.path.getAttributeNS(null,"d")+D:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(a.path)),a.path.setAttributeNS(null,"d",D),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(f,m)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const g=`clippath${x++}`,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",g),a.setAttributeNS(null,"transform",C(this.transformMatrix));const f=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?f.setAttributeNS(null,"clip-rule","evenodd"):f.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,a.append(f),this.defs.append(a),c.activeClipUrl){c.clipGroup=null;for(const m of this.extraStack)m.clipGroup=null;a.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const g=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",g)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[g,a]of c)switch(g){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,r.warn)(`Unimplemented graphic state operator ${g}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,g=1){const a=this.current;let f=a.dashArray;g!==1&&f.length>0&&(f=f.map(function(m){return g*m})),c.setAttributeNS(null,"stroke",a.strokeColor),c.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",b(a.miterLimit)),c.setAttributeNS(null,"stroke-linecap",a.lineCap),c.setAttributeNS(null,"stroke-linejoin",a.lineJoin),c.setAttributeNS(null,"stroke-width",b(g*a.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",f.map(b).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",b(g*a.dashPhase)+"px")}eoFill(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const g=this.getObject(c);if(!g){(0,r.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(g)}paintInlineImageXObject(c,g){const a=c.width,f=c.height,m=w(c,this.forceDataSchema,!!g),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",b(a)),D.setAttributeNS(null,"height",b(f)),this.current.element=D,this.clip("nonzero");const l=this.svgFactory.createElement("svg:image");l.setAttributeNS(O,"xlink:href",m),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",b(-f)),l.setAttributeNS(null,"width",b(a)+"px"),l.setAttributeNS(null,"height",b(f)+"px"),l.setAttributeNS(null,"transform",`scale(${b(1/a)} ${b(-1/f)})`),g?g.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(c){const g=this.getObject(c.data,c);if(g.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const a=this.current,f=g.width,m=g.height,D=a.fillColor;a.maskId=`mask${p++}`;const l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",a.maskId);const R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",b(f)),R.setAttributeNS(null,"height",b(m)),R.setAttributeNS(null,"fill",D),R.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(l),this._ensureTransformGroup().append(R),this.paintInlineImageXObject(g,l)}paintFormXObjectBegin(c,g){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),g){const a=g[2]-g[0],f=g[3]-g[1],m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",g[0]),m.setAttributeNS(null,"y",g[1]),m.setAttributeNS(null,"width",b(a)),m.setAttributeNS(null,"height",b(f)),this.current.element=m,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const g=this.svgFactory.create(c.width,c.height),a=this.svgFactory.createElement("svg:defs");g.append(a),this.defs=a;const f=this.svgFactory.createElement("svg:g");return f.setAttributeNS(null,"transform",C(c.transform)),g.append(f),this.svg=f,g}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=F},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(r){const A=[],P={items:A,styles:Object.create(null)};function O(h){var w;if(!h)return;let v=null;const o=h.name;if(o==="#text")v=h.value;else if(s.shouldBuildText(o))(w=h==null?void 0:h.attributes)!=null&&w.textContent?v=h.attributes.textContent:h.value&&(v=h.value);else return;if(v!==null&&A.push({str:v}),!!h.children)for(const k of h.children)O(k)}return O(r),P}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=C,e.updateTextLayer=x;var n=s(1),r=s(6);const A=1e5,P=30,O=.8,h=new Map;function v(p,E){let F;if(E&&n.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(p,p).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=p,F=S.getContext("2d",{alpha:!1})}return F}function o(p,E){const F=h.get(p);if(F)return F;const S=v(P,E);S.font=`${P}px ${p}`;const c=S.measureText("");let g=c.fontBoundingBoxAscent,a=Math.abs(c.fontBoundingBoxDescent);if(g){const m=g/(g+a);return h.set(p,m),S.canvas.width=S.canvas.height=0,m}S.strokeStyle="red",S.clearRect(0,0,P,P),S.strokeText("g",0,0);let f=S.getImageData(0,0,P,P).data;a=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){a=Math.ceil(m/4/P);break}S.clearRect(0,0,P,P),S.strokeText("A",0,P),f=S.getImageData(0,0,P,P).data,g=0;for(let m=0,D=f.length;m<D;m+=4)if(f[m]>0){g=P-Math.floor(m/4/P);break}if(S.canvas.width=S.canvas.height=0,g){const m=g/(g+a);return h.set(p,m),m}return h.set(p,O),O}function w(p,E,F){const S=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};p._textDivs.push(S);const g=n.Util.transform(p._transform,E.transform);let a=Math.atan2(g[1],g[0]);const f=F[E.fontName];f.vertical&&(a+=Math.PI/2);const m=Math.hypot(g[2],g[3]),D=m*o(f.fontFamily,p._isOffscreenCanvasSupported);let l,R;a===0?(l=g[4],R=g[5]-D):(l=g[4]+D*Math.sin(a),R=g[5]-D*Math.cos(a));const I="calc(var(--scale-factor)*",Q=S.style;p._container===p._rootContainer?(Q.left=`${(100*l/p._pageWidth).toFixed(2)}%`,Q.top=`${(100*R/p._pageHeight).toFixed(2)}%`):(Q.left=`${I}${l.toFixed(2)}px)`,Q.top=`${I}${R.toFixed(2)}px)`),Q.fontSize=`${I}${m.toFixed(2)}px)`,Q.fontFamily=f.fontFamily,c.fontSize=m,S.setAttribute("role","presentation"),S.textContent=E.str,S.dir=E.dir,p._fontInspectorEnabled&&(S.dataset.fontName=E.fontName),a!==0&&(c.angle=a*(180/Math.PI));let G=!1;if(E.str.length>1)G=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const q=Math.abs(E.transform[0]),V=Math.abs(E.transform[3]);q!==V&&Math.max(q,V)/Math.min(q,V)>1.5&&(G=!0)}G&&(c.canvasWidth=f.vertical?E.height:E.width),p._textDivProperties.set(S,c),p._isReadableStream&&p._layoutText(S)}function k(p){const{div:E,scale:F,properties:S,ctx:c,prevFontSize:g,prevFontFamily:a}=p,{style:f}=E;let m="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:D}=f,{canvasWidth:l,fontSize:R}=S;(g!==R||a!==D)&&(c.font=`${R*F}px ${D}`,p.prevFontSize=R,p.prevFontFamily=D);const{width:I}=c.measureText(E.textContent);I>0&&(m=`scaleX(${l*F/I})`)}S.angle!==0&&(m=`rotate(${S.angle}deg) ${m}`),m.length>0&&(f.transform=m)}function y(p){if(p._canceled)return;const E=p._textDivs,F=p._capability;if(E.length>A){F.resolve();return}if(!p._isReadableStream)for(const c of E)p._layoutText(c);F.resolve()}class b{constructor({textContentSource:E,container:F,viewport:S,textDivs:c,textDivProperties:g,textContentItemsStr:a,isOffscreenCanvasSupported:f}){var I;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=c||[],this._textContentItemsStr=a||[],this._isOffscreenCanvasSupported=f,this._fontInspectorEnabled=!!((I=globalThis.FontInspector)!=null&&I.enabled),this._reader=null,this._textDivProperties=g||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,f)};const{pageWidth:m,pageHeight:D,pageX:l,pageY:R}=S.rawDims;this._transform=[1,0,0,-1,-l,R+D],this._pageWidth=m,this._pageHeight=D,(0,r.setLayerDimensions)(F,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(E,F){for(const S of E){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const c=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),c.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),w(this,S,F)}}_layoutText(E){const F=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,k(this._layoutTextParams),F.hasText&&this._container.append(E),F.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const E=new n.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:c,done:g})=>{if(g){E.resolve();return}Object.assign(F,c.styles),this._processItems(c.items,F),S()},E.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:c}=this._textContentSource;this._processItems(S,c),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{F=null,y(this)},this._capability.reject)}}e.TextLayerRenderTask=b;function C(p){!p.textContentSource&&(p.textContent||p.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),p.textContentSource=p.textContent||p.textContentStream);const{container:E,viewport:F}=p,S=getComputedStyle(E),c=S.getPropertyValue("visibility"),g=parseFloat(S.getPropertyValue("--scale-factor"));c==="visible"&&(!g||Math.abs(g-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const a=new b(p);return a._render(),a}function x({container:p,viewport:E,textDivs:F,textDivProperties:S,isOffscreenCanvasSupported:c,mustRotate:g=!0,mustRescale:a=!0}){if(g&&(0,r.setLayerDimensions)(p,{rotation:E.rotation}),a){const f=v(0,c),D={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f};for(const l of F)D.properties=S.get(l),D.div=l,k(D)}}},(t,e,s)=>{var o,w,k,y,b,C,x,p,E,F,S,Qt,Pt,Zt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),r=s(4),A=s(28),P=s(33),O=s(6),h=s(34);const m=class m{constructor({uiManager:l,pageIndex:R,div:I,accessibilityManager:Q,annotationLayer:G,viewport:q,l10n:V}){ce(this,S);ce(this,o);ce(this,w,!1);ce(this,k,null);ce(this,y,this.pointerup.bind(this));ce(this,b,this.pointerdown.bind(this));ce(this,C,new Map);ce(this,x,!1);ce(this,p,!1);ce(this,E,!1);ce(this,F);const se=[A.FreeTextEditor,P.InkEditor,h.StampEditor];if(!m._initialized){m._initialized=!0;for(const L of se)L.initialize(V)}l.registerEditorTypes(se),ue(this,F,l),this.pageIndex=R,this.div=I,ue(this,o,Q),ue(this,k,G),this.viewport=q,i(this,F).addLayer(this)}get isEmpty(){return i(this,C).size===0}updateToolbar(l){i(this,F).updateToolbar(l)}updateMode(l=i(this,F).getMode()){ne(this,S,en).call(this),l===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),l!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",l===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",l===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",l===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(l){if(!l&&i(this,F).getMode()!==n.AnnotationEditorType.INK)return;if(!l){for(const I of i(this,C).values())if(I.isEmpty()){I.setInBackground();return}}ne(this,S,Pt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(l){i(this,F).setEditingState(l)}addCommands(l){i(this,F).addCommands(l)}enable(){this.div.style.pointerEvents="auto";const l=new Set;for(const I of i(this,C).values())I.enableEditing(),I.annotationElementId&&l.add(I.annotationElementId);if(!i(this,k))return;const R=i(this,k).getEditableAnnotations();for(const I of R){if(I.hide(),i(this,F).isDeletedAnnotationElement(I.data.id)||l.has(I.data.id))continue;const Q=this.deserialize(I);Q&&(this.addOrRebuild(Q),Q.enableEditing())}}disable(){var R;ue(this,E,!0),this.div.style.pointerEvents="none";const l=new Set;for(const I of i(this,C).values()){if(I.disableEditing(),!I.annotationElementId||I.serialize()!==null){l.add(I.annotationElementId);continue}(R=this.getEditableAnnotation(I.annotationElementId))==null||R.show(),I.remove()}if(i(this,k)){const I=i(this,k).getEditableAnnotations();for(const Q of I){const{id:G}=Q.data;l.has(G)||i(this,F).isDeletedAnnotationElement(G)||Q.show()}}ne(this,S,en).call(this),this.isEmpty&&(this.div.hidden=!0),ue(this,E,!1)}getEditableAnnotation(l){var R;return((R=i(this,k))==null?void 0:R.getEditableAnnotation(l))||null}setActiveEditor(l){i(this,F).getActive()!==l&&i(this,F).setActiveEditor(l)}enableClick(){this.div.addEventListener("pointerdown",i(this,b)),this.div.addEventListener("pointerup",i(this,y))}disableClick(){this.div.removeEventListener("pointerdown",i(this,b)),this.div.removeEventListener("pointerup",i(this,y))}attach(l){i(this,C).set(l.id,l);const{annotationElementId:R}=l;R&&i(this,F).isDeletedAnnotationElement(R)&&i(this,F).removeDeletedAnnotationElement(l)}detach(l){var R;i(this,C).delete(l.id),(R=i(this,o))==null||R.removePointerInTextLayer(l.contentDiv),!i(this,E)&&l.annotationElementId&&i(this,F).addDeletedAnnotationElement(l)}remove(l){this.detach(l),i(this,F).removeEditor(l),l.div.contains(document.activeElement)&&setTimeout(()=>{i(this,F).focusMainContainer()},0),l.div.remove(),l.isAttachedToDOM=!1,i(this,p)||this.addInkEditorIfNeeded(!1)}changeParent(l){var R;l.parent!==this&&(l.annotationElementId&&(i(this,F).addDeletedAnnotationElement(l.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(l),l.annotationElementId=null),this.attach(l),(R=l.parent)==null||R.detach(l),l.setParent(this),l.div&&l.isAttachedToDOM&&(l.div.remove(),this.div.append(l.div)))}add(l){if(this.changeParent(l),i(this,F).addEditor(l),this.attach(l),!l.isAttachedToDOM){const R=l.render();this.div.append(R),l.isAttachedToDOM=!0}l.fixAndSetPosition(),l.onceAdded(),i(this,F).addToAnnotationStorage(l)}moveEditorInDOM(l){var I;if(!l.isAttachedToDOM)return;const{activeElement:R}=document;l.div.contains(R)&&(l._focusEventsAllowed=!1,setTimeout(()=>{l.div.contains(document.activeElement)?l._focusEventsAllowed=!0:(l.div.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),R.focus())},0)),l._structTreeParentId=(I=i(this,o))==null?void 0:I.moveElementInDOM(this.div,l.div,l.contentDiv,!0)}addOrRebuild(l){l.needsToBeRebuilt()?l.rebuild():this.add(l)}addUndoableEditor(l){const R=()=>l._uiManager.rebuild(l),I=()=>{l.remove()};this.addCommands({cmd:R,undo:I,mustExec:!1})}getNextId(){return i(this,F).getId()}pasteEditor(l,R){i(this,F).updateToolbar(l),i(this,F).updateMode(l);const{offsetX:I,offsetY:Q}=ne(this,S,Zt).call(this),G=this.getNextId(),q=ne(this,S,Qt).call(this,{parent:this,id:G,x:I,y:Q,uiManager:i(this,F),isCentered:!0,...R});q&&this.add(q)}deserialize(l){switch(l.annotationType??l.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return A.FreeTextEditor.deserialize(l,this,i(this,F));case n.AnnotationEditorType.INK:return P.InkEditor.deserialize(l,this,i(this,F));case n.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(l,this,i(this,F))}return null}addNewEditor(){ne(this,S,Pt).call(this,ne(this,S,Zt).call(this),!0)}setSelected(l){i(this,F).setSelected(l)}toggleSelected(l){i(this,F).toggleSelected(l)}isSelected(l){return i(this,F).isSelected(l)}unselect(l){i(this,F).unselect(l)}pointerup(l){const{isMac:R}=n.FeatureTest.platform;if(!(l.button!==0||l.ctrlKey&&R)&&l.target===this.div&&i(this,x)){if(ue(this,x,!1),!i(this,w)){ue(this,w,!0);return}if(i(this,F).getMode()===n.AnnotationEditorType.STAMP){i(this,F).unselectAll();return}ne(this,S,Pt).call(this,l,!1)}}pointerdown(l){if(i(this,x)){ue(this,x,!1);return}const{isMac:R}=n.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&R||l.target!==this.div)return;ue(this,x,!0);const I=i(this,F).getActive();ue(this,w,!I||I.isEmpty())}findNewParent(l,R,I){const Q=i(this,F).findParent(R,I);return Q===null||Q===this?!1:(Q.changeParent(l),!0)}destroy(){var l,R;((l=i(this,F).getActive())==null?void 0:l.parent)===this&&(i(this,F).commitOrRemove(),i(this,F).setActiveEditor(null));for(const I of i(this,C).values())(R=i(this,o))==null||R.removePointerInTextLayer(I.contentDiv),I.setParent(null),I.isAttachedToDOM=!1,I.div.remove();this.div=null,i(this,C).clear(),i(this,F).removeLayer(this)}render({viewport:l}){this.viewport=l,(0,O.setLayerDimensions)(this.div,l);for(const R of i(this,F).getEditors(this.pageIndex))this.add(R);this.updateMode()}update({viewport:l}){i(this,F).commitOrRemove(),this.viewport=l,(0,O.setLayerDimensions)(this.div,{rotation:l.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:l,pageHeight:R}=this.viewport.rawDims;return[l,R]}};o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakSet,Qt=function(l){switch(i(this,F).getMode()){case n.AnnotationEditorType.FREETEXT:return new A.FreeTextEditor(l);case n.AnnotationEditorType.INK:return new P.InkEditor(l);case n.AnnotationEditorType.STAMP:return new h.StampEditor(l)}return null},Pt=function(l,R){const I=this.getNextId(),Q=ne(this,S,Qt).call(this,{parent:this,id:I,x:l.offsetX,y:l.offsetY,uiManager:i(this,F),isCentered:R});return Q&&this.add(Q),Q},Zt=function(){const{x:l,y:R,width:I,height:Q}=this.div.getBoundingClientRect(),G=Math.max(0,l),q=Math.max(0,R),V=Math.min(window.innerWidth,l+I),se=Math.min(window.innerHeight,R+Q),L=(G+V)/2-l,X=(q+se)/2-R,[re,N]=this.viewport.rotation%180===0?[L,X]:[X,L];return{offsetX:re,offsetY:N}},en=function(){ue(this,p,!0);for(const l of i(this,C).values())l.isEmpty()&&l.remove();ue(this,p,!1)},Qe(m,"_initialized",!1);let v=m;e.AnnotationEditorLayer=v},(t,e,s)=>{var h,v,o,w,k,y,b,C,x,p,Rn,kn,Mn,mt,tn,Fn,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),r=s(5),A=s(4),P=s(29);const m=class m extends A.AnnotationEditor{constructor(R){super({...R,name:"freeTextEditor"});ce(this,p);ce(this,h,this.editorDivBlur.bind(this));ce(this,v,this.editorDivFocus.bind(this));ce(this,o,this.editorDivInput.bind(this));ce(this,w,this.editorDivKeydown.bind(this));ce(this,k);ce(this,y,"");ce(this,b,`${this.id}-editor`);ce(this,C);ce(this,x,null);ue(this,k,R.color||m._defaultColor||A.AnnotationEditor._defaultLineColor),ue(this,C,R.fontSize||m._defaultFontSize)}static get _keyboardManager(){const R=m.prototype,I=q=>q.isEmpty(),Q=r.AnnotationEditorUIManager.TRANSLATE_SMALL,G=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],R.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],R.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],R._translateEmpty,{args:[-Q,0],checker:I}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],R._translateEmpty,{args:[-G,0],checker:I}],[["ArrowRight","mac+ArrowRight"],R._translateEmpty,{args:[Q,0],checker:I}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],R._translateEmpty,{args:[G,0],checker:I}],[["ArrowUp","mac+ArrowUp"],R._translateEmpty,{args:[0,-Q],checker:I}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],R._translateEmpty,{args:[0,-G],checker:I}],[["ArrowDown","mac+ArrowDown"],R._translateEmpty,{args:[0,Q],checker:I}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],R._translateEmpty,{args:[0,G],checker:I}]]))}static initialize(R){A.AnnotationEditor.initialize(R,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const I=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(I.getPropertyValue("--freetext-padding"))}static updateDefaultParams(R,I){switch(R){case n.AnnotationEditorParamsType.FREETEXT_SIZE:m._defaultFontSize=I;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:m._defaultColor=I;break}}updateParams(R,I){switch(R){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ne(this,p,Rn).call(this,I);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ne(this,p,kn).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,m._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,m._defaultColor||A.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,i(this,C)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,i(this,k)]]}_translateEmpty(R,I){this._uiManager.translateSelectedEditors(R,I,!0)}getInitialTranslation(){const R=this.parentScale;return[-m._internalPadding*R,-(m._internalPadding+i(this,C))*R]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",i(this,w)),this.editorDiv.addEventListener("focus",i(this,v)),this.editorDiv.addEventListener("blur",i(this,h)),this.editorDiv.addEventListener("input",i(this,o)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",i(this,b)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",i(this,w)),this.editorDiv.removeEventListener("focus",i(this,v)),this.editorDiv.removeEventListener("blur",i(this,h)),this.editorDiv.removeEventListener("input",i(this,o)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(R){this._focusEventsAllowed&&(super.focusin(R),R.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var R;if(this.width){ne(this,p,nn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(R=this._initialOptions)!=null&&R.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const R=i(this,y),I=ue(this,y,ne(this,p,Mn).call(this).trimEnd());if(R===I)return;const Q=G=>{if(ue(this,y,G),!G){this.remove();return}ne(this,p,tn).call(this),this._uiManager.rebuild(this),ne(this,p,mt).call(this)};this.addCommands({cmd:()=>{Q(I)},undo:()=>{Q(R)},mustExec:!1}),ne(this,p,mt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(R){this.enterInEditMode()}keydown(R){R.target===this.div&&R.key==="Enter"&&(this.enterInEditMode(),R.preventDefault())}editorDivKeydown(R){m._keyboardManager.exec(this,R)}editorDivFocus(R){this.isEditing=!0}editorDivBlur(R){this.isEditing=!1}editorDivInput(R){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let R,I;this.width&&(R=this.x,I=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",i(this,b)),this.enableEditing(),A.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var q;return(q=this.editorDiv)==null?void 0:q.setAttribute("aria-label",G)}),A.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(G=>{var q;return(q=this.editorDiv)==null?void 0:q.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:Q}=this.editorDiv;if(Q.fontSize=`calc(${i(this,C)}px * var(--scale-factor))`,Q.color=i(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,q]=this.parentDimensions;if(this.annotationElementId){const{position:V}=i(this,x);let[se,L]=this.getInitialTranslation();[se,L]=this.pageTranslationToScreen(se,L);const[X,re]=this.pageDimensions,[N,d]=this.pageTranslation;let u,T;switch(this.rotation){case 0:u=R+(V[0]-N)/X,T=I+this.height-(V[1]-d)/re;break;case 90:u=R+(V[0]-N)/X,T=I-(V[1]-d)/re,[se,L]=[L,-se];break;case 180:u=R-this.width+(V[0]-N)/X,T=I-(V[1]-d)/re,[se,L]=[-se,-L];break;case 270:u=R+(V[0]-N-this.height*re)/X,T=I+(V[1]-d-this.width*X)/re,[se,L]=[-L,se];break}this.setAt(u*G,T*q,se,L)}else this.setAt(R*G,I*q,this.width*G,this.height*q);ne(this,p,tn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(R,I,Q){let G=null;if(R instanceof P.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:V,fontColor:se},rect:L,rotation:X,id:re},textContent:N,textPosition:d,parent:{page:{pageNumber:u}}}=R;if(!N||N.length===0)return null;G=R={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(se),fontSize:V,value:N.join(`
`),position:d,pageIndex:u-1,rect:L,rotation:X,id:re,deleted:!1}}const q=super.deserialize(R,I,Q);return ue(q,C,R.fontSize),ue(q,k,n.Util.makeHexColor(...R.color)),ue(q,y,R.value),q.annotationElementId=R.id||null,ue(q,x,G),q}serialize(R=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const I=m._internalPadding*this.parentScale,Q=this.getRect(I,I),G=A.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:i(this,k)),q={annotationType:n.AnnotationEditorType.FREETEXT,color:G,fontSize:i(this,C),value:i(this,y),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return R?q:this.annotationElementId&&!ne(this,p,Fn).call(this,q)?null:(q.id=this.annotationElementId,q)}};h=new WeakMap,v=new WeakMap,o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakSet,Rn=function(R){const I=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-i(this,C))*this.parentScale),ue(this,C,G),ne(this,p,mt).call(this)},Q=i(this,C);this.addCommands({cmd:()=>{I(R)},undo:()=>{I(Q)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kn=function(R){const I=i(this,k);this.addCommands({cmd:()=>{ue(this,k,this.editorDiv.style.color=R)},undo:()=>{ue(this,k,this.editorDiv.style.color=I)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=function(){const R=this.editorDiv.getElementsByTagName("div");if(R.length===0)return this.editorDiv.innerText;const I=[];for(const Q of R)I.push(Q.innerText.replace(/\r\n?|\n/,""));return I.join(`
`)},mt=function(){const[R,I]=this.parentDimensions;let Q;if(this.isAttachedToDOM)Q=this.div.getBoundingClientRect();else{const{currentLayer:G,div:q}=this,V=q.style.display;q.style.display="hidden",G.div.append(this.div),Q=q.getBoundingClientRect(),q.remove(),q.style.display=V}this.rotation%180===this.parentRotation%180?(this.width=Q.width/R,this.height=Q.height/I):(this.width=Q.height/R,this.height=Q.width/I),this.fixAndSetPosition()},tn=function(){if(this.editorDiv.replaceChildren(),!!i(this,y))for(const R of i(this,y).split(`
`)){const I=document.createElement("div");I.append(R?document.createTextNode(R):document.createElement("br")),this.editorDiv.append(I)}},Fn=function(R){const{value:I,fontSize:Q,color:G,rect:q,pageIndex:V}=i(this,x);return R.value!==I||R.fontSize!==Q||R.rect.some((se,L)=>Math.abs(se-q[L])>=1)||R.color.some((se,L)=>se!==G[L])||R.pageIndex!==V},nn=function(R=!1){if(!this.annotationElementId)return;if(ne(this,p,mt).call(this),!R&&(this.width===0||this.height===0)){setTimeout(()=>ne(this,p,nn).call(this,!0),0);return}const I=m._internalPadding*this.parentScale;i(this,x).rect=this.getRect(I,I)},Qe(m,"_freeTextDefaultContent",""),Qe(m,"_internalPadding",0),Qe(m,"_defaultColor",null),Qe(m,"_defaultFontSize",10),Qe(m,"_type","freetext");let O=m;e.FreeTextEditor=O},(t,e,s)=>{var T,U,it,On,ie,le,fe,ye,me,ve,Z,ee,M,z,J,ae,ge,Ae,_e,te,Pe,Ce,Dn,wt,sn,rn,Oe,He,Xe,Ee,oe,de,Me,an,Ge,H,be,we,Ln,on;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),r=s(6),A=s(3),P=s(30),O=s(31),h=s(32);const v=1e3,o=9,w=new WeakSet;function k(Re){return{width:Re[2]-Re[0],height:Re[3]-Re[1]}}class y{static create(W){switch(W.data.annotationType){case n.AnnotationType.LINK:return new C(W);case n.AnnotationType.TEXT:return new x(W);case n.AnnotationType.WIDGET:switch(W.data.fieldType){case"Tx":return new E(W);case"Btn":return W.data.radioButton?new c(W):W.data.checkBox?new S(W):new g(W);case"Ch":return new a(W);case"Sig":return new F(W)}return new p(W);case n.AnnotationType.POPUP:return new f(W);case n.AnnotationType.FREETEXT:return new D(W);case n.AnnotationType.LINE:return new l(W);case n.AnnotationType.SQUARE:return new R(W);case n.AnnotationType.CIRCLE:return new I(W);case n.AnnotationType.POLYLINE:return new Q(W);case n.AnnotationType.CARET:return new q(W);case n.AnnotationType.INK:return new V(W);case n.AnnotationType.POLYGON:return new G(W);case n.AnnotationType.HIGHLIGHT:return new se(W);case n.AnnotationType.UNDERLINE:return new L(W);case n.AnnotationType.SQUIGGLY:return new X(W);case n.AnnotationType.STRIKEOUT:return new re(W);case n.AnnotationType.STAMP:return new N(W);case n.AnnotationType.FILEATTACHMENT:return new d(W);default:return new b(W)}}}const j=class j{constructor(W,{isRenderable:$=!1,ignoreBorder:K=!1,createQuadrilaterals:he=!1}={}){ce(this,T,!1);this.isRenderable=$,this.data=W.data,this.layer=W.layer,this.linkService=W.linkService,this.downloadManager=W.downloadManager,this.imageResourcesPath=W.imageResourcesPath,this.renderForms=W.renderForms,this.svgFactory=W.svgFactory,this.annotationStorage=W.annotationStorage,this.enableScripting=W.enableScripting,this.hasJSActions=W.hasJSActions,this._fieldObjects=W.fieldObjects,this.parent=W.parent,$&&(this.container=this._createContainer(K)),he&&this._createQuadrilaterals()}static _hasPopupData({titleObj:W,contentsObj:$,richText:K}){return!!(W!=null&&W.str||$!=null&&$.str||K!=null&&K.str)}get hasPopupData(){return j._hasPopupData(this.data)}_createContainer(W){const{data:$,parent:{page:K,viewport:he}}=this,pe=document.createElement("section");pe.setAttribute("data-annotation-id",$.id),this instanceof p||(pe.tabIndex=v),pe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pe.setAttribute("aria-haspopup","dialog"),$.noRotate&&pe.classList.add("norotate");const{pageWidth:xe,pageHeight:Se,pageX:Fe,pageY:De}=he.rawDims;if(!$.rect||this instanceof f){const{rotation:Be}=$;return!$.hasOwnCanvas&&Be!==0&&this.setRotation(Be,pe),pe}const{width:Te,height:We}=k($.rect),Le=n.Util.normalizeRect([$.rect[0],K.view[3]-$.rect[1]+K.view[1],$.rect[2],K.view[3]-$.rect[3]+K.view[1]]);if(!W&&$.borderStyle.width>0){pe.style.borderWidth=`${$.borderStyle.width}px`;const Be=$.borderStyle.horizontalCornerRadius,Ve=$.borderStyle.verticalCornerRadius;if(Be>0||Ve>0){const Je=`calc(${Be}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;pe.style.borderRadius=Je}else if(this instanceof c){const Je=`calc(${Te}px * var(--scale-factor)) / calc(${We}px * var(--scale-factor))`;pe.style.borderRadius=Je}switch($.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:pe.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:pe.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:pe.style.borderBottomStyle="solid";break}const Ke=$.borderColor||null;Ke?(ue(this,T,!0),pe.style.borderColor=n.Util.makeHexColor(Ke[0]|0,Ke[1]|0,Ke[2]|0)):pe.style.borderWidth=0}pe.style.left=`${100*(Le[0]-Fe)/xe}%`,pe.style.top=`${100*(Le[1]-De)/Se}%`;const{rotation:Ne}=$;return $.hasOwnCanvas||Ne===0?(pe.style.width=`${100*Te/xe}%`,pe.style.height=`${100*We/Se}%`):this.setRotation(Ne,pe),pe}setRotation(W,$=this.container){if(!this.data.rect)return;const{pageWidth:K,pageHeight:he}=this.parent.viewport.rawDims,{width:pe,height:xe}=k(this.data.rect);let Se,Fe;W%180===0?(Se=100*pe/K,Fe=100*xe/he):(Se=100*xe/K,Fe=100*pe/he),$.style.width=`${Se}%`,$.style.height=`${Fe}%`,$.setAttribute("data-main-rotation",(360-W)%360)}get _commonActions(){const W=($,K,he)=>{const pe=he.detail[$],xe=pe[0],Se=pe.slice(1);he.target.style[K]=P.ColorConverters[`${xe}_HTML`](Se),this.annotationStorage.setValue(this.data.id,{[K]:P.ColorConverters[`${xe}_rgb`](Se)})};return(0,n.shadow)(this,"_commonActions",{display:$=>{const{display:K}=$.detail,he=K%2===1;this.container.style.visibility=he?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:he,noPrint:K===1||K===2})},print:$=>{this.annotationStorage.setValue(this.data.id,{noPrint:!$.detail.print})},hidden:$=>{const{hidden:K}=$.detail;this.container.style.visibility=K?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:K,noView:K})},focus:$=>{setTimeout(()=>$.target.focus({preventScroll:!1}),0)},userName:$=>{$.target.title=$.detail.userName},readonly:$=>{$.target.disabled=$.detail.readonly},required:$=>{this._setRequired($.target,$.detail.required)},bgColor:$=>{W("bgColor","backgroundColor",$)},fillColor:$=>{W("fillColor","backgroundColor",$)},fgColor:$=>{W("fgColor","color",$)},textColor:$=>{W("textColor","color",$)},borderColor:$=>{W("borderColor","borderColor",$)},strokeColor:$=>{W("strokeColor","borderColor",$)},rotation:$=>{const K=$.detail.rotation;this.setRotation(K),this.annotationStorage.setValue(this.data.id,{rotation:K})}})}_dispatchEventFromSandbox(W,$){const K=this._commonActions;for(const he of Object.keys($.detail)){const pe=W[he]||K[he];pe==null||pe($)}}_setDefaultPropertiesFromJS(W){if(!this.enableScripting)return;const $=this.annotationStorage.getRawValue(this.data.id);if(!$)return;const K=this._commonActions;for(const[he,pe]of Object.entries($)){const xe=K[he];if(xe){const Se={detail:{[he]:pe},target:W};xe(Se),delete $[he]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:W}=this.data;if(!W)return;const[$,K,he,pe]=this.data.rect;if(W.length===1){const[,{x:Ve,y:Ke},{x:Je,y:tt}]=W[0];if(he===Ve&&pe===Ke&&$===Je&&K===tt)return}const{style:xe}=this.container;let Se;if(i(this,T)){const{borderColor:Ve,borderWidth:Ke}=xe;xe.borderWidth=0,Se=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ve}" stroke-width="${Ke}">`],this.container.classList.add("hasBorder")}const Fe=he-$,De=pe-K,{svgFactory:Te}=this,We=Te.createElement("svg");We.classList.add("quadrilateralsContainer"),We.setAttribute("width",0),We.setAttribute("height",0);const Le=Te.createElement("defs");We.append(Le);const Ne=Te.createElement("clipPath"),Be=`clippath_${this.data.id}`;Ne.setAttribute("id",Be),Ne.setAttribute("clipPathUnits","objectBoundingBox"),Le.append(Ne);for(const[,{x:Ve,y:Ke},{x:Je,y:tt}]of W){const Ze=Te.createElement("rect"),Ye=(Je-$)/Fe,et=(pe-Ke)/De,rt=(Ve-Je)/Fe,mn=(Ke-tt)/De;Ze.setAttribute("x",Ye),Ze.setAttribute("y",et),Ze.setAttribute("width",rt),Ze.setAttribute("height",mn),Ne.append(Ze),Se==null||Se.push(`<rect vector-effect="non-scaling-stroke" x="${Ye}" y="${et}" width="${rt}" height="${mn}"/>`)}i(this,T)&&(Se.push("</g></svg>')"),xe.backgroundImage=Se.join("")),this.container.append(We),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:W,data:$}=this;W.setAttribute("aria-haspopup","dialog");const K=new f({data:{color:$.color,titleObj:$.titleObj,modificationDate:$.modificationDate,contentsObj:$.contentsObj,richText:$.richText,parentRect:$.rect,borderStyle:0,id:`popup_${$.id}`,rotation:$.rotation},parent:this.parent,elements:[this]});this.parent.div.append(K.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(W,$=null){const K=[];if(this._fieldObjects){const he=this._fieldObjects[W];if(he)for(const{page:pe,id:xe,exportValues:Se}of he){if(pe===-1||xe===$)continue;const Fe=typeof Se=="string"?Se:null,De=document.querySelector(`[data-element-id="${xe}"]`);if(De&&!w.has(De)){(0,n.warn)(`_getElementsByName - element not allowed: ${xe}`);continue}K.push({id:xe,exportValue:Fe,domElement:De})}return K}for(const he of document.getElementsByName(W)){const{exportValue:pe}=he,xe=he.getAttribute("data-element-id");xe!==$&&w.has(he)&&K.push({id:xe,exportValue:pe,domElement:he})}return K}show(){var W;this.container&&(this.container.hidden=!1),(W=this.popup)==null||W.maybeShow()}hide(){var W;this.container&&(this.container.hidden=!0),(W=this.popup)==null||W.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const W=this.getElementsToTriggerPopup();if(Array.isArray(W))for(const $ of W)$.classList.add("highlightArea");else W.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:W,data:{id:$}}=this;this.container.addEventListener("dblclick",()=>{var K;(K=this.linkService.eventBus)==null||K.dispatch("switchannotationeditormode",{source:this,mode:W,editId:$})})}};T=new WeakMap;let b=j;class C extends b{constructor($,K=null){super($,{isRenderable:!0,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0});ce(this,U);this.isTooltipOnly=$.data.isTooltipOnly}render(){const{data:$,linkService:K}=this,he=document.createElement("a");he.setAttribute("data-element-id",$.id);let pe=!1;return $.url?(K.addLinkAttributes(he,$.url,$.newWindow),pe=!0):$.action?(this._bindNamedAction(he,$.action),pe=!0):$.attachment?(this._bindAttachment(he,$.attachment),pe=!0):$.setOCGState?(ne(this,U,On).call(this,he,$.setOCGState),pe=!0):$.dest?(this._bindLink(he,$.dest),pe=!0):($.actions&&($.actions.Action||$.actions["Mouse Up"]||$.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(he,$),pe=!0),$.resetForm?(this._bindResetFormAction(he,$.resetForm),pe=!0):this.isTooltipOnly&&!pe&&(this._bindLink(he,""),pe=!0)),this.container.classList.add("linkAnnotation"),pe&&this.container.append(he),this.container}_bindLink($,K){$.href=this.linkService.getDestinationHash(K),$.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&ne(this,U,it).call(this)}_bindNamedAction($,K){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>(this.linkService.executeNamedAction(K),!1),ne(this,U,it).call(this)}_bindAttachment($,K){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>{var he;return(he=this.downloadManager)==null||he.openOrDownloadData(this.container,K.content,K.filename),!1},ne(this,U,it).call(this)}_bindJSAction($,K){$.href=this.linkService.getAnchorUrl("");const he=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pe of Object.keys(K.actions)){const xe=he.get(pe);xe&&($[xe]=()=>{var Se;return(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:pe}}),!1})}$.onclick||($.onclick=()=>!1),ne(this,U,it).call(this)}_bindResetFormAction($,K){const he=$.onclick;if(he||($.href=this.linkService.getAnchorUrl("")),ne(this,U,it).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),he||($.onclick=()=>!1);return}$.onclick=()=>{var We;he==null||he();const{fields:pe,refs:xe,include:Se}=K,Fe=[];if(pe.length!==0||xe.length!==0){const Le=new Set(xe);for(const Ne of pe){const Be=this._fieldObjects[Ne]||[];for(const{id:Ve}of Be)Le.add(Ve)}for(const Ne of Object.values(this._fieldObjects))for(const Be of Ne)Le.has(Be.id)===Se&&Fe.push(Be)}else for(const Le of Object.values(this._fieldObjects))Fe.push(...Le);const De=this.annotationStorage,Te=[];for(const Le of Fe){const{id:Ne}=Le;switch(Te.push(Ne),Le.type){case"text":{const Ve=Le.defaultValue||"";De.setValue(Ne,{value:Ve});break}case"checkbox":case"radiobutton":{const Ve=Le.defaultValue===Le.exportValues;De.setValue(Ne,{value:Ve});break}case"combobox":case"listbox":{const Ve=Le.defaultValue||"";De.setValue(Ne,{value:Ve});break}default:continue}const Be=document.querySelector(`[data-element-id="${Ne}"]`);if(Be){if(!w.has(Be)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Ne}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((We=this.linkService.eventBus)==null||We.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Te,name:"ResetForm"}})),!1}}}U=new WeakSet,it=function(){this.container.setAttribute("data-internal-link","")},On=function($,K){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>(this.linkService.executeSetOCGState(K),!1),ne(this,U,it).call(this)};class x extends b{constructor(W){super(W,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const W=document.createElement("img");return W.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",W.alt="[{{type}} Annotation]",W.dataset.l10nId="text_annotation_type",W.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(W),this.container}}class p extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(W){var $;this.data.hasOwnCanvas&&((($=W.previousSibling)==null?void 0:$.nodeName)==="CANVAS"&&(W.previousSibling.hidden=!0),W.hidden=!1)}_getKeyModifier(W){const{isWin:$,isMac:K}=n.FeatureTest.platform;return $&&W.ctrlKey||K&&W.metaKey}_setEventListener(W,$,K,he,pe){K.includes("mouse")?W.addEventListener(K,xe=>{var Se;(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:he,value:pe(xe),shift:xe.shiftKey,modifier:this._getKeyModifier(xe)}})}):W.addEventListener(K,xe=>{var Se;if(K==="blur"){if(!$.focused||!xe.relatedTarget)return;$.focused=!1}else if(K==="focus"){if($.focused)return;$.focused=!0}pe&&((Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:he,value:pe(xe)}}))})}_setEventListeners(W,$,K,he){var pe,xe,Se;for(const[Fe,De]of K)(De==="Action"||(pe=this.data.actions)!=null&&pe[De])&&((De==="Focus"||De==="Blur")&&($||($={focused:!1})),this._setEventListener(W,$,Fe,De,he),De==="Focus"&&!((xe=this.data.actions)!=null&&xe.Blur)?this._setEventListener(W,$,"blur","Blur",null):De==="Blur"&&!((Se=this.data.actions)!=null&&Se.Focus)&&this._setEventListener(W,$,"focus","Focus",null))}_setBackgroundColor(W){const $=this.data.backgroundColor||null;W.style.backgroundColor=$===null?"transparent":n.Util.makeHexColor($[0],$[1],$[2])}_setTextStyle(W){const $=["left","center","right"],{fontColor:K}=this.data.defaultAppearanceData,he=this.data.defaultAppearanceData.fontSize||o,pe=W.style;let xe;const Se=2,Fe=De=>Math.round(10*De)/10;if(this.data.multiLine){const De=Math.abs(this.data.rect[3]-this.data.rect[1]-Se),Te=Math.round(De/(n.LINE_FACTOR*he))||1,We=De/Te;xe=Math.min(he,Fe(We/n.LINE_FACTOR))}else{const De=Math.abs(this.data.rect[3]-this.data.rect[1]-Se);xe=Math.min(he,Fe(De/n.LINE_FACTOR))}pe.fontSize=`calc(${xe}px * var(--scale-factor))`,pe.color=n.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(pe.textAlign=$[this.data.textAlignment])}_setRequired(W,$){$?W.setAttribute("required",!0):W.removeAttribute("required"),W.setAttribute("aria-required",$)}}class E extends p{constructor(W){const $=W.renderForms||!W.data.hasAppearance&&!!W.data.fieldValue;super(W,{isRenderable:$})}setPropertyOnSiblings(W,$,K,he){const pe=this.annotationStorage;for(const xe of this._getElementsByName(W.name,W.id))xe.domElement&&(xe.domElement[$]=K),pe.setValue(xe.id,{[he]:K})}render(){var he,pe;const W=this.annotationStorage,$=this.data.id;this.container.classList.add("textWidgetAnnotation");let K=null;if(this.renderForms){const xe=W.getValue($,{value:this.data.fieldValue});let Se=xe.value||"";const Fe=W.getValue($,{charLimit:this.data.maxLen}).charLimit;Fe&&Se.length>Fe&&(Se=Se.slice(0,Fe));let De=xe.formattedValue||((he=this.data.textContent)==null?void 0:he.join(`
`))||null;De&&this.data.comb&&(De=De.replaceAll(/\s+/g,""));const Te={userValue:Se,formattedValue:De,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(K=document.createElement("textarea"),K.textContent=De??Se,this.data.doNotScroll&&(K.style.overflowY="hidden")):(K=document.createElement("input"),K.type="text",K.setAttribute("value",De??Se),this.data.doNotScroll&&(K.style.overflowX="hidden")),this.data.hasOwnCanvas&&(K.hidden=!0),w.add(K),K.setAttribute("data-element-id",$),K.disabled=this.data.readOnly,K.name=this.data.fieldName,K.tabIndex=v,this._setRequired(K,this.data.required),Fe&&(K.maxLength=Fe),K.addEventListener("input",Le=>{W.setValue($,{value:Le.target.value}),this.setPropertyOnSiblings(K,"value",Le.target.value,"value"),Te.formattedValue=null}),K.addEventListener("resetform",Le=>{const Ne=this.data.defaultFieldValue??"";K.value=Te.userValue=Ne,Te.formattedValue=null});let We=Le=>{const{formattedValue:Ne}=Te;Ne!=null&&(Le.target.value=Ne),Le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){K.addEventListener("focus",Ne=>{if(Te.focused)return;const{target:Be}=Ne;Te.userValue&&(Be.value=Te.userValue),Te.lastCommittedValue=Be.value,Te.commitKey=1,Te.focused=!0}),K.addEventListener("updatefromsandbox",Ne=>{this.showElementAndHideCanvas(Ne.target);const Be={value(Ve){Te.userValue=Ve.detail.value??"",W.setValue($,{value:Te.userValue.toString()}),Ve.target.value=Te.userValue},formattedValue(Ve){const{formattedValue:Ke}=Ve.detail;Te.formattedValue=Ke,Ke!=null&&Ve.target!==document.activeElement&&(Ve.target.value=Ke),W.setValue($,{formattedValue:Ke})},selRange(Ve){Ve.target.setSelectionRange(...Ve.detail.selRange)},charLimit:Ve=>{var Ze;const{charLimit:Ke}=Ve.detail,{target:Je}=Ve;if(Ke===0){Je.removeAttribute("maxLength");return}Je.setAttribute("maxLength",Ke);let tt=Te.userValue;!tt||tt.length<=Ke||(tt=tt.slice(0,Ke),Je.value=Te.userValue=tt,W.setValue($,{value:tt}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:tt,willCommit:!0,commitKey:1,selStart:Je.selectionStart,selEnd:Je.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,Ne)}),K.addEventListener("keydown",Ne=>{var Ke;Te.commitKey=1;let Be=-1;if(Ne.key==="Escape"?Be=0:Ne.key==="Enter"&&!this.data.multiLine?Be=2:Ne.key==="Tab"&&(Te.commitKey=3),Be===-1)return;const{value:Ve}=Ne.target;Te.lastCommittedValue!==Ve&&(Te.lastCommittedValue=Ve,Te.userValue=Ve,(Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Ve,willCommit:!0,commitKey:Be,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}}))});const Le=We;We=null,K.addEventListener("blur",Ne=>{var Ve;if(!Te.focused||!Ne.relatedTarget)return;Te.focused=!1;const{value:Be}=Ne.target;Te.userValue=Be,Te.lastCommittedValue!==Be&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Be,willCommit:!0,commitKey:Te.commitKey,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}})),Le(Ne)}),(pe=this.data.actions)!=null&&pe.Keystroke&&K.addEventListener("beforeinput",Ne=>{var et;Te.lastCommittedValue=null;const{data:Be,target:Ve}=Ne,{value:Ke,selectionStart:Je,selectionEnd:tt}=Ve;let Ze=Je,Ye=tt;switch(Ne.inputType){case"deleteWordBackward":{const rt=Ke.substring(0,Je).match(/\w*[^\w]*$/);rt&&(Ze-=rt[0].length);break}case"deleteWordForward":{const rt=Ke.substring(Je).match(/^[^\w]*\w*/);rt&&(Ye+=rt[0].length);break}case"deleteContentBackward":Je===tt&&(Ze-=1);break;case"deleteContentForward":Je===tt&&(Ye+=1);break}Ne.preventDefault(),(et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Ke,change:Be||"",willCommit:!1,selStart:Ze,selEnd:Ye}})}),this._setEventListeners(K,Te,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ne=>Ne.target.value)}if(We&&K.addEventListener("blur",We),this.data.comb){const Ne=(this.data.rect[2]-this.data.rect[0])/Fe;K.classList.add("comb"),K.style.letterSpacing=`calc(${Ne}px * var(--scale-factor) - 1ch)`}}else K=document.createElement("div"),K.textContent=this.data.fieldValue,K.style.verticalAlign="middle",K.style.display="table-cell";return this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class F extends p{constructor(W){super(W,{isRenderable:!!W.data.hasOwnCanvas})}}class S extends p{constructor(W){super(W,{isRenderable:W.renderForms})}render(){const W=this.annotationStorage,$=this.data,K=$.id;let he=W.getValue(K,{value:$.exportValue===$.fieldValue}).value;typeof he=="string"&&(he=he!=="Off",W.setValue(K,{value:he})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pe=document.createElement("input");return w.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=$.readOnly,this._setRequired(pe,this.data.required),pe.type="checkbox",pe.name=$.fieldName,he&&pe.setAttribute("checked",!0),pe.setAttribute("exportValue",$.exportValue),pe.tabIndex=v,pe.addEventListener("change",xe=>{const{name:Se,checked:Fe}=xe.target;for(const De of this._getElementsByName(Se,K)){const Te=Fe&&De.exportValue===$.exportValue;De.domElement&&(De.domElement.checked=Te),W.setValue(De.id,{value:Te})}W.setValue(K,{value:Fe})}),pe.addEventListener("resetform",xe=>{const Se=$.defaultFieldValue||"Off";xe.target.checked=Se===$.exportValue}),this.enableScripting&&this.hasJSActions&&(pe.addEventListener("updatefromsandbox",xe=>{const Se={value(Fe){Fe.target.checked=Fe.detail.value!=="Off",W.setValue(K,{value:Fe.target.checked})}};this._dispatchEventFromSandbox(Se,xe)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xe=>xe.target.checked)),this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class c extends p{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const W=this.annotationStorage,$=this.data,K=$.id;let he=W.getValue(K,{value:$.fieldValue===$.buttonValue}).value;typeof he=="string"&&(he=he!==$.buttonValue,W.setValue(K,{value:he}));const pe=document.createElement("input");if(w.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=$.readOnly,this._setRequired(pe,this.data.required),pe.type="radio",pe.name=$.fieldName,he&&pe.setAttribute("checked",!0),pe.tabIndex=v,pe.addEventListener("change",xe=>{const{name:Se,checked:Fe}=xe.target;for(const De of this._getElementsByName(Se,K))W.setValue(De.id,{value:!1});W.setValue(K,{value:Fe})}),pe.addEventListener("resetform",xe=>{const Se=$.defaultFieldValue;xe.target.checked=Se!=null&&Se===$.buttonValue}),this.enableScripting&&this.hasJSActions){const xe=$.buttonValue;pe.addEventListener("updatefromsandbox",Se=>{const Fe={value:De=>{const Te=xe===De.detail.value;for(const We of this._getElementsByName(De.target.name)){const Le=Te&&We.id===K;We.domElement&&(We.domElement.checked=Le),W.setValue(We.id,{value:Le})}}};this._dispatchEventFromSandbox(Fe,Se)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)}return this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class g extends C{constructor(W){super(W,{ignoreBorder:W.data.hasAppearance})}render(){const W=super.render();W.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(W.title=this.data.alternativeText);const $=W.lastChild;return this.enableScripting&&this.hasJSActions&&$&&(this._setDefaultPropertiesFromJS($),$.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({},K)})),W}}class a extends p{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const W=this.annotationStorage,$=this.data.id,K=W.getValue($,{value:this.data.fieldValue}),he=document.createElement("select");w.add(he),he.setAttribute("data-element-id",$),he.disabled=this.data.readOnly,this._setRequired(he,this.data.required),he.name=this.data.fieldName,he.tabIndex=v;let pe=this.data.combo&&this.data.options.length>0;this.data.combo||(he.size=this.data.options.length,this.data.multiSelect&&(he.multiple=!0)),he.addEventListener("resetform",Te=>{const We=this.data.defaultFieldValue;for(const Le of he.options)Le.selected=Le.value===We});for(const Te of this.data.options){const We=document.createElement("option");We.textContent=Te.displayValue,We.value=Te.exportValue,K.value.includes(Te.exportValue)&&(We.setAttribute("selected",!0),pe=!1),he.append(We)}let xe=null;if(pe){const Te=document.createElement("option");Te.value=" ",Te.setAttribute("hidden",!0),Te.setAttribute("selected",!0),he.prepend(Te),xe=()=>{Te.remove(),he.removeEventListener("input",xe),xe=null},he.addEventListener("input",xe)}const Se=Te=>{const We=Te?"value":"textContent",{options:Le,multiple:Ne}=he;return Ne?Array.prototype.filter.call(Le,Be=>Be.selected).map(Be=>Be[We]):Le.selectedIndex===-1?null:Le[Le.selectedIndex][We]};let Fe=Se(!1);const De=Te=>{const We=Te.target.options;return Array.prototype.map.call(We,Le=>({displayValue:Le.textContent,exportValue:Le.value}))};return this.enableScripting&&this.hasJSActions?(he.addEventListener("updatefromsandbox",Te=>{const We={value(Le){xe==null||xe();const Ne=Le.detail.value,Be=new Set(Array.isArray(Ne)?Ne:[Ne]);for(const Ve of he.options)Ve.selected=Be.has(Ve.value);W.setValue($,{value:Se(!0)}),Fe=Se(!1)},multipleSelection(Le){he.multiple=!0},remove(Le){const Ne=he.options,Be=Le.detail.remove;Ne[Be].selected=!1,he.remove(Be),Ne.length>0&&Array.prototype.findIndex.call(Ne,Ke=>Ke.selected)===-1&&(Ne[0].selected=!0),W.setValue($,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},clear(Le){for(;he.length!==0;)he.remove(0);W.setValue($,{value:null,items:[]}),Fe=Se(!1)},insert(Le){const{index:Ne,displayValue:Be,exportValue:Ve}=Le.detail.insert,Ke=he.children[Ne],Je=document.createElement("option");Je.textContent=Be,Je.value=Ve,Ke?Ke.before(Je):he.append(Je),W.setValue($,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},items(Le){const{items:Ne}=Le.detail;for(;he.length!==0;)he.remove(0);for(const Be of Ne){const{displayValue:Ve,exportValue:Ke}=Be,Je=document.createElement("option");Je.textContent=Ve,Je.value=Ke,he.append(Je)}he.options.length>0&&(he.options[0].selected=!0),W.setValue($,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},indices(Le){const Ne=new Set(Le.detail.indices);for(const Be of Le.target.options)Be.selected=Ne.has(Be.index);W.setValue($,{value:Se(!0)}),Fe=Se(!1)},editable(Le){Le.target.disabled=!Le.detail.editable}};this._dispatchEventFromSandbox(We,Te)}),he.addEventListener("input",Te=>{var Le;const We=Se(!0);W.setValue($,{value:We}),Te.preventDefault(),(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Fe,changeEx:We,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(he,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Te=>Te.target.value)):he.addEventListener("input",function(Te){W.setValue($,{value:Se(!0)})}),this.data.combo&&this._setTextStyle(he),this._setBackgroundColor(he),this._setDefaultPropertiesFromJS(he),this.container.append(he),this.container}}class f extends b{constructor(W){const{data:$,elements:K}=W;super(W,{isRenderable:b._hasPopupData($)}),this.elements=K}render(){this.container.classList.add("popupAnnotation");const W=new m({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),$=[];for(const K of this.elements)K.popup=W,$.push(K.data.id),K.addHighlightArea();return this.container.setAttribute("aria-controls",$.map(K=>`${n.AnnotationPrefix}${K}`).join(",")),this.container}}class m{constructor({container:W,color:$,elements:K,titleObj:he,modificationDate:pe,contentsObj:xe,richText:Se,parent:Fe,rect:De,parentRect:Te,open:We}){ce(this,Ce);ce(this,ie,null);ce(this,le,ne(this,Ce,Dn).bind(this));ce(this,fe,ne(this,Ce,rn).bind(this));ce(this,ye,ne(this,Ce,sn).bind(this));ce(this,me,ne(this,Ce,wt).bind(this));ce(this,ve,null);ce(this,Z,null);ce(this,ee,null);ce(this,M,null);ce(this,z,null);ce(this,J,null);ce(this,ae,!1);ce(this,ge,null);ce(this,Ae,null);ce(this,_e,null);ce(this,te,null);ce(this,Pe,!1);var Ne;ue(this,Z,W),ue(this,te,he),ue(this,ee,xe),ue(this,_e,Se),ue(this,z,Fe),ue(this,ve,$),ue(this,Ae,De),ue(this,J,Te),ue(this,M,K);const Le=r.PDFDateString.toDateObject(pe);Le&&ue(this,ie,Fe.l10n.get("annotation_date_string",{date:Le.toLocaleDateString(),time:Le.toLocaleTimeString()})),this.trigger=K.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",i(this,me)),Be.addEventListener("mouseenter",i(this,ye)),Be.addEventListener("mouseleave",i(this,fe)),Be.classList.add("popupTriggerArea");for(const Be of K)(Ne=Be.container)==null||Ne.addEventListener("keydown",i(this,le));i(this,Z).hidden=!0,We&&ne(this,Ce,wt).call(this)}render(){if(i(this,ge))return;const{page:{view:W},viewport:{rawDims:{pageWidth:$,pageHeight:K,pageX:he,pageY:pe}}}=i(this,z),xe=ue(this,ge,document.createElement("div"));if(xe.className="popup",i(this,ve)){const Ze=xe.style.outlineColor=n.Util.makeHexColor(...i(this,ve));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?xe.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:xe.style.backgroundColor=n.Util.makeHexColor(...i(this,ve).map(et=>Math.floor(.7*(255-et)+et)))}const Se=document.createElement("span");Se.className="header";const Fe=document.createElement("h1");if(Se.append(Fe),{dir:Fe.dir,str:Fe.textContent}=i(this,te),xe.append(Se),i(this,ie)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),i(this,ie).then(Ye=>{Ze.textContent=Ye}),Se.append(Ze)}const De=i(this,ee),Te=i(this,_e);if(Te!=null&&Te.str&&(!(De!=null&&De.str)||De.str===Te.str))h.XfaLayer.render({xfaHtml:Te.html,intent:"richText",div:xe}),xe.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(De);xe.append(Ze)}let We=!!i(this,J),Le=We?i(this,J):i(this,Ae);for(const Ze of i(this,M))if(!Le||n.Util.intersect(Ze.data.rect,Le)!==null){Le=Ze.data.rect,We=!0;break}const Ne=n.Util.normalizeRect([Le[0],W[3]-Le[1]+W[1],Le[2],W[3]-Le[3]+W[1]]),Ve=We?Le[2]-Le[0]+5:0,Ke=Ne[0]+Ve,Je=Ne[1],{style:tt}=i(this,Z);tt.left=`${100*(Ke-he)/$}%`,tt.top=`${100*(Je-pe)/K}%`,i(this,Z).append(xe)}_formatContents({str:W,dir:$}){const K=document.createElement("p");K.classList.add("popupContent"),K.dir=$;const he=W.split(/(?:\r\n?|\n)/);for(let pe=0,xe=he.length;pe<xe;++pe){const Se=he[pe];K.append(document.createTextNode(Se)),pe<xe-1&&K.append(document.createElement("br"))}return K}forceHide(){ue(this,Pe,this.isVisible),i(this,Pe)&&(i(this,Z).hidden=!0)}maybeShow(){i(this,Pe)&&(ue(this,Pe,!1),i(this,Z).hidden=!1)}get isVisible(){return i(this,Z).hidden===!1}}ie=new WeakMap,le=new WeakMap,fe=new WeakMap,ye=new WeakMap,me=new WeakMap,ve=new WeakMap,Z=new WeakMap,ee=new WeakMap,M=new WeakMap,z=new WeakMap,J=new WeakMap,ae=new WeakMap,ge=new WeakMap,Ae=new WeakMap,_e=new WeakMap,te=new WeakMap,Pe=new WeakMap,Ce=new WeakSet,Dn=function(W){W.altKey||W.shiftKey||W.ctrlKey||W.metaKey||(W.key==="Enter"||W.key==="Escape"&&i(this,ae))&&ne(this,Ce,wt).call(this)},wt=function(){ue(this,ae,!i(this,ae)),i(this,ae)?(ne(this,Ce,sn).call(this),i(this,Z).addEventListener("click",i(this,me)),i(this,Z).addEventListener("keydown",i(this,le))):(ne(this,Ce,rn).call(this),i(this,Z).removeEventListener("click",i(this,me)),i(this,Z).removeEventListener("keydown",i(this,le)))},sn=function(){i(this,ge)||this.render(),this.isVisible?i(this,ae)&&i(this,Z).classList.add("focused"):(i(this,Z).hidden=!1,i(this,Z).style.zIndex=parseInt(i(this,Z).style.zIndex)+1e3)},rn=function(){i(this,Z).classList.remove("focused"),!(i(this,ae)||!this.isVisible)&&(i(this,Z).hidden=!0,i(this,Z).style.zIndex=parseInt(i(this,Z).style.zIndex)-1e3)};class D extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0}),this.textContent=W.data.textContent,this.textPosition=W.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const W=document.createElement("div");W.classList.add("annotationTextContent"),W.setAttribute("role","comment");for(const $ of this.textContent){const K=document.createElement("span");K.textContent=$,W.append(K)}this.container.append(W)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=D;class l extends b{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});ce(this,Oe,null)}render(){this.container.classList.add("lineAnnotation");const $=this.data,{width:K,height:he}=k($.rect),pe=this.svgFactory.create(K,he,!0),xe=ue(this,Oe,this.svgFactory.createElement("svg:line"));return xe.setAttribute("x1",$.rect[2]-$.lineCoordinates[0]),xe.setAttribute("y1",$.rect[3]-$.lineCoordinates[1]),xe.setAttribute("x2",$.rect[2]-$.lineCoordinates[2]),xe.setAttribute("y2",$.rect[3]-$.lineCoordinates[3]),xe.setAttribute("stroke-width",$.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),pe.append(xe),this.container.append(pe),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Oe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oe=new WeakMap;class R extends b{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});ce(this,He,null)}render(){this.container.classList.add("squareAnnotation");const $=this.data,{width:K,height:he}=k($.rect),pe=this.svgFactory.create(K,he,!0),xe=$.borderStyle.width,Se=ue(this,He,this.svgFactory.createElement("svg:rect"));return Se.setAttribute("x",xe/2),Se.setAttribute("y",xe/2),Se.setAttribute("width",K-xe),Se.setAttribute("height",he-xe),Se.setAttribute("stroke-width",xe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,He)}addHighlightArea(){this.container.classList.add("highlightArea")}}He=new WeakMap;class I extends b{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});ce(this,Xe,null)}render(){this.container.classList.add("circleAnnotation");const $=this.data,{width:K,height:he}=k($.rect),pe=this.svgFactory.create(K,he,!0),xe=$.borderStyle.width,Se=ue(this,Xe,this.svgFactory.createElement("svg:ellipse"));return Se.setAttribute("cx",K/2),Se.setAttribute("cy",he/2),Se.setAttribute("rx",K/2-xe/2),Se.setAttribute("ry",he/2-xe/2),Se.setAttribute("stroke-width",xe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class Q extends b{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});ce(this,Ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const $=this.data,{width:K,height:he}=k($.rect),pe=this.svgFactory.create(K,he,!0);let xe=[];for(const Fe of $.vertices){const De=Fe.x-$.rect[0],Te=$.rect[3]-Fe.y;xe.push(De+","+Te)}xe=xe.join(" ");const Se=ue(this,Ee,this.svgFactory.createElement(this.svgElementName));return Se.setAttribute("points",xe),Se.setAttribute("stroke-width",$.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class G extends Q{constructor(W){super(W),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class V extends b{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});ce(this,oe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const $=this.data,{width:K,height:he}=k($.rect),pe=this.svgFactory.create(K,he,!0);for(const xe of $.inkLists){let Se=[];for(const De of xe){const Te=De.x-$.rect[0],We=$.rect[3]-De.y;Se.push(`${Te},${We}`)}Se=Se.join(" ");const Fe=this.svgFactory.createElement(this.svgElementName);i(this,oe).push(Fe),Fe.setAttribute("points",Se),Fe.setAttribute("stroke-width",$.borderStyle.width||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),!$.popupRef&&this.hasPopupData&&this._createPopup(),pe.append(Fe)}return this.container.append(pe),this.container}getElementsToTriggerPopup(){return i(this,oe)}addHighlightArea(){this.container.classList.add("highlightArea")}}oe=new WeakMap,e.InkAnnotationElement=V;class se extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class L extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class X extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class re extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N extends b{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=N;class d extends b{constructor($){var pe;super($,{isRenderable:!0});ce(this,Me);ce(this,de,null);const{filename:K,content:he}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(K,!0),this.content=he,(pe=this.linkService.eventBus)==null||pe.dispatch("fileattachmentannotation",{source:this,filename:K,content:he})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:$,data:K}=this;let he;K.hasAppearance||K.fillAlpha===0?he=document.createElement("div"):(he=document.createElement("img"),he.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(K.name)?"paperclip":"pushpin"}.svg`,K.fillAlpha&&K.fillAlpha<1&&(he.style=`filter: opacity(${Math.round(K.fillAlpha*100)}%);`)),he.addEventListener("dblclick",ne(this,Me,an).bind(this)),ue(this,de,he);const{isMac:pe}=n.FeatureTest.platform;return $.addEventListener("keydown",xe=>{xe.key==="Enter"&&(pe?xe.metaKey:xe.ctrlKey)&&ne(this,Me,an).call(this)}),!K.popupRef&&this.hasPopupData?this._createPopup():he.classList.add("popupTriggerArea"),$.append(he),$}getElementsToTriggerPopup(){return i(this,de)}addHighlightArea(){this.container.classList.add("highlightArea")}}de=new WeakMap,Me=new WeakSet,an=function(){var $;($=this.downloadManager)==null||$.openOrDownloadData(this.container,this.content,this.filename)};class u{constructor({div:W,accessibilityManager:$,annotationCanvasMap:K,l10n:he,page:pe,viewport:xe}){ce(this,we);ce(this,Ge,null);ce(this,H,null);ce(this,be,new Map);this.div=W,ue(this,Ge,$),ue(this,H,K),this.l10n=he,this.page=pe,this.viewport=xe,this.zIndex=0,this.l10n||(this.l10n=O.NullL10n)}async render(W){const{annotations:$}=W,K=this.div;(0,r.setLayerDimensions)(K,this.viewport);const he=new Map,pe={data:null,layer:K,linkService:W.linkService,downloadManager:W.downloadManager,imageResourcesPath:W.imageResourcesPath||"",renderForms:W.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:W.annotationStorage||new A.AnnotationStorage,enableScripting:W.enableScripting===!0,hasJSActions:W.hasJSActions,fieldObjects:W.fieldObjects,parent:this,elements:null};for(const xe of $){if(xe.noHTML)continue;const Se=xe.annotationType===n.AnnotationType.POPUP;if(Se){const Te=he.get(xe.id);if(!Te)continue;pe.elements=Te}else{const{width:Te,height:We}=k(xe.rect);if(Te<=0||We<=0)continue}pe.data=xe;const Fe=y.create(pe);if(!Fe.isRenderable)continue;if(!Se&&xe.popupRef){const Te=he.get(xe.popupRef);Te?Te.push(Fe):he.set(xe.popupRef,[Fe])}Fe.annotationEditorType>0&&i(this,be).set(Fe.data.id,Fe);const De=Fe.render();xe.hidden&&(De.style.visibility="hidden"),ne(this,we,Ln).call(this,De,xe.id)}ne(this,we,on).call(this),await this.l10n.translate(K)}update({viewport:W}){const $=this.div;this.viewport=W,(0,r.setLayerDimensions)($,{rotation:W.rotation}),ne(this,we,on).call(this),$.hidden=!1}getEditableAnnotations(){return Array.from(i(this,be).values())}getEditableAnnotation(W){return i(this,be).get(W)}}Ge=new WeakMap,H=new WeakMap,be=new WeakMap,we=new WeakSet,Ln=function(W,$){var he;const K=W.firstChild||W;K.id=`${n.AnnotationPrefix}${$}`,this.div.append(W),(he=i(this,Ge))==null||he.moveElementInDOM(this.div,W,K,!1)},on=function(){if(!i(this,H))return;const W=this.div;for(const[$,K]of i(this,H)){const he=W.querySelector(`[data-annotation-id="${$}"]`);if(!he)continue;const{firstChild:pe}=he;pe?pe.nodeName==="CANVAS"?pe.replaceWith(K):pe.before(K):he.append(K)}i(this,H).clear()},e.AnnotationLayer=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(A){return Math.floor(Math.max(0,Math.min(1,A))*255).toString(16).padStart(2,"0")}function n(A){return Math.max(0,Math.min(255,255*A))}class r{static CMYK_G([P,O,h,v]){return["G",1-Math.min(1,.3*P+.59*h+.11*O+v)]}static G_CMYK([P]){return["CMYK",0,0,0,1-P]}static G_RGB([P]){return["RGB",P,P,P]}static G_rgb([P]){return P=n(P),[P,P,P]}static G_HTML([P]){const O=s(P);return`#${O}${O}${O}`}static RGB_G([P,O,h]){return["G",.3*P+.59*O+.11*h]}static RGB_rgb(P){return P.map(n)}static RGB_HTML(P){return`#${P.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([P,O,h,v]){return["RGB",1-Math.min(1,P+v),1-Math.min(1,h+v),1-Math.min(1,O+v)]}static CMYK_rgb([P,O,h,v]){return[n(1-Math.min(1,P+v)),n(1-Math.min(1,h+v)),n(1-Math.min(1,O+v))]}static CMYK_HTML(P){const O=this.CMYK_RGB(P).slice(1);return this.RGB_HTML(O)}static RGB_CMYK([P,O,h]){const v=1-P,o=1-O,w=1-h,k=Math.min(v,o,w);return["CMYK",v,o,w,k]}}e.ColorConverters=r},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(P,O){switch(P){case"find_match_count":P=`find_match_count[${O.total===1?"one":"other"}]`;break;case"find_match_count_limit":P=`find_match_count_limit[${O.limit===1?"one":"other"}]`;break}return s[P]||""}function r(P,O){return O?P.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,v)=>v in O?O[v]:"{{"+v+"}}"):P}const A={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(P,O=null,h=n(P,O)){return r(h,O)},async translate(P){}};e.NullL10n=A},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class r{static setupStorage(P,O,h,v,o){const w=v.getValue(O,{value:null});switch(h.name){case"textarea":if(w.value!==null&&(P.textContent=w.value),o==="print")break;P.addEventListener("input",k=>{v.setValue(O,{value:k.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(w.value===h.attributes.xfaOn?P.setAttribute("checked",!0):w.value===h.attributes.xfaOff&&P.removeAttribute("checked"),o==="print")break;P.addEventListener("change",k=>{v.setValue(O,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&P.setAttribute("value",w.value),o==="print")break;P.addEventListener("input",k=>{v.setValue(O,{value:k.target.value})})}break;case"select":if(w.value!==null){P.setAttribute("value",w.value);for(const k of h.children)k.attributes.value===w.value?k.attributes.selected=!0:k.attributes.hasOwnProperty("selected")&&delete k.attributes.selected}P.addEventListener("input",k=>{const y=k.target.options,b=y.selectedIndex===-1?"":y[y.selectedIndex].value;v.setValue(O,{value:b})});break}}static setAttributes({html:P,element:O,storage:h=null,intent:v,linkService:o}){const{attributes:w}=O,k=P instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${v}`);for(const[y,b]of Object.entries(w))if(b!=null)switch(y){case"class":b.length&&P.setAttribute(y,b.join(" "));break;case"dataId":break;case"id":P.setAttribute("data-element-id",b);break;case"style":Object.assign(P.style,b);break;case"textContent":P.textContent=b;break;default:(!k||y!=="href"&&y!=="newWindow")&&P.setAttribute(y,b)}k&&o.addLinkAttributes(P,w.href,w.newWindow),h&&w.dataId&&this.setupStorage(P,w.dataId,O,h)}static render(P){var C;const O=P.annotationStorage,h=P.linkService,v=P.xfaHtml,o=P.intent||"display",w=document.createElement(v.name);v.attributes&&this.setAttributes({html:w,element:v,intent:o,linkService:h});const k=[[v,-1,w]],y=P.div;if(y.append(w),P.viewport){const x=`matrix(${P.viewport.transform.join(",")})`;y.style.transform=x}o!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const b=[];for(;k.length>0;){const[x,p,E]=k.at(-1);if(p+1===x.children.length){k.pop();continue}const F=x.children[++k.at(-1)[1]];if(F===null)continue;const{name:S}=F;if(S==="#text"){const g=document.createTextNode(F.value);b.push(g),E.append(g);continue}const c=(C=F==null?void 0:F.attributes)!=null&&C.xmlns?document.createElementNS(F.attributes.xmlns,S):document.createElement(S);if(E.append(c),F.attributes&&this.setAttributes({html:c,element:F,storage:O,intent:o,linkService:h}),F.children&&F.children.length>0)k.push([F,-1,c]);else if(F.value){const g=document.createTextNode(F.value);n.XfaText.shouldBuildText(S)&&b.push(g),c.append(g)}}for(const x of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:b}}static update(P){const O=`matrix(${P.viewport.transform.join(",")})`;P.div.style.transform=O,P.div.hidden=!1}}e.XfaLayer=r},(t,e,s)=>{var v,o,w,k,y,b,C,x,p,E,F,S,c,g,a,In,Nn,$n,jn,ln,Bn,cn,Un,Wn,zn,Hn,Vn,st,dn,Tt,Rt,ct,un,kt,U,Gn,hn,qn,Xn,pn,Mt,dt;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),r=s(4),A=s(29),P=s(6),O=s(5);const ve=class ve extends r.AnnotationEditor{constructor(M){super({...M,name:"inkEditor"});ce(this,a);ce(this,v,0);ce(this,o,0);ce(this,w,this.canvasPointermove.bind(this));ce(this,k,this.canvasPointerleave.bind(this));ce(this,y,this.canvasPointerup.bind(this));ce(this,b,this.canvasPointerdown.bind(this));ce(this,C,new Path2D);ce(this,x,!1);ce(this,p,!1);ce(this,E,!1);ce(this,F,null);ce(this,S,0);ce(this,c,0);ce(this,g,null);this.color=M.color||null,this.thickness=M.thickness||null,this.opacity=M.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(M){r.AnnotationEditor.initialize(M,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(M,z){switch(M){case n.AnnotationEditorParamsType.INK_THICKNESS:ve._defaultThickness=z;break;case n.AnnotationEditorParamsType.INK_COLOR:ve._defaultColor=z;break;case n.AnnotationEditorParamsType.INK_OPACITY:ve._defaultOpacity=z/100;break}}updateParams(M,z){switch(M){case n.AnnotationEditorParamsType.INK_THICKNESS:ne(this,a,In).call(this,z);break;case n.AnnotationEditorParamsType.INK_COLOR:ne(this,a,Nn).call(this,z);break;case n.AnnotationEditorParamsType.INK_OPACITY:ne(this,a,$n).call(this,z);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ve._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ve._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ve._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ve._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ve._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ve._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ne(this,a,Tt).call(this),ne(this,a,Rt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ne(this,a,ct).call(this)),ne(this,a,dt).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,i(this,F).disconnect(),ue(this,F,null),super.remove())}setParent(M){!this.parent&&M?this._uiManager.removeShouldRescale(this):this.parent&&M===null&&this._uiManager.addShouldRescale(this),super.setParent(M)}onScaleChanging(){const[M,z]=this.parentDimensions,J=this.width*M,ae=this.height*z;this.setDimensions(J,ae)}enableEditMode(){i(this,x)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",i(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",i(this,b)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){i(this,x)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ue(this,x,!0),this.div.classList.add("disabled"),ne(this,a,dt).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(M){this._focusEventsAllowed&&(super.focusin(M),this.enableEditMode())}canvasPointerdown(M){M.button!==0||!this.isInEditMode()||i(this,x)||(this.setInForeground(),M.preventDefault(),M.type!=="mouse"&&this.div.focus(),ne(this,a,Bn).call(this,M.offsetX,M.offsetY))}canvasPointermove(M){M.preventDefault(),ne(this,a,cn).call(this,M.offsetX,M.offsetY)}canvasPointerup(M){M.preventDefault(),ne(this,a,dn).call(this,M)}canvasPointerleave(M){ne(this,a,dn).call(this,M)}get isResizable(){return!this.isEmpty()&&i(this,x)}render(){if(this.div)return this.div;let M,z;this.width&&(M=this.x,z=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(_e=>{var te;return(te=this.div)==null?void 0:te.setAttribute("aria-label",_e)});const[J,ae,ge,Ae]=ne(this,a,jn).call(this);if(this.setAt(J,ae,0,0),this.setDims(ge,Ae),ne(this,a,Tt).call(this),this.width){const[_e,te]=this.parentDimensions;this.setAspectRatio(this.width*_e,this.height*te),this.setAt(M*_e,z*te,this.width*_e,this.height*te),ue(this,E,!0),ne(this,a,ct).call(this),this.setDims(this.width*_e,this.height*te),ne(this,a,st).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ne(this,a,Rt).call(this),this.div}setDimensions(M,z){const J=Math.round(M),ae=Math.round(z);if(i(this,S)===J&&i(this,c)===ae)return;ue(this,S,J),ue(this,c,ae),this.canvas.style.visibility="hidden";const[ge,Ae]=this.parentDimensions;this.width=M/ge,this.height=z/Ae,this.fixAndSetPosition(),i(this,x)&&ne(this,a,un).call(this,M,z),ne(this,a,ct).call(this),ne(this,a,st).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(M,z,J){var Oe,He,Xe;if(M instanceof A.InkAnnotationElement)return null;const ae=super.deserialize(M,z,J);ae.thickness=M.thickness,ae.color=n.Util.makeHexColor(...M.color),ae.opacity=M.opacity;const[ge,Ae]=ae.pageDimensions,_e=ae.width*ge,te=ae.height*Ae,Pe=ae.parentScale,Ce=M.thickness/2;ue(ae,x,!0),ue(ae,S,Math.round(_e)),ue(ae,c,Math.round(te));const{paths:Ue,rect:je,rotation:ze}=M;for(let{bezier:Ee}of Ue){Ee=ne(Oe=ve,U,qn).call(Oe,Ee,je,ze);const oe=[];ae.paths.push(oe);let de=Pe*(Ee[0]-Ce),Me=Pe*(Ee[1]-Ce);for(let Ge=2,H=Ee.length;Ge<H;Ge+=6){const be=Pe*(Ee[Ge]-Ce),we=Pe*(Ee[Ge+1]-Ce),Ie=Pe*(Ee[Ge+2]-Ce),$e=Pe*(Ee[Ge+3]-Ce),Re=Pe*(Ee[Ge+4]-Ce),W=Pe*(Ee[Ge+5]-Ce);oe.push([[de,Me],[be,we],[Ie,$e],[Re,W]]),de=Re,Me=W}const qe=ne(this,U,Gn).call(this,oe);ae.bezierPath2D.push(qe)}const ke=ne(He=ae,a,pn).call(He);return ue(ae,o,Math.max(r.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),ue(ae,v,Math.max(r.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),ne(Xe=ae,a,un).call(Xe,_e,te),ae}serialize(){if(this.isEmpty())return null;const M=this.getRect(0,0),z=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:z,thickness:this.thickness,opacity:this.opacity,paths:ne(this,a,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,M),pageIndex:this.pageIndex,rect:M,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};v=new WeakMap,o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakMap,c=new WeakMap,g=new WeakMap,a=new WeakSet,In=function(M){const z=this.thickness;this.addCommands({cmd:()=>{this.thickness=M,ne(this,a,dt).call(this)},undo:()=>{this.thickness=z,ne(this,a,dt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(M){const z=this.color;this.addCommands({cmd:()=>{this.color=M,ne(this,a,st).call(this)},undo:()=>{this.color=z,ne(this,a,st).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$n=function(M){M/=100;const z=this.opacity;this.addCommands({cmd:()=>{this.opacity=M,ne(this,a,st).call(this)},undo:()=>{this.opacity=z,ne(this,a,st).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},jn=function(){const{parentRotation:M,parentDimensions:[z,J]}=this;switch(M){case 90:return[0,J,J,z];case 180:return[z,J,z,J];case 270:return[z,0,J,z];default:return[0,0,z,J]}},ln=function(){const{ctx:M,color:z,opacity:J,thickness:ae,parentScale:ge,scaleFactor:Ae}=this;M.lineWidth=ae*ge/Ae,M.lineCap="round",M.lineJoin="round",M.miterLimit=10,M.strokeStyle=`${z}${(0,O.opacityToHex)(J)}`},Bn=function(M,z){this.canvas.addEventListener("contextmenu",P.noContextMenu),this.canvas.addEventListener("pointerleave",i(this,k)),this.canvas.addEventListener("pointermove",i(this,w)),this.canvas.addEventListener("pointerup",i(this,y)),this.canvas.removeEventListener("pointerdown",i(this,b)),this.isEditing=!0,i(this,E)||(ue(this,E,!0),ne(this,a,ct).call(this),this.thickness||(this.thickness=ve._defaultThickness),this.color||(this.color=ve._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ve._defaultOpacity)),this.currentPath.push([M,z]),ue(this,p,!1),ne(this,a,ln).call(this),ue(this,g,()=>{ne(this,a,zn).call(this),i(this,g)&&window.requestAnimationFrame(i(this,g))}),window.requestAnimationFrame(i(this,g))},cn=function(M,z){const[J,ae]=this.currentPath.at(-1);if(this.currentPath.length>1&&M===J&&z===ae)return;const ge=this.currentPath;let Ae=i(this,C);if(ge.push([M,z]),ue(this,p,!0),ge.length<=2){Ae.moveTo(...ge[0]),Ae.lineTo(M,z);return}ge.length===3&&(ue(this,C,Ae=new Path2D),Ae.moveTo(...ge[0])),ne(this,a,Hn).call(this,Ae,...ge.at(-3),...ge.at(-2),M,z)},Un=function(){if(this.currentPath.length===0)return;const M=this.currentPath.at(-1);i(this,C).lineTo(...M)},Wn=function(M,z){ue(this,g,null),M=Math.min(Math.max(M,0),this.canvas.width),z=Math.min(Math.max(z,0),this.canvas.height),ne(this,a,cn).call(this,M,z),ne(this,a,Un).call(this);let J;if(this.currentPath.length!==1)J=ne(this,a,Vn).call(this);else{const te=[M,z];J=[[te,te.slice(),te.slice(),te]]}const ae=i(this,C),ge=this.currentPath;this.currentPath=[],ue(this,C,new Path2D);const Ae=()=>{this.allRawPaths.push(ge),this.paths.push(J),this.bezierPath2D.push(ae),this.rebuild()},_e=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ne(this,a,Tt).call(this),ne(this,a,Rt).call(this)),ne(this,a,dt).call(this))};this.addCommands({cmd:Ae,undo:_e,mustExec:!0})},zn=function(){if(!i(this,p))return;ue(this,p,!1);const M=Math.ceil(this.thickness*this.parentScale),z=this.currentPath.slice(-3),J=z.map(Ae=>Ae[0]),ae=z.map(Ae=>Ae[1]);Math.min(...J)-M,Math.max(...J)+M,Math.min(...ae)-M,Math.max(...ae)+M;const{ctx:ge}=this;ge.save(),ge.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ae of this.bezierPath2D)ge.stroke(Ae);ge.stroke(i(this,C)),ge.restore()},Hn=function(M,z,J,ae,ge,Ae,_e){const te=(z+ae)/2,Pe=(J+ge)/2,Ce=(ae+Ae)/2,Ue=(ge+_e)/2;M.bezierCurveTo(te+2*(ae-te)/3,Pe+2*(ge-Pe)/3,Ce+2*(ae-Ce)/3,Ue+2*(ge-Ue)/3,Ce,Ue)},Vn=function(){const M=this.currentPath;if(M.length<=2)return[[M[0],M[0],M.at(-1),M.at(-1)]];const z=[];let J,[ae,ge]=M[0];for(J=1;J<M.length-2;J++){const[je,ze]=M[J],[ke,Oe]=M[J+1],He=(je+ke)/2,Xe=(ze+Oe)/2,Ee=[ae+2*(je-ae)/3,ge+2*(ze-ge)/3],oe=[He+2*(je-He)/3,Xe+2*(ze-Xe)/3];z.push([[ae,ge],Ee,oe,[He,Xe]]),[ae,ge]=[He,Xe]}const[Ae,_e]=M[J],[te,Pe]=M[J+1],Ce=[ae+2*(Ae-ae)/3,ge+2*(_e-ge)/3],Ue=[te+2*(Ae-te)/3,Pe+2*(_e-Pe)/3];return z.push([[ae,ge],Ce,Ue,[te,Pe]]),z},st=function(){if(this.isEmpty()){ne(this,a,kt).call(this);return}ne(this,a,ln).call(this);const{canvas:M,ctx:z}=this;z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,M.width,M.height),ne(this,a,kt).call(this);for(const J of this.bezierPath2D)z.stroke(J)},dn=function(M){this.canvas.removeEventListener("pointerleave",i(this,k)),this.canvas.removeEventListener("pointermove",i(this,w)),this.canvas.removeEventListener("pointerup",i(this,y)),this.canvas.addEventListener("pointerdown",i(this,b)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",P.noContextMenu)},10),ne(this,a,Wn).call(this,M.offsetX,M.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Tt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(M=>{var z;return(z=this.canvas)==null?void 0:z.setAttribute("aria-label",M)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Rt=function(){ue(this,F,new ResizeObserver(M=>{const z=M[0].contentRect;z.width&&z.height&&this.setDimensions(z.width,z.height)})),i(this,F).observe(this.div)},ct=function(){if(!i(this,E))return;const[M,z]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*M),this.canvas.height=Math.ceil(this.height*z),ne(this,a,kt).call(this)},un=function(M,z){const J=ne(this,a,Mt).call(this),ae=(M-J)/i(this,o),ge=(z-J)/i(this,v);this.scaleFactor=Math.min(ae,ge)},kt=function(){const M=ne(this,a,Mt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+M,this.translationY*this.scaleFactor+M)},U=new WeakSet,Gn=function(M){const z=new Path2D;for(let J=0,ae=M.length;J<ae;J++){const[ge,Ae,_e,te]=M[J];J===0&&z.moveTo(...ge),z.bezierCurveTo(Ae[0],Ae[1],_e[0],_e[1],te[0],te[1])}return z},hn=function(M,z,J){const[ae,ge,Ae,_e]=z;switch(J){case 0:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]+=ae,M[te+1]=_e-M[te+1];break;case 90:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=M[te+1]+ae,M[te+1]=Ce+ge}break;case 180:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]=Ae-M[te],M[te+1]+=ge;break;case 270:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=Ae-M[te+1],M[te+1]=_e-Ce}break;default:throw new Error("Invalid rotation")}return M},qn=function(M,z,J){const[ae,ge,Ae,_e]=z;switch(J){case 0:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]-=ae,M[te+1]=_e-M[te+1];break;case 90:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=M[te+1]-ge,M[te+1]=Ce-ae}break;case 180:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]=Ae-M[te],M[te+1]-=ge;break;case 270:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=_e-M[te+1],M[te+1]=Ae-Ce}break;default:throw new Error("Invalid rotation")}return M},Xn=function(M,z,J,ae){var Pe,Ce;const ge=[],Ae=this.thickness/2,_e=M*z+Ae,te=M*J+Ae;for(const Ue of this.paths){const je=[],ze=[];for(let ke=0,Oe=Ue.length;ke<Oe;ke++){const[He,Xe,Ee,oe]=Ue[ke],de=M*He[0]+_e,Me=M*He[1]+te,qe=M*Xe[0]+_e,Ge=M*Xe[1]+te,H=M*Ee[0]+_e,be=M*Ee[1]+te,we=M*oe[0]+_e,Ie=M*oe[1]+te;ke===0&&(je.push(de,Me),ze.push(de,Me)),je.push(qe,Ge,H,be,we,Ie),ze.push(qe,Ge),ke===Oe-1&&ze.push(we,Ie)}ge.push({bezier:ne(Pe=ve,U,hn).call(Pe,je,ae,this.rotation),points:ne(Ce=ve,U,hn).call(Ce,ze,ae,this.rotation)})}return ge},pn=function(){let M=1/0,z=-1/0,J=1/0,ae=-1/0;for(const ge of this.paths)for(const[Ae,_e,te,Pe]of ge){const Ce=n.Util.bezierBoundingBox(...Ae,..._e,...te,...Pe);M=Math.min(M,Ce[0]),J=Math.min(J,Ce[1]),z=Math.max(z,Ce[2]),ae=Math.max(ae,Ce[3])}return[M,J,z,ae]},Mt=function(){return i(this,x)?Math.ceil(this.thickness*this.parentScale):0},dt=function(M=!1){if(this.isEmpty())return;if(!i(this,x)){ne(this,a,st).call(this);return}const z=ne(this,a,pn).call(this),J=ne(this,a,Mt).call(this);ue(this,o,Math.max(r.AnnotationEditor.MIN_SIZE,z[2]-z[0])),ue(this,v,Math.max(r.AnnotationEditor.MIN_SIZE,z[3]-z[1]));const ae=Math.ceil(J+i(this,o)*this.scaleFactor),ge=Math.ceil(J+i(this,v)*this.scaleFactor),[Ae,_e]=this.parentDimensions;this.width=ae/Ae,this.height=ge/_e,this.setAspectRatio(ae,ge);const te=this.translationX,Pe=this.translationY;this.translationX=-z[0],this.translationY=-z[1],ne(this,a,ct).call(this),ne(this,a,st).call(this),ue(this,S,ae),ue(this,c,ge),this.setDims(ae,ge);const Ce=M?J/this.scaleFactor/2:0;this.translate(te-this.translationX-Ce,Pe-this.translationY-Ce)},ce(ve,U),Qe(ve,"_defaultColor",null),Qe(ve,"_defaultOpacity",1),Qe(ve,"_defaultThickness",1),Qe(ve,"_type","ink");let h=ve;e.InkEditor=h},(t,e,s)=>{var h,v,o,w,k,y,b,C,x,p,E,vt,bt,Ft,fn,Yn,Kn,gn,Ot,Jn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),r=s(4),A=s(6),P=s(29);const R=class R extends r.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});ce(this,E);ce(this,h,null);ce(this,v,null);ce(this,o,null);ce(this,w,null);ce(this,k,null);ce(this,y,null);ce(this,b,null);ce(this,C,null);ce(this,x,!1);ce(this,p,!1);ue(this,w,G.bitmapUrl),ue(this,k,G.bitmapFile)}static initialize(G){r.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",G.map(q=>`image/${q}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,q){q.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,q;i(this,v)&&(ue(this,h,null),this._uiManager.imageManager.deleteId(i(this,v)),(G=i(this,y))==null||G.remove(),ue(this,y,null),(q=i(this,b))==null||q.disconnect(),ue(this,b,null)),super.remove()}rebuild(){if(!this.parent){i(this,v)&&ne(this,E,Ft).call(this);return}super.rebuild(),this.div!==null&&(i(this,v)&&ne(this,E,Ft).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(i(this,o)||i(this,h)||i(this,w)||i(this,k))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,q;if(this.width&&(G=this.x,q=this.y),super.render(),this.div.hidden=!0,i(this,h)?ne(this,E,fn).call(this):ne(this,E,Ft).call(this),this.width){const[V,se]=this.parentDimensions;this.setAt(G*V,q*se,this.width*V,this.height*se)}return this.div}static deserialize(G,q,V){if(G instanceof P.StampAnnotationElement)return null;const se=super.deserialize(G,q,V),{rect:L,bitmapUrl:X,bitmapId:re,isSvg:N,accessibilityData:d}=G;re&&V.imageManager.isValidId(re)?ue(se,v,re):ue(se,w,X),ue(se,x,N);const[u,T]=se.pageDimensions;return se.width=(L[2]-L[0])/u,se.height=(L[3]-L[1])/T,d&&(se.altTextData=d),se}serialize(G=!1,q=null){if(this.isEmpty())return null;const V={annotationType:n.AnnotationEditorType.STAMP,bitmapId:i(this,v),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:i(this,x),structTreeParentId:this._structTreeParentId};if(G)return V.bitmapUrl=ne(this,E,Ot).call(this,!0),V.accessibilityData=this.altTextData,V;const{decorative:se,altText:L}=this.altTextData;if(!se&&L&&(V.accessibilityData={type:"Figure",alt:L}),q===null)return V;q.stamps||(q.stamps=new Map);const X=i(this,x)?(V.rect[2]-V.rect[0])*(V.rect[3]-V.rect[1]):null;if(!q.stamps.has(i(this,v)))q.stamps.set(i(this,v),{area:X,serialized:V}),V.bitmap=ne(this,E,Ot).call(this,!1);else if(i(this,x)){const re=q.stamps.get(i(this,v));X>re.area&&(re.area=X,re.serialized.bitmap.close(),re.serialized.bitmap=ne(this,E,Ot).call(this,!1))}return V}};h=new WeakMap,v=new WeakMap,o=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,p=new WeakMap,E=new WeakSet,vt=function(G,q=!1){if(!G){this.remove();return}ue(this,h,G.bitmap),q||(ue(this,v,G.id),ue(this,x,G.isSvg)),ne(this,E,fn).call(this)},bt=function(){ue(this,o,null),this._uiManager.enableWaiting(!1),i(this,y)&&this.div.focus()},Ft=function(){if(i(this,v)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(i(this,v)).then(q=>ne(this,E,vt).call(this,q,!0)).finally(()=>ne(this,E,bt).call(this));return}if(i(this,w)){const q=i(this,w);ue(this,w,null),this._uiManager.enableWaiting(!0),ue(this,o,this._uiManager.imageManager.getFromUrl(q).then(V=>ne(this,E,vt).call(this,V)).finally(()=>ne(this,E,bt).call(this)));return}if(i(this,k)){const q=i(this,k);ue(this,k,null),this._uiManager.enableWaiting(!0),ue(this,o,this._uiManager.imageManager.getFromFile(q).then(V=>ne(this,E,vt).call(this,V)).finally(()=>ne(this,E,bt).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=R.supportedTypesStr,ue(this,o,new Promise(q=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const V=await this._uiManager.imageManager.getFromFile(G.files[0]);ne(this,E,vt).call(this,V)}q()}),G.addEventListener("cancel",()=>{this.remove(),q()})}).finally(()=>ne(this,E,bt).call(this))),G.click()},fn=function(){const{div:G}=this;let{width:q,height:V}=i(this,h);const[se,L]=this.pageDimensions,X=.75;if(this.width)q=this.width*se,V=this.height*L;else if(q>X*se||V>X*L){const u=Math.min(X*se/q,X*L/V);q*=u,V*=u}const[re,N]=this.parentDimensions;this.setDims(q*re/se,V*N/L),this._uiManager.enableWaiting(!1);const d=ue(this,y,document.createElement("canvas"));G.append(d),G.hidden=!1,ne(this,E,gn).call(this,q,V),ne(this,E,Jn).call(this),i(this,p)||(this.parent.addUndoableEditor(this),ue(this,p,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Yn=function(G,q){var X;const[V,se]=this.parentDimensions;this.width=G/V,this.height=q/se,this.setDims(G,q),(X=this._initialOptions)!=null&&X.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,i(this,C)!==null&&clearTimeout(i(this,C)),ue(this,C,setTimeout(()=>{ue(this,C,null),ne(this,E,gn).call(this,G,q)},200))},Kn=function(G,q){const{width:V,height:se}=i(this,h);let L=V,X=se,re=i(this,h);for(;L>2*G||X>2*q;){const N=L,d=X;L>2*G&&(L=L>=16384?Math.floor(L/2)-1:Math.ceil(L/2)),X>2*q&&(X=X>=16384?Math.floor(X/2)-1:Math.ceil(X/2));const u=new OffscreenCanvas(L,X);u.getContext("2d").drawImage(re,0,0,N,d,0,0,L,X),re=u.transferToImageBitmap()}return re},gn=function(G,q){G=Math.ceil(G),q=Math.ceil(q);const V=i(this,y);if(!V||V.width===G&&V.height===q)return;V.width=G,V.height=q;const se=i(this,x)?i(this,h):ne(this,E,Kn).call(this,G,q),L=V.getContext("2d");L.filter=this._uiManager.hcmFilter,L.drawImage(se,0,0,se.width,se.height,0,0,G,q)},Ot=function(G){if(G){if(i(this,x)){const se=this._uiManager.imageManager.getSvgUrl(i(this,v));if(se)return se}const q=document.createElement("canvas");return{width:q.width,height:q.height}=i(this,h),q.getContext("2d").drawImage(i(this,h),0,0),q.toDataURL()}if(i(this,x)){const[q,V]=this.pageDimensions,se=Math.round(this.width*q*A.PixelsPerInch.PDF_TO_CSS_UNITS),L=Math.round(this.height*V*A.PixelsPerInch.PDF_TO_CSS_UNITS),X=new OffscreenCanvas(se,L);return X.getContext("2d").drawImage(i(this,h),0,0,i(this,h).width,i(this,h).height,0,0,se,L),X.transferToImageBitmap()}return structuredClone(i(this,h))},Jn=function(){ue(this,b,new ResizeObserver(G=>{const q=G[0].contentRect;q.width&&q.height&&ne(this,E,Yn).call(this,q.width,q.height)})),i(this,b).observe(this.div)},Qe(R,"_type","stamp");let O=R;e.StampEditor=O}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return A.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return P.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),A=__w_pdfjs_require__(27),P=__w_pdfjs_require__(5),O=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),v=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(t,e,s){if(s||arguments.length===2)for(var n=0,r=e.length,A;n<r;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(t,e){var s={};return allEvents.forEach(function(n){var r=t[n];r&&(e?s[n]=function(A){return r(A,e(n))}:s[n]=r)}),s}function makeCancellablePromise(t){var e=!1,s=new Promise(function(n,r){t.then(function(A){return!e&&n(A)}).catch(function(A){return!e&&r(A)})});return{promise:s,cancel:function(){e=!0}}}var prefix="Invariant failed";function invariant(t,e){if(!t)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(t,e,s){for(s of t.keys())if(dequal(s,e))return s}function dequal(t,e){var s,n,r;if(t===e)return!0;if(t&&e&&(s=t.constructor)===e.constructor){if(s===Date)return t.getTime()===e.getTime();if(s===RegExp)return t.toString()===e.toString();if(s===Array){if((n=t.length)===e.length)for(;n--&&dequal(t[n],e[n]););return n===-1}if(s===Set){if(t.size!==e.size)return!1;for(n of t)if(r=n,r&&typeof r=="object"&&(r=find(e,r),!r)||!e.has(r))return!1;return!0}if(s===Map){if(t.size!==e.size)return!1;for(n of t)if(r=n[0],r&&typeof r=="object"&&(r=find(e,r),!r)||!dequal(n[1],e.get(r)))return!1;return!0}if(s===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(s===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!s||typeof t=="object"){n=0;for(s in t)if(has.call(t,s)&&++n&&!has.call(e,s)||!(s in e)||!dequal(t[s],e[s]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:t,type:e}){return React$1.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},t)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(s=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(s):Array.isArray(e)?s(e):e.then(s)}).then(s=>{invariant(Array.isArray(s));const n=s[0];new Promise(r=>{invariant(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(A=>{r(A)}).catch(()=>{invariant(!1)}):typeof n=="number"?r(n):invariant(!1)}).then(r=>{const A=r+1;invariant(this.pdfViewer),invariant(A>=1&&A<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:r,pageNumber:A})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const s=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:e})}addLinkAttributes(e,s,n){e.href=s,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(t){return typeof t<"u"}function isProvided(t){return isDefined(t)&&t!==null}function isString(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant(isBrowser),t instanceof Blob}function isDataURI(t){return isString(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant(isDataURI(t));const[e="",s=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t&&t.cancel&&t.cancel()}function makePageCallback(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return s(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return s(new Error("Error while reading a file."));const{error:A}=r.target;if(!A)return s(new Error("Error while reading a file."));switch(A.code){case A.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case A.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case A.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},n.readAsArrayBuffer(t)})}function reducer(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const t={};return allEvents.forEach(e=>{t[e]=PropTypes.func}),t})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function t(e,s,n){const{[s]:r,pageNumber:A,pdf:P}=e;if(!isDefined(P))return null;if(isDefined(r)){if(typeof r!="number")return new Error(`\`${s}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<0)return new Error(`Expected \`${s}\` to be greater or equal to 0.`);const{numPages:O}=P;if(r+1>O)return new Error(`Expected \`${s}\` to be less or equal to ${O-1}.`)}else if(!isDefined(A))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function t(e,s,n){const{[s]:r,pageIndex:A,pdf:P}=e;if(!isDefined(P))return null;if(isDefined(r)){if(typeof r!="number")return new Error(`\`${s}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<1)return new Error(`Expected \`${s}\` to be greater or equal to 1.`);const{numPages:O}=P;if(r>O)return new Error(`Expected \`${s}\` to be less or equal to ${O}.`)}else if(!isDefined(A))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(t,e,s,n){function r(A){return A instanceof s?A:new s(function(P){P(A)})}return new(s||(s=Promise))(function(A,P){function O(o){try{v(n.next(o))}catch(w){P(w)}}function h(o){try{v(n.throw(o))}catch(w){P(w)}}function v(o){o.done?A(o.value):r(o.value).then(O,h)}v((n=n.apply(t,e||[])).next())})},__rest$1=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(t,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");t(s);break}case PasswordResponses.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");t(s);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t(e,s){var{children:n,className:r,error:A="Failed to load PDF file.",externalLinkRel:P,externalLinkTarget:O,file:h,inputRef:v,imageResourcesPath:o,loading:w="Loading PDF",noData:k="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:C,onLoadSuccess:x,onPassword:p=defaultOnPassword,onSourceError:E,onSourceSuccess:F,options:S,renderMode:c,rotate:g}=e,a=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[f,m]=useResolver(),{value:D,error:l}=f,[R,I]=useResolver(),{value:Q,error:G}=R,q=reactExports.useRef(new LinkService),V=reactExports.useRef([]),se=reactExports.useRef(),L=reactExports.useRef();reactExports.useEffect(()=>{h&&h!==se.current&&isParameterObject(h)&&(warning$1(!dequal(h,se.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),se.current=h)},[h]),reactExports.useEffect(()=>{S&&S!==L.current&&(warning$1(!dequal(S,L.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),L.current=S)},[S]);const X=reactExports.useRef({scrollPageIntoView:Z=>{const{dest:ee,pageNumber:M,pageIndex:z=M-1}=Z;if(y){y({dest:ee,pageIndex:z,pageNumber:M});return}const J=V.current[z];if(J){J.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${M} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:q,pages:V,viewer:X}),[]);function re(){F&&F()}function N(){l&&(warning$1(!1,l.toString()),E&&E(l))}function d(){m({type:"RESET"})}reactExports.useEffect(d,[h,m]);const u=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!h)return null;if(typeof h=="string")return isDataURI(h)?{data:dataURItoByteString(h)}:(displayCORSWarning(),{url:h});if(h instanceof PDFDataRangeTransport)return{range:h};if(isArrayBuffer(h))return{data:h};if(isBrowser&&isBlob(h))return{data:yield loadFromFile(h)};if(invariant(typeof h=="object"),invariant(isParameterObject(h)),"url"in h&&typeof h.url=="string"){if(isDataURI(h.url)){const{url:Z}=h,ee=__rest$1(h,["url"]),M=dataURItoByteString(Z);return Object.assign({data:M},ee)}displayCORSWarning()}return h}),[h]);reactExports.useEffect(()=>{const Z=makeCancellablePromise(u());return Z.promise.then(ee=>{m({type:"RESOLVE",value:ee})}).catch(ee=>{m({type:"REJECT",error:ee})}),()=>{cancelRunningTask(Z)}},[u,m]),reactExports.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){N();return}re()}},[D]);function T(){Q&&(x&&x(Q),V.current=new Array(Q.numPages),q.current.setDocument(Q))}function j(){G&&(warning$1(!1,G.toString()),b&&b(G))}function U(){I({type:"RESET"})}reactExports.useEffect(U,[I,D]);function B(){if(!D)return;const Z=Object.assign(Object.assign({},S),{isEvalSupported:!1}),ee=Object.assign(Object.assign({},D),Z),M=pdfjs.getDocument(ee);C&&(M.onProgress=C),p&&(M.onPassword=p);const z=M;return z.promise.then(J=>{I({type:"RESOLVE",value:J})}).catch(J=>{z.destroyed||I({type:"REJECT",error:J})}),()=>{z.destroy()}}reactExports.useEffect(B,[S,I,D]),reactExports.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){j();return}T()}},[Q]);function Y(){q.current.setViewer(X.current),q.current.setExternalLinkRel(P),q.current.setExternalLinkTarget(O)}reactExports.useEffect(Y,[P,O]);function ie(Z,ee){V.current[Z]=ee}function le(Z){delete V.current[Z]}const fe=reactExports.useMemo(()=>({imageResourcesPath:o,linkService:q.current,onItemClick:y,pdf:Q,registerPage:ie,renderMode:c,rotate:g,unregisterPage:le}),[o,y,Q,c,g]),ye=reactExports.useMemo(()=>makeEventProps(a,()=>Q),[a,Q]);function me(){return React$1.createElement(DocumentContext.Provider,{value:fe},n)}function ve(){return h?Q==null?React$1.createElement(Message,{type:"loading"},typeof w=="function"?w():w):Q===!1?React$1.createElement(Message,{type:"error"},typeof A=="function"?A():A):me():React$1.createElement(Message,{type:"no-data"},typeof k=="function"?k():k)}return React$1.createElement("div",Object.assign({className:clsx("react-pdf__Document",r),ref:v,style:{"--scale-factor":"1"}},ye),ve())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var s=t.filter(Boolean);if(s.length<=1){var n=s[0];return n||null}return function(A){s.forEach(function(P){typeof P=="function"?P(A):P&&(P.current=A)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const e={};if(isStructTreeNode(t)){const{role:s}=t,n=s.match(HEADING_PATTERN);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(isPdfRole(s)){const r=PDF_ROLE_TO_HTML_ROLE[s];r&&(e.role=r)}}return e}function getBaseAttributes(t){const e={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[s]=t.children;if(s){const n=getBaseAttributes(s);return Object.assign(Object.assign({},e),n)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function getAttributes(t){return t?Object.assign(Object.assign({},getRoleAttributes(t)),getBaseAttributes(t)):null}function StructTreeItem({className:t,node:e}){const s=reactExports.useMemo(()=>getAttributes(e),[e]),n=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((r,A)=>React$1.createElement(StructTreeItem,{key:A,node:r})),[e]);return React$1.createElement("span",Object.assign({className:t},s),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const t=usePageContext();invariant(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:s}=t,[n,r]=useResolver(),{value:A,error:P}=n,{customTextRenderer:O,page:h}=t;function v(){A&&s&&s(A)}function o(){P&&(warning$1(!1,P.toString()),e&&e(P))}function w(){r({type:"RESET"})}reactExports.useEffect(w,[r,h]);function k(){if(O||!h)return;const y=makeCancellablePromise(h.getStructTree()),b=y;return y.promise.then(C=>{r({type:"RESOLVE",value:C})}).catch(C=>{r({type:"REJECT",error:C})}),()=>cancelRunningTask(b)}return reactExports.useEffect(k,[O,h,r]),reactExports.useEffect(()=>{if(A!==void 0){if(A===!1){o();return}v()}},[A]),A?React$1.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:A}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(t){const e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},e),t),{_className:n,canvasBackground:r,devicePixelRatio:A=getDevicePixelRatio(),onRenderError:P,onRenderSuccess:O,page:h,renderForms:v,renderTextLayer:o,rotate:w,scale:k}=s,{canvasRef:y}=t;invariant(h);const b=reactExports.useRef(null);function C(){h&&O&&O(makePageCallback(h,k))}function x(c){isCancelException(c)||(warning$1(!1,c.toString()),P&&P(c))}const p=reactExports.useMemo(()=>h.getViewport({scale:k*A,rotation:w}),[A,h,w,k]),E=reactExports.useMemo(()=>h.getViewport({scale:k,rotation:w}),[h,w,k]);function F(){if(!h)return;h.cleanup();const{current:c}=b;if(!c)return;c.width=p.width,c.height=p.height,c.style.width=`${Math.floor(E.width)}px`,c.style.height=`${Math.floor(E.height)}px`,c.style.visibility="hidden";const g={annotationMode:v?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:c.getContext("2d",{alpha:!1}),viewport:p};r&&(g.background=r);const a=h.render(g),f=a;return a.promise.then(()=>{c.style.visibility="",C()}).catch(x),()=>cancelRunningTask(f)}reactExports.useEffect(F,[r,b,A,h,v,p,E]);const S=reactExports.useCallback(()=>{const{current:c}=b;c&&(c.width=0,c.height=0)},[b]);return reactExports.useEffect(()=>S,[S]),React$1.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(y,b),style:{display:"block",userSelect:"none"}},o?React$1.createElement(StructTree,null):null)}function PageSVG(){const t=usePageContext();invariant(t);const{_className:e,onRenderSuccess:s,onRenderError:n,page:r,rotate:A,scale:P}=t;invariant(r);const[O,h]=useResolver(),{value:v,error:o}=O;function w(){r&&s&&s(makePageCallback(r,P))}function k(){o&&(isCancelException(o)||(warning$1(!1,o.toString()),n&&n(o)))}const y=reactExports.useMemo(()=>r.getViewport({scale:P,rotation:A}),[r,A,P]);function b(){h({type:"RESET"})}reactExports.useEffect(b,[r,h,y]);function C(){if(!r)return;const F=makeCancellablePromise(r.getOperatorList());return F.promise.then(S=>{new pdfjs.SVGGraphics(r.commonObjs,r.objs).getSVG(S,y).then(g=>{if(!(g instanceof SVGElement))throw new Error("getSVG returned unexpected result.");h({type:"RESOLVE",value:g})}).catch(g=>{h({type:"REJECT",error:g})})}).catch(S=>{h({type:"REJECT",error:S})}),()=>cancelRunningTask(F)}reactExports.useEffect(C,[r,h,y]),reactExports.useEffect(()=>{if(v!==void 0){if(v===!1){k();return}w()}},[v]);function x(F){if(!F||!v)return;F.firstElementChild||F.appendChild(v);const{width:S,height:c}=y;v.setAttribute("width",`${S}`),v.setAttribute("height",`${c}`)}const{width:p,height:E}=y;return React$1.createElement("div",{className:`${e}__svg`,ref:F=>x(F),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:p,height:E,userSelect:"none"}})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant(t);const{customTextRenderer:e,onGetTextError:s,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:A,page:P,pageIndex:O,pageNumber:h,rotate:v,scale:o}=t;invariant(P);const[w,k]=useResolver(),{value:y,error:b}=w,C=reactExports.useRef(null),x=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function p(){y&&n&&n(y)}function E(){b&&(warning$1(!1,b.toString()),s&&s(b))}function F(){k({type:"RESET"})}reactExports.useEffect(F,[P,k]);function S(){if(!P)return;const l=makeCancellablePromise(P.getTextContent()),R=l;return l.promise.then(I=>{k({type:"RESOLVE",value:I})}).catch(I=>{k({type:"REJECT",error:I})}),()=>cancelRunningTask(R)}reactExports.useEffect(S,[P,k]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){E();return}p()}},[y]);const c=reactExports.useCallback(()=>{A&&A()},[A]),g=reactExports.useCallback(l=>{warning$1(!1,l.toString()),r&&r(l)},[r]);function a(){const l=x.current;l&&l.classList.add("active")}function f(){const l=x.current;l&&l.classList.remove("active")}const m=reactExports.useMemo(()=>P.getViewport({scale:o,rotation:v}),[P,v,o]);function D(){if(!P||!y)return;const{current:l}=C;if(!l)return;l.innerHTML="";const R=P.streamTextContent({includeMarkedContent:!0}),I={container:l,textContentSource:R,viewport:m},Q=pdfjs.renderTextLayer(I),G=Q;return Q.promise.then(()=>{const q=document.createElement("div");q.className="endOfContent",l.append(q),x.current=q;const V=l.querySelectorAll('[role="presentation"]');if(e){let se=0;y.items.forEach((L,X)=>{if(!isTextItem(L))return;const re=V[se];if(!re)return;const N=e(Object.assign({pageIndex:O,pageNumber:h,itemIndex:X},L));re.innerHTML=N,se+=L.str&&L.hasEOL?2:1})}c()}).catch(g),()=>cancelRunningTask(G)}return reactExports.useLayoutEffect(D,[e,g,c,P,O,h,y,m]),React$1.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:f,onMouseDown:a,ref:C})}function AnnotationLayer(){const t=useDocumentContext(),e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},t),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:A,onGetAnnotationsSuccess:P,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:h,page:v,pdf:o,renderForms:w,rotate:k,scale:y=1}=s;invariant(o),invariant(v),invariant(r);const[b,C]=useResolver(),{value:x,error:p}=b,E=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function F(){x&&P&&P(x)}function S(){p&&(warning$1(!1,p.toString()),A&&A(p))}function c(){C({type:"RESET"})}reactExports.useEffect(c,[C,v]);function g(){if(!v)return;const l=makeCancellablePromise(v.getAnnotations()),R=l;return l.promise.then(I=>{C({type:"RESOLVE",value:I})}).catch(I=>{C({type:"REJECT",error:I})}),()=>{cancelRunningTask(R)}}reactExports.useEffect(g,[C,v,w]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){S();return}F()}},[x]);function a(){h&&h()}function f(l){warning$1(!1,`${l}`),O&&O(l)}const m=reactExports.useMemo(()=>v.getViewport({scale:y,rotation:k}),[v,k,y]);function D(){if(!o||!v||!r||!x)return;const{current:l}=E;if(!l)return;const R=m.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,div:l,l10n:null,page:v,viewport:R},Q={annotations:x,annotationStorage:o.annotationStorage,div:l,downloadManager:null,imageResourcesPath:n,linkService:r,page:v,renderForms:w,viewport:R};l.innerHTML="";try{new pdfjs.AnnotationLayer(I).render(Q),a()}catch(G){f(G)}return()=>{}}return reactExports.useEffect(D,[x,n,r,v,w,m]),React$1.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:E})}var __rest=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const defaultScale=1,Page=function t(e){const s=useDocumentContext(),n=Object.assign(Object.assign({},s),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:A=!0,canvasBackground:P,canvasRef:O,children:h,className:v,customRenderer:o,customTextRenderer:w,devicePixelRatio:k,error:y="Failed to load the page.",height:b,inputRef:C,loading:x="Loading page",noData:p="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:F,onGetStructTreeError:S,onGetStructTreeSuccess:c,onGetTextError:g,onGetTextSuccess:a,onLoadError:f,onLoadSuccess:m,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:l,onRenderError:R,onRenderSuccess:I,onRenderTextLayerError:Q,onRenderTextLayerSuccess:G,pageIndex:q,pageNumber:V,pdf:se,registerPage:L,renderAnnotationLayer:X=!0,renderForms:re=!1,renderMode:N="canvas",renderTextLayer:d=!0,rotate:u,scale:T=defaultScale,unregisterPage:j,width:U}=n,B=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Y,ie]=useResolver(),{value:le,error:fe}=Y,ye=reactExports.useRef(null);invariant(se);const me=isProvided(V)?V-1:q??null,ve=V??(isProvided(q)?q+1:null),Z=u??(le?le.rotate:null),ee=reactExports.useMemo(()=>{if(!le)return null;let Oe=1;const He=T??defaultScale;if(U||b){const Xe=le.getViewport({scale:1,rotation:Z});U?Oe=U/Xe.width:b&&(Oe=b/Xe.height)}return He*Oe},[b,le,Z,T,U]);function M(){return()=>{isProvided(me)&&A&&j&&j(me)}}reactExports.useEffect(M,[A,se,me,j]);function z(){if(m){if(!le||!ee)return;m(makePageCallback(le,ee))}if(A&&L){if(!isProvided(me)||!ye.current)return;L(me,ye.current)}}function J(){fe&&(warning$1(!1,fe.toString()),f&&f(fe))}function ae(){ie({type:"RESET"})}reactExports.useEffect(ae,[ie,se,me]);function ge(){if(!se||!ve)return;const Oe=makeCancellablePromise(se.getPage(ve)),He=Oe;return Oe.promise.then(Xe=>{ie({type:"RESOLVE",value:Xe})}).catch(Xe=>{ie({type:"REJECT",error:Xe})}),()=>cancelRunningTask(He)}reactExports.useEffect(ge,[ie,se,me,ve,L]),reactExports.useEffect(()=>{if(le!==void 0){if(le===!1){J();return}z()}},[le,ee]);const Ae=reactExports.useMemo(()=>le&&isProvided(me)&&ve&&isProvided(Z)&&isProvided(ee)?{_className:r,canvasBackground:P,customTextRenderer:w,devicePixelRatio:k,onGetAnnotationsError:E,onGetAnnotationsSuccess:F,onGetStructTreeError:S,onGetStructTreeSuccess:c,onGetTextError:g,onGetTextSuccess:a,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:l,onRenderError:R,onRenderSuccess:I,onRenderTextLayerError:Q,onRenderTextLayerSuccess:G,page:le,pageIndex:me,pageNumber:ve,renderForms:re,renderTextLayer:d,rotate:Z,scale:ee}:null,[r,P,w,k,E,F,S,c,g,a,D,l,R,I,Q,G,le,me,ve,re,d,Z,ee]),_e=reactExports.useMemo(()=>makeEventProps(B,()=>le&&(ee?makePageCallback(le,ee):void 0)),[B,le,ee]),te=`${me}@${ee}/${Z}`,Pe=`${me}/${Z}`;function Ce(){switch(N){case"custom":return invariant(o),React$1.createElement(o,{key:`${te}_custom`});case"none":return null;case"svg":return React$1.createElement(PageSVG,{key:`${Pe}_svg`});case"canvas":default:return React$1.createElement(PageCanvas,{key:`${te}_canvas`,canvasRef:O})}}function Ue(){return d?React$1.createElement(TextLayer,{key:`${te}_text`}):null}function je(){return X?React$1.createElement(AnnotationLayer,{key:`${te}_annotations`}):null}function ze(){return React$1.createElement(PageContext.Provider,{value:Ae},Ce(),Ue(),je(),h)}function ke(){return ve?se===null||le===void 0||le===null?React$1.createElement(Message,{type:"loading"},typeof x=="function"?x():x):se===!1||le===!1?React$1.createElement(Message,{type:"error"},typeof y=="function"?y():y):ze():React$1.createElement(Message,{type:"no-data"},typeof p=="function"?p():p)}return React$1.createElement("div",Object.assign({className:clsx(r,v),"data-page-number":ve,ref:mergeRefs(C,ye),style:{"--scale-factor":`${ee}`,backgroundColor:P||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},_e),ke())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";var Close={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1=Close.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Close.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const PDFPreview=({open:t,onClose:e,pdfUrl:s,bookTitle:n})=>{const[r,A]=reactExports.useState(null),[P,O]=reactExports.useState(1),[h,v]=reactExports.useState(null),o=({numPages:y})=>{A(y),v(null)},w=y=>{v("Erreur lors du chargement du PDF"),console.error("Error loading PDF:",y)},k=y=>{O(b=>{const C=b+y;return Math.min(Math.max(1,C),r)})};return jsxRuntimeExports.jsxs(Dialog,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:n}),jsxRuntimeExports.jsx(IconButton,{onClick:e,children:jsxRuntimeExports.jsx(default_1,{})})]}),jsxRuntimeExports.jsx(DialogContent,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:h?jsxRuntimeExports.jsx(Typography,{color:"error",sx:{mt:2},children:h}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Document,{file:s,onLoadSuccess:o,onLoadError:w,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement du PDF..."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:P,width:window.innerWidth*.7,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement de la page..."})})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(default_1$7,{}),onClick:()=>k(-1),disabled:P<=1,children:"Prcdent"}),jsxRuntimeExports.jsxs(Typography,{children:["Page ",P," sur ",r]}),jsxRuntimeExports.jsx(Button,{endIcon:jsxRuntimeExports.jsx(default_1$8,{}),onClick:()=>k(1),disabled:P>=r,children:"Suivant"})]})]})})]})},HomePage=()=>{const[t,e]=reactExports.useState([]),[s,n]=reactExports.useState(!0),[r,A]=reactExports.useState(!1),[P,O]=reactExports.useState(null),[h,v]=reactExports.useState(""),[o,w]=reactExports.useState(!1),[k,y]=reactExports.useState(null),b=useTheme$2(),C=useMediaQuery(b.breakpoints.down("sm")),x=useNavigate();reactExports.useEffect(()=>{p();const a=setInterval(p,5e3);return()=>clearInterval(a)},[]);const p=async()=>{try{O(null);const a=await fetch("/api/books");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const f=await a.json();if(!f||typeof f!="object")throw new Error("Invalid API response format");const D=(Array.isArray(f.books)?f.books:[]).map((l={})=>({id:l.id||l.filename||"",title:l.title||"Untitled Book",author:l.author||"Unknown",filename:l.filename||"",uploadDate:l.uploadDate,status:l.status||"unknown",current_page:l.current_page||0,total_pages:l.total_pages||0,processed_sections:l.processed_sections||0,processed_images:l.processed_images||0,error_message:l.error_message||null,cover_image:l.cover_image||null,...l}));e(D)}catch(a){console.error("Error fetching books:",a),O(a.message||"Error connecting to server"),e([])}finally{n(!1)}},E=async a=>{const f=a.target.files[0];if(!f)return;if(f.type!=="application/pdf"){O("Please select a valid PDF file");return}const m=new FormData;m.append("pdf_files",f);try{A(!0),O(null);const D=await fetch("/api/books/upload",{method:"POST",body:m}),l=await D.json();if(!D.ok||!l)throw new Error((l==null?void 0:l.message)||"Error uploading PDF");v(l.message||"PDF uploaded successfully"),a.target.value="",p()}catch(D){console.error("Error uploading PDF:",D),O(D.message||"Error uploading file")}finally{A(!1)}},F=a=>{if((a==null?void 0:a.status)!=="completed"){O("This book is not ready for reading yet");return}x(`/reader/${a.filename}`)},S=a=>{if((a==null?void 0:a.status)!=="completed"){O("This book is not ready for preview yet");return}y(a),w(!0)},c=a=>a?jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:1,sx:{mb:1},children:[jsxRuntimeExports.jsx(Tooltip,{title:"Pages",children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$1,{}),label:`${a.current_page||0}/${a.total_pages||0} pages`,size:"small",variant:"outlined"})}),jsxRuntimeExports.jsx(Tooltip,{title:"Images",children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$2,{}),label:`${a.processed_images||0} images`,size:"small",variant:"outlined"})}),a.processed_sections>0&&jsxRuntimeExports.jsx(Tooltip,{title:"Sections",children:jsxRuntimeExports.jsx(Chip,{label:`${a.processed_sections} sections`,size:"small",variant:"outlined"})})]}):null,g=a=>a?jsxRuntimeExports.jsx(Tooltip,{title:`Status: ${a.status}`,children:jsxRuntimeExports.jsx(Chip,{label:a.status,color:a.status==="completed"?"success":"default",size:"small",sx:{mb:1}})}):null;return s&&t.length===0?jsxRuntimeExports.jsx(Container,{maxWidth:"lg",sx:{py:4},children:jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mt:4},children:jsxRuntimeExports.jsx(LinearProgress,{})})}):jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:C?"h4":"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:b.palette.primary.main},children:"Digital Library"}),jsxRuntimeExports.jsxs(Button,{variant:"contained",component:"label",startIcon:jsxRuntimeExports.jsx(default_1$5,{}),sx:{mt:2,px:3,py:1.5,borderRadius:2,backgroundColor:b.palette.primary.main,"&:hover":{backgroundColor:b.palette.primary.dark}},disabled:r,children:[r?"Uploading...":"Add PDF Book",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:E})]})]}),jsxRuntimeExports.jsx(Snackbar,{open:!!h,autoHideDuration:6e3,onClose:()=>v(""),message:h}),P&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:3},onClose:()=>O(null),action:jsxRuntimeExports.jsx(Button,{color:"inherit",size:"small",onClick:()=>window.location.reload(),children:"Retry"}),children:P}),Array.isArray(t)&&t.length===0&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:"No books in library"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Start by uploading a PDF"})]}),Array.isArray(t)&&t.length>0&&jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:t.map((a,f)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:(a==null?void 0:a.status)==="completed"?"translateY(-4px)":"none",boxShadow:(a==null?void 0:a.status)==="completed"?4:1}},children:[a.cover_image&&jsxRuntimeExports.jsx(CardMedia,{component:"img",height:"200",image:a.cover_image,alt:`Cover for ${a.title}`,sx:{objectFit:"contain",p:1}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:(a==null?void 0:a.title)||"Untitled Book"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Author: ",(a==null?void 0:a.author)||"Unknown"]}),g(a),c(a),a.error_message&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"error",sx:{mt:1},children:["Error: ",a.error_message]})]}),jsxRuntimeExports.jsxs(CardActions,{sx:{padding:2,justifyContent:"space-between",backgroundColor:b.palette.background.paper,borderTop:1,borderColor:b.palette.divider},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$3,{}),onClick:()=>S(a),disabled:(a==null?void 0:a.status)!=="completed",children:"Preview"}),jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>F(a),disabled:(a==null?void 0:a.status)!=="completed",children:"Read"})]})]})},`book-${(a==null?void 0:a.id)||f}`))}),k&&jsxRuntimeExports.jsx(PDFPreview,{open:o,onClose:()=>{w(!1),y(null)},pdfUrl:`/api/books/${k.filename}`,bookTitle:k.title})]})};export{HomePage as default};
//# sourceMappingURL=index-DeHSKU6m.js.map
