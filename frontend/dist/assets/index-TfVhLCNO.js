var Qn=Object.defineProperty;var bn=e=>{throw TypeError(e)};var Zn=(e,t,u)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u;var Qt=(e,t,u)=>Zn(e,typeof t!="symbol"?t+"":t,u),Le=(e,t,u)=>t.has(e)||bn("Cannot "+u);var s=(e,t,u)=>(Le(e,t,"read from private field"),u?u.call(e):t.get(e)),ot=(e,t,u)=>t.has(e)?bn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,u),ct=(e,t,u,n)=>(Le(e,t,"write to private field"),n?n.call(e,u):t.set(e,u),u),Q=(e,t,u)=>(Le(e,t,"access private method"),u);var he=(e,t,u,n)=>({set _(i){ct(e,t,i,u)},get _(){return s(e,t,n)}});import{g as getDefaultExportFromCjs,u as useTheme,a as getThemeProps,r as reactExports,b as useEnhancedEffect,_ as _objectWithoutPropertiesLoose,c as _extends,d as useForkRef,e as generateUtilityClass,f as generateUtilityClasses,h as useDefaultProps,i as capitalize,j as composeClasses,k as jsxRuntimeExports,s as styled,B as ButtonBase,l as alpha_1,m as clsx,P as Paper,n as darken_1,o as lighten_1,p as useEventCallback,q as extendSxProp,t as resolveBreakpointValues,v as handleBreakpoints,w as css,x as keyframes,y as useTimeout,z as emphasize_1,A as interopRequireDefaultExports,C as getAugmentedNamespace,R as React,T as Typography,D as Button,E as useNavigate,F as Container}from"./index-sYmEQNk6.js";import{r as resolveComponentProps,m as mergeSlotProps,a as appendOwnerState,c as createSvgIcon,o as ownerDocument,u as useTheme$1,F as Fade,b as useId,M as Modal,B as Backdrop,d as useRtl,e as extractEventHandlers,G as Grow,f as useSlotProps,g as requireCreateSvgIcon,h as Box,i as default_1$6,j as default_1$7}from"./NavigateBefore-B1_F8jKW.js";function _mergeNamespaces(e,t){for(var u=0;u<t.length;u++){const n=t[u];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const F=Object.getOwnPropertyDescriptor(n,i);F&&Object.defineProperty(e,i,F.get?F:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(n,i,F,R,G,A){if(A!==ReactPropTypesSecret){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var u={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return u.PropTypes=u,u};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function useMediaQueryOld(e,t,u,n,i){const[F,R]=reactExports.useState(()=>i&&u?u(e).matches:n?n(e).matches:t);return useEnhancedEffect(()=>{let G=!0;if(!u)return;const A=u(e),E=()=>{G&&R(A.matches)};return E(),A.addListener(E),()=>{G=!1,A.removeListener(E)}},[e,u]),F}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(e,t,u,n,i){const F=reactExports.useCallback(()=>t,[t]),R=reactExports.useMemo(()=>{if(i&&u)return()=>u(e).matches;if(n!==null){const{matches:p}=n(e);return()=>p}return F},[F,e,n,i,u]),[G,A]=reactExports.useMemo(()=>{if(u===null)return[F,()=>()=>{}];const p=u(e);return[()=>p.matches,w=>(p.addListener(w),()=>{p.removeListener(w)})]},[F,u,e]);return maybeReactUseSyncExternalStore(A,G,R)}function useMediaQuery(e,t={}){const u=useTheme(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:F=n?window.matchMedia:null,ssrMatchMedia:R=null,noSsr:G=!1}=getThemeProps({name:"MuiUseMediaQuery",props:t,theme:u});let A=typeof e=="function"?e(u):e;return A=A.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(A,i,F,R,G)}const _excluded$c=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_excluded2$1=["component","slots","slotProps"],_excluded3=["component"];function useSlot(e,t){const{className:u,elementType:n,ownerState:i,externalForwardedProps:F,getSlotOwnerState:R,internalForwardedProps:G}=t,A=_objectWithoutPropertiesLoose(t,_excluded$c),{component:E,slots:p={[e]:void 0},slotProps:w={[e]:void 0}}=F,O=_objectWithoutPropertiesLoose(F,_excluded2$1),y=p[e]||n,m=resolveComponentProps(w[e],i),C=mergeSlotProps(_extends({className:u},A,{externalForwardedProps:e==="root"?O:void 0,externalSlotProps:m})),{props:{component:b},internalRef:f}=C,v=_objectWithoutPropertiesLoose(C.props,_excluded3),I=useForkRef(f,m==null?void 0:m.ref,t.ref),S=R?R(v):{},c=_extends({},i,S),a=e==="root"?b||E:b,d=appendOwnerState(y,_extends({},e==="root"&&!E&&!p[e]&&G,e!=="root"&&!p[e]&&G,v,a&&{as:a},{ref:I}),c);return Object.keys(S).forEach(h=>{delete d[h]}),[y,d]}function getAlertUtilityClass(e){return generateUtilityClass("MuiAlert",e)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(e){return generateUtilityClass("MuiIconButton",e)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$b=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$b=e=>{const{classes:t,disabled:u,color:n,edge:i,size:F}=e,R={root:["root",u&&"disabled",n!=="default"&&`color${capitalize(n)}`,i&&`edge${capitalize(i)}`,`size${capitalize(F)}`]};return composeClasses(R,getIconButtonUtilityClass,t)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,u.color!=="default"&&t[`color${capitalize(u.color)}`],u.edge&&t[`edge${capitalize(u.edge)}`],t[`size${capitalize(u.size)}`]]}})(({theme:e,ownerState:t})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:alpha_1(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var u;const n=(u=(e.vars||e).palette)==null?void 0:u[t.color];return _extends({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&_extends({color:n==null?void 0:n.main},!t.disableRipple&&{"&:hover":_extends({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:alpha_1(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiIconButton"}),{edge:i=!1,children:F,className:R,color:G="default",disabled:A=!1,disableFocusRipple:E=!1,size:p="medium"}=n,w=_objectWithoutPropertiesLoose(n,_excluded$b),O=_extends({},n,{edge:i,color:G,disabled:A,disableFocusRipple:E,size:p}),y=useUtilityClasses$b(O);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(y.root,R),centerRipple:!0,focusRipple:!E,disabled:A,ref:u},w,{ownerState:O,children:F}))}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$a=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$a=e=>{const{variant:t,color:u,severity:n,classes:i}=e,F={root:["root",`color${capitalize(u||n)}`,`${t}${capitalize(u||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(F,getAlertUtilityClass,i)},AlertRoot=styled(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,t[u.variant],t[`${u.variant}${capitalize(u.color||u.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?darken_1:lighten_1,u=e.palette.mode==="light"?lighten_1:darken_1;return _extends({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:u(e.palette[n].light,.9),[`& .${alertClasses.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${alertClasses.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:_extends({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)})}))]})}),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiAlert"}),{action:i,children:F,className:R,closeText:G="Close",color:A,components:E={},componentsProps:p={},icon:w,iconMapping:O=defaultIconMapping,onClose:y,role:m="alert",severity:C="success",slotProps:b={},slots:f={},variant:v="standard"}=n,I=_objectWithoutPropertiesLoose(n,_excluded$a),S=_extends({},n,{color:A,severity:C,variant:v,colorSeverity:A||C}),c=useUtilityClasses$a(S),a={slots:_extends({closeButton:E.CloseButton,closeIcon:E.CloseIcon},f),slotProps:_extends({},p,b)},[d,h]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:a,ownerState:S}),[g,N]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:a,ownerState:S});return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:m,elevation:0,ownerState:S,className:clsx(c.root,R),ref:u},I,{children:[w!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:S,className:c.icon,children:w||O[C]||defaultIconMapping[C]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:S,className:c.message,children:F}),i!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:c.action,children:i}):null,i==null&&y?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:c.action,children:jsxRuntimeExports.jsx(d,_extends({size:"small","aria-label":G,title:G,color:"inherit",onClick:y},h,{children:jsxRuntimeExports.jsx(g,_extends({fontSize:"small"},N))}))}):null]}))}),CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(e){return generateUtilityClass("MuiChip",e)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$9=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$9=e=>{const{classes:t,disabled:u,size:n,color:i,iconColor:F,onDelete:R,clickable:G,variant:A}=e,E={root:["root",A,u&&"disabled",`size${capitalize(n)}`,`color${capitalize(i)}`,G&&"clickable",G&&`clickableColor${capitalize(i)}`,R&&"deletable",R&&`deletableColor${capitalize(i)}`,`${A}${capitalize(i)}`],label:["label",`label${capitalize(n)}`],avatar:["avatar",`avatar${capitalize(n)}`,`avatarColor${capitalize(i)}`],icon:["icon",`icon${capitalize(n)}`,`iconColor${capitalize(F)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(n)}`,`deleteIconColor${capitalize(i)}`,`deleteIcon${capitalize(A)}Color${capitalize(i)}`]};return composeClasses(E,getChipUtilityClass,t)},ChipRoot=styled("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e,{color:n,iconColor:i,clickable:F,onDelete:R,size:G,variant:A}=u;return[{[`& .${chipClasses.avatar}`]:t.avatar},{[`& .${chipClasses.avatar}`]:t[`avatar${capitalize(G)}`]},{[`& .${chipClasses.avatar}`]:t[`avatarColor${capitalize(n)}`]},{[`& .${chipClasses.icon}`]:t.icon},{[`& .${chipClasses.icon}`]:t[`icon${capitalize(G)}`]},{[`& .${chipClasses.icon}`]:t[`iconColor${capitalize(i)}`]},{[`& .${chipClasses.deleteIcon}`]:t.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:t[`deleteIcon${capitalize(G)}`]},{[`& .${chipClasses.deleteIcon}`]:t[`deleteIconColor${capitalize(n)}`]},{[`& .${chipClasses.deleteIcon}`]:t[`deleteIcon${capitalize(A)}Color${capitalize(n)}`]},t.root,t[`size${capitalize(G)}`],t[`color${capitalize(n)}`],F&&t.clickable,F&&n!=="default"&&t[`clickableColor${capitalize(n)})`],R&&t.deletable,R&&n!=="default"&&t[`deletableColor${capitalize(n)}`],t[A],t[`${A}${capitalize(n)}`]]}})(({theme:e,ownerState:t})=>{const u=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:u,fontSize:e.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&_extends({color:e.vars?e.vars.palette.Chip.defaultIconColor:u},t.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:alpha_1(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:alpha_1(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>_extends({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:alpha_1(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:alpha_1(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>_extends({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:alpha_1(e.palette[t.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:alpha_1(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:alpha_1(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:alpha_1(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),ChipLabel=styled("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:u}=e,{size:n}=u;return[t.label,t[`label${capitalize(n)}`]]}})(({ownerState:e})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(e){return e.key==="Backspace"||e.key==="Delete"}const Chip=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiChip"}),{avatar:i,className:F,clickable:R,color:G="default",component:A,deleteIcon:E,disabled:p=!1,icon:w,label:O,onClick:y,onDelete:m,onKeyDown:C,onKeyUp:b,size:f="medium",variant:v="filled",tabIndex:I,skipFocusWhenDisabled:S=!1}=n,c=_objectWithoutPropertiesLoose(n,_excluded$9),a=reactExports.useRef(null),d=useForkRef(a,u),h=k=>{k.stopPropagation(),m&&m(k)},g=k=>{k.currentTarget===k.target&&isDeleteKeyboardEvent(k)&&k.preventDefault(),C&&C(k)},N=k=>{k.currentTarget===k.target&&(m&&isDeleteKeyboardEvent(k)?m(k):k.key==="Escape"&&a.current&&a.current.blur()),b&&b(k)},l=R!==!1&&y?!0:R,P=l||m?ButtonBase:A||"div",D=_extends({},n,{component:P,disabled:p,size:f,color:G,iconColor:reactExports.isValidElement(w)&&w.props.color||G,onDelete:!!m,clickable:l,variant:v}),Z=useUtilityClasses$9(D),V=P===ButtonBase?_extends({component:A||"div",focusVisibleClassName:Z.focusVisible},m&&{disableRipple:!0}):{};let Y=null;m&&(Y=E&&reactExports.isValidElement(E)?reactExports.cloneElement(E,{className:clsx(E.props.className,Z.deleteIcon),onClick:h}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Z.deleteIcon),onClick:h}));let H=null;i&&reactExports.isValidElement(i)&&(H=reactExports.cloneElement(i,{className:clsx(Z.avatar,i.props.className)}));let st=null;return w&&reactExports.isValidElement(w)&&(st=reactExports.cloneElement(w,{className:clsx(Z.icon,w.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:P,className:clsx(Z.root,F),disabled:l&&p?!0:void 0,onClick:y,onKeyDown:g,onKeyUp:N,ref:d,tabIndex:S&&p?-1:I,ownerState:D},V,c,{children:[H||st,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Z.label),ownerState:D,children:O}),Y]}))});function getCardUtilityClass(e){return generateUtilityClass("MuiCard",e)}generateUtilityClasses("MuiCard",["root"]);const _excluded$8=["className","raised"],useUtilityClasses$8=e=>{const{classes:t}=e;return composeClasses({root:["root"]},getCardUtilityClass,t)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiCard"}),{className:i,raised:F=!1}=n,R=_objectWithoutPropertiesLoose(n,_excluded$8),G=_extends({},n,{raised:F}),A=useUtilityClasses$8(G);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(A.root,i),elevation:F?8:void 0,ref:u,ownerState:G},R))});function getCardActionsUtilityClass(e){return generateUtilityClass("MuiCardActions",e)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$7=["disableSpacing","className"],useUtilityClasses$7=e=>{const{classes:t,disableSpacing:u}=e;return composeClasses({root:["root",!u&&"spacing"]},getCardActionsUtilityClass,t)},CardActionsRoot=styled("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,!u.disableSpacing&&t.spacing]}})(({ownerState:e})=>_extends({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),CardActions=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiCardActions"}),{disableSpacing:i=!1,className:F}=n,R=_objectWithoutPropertiesLoose(n,_excluded$7),G=_extends({},n,{disableSpacing:i}),A=useUtilityClasses$7(G);return jsxRuntimeExports.jsx(CardActionsRoot,_extends({className:clsx(A.root,F),ownerState:G,ref:u},R))});function getCardContentUtilityClass(e){return generateUtilityClass("MuiCardContent",e)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$6=["className","component"],useUtilityClasses$6=e=>{const{classes:t}=e;return composeClasses({root:["root"]},getCardContentUtilityClass,t)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiCardContent"}),{className:i,component:F="div"}=n,R=_objectWithoutPropertiesLoose(n,_excluded$6),G=_extends({},n,{component:F}),A=useUtilityClasses$6(G);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:F,className:clsx(A.root,i),ownerState:G,ref:u},R))});function mapEventPropToEvent(e){return e.substring(2).toLowerCase()}function clickedRootScrollbar(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function ClickAwayListener(e){const{children:t,disableReactTree:u=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:F="onTouchEnd"}=e,R=reactExports.useRef(!1),G=reactExports.useRef(null),A=reactExports.useRef(!1),E=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{A.current=!0},0),()=>{A.current=!1}),[]);const p=useForkRef(t.ref,G),w=useEventCallback(m=>{const C=E.current;E.current=!1;const b=ownerDocument(G.current);if(!A.current||!G.current||"clientX"in m&&clickedRootScrollbar(m,b))return;if(R.current){R.current=!1;return}let f;m.composedPath?f=m.composedPath().indexOf(G.current)>-1:f=!b.documentElement.contains(m.target)||G.current.contains(m.target),!f&&(u||!C)&&i(m)}),O=m=>C=>{E.current=!0;const b=t.props[m];b&&b(C)},y={ref:p};return F!==!1&&(y[F]=O(F)),reactExports.useEffect(()=>{if(F!==!1){const m=mapEventPropToEvent(F),C=ownerDocument(G.current),b=()=>{R.current=!0};return C.addEventListener(m,w),C.addEventListener("touchmove",b),()=>{C.removeEventListener(m,w),C.removeEventListener("touchmove",b)}}},[w,F]),n!==!1&&(y[n]=O(n)),reactExports.useEffect(()=>{if(n!==!1){const m=mapEventPropToEvent(n),C=ownerDocument(G.current);return C.addEventListener(m,w),()=>{C.removeEventListener(m,w)}}},[w,n]),jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(t,y)})}function getDialogUtilityClass(e){return generateUtilityClass("MuiDialog",e)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),_excluded$5=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),useUtilityClasses$5=e=>{const{classes:t,scroll:u,maxWidth:n,fullWidth:i,fullScreen:F}=e,R={root:["root"],container:["container",`scroll${capitalize(u)}`],paper:["paper",`paperScroll${capitalize(u)}`,`paperWidth${capitalize(String(n))}`,i&&"paperFullWidth",F&&"paperFullScreen"]};return composeClasses(R,getDialogUtilityClass,t)},DialogRoot=styled(Modal,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.container,t[`scroll${capitalize(u.scroll)}`]]}})(({ownerState:e})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.paper,t[`scrollPaper${capitalize(u.scroll)}`],t[`paperWidth${capitalize(String(u.maxWidth))}`],u.fullWidth&&t.paperFullWidth,u.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiDialog"}),i=useTheme$1(),F={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":R,"aria-labelledby":G,BackdropComponent:A,BackdropProps:E,children:p,className:w,disableEscapeKeyDown:O=!1,fullScreen:y=!1,fullWidth:m=!1,maxWidth:C="sm",onBackdropClick:b,onClick:f,onClose:v,open:I,PaperComponent:S=Paper,PaperProps:c={},scroll:a="paper",TransitionComponent:d=Fade,transitionDuration:h=F,TransitionProps:g}=n,N=_objectWithoutPropertiesLoose(n,_excluded$5),l=_extends({},n,{disableEscapeKeyDown:O,fullScreen:y,fullWidth:m,maxWidth:C,scroll:a}),P=useUtilityClasses$5(l),D=reactExports.useRef(),Z=st=>{D.current=st.target===st.currentTarget},V=st=>{f&&f(st),D.current&&(D.current=null,b&&b(st),v&&v(st,"backdropClick"))},Y=useId(G),H=reactExports.useMemo(()=>({titleId:Y}),[Y]);return jsxRuntimeExports.jsx(DialogRoot,_extends({className:clsx(P.root,w),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:h,as:A},E)},disableEscapeKeyDown:O,onClose:v,open:I,ref:u,onClick:V,ownerState:l},N,{children:jsxRuntimeExports.jsx(d,_extends({appear:!0,in:I,timeout:h,role:"presentation"},g,{children:jsxRuntimeExports.jsx(DialogContainer,{className:clsx(P.container),onMouseDown:Z,ownerState:l,children:jsxRuntimeExports.jsx(DialogPaper,_extends({as:S,elevation:24,role:"dialog","aria-describedby":R,"aria-labelledby":Y},c,{className:clsx(P.paper,c.className),ownerState:l,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:H,children:p})}))})}))}))});function getDialogContentUtilityClass(e){return generateUtilityClass("MuiDialogContent",e)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),_excluded$4=["className","dividers"],useUtilityClasses$4=e=>{const{classes:t,dividers:u}=e;return composeClasses({root:["root",u&&"dividers"]},getDialogContentUtilityClass,t)},DialogContentRoot=styled("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,u.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiDialogContent"}),{className:i,dividers:F=!1}=n,R=_objectWithoutPropertiesLoose(n,_excluded$4),G=_extends({},n,{dividers:F}),A=useUtilityClasses$4(G);return jsxRuntimeExports.jsx(DialogContentRoot,_extends({className:clsx(A.root,i),ownerState:G,ref:u},R))}),GridContext=reactExports.createContext();function getGridUtilityClass(e){return generateUtilityClass("MuiGrid",e)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(e=>`spacing-xs-${e}`),...DIRECTIONS.map(e=>`direction-xs-${e}`),...WRAPS.map(e=>`wrap-xs-${e}`),...GRID_SIZES.map(e=>`grid-xs-${e}`),...GRID_SIZES.map(e=>`grid-sm-${e}`),...GRID_SIZES.map(e=>`grid-md-${e}`),...GRID_SIZES.map(e=>`grid-lg-${e}`),...GRID_SIZES.map(e=>`grid-xl-${e}`)]),_excluded$3=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function generateGrid({theme:e,ownerState:t}){let u;return e.breakpoints.keys.reduce((n,i)=>{let F={};if(t[i]&&(u=t[i]),!u)return n;if(u===!0)F={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(u==="auto")F={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const R=resolveBreakpointValues({values:t.columns,breakpoints:e.breakpoints.values}),G=typeof R=="object"?R[i]:R;if(G==null)return n;const A=`${Math.round(u/G*1e8)/1e6}%`;let E={};if(t.container&&t.item&&t.columnSpacing!==0){const p=e.spacing(t.columnSpacing);if(p!=="0px"){const w=`calc(${A} + ${getOffset(p)})`;E={flexBasis:w,maxWidth:w}}}F=_extends({flexBasis:A,flexGrow:0,maxWidth:A},E)}return e.breakpoints.values[i]===0?Object.assign(n,F):n[e.breakpoints.up(i)]=F,n},{})}function generateDirection({theme:e,ownerState:t}){const u=resolveBreakpointValues({values:t.direction,breakpoints:e.breakpoints.values});return handleBreakpoints({theme:e},u,n=>{const i={flexDirection:n};return n.indexOf("column")===0&&(i[`& > .${gridClasses.item}`]={maxWidth:"none"}),i})}function extractZeroValueBreakpointKeys({breakpoints:e,values:t}){let u="";Object.keys(t).forEach(i=>{u===""&&t[i]!==0&&(u=i)});const n=Object.keys(e).sort((i,F)=>e[i]-e[F]);return n.slice(0,n.indexOf(u))}function generateRowGap({theme:e,ownerState:t}){const{container:u,rowSpacing:n}=t;let i={};if(u&&n!==0){const F=resolveBreakpointValues({values:n,breakpoints:e.breakpoints.values});let R;typeof F=="object"&&(R=extractZeroValueBreakpointKeys({breakpoints:e.breakpoints.values,values:F})),i=handleBreakpoints({theme:e},F,(G,A)=>{var E;const p=e.spacing(G);return p!=="0px"?{marginTop:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(p)}}:(E=R)!=null&&E.includes(A)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return i}function generateColumnGap({theme:e,ownerState:t}){const{container:u,columnSpacing:n}=t;let i={};if(u&&n!==0){const F=resolveBreakpointValues({values:n,breakpoints:e.breakpoints.values});let R;typeof F=="object"&&(R=extractZeroValueBreakpointKeys({breakpoints:e.breakpoints.values,values:F})),i=handleBreakpoints({theme:e},F,(G,A)=>{var E;const p=e.spacing(G);return p!=="0px"?{width:`calc(100% + ${getOffset(p)})`,marginLeft:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(p)}}:(E=R)!=null&&E.includes(A)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return i}function resolveSpacingStyles(e,t,u={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[u[`spacing-xs-${String(e)}`]];const n=[];return t.forEach(i=>{const F=e[i];Number(F)>0&&n.push(u[`spacing-${i}-${String(F)}`])}),n}const GridRoot=styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e,{container:n,direction:i,item:F,spacing:R,wrap:G,zeroMinWidth:A,breakpoints:E}=u;let p=[];n&&(p=resolveSpacingStyles(R,E,t));const w=[];return E.forEach(O=>{const y=u[O];y&&w.push(t[`grid-${O}-${String(y)}`])}),[t.root,n&&t.container,F&&t.item,A&&t.zeroMinWidth,...p,i!=="row"&&t[`direction-xs-${String(i)}`],G!=="wrap"&&t[`wrap-xs-${String(G)}`],...w]}})(({ownerState:e})=>_extends({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const u=[];return t.forEach(n=>{const i=e[n];if(Number(i)>0){const F=`spacing-${n}-${String(i)}`;u.push(F)}}),u}const useUtilityClasses$3=e=>{const{classes:t,container:u,direction:n,item:i,spacing:F,wrap:R,zeroMinWidth:G,breakpoints:A}=e;let E=[];u&&(E=resolveSpacingClasses(F,A));const p=[];A.forEach(O=>{const y=e[O];y&&p.push(`grid-${O}-${String(y)}`)});const w={root:["root",u&&"container",i&&"item",G&&"zeroMinWidth",...E,n!=="row"&&`direction-xs-${String(n)}`,R!=="wrap"&&`wrap-xs-${String(R)}`,...p]};return composeClasses(w,getGridUtilityClass,t)},Grid=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiGrid"}),{breakpoints:i}=useTheme$1(),F=extendSxProp(n),{className:R,columns:G,columnSpacing:A,component:E="div",container:p=!1,direction:w="row",item:O=!1,rowSpacing:y,spacing:m=0,wrap:C="wrap",zeroMinWidth:b=!1}=F,f=_objectWithoutPropertiesLoose(F,_excluded$3),v=y||m,I=A||m,S=reactExports.useContext(GridContext),c=p?G||12:S,a={},d=_extends({},f);i.keys.forEach(N=>{f[N]!=null&&(a[N]=f[N],delete d[N])});const h=_extends({},F,{columns:c,container:p,direction:w,item:O,rowSpacing:v,columnSpacing:I,wrap:C,zeroMinWidth:b,spacing:m},a,{breakpoints:i.keys}),g=useUtilityClasses$3(h);return jsxRuntimeExports.jsx(GridContext.Provider,{value:c,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:h,className:clsx(g.root,R),as:E,ref:u},d))})});function getLinearProgressUtilityClass(e){return generateUtilityClass("MuiLinearProgress",e)}generateUtilityClasses("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const _excluded$2=["className","color","value","valueBuffer","variant"];let _=e=>e,_t,_t2,_t3,_t4,_t5,_t6;const TRANSITION_DURATION=4,indeterminate1Keyframe=keyframes(_t||(_t=_`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),indeterminate2Keyframe=keyframes(_t2||(_t2=_`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),bufferKeyframe=keyframes(_t3||(_t3=_`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),useUtilityClasses$2=e=>{const{classes:t,variant:u,color:n}=e,i={root:["root",`color${capitalize(n)}`,u],dashed:["dashed",`dashedColor${capitalize(n)}`],bar1:["bar",`barColor${capitalize(n)}`,(u==="indeterminate"||u==="query")&&"bar1Indeterminate",u==="determinate"&&"bar1Determinate",u==="buffer"&&"bar1Buffer"],bar2:["bar",u!=="buffer"&&`barColor${capitalize(n)}`,u==="buffer"&&`color${capitalize(n)}`,(u==="indeterminate"||u==="query")&&"bar2Indeterminate",u==="buffer"&&"bar2Buffer"]};return composeClasses(i,getLinearProgressUtilityClass,t)},getColorShade=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?lighten_1(e.palette[t].main,.62):darken_1(e.palette[t].main,.5),LinearProgressRoot=styled("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,t[`color${capitalize(u.color)}`],t[u.variant]]}})(({ownerState:e,theme:t})=>_extends({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:getColorShade(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),LinearProgressDashed=styled("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.dashed,t[`dashedColor${capitalize(u.color)}`]]}})(({ownerState:e,theme:t})=>{const u=getColorShade(t,e.color);return _extends({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${u} 0%, ${u} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},css(_t4||(_t4=_`
    animation: ${0} 3s infinite linear;
  `),bufferKeyframe)),LinearProgressBar1=styled("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.bar,t[`barColor${capitalize(u.color)}`],(u.variant==="indeterminate"||u.variant==="query")&&t.bar1Indeterminate,u.variant==="determinate"&&t.bar1Determinate,u.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${TRANSITION_DURATION}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&css(_t5||(_t5=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),indeterminate1Keyframe)),LinearProgressBar2=styled("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.bar,t[`barColor${capitalize(u.color)}`],(u.variant==="indeterminate"||u.variant==="query")&&t.bar2Indeterminate,u.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:getColorShade(t,e.color),transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&css(_t6||(_t6=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),indeterminate2Keyframe)),LinearProgress=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiLinearProgress"}),{className:i,color:F="primary",value:R,valueBuffer:G,variant:A="indeterminate"}=n,E=_objectWithoutPropertiesLoose(n,_excluded$2),p=_extends({},n,{color:F,variant:A}),w=useUtilityClasses$2(p),O=useRtl(),y={},m={bar1:{},bar2:{}};if((A==="determinate"||A==="buffer")&&R!==void 0){y["aria-valuenow"]=Math.round(R),y["aria-valuemin"]=0,y["aria-valuemax"]=100;let C=R-100;O&&(C=-C),m.bar1.transform=`translateX(${C}%)`}if(A==="buffer"&&G!==void 0){let C=(G||0)-100;O&&(C=-C),m.bar2.transform=`translateX(${C}%)`}return jsxRuntimeExports.jsxs(LinearProgressRoot,_extends({className:clsx(w.root,i),ownerState:p,role:"progressbar"},y,{ref:u},E,{children:[A==="buffer"?jsxRuntimeExports.jsx(LinearProgressDashed,{className:w.dashed,ownerState:p}):null,jsxRuntimeExports.jsx(LinearProgressBar1,{className:w.bar1,ownerState:p,style:m.bar1}),A==="determinate"?null:jsxRuntimeExports.jsx(LinearProgressBar2,{className:w.bar2,ownerState:p,style:m.bar2})]}))});function useSnackbar(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:u=!1,onClose:n,open:i,resumeHideDuration:F}=e,R=useTimeout();reactExports.useEffect(()=>{if(!i)return;function f(v){v.defaultPrevented||(v.key==="Escape"||v.key==="Esc")&&(n==null||n(v,"escapeKeyDown"))}return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[i,n]);const G=useEventCallback((f,v)=>{n==null||n(f,v)}),A=useEventCallback(f=>{!n||f==null||R.start(f,()=>{G(null,"timeout")})});reactExports.useEffect(()=>(i&&A(t),R.clear),[i,t,A,R]);const E=f=>{n==null||n(f,"clickaway")},p=R.clear,w=reactExports.useCallback(()=>{t!=null&&A(F??t*.5)},[t,F,A]),O=f=>v=>{const I=f.onBlur;I==null||I(v),w()},y=f=>v=>{const I=f.onFocus;I==null||I(v),p()},m=f=>v=>{const I=f.onMouseEnter;I==null||I(v),p()},C=f=>v=>{const I=f.onMouseLeave;I==null||I(v),w()};return reactExports.useEffect(()=>{if(!u&&i)return window.addEventListener("focus",w),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",w),window.removeEventListener("blur",p)}},[u,i,w,p]),{getRootProps:(f={})=>{const v=_extends({},extractEventHandlers(e),extractEventHandlers(f));return _extends({role:"presentation"},f,v,{onBlur:O(v),onFocus:y(v),onMouseEnter:m(v),onMouseLeave:C(v)})},onClickAway:E}}function getSnackbarContentUtilityClass(e){return generateUtilityClass("MuiSnackbarContent",e)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$1=["action","className","message","role"],useUtilityClasses$1=e=>{const{classes:t}=e;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,t)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,u=emphasize_1(e.palette.background.default,t);return _extends({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(u),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:u,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiSnackbarContent"}),{action:i,className:F,message:R,role:G="alert"}=n,A=_objectWithoutPropertiesLoose(n,_excluded$1),E=n,p=useUtilityClasses$1(E);return jsxRuntimeExports.jsxs(SnackbarContentRoot,_extends({role:G,square:!0,elevation:6,className:clsx(p.root,F),ownerState:E,ref:u},A,{children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:p.message,ownerState:E,children:R}),i?jsxRuntimeExports.jsx(SnackbarContentAction,{className:p.action,ownerState:E,children:i}):null]}))});function getSnackbarUtilityClass(e){return generateUtilityClass("MuiSnackbar",e)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded=["onEnter","onExited"],_excluded2=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses=e=>{const{classes:t,anchorOrigin:u}=e,n={root:["root",`anchorOrigin${capitalize(u.vertical)}${capitalize(u.horizontal)}`]};return composeClasses(n,getSnackbarUtilityClass,t)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:u}=e;return[t.root,t[`anchorOrigin${capitalize(u.anchorOrigin.vertical)}${capitalize(u.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const u={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:_extends({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&u,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(t,u){const n=useDefaultProps({props:t,name:"MuiSnackbar"}),i=useTheme$1(),F={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:R,anchorOrigin:{vertical:G,horizontal:A}={vertical:"bottom",horizontal:"left"},autoHideDuration:E=null,children:p,className:w,ClickAwayListenerProps:O,ContentProps:y,disableWindowBlurListener:m=!1,message:C,open:b,TransitionComponent:f=Grow,transitionDuration:v=F,TransitionProps:{onEnter:I,onExited:S}={}}=n,c=_objectWithoutPropertiesLoose(n.TransitionProps,_excluded),a=_objectWithoutPropertiesLoose(n,_excluded2),d=_extends({},n,{anchorOrigin:{vertical:G,horizontal:A},autoHideDuration:E,disableWindowBlurListener:m,TransitionComponent:f,transitionDuration:v}),h=useUtilityClasses(d),{getRootProps:g,onClickAway:N}=useSnackbar(_extends({},d)),[l,P]=reactExports.useState(!0),D=useSlotProps({elementType:SnackbarRoot,getSlotProps:g,externalForwardedProps:a,ownerState:d,additionalProps:{ref:u},className:[h.root,w]}),Z=Y=>{P(!0),S&&S(Y)},V=(Y,H)=>{P(!1),I&&I(Y,H)};return!b&&l?null:jsxRuntimeExports.jsx(ClickAwayListener,_extends({onClickAway:N},O,{children:jsxRuntimeExports.jsx(SnackbarRoot,_extends({},D,{children:jsxRuntimeExports.jsx(f,_extends({appear:!0,in:b,timeout:v,direction:G==="top"?"down":"up",onEnter:V,onExited:Z},c,{children:p||jsxRuntimeExports.jsx(SnackbarContent,_extends({message:C,action:R},y))}))}))}))});var CloudUpload={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1$5=CloudUpload.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=CloudUpload.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var MenuBook={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(MenuBook,"__esModule",{value:!0});var default_1$4=MenuBook.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=MenuBook.default=(0,_createSvgIcon$4.default)([(0,_jsxRuntime$4.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,_jsxRuntime$4.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var Preview={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Preview,"__esModule",{value:!0});var default_1$3=Preview.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=Preview.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var _Error={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(_Error,"__esModule",{value:!0});var default_1$2=_Error.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=_Error.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");var CheckCircle={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(CheckCircle,"__esModule",{value:!0});var default_1$1=CheckCircle.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=CheckCircle.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,u){module.exports=t.pdfjsLib=u()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Yt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=k,t.bytesToString=ut,t.createValidAbsoluteUrl=it,t.getModificationDate=Pt,t.getUuid=Nt,t.getVerbosityLevel=V,t.info=Y,t.isArrayBuffer=nt,t.isArrayEqual=Tt,t.isNodeJS=void 0,t.normalizeUnicode=Ft,t.objectFromMap=vt,t.objectSize=bt,t.setVerbosityLevel=Z,t.shadow=M,t.string32=yt,t.stringToBytes=ft,t.stringToPDFString=gt,t.stringToUTF8String=St,t.unreachable=st,t.utf8StringToString=Et,t.warn=H;const u=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=u;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const F=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=F;const R=1.35;t.LINE_FACTOR=R;const G=.35;t.LINE_DESCENT_FACTOR=G;const A=G/R;t.BASELINE_FACTOR=A;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=E;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=p;const w="pdfjs_internal_editor_";t.AnnotationEditorPrefix=w;const O={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=O;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=y;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=m;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=C;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=b;const f={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=f;const v={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=v;const I={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=I;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=S;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=c;const a={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=a;const d={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=d;const h={O:"PageOpen",C:"PageClose"};t.PageActionEventType=h;const g={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=g;const N={NONE:0,BINARY:1};t.CMapCompressionType=N;const l={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=l;const P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=P;let D=g.WARNINGS;function Z(xt){Number.isInteger(xt)&&(D=xt)}function V(){return D}function Y(xt){D>=g.INFOS&&console.log(`Info: ${xt}`)}function H(xt){D>=g.WARNINGS&&console.log(`Warning: ${xt}`)}function st(xt){throw new Error(xt)}function k(xt,lt){xt||st(lt)}function q(xt){switch(xt==null?void 0:xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function it(xt,lt=null,dt=null){if(!xt)return null;try{if(dt&&typeof xt=="string"){if(dt.addDefaultProtocol&&xt.startsWith("www.")){const Xt=xt.match(/\./g);(Xt==null?void 0:Xt.length)>=2&&(xt=`http://${xt}`)}if(dt.tryConvertEncoding)try{xt=St(xt)}catch{}}const Mt=lt?new URL(xt,lt):new URL(xt);if(q(Mt))return Mt}catch{}return null}function M(xt,lt,dt,Mt=!1){return Object.defineProperty(xt,lt,{value:dt,enumerable:!Mt,configurable:!0,writable:!1}),dt}const r=function(){function lt(dt,Mt){this.constructor===lt&&st("Cannot initialize BaseException."),this.message=dt,this.name=Mt}return lt.prototype=new Error,lt.constructor=lt,lt}();t.BaseException=r;class o extends r{constructor(lt,dt){super(lt,"PasswordException"),this.code=dt}}t.PasswordException=o;class x extends r{constructor(lt,dt){super(lt,"UnknownErrorException"),this.details=dt}}t.UnknownErrorException=x;class B extends r{constructor(lt){super(lt,"InvalidPDFException")}}t.InvalidPDFException=B;class $ extends r{constructor(lt){super(lt,"MissingPDFException")}}t.MissingPDFException=$;class U extends r{constructor(lt,dt){super(lt,"UnexpectedResponseException"),this.status=dt}}t.UnexpectedResponseException=U;class K extends r{constructor(lt){super(lt,"FormatError")}}t.FormatError=K;class rt extends r{constructor(lt){super(lt,"AbortException")}}t.AbortException=rt;function ut(xt){(typeof xt!="object"||(xt==null?void 0:xt.length)===void 0)&&st("Invalid argument for bytesToString");const lt=xt.length,dt=8192;if(lt<dt)return String.fromCharCode.apply(null,xt);const Mt=[];for(let Xt=0;Xt<lt;Xt+=dt){const Vt=Math.min(Xt+dt,lt),z=xt.subarray(Xt,Vt);Mt.push(String.fromCharCode.apply(null,z))}return Mt.join("")}function ft(xt){typeof xt!="string"&&st("Invalid argument for stringToBytes");const lt=xt.length,dt=new Uint8Array(lt);for(let Mt=0;Mt<lt;++Mt)dt[Mt]=xt.charCodeAt(Mt)&255;return dt}function yt(xt){return String.fromCharCode(xt>>24&255,xt>>16&255,xt>>8&255,xt&255)}function bt(xt){return Object.keys(xt).length}function vt(xt){const lt=Object.create(null);for(const[dt,Mt]of xt)lt[dt]=Mt;return lt}function tt(){const xt=new Uint8Array(4);return xt[0]=1,new Uint32Array(xt.buffer,0,1)[0]===1}function et(){try{return new Function(""),!0}catch{return!1}}class T{static get isLittleEndian(){return M(this,"isLittleEndian",tt())}static get isEvalSupported(){return M(this,"isEvalSupported",et())}static get isOffscreenCanvasSupported(){return M(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?M(this,"platform",{isWin:!1,isMac:!1}):M(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var lt,dt;return M(this,"isCSSRoundSupported",(dt=(lt=globalThis.CSS)==null?void 0:lt.supports)==null?void 0:dt.call(lt,"width: round(1.5px, 1px)"))}}t.FeatureTest=T;const W=[...Array(256).keys()].map(xt=>xt.toString(16).padStart(2,"0"));class J{static makeHexColor(lt,dt,Mt){return`#${W[lt]}${W[dt]}${W[Mt]}`}static scaleMinMax(lt,dt){let Mt;lt[0]?(lt[0]<0&&(Mt=dt[0],dt[0]=dt[1],dt[1]=Mt),dt[0]*=lt[0],dt[1]*=lt[0],lt[3]<0&&(Mt=dt[2],dt[2]=dt[3],dt[3]=Mt),dt[2]*=lt[3],dt[3]*=lt[3]):(Mt=dt[0],dt[0]=dt[2],dt[2]=Mt,Mt=dt[1],dt[1]=dt[3],dt[3]=Mt,lt[1]<0&&(Mt=dt[2],dt[2]=dt[3],dt[3]=Mt),dt[2]*=lt[1],dt[3]*=lt[1],lt[2]<0&&(Mt=dt[0],dt[0]=dt[1],dt[1]=Mt),dt[0]*=lt[2],dt[1]*=lt[2]),dt[0]+=lt[4],dt[1]+=lt[4],dt[2]+=lt[5],dt[3]+=lt[5]}static transform(lt,dt){return[lt[0]*dt[0]+lt[2]*dt[1],lt[1]*dt[0]+lt[3]*dt[1],lt[0]*dt[2]+lt[2]*dt[3],lt[1]*dt[2]+lt[3]*dt[3],lt[0]*dt[4]+lt[2]*dt[5]+lt[4],lt[1]*dt[4]+lt[3]*dt[5]+lt[5]]}static applyTransform(lt,dt){const Mt=lt[0]*dt[0]+lt[1]*dt[2]+dt[4],Xt=lt[0]*dt[1]+lt[1]*dt[3]+dt[5];return[Mt,Xt]}static applyInverseTransform(lt,dt){const Mt=dt[0]*dt[3]-dt[1]*dt[2],Xt=(lt[0]*dt[3]-lt[1]*dt[2]+dt[2]*dt[5]-dt[4]*dt[3])/Mt,Vt=(-lt[0]*dt[1]+lt[1]*dt[0]+dt[4]*dt[1]-dt[5]*dt[0])/Mt;return[Xt,Vt]}static getAxialAlignedBoundingBox(lt,dt){const Mt=this.applyTransform(lt,dt),Xt=this.applyTransform(lt.slice(2,4),dt),Vt=this.applyTransform([lt[0],lt[3]],dt),z=this.applyTransform([lt[2],lt[1]],dt);return[Math.min(Mt[0],Xt[0],Vt[0],z[0]),Math.min(Mt[1],Xt[1],Vt[1],z[1]),Math.max(Mt[0],Xt[0],Vt[0],z[0]),Math.max(Mt[1],Xt[1],Vt[1],z[1])]}static inverseTransform(lt){const dt=lt[0]*lt[3]-lt[1]*lt[2];return[lt[3]/dt,-lt[1]/dt,-lt[2]/dt,lt[0]/dt,(lt[2]*lt[5]-lt[4]*lt[3])/dt,(lt[4]*lt[1]-lt[5]*lt[0])/dt]}static singularValueDecompose2dScale(lt){const dt=[lt[0],lt[2],lt[1],lt[3]],Mt=lt[0]*dt[0]+lt[1]*dt[2],Xt=lt[0]*dt[1]+lt[1]*dt[3],Vt=lt[2]*dt[0]+lt[3]*dt[2],z=lt[2]*dt[1]+lt[3]*dt[3],mt=(Mt+z)/2,wt=Math.sqrt((Mt+z)**2-4*(Mt*z-Vt*Xt))/2,It=mt+wt||1,Bt=mt-wt||1;return[Math.sqrt(It),Math.sqrt(Bt)]}static normalizeRect(lt){const dt=lt.slice(0);return lt[0]>lt[2]&&(dt[0]=lt[2],dt[2]=lt[0]),lt[1]>lt[3]&&(dt[1]=lt[3],dt[3]=lt[1]),dt}static intersect(lt,dt){const Mt=Math.max(Math.min(lt[0],lt[2]),Math.min(dt[0],dt[2])),Xt=Math.min(Math.max(lt[0],lt[2]),Math.max(dt[0],dt[2]));if(Mt>Xt)return null;const Vt=Math.max(Math.min(lt[1],lt[3]),Math.min(dt[1],dt[3])),z=Math.min(Math.max(lt[1],lt[3]),Math.max(dt[1],dt[3]));return Vt>z?null:[Mt,Vt,Xt,z]}static bezierBoundingBox(lt,dt,Mt,Xt,Vt,z,mt,wt){const It=[],Bt=[[],[]];let kt,j,L,X,ht,pt,At,Ct;for(let zt=0;zt<2;++zt){if(zt===0?(j=6*lt-12*Mt+6*Vt,kt=-3*lt+9*Mt-9*Vt+3*mt,L=3*Mt-3*lt):(j=6*dt-12*Xt+6*z,kt=-3*dt+9*Xt-9*z+3*wt,L=3*Xt-3*dt),Math.abs(kt)<1e-12){if(Math.abs(j)<1e-12)continue;X=-L/j,0<X&&X<1&&It.push(X);continue}At=j*j-4*L*kt,Ct=Math.sqrt(At),!(At<0)&&(ht=(-j+Ct)/(2*kt),0<ht&&ht<1&&It.push(ht),pt=(-j-Ct)/(2*kt),0<pt&&pt<1&&It.push(pt))}let Ot=It.length,Dt;const Rt=Ot;for(;Ot--;)X=It[Ot],Dt=1-X,Bt[0][Ot]=Dt*Dt*Dt*lt+3*Dt*Dt*X*Mt+3*Dt*X*X*Vt+X*X*X*mt,Bt[1][Ot]=Dt*Dt*Dt*dt+3*Dt*Dt*X*Xt+3*Dt*X*X*z+X*X*X*wt;return Bt[0][Rt]=lt,Bt[1][Rt]=dt,Bt[0][Rt+1]=mt,Bt[1][Rt+1]=wt,Bt[0].length=Bt[1].length=Rt+2,[Math.min(...Bt[0]),Math.min(...Bt[1]),Math.max(...Bt[0]),Math.max(...Bt[1])]}}t.Util=J;const at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(xt){if(xt[0]>=""){let dt;if(xt[0]===""&&xt[1]===""?dt="utf-16be":xt[0]===""&&xt[1]===""?dt="utf-16le":xt[0]===""&&xt[1]===""&&xt[2]===""&&(dt="utf-8"),dt)try{const Mt=new TextDecoder(dt,{fatal:!0}),Xt=ft(xt);return Mt.decode(Xt)}catch(Mt){H(`stringToPDFString: "${Mt}".`)}}const lt=[];for(let dt=0,Mt=xt.length;dt<Mt;dt++){const Xt=at[xt.charCodeAt(dt)];lt.push(Xt?String.fromCharCode(Xt):xt.charAt(dt))}return lt.join("")}function St(xt){return decodeURIComponent(escape(xt))}function Et(xt){return unescape(encodeURIComponent(xt))}function nt(xt){return typeof xt=="object"&&(xt==null?void 0:xt.byteLength)!==void 0}function Tt(xt,lt){if(xt.length!==lt.length)return!1;for(let dt=0,Mt=xt.length;dt<Mt;dt++)if(xt[dt]!==lt[dt])return!1;return!0}function Pt(xt=new Date){return[xt.getUTCFullYear().toString(),(xt.getUTCMonth()+1).toString().padStart(2,"0"),xt.getUTCDate().toString().padStart(2,"0"),xt.getUTCHours().toString().padStart(2,"0"),xt.getUTCMinutes().toString().padStart(2,"0"),xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Wt{constructor(){ot(this,Yt,!1);this.promise=new Promise((lt,dt)=>{this.resolve=Mt=>{ct(this,Yt,!0),lt(Mt)},this.reject=Mt=>{ct(this,Yt,!0),dt(Mt)}})}get settled(){return s(this,Yt)}}Yt=new WeakMap,t.PromiseCapability=Wt;let $t=null,qt=null;function Ft(xt){return $t||($t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qt=new Map([["","t"]])),xt.replaceAll($t,(lt,dt,Mt)=>dt?dt.normalize("NFKC"):qt.get(Mt))}function Nt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(xt);else for(let lt=0;lt<32;lt++)xt[lt]=Math.floor(Math.random()*255);return ut(xt)}const Ht="pdfjs_internal_id_";t.AnnotationPrefix=Ht},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,u,n,i,oe,ve,G,A,E,p,w,O,y,m,C,Ae,f,v,Ie,S,c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(d){if(typeof d=="string"||d instanceof URL?d={url:d}:(0,_util.isArrayBuffer)(d)&&(d={data:d}),typeof d!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!d.url&&!d.data&&!d.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:g}=h,N=d.url?getUrlProp(d.url):null,l=d.data?getDataProp(d.data):null,P=d.httpHeaders||null,D=d.withCredentials===!0,Z=d.password??null,V=d.range instanceof PDFDataRangeTransport?d.range:null,Y=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let H=d.worker instanceof PDFWorker?d.worker:null;const st=d.verbosity,k=typeof d.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(d.docBaseUrl)?d.docBaseUrl:null,q=typeof d.cMapUrl=="string"?d.cMapUrl:null,it=d.cMapPacked!==!1,M=d.CMapReaderFactory||DefaultCMapReaderFactory,r=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,o=d.StandardFontDataFactory||DefaultStandardFontDataFactory,x=d.stopAtErrors!==!0,B=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,$=d.isEvalSupported!==!1,U=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!_util.isNodeJS,K=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,rt=typeof d.disableFontFace=="boolean"?d.disableFontFace:_util.isNodeJS,ut=d.fontExtraProperties===!0,ft=d.enableXfa===!0,yt=d.ownerDocument||globalThis.document,bt=d.disableRange===!0,vt=d.disableStream===!0,tt=d.disableAutoFetch===!0,et=d.pdfBug===!0,T=V?V.length:d.length??NaN,W=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!_util.isNodeJS&&!rt,J=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:M===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&q&&r&&(0,_display_utils.isValidFetchUrl)(q,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(r,document.baseURI),at=d.canvasFactory||new DefaultCanvasFactory({ownerDocument:yt}),gt=d.filterFactory||new DefaultFilterFactory({docId:g,ownerDocument:yt}),St=null;(0,_util.setVerbosityLevel)(st);const Et={canvasFactory:at,filterFactory:gt};if(J||(Et.cMapReaderFactory=new M({baseUrl:q,isCompressed:it}),Et.standardFontDataFactory=new o({baseUrl:r})),!H){const Pt={verbosity:st,port:_worker_options.GlobalWorkerOptions.workerPort};H=Pt.port?PDFWorker.fromPort(Pt):new PDFWorker(Pt),h._worker=H}const nt={docId:g,apiVersion:"3.11.174",data:l,password:Z,disableAutoFetch:tt,rangeChunkSize:Y,length:T,docBaseUrl:k,enableXfa:ft,evaluatorOptions:{maxImageSize:B,disableFontFace:rt,ignoreErrors:x,isEvalSupported:$,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:K,fontExtraProperties:ut,useSystemFonts:W,cMapUrl:J?q:null,standardFontDataUrl:J?r:null}},Tt={ignoreErrors:x,isEvalSupported:$,disableFontFace:rt,fontExtraProperties:ut,enableXfa:ft,ownerDocument:yt,disableAutoFetch:tt,pdfBug:et,styleElement:St};return H.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Pt=_fetchDocument(H,nt),Wt=new Promise(function($t){let qt;V?qt=new _transport_stream.PDFDataTransportStream({length:T,initialData:V.initialData,progressiveDone:V.progressiveDone,contentDispositionFilename:V.contentDispositionFilename,disableRange:bt,disableStream:vt},V):l||(qt=(Nt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Nt):(0,_display_utils.isValidFetchUrl)(Nt.url)?new _displayFetch_stream.PDFFetchStream(Nt):new _displayNetwork.PDFNetworkStream(Nt))({url:N,length:T,httpHeaders:P,withCredentials:D,rangeChunkSize:Y,disableRange:bt,disableStream:vt})),$t(qt)});return Promise.all([Pt,Wt]).then(function([$t,qt]){if(h.destroyed)throw new Error("Loading aborted");const Ft=new _message_handler.MessageHandler(g,$t,H.port),Nt=new WorkerTransport(Ft,h,qt,Tt,Et);h._transport=Nt,Ft.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(d,h){if(d.destroyed)throw new Error("Worker was destroyed");const g=await d.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(d.destroyed)throw new Error("Worker was destroyed");return g}function getUrlProp(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(_util.isNodeJS&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(d){if(_util.isNodeJS&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return(0,_util.stringToBytes)(d);if(typeof d=="object"&&!isNaN(d==null?void 0:d.length)||(0,_util.isArrayBuffer)(d))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${he(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,g,N;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((g=this._transport)==null?void 0:g.destroy())}catch(l){throw(N=this._worker)!=null&&N.port&&delete this._worker._pendingDestroy,l}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,ot(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,g,N=!1,l=null){this.length=h,this.initialData=g,this.progressiveDone=N,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,g){for(const N of this._rangeListeners)N(h,g)}onDataProgress(h,g){this._readyCapability.promise.then(()=>{for(const N of this._progressListeners)N(h,g)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,g){this._pdfInfo=h,this._transport=g,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(N=>{if(!N)return N;const l=[];for(const P in N)l.push(...N[P]);return l}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,g,N,l=!1){ot(this,i);ot(this,u,null);ot(this,n,!1);this._pageIndex=h,this._pageInfo=g,this._transport=N,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=N.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:g=this.rotate,offsetX:N=0,offsetY:l=0,dontFlip:P=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:g,offsetX:N,offsetY:l,dontFlip:P})}getAnnotations({intent:h="display"}={}){const g=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,g.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:g,intent:N="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:P=null,background:D=null,optionalContentConfigPromise:Z=null,annotationCanvasMap:V=null,pageColors:Y=null,printAnnotationStorage:H=null}){var o,x;(o=this._stats)==null||o.time("Overall");const st=this._transport.getRenderingIntent(N,l,H);ct(this,n,!1),Q(this,i,ve).call(this),Z||(Z=this._transport.getOptionalContentConfig());let k=this._intentStates.get(st.cacheKey);k||(k=Object.create(null),this._intentStates.set(st.cacheKey,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const q=!!(st.renderingIntent&_util.RenderingIntentFlag.PRINT);k.displayReadyCapability||(k.displayReadyCapability=new _util.PromiseCapability,k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(st));const it=B=>{var $,U;k.renderTasks.delete(M),(this._maybeCleanupAfterRender||q)&&ct(this,n,!0),Q(this,i,oe).call(this,!q),B?(M.capability.reject(B),this._abortOperatorList({intentState:k,reason:B instanceof Error?B:new Error(B)})):M.capability.resolve(),($=this._stats)==null||$.timeEnd("Rendering"),(U=this._stats)==null||U.timeEnd("Overall")},M=new InternalRenderTask({callback:it,params:{canvasContext:h,viewport:g,transform:P,background:D},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!q,pdfBug:this._pdfBug,pageColors:Y});(k.renderTasks||(k.renderTasks=new Set)).add(M);const r=M.task;return Promise.all([k.displayReadyCapability.promise,Z]).then(([B,$])=>{var U;if(this.destroyed){it();return}(U=this._stats)==null||U.time("Rendering"),M.initializeGraphics({transparency:B,optionalContentConfig:$}),M.operatorListChanged()}).catch(it),r}getOperatorList({intent:h="display",annotationMode:g=_util.AnnotationMode.ENABLE,printAnnotationStorage:N=null}={}){var V;function l(){D.operatorList.lastChunk&&(D.opListReadCapability.resolve(D.operatorList),D.renderTasks.delete(Z))}const P=this._transport.getRenderingIntent(h,g,N,!0);let D=this._intentStates.get(P.cacheKey);D||(D=Object.create(null),this._intentStates.set(P.cacheKey,D));let Z;return D.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=l,D.opListReadCapability=new _util.PromiseCapability,(D.renderTasks||(D.renderTasks=new Set)).add(Z),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(V=this._stats)==null||V.time("Page Request"),this._pumpOperatorList(P)),D.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:g===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(N=>_xfa_text.XfaText.textContent(N));const g=this.streamTextContent(h);return new Promise(function(N,l){function P(){D.read().then(function({value:V,done:Y}){if(Y){N(Z);return}Object.assign(Z.styles,V.styles),Z.items.push(...V.items),P()},l)}const D=g.getReader(),Z={items:[],styles:Object.create(null)};P()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const N of g.renderTasks)h.push(N.completed),N.cancel();return this.objs.clear(),ct(this,n,!1),Q(this,i,ve).call(this),Promise.all(h)}cleanup(h=!1){ct(this,n,!0);const g=Q(this,i,oe).call(this,!1);return h&&g&&this._stats&&(this._stats=new _display_utils.StatTimer),g}_startRenderPage(h,g){var l,P;const N=this._intentStates.get(g);N&&((l=this._stats)==null||l.timeEnd("Page Request"),(P=N.displayReadyCapability)==null||P.resolve(h))}_renderPageChunk(h,g){for(let N=0,l=h.length;N<l;N++)g.operatorList.fnArray.push(h.fnArray[N]),g.operatorList.argsArray.push(h.argsArray[N]);g.operatorList.lastChunk=h.lastChunk,g.operatorList.separateAnnots=h.separateAnnots;for(const N of g.renderTasks)N.operatorListChanged();h.lastChunk&&Q(this,i,oe).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:g,annotationStorageSerializable:N}){const{map:l,transfers:P}=N,Z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:g,annotationStorage:l},P).getReader(),V=this._intentStates.get(g);V.streamReader=Z;const Y=()=>{Z.read().then(({value:H,done:st})=>{if(st){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,V),Y())},H=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const st of V.renderTasks)st.operatorListChanged();Q(this,i,oe).call(this,!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(H);else if(V.opListReadCapability)V.opListReadCapability.reject(H);else throw H}})};Y()}_abortOperatorList({intentState:h,reason:g,force:N=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!N){if(h.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;g.extraDelay>0&&g.extraDelay<1e3&&(l+=g.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:g,force:!0})},l);return}}if(h.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[l,P]of this._intentStates)if(P===h){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}u=new WeakMap,n=new WeakMap,i=new WeakSet,oe=function(h=!1){if(Q(this,i,ve).call(this),!s(this,n)||this.destroyed)return!1;if(h)return ct(this,u,setTimeout(()=>{ct(this,u,null),Q(this,i,oe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:g,operatorList:N}of this._intentStates.values())if(g.size>0||!N.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ct(this,n,!1),!0},ve=function(){s(this,u)&&(clearTimeout(s(this,u)),ct(this,u,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ot(this,G,new Set);ot(this,A,Promise.resolve())}postMessage(h,g){const N={data:structuredClone(h,g?{transfer:g}:null)};s(this,A).then(()=>{for(const l of s(this,G))l.call(this,N)})}addEventListener(h,g){s(this,G).add(g)}removeEventListener(h,g){s(this,G).delete(g)}terminate(){s(this,G).clear()}}G=new WeakMap,A=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const d=(E=document==null?void 0:document.currentScript)==null?void 0:E.src;d&&(PDFWorkerUtil.fallbackWorkerSrc=d.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(d,h){let g;try{if(g=new URL(d),!g.origin||g.origin==="null")return!1}catch{return!1}const N=new URL(h,g);return g.origin===N.origin},PDFWorkerUtil.createCDNWrapper=function(d){const h=`importScripts("${d}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:d=null,port:h=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){var N;if(this.name=d,this.destroyed=!1,this.verbosity=g,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((N=s(_PDFWorker,p))!=null&&N.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(s(_PDFWorker,p)||ct(_PDFWorker,p,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(d){this._port=d,this._messageHandler=new _message_handler.MessageHandler("main","worker",d),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:d}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,d)||(d=PDFWorkerUtil.createCDNWrapper(new URL(d,window.location).href));const h=new Worker(d),g=new _message_handler.MessageHandler("main","worker",h),N=()=>{h.removeEventListener("error",l),g.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||N()};h.addEventListener("error",l),g.on("test",D=>{if(h.removeEventListener("error",l),this.destroyed){N();return}D?(this._messageHandler=g,this._port=h,this._webWorker=h,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),h.terminate())}),g.on("ready",D=>{if(h.removeEventListener("error",l),this.destroyed){N();return}try{P()}catch{this._setupFakeWorker()}});const P=()=>{const D=new Uint8Array;g.send("test",D,[D.buffer])};P();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(d=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,N=new _message_handler.MessageHandler(g+"_worker",g,h);d.setup(N,h);const l=new _message_handler.MessageHandler(g,g+"_worker",h);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(d=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${d.message}".`))})}destroy(){var d;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(d=s(_PDFWorker,p))==null||d.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(d){var g;if(!(d!=null&&d.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(g=s(this,p))==null?void 0:g.get(d.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(d)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var d;try{return((d=globalThis.pdfjsWorker)==null?void 0:d.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};p=new WeakMap,ot(_PDFWorker,p);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,g,N,l,P){ot(this,C);ot(this,w,new Map);ot(this,O,new Map);ot(this,y,new Map);ot(this,m,null);this.messageHandler=h,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=P.canvasFactory,this.filterFactory=P.filterFactory,this.cMapReaderFactory=P.cMapReaderFactory,this.standardFontDataFactory=P.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=N,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,g=_util.AnnotationMode.ENABLE,N=null,l=!1){let P=_util.RenderingIntentFlag.DISPLAY,D=_annotation_storage.SerializableEmpty;switch(h){case"any":P=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":P=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(g){case _util.AnnotationMode.DISABLE:P+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:P+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:P+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,D=(P&_util.RenderingIntentFlag.PRINT&&N instanceof _annotation_storage.PrintAnnotationStorage?N:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return l&&(P+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:P,cacheKey:`${P}_${D.hash}`,annotationStorageSerializable:D}}destroy(){var N;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(N=s(this,m))==null||N.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const l of s(this,O).values())h.push(l._destroy());s(this,O).clear(),s(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return h.push(g),Promise.all(h).then(()=>{var l;this.commonObjs.clear(),this.fontLoader.clear(),s(this,w).clear(),this.filterFactory.destroy(),(l=this._networkStream)==null||l.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:g}=this;h.on("GetReader",(N,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=P=>{this._lastProgress={loaded:P.loaded,total:P.total}},l.onPull=()=>{this._fullReader.read().then(function({value:P,done:D}){if(D){l.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{l.error(P)})},l.onCancel=P=>{this._fullReader.cancel(P),l.ready.catch(D=>{if(!this.destroyed)throw D})}}),h.on("ReaderHeadersReady",N=>{const l=new _util.PromiseCapability,P=this._fullReader;return P.headersReady.then(()=>{var D;(!P.isStreamingSupported||!P.isRangeSupported)&&(this._lastProgress&&((D=g.onProgress)==null||D.call(g,this._lastProgress)),P.onProgress=Z=>{var V;(V=g.onProgress)==null||V.call(g,{loaded:Z.loaded,total:Z.total})}),l.resolve({isStreamingSupported:P.isStreamingSupported,isRangeSupported:P.isRangeSupported,contentLength:P.contentLength})},l.reject),l.promise}),h.on("GetRangeReader",(N,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const P=this._networkStream.getRangeReader(N.begin,N.end);if(!P){l.close();return}l.onPull=()=>{P.read().then(function({value:D,done:Z}){if(Z){l.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{l.error(D)})},l.onCancel=D=>{P.cancel(D),l.ready.catch(Z=>{if(!this.destroyed)throw Z})}}),h.on("GetDoc",({pdfInfo:N})=>{this._numPages=N.numPages,this._htmlForXfa=N.htmlForXfa,delete N.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(N,this))}),h.on("DocException",function(N){let l;switch(N.name){case"PasswordException":l=new _util.PasswordException(N.message,N.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(N.message);break;case"MissingPDFException":l=new _util.MissingPDFException(N.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(N.message,N.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(N.message,N.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(l)}),h.on("PasswordRequest",N=>{if(ct(this,m,new _util.PromiseCapability),g.onPassword){const l=P=>{P instanceof Error?s(this,m).reject(P):s(this,m).resolve({password:P})};try{g.onPassword(l,N.code)}catch(P){s(this,m).reject(P)}}else s(this,m).reject(new _util.PasswordException(N.message,N.code));return s(this,m).promise}),h.on("DataLoaded",N=>{var l;(l=g.onProgress)==null||l.call(g,{loaded:N.length,total:N.length}),this.downloadInfoCapability.resolve(N)}),h.on("StartRenderPage",N=>{if(this.destroyed)return;s(this,O).get(N.pageIndex)._startRenderPage(N.transparency,N.cacheKey)}),h.on("commonobj",([N,l,P])=>{var D;if(!this.destroyed&&!this.commonObjs.has(N))switch(l){case"Font":const Z=this._params;if("error"in P){const H=P.error;(0,_util.warn)(`Error during font loading: ${H}`),this.commonObjs.resolve(N,H);break}const V=Z.pdfBug&&((D=globalThis.FontInspector)!=null&&D.enabled)?(H,st)=>globalThis.FontInspector.fontAdded(H,st):null,Y=new _font_loader.FontFaceObject(P,{isEvalSupported:Z.isEvalSupported,disableFontFace:Z.disableFontFace,ignoreErrors:Z.ignoreErrors,inspectFont:V});this.fontLoader.bind(Y).catch(H=>h.sendWithPromise("FontFallback",{id:N})).finally(()=>{!Z.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(N,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(N,P);break;default:throw new Error(`Got unknown common object type ${l}`)}}),h.on("obj",([N,l,P,D])=>{var V;if(this.destroyed)return;const Z=s(this,O).get(l);if(!Z.objs.has(N))switch(P){case"Image":if(Z.objs.resolve(N,D),D){let Y;if(D.bitmap){const{width:H,height:st}=D;Y=H*st*4}else Y=((V=D.data)==null?void 0:V.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Z._maybeCleanupAfterRender=!0)}break;case"Pattern":Z.objs.resolve(N,D);break;default:throw new Error(`Got unknown object type ${P}`)}}),h.on("DocProgress",N=>{var l;this.destroyed||(l=g.onProgress)==null||l.call(g,{loaded:N.loaded,total:N.total})}),h.on("FetchBuiltInCMap",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(N):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(N):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var N;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:g}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((N=this._fullReader)==null?void 0:N.filename)??null},g).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=h-1,N=s(this,y).get(g);if(N)return N;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(P=>{if(this.destroyed)throw new Error("Transport destroyed");const D=new PDFPageProxy(g,P,this,this._params.pdfBug);return s(this,O).set(g,D),D});return s(this,y).set(g,l),l}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:g})}getFieldObjects(){return Q(this,C,Ae).call(this,"GetFieldObjects")}hasJSActions(){return Q(this,C,Ae).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Q(this,C,Ae).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",g=s(this,w).get(h);if(g)return g;const N=this.messageHandler.sendWithPromise(h,null).then(l=>{var P,D;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:((P=this._fullReader)==null?void 0:P.filename)??null,contentLength:((D=this._fullReader)==null?void 0:D.contentLength)??null}});return s(this,w).set(h,N),N}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const g of s(this,O).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),s(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:g}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:g})}}w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakSet,Ae=function(h,g=null){const N=s(this,w).get(h);if(N)return N;const l=this.messageHandler.sendWithPromise(h,g);return s(this,w).set(h,l),l};class PDFObjects{constructor(){ot(this,v);ot(this,f,Object.create(null))}get(h,g=null){if(g){const l=Q(this,v,Ie).call(this,h);return l.capability.promise.then(()=>g(l.data)),null}const N=s(this,f)[h];if(!(N!=null&&N.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return N.data}has(h){const g=s(this,f)[h];return(g==null?void 0:g.capability.settled)||!1}resolve(h,g=null){const N=Q(this,v,Ie).call(this,h);N.data=g,N.capability.resolve()}clear(){var h;for(const g in s(this,f)){const{data:N}=s(this,f)[g];(h=N==null?void 0:N.bitmap)==null||h.close()}ct(this,f,Object.create(null))}}f=new WeakMap,v=new WeakSet,Ie=function(h){var g;return(g=s(this,f))[h]||(g[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){ot(this,S,null);ct(this,S,h),this.onContinue=null}get promise(){return s(this,S).capability.promise}cancel(h=0){s(this,S).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=s(this,S).operatorList;if(!h)return!1;const{annotationCanvasMap:g}=s(this,S);return h.form||h.canvas&&(g==null?void 0:g.size)>0}}S=new WeakMap,exports.RenderTask=RenderTask;const a=class a{constructor({callback:h,params:g,objs:N,commonObjs:l,annotationCanvasMap:P,operatorList:D,pageIndex:Z,canvasFactory:V,filterFactory:Y,useRequestAnimationFrame:H=!1,pdfBug:st=!1,pageColors:k=null}){this.callback=h,this.params=g,this.objs=N,this.commonObjs=l,this.annotationCanvasMap=P,this.operatorListIdx=null,this.operatorList=D,this._pageIndex=Z,this.canvasFactory=V,this.filterFactory=Y,this._pdfBug=st,this.pageColors=k,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=H===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:g}){var Z,V;if(this.cancelled)return;if(this._canvas){if(s(a,c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s(a,c).add(this._canvas)}this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:N,viewport:l,transform:P,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:g},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:P,viewport:l,transparency:h,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,(V=this.graphicsReadyCallback)==null||V.call(this)}cancel(h=null,g=0){var N;this.running=!1,this.cancelled=!0,(N=this.gfx)==null||N.endDrawing(),s(a,c).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,g))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s(a,c).delete(this._canvas),this.callback())))}};c=new WeakMap,ot(a,c,new WeakSet);let InternalRenderTask=a;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,u)=>{var E,p,w,yn,y;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=u(1),i=u(4),F=u(8);const R=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=R;class G{constructor(){ot(this,w);ot(this,E,!1);ot(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,b){const f=s(this,p).get(C);return f===void 0?b:Object.assign(b,f)}getRawValue(C){return s(this,p).get(C)}remove(C){if(s(this,p).delete(C),s(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of s(this,p).values())if(b instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,b){const f=s(this,p).get(C);let v=!1;if(f!==void 0)for(const[I,S]of Object.entries(b))f[I]!==S&&(v=!0,f[I]=S);else v=!0,s(this,p).set(C,b);v&&Q(this,w,yn).call(this),b instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(C){return s(this,p).has(C)}getAll(){return s(this,p).size>0?(0,n.objectFromMap)(s(this,p)):null}setAll(C){for(const[b,f]of Object.entries(C))this.setValue(b,f)}get size(){return s(this,p).size}resetModified(){s(this,E)&&(ct(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new A(this)}get serializable(){if(s(this,p).size===0)return R;const C=new Map,b=new F.MurmurHash3_64,f=[],v=Object.create(null);let I=!1;for(const[S,c]of s(this,p)){const a=c instanceof i.AnnotationEditor?c.serialize(!1,v):c;a&&(C.set(S,a),b.update(`${S}:${JSON.stringify(a)}`),I||(I=!!a.bitmap))}if(I)for(const S of C.values())S.bitmap&&f.push(S.bitmap);return C.size>0?{map:C,hash:b.hexdigest(),transfers:f}:R}}E=new WeakMap,p=new WeakMap,w=new WeakSet,yn=function(){s(this,E)||(ct(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=G;class A extends G{constructor(b){super();ot(this,y);const{map:f,hash:v,transfers:I}=b.serializable,S=structuredClone(f,I?{transfer:I}:null);ct(this,y,{map:S,hash:v,transfers:I})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return s(this,y)}}y=new WeakMap,t.PrintAnnotationStorage=A},(e,t,u)=>{var A,E,p,w,O,y,m,C,b,f,v,I,S,c,a,Oe,Ne,g,je,Be,_n,vn,An,$e,En;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=u(5),i=u(1),F=u(6);const H=class H{constructor(k){ot(this,a);ot(this,A,"");ot(this,E,!1);ot(this,p,null);ot(this,w,null);ot(this,O,null);ot(this,y,!1);ot(this,m,null);ot(this,C,this.focusin.bind(this));ot(this,b,this.focusout.bind(this));ot(this,f,!1);ot(this,v,!1);ot(this,I,!1);Qt(this,"_initialOptions",Object.create(null));Qt(this,"_uiManager",null);Qt(this,"_focusEventsAllowed",!0);Qt(this,"_l10nPromise",null);ot(this,S,!1);ot(this,c,H._zIndex++);this.constructor===H&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=k.parent,this.id=k.id,this.width=this.height=null,this.pageIndex=k.parent.pageIndex,this.name=k.name,this.div=null,this._uiManager=k.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=k.isCentered,this._structTreeParentId=null;const{rotation:q,rawDims:{pageWidth:it,pageHeight:M,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=q,this.pageRotation=(360+q-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[it,M],this.pageTranslation=[r,o];const[x,B]=this.parentDimensions;this.x=k.x/x,this.y=k.y/B,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(k){const q=new G({id:k.parent.getNextId(),parent:k.parent,uiManager:k._uiManager});q.annotationElementId=k.annotationElementId,q.deleted=!0,q._uiManager.addToAnnotationStorage(q)}static initialize(k,q=null){if(H._l10nPromise||(H._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(M=>[M,k.get(M)]))),q!=null&&q.strings)for(const M of q.strings)H._l10nPromise.set(M,k.get(M));if(H._borderLineWidth!==-1)return;const it=getComputedStyle(document.documentElement);H._borderLineWidth=parseFloat(it.getPropertyValue("--outline-width"))||0}static updateDefaultParams(k,q){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(k){return!1}static paste(k,q){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return s(this,S)}set _isDraggable(k){var q;ct(this,S,k),(q=this.div)==null||q.classList.toggle("draggable",k)}center(){const[k,q]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*q/(k*2),this.y+=this.width*k/(q*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*q/(k*2),this.y-=this.width*k/(q*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(k){this._uiManager.addCommands(k)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=s(this,c)}setParent(k){k!==null&&(this.pageIndex=k.pageIndex,this.pageDimensions=k.pageDimensions),this.parent=k}focusin(k){this._focusEventsAllowed&&(s(this,f)?ct(this,f,!1):this.parent.setSelected(this))}focusout(k){var it;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const q=k.relatedTarget;q!=null&&q.closest(`#${this.id}`)||(k.preventDefault(),(it=this.parent)!=null&&it.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(k,q,it,M){const[r,o]=this.parentDimensions;[it,M]=this.screenToPageTranslation(it,M),this.x=(k+it)/r,this.y=(q+M)/o,this.fixAndSetPosition()}translate(k,q){Q(this,a,Oe).call(this,this.parentDimensions,k,q)}translateInPage(k,q){Q(this,a,Oe).call(this,this.pageDimensions,k,q),this.div.scrollIntoView({block:"nearest"})}drag(k,q){const[it,M]=this.parentDimensions;if(this.x+=k/it,this.y+=q/M,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:$,y:U}=this.div.getBoundingClientRect();this.parent.findNewParent(this,$,U)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[x,B]=Q(this,a,Ne).call(this);r+=x,o+=B,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[k,q]=this.pageDimensions;let{x:it,y:M,width:r,height:o}=this;switch(r*=k,o*=q,it*=k,M*=q,this.rotation){case 0:it=Math.max(0,Math.min(k-r,it)),M=Math.max(0,Math.min(q-o,M));break;case 90:it=Math.max(0,Math.min(k-o,it)),M=Math.min(q,Math.max(r,M));break;case 180:it=Math.min(k,Math.max(r,it)),M=Math.min(q,Math.max(o,M));break;case 270:it=Math.min(k,Math.max(o,it)),M=Math.max(0,Math.min(q-r,M));break}this.x=it/=k,this.y=M/=q;const[x,B]=Q(this,a,Ne).call(this);it+=x,M+=B;const{style:$}=this.div;$.left=`${(100*it).toFixed(2)}%`,$.top=`${(100*M).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(k,q){var it;return Q(it=H,g,je).call(it,k,q,this.parentRotation)}pageTranslationToScreen(k,q){var it;return Q(it=H,g,je).call(it,k,q,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:k,pageDimensions:[q,it]}=this,M=q*k,r=it*k;return i.FeatureTest.isCSSRoundSupported?[Math.round(M),Math.round(r)]:[M,r]}setDims(k,q){var r;const[it,M]=this.parentDimensions;this.div.style.width=`${(100*k/it).toFixed(2)}%`,s(this,y)||(this.div.style.height=`${(100*q/M).toFixed(2)}%`),(r=s(this,p))==null||r.classList.toggle("small",k<H.SMALL_EDITOR_SIZE||q<H.SMALL_EDITOR_SIZE)}fixDims(){const{style:k}=this.div,{height:q,width:it}=k,M=it.endsWith("%"),r=!s(this,y)&&q.endsWith("%");if(M&&r)return;const[o,x]=this.parentDimensions;M||(k.width=`${(100*parseFloat(it)/o).toFixed(2)}%`),!s(this,y)&&!r&&(k.height=`${(100*parseFloat(q)/x).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(s(this,p))return;const k=ct(this,p,document.createElement("button"));k.className="altText";const q=await H._l10nPromise.get("editor_alt_text_button_label");k.textContent=q,k.setAttribute("aria-label",q),k.tabIndex="0",k.addEventListener("contextmenu",F.noContextMenu),k.addEventListener("pointerdown",it=>it.stopPropagation()),k.addEventListener("click",it=>{it.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),k.addEventListener("keydown",it=>{it.target===k&&it.key==="Enter"&&(it.preventDefault(),this._uiManager.editAltText(this))}),Q(this,a,$e).call(this),this.div.append(k),H.SMALL_EDITOR_SIZE||(H.SMALL_EDITOR_SIZE=Math.min(128,Math.round(k.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:s(this,A),decorative:s(this,E)}}set altTextData({altText:k,decorative:q}){s(this,A)===k&&s(this,E)===q||(ct(this,A,k),ct(this,E,q),Q(this,a,$e).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",s(this,C)),this.div.addEventListener("focusout",s(this,b));const[k,q]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*q/k).toFixed(2)}%`,this.div.style.maxHeight=`${(100*k/q).toFixed(2)}%`);const[it,M]=this.getInitialTranslation();return this.translate(it,M),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(k){const{isMac:q}=i.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&q){k.preventDefault();return}ct(this,f,!0),Q(this,a,En).call(this,k)}moveInDOM(){var k;(k=this.parent)==null||k.moveEditorInDOM(this)}_setParentAndPosition(k,q,it){k.changeParent(this),this.x=q,this.y=it,this.fixAndSetPosition()}getRect(k,q){const it=this.parentScale,[M,r]=this.pageDimensions,[o,x]=this.pageTranslation,B=k/it,$=q/it,U=this.x*M,K=this.y*r,rt=this.width*M,ut=this.height*r;switch(this.rotation){case 0:return[U+B+o,r-K-$-ut+x,U+B+rt+o,r-K-$+x];case 90:return[U+$+o,r-K+B+x,U+$+ut+o,r-K+B+rt+x];case 180:return[U-B-rt+o,r-K+$+x,U-B+o,r-K+$+ut+x];case 270:return[U-$-ut+o,r-K-B-rt+x,U-$+o,r-K-B+x];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(k,q){const[it,M,r,o]=k,x=r-it,B=o-M;switch(this.rotation){case 0:return[it,q-o,x,B];case 90:return[it,q-M,B,x];case 180:return[r,q-M,x,B];case 270:return[r,q-o,B,x];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ct(this,I,!0)}disableEditMode(){ct(this,I,!1)}isInEditMode(){return s(this,I)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var k,q;(k=this.div)==null||k.addEventListener("focusin",s(this,C)),(q=this.div)==null||q.addEventListener("focusout",s(this,b))}serialize(k=!1,q=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(k,q,it){const M=new this.prototype.constructor({parent:q,id:q.getNextId(),uiManager:it});M.rotation=k.rotation;const[r,o]=M.pageDimensions,[x,B,$,U]=M.getRectInCurrentCoords(k.rect,o);return M.x=x/r,M.y=B/o,M.width=$/r,M.height=U/o,M}remove(){var k;this.div.removeEventListener("focusin",s(this,C)),this.div.removeEventListener("focusout",s(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(k=s(this,p))==null||k.remove(),ct(this,p,null),ct(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Q(this,a,_n).call(this),s(this,m).classList.remove("hidden"))}select(){var k;this.makeResizable(),(k=this.div)==null||k.classList.add("selectedEditor")}unselect(){var k,q,it;(k=s(this,m))==null||k.classList.add("hidden"),(q=this.div)==null||q.classList.remove("selectedEditor"),(it=this.div)!=null&&it.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(k,q){}disableEditing(){s(this,p)&&(s(this,p).hidden=!0)}enableEditing(){s(this,p)&&(s(this,p).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return s(this,v)}set isEditing(k){ct(this,v,k),this.parent&&(k?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(k,q){ct(this,y,!0);const it=k/q,{style:M}=this.div;M.aspectRatio=it,M.height="auto"}static get MIN_SIZE(){return 16}};A=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakMap,v=new WeakMap,I=new WeakMap,S=new WeakMap,c=new WeakMap,a=new WeakSet,Oe=function([k,q],it,M){[it,M]=this.screenToPageTranslation(it,M),this.x+=it/k,this.y+=M/q,this.fixAndSetPosition()},Ne=function(){const[k,q]=this.parentDimensions,{_borderLineWidth:it}=H,M=it/k,r=it/q;switch(this.rotation){case 90:return[-M,r];case 180:return[M,r];case 270:return[M,-r];default:return[-M,-r]}},g=new WeakSet,je=function(k,q,it){switch(it){case 90:return[q,-k];case 180:return[-k,-q];case 270:return[-q,k];default:return[k,q]}},Be=function(k){switch(k){case 90:{const[q,it]=this.pageDimensions;return[0,-q/it,it/q,0]}case 180:return[-1,0,0,-1];case 270:{const[q,it]=this.pageDimensions;return[0,q/it,-it/q,0]}default:return[1,0,0,1]}},_n=function(){if(s(this,m))return;ct(this,m,document.createElement("div")),s(this,m).classList.add("resizers");const k=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||k.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const q of k){const it=document.createElement("div");s(this,m).append(it),it.classList.add("resizer",q),it.addEventListener("pointerdown",Q(this,a,vn).bind(this,q)),it.addEventListener("contextmenu",F.noContextMenu)}this.div.prepend(s(this,m))},vn=function(k,q){q.preventDefault();const{isMac:it}=i.FeatureTest.platform;if(q.button!==0||q.ctrlKey&&it)return;const M=Q(this,a,An).bind(this,k),r=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};window.addEventListener("pointermove",M,o);const x=this.x,B=this.y,$=this.width,U=this.height,K=this.parent.div.style.cursor,rt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(q.target).cursor;const ut=()=>{this._isDraggable=r,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",M,o),this.parent.div.style.cursor=K,this.div.style.cursor=rt;const ft=this.x,yt=this.y,bt=this.width,vt=this.height;ft===x&&yt===B&&bt===$&&vt===U||this.addCommands({cmd:()=>{this.width=bt,this.height=vt,this.x=ft,this.y=yt;const[tt,et]=this.parentDimensions;this.setDims(tt*bt,et*vt),this.fixAndSetPosition()},undo:()=>{this.width=$,this.height=U,this.x=x,this.y=B;const[tt,et]=this.parentDimensions;this.setDims(tt*$,et*U),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},An=function(k,q){const[it,M]=this.parentDimensions,r=this.x,o=this.y,x=this.width,B=this.height,$=H.MIN_SIZE/it,U=H.MIN_SIZE/M,K=Ft=>Math.round(Ft*1e4)/1e4,rt=Q(this,a,Be).call(this,this.rotation),ut=(Ft,Nt)=>[rt[0]*Ft+rt[2]*Nt,rt[1]*Ft+rt[3]*Nt],ft=Q(this,a,Be).call(this,360-this.rotation),yt=(Ft,Nt)=>[ft[0]*Ft+ft[2]*Nt,ft[1]*Ft+ft[3]*Nt];let bt,vt,tt=!1,et=!1;switch(k){case"topLeft":tt=!0,bt=(Ft,Nt)=>[0,0],vt=(Ft,Nt)=>[Ft,Nt];break;case"topMiddle":bt=(Ft,Nt)=>[Ft/2,0],vt=(Ft,Nt)=>[Ft/2,Nt];break;case"topRight":tt=!0,bt=(Ft,Nt)=>[Ft,0],vt=(Ft,Nt)=>[0,Nt];break;case"middleRight":et=!0,bt=(Ft,Nt)=>[Ft,Nt/2],vt=(Ft,Nt)=>[0,Nt/2];break;case"bottomRight":tt=!0,bt=(Ft,Nt)=>[Ft,Nt],vt=(Ft,Nt)=>[0,0];break;case"bottomMiddle":bt=(Ft,Nt)=>[Ft/2,Nt],vt=(Ft,Nt)=>[Ft/2,0];break;case"bottomLeft":tt=!0,bt=(Ft,Nt)=>[0,Nt],vt=(Ft,Nt)=>[Ft,0];break;case"middleLeft":et=!0,bt=(Ft,Nt)=>[0,Nt/2],vt=(Ft,Nt)=>[Ft,Nt/2];break}const T=bt(x,B),W=vt(x,B);let J=ut(...W);const at=K(r+J[0]),gt=K(o+J[1]);let St=1,Et=1,[nt,Tt]=this.screenToPageTranslation(q.movementX,q.movementY);if([nt,Tt]=yt(nt/it,Tt/M),tt){const Ft=Math.hypot(x,B);St=Et=Math.max(Math.min(Math.hypot(W[0]-T[0]-nt,W[1]-T[1]-Tt)/Ft,1/x,1/B),$/x,U/B)}else et?St=Math.max($,Math.min(1,Math.abs(W[0]-T[0]-nt)))/x:Et=Math.max(U,Math.min(1,Math.abs(W[1]-T[1]-Tt)))/B;const Pt=K(x*St),Wt=K(B*Et);J=ut(...vt(Pt,Wt));const $t=at-J[0],qt=gt-J[1];this.width=Pt,this.height=Wt,this.x=$t,this.y=qt,this.setDims(it*Pt,M*Wt),this.fixAndSetPosition()},$e=async function(){var it;const k=s(this,p);if(!k)return;if(!s(this,A)&&!s(this,E)){k.classList.remove("done"),(it=s(this,w))==null||it.remove();return}H._l10nPromise.get("editor_alt_text_edit_button_label").then(M=>{k.setAttribute("aria-label",M)});let q=s(this,w);if(!q){ct(this,w,q=document.createElement("span")),q.className="tooltip",q.setAttribute("role","tooltip");const M=q.id=`alt-text-tooltip-${this.id}`;k.setAttribute("aria-describedby",M);const r=100;k.addEventListener("mouseenter",()=>{ct(this,O,setTimeout(()=>{ct(this,O,null),s(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},r))}),k.addEventListener("mouseleave",()=>{var o;clearTimeout(s(this,O)),ct(this,O,null),(o=s(this,w))==null||o.classList.remove("show")})}k.classList.add("done"),q.innerText=s(this,E)?await H._l10nPromise.get("editor_alt_text_decorative_tooltip"):s(this,A),q.parentNode||k.append(q)},En=function(k){if(!this._isDraggable)return;const q=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let it,M;q&&(it={passive:!0,capture:!0},M=o=>{const[x,B]=this.screenToPageTranslation(o.movementX,o.movementY);this._uiManager.dragSelectedEditors(x,B)},window.addEventListener("pointermove",M,it));const r=()=>{if(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),q&&window.removeEventListener("pointermove",M,it),ct(this,f,!1),!this._uiManager.endDragSession()){const{isMac:o}=i.FeatureTest.platform;k.ctrlKey&&!o||k.shiftKey||k.metaKey&&o?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",r),window.addEventListener("blur",r)},ot(H,g),Qt(H,"_borderLineWidth",-1),Qt(H,"_colorManager",new n.ColorManager),Qt(H,"_zIndex",1),Qt(H,"SMALL_EDITOR_SIZE",0);let R=H;t.AnnotationEditor=R;class G extends R{constructor(k){super(k),this.annotationElementId=k.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,u)=>{var y,m,C,b,f,Ue,S,c,a,d,h,xn,l,P,D,Z,V,Y,H,st,k,q,it,M,r,o,x,B,$,U,K,rt,ut,ft,yt,bt,vt,tt,et,T,W,J,at,gt,St,Et,nt,Sn,We,ze,Ee,He,Ge,ee,pe,Cn,Pn,Ve,fe,qe;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=F,t.opacityToHex=R;var n=u(1),i=u(6);function F(Vt,z,mt){for(const wt of mt)z.addEventListener(wt,Vt[wt].bind(Vt))}function R(Vt){return Math.round(Math.min(255,Math.max(1,255*Vt))).toString(16).padStart(2,"0")}class G{constructor(){ot(this,y,0)}getId(){return`${n.AnnotationEditorPrefix}${he(this,y)._++}`}}y=new WeakMap;const I=class I{constructor(){ot(this,f);ot(this,m,(0,n.getUuid)());ot(this,C,0);ot(this,b,null)}static get _isSVGFittingCanvas(){const z='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',wt=new OffscreenCanvas(1,3).getContext("2d"),It=new Image;It.src=z;const Bt=It.decode().then(()=>(wt.drawImage(It,0,0,1,1,0,0,1,3),new Uint32Array(wt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",Bt)}async getFromFile(z){const{lastModified:mt,name:wt,size:It,type:Bt}=z;return Q(this,f,Ue).call(this,`${mt}_${wt}_${It}_${Bt}`,z)}async getFromUrl(z){return Q(this,f,Ue).call(this,z,z)}async getFromId(z){s(this,b)||ct(this,b,new Map);const mt=s(this,b).get(z);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(z){const mt=s(this,b).get(z);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(z){s(this,b)||ct(this,b,new Map);const mt=s(this,b).get(z);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(z){return z.startsWith(`image_${s(this,m)}_`)}};m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakSet,Ue=async function(z,mt){s(this,b)||ct(this,b,new Map);let wt=s(this,b).get(z);if(wt===null)return null;if(wt!=null&&wt.bitmap)return wt.refCounter+=1,wt;try{wt||(wt={bitmap:null,id:`image_${s(this,m)}_${he(this,C)._++}`,refCounter:0,isSvg:!1});let It;if(typeof mt=="string"){wt.url=mt;const Bt=await fetch(mt);if(!Bt.ok)throw new Error(Bt.statusText);It=await Bt.blob()}else It=wt.file=mt;if(It.type==="image/svg+xml"){const Bt=I._isSVGFittingCanvas,kt=new FileReader,j=new Image,L=new Promise((X,ht)=>{j.onload=()=>{wt.bitmap=j,wt.isSvg=!0,X()},kt.onload=async()=>{const pt=wt.svgUrl=kt.result;j.src=await Bt?`${pt}#svgView(preserveAspectRatio(none))`:pt},j.onerror=kt.onerror=ht});kt.readAsDataURL(It),await L}else wt.bitmap=await createImageBitmap(It);wt.refCounter=1}catch(It){console.error(It),wt=null}return s(this,b).set(z,wt),wt&&s(this,b).set(wt.id,wt),wt};let A=I;class E{constructor(z=128){ot(this,S,[]);ot(this,c,!1);ot(this,a);ot(this,d,-1);ct(this,a,z)}add({cmd:z,undo:mt,mustExec:wt,type:It=NaN,overwriteIfSameType:Bt=!1,keepUndo:kt=!1}){if(wt&&z(),s(this,c))return;const j={cmd:z,undo:mt,type:It};if(s(this,d)===-1){s(this,S).length>0&&(s(this,S).length=0),ct(this,d,0),s(this,S).push(j);return}if(Bt&&s(this,S)[s(this,d)].type===It){kt&&(j.undo=s(this,S)[s(this,d)].undo),s(this,S)[s(this,d)]=j;return}const L=s(this,d)+1;L===s(this,a)?s(this,S).splice(0,1):(ct(this,d,L),L<s(this,S).length&&s(this,S).splice(L)),s(this,S).push(j)}undo(){s(this,d)!==-1&&(ct(this,c,!0),s(this,S)[s(this,d)].undo(),ct(this,c,!1),ct(this,d,s(this,d)-1))}redo(){s(this,d)<s(this,S).length-1&&(ct(this,d,s(this,d)+1),ct(this,c,!0),s(this,S)[s(this,d)].cmd(),ct(this,c,!1))}hasSomethingToUndo(){return s(this,d)!==-1}hasSomethingToRedo(){return s(this,d)<s(this,S).length-1}destroy(){ct(this,S,null)}}S=new WeakMap,c=new WeakMap,a=new WeakMap,d=new WeakMap,t.CommandManager=E;class p{constructor(z){ot(this,h);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=n.FeatureTest.platform;for(const[wt,It,Bt={}]of z)for(const kt of wt){const j=kt.startsWith("mac+");mt&&j?(this.callbacks.set(kt.slice(4),{callback:It,options:Bt}),this.allKeys.add(kt.split("+").at(-1))):!mt&&!j&&(this.callbacks.set(kt,{callback:It,options:Bt}),this.allKeys.add(kt.split("+").at(-1)))}}exec(z,mt){if(!this.allKeys.has(mt.key))return;const wt=this.callbacks.get(Q(this,h,xn).call(this,mt));if(!wt)return;const{callback:It,options:{bubbles:Bt=!1,args:kt=[],checker:j=null}}=wt;j&&!j(z,mt)||(It.bind(z,...kt)(),Bt||(mt.stopPropagation(),mt.preventDefault()))}}h=new WeakSet,xn=function(z){z.altKey&&this.buffer.push("alt"),z.ctrlKey&&this.buffer.push("ctrl"),z.metaKey&&this.buffer.push("meta"),z.shiftKey&&this.buffer.push("shift"),this.buffer.push(z.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt},t.KeyboardManager=p;const N=class N{get _colors(){const z=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(z),(0,n.shadow)(this,"_colors",z)}convert(z){const mt=(0,i.getRGB)(z);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[wt,It]of this._colors)if(It.every((Bt,kt)=>Bt===mt[kt]))return N._colorsMapping.get(wt);return mt}getHexCode(z){const mt=this._colors.get(z);return mt?n.Util.makeHexColor(...mt):z}};Qt(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=N;t.ColorManager=w;const Xt=class Xt{constructor(z,mt,wt,It,Bt,kt){ot(this,nt);ot(this,l,null);ot(this,P,new Map);ot(this,D,new Map);ot(this,Z,null);ot(this,V,null);ot(this,Y,new E);ot(this,H,0);ot(this,st,new Set);ot(this,k,null);ot(this,q,null);ot(this,it,new Set);ot(this,M,null);ot(this,r,new G);ot(this,o,!1);ot(this,x,!1);ot(this,B,null);ot(this,$,n.AnnotationEditorType.NONE);ot(this,U,new Set);ot(this,K,null);ot(this,rt,this.blur.bind(this));ot(this,ut,this.focus.bind(this));ot(this,ft,this.copy.bind(this));ot(this,yt,this.cut.bind(this));ot(this,bt,this.paste.bind(this));ot(this,vt,this.keydown.bind(this));ot(this,tt,this.onEditingAction.bind(this));ot(this,et,this.onPageChanging.bind(this));ot(this,T,this.onScaleChanging.bind(this));ot(this,W,this.onRotationChanging.bind(this));ot(this,J,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ot(this,at,[0,0]);ot(this,gt,null);ot(this,St,null);ot(this,Et,null);ct(this,St,z),ct(this,Et,mt),ct(this,Z,wt),this._eventBus=It,this._eventBus._on("editingaction",s(this,tt)),this._eventBus._on("pagechanging",s(this,et)),this._eventBus._on("scalechanging",s(this,T)),this._eventBus._on("rotationchanging",s(this,W)),ct(this,V,Bt.annotationStorage),ct(this,M,Bt.filterFactory),ct(this,K,kt),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const z=Xt.prototype,mt=Bt=>{const{activeElement:kt}=document;return kt&&s(Bt,St).contains(kt)&&Bt.hasSomethingToControl()},wt=this.TRANSLATE_SMALL,It=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],z.selectAll],[["ctrl+z","mac+meta+z"],z.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],z.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],z.delete],[["Escape","mac+Escape"],z.unselectAll],[["ArrowLeft","mac+ArrowLeft"],z.translateSelectedEditors,{args:[-wt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],z.translateSelectedEditors,{args:[-It,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],z.translateSelectedEditors,{args:[wt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],z.translateSelectedEditors,{args:[It,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],z.translateSelectedEditors,{args:[0,-wt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],z.translateSelectedEditors,{args:[0,-It],checker:mt}],[["ArrowDown","mac+ArrowDown"],z.translateSelectedEditors,{args:[0,wt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],z.translateSelectedEditors,{args:[0,It],checker:mt}]]))}destroy(){Q(this,nt,Ee).call(this),Q(this,nt,We).call(this),this._eventBus._off("editingaction",s(this,tt)),this._eventBus._off("pagechanging",s(this,et)),this._eventBus._off("scalechanging",s(this,T)),this._eventBus._off("rotationchanging",s(this,W));for(const z of s(this,D).values())z.destroy();s(this,D).clear(),s(this,P).clear(),s(this,it).clear(),ct(this,l,null),s(this,U).clear(),s(this,Y).destroy(),s(this,Z).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",s(this,K)?s(this,M).addHCMFilter(s(this,K).foreground,s(this,K).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(s(this,St)).direction)}editAltText(z){var mt;(mt=s(this,Z))==null||mt.editAltText(this,z)}onPageChanging({pageNumber:z}){ct(this,H,z-1)}focusMainContainer(){s(this,St).focus()}findParent(z,mt){for(const wt of s(this,D).values()){const{x:It,y:Bt,width:kt,height:j}=wt.div.getBoundingClientRect();if(z>=It&&z<=It+kt&&mt>=Bt&&mt<=Bt+j)return wt}return null}disableUserSelect(z=!1){s(this,Et).classList.toggle("noUserSelect",z)}addShouldRescale(z){s(this,it).add(z)}removeShouldRescale(z){s(this,it).delete(z)}onScaleChanging({scale:z}){this.commitOrRemove(),this.viewParameters.realScale=z*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of s(this,it))mt.onScaleChanging()}onRotationChanging({pagesRotation:z}){this.commitOrRemove(),this.viewParameters.rotation=z}addToAnnotationStorage(z){!z.isEmpty()&&s(this,V)&&!s(this,V).has(z.id)&&s(this,V).setValue(z.id,z)}blur(){if(!this.hasSelection)return;const{activeElement:z}=document;for(const mt of s(this,U))if(mt.div.contains(z)){ct(this,B,[mt,z]),mt._focusEventsAllowed=!1;break}}focus(){if(!s(this,B))return;const[z,mt]=s(this,B);ct(this,B,null),mt.addEventListener("focusin",()=>{z._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){Q(this,nt,ze).call(this),Q(this,nt,He).call(this)}removeEditListeners(){Q(this,nt,Ee).call(this),Q(this,nt,Ge).call(this)}copy(z){var wt;if(z.preventDefault(),(wt=s(this,l))==null||wt.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const It of s(this,U)){const Bt=It.serialize(!0);Bt&&mt.push(Bt)}mt.length!==0&&z.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(z){this.copy(z),this.delete()}paste(z){z.preventDefault();const{clipboardData:mt}=z;for(const Bt of mt.items)for(const kt of s(this,q))if(kt.isHandlingMimeForPasting(Bt.type)){kt.paste(Bt,this.currentLayer);return}let wt=mt.getData("application/pdfjs");if(!wt)return;try{wt=JSON.parse(wt)}catch(Bt){(0,n.warn)(`paste: "${Bt.message}".`);return}if(!Array.isArray(wt))return;this.unselectAll();const It=this.currentLayer;try{const Bt=[];for(const L of wt){const X=It.deserialize(L);if(!X)return;Bt.push(X)}const kt=()=>{for(const L of Bt)Q(this,nt,Ve).call(this,L);Q(this,nt,qe).call(this,Bt)},j=()=>{for(const L of Bt)L.remove()};this.addCommands({cmd:kt,undo:j,mustExec:!0})}catch(Bt){(0,n.warn)(`paste: "${Bt.message}".`)}}keydown(z){var mt;(mt=this.getActive())!=null&&mt.shouldGetKeyboardEvents()||Xt._keyboardManager.exec(this,z)}onEditingAction(z){["undo","redo","delete","selectAll"].includes(z.name)&&this[z.name]()}setEditingState(z){z?(Q(this,nt,Sn).call(this),Q(this,nt,ze).call(this),Q(this,nt,He).call(this),Q(this,nt,ee).call(this,{isEditing:s(this,$)!==n.AnnotationEditorType.NONE,isEmpty:Q(this,nt,fe).call(this),hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),hasSelectedEditor:!1})):(Q(this,nt,We).call(this),Q(this,nt,Ee).call(this),Q(this,nt,Ge).call(this),Q(this,nt,ee).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(z){if(!s(this,q)){ct(this,q,z);for(const mt of s(this,q))Q(this,nt,pe).call(this,mt.defaultPropertiesToUpdate)}}getId(){return s(this,r).getId()}get currentLayer(){return s(this,D).get(s(this,H))}getLayer(z){return s(this,D).get(z)}get currentPageIndex(){return s(this,H)}addLayer(z){s(this,D).set(z.pageIndex,z),s(this,o)?z.enable():z.disable()}removeLayer(z){s(this,D).delete(z.pageIndex)}updateMode(z,mt=null){if(s(this,$)!==z){if(ct(this,$,z),z===n.AnnotationEditorType.NONE){this.setEditingState(!1),Q(this,nt,Pn).call(this);return}this.setEditingState(!0),Q(this,nt,Cn).call(this),this.unselectAll();for(const wt of s(this,D).values())wt.updateMode(z);if(mt){for(const wt of s(this,P).values())if(wt.annotationElementId===mt){this.setSelected(wt),wt.enterInEditMode();break}}}}updateToolbar(z){z!==s(this,$)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:z})}updateParams(z,mt){if(s(this,q)){if(z===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(z);return}for(const wt of s(this,U))wt.updateParams(z,mt);for(const wt of s(this,q))wt.updateDefaultParams(z,mt)}}enableWaiting(z=!1){if(s(this,x)!==z){ct(this,x,z);for(const mt of s(this,D).values())z?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",z)}}getEditors(z){const mt=[];for(const wt of s(this,P).values())wt.pageIndex===z&&mt.push(wt);return mt}getEditor(z){return s(this,P).get(z)}addEditor(z){s(this,P).set(z.id,z)}removeEditor(z){var mt;s(this,P).delete(z.id),this.unselect(z),(!z.annotationElementId||!s(this,st).has(z.annotationElementId))&&((mt=s(this,V))==null||mt.remove(z.id))}addDeletedAnnotationElement(z){s(this,st).add(z.annotationElementId),z.deleted=!0}isDeletedAnnotationElement(z){return s(this,st).has(z)}removeDeletedAnnotationElement(z){s(this,st).delete(z.annotationElementId),z.deleted=!1}setActiveEditor(z){s(this,l)!==z&&(ct(this,l,z),z&&Q(this,nt,pe).call(this,z.propertiesToUpdate))}toggleSelected(z){if(s(this,U).has(z)){s(this,U).delete(z),z.unselect(),Q(this,nt,ee).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,U).add(z),z.select(),Q(this,nt,pe).call(this,z.propertiesToUpdate),Q(this,nt,ee).call(this,{hasSelectedEditor:!0})}setSelected(z){for(const mt of s(this,U))mt!==z&&mt.unselect();s(this,U).clear(),s(this,U).add(z),z.select(),Q(this,nt,pe).call(this,z.propertiesToUpdate),Q(this,nt,ee).call(this,{hasSelectedEditor:!0})}isSelected(z){return s(this,U).has(z)}unselect(z){z.unselect(),s(this,U).delete(z),Q(this,nt,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return s(this,U).size!==0}undo(){s(this,Y).undo(),Q(this,nt,ee).call(this,{hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Q(this,nt,fe).call(this)})}redo(){s(this,Y).redo(),Q(this,nt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),isEmpty:Q(this,nt,fe).call(this)})}addCommands(z){s(this,Y).add(z),Q(this,nt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Q(this,nt,fe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const z=[...s(this,U)],mt=()=>{for(const It of z)It.remove()},wt=()=>{for(const It of z)Q(this,nt,Ve).call(this,It)};this.addCommands({cmd:mt,undo:wt,mustExec:!0})}commitOrRemove(){var z;(z=s(this,l))==null||z.commitOrRemove()}hasSomethingToControl(){return s(this,l)||this.hasSelection}selectAll(){for(const z of s(this,U))z.commit();Q(this,nt,qe).call(this,s(this,P).values())}unselectAll(){if(s(this,l)){s(this,l).commitOrRemove();return}if(this.hasSelection){for(const z of s(this,U))z.unselect();s(this,U).clear(),Q(this,nt,ee).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(z,mt,wt=!1){if(wt||this.commitOrRemove(),!this.hasSelection)return;s(this,at)[0]+=z,s(this,at)[1]+=mt;const[It,Bt]=s(this,at),kt=[...s(this,U)],j=1e3;s(this,gt)&&clearTimeout(s(this,gt)),ct(this,gt,setTimeout(()=>{ct(this,gt,null),s(this,at)[0]=s(this,at)[1]=0,this.addCommands({cmd:()=>{for(const L of kt)s(this,P).has(L.id)&&L.translateInPage(It,Bt)},undo:()=>{for(const L of kt)s(this,P).has(L.id)&&L.translateInPage(-It,-Bt)},mustExec:!1})},j));for(const L of kt)L.translateInPage(z,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ct(this,k,new Map);for(const z of s(this,U))s(this,k).set(z,{savedX:z.x,savedY:z.y,savedPageIndex:z.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!s(this,k))return!1;this.disableUserSelect(!1);const z=s(this,k);ct(this,k,null);let mt=!1;for(const[{x:It,y:Bt,pageIndex:kt},j]of z)j.newX=It,j.newY=Bt,j.newPageIndex=kt,mt||(mt=It!==j.savedX||Bt!==j.savedY||kt!==j.savedPageIndex);if(!mt)return!1;const wt=(It,Bt,kt,j)=>{if(s(this,P).has(It.id)){const L=s(this,D).get(j);L?It._setParentAndPosition(L,Bt,kt):(It.pageIndex=j,It.x=Bt,It.y=kt)}};return this.addCommands({cmd:()=>{for(const[It,{newX:Bt,newY:kt,newPageIndex:j}]of z)wt(It,Bt,kt,j)},undo:()=>{for(const[It,{savedX:Bt,savedY:kt,savedPageIndex:j}]of z)wt(It,Bt,kt,j)},mustExec:!0}),!0}dragSelectedEditors(z,mt){if(s(this,k))for(const wt of s(this,k).keys())wt.drag(z,mt)}rebuild(z){if(z.parent===null){const mt=this.getLayer(z.pageIndex);mt?(mt.changeParent(z),mt.addOrRebuild(z)):(this.addEditor(z),this.addToAnnotationStorage(z),z.rebuild())}else z.parent.addOrRebuild(z)}isActive(z){return s(this,l)===z}getActive(){return s(this,l)}getMode(){return s(this,$)}get imageManager(){return(0,n.shadow)(this,"imageManager",new A)}};l=new WeakMap,P=new WeakMap,D=new WeakMap,Z=new WeakMap,V=new WeakMap,Y=new WeakMap,H=new WeakMap,st=new WeakMap,k=new WeakMap,q=new WeakMap,it=new WeakMap,M=new WeakMap,r=new WeakMap,o=new WeakMap,x=new WeakMap,B=new WeakMap,$=new WeakMap,U=new WeakMap,K=new WeakMap,rt=new WeakMap,ut=new WeakMap,ft=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,tt=new WeakMap,et=new WeakMap,T=new WeakMap,W=new WeakMap,J=new WeakMap,at=new WeakMap,gt=new WeakMap,St=new WeakMap,Et=new WeakMap,nt=new WeakSet,Sn=function(){window.addEventListener("focus",s(this,ut)),window.addEventListener("blur",s(this,rt))},We=function(){window.removeEventListener("focus",s(this,ut)),window.removeEventListener("blur",s(this,rt))},ze=function(){window.addEventListener("keydown",s(this,vt),{capture:!0})},Ee=function(){window.removeEventListener("keydown",s(this,vt),{capture:!0})},He=function(){document.addEventListener("copy",s(this,ft)),document.addEventListener("cut",s(this,yt)),document.addEventListener("paste",s(this,bt))},Ge=function(){document.removeEventListener("copy",s(this,ft)),document.removeEventListener("cut",s(this,yt)),document.removeEventListener("paste",s(this,bt))},ee=function(z){Object.entries(z).some(([wt,It])=>s(this,J)[wt]!==It)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,J),z)})},pe=function(z){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:z})},Cn=function(){if(!s(this,o)){ct(this,o,!0);for(const z of s(this,D).values())z.enable()}},Pn=function(){if(this.unselectAll(),s(this,o)){ct(this,o,!1);for(const z of s(this,D).values())z.disable()}},Ve=function(z){const mt=s(this,D).get(z.pageIndex);mt?mt.addOrRebuild(z):this.addEditor(z)},fe=function(){if(s(this,P).size===0)return!0;if(s(this,P).size===1)for(const z of s(this,P).values())return z.isEmpty();return!1},qe=function(z){s(this,U).clear();for(const mt of z)mt.isEmpty()||(s(this,U).add(mt),mt.select());Q(this,nt,ee).call(this,{hasSelectedEditor:!0})},Qt(Xt,"TRANSLATE_SMALL",1),Qt(Xt,"TRANSLATE_BIG",10);let O=Xt;t.AnnotationEditorUIManager=O},(e,t,u)=>{var H,st,k,q,it,M,r,o,x,B,$,U,le,ce,Xe,xe,Se,ge,me;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=d,t.getColorValues=P,t.getCurrentTransform=D,t.getCurrentTransformInverse=Z,t.getFilenameFromUrl=f,t.getPdfFilenameFromUrl=v,t.getRGB=l,t.getXfaPageViewport=N,t.isDataScheme=C,t.isPdfFile=b,t.isValidFetchUrl=S,t.loadScript=a,t.noContextMenu=c,t.setLayerDimensions=V;var n=u(7),i=u(1);const F="http://www.w3.org/2000/svg",Y=class Y{};Qt(Y,"CSS",96),Qt(Y,"PDF",72),Qt(Y,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF);let R=Y;t.PixelsPerInch=R;class G extends n.BaseFilterFactory{constructor({docId:T,ownerDocument:W=globalThis.document}={}){super();ot(this,U);ot(this,H);ot(this,st);ot(this,k);ot(this,q);ot(this,it);ot(this,M);ot(this,r);ot(this,o);ot(this,x);ot(this,B);ot(this,$,0);ct(this,k,T),ct(this,q,W)}addFilter(T){if(!T)return"none";let W=s(this,U,le).get(T);if(W)return W;let J,at,gt,St;if(T.length===1){const Pt=T[0],Wt=new Array(256);for(let $t=0;$t<256;$t++)Wt[$t]=Pt[$t]/255;St=J=at=gt=Wt.join(",")}else{const[Pt,Wt,$t]=T,qt=new Array(256),Ft=new Array(256),Nt=new Array(256);for(let Ht=0;Ht<256;Ht++)qt[Ht]=Pt[Ht]/255,Ft[Ht]=Wt[Ht]/255,Nt[Ht]=$t[Ht]/255;J=qt.join(","),at=Ft.join(","),gt=Nt.join(","),St=`${J}${at}${gt}`}if(W=s(this,U,le).get(St),W)return s(this,U,le).set(T,W),W;const Et=`g_${s(this,k)}_transfer_map_${he(this,$)._++}`,nt=`url(#${Et})`;s(this,U,le).set(T,nt),s(this,U,le).set(St,nt);const Tt=Q(this,U,xe).call(this,Et);return Q(this,U,ge).call(this,J,at,gt,Tt),nt}addHCMFilter(T,W){var Wt;const J=`${T}-${W}`;if(s(this,M)===J)return s(this,r);if(ct(this,M,J),ct(this,r,"none"),(Wt=s(this,it))==null||Wt.remove(),!T||!W)return s(this,r);const at=Q(this,U,me).call(this,T);T=i.Util.makeHexColor(...at);const gt=Q(this,U,me).call(this,W);if(W=i.Util.makeHexColor(...gt),s(this,U,ce).style.color="",T==="#000000"&&W==="#ffffff"||T===W)return s(this,r);const St=new Array(256);for(let $t=0;$t<=255;$t++){const qt=$t/255;St[$t]=qt<=.03928?qt/12.92:((qt+.055)/1.055)**2.4}const Et=St.join(","),nt=`g_${s(this,k)}_hcm_filter`,Tt=ct(this,o,Q(this,U,xe).call(this,nt));Q(this,U,ge).call(this,Et,Et,Et,Tt),Q(this,U,Xe).call(this,Tt);const Pt=($t,qt)=>{const Ft=at[$t]/255,Nt=gt[$t]/255,Ht=new Array(qt+1);for(let Yt=0;Yt<=qt;Yt++)Ht[Yt]=Ft+Yt/qt*(Nt-Ft);return Ht.join(",")};return Q(this,U,ge).call(this,Pt(0,5),Pt(1,5),Pt(2,5),Tt),ct(this,r,`url(#${nt})`),s(this,r)}addHighlightHCMFilter(T,W,J,at){var Nt;const gt=`${T}-${W}-${J}-${at}`;if(s(this,x)===gt)return s(this,B);if(ct(this,x,gt),ct(this,B,"none"),(Nt=s(this,o))==null||Nt.remove(),!T||!W)return s(this,B);const[St,Et]=[T,W].map(Q(this,U,me).bind(this));let nt=Math.round(.2126*St[0]+.7152*St[1]+.0722*St[2]),Tt=Math.round(.2126*Et[0]+.7152*Et[1]+.0722*Et[2]),[Pt,Wt]=[J,at].map(Q(this,U,me).bind(this));Tt<nt&&([nt,Tt,Pt,Wt]=[Tt,nt,Wt,Pt]),s(this,U,ce).style.color="";const $t=(Ht,Yt,xt)=>{const lt=new Array(256),dt=(Tt-nt)/xt,Mt=Ht/255,Xt=(Yt-Ht)/(255*xt);let Vt=0;for(let z=0;z<=xt;z++){const mt=Math.round(nt+z*dt),wt=Mt+z*Xt;for(let It=Vt;It<=mt;It++)lt[It]=wt;Vt=mt+1}for(let z=Vt;z<256;z++)lt[z]=lt[Vt-1];return lt.join(",")},qt=`g_${s(this,k)}_hcm_highlight_filter`,Ft=ct(this,o,Q(this,U,xe).call(this,qt));return Q(this,U,Xe).call(this,Ft),Q(this,U,ge).call(this,$t(Pt[0],Wt[0],5),$t(Pt[1],Wt[1],5),$t(Pt[2],Wt[2],5),Ft),ct(this,B,`url(#${qt})`),s(this,B)}destroy(T=!1){T&&(s(this,r)||s(this,B))||(s(this,st)&&(s(this,st).parentNode.parentNode.remove(),ct(this,st,null)),s(this,H)&&(s(this,H).clear(),ct(this,H,null)),ct(this,$,0))}}H=new WeakMap,st=new WeakMap,k=new WeakMap,q=new WeakMap,it=new WeakMap,M=new WeakMap,r=new WeakMap,o=new WeakMap,x=new WeakMap,B=new WeakMap,$=new WeakMap,U=new WeakSet,le=function(){return s(this,H)||ct(this,H,new Map)},ce=function(){if(!s(this,st)){const T=s(this,q).createElement("div"),{style:W}=T;W.visibility="hidden",W.contain="strict",W.width=W.height=0,W.position="absolute",W.top=W.left=0,W.zIndex=-1;const J=s(this,q).createElementNS(F,"svg");J.setAttribute("width",0),J.setAttribute("height",0),ct(this,st,s(this,q).createElementNS(F,"defs")),T.append(J),J.append(s(this,st)),s(this,q).body.append(T)}return s(this,st)},Xe=function(T){const W=s(this,q).createElementNS(F,"feColorMatrix");W.setAttribute("type","matrix"),W.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),T.append(W)},xe=function(T){const W=s(this,q).createElementNS(F,"filter");return W.setAttribute("color-interpolation-filters","sRGB"),W.setAttribute("id",T),s(this,U,ce).append(W),W},Se=function(T,W,J){const at=s(this,q).createElementNS(F,W);at.setAttribute("type","discrete"),at.setAttribute("tableValues",J),T.append(at)},ge=function(T,W,J,at){const gt=s(this,q).createElementNS(F,"feComponentTransfer");at.append(gt),Q(this,U,Se).call(this,gt,"feFuncR",T),Q(this,U,Se).call(this,gt,"feFuncG",W),Q(this,U,Se).call(this,gt,"feFuncB",J)},me=function(T){return s(this,U,ce).style.color=T,l(getComputedStyle(s(this,U,ce)).getPropertyValue("color"))},t.DOMFilterFactory=G;class A extends n.BaseCanvasFactory{constructor({ownerDocument:et=globalThis.document}={}){super(),this._document=et}_createCanvas(et,T){const W=this._document.createElement("canvas");return W.width=et,W.height=T,W}}t.DOMCanvasFactory=A;async function E(tt,et=!1){if(S(tt,document.baseURI)){const T=await fetch(tt);if(!T.ok)throw new Error(T.statusText);return et?new Uint8Array(await T.arrayBuffer()):(0,i.stringToBytes)(await T.text())}return new Promise((T,W)=>{const J=new XMLHttpRequest;J.open("GET",tt,!0),et&&(J.responseType="arraybuffer"),J.onreadystatechange=()=>{if(J.readyState===XMLHttpRequest.DONE){if(J.status===200||J.status===0){let at;if(et&&J.response?at=new Uint8Array(J.response):!et&&J.responseText&&(at=(0,i.stringToBytes)(J.responseText)),at){T(at);return}}W(new Error(J.statusText))}},J.send(null)})}class p extends n.BaseCMapReaderFactory{_fetchData(et,T){return E(et,this.isCompressed).then(W=>({cMapData:W,compressionType:T}))}}t.DOMCMapReaderFactory=p;class w extends n.BaseStandardFontDataFactory{_fetchData(et){return E(et,!0)}}t.DOMStandardFontDataFactory=w;class O extends n.BaseSVGFactory{_createSVG(et){return document.createElementNS(F,et)}}t.DOMSVGFactory=O;class y{constructor({viewBox:et,scale:T,rotation:W,offsetX:J=0,offsetY:at=0,dontFlip:gt=!1}){this.viewBox=et,this.scale=T,this.rotation=W,this.offsetX=J,this.offsetY=at;const St=(et[2]+et[0])/2,Et=(et[3]+et[1])/2;let nt,Tt,Pt,Wt;switch(W%=360,W<0&&(W+=360),W){case 180:nt=-1,Tt=0,Pt=0,Wt=1;break;case 90:nt=0,Tt=1,Pt=1,Wt=0;break;case 270:nt=0,Tt=-1,Pt=-1,Wt=0;break;case 0:nt=1,Tt=0,Pt=0,Wt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}gt&&(Pt=-Pt,Wt=-Wt);let $t,qt,Ft,Nt;nt===0?($t=Math.abs(Et-et[1])*T+J,qt=Math.abs(St-et[0])*T+at,Ft=(et[3]-et[1])*T,Nt=(et[2]-et[0])*T):($t=Math.abs(St-et[0])*T+J,qt=Math.abs(Et-et[1])*T+at,Ft=(et[2]-et[0])*T,Nt=(et[3]-et[1])*T),this.transform=[nt*T,Tt*T,Pt*T,Wt*T,$t-nt*T*St-Pt*T*Et,qt-Tt*T*St-Wt*T*Et],this.width=Ft,this.height=Nt}get rawDims(){const{viewBox:et}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:et[2]-et[0],pageHeight:et[3]-et[1],pageX:et[0],pageY:et[1]})}clone({scale:et=this.scale,rotation:T=this.rotation,offsetX:W=this.offsetX,offsetY:J=this.offsetY,dontFlip:at=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:et,rotation:T,offsetX:W,offsetY:J,dontFlip:at})}convertToViewportPoint(et,T){return i.Util.applyTransform([et,T],this.transform)}convertToViewportRectangle(et){const T=i.Util.applyTransform([et[0],et[1]],this.transform),W=i.Util.applyTransform([et[2],et[3]],this.transform);return[T[0],T[1],W[0],W[1]]}convertToPdfPoint(et,T){return i.Util.applyInverseTransform([et,T],this.transform)}}t.PageViewport=y;class m extends i.BaseException{constructor(et,T=0){super(et,"RenderingCancelledException"),this.extraDelay=T}}t.RenderingCancelledException=m;function C(tt){const et=tt.length;let T=0;for(;T<et&&tt[T].trim()==="";)T++;return tt.substring(T,T+5).toLowerCase()==="data:"}function b(tt){return typeof tt=="string"&&/\.pdf$/i.test(tt)}function f(tt,et=!1){return et||([tt]=tt.split(/[#?]/,1)),tt.substring(tt.lastIndexOf("/")+1)}function v(tt,et="document.pdf"){if(typeof tt!="string")return et;if(C(tt))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),et;const T=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,W=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,J=T.exec(tt);let at=W.exec(J[1])||W.exec(J[2])||W.exec(J[3]);if(at&&(at=at[0],at.includes("%")))try{at=W.exec(decodeURIComponent(at))[0]}catch{}return at||et}class I{constructor(){Qt(this,"started",Object.create(null));Qt(this,"times",[])}time(et){et in this.started&&(0,i.warn)(`Timer is already running for ${et}`),this.started[et]=Date.now()}timeEnd(et){et in this.started||(0,i.warn)(`Timer has not been started for ${et}`),this.times.push({name:et,start:this.started[et],end:Date.now()}),delete this.started[et]}toString(){const et=[];let T=0;for(const{name:W}of this.times)T=Math.max(W.length,T);for(const{name:W,start:J,end:at}of this.times)et.push(`${W.padEnd(T)} ${at-J}ms
`);return et.join("")}}t.StatTimer=I;function S(tt,et){try{const{protocol:T}=et?new URL(tt,et):new URL(tt);return T==="http:"||T==="https:"}catch{return!1}}function c(tt){tt.preventDefault()}function a(tt,et=!1){return new Promise((T,W)=>{const J=document.createElement("script");J.src=tt,J.onload=function(at){et&&J.remove(),T(at)},J.onerror=function(){W(new Error(`Cannot load script at: ${J.src}`))},(document.head||document.documentElement).append(J)})}function d(tt){console.log("Deprecated API usage: "+tt)}let h;class g{static toDateObject(et){if(!et||typeof et!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const T=h.exec(et);if(!T)return null;const W=parseInt(T[1],10);let J=parseInt(T[2],10);J=J>=1&&J<=12?J-1:0;let at=parseInt(T[3],10);at=at>=1&&at<=31?at:1;let gt=parseInt(T[4],10);gt=gt>=0&&gt<=23?gt:0;let St=parseInt(T[5],10);St=St>=0&&St<=59?St:0;let Et=parseInt(T[6],10);Et=Et>=0&&Et<=59?Et:0;const nt=T[7]||"Z";let Tt=parseInt(T[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Pt=parseInt(T[9],10)||0;return Pt=Pt>=0&&Pt<=59?Pt:0,nt==="-"?(gt+=Tt,St+=Pt):nt==="+"&&(gt-=Tt,St-=Pt),new Date(Date.UTC(W,J,at,gt,St,Et))}}t.PDFDateString=g;function N(tt,{scale:et=1,rotation:T=0}){const{width:W,height:J}=tt.attributes.style,at=[0,0,parseInt(W),parseInt(J)];return new y({viewBox:at,scale:et,rotation:T})}function l(tt){if(tt.startsWith("#")){const et=parseInt(tt.slice(1),16);return[(et&16711680)>>16,(et&65280)>>8,et&255]}return tt.startsWith("rgb(")?tt.slice(4,-1).split(",").map(et=>parseInt(et)):tt.startsWith("rgba(")?tt.slice(5,-1).split(",").map(et=>parseInt(et)).slice(0,3):((0,i.warn)(`Not a valid color format: "${tt}"`),[0,0,0])}function P(tt){const et=document.createElement("span");et.style.visibility="hidden",document.body.append(et);for(const T of tt.keys()){et.style.color=T;const W=window.getComputedStyle(et).color;tt.set(T,l(W))}et.remove()}function D(tt){const{a:et,b:T,c:W,d:J,e:at,f:gt}=tt.getTransform();return[et,T,W,J,at,gt]}function Z(tt){const{a:et,b:T,c:W,d:J,e:at,f:gt}=tt.getTransform().invertSelf();return[et,T,W,J,at,gt]}function V(tt,et,T=!1,W=!0){if(et instanceof y){const{pageWidth:J,pageHeight:at}=et.rawDims,{style:gt}=tt,St=i.FeatureTest.isCSSRoundSupported,Et=`var(--scale-factor) * ${J}px`,nt=`var(--scale-factor) * ${at}px`,Tt=St?`round(${Et}, 1px)`:`calc(${Et})`,Pt=St?`round(${nt}, 1px)`:`calc(${nt})`;!T||et.rotation%180===0?(gt.width=Tt,gt.height=Pt):(gt.width=Pt,gt.height=Tt)}W&&tt.setAttribute("data-main-rotation",et.rotation)}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=u(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,w){return"none"}addHighlightHCMFilter(p,w,O,y){return"none"}destroy(p=!1){}}t.BaseFilterFactory=i;class F{constructor(){this.constructor===F&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,w){if(p<=0||w<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(p,w);return{canvas:O,context:O.getContext("2d")}}reset(p,w,O){if(!p.canvas)throw new Error("Canvas is not specified");if(w<=0||O<=0)throw new Error("Invalid canvas size");p.canvas.width=w,p.canvas.height=O}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,w){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=F;class R{constructor({baseUrl:p=null,isCompressed:w=!0}){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=w}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const w=this.baseUrl+p+(this.isCompressed?".bcmap":""),O=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(w,O).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(p,w){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=R;class G{constructor({baseUrl:p=null}){this.constructor===G&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${p}`;return this._fetchData(w).catch(O=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(p){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=G;class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,w,O=!1){if(p<=0||w<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),O||(y.setAttribute("width",`${p}px`),y.setAttribute("height",`${w}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${p} ${w}`),y}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=A},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=u(1);const i=3285377520,F=4294901760,R=65535;class G{constructor(E){this.h1=E?E&4294967295:i,this.h2=E?E&4294967295:i}update(E){let p,w;if(typeof E=="string"){p=new Uint8Array(E.length*2),w=0;for(let d=0,h=E.length;d<h;d++){const g=E.charCodeAt(d);g<=255?p[w++]=g:(p[w++]=g>>>8,p[w++]=g&255)}}else if((0,n.isArrayBuffer)(E))p=E.slice(),w=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=w>>2,y=w-O*4,m=new Uint32Array(p.buffer,0,O);let C=0,b=0,f=this.h1,v=this.h2;const I=3432918353,S=461845907,c=I&R,a=S&R;for(let d=0;d<O;d++)d&1?(C=m[d],C=C*I&F|C*c&R,C=C<<15|C>>>17,C=C*S&F|C*a&R,f^=C,f=f<<13|f>>>19,f=f*5+3864292196):(b=m[d],b=b*I&F|b*c&R,b=b<<15|b>>>17,b=b*S&F|b*a&R,v^=b,v=v<<13|v>>>19,v=v*5+3864292196);switch(C=0,y){case 3:C^=p[O*4+2]<<16;case 2:C^=p[O*4+1]<<8;case 1:C^=p[O*4],C=C*I&F|C*c&R,C=C<<15|C>>>17,C=C*S&F|C*a&R,O&1?f^=C:v^=C}this.h1=f,this.h2=v}hexdigest(){let E=this.h1,p=this.h2;return E^=p>>>1,E=E*3981806797&F|E*36045&R,p=p*4283543511&F|((p<<16|E>>>16)*2950163797&F)>>>16,E^=p>>>1,E=E*444984403&F|E*60499&R,p=p*3301882366&F|((p<<16|E>>>16)*3120437893&F)>>>16,E^=p>>>1,(E>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=G},(e,t,u)=>{var R;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=u(1);class i{constructor({ownerDocument:A=globalThis.document,styleElement:E=null}){ot(this,R,new Set);this._document=A,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(A){this.nativeFontFaces.add(A),this._document.fonts.add(A)}removeNativeFontFace(A){this.nativeFontFaces.delete(A),this._document.fonts.delete(A)}insertRule(A){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(A,E.cssRules.length)}clear(){for(const A of this.nativeFontFaces)this._document.fonts.delete(A);this.nativeFontFaces.clear(),s(this,R).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(A){if(!(!A||s(this,R).has(A.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:E,src:p,style:w}=A,O=new FontFace(E,p,w);this.addNativeFontFace(O);try{await O.load(),s(this,R).add(E)}catch{(0,n.warn)(`Cannot load system font: ${A.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(O)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(A){if(A.attached||A.missingFile&&!A.systemFontInfo)return;if(A.attached=!0,A.systemFontInfo){await this.loadSystemFont(A.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=A.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(w){throw(0,n.warn)(`Failed to load font '${p.family}': '${w}'.`),A.disableFontFace=!0,w}}return}const E=A.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const w=this._queueLoadingCallback(p);this._prepareFontLoadEvent(A,w)})}}get isFontLoadingAPISupported(){var E;const A=!!((E=this._document)!=null&&E.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",A)}get isSyncFontLoadingSupported(){let A=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(A=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",A)}_queueLoadingCallback(A){function E(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;p.length>0&&p[0].done;){const O=p.shift();setTimeout(O.callback,0)}}const{loadingRequests:p}=this,w={done:!1,complete:E,callback:A};return p.push(w),w}get _loadTestFont(){const A=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",A)}_prepareFontLoadEvent(A,E){function p(l,P){return l.charCodeAt(P)<<24|l.charCodeAt(P+1)<<16|l.charCodeAt(P+2)<<8|l.charCodeAt(P+3)&255}function w(l,P,D,Z){const V=l.substring(0,P),Y=l.substring(P+D);return V+Z+Y}let O,y;const m=this._document.createElement("canvas");m.width=1,m.height=1;const C=m.getContext("2d");let b=0;function f(l,P){if(++b>30){(0,n.warn)("Load test font never loaded."),P();return}if(C.font="30px "+l,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(f.bind(null,l,P))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=w(I,976,v.length,v);const c=16,a=1482184792;let d=p(I,c);for(O=0,y=v.length-3;O<y;O+=4)d=d-a+p(v,O)|0;O<v.length&&(d=d-a+p(v+"XXX",O)|0),I=w(I,c,4,(0,n.string32)(d));const h=`url(data:font/opentype;base64,${btoa(I)});`,g=`@font-face {font-family:"${v}";src:${h}}`;this.insertRule(g);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const l of[A.loadedName,v]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=l,N.append(P)}this._document.body.append(N),f(v,()=>{N.remove(),E.complete()})}}R=new WeakMap,t.FontLoader=i;class F{constructor(A,{isEvalSupported:E=!0,disableFontFace:p=!1,ignoreErrors:w=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const y in A)this[y]=A[y];this.isEvalSupported=E!==!1,this.disableFontFace=p===!0,this.ignoreErrors=w===!0,this._inspectFont=O}createNativeFontFace(){var E;if(!this.data||this.disableFontFace)return null;let A;if(!this.cssFontInfo)A=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),A=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(E=this._inspectFont)==null||E.call(this,this),A}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const A=(0,n.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(A)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${E}}`}return(w=this._inspectFont)==null||w.call(this,this,E),p}getPathGenerator(A,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let p;try{p=A.get(this.loadedName+"_path_"+E)}catch(w){if(!this.ignoreErrors)throw w;return(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[E]=function(O,y){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const O of p){const y=O.args!==void 0?O.args.join(","):"";w.push("c.",O.cmd,"(",y,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",w.join(""))}return this.compiledGlyphs[E]=function(w,O){for(const y of p)y.cmd==="scale"&&(y.args=[O,-O]),w[y.cmd].apply(w,y.args)}}}t.FontFaceObject=F},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=u(7);u(1);const i=function(E){return new Promise((p,w)=>{require$$5.readFile(E,(y,m)=>{if(y||!m){w(new Error(y));return}p(new Uint8Array(m))})})};class F extends n.BaseFilterFactory{}t.NodeFilterFactory=F;class R extends n.BaseCanvasFactory{_createCanvas(p,w){return require$$5.createCanvas(p,w)}}t.NodeCanvasFactory=R;class G extends n.BaseCMapReaderFactory{_fetchData(p,w){return i(p).then(O=>({cMapData:O,compressionType:w}))}}t.NodeCMapReaderFactory=G;class A extends n.BaseStandardFontDataFactory{_fetchData(p){return i(p)}}t.NodeStandardFontDataFactory=A},(e,t,u)=>{var st,Ye,Ke;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=u(1),i=u(6),F=u(12),R=u(13);const G=16,A=100,E=4096,p=15,w=10,O=1e3,y=16;function m(M,r){if(M._removeMirroring)throw new Error("Context is already forwarding operations.");M.__originalSave=M.save,M.__originalRestore=M.restore,M.__originalRotate=M.rotate,M.__originalScale=M.scale,M.__originalTranslate=M.translate,M.__originalTransform=M.transform,M.__originalSetTransform=M.setTransform,M.__originalResetTransform=M.resetTransform,M.__originalClip=M.clip,M.__originalMoveTo=M.moveTo,M.__originalLineTo=M.lineTo,M.__originalBezierCurveTo=M.bezierCurveTo,M.__originalRect=M.rect,M.__originalClosePath=M.closePath,M.__originalBeginPath=M.beginPath,M._removeMirroring=()=>{M.save=M.__originalSave,M.restore=M.__originalRestore,M.rotate=M.__originalRotate,M.scale=M.__originalScale,M.translate=M.__originalTranslate,M.transform=M.__originalTransform,M.setTransform=M.__originalSetTransform,M.resetTransform=M.__originalResetTransform,M.clip=M.__originalClip,M.moveTo=M.__originalMoveTo,M.lineTo=M.__originalLineTo,M.bezierCurveTo=M.__originalBezierCurveTo,M.rect=M.__originalRect,M.closePath=M.__originalClosePath,M.beginPath=M.__originalBeginPath,delete M._removeMirroring},M.save=function(){r.save(),this.__originalSave()},M.restore=function(){r.restore(),this.__originalRestore()},M.translate=function(x,B){r.translate(x,B),this.__originalTranslate(x,B)},M.scale=function(x,B){r.scale(x,B),this.__originalScale(x,B)},M.transform=function(x,B,$,U,K,rt){r.transform(x,B,$,U,K,rt),this.__originalTransform(x,B,$,U,K,rt)},M.setTransform=function(x,B,$,U,K,rt){r.setTransform(x,B,$,U,K,rt),this.__originalSetTransform(x,B,$,U,K,rt)},M.resetTransform=function(){r.resetTransform(),this.__originalResetTransform()},M.rotate=function(x){r.rotate(x),this.__originalRotate(x)},M.clip=function(x){r.clip(x),this.__originalClip(x)},M.moveTo=function(o,x){r.moveTo(o,x),this.__originalMoveTo(o,x)},M.lineTo=function(o,x){r.lineTo(o,x),this.__originalLineTo(o,x)},M.bezierCurveTo=function(o,x,B,$,U,K){r.bezierCurveTo(o,x,B,$,U,K),this.__originalBezierCurveTo(o,x,B,$,U,K)},M.rect=function(o,x,B,$){r.rect(o,x,B,$),this.__originalRect(o,x,B,$)},M.closePath=function(){r.closePath(),this.__originalClosePath()},M.beginPath=function(){r.beginPath(),this.__originalBeginPath()}}class C{constructor(r){this.canvasFactory=r,this.cache=Object.create(null)}getCanvas(r,o,x){let B;return this.cache[r]!==void 0?(B=this.cache[r],this.canvasFactory.reset(B,o,x)):(B=this.canvasFactory.create(o,x),this.cache[r]=B),B}delete(r){delete this.cache[r]}clear(){for(const r in this.cache){const o=this.cache[r];this.canvasFactory.destroy(o),delete this.cache[r]}}}function b(M,r,o,x,B,$,U,K,rt,ut){const[ft,yt,bt,vt,tt,et]=(0,i.getCurrentTransform)(M);if(yt===0&&bt===0){const J=U*ft+tt,at=Math.round(J),gt=K*vt+et,St=Math.round(gt),Et=(U+rt)*ft+tt,nt=Math.abs(Math.round(Et)-at)||1,Tt=(K+ut)*vt+et,Pt=Math.abs(Math.round(Tt)-St)||1;return M.setTransform(Math.sign(ft),0,0,Math.sign(vt),at,St),M.drawImage(r,o,x,B,$,0,0,nt,Pt),M.setTransform(ft,yt,bt,vt,tt,et),[nt,Pt]}if(ft===0&&vt===0){const J=K*bt+tt,at=Math.round(J),gt=U*yt+et,St=Math.round(gt),Et=(K+ut)*bt+tt,nt=Math.abs(Math.round(Et)-at)||1,Tt=(U+rt)*yt+et,Pt=Math.abs(Math.round(Tt)-St)||1;return M.setTransform(0,Math.sign(yt),Math.sign(bt),0,at,St),M.drawImage(r,o,x,B,$,0,0,Pt,nt),M.setTransform(ft,yt,bt,vt,tt,et),[Pt,nt]}M.drawImage(r,o,x,B,$,U,K,rt,ut);const T=Math.hypot(ft,yt),W=Math.hypot(bt,vt);return[T*rt,W*ut]}function f(M){const{width:r,height:o}=M;if(r>O||o>O)return null;const x=1e3,B=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=r+1;let U=new Uint8Array($*(o+1)),K,rt,ut;const ft=r+7&-8;let yt=new Uint8Array(ft*o),bt=0;for(const W of M.data){let J=128;for(;J>0;)yt[bt++]=W&J?0:255,J>>=1}let vt=0;for(bt=0,yt[bt]!==0&&(U[0]=1,++vt),rt=1;rt<r;rt++)yt[bt]!==yt[bt+1]&&(U[rt]=yt[bt]?2:1,++vt),bt++;for(yt[bt]!==0&&(U[rt]=2,++vt),K=1;K<o;K++){bt=K*ft,ut=K*$,yt[bt-ft]!==yt[bt]&&(U[ut]=yt[bt]?1:8,++vt);let W=(yt[bt]?4:0)+(yt[bt-ft]?8:0);for(rt=1;rt<r;rt++)W=(W>>2)+(yt[bt+1]?4:0)+(yt[bt-ft+1]?8:0),B[W]&&(U[ut+rt]=B[W],++vt),bt++;if(yt[bt-ft]!==yt[bt]&&(U[ut+rt]=yt[bt]?2:4,++vt),vt>x)return null}for(bt=ft*(o-1),ut=K*$,yt[bt]!==0&&(U[ut]=8,++vt),rt=1;rt<r;rt++)yt[bt]!==yt[bt+1]&&(U[ut+rt]=yt[bt]?4:8,++vt),bt++;if(yt[bt]!==0&&(U[ut+rt]=4,++vt),vt>x)return null;const tt=new Int32Array([0,$,-1,0,-$,0,0,0,1]),et=new Path2D;for(K=0;vt&&K<=o;K++){let W=K*$;const J=W+r;for(;W<J&&!U[W];)W++;if(W===J)continue;et.moveTo(W%$,K);const at=W;let gt=U[W];do{const St=tt[gt];do W+=St;while(!U[W]);const Et=U[W];Et!==5&&Et!==10?(gt=Et,U[W]=0):(gt=Et&51*gt>>4,U[W]&=gt>>2|gt<<2),et.lineTo(W%$,W/$|0),U[W]||--vt}while(at!==W);--K}return yt=null,U=null,function(W){W.save(),W.scale(1/r,-1/o),W.translate(0,-o),W.fill(et),W.beginPath(),W.restore()}}class v{constructor(r,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,r,o])}clone(){const r=Object.create(this);return r.clipBox=this.clipBox.slice(),r}setCurrentPoint(r,o){this.x=r,this.y=o}updatePathMinMax(r,o,x){[o,x]=n.Util.applyTransform([o,x],r),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,x),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,x)}updateRectMinMax(r,o){const x=n.Util.applyTransform(o,r),B=n.Util.applyTransform(o.slice(2),r);this.minX=Math.min(this.minX,x[0],B[0]),this.minY=Math.min(this.minY,x[1],B[1]),this.maxX=Math.max(this.maxX,x[0],B[0]),this.maxY=Math.max(this.maxY,x[1],B[1])}updateScalingPathMinMax(r,o){n.Util.scaleMinMax(r,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(r,o,x,B,$,U,K,rt,ut,ft){const yt=n.Util.bezierBoundingBox(o,x,B,$,U,K,rt,ut);if(ft){ft[0]=Math.min(ft[0],yt[0],yt[2]),ft[1]=Math.max(ft[1],yt[0],yt[2]),ft[2]=Math.min(ft[2],yt[1],yt[3]),ft[3]=Math.max(ft[3],yt[1],yt[3]);return}this.updateRectMinMax(r,yt)}getPathBoundingBox(r=F.PathType.FILL,o=null){const x=[this.minX,this.minY,this.maxX,this.maxY];if(r===F.PathType.STROKE){o||(0,n.unreachable)("Stroke bounding box must include transform.");const B=n.Util.singularValueDecompose2dScale(o),$=B[0]*this.lineWidth/2,U=B[1]*this.lineWidth/2;x[0]-=$,x[1]-=U,x[2]+=$,x[3]+=U}return x}updateClipFromPath(){const r=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(r||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(r){this.clipBox=r,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(r=F.PathType.FILL,o=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(r,o))}}function I(M,r){if(typeof ImageData<"u"&&r instanceof ImageData){M.putImageData(r,0,0);return}const o=r.height,x=r.width,B=o%y,$=(o-B)/y,U=B===0?$:$+1,K=M.createImageData(x,y);let rt=0,ut;const ft=r.data,yt=K.data;let bt,vt,tt,et;if(r.kind===n.ImageKind.GRAYSCALE_1BPP){const T=ft.byteLength,W=new Uint32Array(yt.buffer,0,yt.byteLength>>2),J=W.length,at=x+7>>3,gt=4294967295,St=n.FeatureTest.isLittleEndian?4278190080:255;for(bt=0;bt<U;bt++){for(tt=bt<$?y:B,ut=0,vt=0;vt<tt;vt++){const Et=T-rt;let nt=0;const Tt=Et>at?x:Et*8-7,Pt=Tt&-8;let Wt=0,$t=0;for(;nt<Pt;nt+=8)$t=ft[rt++],W[ut++]=$t&128?gt:St,W[ut++]=$t&64?gt:St,W[ut++]=$t&32?gt:St,W[ut++]=$t&16?gt:St,W[ut++]=$t&8?gt:St,W[ut++]=$t&4?gt:St,W[ut++]=$t&2?gt:St,W[ut++]=$t&1?gt:St;for(;nt<Tt;nt++)Wt===0&&($t=ft[rt++],Wt=128),W[ut++]=$t&Wt?gt:St,Wt>>=1}for(;ut<J;)W[ut++]=0;M.putImageData(K,0,bt*y)}}else if(r.kind===n.ImageKind.RGBA_32BPP){for(vt=0,et=x*y*4,bt=0;bt<$;bt++)yt.set(ft.subarray(rt,rt+et)),rt+=et,M.putImageData(K,0,vt),vt+=y;bt<U&&(et=x*B*4,yt.set(ft.subarray(rt,rt+et)),M.putImageData(K,0,vt))}else if(r.kind===n.ImageKind.RGB_24BPP)for(tt=y,et=x*tt,bt=0;bt<U;bt++){for(bt>=$&&(tt=B,et=x*tt),ut=0,vt=et;vt--;)yt[ut++]=ft[rt++],yt[ut++]=ft[rt++],yt[ut++]=ft[rt++],yt[ut++]=255;M.putImageData(K,0,bt*y)}else throw new Error(`bad image kind: ${r.kind}`)}function S(M,r){if(r.bitmap){M.drawImage(r.bitmap,0,0);return}const o=r.height,x=r.width,B=o%y,$=(o-B)/y,U=B===0?$:$+1,K=M.createImageData(x,y);let rt=0;const ut=r.data,ft=K.data;for(let yt=0;yt<U;yt++){const bt=yt<$?y:B;({srcPos:rt}=(0,R.convertBlackAndWhiteToRGBA)({src:ut,srcPos:rt,dest:ft,width:x,height:bt,nonBlackColor:0})),M.putImageData(K,0,yt*y)}}function c(M,r){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const x of o)M[x]!==void 0&&(r[x]=M[x]);M.setLineDash!==void 0&&(r.setLineDash(M.getLineDash()),r.lineDashOffset=M.lineDashOffset)}function a(M){if(M.strokeStyle=M.fillStyle="#000000",M.fillRule="nonzero",M.globalAlpha=1,M.lineWidth=1,M.lineCap="butt",M.lineJoin="miter",M.miterLimit=10,M.globalCompositeOperation="source-over",M.font="10px sans-serif",M.setLineDash!==void 0&&(M.setLineDash([]),M.lineDashOffset=0),!n.isNodeJS){const{filter:r}=M;r!=="none"&&r!==""&&(M.filter="none")}}function d(M,r,o,x){const B=M.length;for(let $=3;$<B;$+=4){const U=M[$];if(U===0)M[$-3]=r,M[$-2]=o,M[$-1]=x;else if(U<255){const K=255-U;M[$-3]=M[$-3]*U+r*K>>8,M[$-2]=M[$-2]*U+o*K>>8,M[$-1]=M[$-1]*U+x*K>>8}}}function h(M,r,o){const x=M.length,B=1/255;for(let $=3;$<x;$+=4){const U=o?o[M[$]]:M[$];r[$]=r[$]*U*B|0}}function g(M,r,o){const x=M.length;for(let B=3;B<x;B+=4){const $=M[B-3]*77+M[B-2]*152+M[B-1]*28;r[B]=o?r[B]*o[$>>8]>>8:r[B]*$>>16}}function N(M,r,o,x,B,$,U,K,rt,ut,ft){const yt=!!$,bt=yt?$[0]:0,vt=yt?$[1]:0,tt=yt?$[2]:0,et=B==="Luminosity"?g:h,W=Math.min(x,Math.ceil(1048576/o));for(let J=0;J<x;J+=W){const at=Math.min(W,x-J),gt=M.getImageData(K-ut,J+(rt-ft),o,at),St=r.getImageData(K,J+rt,o,at);yt&&d(gt.data,bt,vt,tt),et(gt.data,St.data,U),r.putImageData(St,K,J+rt)}}function l(M,r,o,x){const B=x[0],$=x[1],U=x[2]-B,K=x[3]-$;U===0||K===0||(N(r.context,o,U,K,r.subtype,r.backdrop,r.transferMap,B,$,r.offsetX,r.offsetY),M.save(),M.globalAlpha=1,M.globalCompositeOperation="source-over",M.setTransform(1,0,0,1,0,0),M.drawImage(o.canvas,0,0),M.restore())}function P(M,r){const o=n.Util.singularValueDecompose2dScale(M);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const x=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return r!==void 0?r:o[0]<=x||o[1]<=x}const D=["butt","round","square"],Z=["miter","round","bevel"],V={},Y={},it=class it{constructor(r,o,x,B,$,{optionalContentConfig:U,markedContentStack:K=null},rt,ut){ot(this,st);this.ctx=r,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=x,this.canvasFactory=B,this.filterFactory=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=U,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=rt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ut,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(r,o=null){return typeof r=="string"?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):o}beginDrawing({transform:r,viewport:o,transparency:x=!1,background:B=null}){const $=this.ctx.canvas.width,U=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=B||"#ffffff",this.ctx.fillRect(0,0,$,U),this.ctx.fillStyle=K,x){const rt=this.cachedCanvases.getCanvas("transparent",$,U);this.compositeCtx=this.ctx,this.transparentCanvas=rt.canvas,this.ctx=rt.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),a(this.ctx),r&&(this.ctx.transform(...r),this.outputScaleX=r[0],this.outputScaleY=r[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(r,o,x,B){const $=r.argsArray,U=r.fnArray;let K=o||0;const rt=$.length;if(rt===K)return K;const ut=rt-K>w&&typeof x=="function",ft=ut?Date.now()+p:0;let yt=0;const bt=this.commonObjs,vt=this.objs;let tt;for(;;){if(B!==void 0&&K===B.nextBreakPoint)return B.breakIt(K,x),K;if(tt=U[K],tt!==n.OPS.dependency)this[tt].apply(this,$[K]);else for(const et of $[K]){const T=et.startsWith("g_")?bt:vt;if(!T.has(et))return T.get(et,x),K}if(K++,K===rt)return K;if(ut&&++yt>w){if(Date.now()>ft)return x(),K;yt=0}}}endDrawing(){Q(this,st,Ye).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const r of this._cachedBitmapsMap.values()){for(const o of r.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);r.clear()}this._cachedBitmapsMap.clear(),Q(this,st,Ke).call(this)}_scaleImage(r,o){const x=r.width,B=r.height;let $=Math.max(Math.hypot(o[0],o[1]),1),U=Math.max(Math.hypot(o[2],o[3]),1),K=x,rt=B,ut="prescale1",ft,yt;for(;$>2&&K>1||U>2&&rt>1;){let bt=K,vt=rt;$>2&&K>1&&(bt=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),$/=K/bt),U>2&&rt>1&&(vt=rt>=16384?Math.floor(rt/2)-1||1:Math.ceil(rt)/2,U/=rt/vt),ft=this.cachedCanvases.getCanvas(ut,bt,vt),yt=ft.context,yt.clearRect(0,0,bt,vt),yt.drawImage(r,0,0,K,rt,0,0,bt,vt),r=ft.canvas,K=bt,rt=vt,ut=ut==="prescale1"?"prescale2":"prescale1"}return{img:r,paintWidth:K,paintHeight:rt}}_createMaskCanvas(r){const o=this.ctx,{width:x,height:B}=r,$=this.current.fillColor,U=this.current.patternFill,K=(0,i.getCurrentTransform)(o);let rt,ut,ft,yt;if((r.bitmap||r.data)&&r.count>1){const nt=r.bitmap||r.data.buffer;ut=JSON.stringify(U?K:[K.slice(0,4),$]),rt=this._cachedBitmapsMap.get(nt),rt||(rt=new Map,this._cachedBitmapsMap.set(nt,rt));const Tt=rt.get(ut);if(Tt&&!U){const Pt=Math.round(Math.min(K[0],K[2])+K[4]),Wt=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Tt,offsetX:Pt,offsetY:Wt}}ft=Tt}ft||(yt=this.cachedCanvases.getCanvas("maskCanvas",x,B),S(yt.context,r));let bt=n.Util.transform(K,[1/x,0,0,-1/B,0,0]);bt=n.Util.transform(bt,[1,0,0,1,0,-B]);const vt=n.Util.applyTransform([0,0],bt),tt=n.Util.applyTransform([x,B],bt),et=n.Util.normalizeRect([vt[0],vt[1],tt[0],tt[1]]),T=Math.round(et[2]-et[0])||1,W=Math.round(et[3]-et[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",T,W),at=J.context,gt=Math.min(vt[0],tt[0]),St=Math.min(vt[1],tt[1]);at.translate(-gt,-St),at.transform(...bt),ft||(ft=this._scaleImage(yt.canvas,(0,i.getCurrentTransformInverse)(at)),ft=ft.img,rt&&U&&rt.set(ut,ft)),at.imageSmoothingEnabled=P((0,i.getCurrentTransform)(at),r.interpolate),b(at,ft,0,0,ft.width,ft.height,0,0,x,B),at.globalCompositeOperation="source-in";const Et=n.Util.transform((0,i.getCurrentTransformInverse)(at),[1,0,0,1,-gt,-St]);return at.fillStyle=U?$.getPattern(o,this,Et,F.PathType.FILL):$,at.fillRect(0,0,x,B),rt&&!U&&(this.cachedCanvases.delete("fillCanvas"),rt.set(ut,J.canvas)),{canvas:J.canvas,offsetX:Math.round(gt),offsetY:Math.round(St)}}setLineWidth(r){r!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(r){this.ctx.lineCap=D[r]}setLineJoin(r){this.ctx.lineJoin=Z[r]}setMiterLimit(r){this.ctx.miterLimit=r}setDash(r,o){const x=this.ctx;x.setLineDash!==void 0&&(x.setLineDash(r),x.lineDashOffset=o)}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[o,x]of r)switch(o){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x[0],x[1]);break;case"CA":this.current.strokeAlpha=x;break;case"ca":this.current.fillAlpha=x,this.ctx.globalAlpha=x;break;case"BM":this.ctx.globalCompositeOperation=x;break;case"SMask":this.current.activeSMask=x?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(x);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const r=this.inSMaskMode;this.current.activeSMask&&!r?this.beginSMaskMode():!this.current.activeSMask&&r&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.ctx.canvas.width,o=this.ctx.canvas.height,x="smaskGroupAt"+this.groupLevel,B=this.cachedCanvases.getCanvas(x,r,o);this.suspendedCtx=this.ctx,this.ctx=B.context;const $=this.ctx;$.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,$),m($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(r){if(!this.current.activeSMask)return;r?(r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r[2]=Math.ceil(r[2]),r[3]=Math.ceil(r[3])):r=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,x=this.suspendedCtx;l(x,o,this.ctx,r),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(r,o,x,B,$,U){this.ctx.transform(r,o,x,B,$,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(r,o,x){const B=this.ctx,$=this.current;let U=$.x,K=$.y,rt,ut;const ft=(0,i.getCurrentTransform)(B),yt=ft[0]===0&&ft[3]===0||ft[1]===0&&ft[2]===0,bt=yt?x.slice(0):null;for(let vt=0,tt=0,et=r.length;vt<et;vt++)switch(r[vt]|0){case n.OPS.rectangle:U=o[tt++],K=o[tt++];const T=o[tt++],W=o[tt++],J=U+T,at=K+W;B.moveTo(U,K),T===0||W===0?B.lineTo(J,at):(B.lineTo(J,K),B.lineTo(J,at),B.lineTo(U,at)),yt||$.updateRectMinMax(ft,[U,K,J,at]),B.closePath();break;case n.OPS.moveTo:U=o[tt++],K=o[tt++],B.moveTo(U,K),yt||$.updatePathMinMax(ft,U,K);break;case n.OPS.lineTo:U=o[tt++],K=o[tt++],B.lineTo(U,K),yt||$.updatePathMinMax(ft,U,K);break;case n.OPS.curveTo:rt=U,ut=K,U=o[tt+4],K=o[tt+5],B.bezierCurveTo(o[tt],o[tt+1],o[tt+2],o[tt+3],U,K),$.updateCurvePathMinMax(ft,rt,ut,o[tt],o[tt+1],o[tt+2],o[tt+3],U,K,bt),tt+=6;break;case n.OPS.curveTo2:rt=U,ut=K,B.bezierCurveTo(U,K,o[tt],o[tt+1],o[tt+2],o[tt+3]),$.updateCurvePathMinMax(ft,rt,ut,U,K,o[tt],o[tt+1],o[tt+2],o[tt+3],bt),U=o[tt+2],K=o[tt+3],tt+=4;break;case n.OPS.curveTo3:rt=U,ut=K,U=o[tt+2],K=o[tt+3],B.bezierCurveTo(o[tt],o[tt+1],U,K,U,K),$.updateCurvePathMinMax(ft,rt,ut,o[tt],o[tt+1],U,K,U,K,bt),tt+=4;break;case n.OPS.closePath:B.closePath();break}yt&&$.updateScalingPathMinMax(ft,bt),$.setCurrentPoint(U,K)}closePath(){this.ctx.closePath()}stroke(r=!0){const o=this.ctx,x=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof x=="object"&&(x!=null&&x.getPattern)?(o.save(),o.strokeStyle=x.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),F.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),r&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(r=!0){const o=this.ctx,x=this.current.fillColor,B=this.current.patternFill;let $=!1;B&&(o.save(),o.fillStyle=x.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),F.PathType.FILL),$=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),$&&o.restore(),r&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const r=this.pendingTextPaths,o=this.ctx;if(r===void 0){o.beginPath();return}o.save(),o.beginPath();for(const x of r)o.setTransform(...x.transform),o.translate(x.x,x.y),x.addToPath(o,x.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(r){this.current.charSpacing=r}setWordSpacing(r){this.current.wordSpacing=r}setHScale(r){this.current.textHScale=r/100}setLeading(r){this.current.leading=-r}setFont(r,o){var ft;const x=this.commonObjs.get(r),B=this.current;if(!x)throw new Error(`Can't find font for ${r}`);if(B.fontMatrix=x.fontMatrix||n.FONT_IDENTITY_MATRIX,(B.fontMatrix[0]===0||B.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+r),o<0?(o=-o,B.fontDirection=-1):B.fontDirection=1,this.current.font=x,this.current.fontSize=o,x.isType3Font)return;const $=x.loadedName||"sans-serif",U=((ft=x.systemFontInfo)==null?void 0:ft.css)||`"${$}", ${x.fallbackName}`;let K="normal";x.black?K="900":x.bold&&(K="bold");const rt=x.italic?"italic":"normal";let ut=o;o<G?ut=G:o>A&&(ut=A),this.current.fontSizeScale=o/ut,this.ctx.font=`${rt} ${K} ${ut}px ${U}`}setTextRenderingMode(r){this.current.textRenderingMode=r}setTextRise(r){this.current.textRise=r}moveText(r,o){this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=o}setLeadingMoveText(r,o){this.setLeading(-o),this.moveText(r,o)}setTextMatrix(r,o,x,B,$,U){this.current.textMatrix=[r,o,x,B,$,U],this.current.textMatrixScale=Math.hypot(r,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(r,o,x,B){const $=this.ctx,U=this.current,K=U.font,rt=U.textRenderingMode,ut=U.fontSize/U.fontSizeScale,ft=rt&n.TextRenderingMode.FILL_STROKE_MASK,yt=!!(rt&n.TextRenderingMode.ADD_TO_PATH_FLAG),bt=U.patternFill&&!K.missingFile;let vt;(K.disableFontFace||yt||bt)&&(vt=K.getPathGenerator(this.commonObjs,r)),K.disableFontFace||bt?($.save(),$.translate(o,x),$.beginPath(),vt($,ut),B&&$.setTransform(...B),(ft===n.TextRenderingMode.FILL||ft===n.TextRenderingMode.FILL_STROKE)&&$.fill(),(ft===n.TextRenderingMode.STROKE||ft===n.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((ft===n.TextRenderingMode.FILL||ft===n.TextRenderingMode.FILL_STROKE)&&$.fillText(r,o,x),(ft===n.TextRenderingMode.STROKE||ft===n.TextRenderingMode.FILL_STROKE)&&$.strokeText(r,o,x)),yt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)($),x:o,y:x,fontSize:ut,addToPath:vt})}get isFontSubpixelAAEnabled(){const{context:r}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);r.scale(1.5,1),r.fillText("I",0,10);const o=r.getImageData(0,0,10,10).data;let x=!1;for(let B=3;B<o.length;B+=4)if(o[B]>0&&o[B]<255){x=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",x)}showText(r){const o=this.current,x=o.font;if(x.isType3Font)return this.showType3Text(r);const B=o.fontSize;if(B===0)return;const $=this.ctx,U=o.fontSizeScale,K=o.charSpacing,rt=o.wordSpacing,ut=o.fontDirection,ft=o.textHScale*ut,yt=r.length,bt=x.vertical,vt=bt?1:-1,tt=x.defaultVMetrics,et=B*o.fontMatrix[0],T=o.textRenderingMode===n.TextRenderingMode.FILL&&!x.disableFontFace&&!o.patternFill;$.save(),$.transform(...o.textMatrix),$.translate(o.x,o.y+o.textRise),ut>0?$.scale(ft,-1):$.scale(ft,1);let W;if(o.patternFill){$.save();const Et=o.fillColor.getPattern($,this,(0,i.getCurrentTransformInverse)($),F.PathType.FILL);W=(0,i.getCurrentTransform)($),$.restore(),$.fillStyle=Et}let J=o.lineWidth;const at=o.textMatrixScale;if(at===0||J===0){const Et=o.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(Et===n.TextRenderingMode.STROKE||Et===n.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=at;if(U!==1&&($.scale(U,U),J/=U),$.lineWidth=J,x.isInvalidPDFjsFont){const Et=[];let nt=0;for(const Tt of r)Et.push(Tt.unicode),nt+=Tt.width;$.fillText(Et.join(""),0,0),o.x+=nt*et*ft,$.restore(),this.compose();return}let gt=0,St;for(St=0;St<yt;++St){const Et=r[St];if(typeof Et=="number"){gt+=vt*Et*B/1e3;continue}let nt=!1;const Tt=(Et.isSpace?rt:0)+K,Pt=Et.fontChar,Wt=Et.accent;let $t,qt,Ft=Et.width;if(bt){const Ht=Et.vmetric||tt,Yt=-(Et.vmetric?Ht[1]:Ft*.5)*et,xt=Ht[2]*et;Ft=Ht?-Ht[0]:Ft,$t=Yt/U,qt=(gt+xt)/U}else $t=gt/U,qt=0;if(x.remeasure&&Ft>0){const Ht=$.measureText(Pt).width*1e3/B*U;if(Ft<Ht&&this.isFontSubpixelAAEnabled){const Yt=Ft/Ht;nt=!0,$.save(),$.scale(Yt,1),$t/=Yt}else Ft!==Ht&&($t+=(Ft-Ht)/2e3*B/U)}if(this.contentVisible&&(Et.isInFont||x.missingFile)){if(T&&!Wt)$.fillText(Pt,$t,qt);else if(this.paintChar(Pt,$t,qt,W),Wt){const Ht=$t+B*Wt.offset.x/U,Yt=qt-B*Wt.offset.y/U;this.paintChar(Wt.fontChar,Ht,Yt,W)}}const Nt=bt?Ft*et-Tt*ut:Ft*et+Tt*ut;gt+=Nt,nt&&$.restore()}bt?o.y-=gt:o.x+=gt*ft,$.restore(),this.compose()}showType3Text(r){const o=this.ctx,x=this.current,B=x.font,$=x.fontSize,U=x.fontDirection,K=B.vertical?1:-1,rt=x.charSpacing,ut=x.wordSpacing,ft=x.textHScale*U,yt=x.fontMatrix||n.FONT_IDENTITY_MATRIX,bt=r.length,vt=x.textRenderingMode===n.TextRenderingMode.INVISIBLE;let tt,et,T,W;if(!(vt||$===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...x.textMatrix),o.translate(x.x,x.y),o.scale(ft,U),tt=0;tt<bt;++tt){if(et=r[tt],typeof et=="number"){W=K*et*$/1e3,this.ctx.translate(W,0),x.x+=W*ft;continue}const J=(et.isSpace?ut:0)+rt,at=B.charProcOperatorList[et.operatorListId];if(!at){(0,n.warn)(`Type3 character "${et.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=et,this.save(),o.scale($,$),o.transform(...yt),this.executeOperatorList(at),this.restore()),T=n.Util.applyTransform([et.width,0],yt)[0]*$+J,o.translate(T,0),x.x+=T*ft}o.restore(),this.processingType3=null}}setCharWidth(r,o){}setCharWidthAndBounds(r,o,x,B,$,U){this.ctx.rect(x,B,$-x,U-B),this.ctx.clip(),this.endPath()}getColorN_Pattern(r){let o;if(r[0]==="TilingPattern"){const x=r[1],B=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),$={createCanvasGraphics:U=>new it(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new F.TilingPattern(r,x,this.ctx,$,B)}else o=this._getPattern(r[1],r[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,o,x){const B=n.Util.makeHexColor(r,o,x);this.ctx.strokeStyle=B,this.current.strokeColor=B}setFillRGBColor(r,o,x){const B=n.Util.makeHexColor(r,o,x);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}_getPattern(r,o=null){let x;return this.cachedPatterns.has(r)?x=this.cachedPatterns.get(r):(x=(0,F.getShadingPattern)(this.getObject(r)),this.cachedPatterns.set(r,x)),o&&(x.matrix=o),x}shadingFill(r){if(!this.contentVisible)return;const o=this.ctx;this.save();const x=this._getPattern(r);o.fillStyle=x.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),F.PathType.SHADING);const B=(0,i.getCurrentTransformInverse)(o);if(B){const{width:$,height:U}=o.canvas,[K,rt,ut,ft]=n.Util.getAxialAlignedBoundingBox([0,0,$,U],B);this.ctx.fillRect(K,rt,ut-K,ft-rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(r,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(r)&&r.length===6&&this.transform(...r),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),o)){const x=o[2]-o[0],B=o[3]-o[1];this.ctx.rect(o[0],o[1],x,B),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(r){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;r.isolated||(0,n.info)("TODO: Support non-isolated groups."),r.knockout&&(0,n.warn)("Knockout groups not supported.");const x=(0,i.getCurrentTransform)(o);if(r.matrix&&o.transform(...r.matrix),!r.bbox)throw new Error("Bounding box is required.");let B=n.Util.getAxialAlignedBoundingBox(r.bbox,(0,i.getCurrentTransform)(o));const $=[0,0,o.canvas.width,o.canvas.height];B=n.Util.intersect(B,$)||[0,0,0,0];const U=Math.floor(B[0]),K=Math.floor(B[1]);let rt=Math.max(Math.ceil(B[2])-U,1),ut=Math.max(Math.ceil(B[3])-K,1),ft=1,yt=1;rt>E&&(ft=rt/E,rt=E),ut>E&&(yt=ut/E,ut=E),this.current.startNewPathAndClipBox([0,0,rt,ut]);let bt="groupAt"+this.groupLevel;r.smask&&(bt+="_smask_"+this.smaskCounter++%2);const vt=this.cachedCanvases.getCanvas(bt,rt,ut),tt=vt.context;tt.scale(1/ft,1/yt),tt.translate(-U,-K),tt.transform(...x),r.smask?this.smaskStack.push({canvas:vt.canvas,context:tt,offsetX:U,offsetY:K,scaleX:ft,scaleY:yt,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(U,K),o.scale(ft,yt),o.save()),c(o,tt),this.ctx=tt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(r){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,x=this.groupStack.pop();if(this.ctx=x,this.ctx.imageSmoothingEnabled=!1,r.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const B=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...B);const $=n.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],B);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(r,o,x,B,$){if(Q(this,st,Ye).call(this),a(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const U=o[2]-o[0],K=o[3]-o[1];if($&&this.annotationCanvasMap){x=x.slice(),x[4]-=o[0],x[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=U,o[3]=K;const[rt,ut]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:ft}=this,yt=Math.ceil(U*this.outputScaleX*ft),bt=Math.ceil(K*this.outputScaleY*ft);this.annotationCanvas=this.canvasFactory.create(yt,bt);const{canvas:vt,context:tt}=this.annotationCanvas;this.annotationCanvasMap.set(r,vt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=tt,this.ctx.save(),this.ctx.setTransform(rt,0,0,-ut,0,K*ut),a(this.ctx)}else a(this.ctx),this.ctx.rect(o[0],o[1],U,K),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...x),this.transform(...B)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Q(this,st,Ke).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(r){if(!this.contentVisible)return;const o=r.count;r=this.getObject(r.data,r),r.count=o;const x=this.ctx,B=this.processingType3;if(B&&(B.compiled===void 0&&(B.compiled=f(r)),B.compiled)){B.compiled(x);return}const $=this._createMaskCanvas(r),U=$.canvas;x.save(),x.setTransform(1,0,0,1,0,0),x.drawImage(U,$.offsetX,$.offsetY),x.restore(),this.compose()}paintImageMaskXObjectRepeat(r,o,x=0,B=0,$,U){if(!this.contentVisible)return;r=this.getObject(r.data,r);const K=this.ctx;K.save();const rt=(0,i.getCurrentTransform)(K);K.transform(o,x,B,$,0,0);const ut=this._createMaskCanvas(r);K.setTransform(1,0,0,1,ut.offsetX-rt[4],ut.offsetY-rt[5]);for(let ft=0,yt=U.length;ft<yt;ft+=2){const bt=n.Util.transform(rt,[o,x,B,$,U[ft],U[ft+1]]),[vt,tt]=n.Util.applyTransform([0,0],bt);K.drawImage(ut.canvas,vt,tt)}K.restore(),this.compose()}paintImageMaskXObjectGroup(r){if(!this.contentVisible)return;const o=this.ctx,x=this.current.fillColor,B=this.current.patternFill;for(const $ of r){const{data:U,width:K,height:rt,transform:ut}=$,ft=this.cachedCanvases.getCanvas("maskCanvas",K,rt),yt=ft.context;yt.save();const bt=this.getObject(U,$);S(yt,bt),yt.globalCompositeOperation="source-in",yt.fillStyle=B?x.getPattern(yt,this,(0,i.getCurrentTransformInverse)(o),F.PathType.FILL):x,yt.fillRect(0,0,K,rt),yt.restore(),o.save(),o.transform(...ut),o.scale(1,-1),b(o,ft.canvas,0,0,K,rt,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(r){if(!this.contentVisible)return;const o=this.getObject(r);if(!o){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(r,o,x,B){if(!this.contentVisible)return;const $=this.getObject(r);if(!$){(0,n.warn)("Dependent image isn't ready yet");return}const U=$.width,K=$.height,rt=[];for(let ut=0,ft=B.length;ut<ft;ut+=2)rt.push({transform:[o,0,0,x,B[ut],B[ut+1]],x:0,y:0,w:U,h:K});this.paintInlineImageXObjectGroup($,rt)}applyTransferMapsToCanvas(r){return this.current.transferMaps!=="none"&&(r.filter=this.current.transferMaps,r.drawImage(r.canvas,0,0),r.filter="none"),r.canvas}applyTransferMapsToBitmap(r){if(this.current.transferMaps==="none")return r.bitmap;const{bitmap:o,width:x,height:B}=r,$=this.cachedCanvases.getCanvas("inlineImage",x,B),U=$.context;return U.filter=this.current.transferMaps,U.drawImage(o,0,0),U.filter="none",$.canvas}paintInlineImageXObject(r){if(!this.contentVisible)return;const o=r.width,x=r.height,B=this.ctx;if(this.save(),!n.isNodeJS){const{filter:K}=B;K!=="none"&&K!==""&&(B.filter="none")}B.scale(1/o,-1/x);let $;if(r.bitmap)$=this.applyTransferMapsToBitmap(r);else if(typeof HTMLElement=="function"&&r instanceof HTMLElement||!r.data)$=r;else{const rt=this.cachedCanvases.getCanvas("inlineImage",o,x).context;I(rt,r),$=this.applyTransferMapsToCanvas(rt)}const U=this._scaleImage($,(0,i.getCurrentTransformInverse)(B));B.imageSmoothingEnabled=P((0,i.getCurrentTransform)(B),r.interpolate),b(B,U.img,0,0,U.paintWidth,U.paintHeight,0,-x,o,x),this.compose(),this.restore()}paintInlineImageXObjectGroup(r,o){if(!this.contentVisible)return;const x=this.ctx;let B;if(r.bitmap)B=r.bitmap;else{const $=r.width,U=r.height,rt=this.cachedCanvases.getCanvas("inlineImage",$,U).context;I(rt,r),B=this.applyTransferMapsToCanvas(rt)}for(const $ of o)x.save(),x.transform(...$.transform),x.scale(1,-1),b(x,B,$.x,$.y,$.w,$.h,0,-1,1,1),x.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(r){}markPointProps(r,o){}beginMarkedContent(r){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(r,o){r==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(r){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const x=this.ctx;this.pendingClip&&(o||(this.pendingClip===Y?x.clip("evenodd"):x.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),x.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const r=(0,i.getCurrentTransform)(this.ctx);if(r[1]===0&&r[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(r[0]),Math.abs(r[3]));else{const o=Math.abs(r[0]*r[3]-r[2]*r[1]),x=Math.hypot(r[0],r[2]),B=Math.hypot(r[1],r[3]);this._cachedGetSinglePixelWidth=Math.max(x,B)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:r}=this.current,{a:o,b:x,c:B,d:$}=this.ctx.getTransform();let U,K;if(x===0&&B===0){const rt=Math.abs(o),ut=Math.abs($);if(rt===ut)if(r===0)U=K=1/rt;else{const ft=rt*r;U=K=ft<1?1/ft:1}else if(r===0)U=1/rt,K=1/ut;else{const ft=rt*r,yt=ut*r;U=ft<1?1/ft:1,K=yt<1?1/yt:1}}else{const rt=Math.abs(o*$-x*B),ut=Math.hypot(o,x),ft=Math.hypot(B,$);if(r===0)U=ft/rt,K=ut/rt;else{const yt=r*rt;U=ft>yt?ft/yt:1,K=ut>yt?ut/yt:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(r){const{ctx:o}=this,{lineWidth:x}=this.current,[B,$]=this.getScaleForStroking();if(o.lineWidth=x||1,B===1&&$===1){o.stroke();return}const U=o.getLineDash();if(r&&o.save(),o.scale(B,$),U.length>0){const K=Math.max(B,$);o.setLineDash(U.map(rt=>rt/K)),o.lineDashOffset/=K}o.stroke(),r&&o.restore()}isContentVisible(){for(let r=this.markedContentStack.length-1;r>=0;r--)if(!this.markedContentStack[r].visible)return!1;return!0}};st=new WeakSet,Ye=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ke=function(){if(this.pageColors){const r=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(r!=="none"){const o=this.ctx.filter;this.ctx.filter=r,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let H=it;t.CanvasGraphics=H;for(const M in n.OPS)H.prototype[M]!==void 0&&(H.prototype[n.OPS[M]]=H.prototype[M])},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=y;var n=u(1),i=u(6);const F={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=F;function R(f,v){if(!v)return;const I=v[2]-v[0],S=v[3]-v[1],c=new Path2D;c.rect(v[0],v[1],I,S),f.clip(c)}class G{constructor(){this.constructor===G&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class A extends G{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let I;this._type==="axial"?I=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)I.addColorStop(S[0],S[1]);return I}getPattern(v,I,S,c){let a;if(c===F.STROKE||c===F.FILL){const d=I.current.getClippedPathBoundingBox(c,(0,i.getCurrentTransform)(v))||[0,0,0,0],h=Math.ceil(d[2]-d[0])||1,g=Math.ceil(d[3]-d[1])||1,N=I.cachedCanvases.getCanvas("pattern",h,g,!0),l=N.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-d[0],-d[1]),S=n.Util.transform(S,[1,0,0,1,d[0],d[1]]),l.transform(...I.baseTransform),this.matrix&&l.transform(...this.matrix),R(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),a=v.createPattern(N.canvas,"no-repeat");const P=new DOMMatrix(S);a.setTransform(P)}else R(v,this._bbox),a=this._createGradient(v);return a}}function E(f,v,I,S,c,a,d,h){const g=v.coords,N=v.colors,l=f.data,P=f.width*4;let D;g[I+1]>g[S+1]&&(D=I,I=S,S=D,D=a,a=d,d=D),g[S+1]>g[c+1]&&(D=S,S=c,c=D,D=d,d=h,h=D),g[I+1]>g[S+1]&&(D=I,I=S,S=D,D=a,a=d,d=D);const Z=(g[I]+v.offsetX)*v.scaleX,V=(g[I+1]+v.offsetY)*v.scaleY,Y=(g[S]+v.offsetX)*v.scaleX,H=(g[S+1]+v.offsetY)*v.scaleY,st=(g[c]+v.offsetX)*v.scaleX,k=(g[c+1]+v.offsetY)*v.scaleY;if(V>=k)return;const q=N[a],it=N[a+1],M=N[a+2],r=N[d],o=N[d+1],x=N[d+2],B=N[h],$=N[h+1],U=N[h+2],K=Math.round(V),rt=Math.round(k);let ut,ft,yt,bt,vt,tt,et,T;for(let W=K;W<=rt;W++){if(W<H){const Et=W<V?0:(V-W)/(V-H);ut=Z-(Z-Y)*Et,ft=q-(q-r)*Et,yt=it-(it-o)*Et,bt=M-(M-x)*Et}else{let Et;W>k?Et=1:H===k?Et=0:Et=(H-W)/(H-k),ut=Y-(Y-st)*Et,ft=r-(r-B)*Et,yt=o-(o-$)*Et,bt=x-(x-U)*Et}let J;W<V?J=0:W>k?J=1:J=(V-W)/(V-k),vt=Z-(Z-st)*J,tt=q-(q-B)*J,et=it-(it-$)*J,T=M-(M-U)*J;const at=Math.round(Math.min(ut,vt)),gt=Math.round(Math.max(ut,vt));let St=P*W+at*4;for(let Et=at;Et<=gt;Et++)J=(ut-Et)/(ut-vt),J<0?J=0:J>1&&(J=1),l[St++]=ft-(ft-tt)*J|0,l[St++]=yt-(yt-et)*J|0,l[St++]=bt-(bt-T)*J|0,l[St++]=255}}function p(f,v,I){const S=v.coords,c=v.colors;let a,d;switch(v.type){case"lattice":const h=v.verticesPerRow,g=Math.floor(S.length/h)-1,N=h-1;for(a=0;a<g;a++){let l=a*h;for(let P=0;P<N;P++,l++)E(f,I,S[l],S[l+1],S[l+h],c[l],c[l+1],c[l+h]),E(f,I,S[l+h+1],S[l+1],S[l+h],c[l+h+1],c[l+1],c[l+h])}break;case"triangles":for(a=0,d=S.length;a<d;a+=3)E(f,I,S[a],S[a+1],S[a+2],c[a],c[a+1],c[a+2]);break;default:throw new Error("illegal figure")}}class w extends G{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,I,S){const h=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-h,l=Math.ceil(this._bounds[3])-g,P=Math.min(Math.ceil(Math.abs(N*v[0]*1.1)),3e3),D=Math.min(Math.ceil(Math.abs(l*v[1]*1.1)),3e3),Z=N/P,V=l/D,Y={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-g,scaleX:1/Z,scaleY:1/V},H=P+2*2,st=D+2*2,k=S.getCanvas("mesh",H,st,!1),q=k.context,it=q.createImageData(P,D);if(I){const r=it.data;for(let o=0,x=r.length;o<x;o+=4)r[o]=I[0],r[o+1]=I[1],r[o+2]=I[2],r[o+3]=255}for(const r of this._figures)p(it,r,Y);return q.putImageData(it,2,2),{canvas:k.canvas,offsetX:h-2*Z,offsetY:g-2*V,scaleX:Z,scaleY:V}}getPattern(v,I,S,c){R(v,this._bbox);let a;if(c===F.SHADING)a=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(v));else if(a=n.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){const h=n.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*h[0],a[1]*h[1]]}const d=this._createMeshCanvas(a,c===F.SHADING?null:this._background,I.cachedCanvases);return c!==F.SHADING&&(v.setTransform(...I.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(d.offsetX,d.offsetY),v.scale(d.scaleX,d.scaleY),v.createPattern(d.canvas,"no-repeat")}}class O extends G{getPattern(){return"hotpink"}}function y(f){switch(f[0]){case"RadialAxial":return new A(f);case"Mesh":return new w(f);case"Dummy":return new O}throw new Error(`Unknown IR type: ${f[0]}`)}const m={COLORED:1,UNCOLORED:2},b=class b{constructor(v,I,S,c,a){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=I,this.ctx=S,this.canvasGraphicsFactory=c,this.baseTransform=a}createPatternCanvas(v){const I=this.operatorList,S=this.bbox,c=this.xstep,a=this.ystep,d=this.paintType,h=this.tilingType,g=this.color,N=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+h);const l=S[0],P=S[1],D=S[2],Z=S[3],V=n.Util.singularValueDecompose2dScale(this.matrix),Y=n.Util.singularValueDecompose2dScale(this.baseTransform),H=[V[0]*Y[0],V[1]*Y[1]],st=this.getSizeAndScale(c,this.ctx.canvas.width,H[0]),k=this.getSizeAndScale(a,this.ctx.canvas.height,H[1]),q=v.cachedCanvases.getCanvas("pattern",st.size,k.size,!0),it=q.context,M=N.createCanvasGraphics(it);M.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(M,d,g);let r=l,o=P,x=D,B=Z;return l<0&&(r=0,x+=Math.abs(l)),P<0&&(o=0,B+=Math.abs(P)),it.translate(-(st.scale*r),-(k.scale*o)),M.transform(st.scale,0,0,k.scale,0,0),it.save(),this.clipBbox(M,r,o,x,B),M.baseTransform=(0,i.getCurrentTransform)(M.ctx),M.executeOperatorList(I),M.endDrawing(),{canvas:q.canvas,scaleX:st.scale,scaleY:k.scale,offsetX:r,offsetY:o}}getSizeAndScale(v,I,S){v=Math.abs(v);const c=Math.max(b.MAX_PATTERN_SIZE,I);let a=Math.ceil(v*S);return a>=c?a=c:S=a/v,{scale:S,size:a}}clipBbox(v,I,S,c,a){const d=c-I,h=a-S;v.ctx.rect(I,S,d,h),v.current.updateRectMinMax((0,i.getCurrentTransform)(v.ctx),[I,S,c,a]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,I,S){const c=v.ctx,a=v.current;switch(I){case m.COLORED:const d=this.ctx;c.fillStyle=d.fillStyle,c.strokeStyle=d.strokeStyle,a.fillColor=d.fillStyle,a.strokeColor=d.strokeStyle;break;case m.UNCOLORED:const h=n.Util.makeHexColor(S[0],S[1],S[2]);c.fillStyle=h,c.strokeStyle=h,a.fillColor=h,a.strokeColor=h;break;default:throw new n.FormatError(`Unsupported paint type: ${I}`)}}getPattern(v,I,S,c){let a=S;c!==F.SHADING&&(a=n.Util.transform(a,I.baseTransform),this.matrix&&(a=n.Util.transform(a,this.matrix)));const d=this.createPatternCanvas(I);let h=new DOMMatrix(a);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);const g=v.createPattern(d.canvas,"repeat");return g.setTransform(h),g}};Qt(b,"MAX_PATTERN_SIZE",3e3);let C=b;t.TilingPattern=C},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=F,t.convertToRGBA=i,t.grayToRGBA=G;var n=u(1);function i(A){switch(A.kind){case n.ImageKind.GRAYSCALE_1BPP:return F(A);case n.ImageKind.RGB_24BPP:return R(A)}return null}function F({src:A,srcPos:E=0,dest:p,width:w,height:O,nonBlackColor:y=4294967295,inverseDecode:m=!1}){const C=n.FeatureTest.isLittleEndian?4278190080:255,[b,f]=m?[y,C]:[C,y],v=w>>3,I=w&7,S=A.length;p=new Uint32Array(p.buffer);let c=0;for(let a=0;a<O;a++){for(const h=E+v;E<h;E++){const g=E<S?A[E]:255;p[c++]=g&128?f:b,p[c++]=g&64?f:b,p[c++]=g&32?f:b,p[c++]=g&16?f:b,p[c++]=g&8?f:b,p[c++]=g&4?f:b,p[c++]=g&2?f:b,p[c++]=g&1?f:b}if(I===0)continue;const d=E<S?A[E++]:255;for(let h=0;h<I;h++)p[c++]=d&1<<7-h?f:b}return{srcPos:E,destPos:c}}function R({src:A,srcPos:E=0,dest:p,destPos:w=0,width:O,height:y}){let m=0;const C=A.length>>2,b=new Uint32Array(A.buffer,E,C);if(n.FeatureTest.isLittleEndian){for(;m<C-2;m+=3,w+=4){const f=b[m],v=b[m+1],I=b[m+2];p[w]=f|4278190080,p[w+1]=f>>>24|v<<8|4278190080,p[w+2]=v>>>16|I<<16|4278190080,p[w+3]=I>>>8|4278190080}for(let f=m*4,v=A.length;f<v;f+=3)p[w++]=A[f]|A[f+1]<<8|A[f+2]<<16|4278190080}else{for(;m<C-2;m+=3,w+=4){const f=b[m],v=b[m+1],I=b[m+2];p[w]=f|255,p[w+1]=f<<24|v>>>8|255,p[w+2]=v<<16|I>>>16|255,p[w+3]=I<<8|255}for(let f=m*4,v=A.length;f<v;f+=3)p[w++]=A[f]<<24|A[f+1]<<16|A[f+2]<<8|255}return{srcPos:E,destPos:w}}function G(A,E){if(n.FeatureTest.isLittleEndian)for(let p=0,w=A.length;p<w;p++)E[p]=A[p]*65793|4278190080;else for(let p=0,w=A.length;p<w;p++)E[p]=A[p]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const u=Object.create(null);t.GlobalWorkerOptions=u,u.workerPort=null,u.workerSrc=""},(e,t,u)=>{var A,Tn,wn,Ce;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=u(1);const i={DATA:1,ERROR:2},F={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(O){switch(O instanceof Error||typeof O=="object"&&O!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),O.name){case"AbortException":return new n.AbortException(O.message);case"MissingPDFException":return new n.MissingPDFException(O.message);case"PasswordException":return new n.PasswordException(O.message,O.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(O.message,O.status);case"UnknownErrorException":return new n.UnknownErrorException(O.message,O.details);default:return new n.UnknownErrorException(O.message,O.toString())}}class G{constructor(y,m,C){ot(this,A);this.sourceName=y,this.targetName=m,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const f=b.data;if(f.targetName!==this.sourceName)return;if(f.stream){Q(this,A,wn).call(this,f);return}if(f.callback){const I=f.callbackId,S=this.callbackCapabilities[I];if(!S)throw new Error(`Cannot resolve callback ${I}`);if(delete this.callbackCapabilities[I],f.callback===i.DATA)S.resolve(f.data);else if(f.callback===i.ERROR)S.reject(R(f.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[f.action];if(!v)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const I=this.sourceName,S=f.sourceName;new Promise(function(c){c(v(f.data))}).then(function(c){C.postMessage({sourceName:I,targetName:S,callback:i.DATA,callbackId:f.callbackId,data:c})},function(c){C.postMessage({sourceName:I,targetName:S,callback:i.ERROR,callbackId:f.callbackId,reason:R(c)})});return}if(f.streamId){Q(this,A,Tn).call(this,f);return}v(f.data)},C.addEventListener("message",this._onComObjOnMessage)}on(y,m){const C=this.actionHandler;if(C[y])throw new Error(`There is already an actionName called "${y}"`);C[y]=m}send(y,m,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:m},C)}sendWithPromise(y,m,C){const b=this.callbackId++,f=new n.PromiseCapability;this.callbackCapabilities[b]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:b,data:m},C)}catch(v){f.reject(v)}return f.promise}sendWithStream(y,m,C,b){const f=this.streamId++,v=this.sourceName,I=this.targetName,S=this.comObj;return new ReadableStream({start:c=>{const a=new n.PromiseCapability;return this.streamControllers[f]={controller:c,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},S.postMessage({sourceName:v,targetName:I,action:y,streamId:f,data:m,desiredSize:c.desiredSize},b),a.promise},pull:c=>{const a=new n.PromiseCapability;return this.streamControllers[f].pullCall=a,S.postMessage({sourceName:v,targetName:I,stream:F.PULL,streamId:f,desiredSize:c.desiredSize}),a.promise},cancel:c=>{(0,n.assert)(c instanceof Error,"cancel must have a valid reason");const a=new n.PromiseCapability;return this.streamControllers[f].cancelCall=a,this.streamControllers[f].isClosed=!0,S.postMessage({sourceName:v,targetName:I,stream:F.CANCEL,streamId:f,reason:R(c)}),a.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}A=new WeakSet,Tn=function(y){const m=y.streamId,C=this.sourceName,b=y.sourceName,f=this.comObj,v=this,I=this.actionHandler[y.action],S={enqueue(c,a=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=a,h>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),f.postMessage({sourceName:C,targetName:b,stream:F.ENQUEUE,streamId:m,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:C,targetName:b,stream:F.CLOSE,streamId:m}),delete v.streamSinks[m])},error(c){(0,n.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:C,targetName:b,stream:F.ERROR,streamId:m,reason:R(c)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};S.sinkCapability.resolve(),S.ready=S.sinkCapability.promise,this.streamSinks[m]=S,new Promise(function(c){c(I(y.data,S))}).then(function(){f.postMessage({sourceName:C,targetName:b,stream:F.START_COMPLETE,streamId:m,success:!0})},function(c){f.postMessage({sourceName:C,targetName:b,stream:F.START_COMPLETE,streamId:m,reason:R(c)})})},wn=function(y){const m=y.streamId,C=this.sourceName,b=y.sourceName,f=this.comObj,v=this.streamControllers[m],I=this.streamSinks[m];switch(y.stream){case F.START_COMPLETE:y.success?v.startCall.resolve():v.startCall.reject(R(y.reason));break;case F.PULL_COMPLETE:y.success?v.pullCall.resolve():v.pullCall.reject(R(y.reason));break;case F.PULL:if(!I){f.postMessage({sourceName:C,targetName:b,stream:F.PULL_COMPLETE,streamId:m,success:!0});break}I.desiredSize<=0&&y.desiredSize>0&&I.sinkCapability.resolve(),I.desiredSize=y.desiredSize,new Promise(function(S){var c;S((c=I.onPull)==null?void 0:c.call(I))}).then(function(){f.postMessage({sourceName:C,targetName:b,stream:F.PULL_COMPLETE,streamId:m,success:!0})},function(S){f.postMessage({sourceName:C,targetName:b,stream:F.PULL_COMPLETE,streamId:m,reason:R(S)})});break;case F.ENQUEUE:if((0,n.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(y.chunk);break;case F.CLOSE:if((0,n.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),Q(this,A,Ce).call(this,v,m);break;case F.ERROR:(0,n.assert)(v,"error should have stream controller"),v.controller.error(R(y.reason)),Q(this,A,Ce).call(this,v,m);break;case F.CANCEL_COMPLETE:y.success?v.cancelCall.resolve():v.cancelCall.reject(R(y.reason)),Q(this,A,Ce).call(this,v,m);break;case F.CANCEL:if(!I)break;new Promise(function(S){var c;S((c=I.onCancel)==null?void 0:c.call(I,R(y.reason)))}).then(function(){f.postMessage({sourceName:C,targetName:b,stream:F.CANCEL_COMPLETE,streamId:m,success:!0})},function(S){f.postMessage({sourceName:C,targetName:b,stream:F.CANCEL_COMPLETE,streamId:m,reason:R(S)})}),I.sinkCapability.reject(R(y.reason)),I.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},Ce=async function(y,m){var C,b,f;await Promise.allSettled([(C=y.startCall)==null?void 0:C.promise,(b=y.pullCall)==null?void 0:b.promise,(f=y.cancelCall)==null?void 0:f.promise]),delete this.streamControllers[m]},t.MessageHandler=G},(e,t,u)=>{var F,R;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=u(1);class i{constructor({parsedData:A,rawData:E}){ot(this,F);ot(this,R);ct(this,F,A),ct(this,R,E)}getRaw(){return s(this,R)}get(A){return s(this,F).get(A)??null}getAll(){return(0,n.objectFromMap)(s(this,F))}has(A){return s(this,F).has(A)}}F=new WeakMap,R=new WeakMap,t.Metadata=i},(e,t,u)=>{var A,E,p,w,O,y,Je;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=u(1),i=u(8);const F=Symbol("INTERNAL");class R{constructor(b,f){ot(this,A,!0);this.name=b,this.intent=f}get visible(){return s(this,A)}_setVisible(b,f){b!==F&&(0,n.unreachable)("Internal method `_setVisible` called."),ct(this,A,f)}}A=new WeakMap;class G{constructor(b){ot(this,y);ot(this,E,null);ot(this,p,new Map);ot(this,w,null);ot(this,O,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,ct(this,O,b.order);for(const f of b.groups)s(this,p).set(f.id,new R(f.name,f.intent));if(b.baseState==="OFF")for(const f of s(this,p).values())f._setVisible(F,!1);for(const f of b.on)s(this,p).get(f)._setVisible(F,!0);for(const f of b.off)s(this,p).get(f)._setVisible(F,!1);ct(this,w,this.getHash())}}isVisible(b){if(s(this,p).size===0)return!0;if(!b)return(0,n.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return s(this,p).has(b.id)?s(this,p).get(b.id).visible:((0,n.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return Q(this,y,Je).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const f of b.ids){if(!s(this,p).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(s(this,p).get(f).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const f of b.ids){if(!s(this,p).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(!s(this,p).get(f).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const f of b.ids){if(!s(this,p).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(!s(this,p).get(f).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const f of b.ids){if(!s(this,p).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(s(this,p).get(f).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,n.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,f=!0){if(!s(this,p).has(b)){(0,n.warn)(`Optional content group not found: ${b}`);return}s(this,p).get(b)._setVisible(F,!!f),ct(this,E,null)}get hasInitialVisibility(){return s(this,w)===null||this.getHash()===s(this,w)}getOrder(){return s(this,p).size?s(this,O)?s(this,O).slice():[...s(this,p).keys()]:null}getGroups(){return s(this,p).size>0?(0,n.objectFromMap)(s(this,p)):null}getGroup(b){return s(this,p).get(b)||null}getHash(){if(s(this,E)!==null)return s(this,E);const b=new i.MurmurHash3_64;for(const[f,v]of s(this,p))b.update(`${f}:${v.visible}`);return ct(this,E,b.hexdigest())}}E=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakSet,Je=function(b){const f=b.length;if(f<2)return!0;const v=b[0];for(let I=1;I<f;I++){const S=b[I];let c;if(Array.isArray(S))c=Q(this,y,Je).call(this,S);else if(s(this,p).has(S))c=s(this,p).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(v){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return v==="And"},t.OptionalContentConfig=G},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=u(1),i=u(6);class F{constructor({length:E,initialData:p,progressiveDone:w=!1,contentDispositionFilename:O=null,disableRange:y=!1,disableStream:m=!1},C){if((0,n.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=O,(p==null?void 0:p.length)>0){const b=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!m,this._isRangeSupported=!y,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,f)=>{this._onReceiveData({begin:b,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((b,f)=>{this._onProgress({loaded:b,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:p}){const w=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const O=this._rangeReaders.some(function(y){return y._begin!==E?!1:(y._enqueue(w),!0)});(0,n.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}_onProgress(E){var p,w,O,y;E.total===void 0?(w=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||w.call(p,{loaded:E.loaded}):(y=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||y.call(O,{loaded:E.loaded,total:E.total})}_onProgressiveDone(){var E;(E=this._fullRequestReader)==null||E.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const p=this._rangeReaders.indexOf(E);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new R(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,p){if(p<=this._progressiveDataLength)return null;const w=new G(this,E,p);return this._pdfDataRangeTransport.requestDataRange(E,p),this._rangeReaders.push(w),w}cancelAllRequests(E){var p;(p=this._fullRequestReader)==null||p.cancel(E);for(const w of this._rangeReaders.slice(0))w.cancel(E);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=F;class R{constructor(E,p,w=!1,O=null){this._stream=E,this._done=w||!1,this._filename=(0,i.isPdfFile)(O)?O:null,this._queuedChunks=p||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new n.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G{constructor(E,p,w){this._stream=E,this._begin=p,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new n.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=u(1),i=u(20);function F(w,O,y){return{method:"GET",headers:w,signal:y.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function R(w){const O=new Headers;for(const y in w){const m=w[y];m!==void 0&&O.append(y,m)}return O}function G(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class A{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(O,y){if(y<=this._progressiveDataLength)return null;const m=new p(this,O,y);return this._rangeRequestReaders.push(m),m}cancelAllRequests(O){var y;(y=this._fullRequestReader)==null||y.cancel(O);for(const m of this._rangeRequestReaders.slice(0))m.cancel(O)}}t.PDFFetchStream=A;class E{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const y=O.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new n.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=R(this._stream.httpHeaders);const m=y.url;fetch(m,F(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,i.validateResponseStatus)(C.status))throw(0,i.createResponseStatusError)(C.status,m);this._reader=C.body.getReader(),this._headersCapability.resolve();const b=I=>C.headers.get(I),{allowRangeRequests:f,suggestedLength:v}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=v||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:O,done:y}=await this._reader.read();return y?{value:O,done:y}:(this._loaded+=O.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:G(O),done:!1})}cancel(O){var y;(y=this._reader)==null||y.cancel(O),this._abortController.abort()}}class p{constructor(O,y,m){this._stream=O,this._reader=null,this._loaded=0;const C=O.source;this._withCredentials=C.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=R(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${m-1}`);const b=C.url;fetch(b,F(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,i.validateResponseStatus)(f.status))throw(0,i.createResponseStatusError)(f.status,b);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:O,done:y}=await this._reader.read();return y?{value:O,done:y}:(this._loaded+=O.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:G(O),done:!1})}cancel(O){var y;(y=this._reader)==null||y.cancel(O),this._abortController.abort()}}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=A,t.extractFilenameFromHeader=G,t.validateRangeRequestCapabilities=R,t.validateResponseStatus=E;var n=u(1),i=u(21),F=u(6);function R({getResponseHeader:p,isHttp:w,rangeChunkSize:O,disableRange:y}){const m={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(p("Content-Length"),10);return!Number.isInteger(C)||(m.suggestedLength=C,C<=2*O)||y||!w||p("Accept-Ranges")!=="bytes"||(p("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function G(p){const w=p("Content-Disposition");if(w){let O=(0,i.getFilenameFromContentDispositionHeader)(w);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,F.isPdfFile)(O))return O}return null}function A(p,w){return p===404||p===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${w}".`,p)}function E(p){return p===200||p===206}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var n=u(1);function i(F){let R=!0,G=A("filename\\*","i").exec(F);if(G){G=G[1];let C=O(G);return C=unescape(C),C=y(C),C=m(C),p(C)}if(G=w(F),G){const C=m(G);return p(C)}if(G=A("filename","i").exec(F),G){G=G[1];let C=O(G);return C=m(C),p(C)}function A(C,b){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function E(C,b){if(C){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const f=new TextDecoder(C,{fatal:!0}),v=(0,n.stringToBytes)(b);b=f.decode(v),R=!1}catch{}}return b}function p(C){return R&&/[\x80-\xff]/.test(C)&&(C=E("utf-8",C),R&&(C=E("iso-8859-1",C))),C}function w(C){const b=[];let f;const v=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=v.exec(C))!==null;){let[,S,c,a]=f;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[c,a]}const I=[];for(let S=0;S<b.length&&S in b;++S){let[c,a]=b[S];a=O(a),c&&(a=unescape(a),S===0&&(a=y(a))),I.push(a)}return I.join("")}function O(C){if(C.startsWith('"')){const b=C.slice(1).split('\\"');for(let f=0;f<b.length;++f){const v=b[f].indexOf('"');v!==-1&&(b[f]=b[f].slice(0,v),b.length=f+1),b[f]=b[f].replaceAll(/\\(.)/g,"$1")}C=b.join('"')}return C}function y(C){const b=C.indexOf("'");if(b===-1)return C;const f=C.slice(0,b),I=C.slice(b+1).replace(/^[^']*'/,"");return E(f,I)}function m(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,f,v,I){if(v==="q"||v==="Q")return I=I.replaceAll("_"," "),I=I.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,c){return String.fromCharCode(parseInt(c,16))}),E(f,I);try{I=atob(I)}catch{}return E(f,I)})}return""}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=u(1),i=u(20);const F=200,R=206;function G(O){const y=O.response;return typeof y!="string"?y:(0,n.stringToBytes)(y).buffer}class A{constructor(y,m={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,m,C){const b={begin:y,end:m};for(const f in C)b[f]=C[f];return this.request(b)}requestFull(y){return this.request(y)}request(y){const m=new XMLHttpRequest,C=this.currXhrId++,b=this.pendingRequests[C]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const f in this.httpHeaders){const v=this.httpHeaders[f];v!==void 0&&m.setRequestHeader(f,v)}return this.isHttp&&"begin"in y&&"end"in y?(m.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),b.expectedStatus=R):b.expectedStatus=F,m.responseType="arraybuffer",y.onError&&(m.onerror=function(f){y.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,C),m.onprogress=this.onProgress.bind(this,C),b.onHeadersReceived=y.onHeadersReceived,b.onDone=y.onDone,b.onError=y.onError,b.onProgress=y.onProgress,m.send(null),C}onProgress(y,m){var b;const C=this.pendingRequests[y];C&&((b=C.onProgress)==null||b.call(C,m))}onStateChange(y,m){var S,c,a;const C=this.pendingRequests[y];if(!C)return;const b=C.xhr;if(b.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),b.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],b.status===0&&this.isHttp){(S=C.onError)==null||S.call(C,b.status);return}const f=b.status||F;if(!(f===F&&C.expectedStatus===R)&&f!==C.expectedStatus){(c=C.onError)==null||c.call(C,b.status);return}const I=G(b);if(f===R){const d=b.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);C.onDone({begin:parseInt(h[1],10),chunk:I})}else I?C.onDone({begin:0,chunk:I}):(a=C.onError)==null||a.call(C,b.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const m=this.pendingRequests[y].xhr;delete this.pendingRequests[y],m.abort()}}class E{constructor(y){this._source=y,this._manager=new A(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const m=this._rangeRequestReaders.indexOf(y);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(y,m){const C=new w(this._manager,y,m);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(y){var m;(m=this._fullRequestReader)==null||m.cancel(y);for(const C of this._rangeRequestReaders.slice(0))C.cancel(y)}}t.PDFNetworkStream=E;class p{constructor(y,m){this._manager=y;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=y.requestFull(C),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,m=this._manager.getRequestXhr(y),C=v=>m.getResponseHeader(v),{allowRangeRequests:b,suggestedLength:f}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,i.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var m;(m=this.onProgress)==null||m.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(y,m,C){this._manager=y;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(m,C,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const m=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,i.createResponseStatusError)(y,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=u(1),i=u(20);const F=/^file:\/\/\/[a-zA-Z]:\//;function R(C){const b=require$$5,f=b.parse(C);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(C)?b.parse(`file:///${C}`):(f.host||(f.protocol="file:"),f)}class G{constructor(b){this.source=b,this.url=R(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new w(this),this._fullRequestReader}getRangeReader(b,f){if(f<=this._progressiveDataLength)return null;const v=this.isFsUrl?new m(this,b,f):new O(this,b,f);return this._rangeRequestReaders.push(v),v}cancelAllRequests(b){var f;(f=this._fullRequestReader)==null||f.cancel(b);for(const v of this._rangeRequestReaders.slice(0))v.cancel(b)}}t.PDFNodeStream=G;class A{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const f=b.source;this._contentLength=f.length,this._loaded=0,this._filename=null,this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",f=>{this._error(f)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const f=b.source;this._isStreamingSupported=!f.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",f=>{this._error(f)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(C,b){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:b}}class w extends A{constructor(b){super(b);const f=v=>{if(v.statusCode===404){const a=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(v);const I=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:S,suggestedLength:c}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:I,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=c||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(I)};if(this._request=null,this._url.protocol==="http:"){const v=require$$5;this._request=v.request(p(this._url,b.httpHeaders),f)}else{const v=require$$5;this._request=v.request(p(this._url,b.httpHeaders),f)}this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class O extends E{constructor(b,f,v){super(b),this._httpHeaders={};for(const S in b.httpHeaders){const c=b.httpHeaders[S];c!==void 0&&(this._httpHeaders[S]=c)}this._httpHeaders.Range=`bytes=${f}-${v-1}`;const I=S=>{if(S.statusCode===404){const c=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(p(this._url,this._httpHeaders),I)}else{const S=require$$5;this._request=S.request(p(this._url,this._httpHeaders),I)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class y extends A{constructor(b){super(b);let f=decodeURIComponent(this._url.path);F.test(this._url.href)&&(f=f.replace(/^\//,""));const v=require$$5;v.lstat(f,(I,S)=>{if(I){I.code==="ENOENT"&&(I=new n.MissingPDFException(`Missing PDF "${f}".`)),this._storedError=I,this._headersCapability.reject(I);return}this._contentLength=S.size,this._setReadableStream(v.createReadStream(f)),this._headersCapability.resolve()})}}class m extends E{constructor(b,f,v){super(b);let I=decodeURIComponent(this._url.path);F.test(this._url.href)&&(I=I.replace(/^\//,""));const S=require$$5;this._setReadableStream(S.createReadStream(I,{start:f,end:v-1}))}}},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=u(6),i=u(1);const F={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},R="http://www.w3.org/XML/1998/namespace",G="http://www.w3.org/1999/xlink",A=["butt","round","square"],E=["miter","round","bevel"],p=function(S,c="",a=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!a)return URL.createObjectURL(new Blob([S],{type:c}));const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h=`data:${c};base64,`;for(let g=0,N=S.length;g<N;g+=3){const l=S[g]&255,P=S[g+1]&255,D=S[g+2]&255,Z=l>>2,V=(l&3)<<4|P>>4,Y=g+1<N?(P&15)<<2|D>>6:64,H=g+2<N?D&63:64;h+=d[Z]+d[V]+d[Y]+d[H]}return h},w=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,a=new Int32Array(256);for(let D=0;D<256;D++){let Z=D;for(let V=0;V<8;V++)Z=Z&1?3988292384^Z>>1&2147483647:Z>>1&2147483647;a[D]=Z}function d(D,Z,V){let Y=-1;for(let H=Z;H<V;H++){const st=(Y^D[H])&255,k=a[st];Y=Y>>>8^k}return Y^-1}function h(D,Z,V,Y){let H=Y;const st=Z.length;V[H]=st>>24&255,V[H+1]=st>>16&255,V[H+2]=st>>8&255,V[H+3]=st&255,H+=4,V[H]=D.charCodeAt(0)&255,V[H+1]=D.charCodeAt(1)&255,V[H+2]=D.charCodeAt(2)&255,V[H+3]=D.charCodeAt(3)&255,H+=4,V.set(Z,H),H+=Z.length;const k=d(V,Y+4,H);V[H]=k>>24&255,V[H+1]=k>>16&255,V[H+2]=k>>8&255,V[H+3]=k&255}function g(D,Z,V){let Y=1,H=0;for(let st=Z;st<V;++st)Y=(Y+(D[st]&255))%65521,H=(H+Y)%65521;return H<<16|Y}function N(D){if(!i.isNodeJS)return l(D);try{const Z=parseInt(process.versions.node)>=8?D:Buffer.from(D),V=require$$5.deflateSync(Z,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(Z){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Z)}return l(D)}function l(D){let Z=D.length;const V=65535,Y=Math.ceil(Z/V),H=new Uint8Array(2+Z+Y*5+4);let st=0;H[st++]=120,H[st++]=156;let k=0;for(;Z>V;)H[st++]=0,H[st++]=255,H[st++]=255,H[st++]=0,H[st++]=0,H.set(D.subarray(k,k+V),st),st+=V,k+=V,Z-=V;H[st++]=1,H[st++]=Z&255,H[st++]=Z>>8&255,H[st++]=~Z&65535&255,H[st++]=(~Z&65535)>>8&255,H.set(D.subarray(k),st),st+=D.length-k;const q=g(D,0,D.length);return H[st++]=q>>24&255,H[st++]=q>>16&255,H[st++]=q>>8&255,H[st++]=q&255,H}function P(D,Z,V,Y){const H=D.width,st=D.height;let k,q,it;const M=D.data;switch(Z){case i.ImageKind.GRAYSCALE_1BPP:q=0,k=1,it=H+7>>3;break;case i.ImageKind.RGB_24BPP:q=2,k=8,it=H*3;break;case i.ImageKind.RGBA_32BPP:q=6,k=8,it=H*4;break;default:throw new Error("invalid format")}const r=new Uint8Array((1+it)*st);let o=0,x=0;for(let ut=0;ut<st;++ut)r[o++]=0,r.set(M.subarray(x,x+it),o),x+=it,o+=it;if(Z===i.ImageKind.GRAYSCALE_1BPP&&Y){o=0;for(let ut=0;ut<st;ut++){o++;for(let ft=0;ft<it;ft++)r[o++]^=255}}const B=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,H&255,st>>24&255,st>>16&255,st>>8&255,st&255,k,q,0,0,0]),$=N(r),U=S.length+c*3+B.length+$.length,K=new Uint8Array(U);let rt=0;return K.set(S,rt),rt+=S.length,h("IHDR",B,K,rt),rt+=c+B.length,h("IDATA",$,K,rt),rt+=c+$.length,h("IEND",new Uint8Array(0),K,rt),p(K,"image/png",V)}return function(Z,V,Y){const H=Z.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:Z.kind;return P(Z,H,V,Y)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=F.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=F.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,a){this.x=c,this.y=a}}function y(S){let c=[];const a=[];for(const d of S){if(d.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),a.push(c),c=c.at(-1).items;continue}d.fn==="restore"?c=a.pop():c.push(d)}return c}function m(S){if(Number.isInteger(S))return S.toString();const c=S.toFixed(10);let a=c.length-1;if(c[a]!=="0")return c;do a--;while(c[a]==="0");return c.substring(0,c[a]==="."?a:a+1)}function C(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${m(S[0])} ${m(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const c=Math.acos(S[0])*180/Math.PI;return`rotate(${m(c)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${m(S[4])} ${m(S[5])})`;return`matrix(${m(S[0])} ${m(S[1])} ${m(S[2])} ${m(S[3])} ${m(S[4])} ${m(S[5])})`}let b=0,f=0,v=0;class I{constructor(c,a,d=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new O,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const h in i.OPS)this._operatorIdMapping[i.OPS[h]]=h}getObject(c,a=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):a}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const a=c.fnArray,d=c.argsArray;for(let h=0,g=a.length;h<g;h++)if(a[h]===i.OPS.dependency)for(const N of d[h]){const l=N.startsWith("g_")?this.commonObjs:this.objs,P=new Promise(D=>{l.get(N,D)});this.current.dependencies.push(P)}return Promise.all(this.current.dependencies)}transform(c,a,d,h,g,N){const l=[c,a,d,h,g,N];this.transformMatrix=i.Util.transform(this.transformMatrix,l),this.tgrp=null}getSVG(c,a){this.viewport=a;const d=this._initialize(a);return this.loadDependencies(c).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),d))}convertOpList(c){const a=this._operatorIdMapping,d=c.argsArray,h=c.fnArray,g=[];for(let N=0,l=h.length;N<l;N++){const P=h[N];g.push({fnId:P,fn:a[P],args:d[N]})}return y(g)}executeOpTree(c){for(const a of c){const d=a.fn,h=a.fnId,g=a.args;switch(h|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(g);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(g[0],g[1]);break;case i.OPS.setFont:this.setFont(g);break;case i.OPS.showText:this.showText(g[0]);break;case i.OPS.showSpacedText:this.showText(g[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(g[0],g[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(g[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(g[0]);break;case i.OPS.setHScale:this.setHScale(g[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(g[0],g[1],g[2],g[3],g[4],g[5]);break;case i.OPS.setTextRise:this.setTextRise(g[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(g[0]);break;case i.OPS.setLineWidth:this.setLineWidth(g[0]);break;case i.OPS.setLineJoin:this.setLineJoin(g[0]);break;case i.OPS.setLineCap:this.setLineCap(g[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(g[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(g[0],g[1],g[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(g[0],g[1],g[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(g);break;case i.OPS.setFillColorN:this.setFillColorN(g);break;case i.OPS.shadingFill:this.shadingFill(g[0]);break;case i.OPS.setDash:this.setDash(g[0],g[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(g[0]);break;case i.OPS.setFlatness:this.setFlatness(g[0]);break;case i.OPS.setGState:this.setGState(g[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(g[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(g[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(g[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(g[0],g[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(g[0],g[1],g[2],g[3],g[4],g[5]);break;case i.OPS.constructPath:this.constructPath(g[0],g[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,i.warn)(`Unimplemented operator ${d}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,a,d,h,g,N){const l=this.current;l.textMatrix=l.lineMatrix=[c,a,d,h,g,N],l.textMatrixScale=Math.hypot(c,a),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${m(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",m(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=i.IDENTITY_MATRIX,c.lineMatrix=i.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,a){const d=this.current;d.x=d.lineX+=c,d.y=d.lineY+=a,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${m(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",m(-d.y))}showText(c){const a=this.current,d=a.font,h=a.fontSize;if(h===0)return;const g=a.fontSizeScale,N=a.charSpacing,l=a.wordSpacing,P=a.fontDirection,D=a.textHScale*P,Z=d.vertical,V=Z?1:-1,Y=d.defaultVMetrics,H=h*a.fontMatrix[0];let st=0;for(const it of c){if(it===null){st+=P*l;continue}else if(typeof it=="number"){st+=V*it*h/1e3;continue}const M=(it.isSpace?l:0)+N,r=it.fontChar;let o,x,B=it.width;if(Z){let U;const K=it.vmetric||Y;U=it.vmetric?K[1]:B*.5,U=-U*H;const rt=K[2]*H;B=K?-K[0]:B,o=U/g,x=(st+rt)/g}else o=st/g,x=0;(it.isInFont||d.missingFile)&&(a.xcoords.push(a.x+o),Z&&a.ycoords.push(-a.y+x),a.tspan.textContent+=r);const $=Z?B*H-M*P:B*H+M*P;st+=$}a.tspan.setAttributeNS(null,"x",a.xcoords.map(m).join(" ")),Z?a.tspan.setAttributeNS(null,"y",a.ycoords.map(m).join(" ")):a.tspan.setAttributeNS(null,"y",m(-a.y)),Z?a.y-=st:a.x+=st*D,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${m(a.fontSize)}px`),a.fontStyle!==F.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==F.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const k=a.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(k===i.TextRenderingMode.FILL||k===i.TextRenderingMode.FILL_STROKE?(a.fillColor!==F.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),k===i.TextRenderingMode.STROKE||k===i.TextRenderingMode.FILL_STROKE){const it=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,it)}let q=a.textMatrix;a.textRise!==0&&(q=q.slice(),q[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${C(q)} scale(${m(D)}, -1)`),a.txtElement.setAttributeNS(R,"xml:space","preserve"),a.txtElement.append(a.tspan),a.txtgrp.append(a.txtElement),this._ensureTransformGroup().append(a.txtElement)}setLeadingMoveText(c,a){this.setLeading(-a),this.moveText(c,a)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const a=p(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${a}); }
`}setFont(c){const a=this.current,d=this.commonObjs.get(c[0]);let h=c[1];a.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),a.fontMatrix=d.fontMatrix||i.FONT_IDENTITY_MATRIX;let g="normal";d.black?g="900":d.bold&&(g="bold");const N=d.italic?"italic":"normal";h<0?(h=-h,a.fontDirection=-1):a.fontDirection=1,a.fontSize=h,a.fontFamily=d.loadedName,a.fontWeight=g,a.fontStyle=N,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",m(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;const c=this.current;c.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=c.txtElement)!=null&&a.hasChildNodes())&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=A[c]}setLineJoin(c){this.current.lineJoin=E[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,a,d){this.current.strokeColor=i.Util.makeHexColor(c,a,d)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,a,d){this.current.fillColor=i.Util.makeHexColor(c,a,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const{width:a,height:d}=this.viewport,h=i.Util.inverseTransform(this.transformMatrix),[g,N,l,P]=i.Util.getAxialAlignedBoundingBox([0,0,a,d],h),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x",g),D.setAttributeNS(null,"y",N),D.setAttributeNS(null,"width",l-g),D.setAttributeNS(null,"height",P-N),D.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&D.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(D)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const a=c[1],d=c[2],h=c[3]||i.IDENTITY_MATRIX,[g,N,l,P]=c[4],D=c[5],Z=c[6],V=c[7],Y=`shading${v++}`,[H,st,k,q]=i.Util.normalizeRect([...i.Util.applyTransform([g,N],h),...i.Util.applyTransform([l,P],h)]),[it,M]=i.Util.singularValueDecompose2dScale(h),r=D*it,o=Z*M,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",Y),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",r),x.setAttributeNS(null,"height",o),x.setAttributeNS(null,"x",`${H}`),x.setAttributeNS(null,"y",`${st}`);const B=this.svg,$=this.transformMatrix,U=this.current.fillColor,K=this.current.strokeColor,rt=this.svgFactory.create(k-H,q-st);if(this.svg=rt,this.transformMatrix=h,V===2){const ut=i.Util.makeHexColor(...a);this.current.fillColor=ut,this.current.strokeColor=ut}return this.executeOpTree(this.convertOpList(d)),this.svg=B,this.transformMatrix=$,this.current.fillColor=U,this.current.strokeColor=K,x.append(rt.childNodes[0]),this.defs.append(x),`url(#${Y})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const a=`shading${v++}`,d=c[3];let h;switch(c[1]){case"axial":const g=c[4],N=c[5];h=this.svgFactory.createElement("svg:linearGradient"),h.setAttributeNS(null,"id",a),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",g[0]),h.setAttributeNS(null,"y1",g[1]),h.setAttributeNS(null,"x2",N[0]),h.setAttributeNS(null,"y2",N[1]);break;case"radial":const l=c[4],P=c[5],D=c[6],Z=c[7];h=this.svgFactory.createElement("svg:radialGradient"),h.setAttributeNS(null,"id",a),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",P[0]),h.setAttributeNS(null,"cy",P[1]),h.setAttributeNS(null,"r",Z),h.setAttributeNS(null,"fx",l[0]),h.setAttributeNS(null,"fy",l[1]),h.setAttributeNS(null,"fr",D);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const g of d){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",g[0]),N.setAttributeNS(null,"stop-color",g[1]),h.append(N)}return this.defs.append(h),`url(#${a})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,a){this.current.dashArray=c,this.current.dashPhase=a}constructPath(c,a){const d=this.current;let h=d.x,g=d.y,N=[],l=0;for(const P of c)switch(P|0){case i.OPS.rectangle:h=a[l++],g=a[l++];const D=a[l++],Z=a[l++],V=h+D,Y=g+Z;N.push("M",m(h),m(g),"L",m(V),m(g),"L",m(V),m(Y),"L",m(h),m(Y),"Z");break;case i.OPS.moveTo:h=a[l++],g=a[l++],N.push("M",m(h),m(g));break;case i.OPS.lineTo:h=a[l++],g=a[l++],N.push("L",m(h),m(g));break;case i.OPS.curveTo:h=a[l+4],g=a[l+5],N.push("C",m(a[l]),m(a[l+1]),m(a[l+2]),m(a[l+3]),m(h),m(g)),l+=6;break;case i.OPS.curveTo2:N.push("C",m(h),m(g),m(a[l]),m(a[l+1]),m(a[l+2]),m(a[l+3])),h=a[l+2],g=a[l+3],l+=4;break;case i.OPS.curveTo3:h=a[l+2],g=a[l+3],N.push("C",m(a[l]),m(a[l+1]),m(h),m(g),m(h),m(g)),l+=4;break;case i.OPS.closePath:N.push("Z");break}N=N.join(" "),d.path&&c.length>0&&c[0]!==i.OPS.rectangle&&c[0]!==i.OPS.moveTo?N=d.path.getAttributeNS(null,"d")+N:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(d.path)),d.path.setAttributeNS(null,"d",N),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(h,g)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const a=`clippath${b++}`,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",a),d.setAttributeNS(null,"transform",C(this.transformMatrix));const h=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?h.setAttributeNS(null,"clip-rule","evenodd"):h.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,d.append(h),this.defs.append(d),c.activeClipUrl){c.clipGroup=null;for(const g of this.extraStack)g.clipGroup=null;d.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const a=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",a)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[a,d]of c)switch(a){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,i.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,a=1){const d=this.current;let h=d.dashArray;a!==1&&h.length>0&&(h=h.map(function(g){return a*g})),c.setAttributeNS(null,"stroke",d.strokeColor),c.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",m(d.miterLimit)),c.setAttributeNS(null,"stroke-linecap",d.lineCap),c.setAttributeNS(null,"stroke-linejoin",d.lineJoin),c.setAttributeNS(null,"stroke-width",m(a*d.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",h.map(m).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",m(a*d.dashPhase)+"px")}eoFill(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const a=this.getObject(c);if(!a){(0,i.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(c,a){const d=c.width,h=c.height,g=w(c,this.forceDataSchema,!!a),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",m(d)),N.setAttributeNS(null,"height",m(h)),this.current.element=N,this.clip("nonzero");const l=this.svgFactory.createElement("svg:image");l.setAttributeNS(G,"xlink:href",g),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",m(-h)),l.setAttributeNS(null,"width",m(d)+"px"),l.setAttributeNS(null,"height",m(h)+"px"),l.setAttributeNS(null,"transform",`scale(${m(1/d)} ${m(-1/h)})`),a?a.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(c){const a=this.getObject(c.data,c);if(a.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const d=this.current,h=a.width,g=a.height,N=d.fillColor;d.maskId=`mask${f++}`;const l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",d.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",m(h)),P.setAttributeNS(null,"height",m(g)),P.setAttributeNS(null,"fill",N),P.setAttributeNS(null,"mask",`url(#${d.maskId})`),this.defs.append(l),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(a,l)}paintFormXObjectBegin(c,a){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),a){const d=a[2]-a[0],h=a[3]-a[1],g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",a[0]),g.setAttributeNS(null,"y",a[1]),g.setAttributeNS(null,"width",m(d)),g.setAttributeNS(null,"height",m(h)),this.current.element=g,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const a=this.svgFactory.create(c.width,c.height),d=this.svgFactory.createElement("svg:defs");a.append(d),this.defs=d;const h=this.svgFactory.createElement("svg:g");return h.setAttributeNS(null,"transform",C(c.transform)),a.append(h),this.svg=h,a}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=I},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class u{static textContent(i){const F=[],R={items:F,styles:Object.create(null)};function G(A){var w;if(!A)return;let E=null;const p=A.name;if(p==="#text")E=A.value;else if(u.shouldBuildText(p))(w=A==null?void 0:A.attributes)!=null&&w.textContent?E=A.attributes.textContent:A.value&&(E=A.value);else return;if(E!==null&&F.push({str:E}),!!A.children)for(const O of A.children)G(O)}return G(i),R}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=u},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=C,t.updateTextLayer=b;var n=u(1),i=u(6);const F=1e5,R=30,G=.8,A=new Map;function E(f,v){let I;if(v&&n.FeatureTest.isOffscreenCanvasSupported)I=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=f,I=S.getContext("2d",{alpha:!1})}return I}function p(f,v){const I=A.get(f);if(I)return I;const S=E(R,v);S.font=`${R}px ${f}`;const c=S.measureText("");let a=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);if(a){const g=a/(a+d);return A.set(f,g),S.canvas.width=S.canvas.height=0,g}S.strokeStyle="red",S.clearRect(0,0,R,R),S.strokeText("g",0,0);let h=S.getImageData(0,0,R,R).data;d=0;for(let g=h.length-1-3;g>=0;g-=4)if(h[g]>0){d=Math.ceil(g/4/R);break}S.clearRect(0,0,R,R),S.strokeText("A",0,R),h=S.getImageData(0,0,R,R).data,a=0;for(let g=0,N=h.length;g<N;g+=4)if(h[g]>0){a=R-Math.floor(g/4/R);break}if(S.canvas.width=S.canvas.height=0,a){const g=a/(a+d);return A.set(f,g),g}return A.set(f,G),G}function w(f,v,I){const S=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};f._textDivs.push(S);const a=n.Util.transform(f._transform,v.transform);let d=Math.atan2(a[1],a[0]);const h=I[v.fontName];h.vertical&&(d+=Math.PI/2);const g=Math.hypot(a[2],a[3]),N=g*p(h.fontFamily,f._isOffscreenCanvasSupported);let l,P;d===0?(l=a[4],P=a[5]-N):(l=a[4]+N*Math.sin(d),P=a[5]-N*Math.cos(d));const D="calc(var(--scale-factor)*",Z=S.style;f._container===f._rootContainer?(Z.left=`${(100*l/f._pageWidth).toFixed(2)}%`,Z.top=`${(100*P/f._pageHeight).toFixed(2)}%`):(Z.left=`${D}${l.toFixed(2)}px)`,Z.top=`${D}${P.toFixed(2)}px)`),Z.fontSize=`${D}${g.toFixed(2)}px)`,Z.fontFamily=h.fontFamily,c.fontSize=g,S.setAttribute("role","presentation"),S.textContent=v.str,S.dir=v.dir,f._fontInspectorEnabled&&(S.dataset.fontName=v.fontName),d!==0&&(c.angle=d*(180/Math.PI));let V=!1;if(v.str.length>1)V=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const Y=Math.abs(v.transform[0]),H=Math.abs(v.transform[3]);Y!==H&&Math.max(Y,H)/Math.min(Y,H)>1.5&&(V=!0)}V&&(c.canvasWidth=h.vertical?v.height:v.width),f._textDivProperties.set(S,c),f._isReadableStream&&f._layoutText(S)}function O(f){const{div:v,scale:I,properties:S,ctx:c,prevFontSize:a,prevFontFamily:d}=f,{style:h}=v;let g="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:N}=h,{canvasWidth:l,fontSize:P}=S;(a!==P||d!==N)&&(c.font=`${P*I}px ${N}`,f.prevFontSize=P,f.prevFontFamily=N);const{width:D}=c.measureText(v.textContent);D>0&&(g=`scaleX(${l*I/D})`)}S.angle!==0&&(g=`rotate(${S.angle}deg) ${g}`),g.length>0&&(h.transform=g)}function y(f){if(f._canceled)return;const v=f._textDivs,I=f._capability;if(v.length>F){I.resolve();return}if(!f._isReadableStream)for(const c of v)f._layoutText(c);I.resolve()}class m{constructor({textContentSource:v,container:I,viewport:S,textDivs:c,textDivProperties:a,textContentItemsStr:d,isOffscreenCanvasSupported:h}){var D;this._textContentSource=v,this._isReadableStream=v instanceof ReadableStream,this._container=this._rootContainer=I,this._textDivs=c||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!((D=globalThis.FontInspector)!=null&&D.enabled),this._reader=null,this._textDivProperties=a||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,h)};const{pageWidth:g,pageHeight:N,pageX:l,pageY:P}=S.rawDims;this._transform=[1,0,0,-1,-l,P+N],this._pageWidth=g,this._pageHeight=N,(0,i.setLayerDimensions)(I,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(v,I){for(const S of v){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const c=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),c.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),w(this,S,I)}}_layoutText(v){const I=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,O(this._layoutTextParams),I.hasText&&this._container.append(v),I.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const v=new n.PromiseCapability;let I=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:c,done:a})=>{if(a){v.resolve();return}Object.assign(I,c.styles),this._processItems(c.items,I),S()},v.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:c}=this._textContentSource;this._processItems(S,c),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{I=null,y(this)},this._capability.reject)}}t.TextLayerRenderTask=m;function C(f){!f.textContentSource&&(f.textContent||f.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);const{container:v,viewport:I}=f,S=getComputedStyle(v),c=S.getPropertyValue("visibility"),a=parseFloat(S.getPropertyValue("--scale-factor"));c==="visible"&&(!a||Math.abs(a-I.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const d=new m(f);return d._render(),d}function b({container:f,viewport:v,textDivs:I,textDivProperties:S,isOffscreenCanvasSupported:c,mustRotate:a=!0,mustRescale:d=!0}){if(a&&(0,i.setLayerDimensions)(f,{rotation:v.rotation}),d){const h=E(0,c),N={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h};for(const l of I)N.properties=S.get(l),N.div=l,O(N)}}},(e,t,u)=>{var p,w,O,y,m,C,b,f,v,I,S,Qe,Pe,Ze,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=u(1),i=u(4),F=u(28),R=u(33),G=u(6),A=u(34);const g=class g{constructor({uiManager:l,pageIndex:P,div:D,accessibilityManager:Z,annotationLayer:V,viewport:Y,l10n:H}){ot(this,S);ot(this,p);ot(this,w,!1);ot(this,O,null);ot(this,y,this.pointerup.bind(this));ot(this,m,this.pointerdown.bind(this));ot(this,C,new Map);ot(this,b,!1);ot(this,f,!1);ot(this,v,!1);ot(this,I);const st=[F.FreeTextEditor,R.InkEditor,A.StampEditor];if(!g._initialized){g._initialized=!0;for(const k of st)k.initialize(H)}l.registerEditorTypes(st),ct(this,I,l),this.pageIndex=P,this.div=D,ct(this,p,Z),ct(this,O,V),this.viewport=Y,s(this,I).addLayer(this)}get isEmpty(){return s(this,C).size===0}updateToolbar(l){s(this,I).updateToolbar(l)}updateMode(l=s(this,I).getMode()){Q(this,S,tn).call(this),l===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),l!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",l===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",l===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",l===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(l){if(!l&&s(this,I).getMode()!==n.AnnotationEditorType.INK)return;if(!l){for(const D of s(this,C).values())if(D.isEmpty()){D.setInBackground();return}}Q(this,S,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(l){s(this,I).setEditingState(l)}addCommands(l){s(this,I).addCommands(l)}enable(){this.div.style.pointerEvents="auto";const l=new Set;for(const D of s(this,C).values())D.enableEditing(),D.annotationElementId&&l.add(D.annotationElementId);if(!s(this,O))return;const P=s(this,O).getEditableAnnotations();for(const D of P){if(D.hide(),s(this,I).isDeletedAnnotationElement(D.data.id)||l.has(D.data.id))continue;const Z=this.deserialize(D);Z&&(this.addOrRebuild(Z),Z.enableEditing())}}disable(){var P;ct(this,v,!0),this.div.style.pointerEvents="none";const l=new Set;for(const D of s(this,C).values()){if(D.disableEditing(),!D.annotationElementId||D.serialize()!==null){l.add(D.annotationElementId);continue}(P=this.getEditableAnnotation(D.annotationElementId))==null||P.show(),D.remove()}if(s(this,O)){const D=s(this,O).getEditableAnnotations();for(const Z of D){const{id:V}=Z.data;l.has(V)||s(this,I).isDeletedAnnotationElement(V)||Z.show()}}Q(this,S,tn).call(this),this.isEmpty&&(this.div.hidden=!0),ct(this,v,!1)}getEditableAnnotation(l){var P;return((P=s(this,O))==null?void 0:P.getEditableAnnotation(l))||null}setActiveEditor(l){s(this,I).getActive()!==l&&s(this,I).setActiveEditor(l)}enableClick(){this.div.addEventListener("pointerdown",s(this,m)),this.div.addEventListener("pointerup",s(this,y))}disableClick(){this.div.removeEventListener("pointerdown",s(this,m)),this.div.removeEventListener("pointerup",s(this,y))}attach(l){s(this,C).set(l.id,l);const{annotationElementId:P}=l;P&&s(this,I).isDeletedAnnotationElement(P)&&s(this,I).removeDeletedAnnotationElement(l)}detach(l){var P;s(this,C).delete(l.id),(P=s(this,p))==null||P.removePointerInTextLayer(l.contentDiv),!s(this,v)&&l.annotationElementId&&s(this,I).addDeletedAnnotationElement(l)}remove(l){this.detach(l),s(this,I).removeEditor(l),l.div.contains(document.activeElement)&&setTimeout(()=>{s(this,I).focusMainContainer()},0),l.div.remove(),l.isAttachedToDOM=!1,s(this,f)||this.addInkEditorIfNeeded(!1)}changeParent(l){var P;l.parent!==this&&(l.annotationElementId&&(s(this,I).addDeletedAnnotationElement(l.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(l),l.annotationElementId=null),this.attach(l),(P=l.parent)==null||P.detach(l),l.setParent(this),l.div&&l.isAttachedToDOM&&(l.div.remove(),this.div.append(l.div)))}add(l){if(this.changeParent(l),s(this,I).addEditor(l),this.attach(l),!l.isAttachedToDOM){const P=l.render();this.div.append(P),l.isAttachedToDOM=!0}l.fixAndSetPosition(),l.onceAdded(),s(this,I).addToAnnotationStorage(l)}moveEditorInDOM(l){var D;if(!l.isAttachedToDOM)return;const{activeElement:P}=document;l.div.contains(P)&&(l._focusEventsAllowed=!1,setTimeout(()=>{l.div.contains(document.activeElement)?l._focusEventsAllowed=!0:(l.div.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),P.focus())},0)),l._structTreeParentId=(D=s(this,p))==null?void 0:D.moveElementInDOM(this.div,l.div,l.contentDiv,!0)}addOrRebuild(l){l.needsToBeRebuilt()?l.rebuild():this.add(l)}addUndoableEditor(l){const P=()=>l._uiManager.rebuild(l),D=()=>{l.remove()};this.addCommands({cmd:P,undo:D,mustExec:!1})}getNextId(){return s(this,I).getId()}pasteEditor(l,P){s(this,I).updateToolbar(l),s(this,I).updateMode(l);const{offsetX:D,offsetY:Z}=Q(this,S,Ze).call(this),V=this.getNextId(),Y=Q(this,S,Qe).call(this,{parent:this,id:V,x:D,y:Z,uiManager:s(this,I),isCentered:!0,...P});Y&&this.add(Y)}deserialize(l){switch(l.annotationType??l.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return F.FreeTextEditor.deserialize(l,this,s(this,I));case n.AnnotationEditorType.INK:return R.InkEditor.deserialize(l,this,s(this,I));case n.AnnotationEditorType.STAMP:return A.StampEditor.deserialize(l,this,s(this,I))}return null}addNewEditor(){Q(this,S,Pe).call(this,Q(this,S,Ze).call(this),!0)}setSelected(l){s(this,I).setSelected(l)}toggleSelected(l){s(this,I).toggleSelected(l)}isSelected(l){return s(this,I).isSelected(l)}unselect(l){s(this,I).unselect(l)}pointerup(l){const{isMac:P}=n.FeatureTest.platform;if(!(l.button!==0||l.ctrlKey&&P)&&l.target===this.div&&s(this,b)){if(ct(this,b,!1),!s(this,w)){ct(this,w,!0);return}if(s(this,I).getMode()===n.AnnotationEditorType.STAMP){s(this,I).unselectAll();return}Q(this,S,Pe).call(this,l,!1)}}pointerdown(l){if(s(this,b)){ct(this,b,!1);return}const{isMac:P}=n.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&P||l.target!==this.div)return;ct(this,b,!0);const D=s(this,I).getActive();ct(this,w,!D||D.isEmpty())}findNewParent(l,P,D){const Z=s(this,I).findParent(P,D);return Z===null||Z===this?!1:(Z.changeParent(l),!0)}destroy(){var l,P;((l=s(this,I).getActive())==null?void 0:l.parent)===this&&(s(this,I).commitOrRemove(),s(this,I).setActiveEditor(null));for(const D of s(this,C).values())(P=s(this,p))==null||P.removePointerInTextLayer(D.contentDiv),D.setParent(null),D.isAttachedToDOM=!1,D.div.remove();this.div=null,s(this,C).clear(),s(this,I).removeLayer(this)}render({viewport:l}){this.viewport=l,(0,G.setLayerDimensions)(this.div,l);for(const P of s(this,I).getEditors(this.pageIndex))this.add(P);this.updateMode()}update({viewport:l}){s(this,I).commitOrRemove(),this.viewport=l,(0,G.setLayerDimensions)(this.div,{rotation:l.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:l,pageHeight:P}=this.viewport.rawDims;return[l,P]}};p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakMap,v=new WeakMap,I=new WeakMap,S=new WeakSet,Qe=function(l){switch(s(this,I).getMode()){case n.AnnotationEditorType.FREETEXT:return new F.FreeTextEditor(l);case n.AnnotationEditorType.INK:return new R.InkEditor(l);case n.AnnotationEditorType.STAMP:return new A.StampEditor(l)}return null},Pe=function(l,P){const D=this.getNextId(),Z=Q(this,S,Qe).call(this,{parent:this,id:D,x:l.offsetX,y:l.offsetY,uiManager:s(this,I),isCentered:P});return Z&&this.add(Z),Z},Ze=function(){const{x:l,y:P,width:D,height:Z}=this.div.getBoundingClientRect(),V=Math.max(0,l),Y=Math.max(0,P),H=Math.min(window.innerWidth,l+D),st=Math.min(window.innerHeight,P+Z),k=(V+H)/2-l,q=(Y+st)/2-P,[it,M]=this.viewport.rotation%180===0?[k,q]:[q,k];return{offsetX:it,offsetY:M}},tn=function(){ct(this,f,!0);for(const l of s(this,C).values())l.isEmpty()&&l.remove();ct(this,f,!1)},Qt(g,"_initialized",!1);let E=g;t.AnnotationEditorLayer=E},(e,t,u)=>{var A,E,p,w,O,y,m,C,b,f,Rn,kn,Mn,be,en,Fn,nn;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=u(1),i=u(5),F=u(4),R=u(29);const g=class g extends F.AnnotationEditor{constructor(P){super({...P,name:"freeTextEditor"});ot(this,f);ot(this,A,this.editorDivBlur.bind(this));ot(this,E,this.editorDivFocus.bind(this));ot(this,p,this.editorDivInput.bind(this));ot(this,w,this.editorDivKeydown.bind(this));ot(this,O);ot(this,y,"");ot(this,m,`${this.id}-editor`);ot(this,C);ot(this,b,null);ct(this,O,P.color||g._defaultColor||F.AnnotationEditor._defaultLineColor),ct(this,C,P.fontSize||g._defaultFontSize)}static get _keyboardManager(){const P=g.prototype,D=Y=>Y.isEmpty(),Z=i.AnnotationEditorUIManager.TRANSLATE_SMALL,V=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],P.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],P._translateEmpty,{args:[-Z,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],P._translateEmpty,{args:[-V,0],checker:D}],[["ArrowRight","mac+ArrowRight"],P._translateEmpty,{args:[Z,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],P._translateEmpty,{args:[V,0],checker:D}],[["ArrowUp","mac+ArrowUp"],P._translateEmpty,{args:[0,-Z],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],P._translateEmpty,{args:[0,-V],checker:D}],[["ArrowDown","mac+ArrowDown"],P._translateEmpty,{args:[0,Z],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],P._translateEmpty,{args:[0,V],checker:D}]]))}static initialize(P){F.AnnotationEditor.initialize(P,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const D=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(D.getPropertyValue("--freetext-padding"))}static updateDefaultParams(P,D){switch(P){case n.AnnotationEditorParamsType.FREETEXT_SIZE:g._defaultFontSize=D;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:g._defaultColor=D;break}}updateParams(P,D){switch(P){case n.AnnotationEditorParamsType.FREETEXT_SIZE:Q(this,f,Rn).call(this,D);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:Q(this,f,kn).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,g._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,g._defaultColor||F.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,C)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,O)]]}_translateEmpty(P,D){this._uiManager.translateSelectedEditors(P,D,!0)}getInitialTranslation(){const P=this.parentScale;return[-g._internalPadding*P,-(g._internalPadding+s(this,C))*P]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",s(this,w)),this.editorDiv.addEventListener("focus",s(this,E)),this.editorDiv.addEventListener("blur",s(this,A)),this.editorDiv.addEventListener("input",s(this,p)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",s(this,m)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",s(this,w)),this.editorDiv.removeEventListener("focus",s(this,E)),this.editorDiv.removeEventListener("blur",s(this,A)),this.editorDiv.removeEventListener("input",s(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(P){this._focusEventsAllowed&&(super.focusin(P),P.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var P;if(this.width){Q(this,f,nn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(P=this._initialOptions)!=null&&P.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const P=s(this,y),D=ct(this,y,Q(this,f,Mn).call(this).trimEnd());if(P===D)return;const Z=V=>{if(ct(this,y,V),!V){this.remove();return}Q(this,f,en).call(this),this._uiManager.rebuild(this),Q(this,f,be).call(this)};this.addCommands({cmd:()=>{Z(D)},undo:()=>{Z(P)},mustExec:!1}),Q(this,f,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(P){this.enterInEditMode()}keydown(P){P.target===this.div&&P.key==="Enter"&&(this.enterInEditMode(),P.preventDefault())}editorDivKeydown(P){g._keyboardManager.exec(this,P)}editorDivFocus(P){this.isEditing=!0}editorDivBlur(P){this.isEditing=!1}editorDivInput(P){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let P,D;this.width&&(P=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",s(this,m)),this.enableEditing(),F.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(V=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("aria-label",V)}),F.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(V=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("default-content",V)}),this.editorDiv.contentEditable=!0;const{style:Z}=this.editorDiv;if(Z.fontSize=`calc(${s(this,C)}px * var(--scale-factor))`,Z.color=s(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[V,Y]=this.parentDimensions;if(this.annotationElementId){const{position:H}=s(this,b);let[st,k]=this.getInitialTranslation();[st,k]=this.pageTranslationToScreen(st,k);const[q,it]=this.pageDimensions,[M,r]=this.pageTranslation;let o,x;switch(this.rotation){case 0:o=P+(H[0]-M)/q,x=D+this.height-(H[1]-r)/it;break;case 90:o=P+(H[0]-M)/q,x=D-(H[1]-r)/it,[st,k]=[k,-st];break;case 180:o=P-this.width+(H[0]-M)/q,x=D-(H[1]-r)/it,[st,k]=[-st,-k];break;case 270:o=P+(H[0]-M-this.height*it)/q,x=D+(H[1]-r-this.width*q)/it,[st,k]=[-k,st];break}this.setAt(o*V,x*Y,st,k)}else this.setAt(P*V,D*Y,this.width*V,this.height*Y);Q(this,f,en).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(P,D,Z){let V=null;if(P instanceof R.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:H,fontColor:st},rect:k,rotation:q,id:it},textContent:M,textPosition:r,parent:{page:{pageNumber:o}}}=P;if(!M||M.length===0)return null;V=P={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(st),fontSize:H,value:M.join(`
`),position:r,pageIndex:o-1,rect:k,rotation:q,id:it,deleted:!1}}const Y=super.deserialize(P,D,Z);return ct(Y,C,P.fontSize),ct(Y,O,n.Util.makeHexColor(...P.color)),ct(Y,y,P.value),Y.annotationElementId=P.id||null,ct(Y,b,V),Y}serialize(P=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const D=g._internalPadding*this.parentScale,Z=this.getRect(D,D),V=F.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:s(this,O)),Y={annotationType:n.AnnotationEditorType.FREETEXT,color:V,fontSize:s(this,C),value:s(this,y),pageIndex:this.pageIndex,rect:Z,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return P?Y:this.annotationElementId&&!Q(this,f,Fn).call(this,Y)?null:(Y.id=this.annotationElementId,Y)}};A=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakSet,Rn=function(P){const D=V=>{this.editorDiv.style.fontSize=`calc(${V}px * var(--scale-factor))`,this.translate(0,-(V-s(this,C))*this.parentScale),ct(this,C,V),Q(this,f,be).call(this)},Z=s(this,C);this.addCommands({cmd:()=>{D(P)},undo:()=>{D(Z)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kn=function(P){const D=s(this,O);this.addCommands({cmd:()=>{ct(this,O,this.editorDiv.style.color=P)},undo:()=>{ct(this,O,this.editorDiv.style.color=D)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=function(){const P=this.editorDiv.getElementsByTagName("div");if(P.length===0)return this.editorDiv.innerText;const D=[];for(const Z of P)D.push(Z.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)},be=function(){const[P,D]=this.parentDimensions;let Z;if(this.isAttachedToDOM)Z=this.div.getBoundingClientRect();else{const{currentLayer:V,div:Y}=this,H=Y.style.display;Y.style.display="hidden",V.div.append(this.div),Z=Y.getBoundingClientRect(),Y.remove(),Y.style.display=H}this.rotation%180===this.parentRotation%180?(this.width=Z.width/P,this.height=Z.height/D):(this.width=Z.height/P,this.height=Z.width/D),this.fixAndSetPosition()},en=function(){if(this.editorDiv.replaceChildren(),!!s(this,y))for(const P of s(this,y).split(`
`)){const D=document.createElement("div");D.append(P?document.createTextNode(P):document.createElement("br")),this.editorDiv.append(D)}},Fn=function(P){const{value:D,fontSize:Z,color:V,rect:Y,pageIndex:H}=s(this,b);return P.value!==D||P.fontSize!==Z||P.rect.some((st,k)=>Math.abs(st-Y[k])>=1)||P.color.some((st,k)=>st!==V[k])||P.pageIndex!==H},nn=function(P=!1){if(!this.annotationElementId)return;if(Q(this,f,be).call(this),!P&&(this.width===0||this.height===0)){setTimeout(()=>Q(this,f,nn).call(this,!0),0);return}const D=g._internalPadding*this.parentScale;s(this,b).rect=this.getRect(D,D)},Qt(g,"_freeTextDefaultContent",""),Qt(g,"_internalPadding",0),Qt(g,"_defaultColor",null),Qt(g,"_defaultFontSize",10),Qt(g,"_type","freetext");let G=g;t.FreeTextEditor=G},(e,t,u)=>{var x,$,ae,Dn,rt,ut,ft,yt,bt,vt,tt,et,T,W,J,at,gt,St,Et,nt,Tt,Pt,Ln,Te,sn,rn,Nt,Ht,Yt,xt,lt,dt,Mt,an,Vt,z,mt,wt,In,on;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=u(1),i=u(6),F=u(3),R=u(30),G=u(31),A=u(32);const E=1e3,p=9,w=new WeakSet;function O(kt){return{width:kt[2]-kt[0],height:kt[3]-kt[1]}}class y{static create(j){switch(j.data.annotationType){case n.AnnotationType.LINK:return new C(j);case n.AnnotationType.TEXT:return new b(j);case n.AnnotationType.WIDGET:switch(j.data.fieldType){case"Tx":return new v(j);case"Btn":return j.data.radioButton?new c(j):j.data.checkBox?new S(j):new a(j);case"Ch":return new d(j);case"Sig":return new I(j)}return new f(j);case n.AnnotationType.POPUP:return new h(j);case n.AnnotationType.FREETEXT:return new N(j);case n.AnnotationType.LINE:return new l(j);case n.AnnotationType.SQUARE:return new P(j);case n.AnnotationType.CIRCLE:return new D(j);case n.AnnotationType.POLYLINE:return new Z(j);case n.AnnotationType.CARET:return new Y(j);case n.AnnotationType.INK:return new H(j);case n.AnnotationType.POLYGON:return new V(j);case n.AnnotationType.HIGHLIGHT:return new st(j);case n.AnnotationType.UNDERLINE:return new k(j);case n.AnnotationType.SQUIGGLY:return new q(j);case n.AnnotationType.STRIKEOUT:return new it(j);case n.AnnotationType.STAMP:return new M(j);case n.AnnotationType.FILEATTACHMENT:return new r(j);default:return new m(j)}}}const B=class B{constructor(j,{isRenderable:L=!1,ignoreBorder:X=!1,createQuadrilaterals:ht=!1}={}){ot(this,x,!1);this.isRenderable=L,this.data=j.data,this.layer=j.layer,this.linkService=j.linkService,this.downloadManager=j.downloadManager,this.imageResourcesPath=j.imageResourcesPath,this.renderForms=j.renderForms,this.svgFactory=j.svgFactory,this.annotationStorage=j.annotationStorage,this.enableScripting=j.enableScripting,this.hasJSActions=j.hasJSActions,this._fieldObjects=j.fieldObjects,this.parent=j.parent,L&&(this.container=this._createContainer(X)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:j,contentsObj:L,richText:X}){return!!(j!=null&&j.str||L!=null&&L.str||X!=null&&X.str)}get hasPopupData(){return B._hasPopupData(this.data)}_createContainer(j){const{data:L,parent:{page:X,viewport:ht}}=this,pt=document.createElement("section");pt.setAttribute("data-annotation-id",L.id),this instanceof f||(pt.tabIndex=E),pt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pt.setAttribute("aria-haspopup","dialog"),L.noRotate&&pt.classList.add("norotate");const{pageWidth:At,pageHeight:Ct,pageX:Ot,pageY:Dt}=ht.rawDims;if(!L.rect||this instanceof h){const{rotation:Ut}=L;return!L.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,pt),pt}const{width:Rt,height:zt}=O(L.rect),Lt=n.Util.normalizeRect([L.rect[0],X.view[3]-L.rect[1]+X.view[1],L.rect[2],X.view[3]-L.rect[3]+X.view[1]]);if(!j&&L.borderStyle.width>0){pt.style.borderWidth=`${L.borderStyle.width}px`;const Ut=L.borderStyle.horizontalCornerRadius,Gt=L.borderStyle.verticalCornerRadius;if(Ut>0||Gt>0){const Jt=`calc(${Ut}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;pt.style.borderRadius=Jt}else if(this instanceof c){const Jt=`calc(${Rt}px * var(--scale-factor)) / calc(${zt}px * var(--scale-factor))`;pt.style.borderRadius=Jt}switch(L.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:pt.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:pt.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:pt.style.borderBottomStyle="solid";break}const Kt=L.borderColor||null;Kt?(ct(this,x,!0),pt.style.borderColor=n.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):pt.style.borderWidth=0}pt.style.left=`${100*(Lt[0]-Ot)/At}%`,pt.style.top=`${100*(Lt[1]-Dt)/Ct}%`;const{rotation:jt}=L;return L.hasOwnCanvas||jt===0?(pt.style.width=`${100*Rt/At}%`,pt.style.height=`${100*zt/Ct}%`):this.setRotation(jt,pt),pt}setRotation(j,L=this.container){if(!this.data.rect)return;const{pageWidth:X,pageHeight:ht}=this.parent.viewport.rawDims,{width:pt,height:At}=O(this.data.rect);let Ct,Ot;j%180===0?(Ct=100*pt/X,Ot=100*At/ht):(Ct=100*At/X,Ot=100*pt/ht),L.style.width=`${Ct}%`,L.style.height=`${Ot}%`,L.setAttribute("data-main-rotation",(360-j)%360)}get _commonActions(){const j=(L,X,ht)=>{const pt=ht.detail[L],At=pt[0],Ct=pt.slice(1);ht.target.style[X]=R.ColorConverters[`${At}_HTML`](Ct),this.annotationStorage.setValue(this.data.id,{[X]:R.ColorConverters[`${At}_rgb`](Ct)})};return(0,n.shadow)(this,"_commonActions",{display:L=>{const{display:X}=L.detail,ht=X%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:X===1||X===2})},print:L=>{this.annotationStorage.setValue(this.data.id,{noPrint:!L.detail.print})},hidden:L=>{const{hidden:X}=L.detail;this.container.style.visibility=X?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:X,noView:X})},focus:L=>{setTimeout(()=>L.target.focus({preventScroll:!1}),0)},userName:L=>{L.target.title=L.detail.userName},readonly:L=>{L.target.disabled=L.detail.readonly},required:L=>{this._setRequired(L.target,L.detail.required)},bgColor:L=>{j("bgColor","backgroundColor",L)},fillColor:L=>{j("fillColor","backgroundColor",L)},fgColor:L=>{j("fgColor","color",L)},textColor:L=>{j("textColor","color",L)},borderColor:L=>{j("borderColor","borderColor",L)},strokeColor:L=>{j("strokeColor","borderColor",L)},rotation:L=>{const X=L.detail.rotation;this.setRotation(X),this.annotationStorage.setValue(this.data.id,{rotation:X})}})}_dispatchEventFromSandbox(j,L){const X=this._commonActions;for(const ht of Object.keys(L.detail)){const pt=j[ht]||X[ht];pt==null||pt(L)}}_setDefaultPropertiesFromJS(j){if(!this.enableScripting)return;const L=this.annotationStorage.getRawValue(this.data.id);if(!L)return;const X=this._commonActions;for(const[ht,pt]of Object.entries(L)){const At=X[ht];if(At){const Ct={detail:{[ht]:pt},target:j};At(Ct),delete L[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:j}=this.data;if(!j)return;const[L,X,ht,pt]=this.data.rect;if(j.length===1){const[,{x:Gt,y:Kt},{x:Jt,y:te}]=j[0];if(ht===Gt&&pt===Kt&&L===Jt&&X===te)return}const{style:At}=this.container;let Ct;if(s(this,x)){const{borderColor:Gt,borderWidth:Kt}=At;At.borderWidth=0,Ct=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Gt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const Ot=ht-L,Dt=pt-X,{svgFactory:Rt}=this,zt=Rt.createElement("svg");zt.classList.add("quadrilateralsContainer"),zt.setAttribute("width",0),zt.setAttribute("height",0);const Lt=Rt.createElement("defs");zt.append(Lt);const jt=Rt.createElement("clipPath"),Ut=`clippath_${this.data.id}`;jt.setAttribute("id",Ut),jt.setAttribute("clipPathUnits","objectBoundingBox"),Lt.append(jt);for(const[,{x:Gt,y:Kt},{x:Jt,y:te}]of j){const Zt=Rt.createElement("rect"),ne=(Jt-L)/Ot,ie=(pt-Kt)/Dt,re=(Gt-Jt)/Ot,mn=(Kt-te)/Dt;Zt.setAttribute("x",ne),Zt.setAttribute("y",ie),Zt.setAttribute("width",re),Zt.setAttribute("height",mn),jt.append(Zt),Ct==null||Ct.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${ie}" width="${re}" height="${mn}"/>`)}s(this,x)&&(Ct.push("</g></svg>')"),At.backgroundImage=Ct.join("")),this.container.append(zt),this.container.style.clipPath=`url(#${Ut})`}_createPopup(){const{container:j,data:L}=this;j.setAttribute("aria-haspopup","dialog");const X=new h({data:{color:L.color,titleObj:L.titleObj,modificationDate:L.modificationDate,contentsObj:L.contentsObj,richText:L.richText,parentRect:L.rect,borderStyle:0,id:`popup_${L.id}`,rotation:L.rotation},parent:this.parent,elements:[this]});this.parent.div.append(X.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(j,L=null){const X=[];if(this._fieldObjects){const ht=this._fieldObjects[j];if(ht)for(const{page:pt,id:At,exportValues:Ct}of ht){if(pt===-1||At===L)continue;const Ot=typeof Ct=="string"?Ct:null,Dt=document.querySelector(`[data-element-id="${At}"]`);if(Dt&&!w.has(Dt)){(0,n.warn)(`_getElementsByName - element not allowed: ${At}`);continue}X.push({id:At,exportValue:Ot,domElement:Dt})}return X}for(const ht of document.getElementsByName(j)){const{exportValue:pt}=ht,At=ht.getAttribute("data-element-id");At!==L&&w.has(ht)&&X.push({id:At,exportValue:pt,domElement:ht})}return X}show(){var j;this.container&&(this.container.hidden=!1),(j=this.popup)==null||j.maybeShow()}hide(){var j;this.container&&(this.container.hidden=!0),(j=this.popup)==null||j.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const j=this.getElementsToTriggerPopup();if(Array.isArray(j))for(const L of j)L.classList.add("highlightArea");else j.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:j,data:{id:L}}=this;this.container.addEventListener("dblclick",()=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("switchannotationeditormode",{source:this,mode:j,editId:L})})}};x=new WeakMap;let m=B;class C extends m{constructor(L,X=null){super(L,{isRenderable:!0,ignoreBorder:!!(X!=null&&X.ignoreBorder),createQuadrilaterals:!0});ot(this,$);this.isTooltipOnly=L.data.isTooltipOnly}render(){const{data:L,linkService:X}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",L.id);let pt=!1;return L.url?(X.addLinkAttributes(ht,L.url,L.newWindow),pt=!0):L.action?(this._bindNamedAction(ht,L.action),pt=!0):L.attachment?(this._bindAttachment(ht,L.attachment),pt=!0):L.setOCGState?(Q(this,$,Dn).call(this,ht,L.setOCGState),pt=!0):L.dest?(this._bindLink(ht,L.dest),pt=!0):(L.actions&&(L.actions.Action||L.actions["Mouse Up"]||L.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,L),pt=!0),L.resetForm?(this._bindResetFormAction(ht,L.resetForm),pt=!0):this.isTooltipOnly&&!pt&&(this._bindLink(ht,""),pt=!0)),this.container.classList.add("linkAnnotation"),pt&&this.container.append(ht),this.container}_bindLink(L,X){L.href=this.linkService.getDestinationHash(X),L.onclick=()=>(X&&this.linkService.goToDestination(X),!1),(X||X==="")&&Q(this,$,ae).call(this)}_bindNamedAction(L,X){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeNamedAction(X),!1),Q(this,$,ae).call(this)}_bindAttachment(L,X){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,X.content,X.filename),!1},Q(this,$,ae).call(this)}_bindJSAction(L,X){L.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pt of Object.keys(X.actions)){const At=ht.get(pt);At&&(L[At]=()=>{var Ct;return(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X.id,name:pt}}),!1})}L.onclick||(L.onclick=()=>!1),Q(this,$,ae).call(this)}_bindResetFormAction(L,X){const ht=L.onclick;if(ht||(L.href=this.linkService.getAnchorUrl("")),Q(this,$,ae).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(L.onclick=()=>!1);return}L.onclick=()=>{var zt;ht==null||ht();const{fields:pt,refs:At,include:Ct}=X,Ot=[];if(pt.length!==0||At.length!==0){const Lt=new Set(At);for(const jt of pt){const Ut=this._fieldObjects[jt]||[];for(const{id:Gt}of Ut)Lt.add(Gt)}for(const jt of Object.values(this._fieldObjects))for(const Ut of jt)Lt.has(Ut.id)===Ct&&Ot.push(Ut)}else for(const Lt of Object.values(this._fieldObjects))Ot.push(...Lt);const Dt=this.annotationStorage,Rt=[];for(const Lt of Ot){const{id:jt}=Lt;switch(Rt.push(jt),Lt.type){case"text":{const Gt=Lt.defaultValue||"";Dt.setValue(jt,{value:Gt});break}case"checkbox":case"radiobutton":{const Gt=Lt.defaultValue===Lt.exportValues;Dt.setValue(jt,{value:Gt});break}case"combobox":case"listbox":{const Gt=Lt.defaultValue||"";Dt.setValue(jt,{value:Gt});break}default:continue}const Ut=document.querySelector(`[data-element-id="${jt}"]`);if(Ut){if(!w.has(Ut)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;Ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}$=new WeakSet,ae=function(){this.container.setAttribute("data-internal-link","")},Dn=function(L,X){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeSetOCGState(X),!1),Q(this,$,ae).call(this)};class b extends m{constructor(j){super(j,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const j=document.createElement("img");return j.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",j.alt="[{{type}} Annotation]",j.dataset.l10nId="text_annotation_type",j.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(j),this.container}}class f extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(j){var L;this.data.hasOwnCanvas&&(((L=j.previousSibling)==null?void 0:L.nodeName)==="CANVAS"&&(j.previousSibling.hidden=!0),j.hidden=!1)}_getKeyModifier(j){const{isWin:L,isMac:X}=n.FeatureTest.platform;return L&&j.ctrlKey||X&&j.metaKey}_setEventListener(j,L,X,ht,pt){X.includes("mouse")?j.addEventListener(X,At=>{var Ct;(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:pt(At),shift:At.shiftKey,modifier:this._getKeyModifier(At)}})}):j.addEventListener(X,At=>{var Ct;if(X==="blur"){if(!L.focused||!At.relatedTarget)return;L.focused=!1}else if(X==="focus"){if(L.focused)return;L.focused=!0}pt&&((Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:pt(At)}}))})}_setEventListeners(j,L,X,ht){var pt,At,Ct;for(const[Ot,Dt]of X)(Dt==="Action"||(pt=this.data.actions)!=null&&pt[Dt])&&((Dt==="Focus"||Dt==="Blur")&&(L||(L={focused:!1})),this._setEventListener(j,L,Ot,Dt,ht),Dt==="Focus"&&!((At=this.data.actions)!=null&&At.Blur)?this._setEventListener(j,L,"blur","Blur",null):Dt==="Blur"&&!((Ct=this.data.actions)!=null&&Ct.Focus)&&this._setEventListener(j,L,"focus","Focus",null))}_setBackgroundColor(j){const L=this.data.backgroundColor||null;j.style.backgroundColor=L===null?"transparent":n.Util.makeHexColor(L[0],L[1],L[2])}_setTextStyle(j){const L=["left","center","right"],{fontColor:X}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||p,pt=j.style;let At;const Ct=2,Ot=Dt=>Math.round(10*Dt)/10;if(this.data.multiLine){const Dt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ct),Rt=Math.round(Dt/(n.LINE_FACTOR*ht))||1,zt=Dt/Rt;At=Math.min(ht,Ot(zt/n.LINE_FACTOR))}else{const Dt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ct);At=Math.min(ht,Ot(Dt/n.LINE_FACTOR))}pt.fontSize=`calc(${At}px * var(--scale-factor))`,pt.color=n.Util.makeHexColor(X[0],X[1],X[2]),this.data.textAlignment!==null&&(pt.textAlign=L[this.data.textAlignment])}_setRequired(j,L){L?j.setAttribute("required",!0):j.removeAttribute("required"),j.setAttribute("aria-required",L)}}class v extends f{constructor(j){const L=j.renderForms||!j.data.hasAppearance&&!!j.data.fieldValue;super(j,{isRenderable:L})}setPropertyOnSiblings(j,L,X,ht){const pt=this.annotationStorage;for(const At of this._getElementsByName(j.name,j.id))At.domElement&&(At.domElement[L]=X),pt.setValue(At.id,{[ht]:X})}render(){var ht,pt;const j=this.annotationStorage,L=this.data.id;this.container.classList.add("textWidgetAnnotation");let X=null;if(this.renderForms){const At=j.getValue(L,{value:this.data.fieldValue});let Ct=At.value||"";const Ot=j.getValue(L,{charLimit:this.data.maxLen}).charLimit;Ot&&Ct.length>Ot&&(Ct=Ct.slice(0,Ot));let Dt=At.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join(`
`))||null;Dt&&this.data.comb&&(Dt=Dt.replaceAll(/\s+/g,""));const Rt={userValue:Ct,formattedValue:Dt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(X=document.createElement("textarea"),X.textContent=Dt??Ct,this.data.doNotScroll&&(X.style.overflowY="hidden")):(X=document.createElement("input"),X.type="text",X.setAttribute("value",Dt??Ct),this.data.doNotScroll&&(X.style.overflowX="hidden")),this.data.hasOwnCanvas&&(X.hidden=!0),w.add(X),X.setAttribute("data-element-id",L),X.disabled=this.data.readOnly,X.name=this.data.fieldName,X.tabIndex=E,this._setRequired(X,this.data.required),Ot&&(X.maxLength=Ot),X.addEventListener("input",Lt=>{j.setValue(L,{value:Lt.target.value}),this.setPropertyOnSiblings(X,"value",Lt.target.value,"value"),Rt.formattedValue=null}),X.addEventListener("resetform",Lt=>{const jt=this.data.defaultFieldValue??"";X.value=Rt.userValue=jt,Rt.formattedValue=null});let zt=Lt=>{const{formattedValue:jt}=Rt;jt!=null&&(Lt.target.value=jt),Lt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){X.addEventListener("focus",jt=>{if(Rt.focused)return;const{target:Ut}=jt;Rt.userValue&&(Ut.value=Rt.userValue),Rt.lastCommittedValue=Ut.value,Rt.commitKey=1,Rt.focused=!0}),X.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const Ut={value(Gt){Rt.userValue=Gt.detail.value??"",j.setValue(L,{value:Rt.userValue.toString()}),Gt.target.value=Rt.userValue},formattedValue(Gt){const{formattedValue:Kt}=Gt.detail;Rt.formattedValue=Kt,Kt!=null&&Gt.target!==document.activeElement&&(Gt.target.value=Kt),j.setValue(L,{formattedValue:Kt})},selRange(Gt){Gt.target.setSelectionRange(...Gt.detail.selRange)},charLimit:Gt=>{var Zt;const{charLimit:Kt}=Gt.detail,{target:Jt}=Gt;if(Kt===0){Jt.removeAttribute("maxLength");return}Jt.setAttribute("maxLength",Kt);let te=Rt.userValue;!te||te.length<=Kt||(te=te.slice(0,Kt),Jt.value=Rt.userValue=te,j.setValue(L,{value:te}),(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:te,willCommit:!0,commitKey:1,selStart:Jt.selectionStart,selEnd:Jt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,jt)}),X.addEventListener("keydown",jt=>{var Kt;Rt.commitKey=1;let Ut=-1;if(jt.key==="Escape"?Ut=0:jt.key==="Enter"&&!this.data.multiLine?Ut=2:jt.key==="Tab"&&(Rt.commitKey=3),Ut===-1)return;const{value:Gt}=jt.target;Rt.lastCommittedValue!==Gt&&(Rt.lastCommittedValue=Gt,Rt.userValue=Gt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Gt,willCommit:!0,commitKey:Ut,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Lt=zt;zt=null,X.addEventListener("blur",jt=>{var Gt;if(!Rt.focused||!jt.relatedTarget)return;Rt.focused=!1;const{value:Ut}=jt.target;Rt.userValue=Ut,Rt.lastCommittedValue!==Ut&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ut,willCommit:!0,commitKey:Rt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Lt(jt)}),(pt=this.data.actions)!=null&&pt.Keystroke&&X.addEventListener("beforeinput",jt=>{var ie;Rt.lastCommittedValue=null;const{data:Ut,target:Gt}=jt,{value:Kt,selectionStart:Jt,selectionEnd:te}=Gt;let Zt=Jt,ne=te;switch(jt.inputType){case"deleteWordBackward":{const re=Kt.substring(0,Jt).match(/\w*[^\w]*$/);re&&(Zt-=re[0].length);break}case"deleteWordForward":{const re=Kt.substring(Jt).match(/^[^\w]*\w*/);re&&(ne+=re[0].length);break}case"deleteContentBackward":Jt===te&&(Zt-=1);break;case"deleteContentForward":Jt===te&&(ne+=1);break}jt.preventDefault(),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Kt,change:Ut||"",willCommit:!1,selStart:Zt,selEnd:ne}})}),this._setEventListeners(X,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(zt&&X.addEventListener("blur",zt),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/Ot;X.classList.add("comb"),X.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else X=document.createElement("div"),X.textContent=this.data.fieldValue,X.style.verticalAlign="middle",X.style.display="table-cell";return this._setTextStyle(X),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class I extends f{constructor(j){super(j,{isRenderable:!!j.data.hasOwnCanvas})}}class S extends f{constructor(j){super(j,{isRenderable:j.renderForms})}render(){const j=this.annotationStorage,L=this.data,X=L.id;let ht=j.getValue(X,{value:L.exportValue===L.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",j.setValue(X,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pt=document.createElement("input");return w.add(pt),pt.setAttribute("data-element-id",X),pt.disabled=L.readOnly,this._setRequired(pt,this.data.required),pt.type="checkbox",pt.name=L.fieldName,ht&&pt.setAttribute("checked",!0),pt.setAttribute("exportValue",L.exportValue),pt.tabIndex=E,pt.addEventListener("change",At=>{const{name:Ct,checked:Ot}=At.target;for(const Dt of this._getElementsByName(Ct,X)){const Rt=Ot&&Dt.exportValue===L.exportValue;Dt.domElement&&(Dt.domElement.checked=Rt),j.setValue(Dt.id,{value:Rt})}j.setValue(X,{value:Ot})}),pt.addEventListener("resetform",At=>{const Ct=L.defaultFieldValue||"Off";At.target.checked=Ct===L.exportValue}),this.enableScripting&&this.hasJSActions&&(pt.addEventListener("updatefromsandbox",At=>{const Ct={value(Ot){Ot.target.checked=Ot.detail.value!=="Off",j.setValue(X,{value:Ot.target.checked})}};this._dispatchEventFromSandbox(Ct,At)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],At=>At.target.checked)),this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class c extends f{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const j=this.annotationStorage,L=this.data,X=L.id;let ht=j.getValue(X,{value:L.fieldValue===L.buttonValue}).value;typeof ht=="string"&&(ht=ht!==L.buttonValue,j.setValue(X,{value:ht}));const pt=document.createElement("input");if(w.add(pt),pt.setAttribute("data-element-id",X),pt.disabled=L.readOnly,this._setRequired(pt,this.data.required),pt.type="radio",pt.name=L.fieldName,ht&&pt.setAttribute("checked",!0),pt.tabIndex=E,pt.addEventListener("change",At=>{const{name:Ct,checked:Ot}=At.target;for(const Dt of this._getElementsByName(Ct,X))j.setValue(Dt.id,{value:!1});j.setValue(X,{value:Ot})}),pt.addEventListener("resetform",At=>{const Ct=L.defaultFieldValue;At.target.checked=Ct!=null&&Ct===L.buttonValue}),this.enableScripting&&this.hasJSActions){const At=L.buttonValue;pt.addEventListener("updatefromsandbox",Ct=>{const Ot={value:Dt=>{const Rt=At===Dt.detail.value;for(const zt of this._getElementsByName(Dt.target.name)){const Lt=Rt&&zt.id===X;zt.domElement&&(zt.domElement.checked=Lt),j.setValue(zt.id,{value:Lt})}}};this._dispatchEventFromSandbox(Ot,Ct)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ct=>Ct.target.checked)}return this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class a extends C{constructor(j){super(j,{ignoreBorder:j.data.hasAppearance})}render(){const j=super.render();j.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(j.title=this.data.alternativeText);const L=j.lastChild;return this.enableScripting&&this.hasJSActions&&L&&(this._setDefaultPropertiesFromJS(L),L.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({},X)})),j}}class d extends f{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const j=this.annotationStorage,L=this.data.id,X=j.getValue(L,{value:this.data.fieldValue}),ht=document.createElement("select");w.add(ht),ht.setAttribute("data-element-id",L),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=E;let pt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Rt=>{const zt=this.data.defaultFieldValue;for(const Lt of ht.options)Lt.selected=Lt.value===zt});for(const Rt of this.data.options){const zt=document.createElement("option");zt.textContent=Rt.displayValue,zt.value=Rt.exportValue,X.value.includes(Rt.exportValue)&&(zt.setAttribute("selected",!0),pt=!1),ht.append(zt)}let At=null;if(pt){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),ht.prepend(Rt),At=()=>{Rt.remove(),ht.removeEventListener("input",At),At=null},ht.addEventListener("input",At)}const Ct=Rt=>{const zt=Rt?"value":"textContent",{options:Lt,multiple:jt}=ht;return jt?Array.prototype.filter.call(Lt,Ut=>Ut.selected).map(Ut=>Ut[zt]):Lt.selectedIndex===-1?null:Lt[Lt.selectedIndex][zt]};let Ot=Ct(!1);const Dt=Rt=>{const zt=Rt.target.options;return Array.prototype.map.call(zt,Lt=>({displayValue:Lt.textContent,exportValue:Lt.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Rt=>{const zt={value(Lt){At==null||At();const jt=Lt.detail.value,Ut=new Set(Array.isArray(jt)?jt:[jt]);for(const Gt of ht.options)Gt.selected=Ut.has(Gt.value);j.setValue(L,{value:Ct(!0)}),Ot=Ct(!1)},multipleSelection(Lt){ht.multiple=!0},remove(Lt){const jt=ht.options,Ut=Lt.detail.remove;jt[Ut].selected=!1,ht.remove(Ut),jt.length>0&&Array.prototype.findIndex.call(jt,Kt=>Kt.selected)===-1&&(jt[0].selected=!0),j.setValue(L,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},clear(Lt){for(;ht.length!==0;)ht.remove(0);j.setValue(L,{value:null,items:[]}),Ot=Ct(!1)},insert(Lt){const{index:jt,displayValue:Ut,exportValue:Gt}=Lt.detail.insert,Kt=ht.children[jt],Jt=document.createElement("option");Jt.textContent=Ut,Jt.value=Gt,Kt?Kt.before(Jt):ht.append(Jt),j.setValue(L,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},items(Lt){const{items:jt}=Lt.detail;for(;ht.length!==0;)ht.remove(0);for(const Ut of jt){const{displayValue:Gt,exportValue:Kt}=Ut,Jt=document.createElement("option");Jt.textContent=Gt,Jt.value=Kt,ht.append(Jt)}ht.options.length>0&&(ht.options[0].selected=!0),j.setValue(L,{value:Ct(!0),items:Dt(Lt)}),Ot=Ct(!1)},indices(Lt){const jt=new Set(Lt.detail.indices);for(const Ut of Lt.target.options)Ut.selected=jt.has(Ut.index);j.setValue(L,{value:Ct(!0)}),Ot=Ct(!1)},editable(Lt){Lt.target.disabled=!Lt.detail.editable}};this._dispatchEventFromSandbox(zt,Rt)}),ht.addEventListener("input",Rt=>{var Lt;const zt=Ct(!0);j.setValue(L,{value:zt}),Rt.preventDefault(),(Lt=this.linkService.eventBus)==null||Lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ot,changeEx:zt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):ht.addEventListener("input",function(Rt){j.setValue(L,{value:Ct(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class h extends m{constructor(j){const{data:L,elements:X}=j;super(j,{isRenderable:m._hasPopupData(L)}),this.elements=X}render(){this.container.classList.add("popupAnnotation");const j=new g({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),L=[];for(const X of this.elements)X.popup=j,L.push(X.data.id),X.addHighlightArea();return this.container.setAttribute("aria-controls",L.map(X=>`${n.AnnotationPrefix}${X}`).join(",")),this.container}}class g{constructor({container:j,color:L,elements:X,titleObj:ht,modificationDate:pt,contentsObj:At,richText:Ct,parent:Ot,rect:Dt,parentRect:Rt,open:zt}){ot(this,Pt);ot(this,rt,null);ot(this,ut,Q(this,Pt,Ln).bind(this));ot(this,ft,Q(this,Pt,rn).bind(this));ot(this,yt,Q(this,Pt,sn).bind(this));ot(this,bt,Q(this,Pt,Te).bind(this));ot(this,vt,null);ot(this,tt,null);ot(this,et,null);ot(this,T,null);ot(this,W,null);ot(this,J,null);ot(this,at,!1);ot(this,gt,null);ot(this,St,null);ot(this,Et,null);ot(this,nt,null);ot(this,Tt,!1);var jt;ct(this,tt,j),ct(this,nt,ht),ct(this,et,At),ct(this,Et,Ct),ct(this,W,Ot),ct(this,vt,L),ct(this,St,Dt),ct(this,J,Rt),ct(this,T,X);const Lt=i.PDFDateString.toDateObject(pt);Lt&&ct(this,rt,Ot.l10n.get("annotation_date_string",{date:Lt.toLocaleDateString(),time:Lt.toLocaleTimeString()})),this.trigger=X.flatMap(Ut=>Ut.getElementsToTriggerPopup());for(const Ut of this.trigger)Ut.addEventListener("click",s(this,bt)),Ut.addEventListener("mouseenter",s(this,yt)),Ut.addEventListener("mouseleave",s(this,ft)),Ut.classList.add("popupTriggerArea");for(const Ut of X)(jt=Ut.container)==null||jt.addEventListener("keydown",s(this,ut));s(this,tt).hidden=!0,zt&&Q(this,Pt,Te).call(this)}render(){if(s(this,gt))return;const{page:{view:j},viewport:{rawDims:{pageWidth:L,pageHeight:X,pageX:ht,pageY:pt}}}=s(this,W),At=ct(this,gt,document.createElement("div"));if(At.className="popup",s(this,vt)){const Zt=At.style.outlineColor=n.Util.makeHexColor(...s(this,vt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?At.style.backgroundColor=`color-mix(in srgb, ${Zt} 30%, white)`:At.style.backgroundColor=n.Util.makeHexColor(...s(this,vt).map(ie=>Math.floor(.7*(255-ie)+ie)))}const Ct=document.createElement("span");Ct.className="header";const Ot=document.createElement("h1");if(Ct.append(Ot),{dir:Ot.dir,str:Ot.textContent}=s(this,nt),At.append(Ct),s(this,rt)){const Zt=document.createElement("span");Zt.classList.add("popupDate"),s(this,rt).then(ne=>{Zt.textContent=ne}),Ct.append(Zt)}const Dt=s(this,et),Rt=s(this,Et);if(Rt!=null&&Rt.str&&(!(Dt!=null&&Dt.str)||Dt.str===Rt.str))A.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:At}),At.lastChild.classList.add("richText","popupContent");else{const Zt=this._formatContents(Dt);At.append(Zt)}let zt=!!s(this,J),Lt=zt?s(this,J):s(this,St);for(const Zt of s(this,T))if(!Lt||n.Util.intersect(Zt.data.rect,Lt)!==null){Lt=Zt.data.rect,zt=!0;break}const jt=n.Util.normalizeRect([Lt[0],j[3]-Lt[1]+j[1],Lt[2],j[3]-Lt[3]+j[1]]),Gt=zt?Lt[2]-Lt[0]+5:0,Kt=jt[0]+Gt,Jt=jt[1],{style:te}=s(this,tt);te.left=`${100*(Kt-ht)/L}%`,te.top=`${100*(Jt-pt)/X}%`,s(this,tt).append(At)}_formatContents({str:j,dir:L}){const X=document.createElement("p");X.classList.add("popupContent"),X.dir=L;const ht=j.split(/(?:\r\n?|\n)/);for(let pt=0,At=ht.length;pt<At;++pt){const Ct=ht[pt];X.append(document.createTextNode(Ct)),pt<At-1&&X.append(document.createElement("br"))}return X}forceHide(){ct(this,Tt,this.isVisible),s(this,Tt)&&(s(this,tt).hidden=!0)}maybeShow(){s(this,Tt)&&(ct(this,Tt,!1),s(this,tt).hidden=!1)}get isVisible(){return s(this,tt).hidden===!1}}rt=new WeakMap,ut=new WeakMap,ft=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,tt=new WeakMap,et=new WeakMap,T=new WeakMap,W=new WeakMap,J=new WeakMap,at=new WeakMap,gt=new WeakMap,St=new WeakMap,Et=new WeakMap,nt=new WeakMap,Tt=new WeakMap,Pt=new WeakSet,Ln=function(j){j.altKey||j.shiftKey||j.ctrlKey||j.metaKey||(j.key==="Enter"||j.key==="Escape"&&s(this,at))&&Q(this,Pt,Te).call(this)},Te=function(){ct(this,at,!s(this,at)),s(this,at)?(Q(this,Pt,sn).call(this),s(this,tt).addEventListener("click",s(this,bt)),s(this,tt).addEventListener("keydown",s(this,ut))):(Q(this,Pt,rn).call(this),s(this,tt).removeEventListener("click",s(this,bt)),s(this,tt).removeEventListener("keydown",s(this,ut)))},sn=function(){s(this,gt)||this.render(),this.isVisible?s(this,at)&&s(this,tt).classList.add("focused"):(s(this,tt).hidden=!1,s(this,tt).style.zIndex=parseInt(s(this,tt).style.zIndex)+1e3)},rn=function(){s(this,tt).classList.remove("focused"),!(s(this,at)||!this.isVisible)&&(s(this,tt).hidden=!0,s(this,tt).style.zIndex=parseInt(s(this,tt).style.zIndex)-1e3)};class N extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0}),this.textContent=j.data.textContent,this.textPosition=j.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const j=document.createElement("div");j.classList.add("annotationTextContent"),j.setAttribute("role","comment");for(const L of this.textContent){const X=document.createElement("span");X.textContent=L,j.append(X)}this.container.append(j)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=N;class l extends m{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});ot(this,Nt,null)}render(){this.container.classList.add("lineAnnotation");const L=this.data,{width:X,height:ht}=O(L.rect),pt=this.svgFactory.create(X,ht,!0),At=ct(this,Nt,this.svgFactory.createElement("svg:line"));return At.setAttribute("x1",L.rect[2]-L.lineCoordinates[0]),At.setAttribute("y1",L.rect[3]-L.lineCoordinates[1]),At.setAttribute("x2",L.rect[2]-L.lineCoordinates[2]),At.setAttribute("y2",L.rect[3]-L.lineCoordinates[3]),At.setAttribute("stroke-width",L.borderStyle.width||1),At.setAttribute("stroke","transparent"),At.setAttribute("fill","transparent"),pt.append(At),this.container.append(pt),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nt=new WeakMap;class P extends m{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});ot(this,Ht,null)}render(){this.container.classList.add("squareAnnotation");const L=this.data,{width:X,height:ht}=O(L.rect),pt=this.svgFactory.create(X,ht,!0),At=L.borderStyle.width,Ct=ct(this,Ht,this.svgFactory.createElement("svg:rect"));return Ct.setAttribute("x",At/2),Ct.setAttribute("y",At/2),Ct.setAttribute("width",X-At),Ct.setAttribute("height",ht-At),Ct.setAttribute("stroke-width",At||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ht=new WeakMap;class D extends m{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});ot(this,Yt,null)}render(){this.container.classList.add("circleAnnotation");const L=this.data,{width:X,height:ht}=O(L.rect),pt=this.svgFactory.create(X,ht,!0),At=L.borderStyle.width,Ct=ct(this,Yt,this.svgFactory.createElement("svg:ellipse"));return Ct.setAttribute("cx",X/2),Ct.setAttribute("cy",ht/2),Ct.setAttribute("rx",X/2-At/2),Ct.setAttribute("ry",ht/2-At/2),Ct.setAttribute("stroke-width",At||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yt=new WeakMap;class Z extends m{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});ot(this,xt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:X,height:ht}=O(L.rect),pt=this.svgFactory.create(X,ht,!0);let At=[];for(const Ot of L.vertices){const Dt=Ot.x-L.rect[0],Rt=L.rect[3]-Ot.y;At.push(Dt+","+Rt)}At=At.join(" ");const Ct=ct(this,xt,this.svgFactory.createElement(this.svgElementName));return Ct.setAttribute("points",At),Ct.setAttribute("stroke-width",L.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),pt.append(Ct),this.container.append(pt),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class V extends Z{constructor(j){super(j),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class H extends m{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});ot(this,lt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:X,height:ht}=O(L.rect),pt=this.svgFactory.create(X,ht,!0);for(const At of L.inkLists){let Ct=[];for(const Dt of At){const Rt=Dt.x-L.rect[0],zt=L.rect[3]-Dt.y;Ct.push(`${Rt},${zt}`)}Ct=Ct.join(" ");const Ot=this.svgFactory.createElement(this.svgElementName);s(this,lt).push(Ot),Ot.setAttribute("points",Ct),Ot.setAttribute("stroke-width",L.borderStyle.width||1),Ot.setAttribute("stroke","transparent"),Ot.setAttribute("fill","transparent"),!L.popupRef&&this.hasPopupData&&this._createPopup(),pt.append(Ot)}return this.container.append(pt),this.container}getElementsToTriggerPopup(){return s(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap,t.InkAnnotationElement=H;class st extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class k extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class q extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class it extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class M extends m{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=M;class r extends m{constructor(L){var pt;super(L,{isRenderable:!0});ot(this,Mt);ot(this,dt,null);const{filename:X,content:ht}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(X,!0),this.content=ht,(pt=this.linkService.eventBus)==null||pt.dispatch("fileattachmentannotation",{source:this,filename:X,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:L,data:X}=this;let ht;X.hasAppearance||X.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(X.name)?"paperclip":"pushpin"}.svg`,X.fillAlpha&&X.fillAlpha<1&&(ht.style=`filter: opacity(${Math.round(X.fillAlpha*100)}%);`)),ht.addEventListener("dblclick",Q(this,Mt,an).bind(this)),ct(this,dt,ht);const{isMac:pt}=n.FeatureTest.platform;return L.addEventListener("keydown",At=>{At.key==="Enter"&&(pt?At.metaKey:At.ctrlKey)&&Q(this,Mt,an).call(this)}),!X.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),L.append(ht),L}getElementsToTriggerPopup(){return s(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap,Mt=new WeakSet,an=function(){var L;(L=this.downloadManager)==null||L.openOrDownloadData(this.container,this.content,this.filename)};class o{constructor({div:j,accessibilityManager:L,annotationCanvasMap:X,l10n:ht,page:pt,viewport:At}){ot(this,wt);ot(this,Vt,null);ot(this,z,null);ot(this,mt,new Map);this.div=j,ct(this,Vt,L),ct(this,z,X),this.l10n=ht,this.page=pt,this.viewport=At,this.zIndex=0,this.l10n||(this.l10n=G.NullL10n)}async render(j){const{annotations:L}=j,X=this.div;(0,i.setLayerDimensions)(X,this.viewport);const ht=new Map,pt={data:null,layer:X,linkService:j.linkService,downloadManager:j.downloadManager,imageResourcesPath:j.imageResourcesPath||"",renderForms:j.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:j.annotationStorage||new F.AnnotationStorage,enableScripting:j.enableScripting===!0,hasJSActions:j.hasJSActions,fieldObjects:j.fieldObjects,parent:this,elements:null};for(const At of L){if(At.noHTML)continue;const Ct=At.annotationType===n.AnnotationType.POPUP;if(Ct){const Rt=ht.get(At.id);if(!Rt)continue;pt.elements=Rt}else{const{width:Rt,height:zt}=O(At.rect);if(Rt<=0||zt<=0)continue}pt.data=At;const Ot=y.create(pt);if(!Ot.isRenderable)continue;if(!Ct&&At.popupRef){const Rt=ht.get(At.popupRef);Rt?Rt.push(Ot):ht.set(At.popupRef,[Ot])}Ot.annotationEditorType>0&&s(this,mt).set(Ot.data.id,Ot);const Dt=Ot.render();At.hidden&&(Dt.style.visibility="hidden"),Q(this,wt,In).call(this,Dt,At.id)}Q(this,wt,on).call(this),await this.l10n.translate(X)}update({viewport:j}){const L=this.div;this.viewport=j,(0,i.setLayerDimensions)(L,{rotation:j.rotation}),Q(this,wt,on).call(this),L.hidden=!1}getEditableAnnotations(){return Array.from(s(this,mt).values())}getEditableAnnotation(j){return s(this,mt).get(j)}}Vt=new WeakMap,z=new WeakMap,mt=new WeakMap,wt=new WeakSet,In=function(j,L){var ht;const X=j.firstChild||j;X.id=`${n.AnnotationPrefix}${L}`,this.div.append(j),(ht=s(this,Vt))==null||ht.moveElementInDOM(this.div,j,X,!1)},on=function(){if(!s(this,z))return;const j=this.div;for(const[L,X]of s(this,z)){const ht=j.querySelector(`[data-annotation-id="${L}"]`);if(!ht)continue;const{firstChild:pt}=ht;pt?pt.nodeName==="CANVAS"?pt.replaceWith(X):pt.before(X):ht.append(X)}s(this,z).clear()},t.AnnotationLayer=o},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function u(F){return Math.floor(Math.max(0,Math.min(1,F))*255).toString(16).padStart(2,"0")}function n(F){return Math.max(0,Math.min(255,255*F))}class i{static CMYK_G([R,G,A,E]){return["G",1-Math.min(1,.3*R+.59*A+.11*G+E)]}static G_CMYK([R]){return["CMYK",0,0,0,1-R]}static G_RGB([R]){return["RGB",R,R,R]}static G_rgb([R]){return R=n(R),[R,R,R]}static G_HTML([R]){const G=u(R);return`#${G}${G}${G}`}static RGB_G([R,G,A]){return["G",.3*R+.59*G+.11*A]}static RGB_rgb(R){return R.map(n)}static RGB_HTML(R){return`#${R.map(u).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([R,G,A,E]){return["RGB",1-Math.min(1,R+E),1-Math.min(1,A+E),1-Math.min(1,G+E)]}static CMYK_rgb([R,G,A,E]){return[n(1-Math.min(1,R+E)),n(1-Math.min(1,A+E)),n(1-Math.min(1,G+E))]}static CMYK_HTML(R){const G=this.CMYK_RGB(R).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([R,G,A]){const E=1-R,p=1-G,w=1-A,O=Math.min(E,p,w);return["CMYK",E,p,w,O]}}t.ColorConverters=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const u={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};u.print_progress_percent="{{progress}}%";function n(R,G){switch(R){case"find_match_count":R=`find_match_count[${G.total===1?"one":"other"}]`;break;case"find_match_count_limit":R=`find_match_count_limit[${G.limit===1?"one":"other"}]`;break}return u[R]||""}function i(R,G){return G?R.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(A,E)=>E in G?G[E]:"{{"+E+"}}"):R}const F={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(R,G=null,A=n(R,G)){return i(A,G)},async translate(R){}};t.NullL10n=F},(e,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=u(25);class i{static setupStorage(R,G,A,E,p){const w=E.getValue(G,{value:null});switch(A.name){case"textarea":if(w.value!==null&&(R.textContent=w.value),p==="print")break;R.addEventListener("input",O=>{E.setValue(G,{value:O.target.value})});break;case"input":if(A.attributes.type==="radio"||A.attributes.type==="checkbox"){if(w.value===A.attributes.xfaOn?R.setAttribute("checked",!0):w.value===A.attributes.xfaOff&&R.removeAttribute("checked"),p==="print")break;R.addEventListener("change",O=>{E.setValue(G,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&R.setAttribute("value",w.value),p==="print")break;R.addEventListener("input",O=>{E.setValue(G,{value:O.target.value})})}break;case"select":if(w.value!==null){R.setAttribute("value",w.value);for(const O of A.children)O.attributes.value===w.value?O.attributes.selected=!0:O.attributes.hasOwnProperty("selected")&&delete O.attributes.selected}R.addEventListener("input",O=>{const y=O.target.options,m=y.selectedIndex===-1?"":y[y.selectedIndex].value;E.setValue(G,{value:m})});break}}static setAttributes({html:R,element:G,storage:A=null,intent:E,linkService:p}){const{attributes:w}=G,O=R instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${E}`);for(const[y,m]of Object.entries(w))if(m!=null)switch(y){case"class":m.length&&R.setAttribute(y,m.join(" "));break;case"dataId":break;case"id":R.setAttribute("data-element-id",m);break;case"style":Object.assign(R.style,m);break;case"textContent":R.textContent=m;break;default:(!O||y!=="href"&&y!=="newWindow")&&R.setAttribute(y,m)}O&&p.addLinkAttributes(R,w.href,w.newWindow),A&&w.dataId&&this.setupStorage(R,w.dataId,G,A)}static render(R){var C;const G=R.annotationStorage,A=R.linkService,E=R.xfaHtml,p=R.intent||"display",w=document.createElement(E.name);E.attributes&&this.setAttributes({html:w,element:E,intent:p,linkService:A});const O=[[E,-1,w]],y=R.div;if(y.append(w),R.viewport){const b=`matrix(${R.viewport.transform.join(",")})`;y.style.transform=b}p!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const m=[];for(;O.length>0;){const[b,f,v]=O.at(-1);if(f+1===b.children.length){O.pop();continue}const I=b.children[++O.at(-1)[1]];if(I===null)continue;const{name:S}=I;if(S==="#text"){const a=document.createTextNode(I.value);m.push(a),v.append(a);continue}const c=(C=I==null?void 0:I.attributes)!=null&&C.xmlns?document.createElementNS(I.attributes.xmlns,S):document.createElement(S);if(v.append(c),I.attributes&&this.setAttributes({html:c,element:I,storage:G,intent:p,linkService:A}),I.children&&I.children.length>0)O.push([I,-1,c]);else if(I.value){const a=document.createTextNode(I.value);n.XfaText.shouldBuildText(S)&&m.push(a),c.append(a)}}for(const b of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:m}}static update(R){const G=`matrix(${R.viewport.transform.join(",")})`;R.div.style.transform=G,R.div.hidden=!1}}t.XfaLayer=i},(e,t,u)=>{var E,p,w,O,y,m,C,b,f,v,I,S,c,a,d,On,Nn,jn,Bn,ln,$n,cn,Un,Wn,zn,Hn,Gn,se,dn,we,Re,de,un,ke,$,Vn,hn,qn,Xn,pn,Me,ue;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=u(1),i=u(4),F=u(29),R=u(6),G=u(5);const vt=class vt extends i.AnnotationEditor{constructor(T){super({...T,name:"inkEditor"});ot(this,d);ot(this,E,0);ot(this,p,0);ot(this,w,this.canvasPointermove.bind(this));ot(this,O,this.canvasPointerleave.bind(this));ot(this,y,this.canvasPointerup.bind(this));ot(this,m,this.canvasPointerdown.bind(this));ot(this,C,new Path2D);ot(this,b,!1);ot(this,f,!1);ot(this,v,!1);ot(this,I,null);ot(this,S,0);ot(this,c,0);ot(this,a,null);this.color=T.color||null,this.thickness=T.thickness||null,this.opacity=T.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(T){i.AnnotationEditor.initialize(T,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(T,W){switch(T){case n.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=W;break;case n.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=W;break;case n.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=W/100;break}}updateParams(T,W){switch(T){case n.AnnotationEditorParamsType.INK_THICKNESS:Q(this,d,On).call(this,W);break;case n.AnnotationEditorParamsType.INK_COLOR:Q(this,d,Nn).call(this,W);break;case n.AnnotationEditorParamsType.INK_OPACITY:Q(this,d,jn).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Q(this,d,we).call(this),Q(this,d,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),Q(this,d,de).call(this)),Q(this,d,ue).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,s(this,I).disconnect(),ct(this,I,null),super.remove())}setParent(T){!this.parent&&T?this._uiManager.removeShouldRescale(this):this.parent&&T===null&&this._uiManager.addShouldRescale(this),super.setParent(T)}onScaleChanging(){const[T,W]=this.parentDimensions,J=this.width*T,at=this.height*W;this.setDimensions(J,at)}enableEditMode(){s(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",s(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",s(this,m)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){s(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ct(this,b,!0),this.div.classList.add("disabled"),Q(this,d,ue).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(T){this._focusEventsAllowed&&(super.focusin(T),this.enableEditMode())}canvasPointerdown(T){T.button!==0||!this.isInEditMode()||s(this,b)||(this.setInForeground(),T.preventDefault(),T.type!=="mouse"&&this.div.focus(),Q(this,d,$n).call(this,T.offsetX,T.offsetY))}canvasPointermove(T){T.preventDefault(),Q(this,d,cn).call(this,T.offsetX,T.offsetY)}canvasPointerup(T){T.preventDefault(),Q(this,d,dn).call(this,T)}canvasPointerleave(T){Q(this,d,dn).call(this,T)}get isResizable(){return!this.isEmpty()&&s(this,b)}render(){if(this.div)return this.div;let T,W;this.width&&(T=this.x,W=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Et=>{var nt;return(nt=this.div)==null?void 0:nt.setAttribute("aria-label",Et)});const[J,at,gt,St]=Q(this,d,Bn).call(this);if(this.setAt(J,at,0,0),this.setDims(gt,St),Q(this,d,we).call(this),this.width){const[Et,nt]=this.parentDimensions;this.setAspectRatio(this.width*Et,this.height*nt),this.setAt(T*Et,W*nt,this.width*Et,this.height*nt),ct(this,v,!0),Q(this,d,de).call(this),this.setDims(this.width*Et,this.height*nt),Q(this,d,se).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Q(this,d,Re).call(this),this.div}setDimensions(T,W){const J=Math.round(T),at=Math.round(W);if(s(this,S)===J&&s(this,c)===at)return;ct(this,S,J),ct(this,c,at),this.canvas.style.visibility="hidden";const[gt,St]=this.parentDimensions;this.width=T/gt,this.height=W/St,this.fixAndSetPosition(),s(this,b)&&Q(this,d,un).call(this,T,W),Q(this,d,de).call(this),Q(this,d,se).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(T,W,J){var Nt,Ht,Yt;if(T instanceof F.InkAnnotationElement)return null;const at=super.deserialize(T,W,J);at.thickness=T.thickness,at.color=n.Util.makeHexColor(...T.color),at.opacity=T.opacity;const[gt,St]=at.pageDimensions,Et=at.width*gt,nt=at.height*St,Tt=at.parentScale,Pt=T.thickness/2;ct(at,b,!0),ct(at,S,Math.round(Et)),ct(at,c,Math.round(nt));const{paths:Wt,rect:$t,rotation:qt}=T;for(let{bezier:xt}of Wt){xt=Q(Nt=vt,$,qn).call(Nt,xt,$t,qt);const lt=[];at.paths.push(lt);let dt=Tt*(xt[0]-Pt),Mt=Tt*(xt[1]-Pt);for(let Vt=2,z=xt.length;Vt<z;Vt+=6){const mt=Tt*(xt[Vt]-Pt),wt=Tt*(xt[Vt+1]-Pt),It=Tt*(xt[Vt+2]-Pt),Bt=Tt*(xt[Vt+3]-Pt),kt=Tt*(xt[Vt+4]-Pt),j=Tt*(xt[Vt+5]-Pt);lt.push([[dt,Mt],[mt,wt],[It,Bt],[kt,j]]),dt=kt,Mt=j}const Xt=Q(this,$,Vn).call(this,lt);at.bezierPath2D.push(Xt)}const Ft=Q(Ht=at,d,pn).call(Ht);return ct(at,p,Math.max(i.AnnotationEditor.MIN_SIZE,Ft[2]-Ft[0])),ct(at,E,Math.max(i.AnnotationEditor.MIN_SIZE,Ft[3]-Ft[1])),Q(Yt=at,d,un).call(Yt,Et,nt),at}serialize(){if(this.isEmpty())return null;const T=this.getRect(0,0),W=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:W,thickness:this.thickness,opacity:this.opacity,paths:Q(this,d,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,T),pageIndex:this.pageIndex,rect:T,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};E=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakMap,v=new WeakMap,I=new WeakMap,S=new WeakMap,c=new WeakMap,a=new WeakMap,d=new WeakSet,On=function(T){const W=this.thickness;this.addCommands({cmd:()=>{this.thickness=T,Q(this,d,ue).call(this)},undo:()=>{this.thickness=W,Q(this,d,ue).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(T){const W=this.color;this.addCommands({cmd:()=>{this.color=T,Q(this,d,se).call(this)},undo:()=>{this.color=W,Q(this,d,se).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jn=function(T){T/=100;const W=this.opacity;this.addCommands({cmd:()=>{this.opacity=T,Q(this,d,se).call(this)},undo:()=>{this.opacity=W,Q(this,d,se).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bn=function(){const{parentRotation:T,parentDimensions:[W,J]}=this;switch(T){case 90:return[0,J,J,W];case 180:return[W,J,W,J];case 270:return[W,0,J,W];default:return[0,0,W,J]}},ln=function(){const{ctx:T,color:W,opacity:J,thickness:at,parentScale:gt,scaleFactor:St}=this;T.lineWidth=at*gt/St,T.lineCap="round",T.lineJoin="round",T.miterLimit=10,T.strokeStyle=`${W}${(0,G.opacityToHex)(J)}`},$n=function(T,W){this.canvas.addEventListener("contextmenu",R.noContextMenu),this.canvas.addEventListener("pointerleave",s(this,O)),this.canvas.addEventListener("pointermove",s(this,w)),this.canvas.addEventListener("pointerup",s(this,y)),this.canvas.removeEventListener("pointerdown",s(this,m)),this.isEditing=!0,s(this,v)||(ct(this,v,!0),Q(this,d,de).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([T,W]),ct(this,f,!1),Q(this,d,ln).call(this),ct(this,a,()=>{Q(this,d,zn).call(this),s(this,a)&&window.requestAnimationFrame(s(this,a))}),window.requestAnimationFrame(s(this,a))},cn=function(T,W){const[J,at]=this.currentPath.at(-1);if(this.currentPath.length>1&&T===J&&W===at)return;const gt=this.currentPath;let St=s(this,C);if(gt.push([T,W]),ct(this,f,!0),gt.length<=2){St.moveTo(...gt[0]),St.lineTo(T,W);return}gt.length===3&&(ct(this,C,St=new Path2D),St.moveTo(...gt[0])),Q(this,d,Hn).call(this,St,...gt.at(-3),...gt.at(-2),T,W)},Un=function(){if(this.currentPath.length===0)return;const T=this.currentPath.at(-1);s(this,C).lineTo(...T)},Wn=function(T,W){ct(this,a,null),T=Math.min(Math.max(T,0),this.canvas.width),W=Math.min(Math.max(W,0),this.canvas.height),Q(this,d,cn).call(this,T,W),Q(this,d,Un).call(this);let J;if(this.currentPath.length!==1)J=Q(this,d,Gn).call(this);else{const nt=[T,W];J=[[nt,nt.slice(),nt.slice(),nt]]}const at=s(this,C),gt=this.currentPath;this.currentPath=[],ct(this,C,new Path2D);const St=()=>{this.allRawPaths.push(gt),this.paths.push(J),this.bezierPath2D.push(at),this.rebuild()},Et=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Q(this,d,we).call(this),Q(this,d,Re).call(this)),Q(this,d,ue).call(this))};this.addCommands({cmd:St,undo:Et,mustExec:!0})},zn=function(){if(!s(this,f))return;ct(this,f,!1);const T=Math.ceil(this.thickness*this.parentScale),W=this.currentPath.slice(-3),J=W.map(St=>St[0]),at=W.map(St=>St[1]);Math.min(...J)-T,Math.max(...J)+T,Math.min(...at)-T,Math.max(...at)+T;const{ctx:gt}=this;gt.save(),gt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const St of this.bezierPath2D)gt.stroke(St);gt.stroke(s(this,C)),gt.restore()},Hn=function(T,W,J,at,gt,St,Et){const nt=(W+at)/2,Tt=(J+gt)/2,Pt=(at+St)/2,Wt=(gt+Et)/2;T.bezierCurveTo(nt+2*(at-nt)/3,Tt+2*(gt-Tt)/3,Pt+2*(at-Pt)/3,Wt+2*(gt-Wt)/3,Pt,Wt)},Gn=function(){const T=this.currentPath;if(T.length<=2)return[[T[0],T[0],T.at(-1),T.at(-1)]];const W=[];let J,[at,gt]=T[0];for(J=1;J<T.length-2;J++){const[$t,qt]=T[J],[Ft,Nt]=T[J+1],Ht=($t+Ft)/2,Yt=(qt+Nt)/2,xt=[at+2*($t-at)/3,gt+2*(qt-gt)/3],lt=[Ht+2*($t-Ht)/3,Yt+2*(qt-Yt)/3];W.push([[at,gt],xt,lt,[Ht,Yt]]),[at,gt]=[Ht,Yt]}const[St,Et]=T[J],[nt,Tt]=T[J+1],Pt=[at+2*(St-at)/3,gt+2*(Et-gt)/3],Wt=[nt+2*(St-nt)/3,Tt+2*(Et-Tt)/3];return W.push([[at,gt],Pt,Wt,[nt,Tt]]),W},se=function(){if(this.isEmpty()){Q(this,d,ke).call(this);return}Q(this,d,ln).call(this);const{canvas:T,ctx:W}=this;W.setTransform(1,0,0,1,0,0),W.clearRect(0,0,T.width,T.height),Q(this,d,ke).call(this);for(const J of this.bezierPath2D)W.stroke(J)},dn=function(T){this.canvas.removeEventListener("pointerleave",s(this,O)),this.canvas.removeEventListener("pointermove",s(this,w)),this.canvas.removeEventListener("pointerup",s(this,y)),this.canvas.addEventListener("pointerdown",s(this,m)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",R.noContextMenu)},10),Q(this,d,Wn).call(this,T.offsetX,T.offsetY),this.addToAnnotationStorage(),this.setInBackground()},we=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(T=>{var W;return(W=this.canvas)==null?void 0:W.setAttribute("aria-label",T)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Re=function(){ct(this,I,new ResizeObserver(T=>{const W=T[0].contentRect;W.width&&W.height&&this.setDimensions(W.width,W.height)})),s(this,I).observe(this.div)},de=function(){if(!s(this,v))return;const[T,W]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*T),this.canvas.height=Math.ceil(this.height*W),Q(this,d,ke).call(this)},un=function(T,W){const J=Q(this,d,Me).call(this),at=(T-J)/s(this,p),gt=(W-J)/s(this,E);this.scaleFactor=Math.min(at,gt)},ke=function(){const T=Q(this,d,Me).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+T,this.translationY*this.scaleFactor+T)},$=new WeakSet,Vn=function(T){const W=new Path2D;for(let J=0,at=T.length;J<at;J++){const[gt,St,Et,nt]=T[J];J===0&&W.moveTo(...gt),W.bezierCurveTo(St[0],St[1],Et[0],Et[1],nt[0],nt[1])}return W},hn=function(T,W,J){const[at,gt,St,Et]=W;switch(J){case 0:for(let nt=0,Tt=T.length;nt<Tt;nt+=2)T[nt]+=at,T[nt+1]=Et-T[nt+1];break;case 90:for(let nt=0,Tt=T.length;nt<Tt;nt+=2){const Pt=T[nt];T[nt]=T[nt+1]+at,T[nt+1]=Pt+gt}break;case 180:for(let nt=0,Tt=T.length;nt<Tt;nt+=2)T[nt]=St-T[nt],T[nt+1]+=gt;break;case 270:for(let nt=0,Tt=T.length;nt<Tt;nt+=2){const Pt=T[nt];T[nt]=St-T[nt+1],T[nt+1]=Et-Pt}break;default:throw new Error("Invalid rotation")}return T},qn=function(T,W,J){const[at,gt,St,Et]=W;switch(J){case 0:for(let nt=0,Tt=T.length;nt<Tt;nt+=2)T[nt]-=at,T[nt+1]=Et-T[nt+1];break;case 90:for(let nt=0,Tt=T.length;nt<Tt;nt+=2){const Pt=T[nt];T[nt]=T[nt+1]-gt,T[nt+1]=Pt-at}break;case 180:for(let nt=0,Tt=T.length;nt<Tt;nt+=2)T[nt]=St-T[nt],T[nt+1]-=gt;break;case 270:for(let nt=0,Tt=T.length;nt<Tt;nt+=2){const Pt=T[nt];T[nt]=Et-T[nt+1],T[nt+1]=St-Pt}break;default:throw new Error("Invalid rotation")}return T},Xn=function(T,W,J,at){var Tt,Pt;const gt=[],St=this.thickness/2,Et=T*W+St,nt=T*J+St;for(const Wt of this.paths){const $t=[],qt=[];for(let Ft=0,Nt=Wt.length;Ft<Nt;Ft++){const[Ht,Yt,xt,lt]=Wt[Ft],dt=T*Ht[0]+Et,Mt=T*Ht[1]+nt,Xt=T*Yt[0]+Et,Vt=T*Yt[1]+nt,z=T*xt[0]+Et,mt=T*xt[1]+nt,wt=T*lt[0]+Et,It=T*lt[1]+nt;Ft===0&&($t.push(dt,Mt),qt.push(dt,Mt)),$t.push(Xt,Vt,z,mt,wt,It),qt.push(Xt,Vt),Ft===Nt-1&&qt.push(wt,It)}gt.push({bezier:Q(Tt=vt,$,hn).call(Tt,$t,at,this.rotation),points:Q(Pt=vt,$,hn).call(Pt,qt,at,this.rotation)})}return gt},pn=function(){let T=1/0,W=-1/0,J=1/0,at=-1/0;for(const gt of this.paths)for(const[St,Et,nt,Tt]of gt){const Pt=n.Util.bezierBoundingBox(...St,...Et,...nt,...Tt);T=Math.min(T,Pt[0]),J=Math.min(J,Pt[1]),W=Math.max(W,Pt[2]),at=Math.max(at,Pt[3])}return[T,J,W,at]},Me=function(){return s(this,b)?Math.ceil(this.thickness*this.parentScale):0},ue=function(T=!1){if(this.isEmpty())return;if(!s(this,b)){Q(this,d,se).call(this);return}const W=Q(this,d,pn).call(this),J=Q(this,d,Me).call(this);ct(this,p,Math.max(i.AnnotationEditor.MIN_SIZE,W[2]-W[0])),ct(this,E,Math.max(i.AnnotationEditor.MIN_SIZE,W[3]-W[1]));const at=Math.ceil(J+s(this,p)*this.scaleFactor),gt=Math.ceil(J+s(this,E)*this.scaleFactor),[St,Et]=this.parentDimensions;this.width=at/St,this.height=gt/Et,this.setAspectRatio(at,gt);const nt=this.translationX,Tt=this.translationY;this.translationX=-W[0],this.translationY=-W[1],Q(this,d,de).call(this),Q(this,d,se).call(this),ct(this,S,at),ct(this,c,gt),this.setDims(at,gt);const Pt=T?J/this.scaleFactor/2:0;this.translate(nt-this.translationX-Pt,Tt-this.translationY-Pt)},ot(vt,$),Qt(vt,"_defaultColor",null),Qt(vt,"_defaultOpacity",1),Qt(vt,"_defaultThickness",1),Qt(vt,"_type","ink");let A=vt;t.InkEditor=A},(e,t,u)=>{var A,E,p,w,O,y,m,C,b,f,v,ye,_e,Fe,fn,Yn,Kn,gn,De,Jn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=u(1),i=u(4),F=u(6),R=u(29);const P=class P extends i.AnnotationEditor{constructor(V){super({...V,name:"stampEditor"});ot(this,v);ot(this,A,null);ot(this,E,null);ot(this,p,null);ot(this,w,null);ot(this,O,null);ot(this,y,null);ot(this,m,null);ot(this,C,null);ot(this,b,!1);ot(this,f,!1);ct(this,w,V.bitmapUrl),ct(this,O,V.bitmapFile)}static initialize(V){i.AnnotationEditor.initialize(V)}static get supportedTypes(){const V=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",V.map(Y=>`image/${Y}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(V){return this.supportedTypes.includes(V)}static paste(V,Y){Y.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:V.getAsFile()})}remove(){var V,Y;s(this,E)&&(ct(this,A,null),this._uiManager.imageManager.deleteId(s(this,E)),(V=s(this,y))==null||V.remove(),ct(this,y,null),(Y=s(this,m))==null||Y.disconnect(),ct(this,m,null)),super.remove()}rebuild(){if(!this.parent){s(this,E)&&Q(this,v,Fe).call(this);return}super.rebuild(),this.div!==null&&(s(this,E)&&Q(this,v,Fe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(s(this,p)||s(this,A)||s(this,w)||s(this,O))}get isResizable(){return!0}render(){if(this.div)return this.div;let V,Y;if(this.width&&(V=this.x,Y=this.y),super.render(),this.div.hidden=!0,s(this,A)?Q(this,v,fn).call(this):Q(this,v,Fe).call(this),this.width){const[H,st]=this.parentDimensions;this.setAt(V*H,Y*st,this.width*H,this.height*st)}return this.div}static deserialize(V,Y,H){if(V instanceof R.StampAnnotationElement)return null;const st=super.deserialize(V,Y,H),{rect:k,bitmapUrl:q,bitmapId:it,isSvg:M,accessibilityData:r}=V;it&&H.imageManager.isValidId(it)?ct(st,E,it):ct(st,w,q),ct(st,b,M);const[o,x]=st.pageDimensions;return st.width=(k[2]-k[0])/o,st.height=(k[3]-k[1])/x,r&&(st.altTextData=r),st}serialize(V=!1,Y=null){if(this.isEmpty())return null;const H={annotationType:n.AnnotationEditorType.STAMP,bitmapId:s(this,E),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:s(this,b),structTreeParentId:this._structTreeParentId};if(V)return H.bitmapUrl=Q(this,v,De).call(this,!0),H.accessibilityData=this.altTextData,H;const{decorative:st,altText:k}=this.altTextData;if(!st&&k&&(H.accessibilityData={type:"Figure",alt:k}),Y===null)return H;Y.stamps||(Y.stamps=new Map);const q=s(this,b)?(H.rect[2]-H.rect[0])*(H.rect[3]-H.rect[1]):null;if(!Y.stamps.has(s(this,E)))Y.stamps.set(s(this,E),{area:q,serialized:H}),H.bitmap=Q(this,v,De).call(this,!1);else if(s(this,b)){const it=Y.stamps.get(s(this,E));q>it.area&&(it.area=q,it.serialized.bitmap.close(),it.serialized.bitmap=Q(this,v,De).call(this,!1))}return H}};A=new WeakMap,E=new WeakMap,p=new WeakMap,w=new WeakMap,O=new WeakMap,y=new WeakMap,m=new WeakMap,C=new WeakMap,b=new WeakMap,f=new WeakMap,v=new WeakSet,ye=function(V,Y=!1){if(!V){this.remove();return}ct(this,A,V.bitmap),Y||(ct(this,E,V.id),ct(this,b,V.isSvg)),Q(this,v,fn).call(this)},_e=function(){ct(this,p,null),this._uiManager.enableWaiting(!1),s(this,y)&&this.div.focus()},Fe=function(){if(s(this,E)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(s(this,E)).then(Y=>Q(this,v,ye).call(this,Y,!0)).finally(()=>Q(this,v,_e).call(this));return}if(s(this,w)){const Y=s(this,w);ct(this,w,null),this._uiManager.enableWaiting(!0),ct(this,p,this._uiManager.imageManager.getFromUrl(Y).then(H=>Q(this,v,ye).call(this,H)).finally(()=>Q(this,v,_e).call(this)));return}if(s(this,O)){const Y=s(this,O);ct(this,O,null),this._uiManager.enableWaiting(!0),ct(this,p,this._uiManager.imageManager.getFromFile(Y).then(H=>Q(this,v,ye).call(this,H)).finally(()=>Q(this,v,_e).call(this)));return}const V=document.createElement("input");V.type="file",V.accept=P.supportedTypesStr,ct(this,p,new Promise(Y=>{V.addEventListener("change",async()=>{if(!V.files||V.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const H=await this._uiManager.imageManager.getFromFile(V.files[0]);Q(this,v,ye).call(this,H)}Y()}),V.addEventListener("cancel",()=>{this.remove(),Y()})}).finally(()=>Q(this,v,_e).call(this))),V.click()},fn=function(){const{div:V}=this;let{width:Y,height:H}=s(this,A);const[st,k]=this.pageDimensions,q=.75;if(this.width)Y=this.width*st,H=this.height*k;else if(Y>q*st||H>q*k){const o=Math.min(q*st/Y,q*k/H);Y*=o,H*=o}const[it,M]=this.parentDimensions;this.setDims(Y*it/st,H*M/k),this._uiManager.enableWaiting(!1);const r=ct(this,y,document.createElement("canvas"));V.append(r),V.hidden=!1,Q(this,v,gn).call(this,Y,H),Q(this,v,Jn).call(this),s(this,f)||(this.parent.addUndoableEditor(this),ct(this,f,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Yn=function(V,Y){var q;const[H,st]=this.parentDimensions;this.width=V/H,this.height=Y/st,this.setDims(V,Y),(q=this._initialOptions)!=null&&q.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,s(this,C)!==null&&clearTimeout(s(this,C)),ct(this,C,setTimeout(()=>{ct(this,C,null),Q(this,v,gn).call(this,V,Y)},200))},Kn=function(V,Y){const{width:H,height:st}=s(this,A);let k=H,q=st,it=s(this,A);for(;k>2*V||q>2*Y;){const M=k,r=q;k>2*V&&(k=k>=16384?Math.floor(k/2)-1:Math.ceil(k/2)),q>2*Y&&(q=q>=16384?Math.floor(q/2)-1:Math.ceil(q/2));const o=new OffscreenCanvas(k,q);o.getContext("2d").drawImage(it,0,0,M,r,0,0,k,q),it=o.transferToImageBitmap()}return it},gn=function(V,Y){V=Math.ceil(V),Y=Math.ceil(Y);const H=s(this,y);if(!H||H.width===V&&H.height===Y)return;H.width=V,H.height=Y;const st=s(this,b)?s(this,A):Q(this,v,Kn).call(this,V,Y),k=H.getContext("2d");k.filter=this._uiManager.hcmFilter,k.drawImage(st,0,0,st.width,st.height,0,0,V,Y)},De=function(V){if(V){if(s(this,b)){const st=this._uiManager.imageManager.getSvgUrl(s(this,E));if(st)return st}const Y=document.createElement("canvas");return{width:Y.width,height:Y.height}=s(this,A),Y.getContext("2d").drawImage(s(this,A),0,0),Y.toDataURL()}if(s(this,b)){const[Y,H]=this.pageDimensions,st=Math.round(this.width*Y*F.PixelsPerInch.PDF_TO_CSS_UNITS),k=Math.round(this.height*H*F.PixelsPerInch.PDF_TO_CSS_UNITS),q=new OffscreenCanvas(st,k);return q.getContext("2d").drawImage(s(this,A),0,0,s(this,A).width,s(this,A).height,0,0,st,k),q.transferToImageBitmap()}return structuredClone(s(this,A))},Jn=function(){ct(this,m,new ResizeObserver(V=>{const Y=V[0].contentRect;Y.width&&Y.height&&Q(this,v,Yn).call(this,Y.width,Y.height)})),s(this,m).observe(this.div)},Qt(P,"_type","stamp");let G=P;t.StampEditor=G}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var u=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](u,u.exports,__w_pdfjs_require__),u.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return F.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return R.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return A.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return u.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return u.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return u.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return u.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return u.version}});var t=__w_pdfjs_require__(1),u=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),F=__w_pdfjs_require__(27),R=__w_pdfjs_require__(5),G=__w_pdfjs_require__(29),A=__w_pdfjs_require__(14),E=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(e,t,u){if(u||arguments.length===2)for(var n=0,i=t.length,F;n<i;n++)(F||!(n in t))&&(F||(F=Array.prototype.slice.call(t,0,n)),F[n]=t[n]);return e.concat(F||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(e,t){var u={};return allEvents.forEach(function(n){var i=e[n];i&&(t?u[n]=function(F){return i(F,t(n))}:u[n]=i)}),u}function makeCancellablePromise(e){var t=!1,u=new Promise(function(n,i){e.then(function(F){return!t&&n(F)}).catch(function(F){return!t&&i(F)})});return{promise:u,cancel:function(){t=!0}}}var prefix="Invariant failed";function invariant(e,t){if(!e)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(e,t,u){for(u of e.keys())if(dequal(u,t))return u}function dequal(e,t){var u,n,i;if(e===t)return!0;if(e&&t&&(u=e.constructor)===t.constructor){if(u===Date)return e.getTime()===t.getTime();if(u===RegExp)return e.toString()===t.toString();if(u===Array){if((n=e.length)===t.length)for(;n--&&dequal(e[n],t[n]););return n===-1}if(u===Set){if(e.size!==t.size)return!1;for(n of e)if(i=n,i&&typeof i=="object"&&(i=find(t,i),!i)||!t.has(i))return!1;return!0}if(u===Map){if(e.size!==t.size)return!1;for(n of e)if(i=n[0],i&&typeof i=="object"&&(i=find(t,i),!i)||!dequal(n[1],t.get(i)))return!1;return!0}if(u===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(u===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!u||typeof e=="object"){n=0;for(u in e)if(has.call(e,u)&&++n&&!has.call(t,u)||!(u in t)||!dequal(e[u],t[u]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}const DocumentContext=reactExports.createContext(null);function Message({children:e,type:t}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${t}`},e)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(u=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(u):Array.isArray(t)?u(t):t.then(u)}).then(u=>{invariant(Array.isArray(u));const n=u[0];new Promise(i=>{invariant(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(F=>{i(F)}).catch(()=>{invariant(!1)}):typeof n=="number"?i(n):invariant(!1)}).then(i=>{const F=i+1;invariant(this.pdfViewer),invariant(F>=1&&F<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:u,pageIndex:i,pageNumber:F})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const u=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:u,pageNumber:t})}addLinkAttributes(t,u,n){t.href=u,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(e){return typeof e<"u"}function isProvided(e){return isDefined(e)&&e!==null}function isString(e){return typeof e=="string"}function isArrayBuffer(e){return e instanceof ArrayBuffer}function isBlob(e){return invariant(isBrowser),e instanceof Blob}function isDataURI(e){return isString(e)&&/^data:/.test(e)}function dataURItoByteString(e){invariant(isDataURI(e));const[t="",u=""]=e.split(",");return t.split(";").indexOf("base64")!==-1?atob(u):unescape(u)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(e){e&&e.cancel&&e.cancel()}function makePageCallback(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function isCancelException(e){return e.name==="RenderingCancelledException"}function loadFromFile(e){return new Promise((t,u)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return u(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return u(new Error("Error while reading a file."));const{error:F}=i.target;if(!F)return u(new Error("Error while reading a file."));switch(F.code){case F.NOT_FOUND_ERR:return u(new Error("Error while reading a file: File not found."));case F.SECURITY_ERR:return u(new Error("Error while reading a file: Security error."));case F.ABORT_ERR:return u(new Error("Error while reading a file: Aborted."));default:return u(new Error("Error while reading a file."))}},n.readAsArrayBuffer(e)})}function reducer(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const e={};return allEvents.forEach(t=>{e[t]=PropTypes.func}),e})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function e(t,u,n){const{[u]:i,pageNumber:F,pdf:R}=t;if(!isDefined(R))return null;if(isDefined(i)){if(typeof i!="number")return new Error(`\`${u}\` of type \`${typeof i}\` supplied to \`${n}\`, expected \`number\`.`);if(i<0)return new Error(`Expected \`${u}\` to be greater or equal to 0.`);const{numPages:G}=R;if(i+1>G)return new Error(`Expected \`${u}\` to be less or equal to ${G-1}.`)}else if(!isDefined(F))return new Error(`\`${u}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function e(t,u,n){const{[u]:i,pageIndex:F,pdf:R}=t;if(!isDefined(R))return null;if(isDefined(i)){if(typeof i!="number")return new Error(`\`${u}\` of type \`${typeof i}\` supplied to \`${n}\`, expected \`number\`.`);if(i<1)return new Error(`Expected \`${u}\` to be greater or equal to 1.`);const{numPages:G}=R;if(i>G)return new Error(`Expected \`${u}\` to be less or equal to ${G}.`)}else if(!isDefined(F))return new Error(`\`${u}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(e,t,u,n){function i(F){return F instanceof u?F:new u(function(R){R(F)})}return new(u||(u=Promise))(function(F,R){function G(p){try{E(n.next(p))}catch(w){R(w)}}function A(p){try{E(n.throw(p))}catch(w){R(w)}}function E(p){p.done?F(p.value):i(p.value).then(G,A)}E((n=n.apply(e,t||[])).next())})},__rest$1=function(e,t){var u={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(u[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(u[n[i]]=e[n[i]]);return u};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(e,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const u=prompt("Enter the password to open this PDF file.");e(u);break}case PasswordResponses.INCORRECT_PASSWORD:{const u=prompt("Invalid password. Please try again.");e(u);break}}};function isParameterObject(e){return typeof e=="object"&&e!==null&&("data"in e||"range"in e||"url"in e)}const Document=reactExports.forwardRef(function e(t,u){var{children:n,className:i,error:F="Failed to load PDF file.",externalLinkRel:R,externalLinkTarget:G,file:A,inputRef:E,imageResourcesPath:p,loading:w="Loading PDF",noData:O="No PDF file specified.",onItemClick:y,onLoadError:m,onLoadProgress:C,onLoadSuccess:b,onPassword:f=defaultOnPassword,onSourceError:v,onSourceSuccess:I,options:S,renderMode:c,rotate:a}=t,d=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[h,g]=useResolver(),{value:N,error:l}=h,[P,D]=useResolver(),{value:Z,error:V}=P,Y=reactExports.useRef(new LinkService),H=reactExports.useRef([]),st=reactExports.useRef(),k=reactExports.useRef();reactExports.useEffect(()=>{A&&A!==st.current&&isParameterObject(A)&&(warning$1(!dequal(A,st.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),st.current=A)},[A]),reactExports.useEffect(()=>{S&&S!==k.current&&(warning$1(!dequal(S,k.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),k.current=S)},[S]);const q=reactExports.useRef({scrollPageIntoView:tt=>{const{dest:et,pageNumber:T,pageIndex:W=T-1}=tt;if(y){y({dest:et,pageIndex:W,pageNumber:T});return}const J=H.current[W];if(J){J.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${T} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(u,()=>({linkService:Y,pages:H,viewer:q}),[]);function it(){I&&I()}function M(){l&&(warning$1(!1,l.toString()),v&&v(l))}function r(){g({type:"RESET"})}reactExports.useEffect(r,[A,g]);const o=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!A)return null;if(typeof A=="string")return isDataURI(A)?{data:dataURItoByteString(A)}:(displayCORSWarning(),{url:A});if(A instanceof PDFDataRangeTransport)return{range:A};if(isArrayBuffer(A))return{data:A};if(isBrowser&&isBlob(A))return{data:yield loadFromFile(A)};if(invariant(typeof A=="object"),invariant(isParameterObject(A)),"url"in A&&typeof A.url=="string"){if(isDataURI(A.url)){const{url:tt}=A,et=__rest$1(A,["url"]),T=dataURItoByteString(tt);return Object.assign({data:T},et)}displayCORSWarning()}return A}),[A]);reactExports.useEffect(()=>{const tt=makeCancellablePromise(o());return tt.promise.then(et=>{g({type:"RESOLVE",value:et})}).catch(et=>{g({type:"REJECT",error:et})}),()=>{cancelRunningTask(tt)}},[o,g]),reactExports.useEffect(()=>{if(!(typeof N>"u")){if(N===!1){M();return}it()}},[N]);function x(){Z&&(b&&b(Z),H.current=new Array(Z.numPages),Y.current.setDocument(Z))}function B(){V&&(warning$1(!1,V.toString()),m&&m(V))}function $(){D({type:"RESET"})}reactExports.useEffect($,[D,N]);function U(){if(!N)return;const tt=Object.assign(Object.assign({},S),{isEvalSupported:!1}),et=Object.assign(Object.assign({},N),tt),T=pdfjs.getDocument(et);C&&(T.onProgress=C),f&&(T.onPassword=f);const W=T;return W.promise.then(J=>{D({type:"RESOLVE",value:J})}).catch(J=>{W.destroyed||D({type:"REJECT",error:J})}),()=>{W.destroy()}}reactExports.useEffect(U,[S,D,N]),reactExports.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){B();return}x()}},[Z]);function K(){Y.current.setViewer(q.current),Y.current.setExternalLinkRel(R),Y.current.setExternalLinkTarget(G)}reactExports.useEffect(K,[R,G]);function rt(tt,et){H.current[tt]=et}function ut(tt){delete H.current[tt]}const ft=reactExports.useMemo(()=>({imageResourcesPath:p,linkService:Y.current,onItemClick:y,pdf:Z,registerPage:rt,renderMode:c,rotate:a,unregisterPage:ut}),[p,y,Z,c,a]),yt=reactExports.useMemo(()=>makeEventProps(d,()=>Z),[d,Z]);function bt(){return React.createElement(DocumentContext.Provider,{value:ft},n)}function vt(){return A?Z==null?React.createElement(Message,{type:"loading"},typeof w=="function"?w():w):Z===!1?React.createElement(Message,{type:"error"},typeof F=="function"?F():F):bt():React.createElement(Message,{type:"no-data"},typeof O=="function"?O():O)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",i),ref:E,style:{"--scale-factor":"1"}},yt),vt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var u=e.filter(Boolean);if(u.length<=1){var n=u[0];return n||null}return function(F){u.forEach(function(R){typeof R=="function"?R(F):R&&(R.current=F)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(e){return e in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(e){return"children"in e}function isStructTreeNodeWithOnlyContentChild(e){return isStructTreeNode(e)?e.children.length===1&&0 in e.children&&"id"in e.children[0]:!1}function getRoleAttributes(e){const t={};if(isStructTreeNode(e)){const{role:u}=e,n=u.match(HEADING_PATTERN);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(isPdfRole(u)){const i=PDF_ROLE_TO_HTML_ROLE[u];i&&(t.role=i)}}return t}function getBaseAttributes(e){const t={};if(isStructTreeNode(e)){if(e.alt!==void 0&&(t["aria-label"]=e.alt),e.lang!==void 0&&(t.lang=e.lang),isStructTreeNodeWithOnlyContentChild(e)){const[u]=e.children;if(u){const n=getBaseAttributes(u);return Object.assign(Object.assign({},t),n)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function getAttributes(e){return e?Object.assign(Object.assign({},getRoleAttributes(e)),getBaseAttributes(e)):null}function StructTreeItem({className:e,node:t}){const u=reactExports.useMemo(()=>getAttributes(t),[t]),n=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((i,F)=>React.createElement(StructTreeItem,{key:F,node:i})),[t]);return React.createElement("span",Object.assign({className:e},u),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const e=usePageContext();invariant(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:u}=e,[n,i]=useResolver(),{value:F,error:R}=n,{customTextRenderer:G,page:A}=e;function E(){F&&u&&u(F)}function p(){R&&(warning$1(!1,R.toString()),t&&t(R))}function w(){i({type:"RESET"})}reactExports.useEffect(w,[i,A]);function O(){if(G||!A)return;const y=makeCancellablePromise(A.getStructTree()),m=y;return y.promise.then(C=>{i({type:"RESOLVE",value:C})}).catch(C=>{i({type:"REJECT",error:C})}),()=>cancelRunningTask(m)}return reactExports.useEffect(O,[G,A,i]),reactExports.useEffect(()=>{if(F!==void 0){if(F===!1){p();return}E()}},[F]),F?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:F}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(e){const t=usePageContext();invariant(t);const u=Object.assign(Object.assign({},t),e),{_className:n,canvasBackground:i,devicePixelRatio:F=getDevicePixelRatio(),onRenderError:R,onRenderSuccess:G,page:A,renderForms:E,renderTextLayer:p,rotate:w,scale:O}=u,{canvasRef:y}=e;invariant(A);const m=reactExports.useRef(null);function C(){A&&G&&G(makePageCallback(A,O))}function b(c){isCancelException(c)||(warning$1(!1,c.toString()),R&&R(c))}const f=reactExports.useMemo(()=>A.getViewport({scale:O*F,rotation:w}),[F,A,w,O]),v=reactExports.useMemo(()=>A.getViewport({scale:O,rotation:w}),[A,w,O]);function I(){if(!A)return;A.cleanup();const{current:c}=m;if(!c)return;c.width=f.width,c.height=f.height,c.style.width=`${Math.floor(v.width)}px`,c.style.height=`${Math.floor(v.height)}px`,c.style.visibility="hidden";const a={annotationMode:E?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:c.getContext("2d",{alpha:!1}),viewport:f};i&&(a.background=i);const d=A.render(a),h=d;return d.promise.then(()=>{c.style.visibility="",C()}).catch(b),()=>cancelRunningTask(h)}reactExports.useEffect(I,[i,m,F,A,E,f,v]);const S=reactExports.useCallback(()=>{const{current:c}=m;c&&(c.width=0,c.height=0)},[m]);return reactExports.useEffect(()=>S,[S]),React.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(y,m),style:{display:"block",userSelect:"none"}},p?React.createElement(StructTree,null):null)}function PageSVG(){const e=usePageContext();invariant(e);const{_className:t,onRenderSuccess:u,onRenderError:n,page:i,rotate:F,scale:R}=e;invariant(i);const[G,A]=useResolver(),{value:E,error:p}=G;function w(){i&&u&&u(makePageCallback(i,R))}function O(){p&&(isCancelException(p)||(warning$1(!1,p.toString()),n&&n(p)))}const y=reactExports.useMemo(()=>i.getViewport({scale:R,rotation:F}),[i,F,R]);function m(){A({type:"RESET"})}reactExports.useEffect(m,[i,A,y]);function C(){if(!i)return;const I=makeCancellablePromise(i.getOperatorList());return I.promise.then(S=>{new pdfjs.SVGGraphics(i.commonObjs,i.objs).getSVG(S,y).then(a=>{if(!(a instanceof SVGElement))throw new Error("getSVG returned unexpected result.");A({type:"RESOLVE",value:a})}).catch(a=>{A({type:"REJECT",error:a})})}).catch(S=>{A({type:"REJECT",error:S})}),()=>cancelRunningTask(I)}reactExports.useEffect(C,[i,A,y]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){O();return}w()}},[E]);function b(I){if(!I||!E)return;I.firstElementChild||I.appendChild(E);const{width:S,height:c}=y;E.setAttribute("width",`${S}`),E.setAttribute("height",`${c}`)}const{width:f,height:v}=y;return React.createElement("div",{className:`${t}__svg`,ref:I=>b(I),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:f,height:v,userSelect:"none"}})}function isTextItem(e){return"str"in e}function TextLayer(){const e=usePageContext();invariant(e);const{customTextRenderer:t,onGetTextError:u,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:F,page:R,pageIndex:G,pageNumber:A,rotate:E,scale:p}=e;invariant(R);const[w,O]=useResolver(),{value:y,error:m}=w,C=reactExports.useRef(null),b=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function f(){y&&n&&n(y)}function v(){m&&(warning$1(!1,m.toString()),u&&u(m))}function I(){O({type:"RESET"})}reactExports.useEffect(I,[R,O]);function S(){if(!R)return;const l=makeCancellablePromise(R.getTextContent()),P=l;return l.promise.then(D=>{O({type:"RESOLVE",value:D})}).catch(D=>{O({type:"REJECT",error:D})}),()=>cancelRunningTask(P)}reactExports.useEffect(S,[R,O]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){v();return}f()}},[y]);const c=reactExports.useCallback(()=>{F&&F()},[F]),a=reactExports.useCallback(l=>{warning$1(!1,l.toString()),i&&i(l)},[i]);function d(){const l=b.current;l&&l.classList.add("active")}function h(){const l=b.current;l&&l.classList.remove("active")}const g=reactExports.useMemo(()=>R.getViewport({scale:p,rotation:E}),[R,E,p]);function N(){if(!R||!y)return;const{current:l}=C;if(!l)return;l.innerHTML="";const P=R.streamTextContent({includeMarkedContent:!0}),D={container:l,textContentSource:P,viewport:g},Z=pdfjs.renderTextLayer(D),V=Z;return Z.promise.then(()=>{const Y=document.createElement("div");Y.className="endOfContent",l.append(Y),b.current=Y;const H=l.querySelectorAll('[role="presentation"]');if(t){let st=0;y.items.forEach((k,q)=>{if(!isTextItem(k))return;const it=H[st];if(!it)return;const M=t(Object.assign({pageIndex:G,pageNumber:A,itemIndex:q},k));it.innerHTML=M,st+=k.str&&k.hasEOL?2:1})}c()}).catch(a),()=>cancelRunningTask(V)}return reactExports.useLayoutEffect(N,[t,a,c,R,G,A,y,g]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:h,onMouseDown:d,ref:C})}function AnnotationLayer(){const e=useDocumentContext(),t=usePageContext();invariant(t);const u=Object.assign(Object.assign({},e),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:F,onGetAnnotationsSuccess:R,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:A,page:E,pdf:p,renderForms:w,rotate:O,scale:y=1}=u;invariant(p),invariant(E),invariant(i);const[m,C]=useResolver(),{value:b,error:f}=m,v=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function I(){b&&R&&R(b)}function S(){f&&(warning$1(!1,f.toString()),F&&F(f))}function c(){C({type:"RESET"})}reactExports.useEffect(c,[C,E]);function a(){if(!E)return;const l=makeCancellablePromise(E.getAnnotations()),P=l;return l.promise.then(D=>{C({type:"RESOLVE",value:D})}).catch(D=>{C({type:"REJECT",error:D})}),()=>{cancelRunningTask(P)}}reactExports.useEffect(a,[C,E,w]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){S();return}I()}},[b]);function d(){A&&A()}function h(l){warning$1(!1,`${l}`),G&&G(l)}const g=reactExports.useMemo(()=>E.getViewport({scale:y,rotation:O}),[E,O,y]);function N(){if(!p||!E||!i||!b)return;const{current:l}=v;if(!l)return;const P=g.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,div:l,l10n:null,page:E,viewport:P},Z={annotations:b,annotationStorage:p.annotationStorage,div:l,downloadManager:null,imageResourcesPath:n,linkService:i,page:E,renderForms:w,viewport:P};l.innerHTML="";try{new pdfjs.AnnotationLayer(D).render(Z),d()}catch(V){h(V)}return()=>{}}return reactExports.useEffect(N,[b,n,i,E,w,g]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:v})}var __rest=function(e,t){var u={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(u[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(u[n[i]]=e[n[i]]);return u};const defaultScale=1,Page=function e(t){const u=useDocumentContext(),n=Object.assign(Object.assign({},u),t),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:F=!0,canvasBackground:R,canvasRef:G,children:A,className:E,customRenderer:p,customTextRenderer:w,devicePixelRatio:O,error:y="Failed to load the page.",height:m,inputRef:C,loading:b="Loading page",noData:f="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:I,onGetStructTreeError:S,onGetStructTreeSuccess:c,onGetTextError:a,onGetTextSuccess:d,onLoadError:h,onLoadSuccess:g,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:l,onRenderError:P,onRenderSuccess:D,onRenderTextLayerError:Z,onRenderTextLayerSuccess:V,pageIndex:Y,pageNumber:H,pdf:st,registerPage:k,renderAnnotationLayer:q=!0,renderForms:it=!1,renderMode:M="canvas",renderTextLayer:r=!0,rotate:o,scale:x=defaultScale,unregisterPage:B,width:$}=n,U=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[K,rt]=useResolver(),{value:ut,error:ft}=K,yt=reactExports.useRef(null);invariant(st);const bt=isProvided(H)?H-1:Y??null,vt=H??(isProvided(Y)?Y+1:null),tt=o??(ut?ut.rotate:null),et=reactExports.useMemo(()=>{if(!ut)return null;let Nt=1;const Ht=x??defaultScale;if($||m){const Yt=ut.getViewport({scale:1,rotation:tt});$?Nt=$/Yt.width:m&&(Nt=m/Yt.height)}return Ht*Nt},[m,ut,tt,x,$]);function T(){return()=>{isProvided(bt)&&F&&B&&B(bt)}}reactExports.useEffect(T,[F,st,bt,B]);function W(){if(g){if(!ut||!et)return;g(makePageCallback(ut,et))}if(F&&k){if(!isProvided(bt)||!yt.current)return;k(bt,yt.current)}}function J(){ft&&(warning$1(!1,ft.toString()),h&&h(ft))}function at(){rt({type:"RESET"})}reactExports.useEffect(at,[rt,st,bt]);function gt(){if(!st||!vt)return;const Nt=makeCancellablePromise(st.getPage(vt)),Ht=Nt;return Nt.promise.then(Yt=>{rt({type:"RESOLVE",value:Yt})}).catch(Yt=>{rt({type:"REJECT",error:Yt})}),()=>cancelRunningTask(Ht)}reactExports.useEffect(gt,[rt,st,bt,vt,k]),reactExports.useEffect(()=>{if(ut!==void 0){if(ut===!1){J();return}W()}},[ut,et]);const St=reactExports.useMemo(()=>ut&&isProvided(bt)&&vt&&isProvided(tt)&&isProvided(et)?{_className:i,canvasBackground:R,customTextRenderer:w,devicePixelRatio:O,onGetAnnotationsError:v,onGetAnnotationsSuccess:I,onGetStructTreeError:S,onGetStructTreeSuccess:c,onGetTextError:a,onGetTextSuccess:d,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:l,onRenderError:P,onRenderSuccess:D,onRenderTextLayerError:Z,onRenderTextLayerSuccess:V,page:ut,pageIndex:bt,pageNumber:vt,renderForms:it,renderTextLayer:r,rotate:tt,scale:et}:null,[i,R,w,O,v,I,S,c,a,d,N,l,P,D,Z,V,ut,bt,vt,it,r,tt,et]),Et=reactExports.useMemo(()=>makeEventProps(U,()=>ut&&(et?makePageCallback(ut,et):void 0)),[U,ut,et]),nt=`${bt}@${et}/${tt}`,Tt=`${bt}/${tt}`;function Pt(){switch(M){case"custom":return invariant(p),React.createElement(p,{key:`${nt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Tt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${nt}_canvas`,canvasRef:G})}}function Wt(){return r?React.createElement(TextLayer,{key:`${nt}_text`}):null}function $t(){return q?React.createElement(AnnotationLayer,{key:`${nt}_annotations`}):null}function qt(){return React.createElement(PageContext.Provider,{value:St},Pt(),Wt(),$t(),A)}function Ft(){return vt?st===null||ut===void 0||ut===null?React.createElement(Message,{type:"loading"},typeof b=="function"?b():b):st===!1||ut===!1?React.createElement(Message,{type:"error"},typeof y=="function"?y():y):qt():React.createElement(Message,{type:"no-data"},typeof f=="function"?f():f)}return React.createElement("div",Object.assign({className:clsx(i,E),"data-page-number":vt,ref:mergeRefs(C,yt),style:{"--scale-factor":`${et}`,backgroundColor:R||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Et),Ft())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";var Close={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1=Close.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Close.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const PDFPreview=({open:e,onClose:t,pdfUrl:u,bookTitle:n})=>{const[i,F]=reactExports.useState(null),[R,G]=reactExports.useState(1),[A,E]=reactExports.useState(null),p=({numPages:y})=>{F(y),E(null)},w=y=>{E("Erreur lors du chargement du PDF"),console.error("Error loading PDF:",y)},O=y=>{G(m=>{const C=m+y;return Math.min(Math.max(1,C),i)})};return jsxRuntimeExports.jsxs(Dialog,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:n}),jsxRuntimeExports.jsx(IconButton,{onClick:t,children:jsxRuntimeExports.jsx(default_1,{})})]}),jsxRuntimeExports.jsx(DialogContent,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:A?jsxRuntimeExports.jsx(Typography,{color:"error",sx:{mt:2},children:A}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Document,{file:u,onLoadSuccess:p,onLoadError:w,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement du PDF..."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:R,width:window.innerWidth*.7,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement de la page..."})})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(default_1$6,{}),onClick:()=>O(-1),disabled:R<=1,children:"Prcdent"}),jsxRuntimeExports.jsxs(Typography,{children:["Page ",R," sur ",i]}),jsxRuntimeExports.jsx(Button,{endIcon:jsxRuntimeExports.jsx(default_1$7,{}),onClick:()=>O(1),disabled:R>=i,children:"Suivant"})]})]})})]})},HomePage=()=>{const[e,t]=reactExports.useState([]),[u,n]=reactExports.useState(!0),[i,F]=reactExports.useState(!1),[R,G]=reactExports.useState(null),[A,E]=reactExports.useState(""),[p,w]=reactExports.useState(!1),[O,y]=reactExports.useState(null),m=useTheme$1(),C=useMediaQuery(m.breakpoints.down("sm")),b=useNavigate();reactExports.useEffect(()=>{f()},[]);const f=async()=>{try{n(!0),G(null);const a=await fetch("/api/books");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const d=await a.json();if(!d||typeof d!="object")throw new Error("Invalid API response format");const g=(Array.isArray(d.books)?d.books:[]).map((N={})=>({id:N.id||N.filename||"",title:N.title||"Untitled Book",author:N.author||"Unknown",pages:N.pages||"?",available:!!N.available,filename:N.filename||"",processing_status:N.processing_status||"pending"}));t(g)}catch(a){console.error("Error fetching books:",a),G(a.message||"Error connecting to server"),t([])}finally{n(!1)}},v=async a=>{const d=a.target.files[0];if(!d)return;if(d.type!=="application/pdf"){G("Please select a valid PDF file");return}const h=new FormData;h.append("pdf_files",d);try{F(!0),G(null);const g=await fetch("/api/books/upload",{method:"POST",body:h}),N=await g.json();if(!g.ok||!N)throw new Error((N==null?void 0:N.message)||"Error uploading PDF");const P=(Array.isArray(N.books)?N.books:[]).map((D={})=>({id:D.id||D.filename||"",title:D.title||"Untitled Book",author:D.author||"Unknown",pages:D.pages||"?",available:!!D.available,filename:D.filename||"",processing_status:D.processing_status||"pending"}));t(D=>[...Array.isArray(D)?D:[],...P]),E(N.message||"PDF uploaded successfully"),a.target.value=""}catch(g){console.error("Error uploading PDF:",g),G(g.message||"Error uploading file")}finally{F(!1)}},I=a=>{if(!(a!=null&&a.available)){G("This book is not available for reading");return}b(`/reader/${a.filename}`)},S=a=>{if(!(a!=null&&a.available)){G("This book is not available for preview");return}y(a),w(!0)},c=a=>a?a.available?jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$1,{}),label:"Available",color:"success",size:"small",sx:{mb:1}}):jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$2,{}),label:a.processing_status==="failed"?"Processing Failed":"Processing",color:"error",size:"small",sx:{mb:1}}):null;return u?jsxRuntimeExports.jsx(Container,{maxWidth:"lg",sx:{py:4},children:jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mt:4},children:jsxRuntimeExports.jsx(LinearProgress,{})})}):R?jsxRuntimeExports.jsx(Container,{maxWidth:"lg",sx:{py:4},children:jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:3},onClose:()=>G(null),action:jsxRuntimeExports.jsx(Button,{color:"inherit",size:"small",onClick:()=>window.location.reload(),children:"Retry"}),children:R})}):jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:C?"h4":"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:m.palette.primary.main},children:"Digital Library"}),jsxRuntimeExports.jsxs(Button,{variant:"contained",component:"label",startIcon:jsxRuntimeExports.jsx(default_1$5,{}),sx:{mt:2,px:3,py:1.5,borderRadius:2,backgroundColor:m.palette.primary.main,"&:hover":{backgroundColor:m.palette.primary.dark}},disabled:i,children:[i?"Uploading...":"Add PDF Book",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:v})]})]}),jsxRuntimeExports.jsx(Snackbar,{open:!!A,autoHideDuration:6e3,onClose:()=>E(""),message:A}),Array.isArray(e)&&e.length===0&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:"No books in library"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Start by uploading a PDF"})]}),Array.isArray(e)&&e.length>0&&jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:e.map((a,d)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:a!=null&&a.available?"translateY(-4px)":"none",boxShadow:a!=null&&a.available?4:1},opacity:a!=null&&a.available?1:.7},children:[jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:(a==null?void 0:a.title)||"Untitled Book"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Author: ",(a==null?void 0:a.author)||"Unknown"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Pages: ",(a==null?void 0:a.pages)||"?"]}),c(a)]}),jsxRuntimeExports.jsxs(CardActions,{sx:{padding:2,justifyContent:"space-between",backgroundColor:m.palette.background.paper,borderTop:1,borderColor:m.palette.divider},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$3,{}),onClick:()=>S(a),disabled:!(a!=null&&a.available),children:"Preview"}),jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>I(a),disabled:!(a!=null&&a.available),children:"Read"})]})]})},`book-${(a==null?void 0:a.id)||d}`))}),O&&jsxRuntimeExports.jsx(PDFPreview,{open:p,onClose:()=>{w(!1),y(null)},pdfUrl:`/api/books/${O.filename}`,bookTitle:O.title})]})};export{HomePage as default};
//# sourceMappingURL=index-TfVhLCNO.js.map
