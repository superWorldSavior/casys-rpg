const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-DMjYnlTY.js","assets/mui-vendor-BXOFyidm.js","assets/react-vendor-BBF-xwg4.js","assets/router-vendor-BINkVlmP.js","assets/LoginPage-B7Q6zL48.js","assets/Google-CVLAtH_0.js","assets/RegisterPage-DNJ_mi0H.js","assets/index-DBH-WAmw.js","assets/NavigateBefore-BMkzskJP.js","assets/index-DoIPnP6M.js"])))=>i.map(i=>d[i]);
var ae=Object.defineProperty;var ie=(s,t,o)=>t in s?ae(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var $=(s,t,o)=>ie(s,typeof t!="symbol"?t+"":t,o);import{u as le,i as k,j as e,a as ce,b as ue,B as y,C as Q,A as de,T as he,I as D,c as R,d as A,e as me,M as fe,f as W,D as ge,L as pe,g as V,h as H,k as q,l as X,F as xe,P as ve,m as je,n as ye}from"./mui-vendor-BXOFyidm.js";import{e as be,b as _e,r as u,c as x}from"./react-vendor-BBF-xwg4.js";import{u as Fe,L as C,O as ke,a as Se,N as Y,c as Ee,b as Ce,R as p,d as Le}from"./router-vendor-BINkVlmP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var w={},N=be;w.createRoot=N.createRoot,w.hydrateRoot=N.hydrateRoot;const Pe="modulepreload",Re=function(s){return"/"+s},G={},S=function(t,o,l){let n=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.allSettled(o.map(d=>{if(d=Re(d),d in G)return;G[d]=!0;const g=d.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const h=document.createElement("link");if(h.rel=g?"stylesheet":Pe,g||(h.as="script"),h.crossOrigin="",h.href=d,i&&h.setAttribute("nonce",i),document.head.appendChild(h),g)return new Promise((_,F)=>{h.addEventListener("load",_),h.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return n.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};var I={},P={};const Ae=_e(le);var U;function E(){return U||(U=1,function(s){"use client";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Ae}(P)),P}var we=k;Object.defineProperty(I,"__esModule",{value:!0});var Z=I.default=void 0,Me=we(E()),J=e;Z=I.default=(0,Me.default)([(0,J.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,J.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var O={},Ie=k;Object.defineProperty(O,"__esModule",{value:!0});var ee=O.default=void 0,Oe=Ie(E()),Be=e;ee=O.default=(0,Oe.default)((0,Be.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var B={},ze=k;Object.defineProperty(B,"__esModule",{value:!0});var re=B.default=void 0,Te=ze(E()),$e=e;re=B.default=(0,Te.default)((0,$e.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-1 9H9V9h10zm-4 4H9v-2h6zm4-8H9V5h10z"}),"LibraryBooks");var z={},De=k;Object.defineProperty(z,"__esModule",{value:!0});var M=z.default=void 0,We=De(E()),Ve=e;M=z.default=(0,We.default)((0,Ve.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login");const te=u.createContext(null),oe=({children:s})=>{const[t,o]=u.useState(null),[l,n]=u.useState(!0),[a,r]=u.useState(null),i=Fe();u.useEffect(()=>{d()},[]);const d=async()=>{try{r(null);const c=await fetch("/api/auth/status",{credentials:"include"});if(c.ok){const m=await c.json();o(m.user)}}catch(c){console.error("Auth status check failed:",c),r("Failed to check authentication status")}finally{n(!1)}},F={user:t,loading:l,error:a,loginWithGoogle:()=>{window.location.href="/api/auth/google"},loginWithEmail:async(c,m)=>{try{r(null);const f=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c,password:m})}),L=await f.json();return f.ok?(o(L.user),i("/library"),{success:!0}):(r(L.message||"Login failed"),{success:!1,error:L.message})}catch(f){return console.error("Login failed:",f),r("Failed to login. Please try again."),{success:!1,error:"Failed to login"}}},register:async c=>{try{r(null);const m=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)}),f=await m.json();return m.ok?(o(f.user),i("/library"),{success:!0}):(r(f.message||"Registration failed"),{success:!1,error:f.message})}catch(m){return console.error("Registration failed:",m),r("Failed to register. Please try again."),{success:!1,error:"Failed to register"}}},logout:async()=>{try{r(null),(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok?(o(null),i("/")):r("Logout failed")}catch(c){console.error("Logout failed:",c),r("Failed to logout")}},isAdmin:(t==null?void 0:t.role)==="admin"};return e.jsx(te.Provider,{value:F,children:!l&&s})},ne=()=>{const s=u.useContext(te);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},He=()=>{const s=ce(),t=ue(s.breakpoints.down("sm")),[o,l]=u.useState(!1),[n,a]=u.useState(null),{user:r,loading:i,loginWithGoogle:d,logout:g}=ne();if(i)return e.jsx(y,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"background.default"},children:e.jsx(Q,{})});const v=()=>{l(!o)},h=m=>{a(m.currentTarget)},_=()=>{a(null)},F=()=>{_(),g()},c=e.jsxs(pe,{children:[r?e.jsxs(V,{button:!0,component:C,to:"/library",onClick:v,children:[e.jsx(H,{children:e.jsx(re,{})}),e.jsx(q,{primary:"Library"})]}):null,!r&&e.jsxs(V,{button:!0,component:C,to:"/login",children:[e.jsx(H,{children:e.jsx(M,{})}),e.jsx(q,{primary:"Login"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(de,{position:"fixed",children:e.jsxs(he,{children:[t&&e.jsx(D,{color:"inherit",edge:"start",onClick:v,sx:{mr:2},children:e.jsx(ee,{})}),e.jsxs(y,{display:"flex",alignItems:"center",sx:{flexGrow:1},children:[e.jsx(Z,{sx:{mr:1,color:"primary.main"}}),e.jsx(R,{variant:"h6",component:C,to:"/",sx:{textDecoration:"none",color:"text.primary",fontWeight:600,"&:hover":{color:"primary.main"},fontSize:t?"1.1rem":"1.25rem"},children:"Casys.AI"})]}),!t&&e.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(A,{color:"primary",component:C,to:"/library",sx:{fontWeight:500,"&:hover":{backgroundColor:"primary.light"}},children:"Library"}),r?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:h,children:e.jsx(me,{src:r.picture,alt:r.name,sx:{width:32,height:32}})}),e.jsxs(fe,{anchorEl:n,open:!!n,onClose:_,children:[e.jsx(W,{disabled:!0,children:r.email}),e.jsx(W,{onClick:F,children:"Logout"})]})]}):e.jsx(A,{color:"primary",onClick:login,startIcon:e.jsx(M,{}),children:"Login"})]})]})}),e.jsx(ge,{variant:"temporary",anchor:"left",open:o,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:c}),e.jsx(y,{component:"main",sx:{flexGrow:1,mt:{xs:"56px",sm:"64px"},minHeight:"calc(100vh - 56px)",backgroundColor:"background.default",overflow:"hidden",position:"relative"},children:e.jsx(X,{maxWidth:"xl",sx:{py:{xs:2,sm:3},px:{xs:1,sm:2,md:3}},children:e.jsx(xe,{in:!0,timeout:300,children:e.jsx(y,{children:e.jsx(ke,{})})})})})]})};var T={},qe=k;Object.defineProperty(T,"__esModule",{value:!0});var se=T.default=void 0,Ne=qe(E()),Ge=e;se=T.default=(0,Ne.default)((0,Ge.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");class j extends x.Component{constructor(o){super(o);$(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,l){console.error("Error caught by boundary:",o,l),this.setState({errorInfo:l})}render(){return this.state.hasError?e.jsx(y,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",p:3},children:e.jsxs(ve,{elevation:3,sx:{p:4,maxWidth:"600px",width:"100%",textAlign:"center"},children:[e.jsx(R,{variant:"h5",color:"error",gutterBottom:!0,children:"Something went wrong"}),e.jsx(R,{variant:"body1",color:"text.secondary",sx:{mb:3},children:this.props.fallbackMessage||"An error occurred while rendering this component."}),!1,e.jsx(A,{variant:"contained",startIcon:e.jsx(se,{}),onClick:this.handleReset,sx:{mt:2},children:"Try Again"})]})}):this.props.children}}const Ue=je({palette:{primary:{main:"#6200EE",light:"#7F39FB",dark:"#4B0082",contrastText:"#FFFFFF"},secondary:{main:"#343A40",light:"#4B545C",dark:"#23272B",contrastText:"#FFFFFF"},background:{default:"#FFFFFF",paper:"#FFFFFF"},text:{primary:"#000000",secondary:"#343A40"}},typography:{fontFamily:"'Arial', 'Helvetica', sans-serif",h1:{fontWeight:700,fontSize:"2.5rem",color:"#343A40",marginBottom:"1rem"},h2:{fontWeight:600,fontSize:"2rem",color:"#343A40",marginBottom:"0.875rem"},h3:{fontWeight:600,fontSize:"1.75rem",color:"#343A40",marginBottom:"0.75rem"},h4:{fontWeight:600,fontSize:"1.5rem",color:"#343A40",marginBottom:"0.625rem"},h5:{fontWeight:500,fontSize:"1.25rem",color:"#343A40",marginBottom:"0.5rem"},h6:{fontWeight:500,fontSize:"1rem",color:"#343A40",marginBottom:"0.5rem"},body1:{fontSize:"1rem",lineHeight:1.6},button:{textTransform:"none",fontWeight:500}},spacing:8,shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 24px",fontWeight:500},contained:{backgroundColor:"#6200EE","&:hover":{backgroundColor:"#4B0082"},boxShadow:"none"},outlined:{borderColor:"#6200EE",color:"#6200EE","&:hover":{borderColor:"#4B0082",color:"#4B0082",backgroundColor:"rgba(98, 0, 238, 0.04)"}}}},MuiCard:{styleOverrides:{root:{backgroundColor:"#FFFFFF",borderRadius:12,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",padding:"24px"}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#FFFFFF",color:"#000000",boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)"}}},MuiContainer:{styleOverrides:{root:{backgroundColor:"#FFFFFF",padding:"24px"}}}}}),K=({children:s})=>{const{user:t,loading:o}=ne(),l=Se();return o?e.jsx("div",{children:"Loading..."}):t?s:e.jsx(Y,{to:"/login",state:{from:l},replace:!0})},Je=x.lazy(()=>S(()=>import("./LandingPage-DMjYnlTY.js"),__vite__mapDeps([0,1,2,3]))),Ke=x.lazy(()=>S(()=>import("./LoginPage-B7Q6zL48.js"),__vite__mapDeps([4,1,2,3,5]))),Qe=x.lazy(()=>S(()=>import("./RegisterPage-DNJ_mi0H.js"),__vite__mapDeps([6,1,2,3,5]))),Xe=x.lazy(()=>S(()=>import("./index-DBH-WAmw.js"),__vite__mapDeps([7,1,2,8,3]))),Ye=x.lazy(()=>S(()=>import("./index-DoIPnP6M.js"),__vite__mapDeps([9,1,2,8,3]))),b=()=>e.jsx(X,{sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Q,{})}),Ze=Ee(Ce(e.jsxs(p,{path:"/",element:e.jsx(j,{fallbackMessage:"An error occurred in the application layout",children:e.jsx(oe,{children:e.jsx(He,{})})}),children:[e.jsx(p,{index:!0,element:e.jsx(j,{fallbackMessage:"An error occurred while loading the landing page",children:e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Je,{})})})}),e.jsx(p,{path:"login",element:e.jsx(j,{fallbackMessage:"An error occurred while loading the login page",children:e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Ke,{})})})}),e.jsx(p,{path:"register",element:e.jsx(j,{fallbackMessage:"An error occurred while loading the register page",children:e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Qe,{})})})}),e.jsx(p,{path:"library",element:e.jsx(j,{fallbackMessage:"An error occurred while loading the library",children:e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(K,{children:e.jsx(Xe,{})})})})}),e.jsx(p,{path:"reader/:bookId",element:e.jsx(j,{fallbackMessage:"An error occurred while loading the reader",children:e.jsx(u.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(K,{children:e.jsx(Ye,{})})})})}),e.jsx(p,{path:"*",element:e.jsx(Y,{to:"/",replace:!0})})]})),{future:{v7_startTransition:!0,v7_relativeSplatPath:!0,v7_fetcherPersist:!0,v7_normalizeFormMethod:!0,v7_partialHydration:!0,v7_skipActionErrorRevalidation:!0}});function er(){return e.jsx(ye,{theme:Ue,children:e.jsx(oe,{children:e.jsx(Le,{router:Ze,fallbackElement:e.jsx(b,{})})})})}w.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(er,{})}));export{j as E,Z as a,M as d,E as r,ne as u};
//# sourceMappingURL=index-CLH9wDgD.js.map
