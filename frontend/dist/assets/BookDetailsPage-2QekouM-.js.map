{"version":3,"file":"BookDetailsPage-2QekouM-.js","sources":["../../node_modules/@mui/icons-material/Preview.js","../../node_modules/@mui/icons-material/Book.js","../../src/pages/Book/BookDetailsPage.jsx"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5\"\n}), 'Preview');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 4h5v8l-2.5-1.5L6 12z\"\n}), 'Book');","import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n  Box,\n  Typography,\n  Button,\n  Paper,\n  Container,\n  CircularProgress,\n} from \"@mui/material\";\nimport BookIcon from \"@mui/icons-material/Book\";\nimport PreviewIcon from \"@mui/icons-material/Preview\";\nimport PDFPreview from \"../../components/features/books/PDFPreview\";\n\nfunction BookDetailsPage() {\n  const { bookId } = useParams();\n  const navigate = useNavigate();\n  const [book, setBook] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [previewOpen, setPreviewOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchBookDetails = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/api/books/${bookId}`);\n        if (!response.ok) {\n          throw new Error(\n            `Impossible de charger les détails du livre : ${response.statusText}`\n          );\n        }\n        const bookData = await response.json();\n\n        // Ajouter l'URL de la couverture si disponible\n        const coverResponse = await fetch(`/api/books/${bookId}/cover`);\n        if (coverResponse.ok) {\n          bookData.cover_image = coverResponse.url;\n        } else {\n          bookData.cover_image = null;\n        }\n\n        setBook(bookData);\n      } catch (err) {\n        console.error(\"Error fetching book details:\", err);\n        setError(err.message);\n        setBook(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBookDetails();\n  }, [bookId]);\n\n  if (loading) {\n    return (\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        minHeight=\"80vh\"\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        minHeight=\"80vh\"\n        p={3}\n      >\n        <Typography color=\"error\" variant=\"h6\" gutterBottom>\n          {error}\n        </Typography>\n        <Button\n          variant=\"contained\"\n          onClick={() => navigate(-1)}\n          sx={{ mt: 2 }}\n        >\n          Retour\n        </Button>\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"md\">\n      <Paper\n        elevation={0}\n        sx={{\n          p: 4,\n          mt: 4,\n          backgroundColor: \"background.paper\",\n          borderRadius: 2,\n        }}\n      >\n        <Box display=\"flex\" flexDirection={{ xs: \"column\", md: \"row\" }} gap={4}>\n          <Box\n            flex=\"0 0 300px\"\n            height=\"400px\"\n            bgcolor=\"grey.100\"\n            borderRadius={1}\n            display=\"flex\"\n            justifyContent=\"center\"\n            alignItems=\"center\"\n          >\n            {book && book.cover_image ? (\n              <Box\n                component=\"img\"\n                src={book.cover_image}\n                alt={book.title}\n                sx={{\n                  width: \"100%\",\n                  height: \"100%\",\n                  objectFit: \"cover\",\n                  borderRadius: \"8px\",\n                }}\n              />\n            ) : (\n              <BookIcon\n                sx={{\n                  fontSize: 60,\n                  color: \"grey.400\",\n                }}\n              />\n            )}\n          </Box>\n\n          <Box flex=\"1\">\n            <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n              {book?.title || \"Sans titre\"}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n              {book?.author || \"Auteur inconnu\"}\n            </Typography>\n\n            {book?.publisher && (\n              <Typography\n                variant=\"subtitle2\"\n                color=\"text.secondary\"\n                gutterBottom\n              >\n                Édité par {book.publisher}\n              </Typography>\n            )}\n\n            {book?.publication_date && (\n              <Typography\n                variant=\"subtitle2\"\n                color=\"text.secondary\"\n                gutterBottom\n              >\n                Date de publication:{\" \"}\n                {new Date(book.publication_date).toLocaleDateString()}\n              </Typography>\n            )}\n\n            {book?.language && (\n              <Typography\n                variant=\"subtitle2\"\n                color=\"text.secondary\"\n                gutterBottom\n              >\n                Langue: {book.language.toUpperCase()}\n              </Typography>\n            )}\n\n            {book?.total_pages > 0 && (\n              <Typography\n                variant=\"subtitle2\"\n                color=\"text.secondary\"\n                gutterBottom\n              >\n                Nombre de pages: {book.total_pages}\n              </Typography>\n            )}\n\n            <Typography variant=\"body1\" paragraph sx={{ mt: 3, mb: 3 }}>\n              {book?.description || \"Aucune description disponible\"}\n            </Typography>\n\n            <Box sx={{ display: \"flex\", gap: 2, mt: 3 }}>\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                onClick={() => navigate(`/reader/${bookId}`)}\n                sx={{\n                  backgroundColor: (theme) => theme.palette.primary.main,\n                  color: \"white\",\n                  \"&:hover\": {\n                    backgroundColor: (theme) => theme.palette.primary.dark,\n                  },\n                }}\n              >\n                Commencer la lecture\n              </Button>\n\n              <Button\n                variant=\"outlined\"\n                size=\"large\"\n                startIcon={<PreviewIcon />}\n                onClick={() => setPreviewOpen(true)}\n              >\n                Aperçu\n              </Button>\n\n              <Button\n                variant=\"outlined\"\n                size=\"large\"\n                onClick={() => navigate(-1)}\n              >\n                Retour\n              </Button>\n            </Box>\n            {previewOpen && (\n              <PDFPreview open={previewOpen} onClose={() => setPreviewOpen(false)} />\n            )}\n          </Box>\n        </Box>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default BookDetailsPage;\n"],"names":["_interopRequireDefault","require$$0","Preview","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","Book","BookDetailsPage","bookId","useParams","navigate","useNavigate","book","setBook","useState","loading","setLoading","error","setError","previewOpen","setPreviewOpen","useEffect","response","fetch","ok","Error","statusText","bookData","json","coverResponse","cover_image","url","err","message","jsx","Box","CircularProgress","jsxs","Typography","Button","mt","Container","Paper","p","backgroundColor","borderRadius","xs","md","title","width","height","objectFit","BookIcon","fontSize","color","author","publisher","publication_date","Date","toLocaleDateString","language","toUpperCase","total_pages","mb","description","display","gap","theme","palette","primary","main","dark","PreviewIcon","PDFPreview"],"mappings":"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","x_google_ignoreList":[0,1]}