const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-CU2syaqn.js","assets/mui-4H20ALa5.js","assets/vendor-0_jEQBB2.js","assets/mui-deps-DlUk4hWl.js","assets/router-Csy8SDXT.js","assets/index-DRh1NQ3_.js","assets/PDFPreview-DNY3WMgB.js","assets/Close-D2xlRHaP.js","assets/index-DrC5o7ZK.js","assets/index-DP6ziNdX.js","assets/index-DYF5J0Bo.js","assets/index-HPCX7lV1.js","assets/BookDetailsPage-yGQ6-2EW.js"])))=>i.map(i=>d[i]);
import{u as e,i as r,j as t,P as o,B as n,a as s,C as i,A as a,T as l,b as c,d,e as h,f as u,g as m,h as p,k as x}from"./mui-4H20ALa5.js";import{e as f,r as v,b as g,c as j}from"./vendor-0_jEQBB2.js";import{u as y,a as b,O as _,L as E,N as F,c as k,R as C}from"./router-Csy8SDXT.js";import"./mui-deps-DlUk4hWl.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var S={},w=f;S.createRoot=w.createRoot,S.hydrateRoot=w.hydrateRoot;const O=v.createContext(null),P={didCatch:!1,error:null};class A extends v.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=P}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var r,t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];null===(r=(t=this.props).onReset)||void 0===r||r.call(t,{args:n,reason:"imperative-api"}),this.setState(P)}}componentDidCatch(e,r){var t,o;null===(t=(o=this.props).onError)||void 0===t||t.call(o,e,r)}componentDidUpdate(e,r){const{didCatch:t}=this.state,{resetKeys:o}=this.props;var n,s;t&&null!==r.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==r.length||e.some(((e,t)=>!Object.is(e,r[t])))}(e.resetKeys,o)&&(null===(n=(s=this.props).onReset)||void 0===n||n.call(s,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(P))}render(){const{children:e,fallbackRender:r,FallbackComponent:t,fallback:o}=this.props,{didCatch:n,error:s}=this.state;let i=e;if(n){const e={error:s,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof r)i=r(e);else if(t)i=v.createElement(t,e);else{if(void 0===o)throw s;i=o}}return v.createElement(O.Provider,{value:{didCatch:n,error:s,resetErrorBoundary:this.resetErrorBoundary}},i)}}const B={},I=function(e,r,t){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(r.map((e=>{if((e=function(e){return"/"+e}(e))in B)return;B[e]=!0;const r=e.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=r?"stylesheet":"modulepreload",r||(n.as="script"),n.crossOrigin="",n.href=e,t&&n.setAttribute("nonce",t),document.head.appendChild(n),r?new Promise(((r,t)=>{n.addEventListener("load",r),n.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return o.then((r=>{for(const e of r||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))};var R={},z={};const M=g(e);var L;function T(){return L||(L=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=M}(z)),z}var H=r;Object.defineProperty(R,"__esModule",{value:!0});var D=R.default=void 0,W=H(T()),V=t;D=R.default=(0,W.default)([(0,V.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,V.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var N={},q=r;Object.defineProperty(N,"__esModule",{value:!0});var K=N.default=void 0,U=q(T()),G=t;K=N.default=(0,U.default)((0,G.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var J={},$=r;Object.defineProperty(J,"__esModule",{value:!0});var X=J.default=void 0,Q=$(T()),Y=t;X=J.default=(0,Q.default)((0,Y.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-1 9H9V9h10zm-4 4H9v-2h6zm4-8H9V5h10z"}),"LibraryBooks");var Z={},ee=r;Object.defineProperty(Z,"__esModule",{value:!0});var re=Z.default=void 0,te=ee(T()),oe=t;re=Z.default=(0,te.default)((0,oe.jsx)("path",{d:"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m2.19 12.19L6 18l3.81-8.19L18 6z"}),"Explore");var ne={},se=r;Object.defineProperty(ne,"__esModule",{value:!0});var ie=ne.default=void 0,ae=se(T()),le=t;ie=ne.default=(0,ae.default)((0,le.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");const ce=()=>{const e=y(),r=b(),[i,a]=j.useState((()=>{const e=r.pathname;return"/"===e||"/home"===e?"/home":e}));return t.jsx(o,{sx:{position:"fixed",bottom:0,left:0,right:0,display:{xs:"block",sm:"none"},zIndex:1e3},elevation:3,children:t.jsxs(n,{value:i,onChange:(r,t)=>{a(t),e(t)},children:[t.jsx(s,{label:"Accueil",value:"/home",icon:t.jsx(K,{})}),t.jsx(s,{label:"Bibliothèque",value:"/library",icon:t.jsx(X,{})}),t.jsx(s,{label:"Parcourir",value:"/browse",icon:t.jsx(re,{})}),t.jsx(s,{label:"Profil",value:"/profile",icon:t.jsx(ie,{})})]})})},de=()=>{const e=b().pathname.includes("/reader/");return e?t.jsx(t.Fragment,{children:t.jsx(i,{maxWidth:!1,disableGutters:!0,sx:{p:0,m:0,height:"100vh",width:"100vw",overflow:"hidden"},children:t.jsx(_,{})})}):t.jsxs(t.Fragment,{children:[t.jsx(a,{position:"static",children:t.jsxs(l,{children:[t.jsxs(c,{display:"flex",alignItems:"center",sx:{flexGrow:1},children:[t.jsx(D,{sx:{mr:1,color:"primary.main"}}),t.jsx(d,{variant:"h6",component:E,to:"/",sx:{textDecoration:"none",color:"text.primary",fontWeight:600,"&:hover":{color:"primary.main"}},children:"Casys.AI"})]}),t.jsx(h,{color:"primary",component:E,to:"/credits",sx:{fontWeight:500,mr:2,"&:hover":{backgroundColor:"primary.light"}},children:"Acheter des crédits"}),t.jsx(h,{color:"primary",component:E,to:"/library",sx:{fontWeight:500,display:{xs:"none",sm:"block"},"&:hover":{backgroundColor:"primary.light"}},children:"Bibliothèque"})]})}),t.jsx(i,{maxWidth:!e&&"xl",disableGutters:e,sx:{mt:e?0:4,minHeight:"calc(100vh - 64px)",backgroundColor:"background.default",py:e?0:3,pb:e?0:{xs:9,sm:3},overflowX:"hidden",...e&&{p:0,maxWidth:"100%",width:"100vw",height:"100vh"}},children:t.jsx(v.Suspense,{fallback:t.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:t.jsx(u,{})}),children:t.jsx(_,{})})}),!e&&t.jsx(ce,{})]})},he=v.createContext(null),ue=({children:e})=>{const[r,o]=v.useState(null),[n,s]=v.useState(!0),[i,a]=v.useState(null);return v.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("user");if(e){const r=JSON.parse(e);o(r)}}catch(e){localStorage.removeItem("user"),a("Erreur lors de la restauration de la session")}finally{s(!1)}})()}),[]),n?t.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:t.jsx(u,{})}):t.jsx(he.Provider,{value:{user:r,login:async e=>{try{a(null);const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error("Échec de la connexion");const t=await r.json();return o(t),localStorage.setItem("user",JSON.stringify(t)),t}catch(r){throw a("Identifiants invalides"),r}},logout:()=>{o(null),localStorage.removeItem("user")},error:i,setError:a},children:e})},me=()=>{const e=v.useContext(he);if(!e)throw new Error("useAuth doit être utilisé à l'intérieur d'un AuthProvider");return e},pe=({children:e})=>{const{user:r}=me(),o=b();return r?t.jsx(t.Fragment,{children:e}):t.jsx(F,{to:"/login",state:{from:o},replace:!0})},xe=v.lazy((()=>I((()=>import("./LoginPage-CU2syaqn.js")),__vite__mapDeps([0,1,2,3,4])))),fe=v.lazy((()=>I((()=>import("./index-DRh1NQ3_.js")),__vite__mapDeps([5,1,2,3,6,7,4])))),ve=v.lazy((()=>I((()=>import("./index-DrC5o7ZK.js")),__vite__mapDeps([8,1,2,3,7,4])))),ge=v.lazy((()=>I((()=>import("./index-DP6ziNdX.js")),__vite__mapDeps([9,1,2,3])))),je=v.lazy((()=>I((()=>import("./index-DYF5J0Bo.js")),__vite__mapDeps([10,1,2,3])))),ye=v.lazy((()=>I((()=>import("./index-HPCX7lV1.js")),__vite__mapDeps([11,1,2,3,4])))),be=v.lazy((()=>I((()=>import("./BookDetailsPage-yGQ6-2EW.js")),__vite__mapDeps([12,1,2,3,6,7,4])))),_e=()=>t.jsx(pe,{children:t.jsx(de,{})}),Ee=({children:e})=>t.jsx(v.Suspense,{fallback:t.jsx("div",{children:"Chargement..."}),children:e}),Fe=()=>t.jsxs(c,{sx:{p:3,textAlign:"center"},children:[t.jsx(d,{variant:"h6",children:"Une erreur est survenue lors du chargement de la page"}),t.jsx(h,{component:E,to:"/",sx:{mt:2},children:"Retourner à l'accueil"})]}),ke=k([{path:"/",element:t.jsx(F,{to:"/login",replace:!0})},{path:"/login",element:t.jsx(Ee,{children:t.jsx(xe,{})}),errorElement:t.jsx(Fe,{})},{path:"/reader/:bookId",element:t.jsx(Ee,{children:t.jsx(ve,{})}),errorElement:t.jsx(Fe,{})},{path:"/",element:t.jsx(_e,{}),errorElement:t.jsx(Fe,{}),children:[{index:!0,element:t.jsx(Ee,{children:t.jsx(fe,{})})},{path:"library",element:t.jsx(Ee,{children:t.jsx(je,{})})},{path:"browse",element:t.jsx(Ee,{children:t.jsx(ge,{})})},{path:"profile",element:t.jsx(Ee,{children:t.jsx(ye,{})})},{path:"books/:bookId",element:t.jsx(Ee,{children:t.jsx(be,{})})},{path:"*",element:t.jsx(F,{to:"/",replace:!0})}]}],{future:{v7_startTransition:!0,v7_normalizeFormMethod:!0,v7_relativeSplatPath:!0,v7_fetcherPersist:!0,v7_partialHydration:!0,v7_skipActionErrorRevalidation:!0}}),Ce=m({palette:{primary:{main:"#6200EE",light:"#7F39FB",dark:"#4B0082",contrastText:"#FFFFFF"},secondary:{main:"#343A40",light:"#4B545C",dark:"#23272B",contrastText:"#FFFFFF"},background:{default:"#FFFFFF",paper:"#FFFFFF"},text:{primary:"#000000",secondary:"#343A40"}},typography:{fontFamily:"'Arial', 'Helvetica', sans-serif",h1:{fontWeight:700,fontSize:"2.5rem",color:"#343A40",marginBottom:"1rem"},h2:{fontWeight:600,fontSize:"2rem",color:"#343A40",marginBottom:"0.875rem"},h3:{fontWeight:600,fontSize:"1.75rem",color:"#343A40",marginBottom:"0.75rem"},h4:{fontWeight:600,fontSize:"1.5rem",color:"#343A40",marginBottom:"0.625rem"},h5:{fontWeight:500,fontSize:"1.25rem",color:"#343A40",marginBottom:"0.5rem"},h6:{fontWeight:500,fontSize:"1rem",color:"#343A40",marginBottom:"0.5rem"},body1:{fontSize:"1rem",lineHeight:1.6},button:{textTransform:"none",fontWeight:500}},spacing:8,shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 24px",fontWeight:500},contained:{backgroundColor:"#6200EE","&:hover":{backgroundColor:"#4B0082"},boxShadow:"none"},outlined:{borderColor:"#6200EE",color:"#6200EE","&:hover":{borderColor:"#4B0082",color:"#4B0082",backgroundColor:"rgba(98, 0, 238, 0.04)"}}}},MuiCard:{styleOverrides:{root:{backgroundColor:"#FFFFFF",borderRadius:12,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",padding:"24px"}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#FFFFFF",color:"#000000",boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)"}}},MuiContainer:{styleOverrides:{root:{backgroundColor:"#FFFFFF",padding:"24px"}}}}}),Se=()=>t.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",bgcolor:"background.default",color:"text.primary",children:t.jsx(u,{})}),we=({error:e})=>t.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,bgcolor:"background.default",color:"error.main",children:[t.jsx("h2",{children:"Une erreur est survenue"}),t.jsx("pre",{children:e.message})]});function Oe(){return t.jsx(j.StrictMode,{children:t.jsx(A,{FallbackComponent:we,children:t.jsxs(p,{theme:Ce,children:[t.jsx(x,{}),t.jsx(ue,{children:t.jsx(C,{router:ke,hydrationData:window.__INITIAL_DATA__,HydrateFallback:Se})})]})})})}let Pe;if(window.__ROOT__)Pe=window.__ROOT__;else{const e=document.getElementById("root");Pe=S.createRoot(e),window.__ROOT__=Pe}Pe.render(t.jsx(Oe,{}));export{D as d,T as r,me as u};
