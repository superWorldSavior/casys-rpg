import{i as e,j as t,b as r,f as o,d as a,e as i,C as s,P as l}from"./mui-CxfHYZX5.js";import{r as n}from"./vendor-0_jEQBB2.js";import{r as c}from"./index-BwVf-lp6.js";import{P as d}from"./PDFPreview-B7vnCZeD.js";import{b as u,u as x}from"./router-Csy8SDXT.js";import"./mui-deps-CFR4qKP5.js";import"./Close-CzEYkyMI.js";var m={},p=e;Object.defineProperty(m,"__esModule",{value:!0});var h=m.default=void 0,v=p(c()),g=t;h=m.default=(0,v.default)((0,g.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var j={},f=e;Object.defineProperty(j,"__esModule",{value:!0});var b=j.default=void 0,y=f(c()),k=t;function C(){const{bookId:e}=u(),c=x(),[m,p]=n.useState(null),[v,g]=n.useState(!0),[j,f]=n.useState(null),[y,k]=n.useState(!1);return n.useEffect((()=>{(async()=>{try{g(!0);const t=await fetch(`/api/books/${e}`);if(!t.ok)throw new Error(`Impossible de charger les détails du livre : ${t.statusText}`);const r=await t.json(),o=await fetch(`/api/books/${e}/cover`);o.ok?r.cover_image=o.url:r.cover_image=null,p(r)}catch(t){f(t.message),p(null)}finally{g(!1)}})()}),[e]),v?t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:t.jsx(o,{})}):j?t.jsxs(r,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",p:3,children:[t.jsx(a,{color:"error",variant:"h6",gutterBottom:!0,children:j}),t.jsx(i,{variant:"contained",onClick:()=>c(-1),sx:{mt:2},children:"Retour"})]}):t.jsx(s,{maxWidth:"md",children:t.jsx(l,{elevation:0,sx:{p:4,mt:4,backgroundColor:"background.paper",borderRadius:2},children:t.jsxs(r,{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,children:[t.jsx(r,{flex:"0 0 300px",height:"400px",bgcolor:"grey.100",borderRadius:1,display:"flex",justifyContent:"center",alignItems:"center",children:m&&m.cover_image?t.jsx(r,{component:"img",src:m.cover_image,alt:m.title,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}):t.jsx(b,{sx:{fontSize:60,color:"grey.400"}})}),t.jsxs(r,{flex:"1",children:[t.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0,children:(null==m?void 0:m.title)||"Sans titre"}),t.jsx(a,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:(null==m?void 0:m.author)||"Auteur inconnu"}),(null==m?void 0:m.publisher)&&t.jsxs(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Édité par ",m.publisher]}),(null==m?void 0:m.publication_date)&&t.jsxs(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Date de publication:"," ",new Date(m.publication_date).toLocaleDateString()]}),(null==m?void 0:m.language)&&t.jsxs(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Langue: ",m.language.toUpperCase()]}),(null==m?void 0:m.total_pages)>0&&t.jsxs(a,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Nombre de pages: ",m.total_pages]}),t.jsx(a,{variant:"body1",paragraph:!0,sx:{mt:3,mb:3},children:(null==m?void 0:m.description)||"Aucune description disponible"}),t.jsxs(r,{sx:{display:"flex",gap:2,mt:3},children:[t.jsx(i,{variant:"contained",size:"large",onClick:()=>c(`/reader/${e}`),sx:{backgroundColor:e=>e.palette.primary.main,color:"white","&:hover":{backgroundColor:e=>e.palette.primary.dark}},children:"Commencer la lecture"}),t.jsx(i,{variant:"outlined",size:"large",startIcon:t.jsx(h,{}),onClick:()=>k(!0),children:"Aperçu"}),t.jsx(i,{variant:"outlined",size:"large",onClick:()=>c(-1),children:"Retour"})]}),y&&t.jsx(d,{open:y,onClose:()=>k(!1)})]})]})})})}b=j.default=(0,y.default)((0,k.jsx)("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 4h5v8l-2.5-1.5L6 12z"}),"Book");export{C as default};
