var Qn=Object.defineProperty;var vn=t=>{throw TypeError(t)};var Zn=(t,e,i)=>e in t?Qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var Qt=(t,e,i)=>Zn(t,typeof e!="symbol"?e+"":e,i),Ie=(t,e,i)=>e.has(t)||vn("Cannot "+i);var s=(t,e,i)=>(Ie(t,e,"read from private field"),i?i.call(t):e.get(t)),ct=(t,e,i)=>e.has(t)?vn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),ut=(t,e,i,n)=>(Ie(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),nt=(t,e,i)=>(Ie(t,e,"access private method"),i);var pe=(t,e,i,n)=>({set _(r){ut(t,e,r,i)},get _(){return s(t,e,n)}});import{g as getDefaultExportFromCjs,u as useTheme,a as getThemeProps,r as reactExports,b as useEnhancedEffect,_ as _objectWithoutPropertiesLoose$1,c as _extends,d as useForkRef,e as generateUtilityClass,f as generateUtilityClasses,h as useDefaultProps,i as capitalize,j as composeClasses,k as jsxRuntimeExports,s as styled,B as ButtonBase,l as alpha_1,m as clsx,P as Paper,n as darken_1,o as lighten_1,p as useEventCallback,T as Typography,q as extendSxProp,t as resolveBreakpointValues,v as handleBreakpoints,w as css,x as keyframes,y as useTimeout,z as emphasize_1,A as interopRequireDefaultExports,C as getAugmentedNamespace,R as React,D as Button,E as CircularProgress,F as useNavigate,G as Container}from"./index-BNzQDM88.js";import{r as resolveComponentProps,m as mergeSlotProps,a as appendOwnerState,c as createSvgIcon,o as ownerDocument,u as useTheme$1,F as Fade,b as useId,M as Modal,B as Backdrop,d as useRtl,L as ListContext,i as isMuiElement,e as isHostComponent,f as extractEventHandlers,G as Grow,g as useSlotProps,h as requireCreateSvgIcon,j as Box,k as default_1$7,l as default_1$8,n as List}from"./NavigateBefore-gr_aggjt.js";function _mergeNamespaces(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const S=Object.getOwnPropertyDescriptor(n,r);S&&Object.defineProperty(t,r,S.get?S:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var propTypes$1={exports:{}},ReactPropTypesSecret$3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1$1=ReactPropTypesSecret$3,ReactPropTypesSecret$2=ReactPropTypesSecret_1$1;function emptyFunction$1(){}function emptyFunctionWithReset$1(){}emptyFunctionWithReset$1.resetWarningCache=emptyFunction$1;var factoryWithThrowingShims$1=function(){function t(n,r,S,C,N,v){if(v!==ReactPropTypesSecret$2){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset$1,resetWarningCache:emptyFunction$1};return i.PropTypes=i,i};propTypes$1.exports=factoryWithThrowingShims$1();var propTypesExports$1=propTypes$1.exports;const PropTypes$1=getDefaultExportFromCjs(propTypesExports$1);function useMediaQueryOld(t,e,i,n,r){const[S,C]=reactExports.useState(()=>r&&i?i(t).matches:n?n(t).matches:e);return useEnhancedEffect(()=>{let N=!0;if(!i)return;const v=i(t),b=()=>{N&&C(v.matches)};return b(),v.addListener(b),()=>{N=!1,v.removeListener(b)}},[t,i]),S}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(t,e,i,n,r){const S=reactExports.useCallback(()=>e,[e]),C=reactExports.useMemo(()=>{if(r&&i)return()=>i(t).matches;if(n!==null){const{matches:p}=n(t);return()=>p}return S},[S,t,n,r,i]),[N,v]=reactExports.useMemo(()=>{if(i===null)return[S,()=>()=>{}];const p=i(t);return[()=>p.matches,k=>(p.addListener(k),()=>{p.removeListener(k)})]},[S,i,t]);return maybeReactUseSyncExternalStore(v,N,C)}function useMediaQuery(t,e={}){const i=useTheme(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:r=!1,matchMedia:S=n?window.matchMedia:null,ssrMatchMedia:C=null,noSsr:N=!1}=getThemeProps({name:"MuiUseMediaQuery",props:e,theme:i});let v=typeof t=="function"?t(i):t;return v=v.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(v,r,S,C,N)}const _excluded$h=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_excluded2$3=["component","slots","slotProps"],_excluded3$1=["component"];function useSlot(t,e){const{className:i,elementType:n,ownerState:r,externalForwardedProps:S,getSlotOwnerState:C,internalForwardedProps:N}=e,v=_objectWithoutPropertiesLoose$1(e,_excluded$h),{component:b,slots:p={[t]:void 0},slotProps:k={[t]:void 0}}=S,I=_objectWithoutPropertiesLoose$1(S,_excluded2$3),A=p[t]||n,g=resolveComponentProps(k[t],r),w=mergeSlotProps(_extends({className:i},v,{externalForwardedProps:t==="root"?I:void 0,externalSlotProps:g})),{props:{component:y},internalRef:h}=w,x=_objectWithoutPropertiesLoose$1(w.props,_excluded3$1),F=useForkRef(h,g==null?void 0:g.ref,e.ref),E=C?C(x):{},o=_extends({},r,E),f=t==="root"?y||b:y,a=appendOwnerState(A,_extends({},t==="root"&&!b&&!p[t]&&N,t!=="root"&&!p[t]&&N,x,f&&{as:f},{ref:F}),o);return Object.keys(E).forEach(u=>{delete a[u]}),[A,a]}function getAlertUtilityClass(t){return generateUtilityClass("MuiAlert",t)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$g=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$f=t=>{const{classes:e,disabled:i,color:n,edge:r,size:S}=t,C={root:["root",i&&"disabled",n!=="default"&&`color${capitalize(n)}`,r&&`edge${capitalize(r)}`,`size${capitalize(S)}`]};return composeClasses(C,getIconButtonUtilityClass,e)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,i.color!=="default"&&e[`color${capitalize(i.color)}`],i.edge&&e[`edge${capitalize(i.edge)}`],e[`size${capitalize(i.size)}`]]}})(({theme:t,ownerState:e})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var i;const n=(i=(t.vars||t).palette)==null?void 0:i[e.color];return _extends({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&_extends({color:n==null?void 0:n.main},!e.disableRipple&&{"&:hover":_extends({},n&&{backgroundColor:t.vars?`rgba(${n.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(n.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiIconButton"}),{edge:r=!1,children:S,className:C,color:N="default",disabled:v=!1,disableFocusRipple:b=!1,size:p="medium"}=n,k=_objectWithoutPropertiesLoose$1(n,_excluded$g),I=_extends({},n,{edge:r,color:N,disabled:v,disableFocusRipple:b,size:p}),A=useUtilityClasses$f(I);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(A.root,C),centerRipple:!0,focusRipple:!b,disabled:v,ref:i},k,{ownerState:I,children:S}))}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$f=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$e=t=>{const{variant:e,color:i,severity:n,classes:r}=t,S={root:["root",`color${capitalize(i||n)}`,`${e}${capitalize(i||n)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(S,getAlertUtilityClass,r)},AlertRoot=styled(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,e[i.variant],e[`${i.variant}${capitalize(i.color||i.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?darken_1:lighten_1,i=t.palette.mode==="light"?lighten_1:darken_1;return _extends({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${n}StandardBg`]:i(t.palette[n].light,.9),[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),border:`1px solid ${(t.vars||t).palette[n].light}`,[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:_extends({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}))]})}),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiAlert"}),{action:r,children:S,className:C,closeText:N="Close",color:v,components:b={},componentsProps:p={},icon:k,iconMapping:I=defaultIconMapping,onClose:A,role:g="alert",severity:w="success",slotProps:y={},slots:h={},variant:x="standard"}=n,F=_objectWithoutPropertiesLoose$1(n,_excluded$f),E=_extends({},n,{color:v,severity:w,variant:x,colorSeverity:v||w}),o=useUtilityClasses$e(E),f={slots:_extends({closeButton:b.CloseButton,closeIcon:b.CloseIcon},h),slotProps:_extends({},p,y)},[a,u]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:f,ownerState:E}),[m,j]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:f,ownerState:E});return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:g,elevation:0,ownerState:E,className:clsx(o.root,C),ref:i},F,{children:[k!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:E,className:o.icon,children:k||I[w]||defaultIconMapping[w]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:E,className:o.message,children:S}),r!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:E,className:o.action,children:r}):null,r==null&&A?jsxRuntimeExports.jsx(AlertAction,{ownerState:E,className:o.action,children:jsxRuntimeExports.jsx(a,_extends({size:"small","aria-label":N,title:N,color:"inherit",onClick:A},u,{children:jsxRuntimeExports.jsx(m,_extends({fontSize:"small"},j))}))}):null]}))}),CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(t){return generateUtilityClass("MuiChip",t)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$e=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$d=t=>{const{classes:e,disabled:i,size:n,color:r,iconColor:S,onDelete:C,clickable:N,variant:v}=t,b={root:["root",v,i&&"disabled",`size${capitalize(n)}`,`color${capitalize(r)}`,N&&"clickable",N&&`clickableColor${capitalize(r)}`,C&&"deletable",C&&`deletableColor${capitalize(r)}`,`${v}${capitalize(r)}`],label:["label",`label${capitalize(n)}`],avatar:["avatar",`avatar${capitalize(n)}`,`avatarColor${capitalize(r)}`],icon:["icon",`icon${capitalize(n)}`,`iconColor${capitalize(S)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(n)}`,`deleteIconColor${capitalize(r)}`,`deleteIcon${capitalize(v)}Color${capitalize(r)}`]};return composeClasses(b,getChipUtilityClass,e)},ChipRoot=styled("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t,{color:n,iconColor:r,clickable:S,onDelete:C,size:N,variant:v}=i;return[{[`& .${chipClasses.avatar}`]:e.avatar},{[`& .${chipClasses.avatar}`]:e[`avatar${capitalize(N)}`]},{[`& .${chipClasses.avatar}`]:e[`avatarColor${capitalize(n)}`]},{[`& .${chipClasses.icon}`]:e.icon},{[`& .${chipClasses.icon}`]:e[`icon${capitalize(N)}`]},{[`& .${chipClasses.icon}`]:e[`iconColor${capitalize(r)}`]},{[`& .${chipClasses.deleteIcon}`]:e.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(N)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIconColor${capitalize(n)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(v)}Color${capitalize(n)}`]},e.root,e[`size${capitalize(N)}`],e[`color${capitalize(n)}`],S&&e.clickable,S&&n!=="default"&&e[`clickableColor${capitalize(n)})`],C&&e.deletable,C&&n!=="default"&&e[`deletableColor${capitalize(n)}`],e[v],e[`${v}${capitalize(n)}`]]}})(({theme:t,ownerState:e})=>{const i=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:i,fontSize:t.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&_extends({color:t.vars?t.vars.palette.Chip.defaultIconColor:i},e.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:alpha_1(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>_extends({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>_extends({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),ChipLabel=styled("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:i}=t,{size:n}=i;return[e.label,e[`label${capitalize(n)}`]]}})(({ownerState:t})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(t){return t.key==="Backspace"||t.key==="Delete"}const Chip=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiChip"}),{avatar:r,className:S,clickable:C,color:N="default",component:v,deleteIcon:b,disabled:p=!1,icon:k,label:I,onClick:A,onDelete:g,onKeyDown:w,onKeyUp:y,size:h="medium",variant:x="filled",tabIndex:F,skipFocusWhenDisabled:E=!1}=n,o=_objectWithoutPropertiesLoose$1(n,_excluded$e),f=reactExports.useRef(null),a=useForkRef(f,i),u=D=>{D.stopPropagation(),g&&g(D)},m=D=>{D.currentTarget===D.target&&isDeleteKeyboardEvent(D)&&D.preventDefault(),w&&w(D)},j=D=>{D.currentTarget===D.target&&(g&&isDeleteKeyboardEvent(D)?g(D):D.key==="Escape"&&f.current&&f.current.blur()),y&&y(D)},d=C!==!1&&A?!0:C,T=d||g?ButtonBase:v||"div",L=_extends({},n,{component:T,disabled:p,size:h,color:N,iconColor:reactExports.isValidElement(k)&&k.props.color||N,onDelete:!!g,clickable:d,variant:x}),K=useUtilityClasses$d(L),G=T===ButtonBase?_extends({component:v||"div",focusVisibleClassName:K.focusVisible},g&&{disableRipple:!0}):{};let Y=null;g&&(Y=b&&reactExports.isValidElement(b)?reactExports.cloneElement(b,{className:clsx(b.props.className,K.deleteIcon),onClick:u}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(K.deleteIcon),onClick:u}));let V=null;r&&reactExports.isValidElement(r)&&(V=reactExports.cloneElement(r,{className:clsx(K.avatar,r.props.className)}));let st=null;return k&&reactExports.isValidElement(k)&&(st=reactExports.cloneElement(k,{className:clsx(K.icon,k.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:T,className:clsx(K.root,S),disabled:d&&p?!0:void 0,onClick:A,onKeyDown:m,onKeyUp:j,ref:a,tabIndex:E&&p?-1:F,ownerState:L},G,o,{children:[V||st,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(K.label),ownerState:L,children:I}),Y]}))});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const _excluded$d=["className","raised"],useUtilityClasses$c=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardUtilityClass,e)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiCard"}),{className:r,raised:S=!1}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$d),N=_extends({},n,{raised:S}),v=useUtilityClasses$c(N);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(v.root,r),elevation:S?8:void 0,ref:i,ownerState:N},C))});function getCardActionsUtilityClass(t){return generateUtilityClass("MuiCardActions",t)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$c=["disableSpacing","className"],useUtilityClasses$b=t=>{const{classes:e,disableSpacing:i}=t;return composeClasses({root:["root",!i&&"spacing"]},getCardActionsUtilityClass,e)},CardActionsRoot=styled("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,!i.disableSpacing&&e.spacing]}})(({ownerState:t})=>_extends({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),CardActions=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:S}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$c),N=_extends({},n,{disableSpacing:r}),v=useUtilityClasses$b(N);return jsxRuntimeExports.jsx(CardActionsRoot,_extends({className:clsx(v.root,S),ownerState:N,ref:i},C))});function getCardContentUtilityClass(t){return generateUtilityClass("MuiCardContent",t)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$b=["className","component"],useUtilityClasses$a=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardContentUtilityClass,e)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiCardContent"}),{className:r,component:S="div"}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$b),N=_extends({},n,{component:S}),v=useUtilityClasses$a(N);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:S,className:clsx(v.root,r),ownerState:N,ref:i},C))});function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:e,disableReactTree:i=!1,mouseEvent:n="onClick",onClickAway:r,touchEvent:S="onTouchEnd"}=t,C=reactExports.useRef(!1),N=reactExports.useRef(null),v=reactExports.useRef(!1),b=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{v.current=!0},0),()=>{v.current=!1}),[]);const p=useForkRef(e.ref,N),k=useEventCallback(g=>{const w=b.current;b.current=!1;const y=ownerDocument(N.current);if(!v.current||!N.current||"clientX"in g&&clickedRootScrollbar(g,y))return;if(C.current){C.current=!1;return}let h;g.composedPath?h=g.composedPath().indexOf(N.current)>-1:h=!y.documentElement.contains(g.target)||N.current.contains(g.target),!h&&(i||!w)&&r(g)}),I=g=>w=>{b.current=!0;const y=e.props[g];y&&y(w)},A={ref:p};return S!==!1&&(A[S]=I(S)),reactExports.useEffect(()=>{if(S!==!1){const g=mapEventPropToEvent(S),w=ownerDocument(N.current),y=()=>{C.current=!0};return w.addEventListener(g,k),w.addEventListener("touchmove",y),()=>{w.removeEventListener(g,k),w.removeEventListener("touchmove",y)}}},[k,S]),n!==!1&&(A[n]=I(n)),reactExports.useEffect(()=>{if(n!==!1){const g=mapEventPropToEvent(n),w=ownerDocument(N.current);return w.addEventListener(g,k),()=>{w.removeEventListener(g,k)}}},[k,n]),jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(e,A)})}function getDialogUtilityClass(t){return generateUtilityClass("MuiDialog",t)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),_excluded$a=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),useUtilityClasses$9=t=>{const{classes:e,scroll:i,maxWidth:n,fullWidth:r,fullScreen:S}=t,C={root:["root"],container:["container",`scroll${capitalize(i)}`],paper:["paper",`paperScroll${capitalize(i)}`,`paperWidth${capitalize(String(n))}`,r&&"paperFullWidth",S&&"paperFullScreen"]};return composeClasses(C,getDialogUtilityClass,e)},DialogRoot=styled(Modal,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.container,e[`scroll${capitalize(i.scroll)}`]]}})(({ownerState:t})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.paper,e[`scrollPaper${capitalize(i.scroll)}`],e[`paperWidth${capitalize(String(i.maxWidth))}`],i.fullWidth&&e.paperFullWidth,i.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiDialog"}),r=useTheme$1(),S={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":C,"aria-labelledby":N,BackdropComponent:v,BackdropProps:b,children:p,className:k,disableEscapeKeyDown:I=!1,fullScreen:A=!1,fullWidth:g=!1,maxWidth:w="sm",onBackdropClick:y,onClick:h,onClose:x,open:F,PaperComponent:E=Paper,PaperProps:o={},scroll:f="paper",TransitionComponent:a=Fade,transitionDuration:u=S,TransitionProps:m}=n,j=_objectWithoutPropertiesLoose$1(n,_excluded$a),d=_extends({},n,{disableEscapeKeyDown:I,fullScreen:A,fullWidth:g,maxWidth:w,scroll:f}),T=useUtilityClasses$9(d),L=reactExports.useRef(),K=st=>{L.current=st.target===st.currentTarget},G=st=>{h&&h(st),L.current&&(L.current=null,y&&y(st),x&&x(st,"backdropClick"))},Y=useId(N),V=reactExports.useMemo(()=>({titleId:Y}),[Y]);return jsxRuntimeExports.jsx(DialogRoot,_extends({className:clsx(T.root,k),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:u,as:v},b)},disableEscapeKeyDown:I,onClose:x,open:F,ref:i,onClick:G,ownerState:d},j,{children:jsxRuntimeExports.jsx(a,_extends({appear:!0,in:F,timeout:u,role:"presentation"},m,{children:jsxRuntimeExports.jsx(DialogContainer,{className:clsx(T.container),onMouseDown:K,ownerState:d,children:jsxRuntimeExports.jsx(DialogPaper,_extends({as:E,elevation:24,role:"dialog","aria-describedby":C,"aria-labelledby":Y},o,{className:clsx(T.paper,o.className),ownerState:d,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:V,children:p})}))})}))}))});function getDialogActionsUtilityClass(t){return generateUtilityClass("MuiDialogActions",t)}generateUtilityClasses("MuiDialogActions",["root","spacing"]);const _excluded$9=["className","disableSpacing"],useUtilityClasses$8=t=>{const{classes:e,disableSpacing:i}=t;return composeClasses({root:["root",!i&&"spacing"]},getDialogActionsUtilityClass,e)},DialogActionsRoot=styled("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,!i.disableSpacing&&e.spacing]}})(({ownerState:t})=>_extends({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),DialogActions=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:S=!1}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$9),N=_extends({},n,{disableSpacing:S}),v=useUtilityClasses$8(N);return jsxRuntimeExports.jsx(DialogActionsRoot,_extends({className:clsx(v.root,r),ownerState:N,ref:i},C))});function getDialogContentUtilityClass(t){return generateUtilityClass("MuiDialogContent",t)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);function getDialogTitleUtilityClass(t){return generateUtilityClass("MuiDialogTitle",t)}const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),_excluded$8=["className","dividers"],useUtilityClasses$7=t=>{const{classes:e,dividers:i}=t;return composeClasses({root:["root",i&&"dividers"]},getDialogContentUtilityClass,e)},DialogContentRoot=styled("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,i.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiDialogContent"}),{className:r,dividers:S=!1}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$8),N=_extends({},n,{dividers:S}),v=useUtilityClasses$7(N);return jsxRuntimeExports.jsx(DialogContentRoot,_extends({className:clsx(v.root,r),ownerState:N,ref:i},C))}),_excluded$7=["className","id"],useUtilityClasses$6=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getDialogTitleUtilityClass,e)},DialogTitleRoot=styled(Typography,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),DialogTitle=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiDialogTitle"}),{className:r,id:S}=n,C=_objectWithoutPropertiesLoose$1(n,_excluded$7),N=n,v=useUtilityClasses$6(N),{titleId:b=S}=reactExports.useContext(DialogContext);return jsxRuntimeExports.jsx(DialogTitleRoot,_extends({component:"h2",className:clsx(v.root,r),ownerState:N,ref:i,variant:"h6",id:S??b},C))}),GridContext=reactExports.createContext();function getGridUtilityClass(t){return generateUtilityClass("MuiGrid",t)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(t=>`spacing-xs-${t}`),...DIRECTIONS.map(t=>`direction-xs-${t}`),...WRAPS.map(t=>`wrap-xs-${t}`),...GRID_SIZES.map(t=>`grid-xs-${t}`),...GRID_SIZES.map(t=>`grid-sm-${t}`),...GRID_SIZES.map(t=>`grid-md-${t}`),...GRID_SIZES.map(t=>`grid-lg-${t}`),...GRID_SIZES.map(t=>`grid-xl-${t}`)]),_excluded$6=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function generateGrid({theme:t,ownerState:e}){let i;return t.breakpoints.keys.reduce((n,r)=>{let S={};if(e[r]&&(i=e[r]),!i)return n;if(i===!0)S={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(i==="auto")S={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const C=resolveBreakpointValues({values:e.columns,breakpoints:t.breakpoints.values}),N=typeof C=="object"?C[r]:C;if(N==null)return n;const v=`${Math.round(i/N*1e8)/1e6}%`;let b={};if(e.container&&e.item&&e.columnSpacing!==0){const p=t.spacing(e.columnSpacing);if(p!=="0px"){const k=`calc(${v} + ${getOffset(p)})`;b={flexBasis:k,maxWidth:k}}}S=_extends({flexBasis:v,flexGrow:0,maxWidth:v},b)}return t.breakpoints.values[r]===0?Object.assign(n,S):n[t.breakpoints.up(r)]=S,n},{})}function generateDirection({theme:t,ownerState:e}){const i=resolveBreakpointValues({values:e.direction,breakpoints:t.breakpoints.values});return handleBreakpoints({theme:t},i,n=>{const r={flexDirection:n};return n.indexOf("column")===0&&(r[`& > .${gridClasses.item}`]={maxWidth:"none"}),r})}function extractZeroValueBreakpointKeys({breakpoints:t,values:e}){let i="";Object.keys(e).forEach(r=>{i===""&&e[r]!==0&&(i=r)});const n=Object.keys(t).sort((r,S)=>t[r]-t[S]);return n.slice(0,n.indexOf(i))}function generateRowGap({theme:t,ownerState:e}){const{container:i,rowSpacing:n}=e;let r={};if(i&&n!==0){const S=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let C;typeof S=="object"&&(C=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:S})),r=handleBreakpoints({theme:t},S,(N,v)=>{var b;const p=t.spacing(N);return p!=="0px"?{marginTop:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(p)}}:(b=C)!=null&&b.includes(v)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return r}function generateColumnGap({theme:t,ownerState:e}){const{container:i,columnSpacing:n}=e;let r={};if(i&&n!==0){const S=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let C;typeof S=="object"&&(C=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:S})),r=handleBreakpoints({theme:t},S,(N,v)=>{var b;const p=t.spacing(N);return p!=="0px"?{width:`calc(100% + ${getOffset(p)})`,marginLeft:`-${getOffset(p)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(p)}}:(b=C)!=null&&b.includes(v)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return r}function resolveSpacingStyles(t,e,i={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[i[`spacing-xs-${String(t)}`]];const n=[];return e.forEach(r=>{const S=t[r];Number(S)>0&&n.push(i[`spacing-${r}-${String(S)}`])}),n}const GridRoot=styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t,{container:n,direction:r,item:S,spacing:C,wrap:N,zeroMinWidth:v,breakpoints:b}=i;let p=[];n&&(p=resolveSpacingStyles(C,b,e));const k=[];return b.forEach(I=>{const A=i[I];A&&k.push(e[`grid-${I}-${String(A)}`])}),[e.root,n&&e.container,S&&e.item,v&&e.zeroMinWidth,...p,r!=="row"&&e[`direction-xs-${String(r)}`],N!=="wrap"&&e[`wrap-xs-${String(N)}`],...k]}})(({ownerState:t})=>_extends({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const i=[];return e.forEach(n=>{const r=t[n];if(Number(r)>0){const S=`spacing-${n}-${String(r)}`;i.push(S)}}),i}const useUtilityClasses$5=t=>{const{classes:e,container:i,direction:n,item:r,spacing:S,wrap:C,zeroMinWidth:N,breakpoints:v}=t;let b=[];i&&(b=resolveSpacingClasses(S,v));const p=[];v.forEach(I=>{const A=t[I];A&&p.push(`grid-${I}-${String(A)}`)});const k={root:["root",i&&"container",r&&"item",N&&"zeroMinWidth",...b,n!=="row"&&`direction-xs-${String(n)}`,C!=="wrap"&&`wrap-xs-${String(C)}`,...p]};return composeClasses(k,getGridUtilityClass,e)},Grid=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiGrid"}),{breakpoints:r}=useTheme$1(),S=extendSxProp(n),{className:C,columns:N,columnSpacing:v,component:b="div",container:p=!1,direction:k="row",item:I=!1,rowSpacing:A,spacing:g=0,wrap:w="wrap",zeroMinWidth:y=!1}=S,h=_objectWithoutPropertiesLoose$1(S,_excluded$6),x=A||g,F=v||g,E=reactExports.useContext(GridContext),o=p?N||12:E,f={},a=_extends({},h);r.keys.forEach(j=>{h[j]!=null&&(f[j]=h[j],delete a[j])});const u=_extends({},S,{columns:o,container:p,direction:k,item:I,rowSpacing:x,columnSpacing:F,wrap:w,zeroMinWidth:y,spacing:g},f,{breakpoints:r.keys}),m=useUtilityClasses$5(u);return jsxRuntimeExports.jsx(GridContext.Provider,{value:o,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:u,className:clsx(m.root,C),as:b,ref:i},a))})});function getLinearProgressUtilityClass(t){return generateUtilityClass("MuiLinearProgress",t)}generateUtilityClasses("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const _excluded$5=["className","color","value","valueBuffer","variant"];let _=t=>t,_t,_t2,_t3,_t4,_t5,_t6;const TRANSITION_DURATION=4,indeterminate1Keyframe=keyframes(_t||(_t=_`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),indeterminate2Keyframe=keyframes(_t2||(_t2=_`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),bufferKeyframe=keyframes(_t3||(_t3=_`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),useUtilityClasses$4=t=>{const{classes:e,variant:i,color:n}=t,r={root:["root",`color${capitalize(n)}`,i],dashed:["dashed",`dashedColor${capitalize(n)}`],bar1:["bar",`barColor${capitalize(n)}`,(i==="indeterminate"||i==="query")&&"bar1Indeterminate",i==="determinate"&&"bar1Determinate",i==="buffer"&&"bar1Buffer"],bar2:["bar",i!=="buffer"&&`barColor${capitalize(n)}`,i==="buffer"&&`color${capitalize(n)}`,(i==="indeterminate"||i==="query")&&"bar2Indeterminate",i==="buffer"&&"bar2Buffer"]};return composeClasses(r,getLinearProgressUtilityClass,e)},getColorShade=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?lighten_1(t.palette[e].main,.62):darken_1(t.palette[e].main,.5),LinearProgressRoot=styled("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,e[`color${capitalize(i.color)}`],e[i.variant]]}})(({ownerState:t,theme:e})=>_extends({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:getColorShade(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),LinearProgressDashed=styled("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.dashed,e[`dashedColor${capitalize(i.color)}`]]}})(({ownerState:t,theme:e})=>{const i=getColorShade(e,t.color);return _extends({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${i} 0%, ${i} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},css(_t4||(_t4=_`
    animation: ${0} 3s infinite linear;
  `),bufferKeyframe)),LinearProgressBar1=styled("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.bar,e[`barColor${capitalize(i.color)}`],(i.variant==="indeterminate"||i.variant==="query")&&e.bar1Indeterminate,i.variant==="determinate"&&e.bar1Determinate,i.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${TRANSITION_DURATION}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&css(_t5||(_t5=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),indeterminate1Keyframe)),LinearProgressBar2=styled("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.bar,e[`barColor${capitalize(i.color)}`],(i.variant==="indeterminate"||i.variant==="query")&&e.bar2Indeterminate,i.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>_extends({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:getColorShade(e,t.color),transition:`transform .${TRANSITION_DURATION}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&css(_t6||(_t6=_`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),indeterminate2Keyframe)),LinearProgress=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiLinearProgress"}),{className:r,color:S="primary",value:C,valueBuffer:N,variant:v="indeterminate"}=n,b=_objectWithoutPropertiesLoose$1(n,_excluded$5),p=_extends({},n,{color:S,variant:v}),k=useUtilityClasses$4(p),I=useRtl(),A={},g={bar1:{},bar2:{}};if((v==="determinate"||v==="buffer")&&C!==void 0){A["aria-valuenow"]=Math.round(C),A["aria-valuemin"]=0,A["aria-valuemax"]=100;let w=C-100;I&&(w=-w),g.bar1.transform=`translateX(${w}%)`}if(v==="buffer"&&N!==void 0){let w=(N||0)-100;I&&(w=-w),g.bar2.transform=`translateX(${w}%)`}return jsxRuntimeExports.jsxs(LinearProgressRoot,_extends({className:clsx(k.root,r),ownerState:p,role:"progressbar"},A,{ref:i},b,{children:[v==="buffer"?jsxRuntimeExports.jsx(LinearProgressDashed,{className:k.dashed,ownerState:p}):null,jsxRuntimeExports.jsx(LinearProgressBar1,{className:k.bar1,ownerState:p,style:g.bar1}),v==="determinate"?null:jsxRuntimeExports.jsx(LinearProgressBar2,{className:k.bar2,ownerState:p,style:g.bar2})]}))});function getListItemUtilityClass(t){return generateUtilityClass("MuiListItem",t)}const listItemClasses=generateUtilityClasses("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),listItemButtonClasses=generateUtilityClasses("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function getListItemSecondaryActionClassesUtilityClass(t){return generateUtilityClass("MuiListItemSecondaryAction",t)}generateUtilityClasses("MuiListItemSecondaryAction",["root","disableGutters"]);const _excluded$4=["className"],useUtilityClasses$3=t=>{const{disableGutters:e,classes:i}=t;return composeClasses({root:["root",e&&"disableGutters"]},getListItemSecondaryActionClassesUtilityClass,i)},ListItemSecondaryActionRoot=styled("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,i.disableGutters&&e.disableGutters]}})(({ownerState:t})=>_extends({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),ListItemSecondaryAction=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=n,S=_objectWithoutPropertiesLoose$1(n,_excluded$4),C=reactExports.useContext(ListContext),N=_extends({},n,{disableGutters:C.disableGutters}),v=useUtilityClasses$3(N);return jsxRuntimeExports.jsx(ListItemSecondaryActionRoot,_extends({className:clsx(v.root,r),ownerState:N,ref:i},S))});ListItemSecondaryAction.muiName="ListItemSecondaryAction";const _excluded$3=["className"],_excluded2$2=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],overridesResolver=(t,e)=>{const{ownerState:i}=t;return[e.root,i.dense&&e.dense,i.alignItems==="flex-start"&&e.alignItemsFlexStart,i.divider&&e.divider,!i.disableGutters&&e.gutters,!i.disablePadding&&e.padding,i.button&&e.button,i.hasSecondaryAction&&e.secondaryAction]},useUtilityClasses$2=t=>{const{alignItems:e,button:i,classes:n,dense:r,disabled:S,disableGutters:C,disablePadding:N,divider:v,hasSecondaryAction:b,selected:p}=t;return composeClasses({root:["root",r&&"dense",!C&&"gutters",!N&&"padding",v&&"divider",S&&"disabled",i&&"button",e==="flex-start"&&"alignItemsFlexStart",b&&"secondaryAction",p&&"selected"],container:["container"]},getListItemUtilityClass,n)},ListItemRoot=styled("div",{name:"MuiListItem",slot:"Root",overridesResolver})(({theme:t,ownerState:e})=>_extends({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&_extends({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${listItemButtonClasses.root}`]:{paddingRight:48}},{[`&.${listItemClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${listItemClasses.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha_1(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${listItemClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${listItemClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${listItemClasses.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha_1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha_1(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),ListItemContainer=styled("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),ListItem=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:S=!1,button:C=!1,children:N,className:v,component:b,components:p={},componentsProps:k={},ContainerComponent:I="li",ContainerProps:{className:A}={},dense:g=!1,disabled:w=!1,disableGutters:y=!1,disablePadding:h=!1,divider:x=!1,focusVisibleClassName:F,secondaryAction:E,selected:o=!1,slotProps:f={},slots:a={}}=n,u=_objectWithoutPropertiesLoose$1(n.ContainerProps,_excluded$3),m=_objectWithoutPropertiesLoose$1(n,_excluded2$2),j=reactExports.useContext(ListContext),d=reactExports.useMemo(()=>({dense:g||j.dense||!1,alignItems:r,disableGutters:y}),[r,j.dense,g,y]),T=reactExports.useRef(null);useEnhancedEffect(()=>{S&&T.current&&T.current.focus()},[S]);const L=reactExports.Children.toArray(N),K=L.length&&isMuiElement(L[L.length-1],["ListItemSecondaryAction"]),G=_extends({},n,{alignItems:r,autoFocus:S,button:C,dense:d.dense,disabled:w,disableGutters:y,disablePadding:h,divider:x,hasSecondaryAction:K,selected:o}),Y=useUtilityClasses$2(G),V=useForkRef(T,i),st=a.root||p.Root||ListItemRoot,D=f.root||k.root||{},X=_extends({className:clsx(Y.root,D.className,v),disabled:w},m);let it=b||"li";return C&&(X.component=b||"div",X.focusVisibleClassName=clsx(listItemClasses.focusVisible,F),it=ButtonBase),K?(it=!X.component&&!b?"div":it,I==="li"&&(it==="li"?it="div":X.component==="li"&&(X.component="div")),jsxRuntimeExports.jsx(ListContext.Provider,{value:d,children:jsxRuntimeExports.jsxs(ListItemContainer,_extends({as:I,className:clsx(Y.container,A),ref:V,ownerState:G},u,{children:[jsxRuntimeExports.jsx(st,_extends({},D,!isHostComponent(st)&&{as:it,ownerState:_extends({},G,D.ownerState)},X,{children:L})),L.pop()]}))})):jsxRuntimeExports.jsx(ListContext.Provider,{value:d,children:jsxRuntimeExports.jsxs(st,_extends({},D,{as:it,ref:V},!isHostComponent(st)&&{ownerState:_extends({},G,D.ownerState)},X,{children:[L,E&&jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:E})]}))})});function useSnackbar(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:i=!1,onClose:n,open:r,resumeHideDuration:S}=t,C=useTimeout();reactExports.useEffect(()=>{if(!r)return;function h(x){x.defaultPrevented||(x.key==="Escape"||x.key==="Esc")&&(n==null||n(x,"escapeKeyDown"))}return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[r,n]);const N=useEventCallback((h,x)=>{n==null||n(h,x)}),v=useEventCallback(h=>{!n||h==null||C.start(h,()=>{N(null,"timeout")})});reactExports.useEffect(()=>(r&&v(e),C.clear),[r,e,v,C]);const b=h=>{n==null||n(h,"clickaway")},p=C.clear,k=reactExports.useCallback(()=>{e!=null&&v(S??e*.5)},[e,S,v]),I=h=>x=>{const F=h.onBlur;F==null||F(x),k()},A=h=>x=>{const F=h.onFocus;F==null||F(x),p()},g=h=>x=>{const F=h.onMouseEnter;F==null||F(x),p()},w=h=>x=>{const F=h.onMouseLeave;F==null||F(x),k()};return reactExports.useEffect(()=>{if(!i&&r)return window.addEventListener("focus",k),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",k),window.removeEventListener("blur",p)}},[i,r,k,p]),{getRootProps:(h={})=>{const x=_extends({},extractEventHandlers(t),extractEventHandlers(h));return _extends({role:"presentation"},h,x,{onBlur:I(x),onFocus:A(x),onMouseEnter:g(x),onMouseLeave:w(x)})},onClickAway:b}}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$2=["action","className","message","role"],useUtilityClasses$1=t=>{const{classes:e}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,e)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,i=emphasize_1(t.palette.background.default,e);return _extends({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(i),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:i,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiSnackbarContent"}),{action:r,className:S,message:C,role:N="alert"}=n,v=_objectWithoutPropertiesLoose$1(n,_excluded$2),b=n,p=useUtilityClasses$1(b);return jsxRuntimeExports.jsxs(SnackbarContentRoot,_extends({role:N,square:!0,elevation:6,className:clsx(p.root,S),ownerState:b,ref:i},v,{children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:p.message,ownerState:b,children:C}),r?jsxRuntimeExports.jsx(SnackbarContentAction,{className:p.action,ownerState:b,children:r}):null]}))});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded$1=["onEnter","onExited"],_excluded2$1=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses=t=>{const{classes:e,anchorOrigin:i}=t,n={root:["root",`anchorOrigin${capitalize(i.vertical)}${capitalize(i.horizontal)}`]};return composeClasses(n,getSnackbarUtilityClass,e)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,e[`anchorOrigin${capitalize(i.anchorOrigin.vertical)}${capitalize(i.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const i={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:_extends({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&i,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(e,i){const n=useDefaultProps({props:e,name:"MuiSnackbar"}),r=useTheme$1(),S={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:C,anchorOrigin:{vertical:N,horizontal:v}={vertical:"bottom",horizontal:"left"},autoHideDuration:b=null,children:p,className:k,ClickAwayListenerProps:I,ContentProps:A,disableWindowBlurListener:g=!1,message:w,open:y,TransitionComponent:h=Grow,transitionDuration:x=S,TransitionProps:{onEnter:F,onExited:E}={}}=n,o=_objectWithoutPropertiesLoose$1(n.TransitionProps,_excluded$1),f=_objectWithoutPropertiesLoose$1(n,_excluded2$1),a=_extends({},n,{anchorOrigin:{vertical:N,horizontal:v},autoHideDuration:b,disableWindowBlurListener:g,TransitionComponent:h,transitionDuration:x}),u=useUtilityClasses(a),{getRootProps:m,onClickAway:j}=useSnackbar(_extends({},a)),[d,T]=reactExports.useState(!0),L=useSlotProps({elementType:SnackbarRoot,getSlotProps:m,externalForwardedProps:f,ownerState:a,additionalProps:{ref:i},className:[u.root,k]}),K=Y=>{T(!0),E&&E(Y)},G=(Y,V)=>{T(!1),F&&F(Y,V)};return!y&&d?null:jsxRuntimeExports.jsx(ClickAwayListener,_extends({onClickAway:j},I,{children:jsxRuntimeExports.jsx(SnackbarRoot,_extends({},L,{children:jsxRuntimeExports.jsx(h,_extends({appear:!0,in:y,timeout:x,direction:N==="top"?"down":"up",onEnter:G,onExited:K},o,{children:p||jsxRuntimeExports.jsx(SnackbarContent,_extends({message:w,action:C},A))}))}))}))});var CloudUpload={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1$6=CloudUpload.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=CloudUpload.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var MenuBook={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(MenuBook,"__esModule",{value:!0});var default_1$5=MenuBook.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=MenuBook.default=(0,_createSvgIcon$5.default)([(0,_jsxRuntime$5.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,_jsxRuntime$5.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var Preview={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(Preview,"__esModule",{value:!0});var default_1$4=Preview.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=Preview.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var _Error={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(_Error,"__esModule",{value:!0});var default_1$3=_Error.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=_Error.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");var CheckCircle={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(CheckCircle,"__esModule",{value:!0});var default_1$2=CheckCircle.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=CheckCircle.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,i){module.exports=e.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var qt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=D,e.bytesToString=pt,e.createValidAbsoluteUrl=it,e.getModificationDate=Ct,e.getUuid=Mt,e.getVerbosityLevel=G,e.info=Y,e.isArrayBuffer=q,e.isArrayEqual=wt,e.isNodeJS=void 0,e.normalizeUnicode=Dt,e.objectFromMap=yt,e.objectSize=vt,e.setVerbosityLevel=K,e.shadow=M,e.string32=bt,e.stringToBytes=ft,e.stringToPDFString=gt,e.stringToUTF8String=St,e.unreachable=st,e.utf8StringToString=rt,e.warn=V;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=i;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const r=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=r;const S=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=S;const C=1.35;e.LINE_FACTOR=C;const N=.35;e.LINE_DESCENT_FACTOR=N;const v=N/C;e.BASELINE_FACTOR=v;const b={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=b;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=p;const k="pdfjs_internal_editor_";e.AnnotationEditorPrefix=k;const I={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=I;const A={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=A;const g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=g;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=w;const y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=y;const h={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=h;const x={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=x;const F={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=F;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=E;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=o;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=f;const a={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=a;const u={O:"PageOpen",C:"PageClose"};e.PageActionEventType=u;const m={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=m;const j={NONE:0,BINARY:1};e.CMapCompressionType=j;const d={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=d;const T={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=T;let L=m.WARNINGS;function K(At){Number.isInteger(At)&&(L=At)}function G(){return L}function Y(At){L>=m.INFOS&&console.log(`Info: ${At}`)}function V(At){L>=m.WARNINGS&&console.log(`Warning: ${At}`)}function st(At){throw new Error(At)}function D(At,lt){At||st(lt)}function X(At){switch(At==null?void 0:At.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function it(At,lt=null,dt=null){if(!At)return null;try{if(dt&&typeof At=="string"){if(dt.addDefaultProtocol&&At.startsWith("www.")){const Xt=At.match(/\./g);(Xt==null?void 0:Xt.length)>=2&&(At=`http://${At}`)}if(dt.tryConvertEncoding)try{At=St(At)}catch{}}const kt=lt?new URL(At,lt):new URL(At);if(X(kt))return kt}catch{}return null}function M(At,lt,dt,kt=!1){return Object.defineProperty(At,lt,{value:dt,enumerable:!kt,configurable:!0,writable:!1}),dt}const l=function(){function lt(dt,kt){this.constructor===lt&&st("Cannot initialize BaseException."),this.message=dt,this.name=kt}return lt.prototype=new Error,lt.constructor=lt,lt}();e.BaseException=l;class c extends l{constructor(lt,dt){super(lt,"PasswordException"),this.code=dt}}e.PasswordException=c;class P extends l{constructor(lt,dt){super(lt,"UnknownErrorException"),this.details=dt}}e.UnknownErrorException=P;class $ extends l{constructor(lt){super(lt,"InvalidPDFException")}}e.InvalidPDFException=$;class B extends l{constructor(lt){super(lt,"MissingPDFException")}}e.MissingPDFException=B;class W extends l{constructor(lt,dt){super(lt,"UnexpectedResponseException"),this.status=dt}}e.UnexpectedResponseException=W;class Q extends l{constructor(lt){super(lt,"FormatError")}}e.FormatError=Q;class at extends l{constructor(lt){super(lt,"AbortException")}}e.AbortException=at;function pt(At){(typeof At!="object"||(At==null?void 0:At.length)===void 0)&&st("Invalid argument for bytesToString");const lt=At.length,dt=8192;if(lt<dt)return String.fromCharCode.apply(null,At);const kt=[];for(let Xt=0;Xt<lt;Xt+=dt){const Kt=Math.min(Xt+dt,lt),H=At.subarray(Xt,Kt);kt.push(String.fromCharCode.apply(null,H))}return kt.join("")}function ft(At){typeof At!="string"&&st("Invalid argument for stringToBytes");const lt=At.length,dt=new Uint8Array(lt);for(let kt=0;kt<lt;++kt)dt[kt]=At.charCodeAt(kt)&255;return dt}function bt(At){return String.fromCharCode(At>>24&255,At>>16&255,At>>8&255,At&255)}function vt(At){return Object.keys(At).length}function yt(At){const lt=Object.create(null);for(const[dt,kt]of At)lt[dt]=kt;return lt}function et(){const At=new Uint8Array(4);return At[0]=1,new Uint32Array(At.buffer,0,1)[0]===1}function tt(){try{return new Function(""),!0}catch{return!1}}class R{static get isLittleEndian(){return M(this,"isLittleEndian",et())}static get isEvalSupported(){return M(this,"isEvalSupported",tt())}static get isOffscreenCanvasSupported(){return M(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?M(this,"platform",{isWin:!1,isMac:!1}):M(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var lt,dt;return M(this,"isCSSRoundSupported",(dt=(lt=globalThis.CSS)==null?void 0:lt.supports)==null?void 0:dt.call(lt,"width: round(1.5px, 1px)"))}}e.FeatureTest=R;const U=[...Array(256).keys()].map(At=>At.toString(16).padStart(2,"0"));class Z{static makeHexColor(lt,dt,kt){return`#${U[lt]}${U[dt]}${U[kt]}`}static scaleMinMax(lt,dt){let kt;lt[0]?(lt[0]<0&&(kt=dt[0],dt[0]=dt[1],dt[1]=kt),dt[0]*=lt[0],dt[1]*=lt[0],lt[3]<0&&(kt=dt[2],dt[2]=dt[3],dt[3]=kt),dt[2]*=lt[3],dt[3]*=lt[3]):(kt=dt[0],dt[0]=dt[2],dt[2]=kt,kt=dt[1],dt[1]=dt[3],dt[3]=kt,lt[1]<0&&(kt=dt[2],dt[2]=dt[3],dt[3]=kt),dt[2]*=lt[1],dt[3]*=lt[1],lt[2]<0&&(kt=dt[0],dt[0]=dt[1],dt[1]=kt),dt[0]*=lt[2],dt[1]*=lt[2]),dt[0]+=lt[4],dt[1]+=lt[4],dt[2]+=lt[5],dt[3]+=lt[5]}static transform(lt,dt){return[lt[0]*dt[0]+lt[2]*dt[1],lt[1]*dt[0]+lt[3]*dt[1],lt[0]*dt[2]+lt[2]*dt[3],lt[1]*dt[2]+lt[3]*dt[3],lt[0]*dt[4]+lt[2]*dt[5]+lt[4],lt[1]*dt[4]+lt[3]*dt[5]+lt[5]]}static applyTransform(lt,dt){const kt=lt[0]*dt[0]+lt[1]*dt[2]+dt[4],Xt=lt[0]*dt[1]+lt[1]*dt[3]+dt[5];return[kt,Xt]}static applyInverseTransform(lt,dt){const kt=dt[0]*dt[3]-dt[1]*dt[2],Xt=(lt[0]*dt[3]-lt[1]*dt[2]+dt[2]*dt[5]-dt[4]*dt[3])/kt,Kt=(-lt[0]*dt[1]+lt[1]*dt[0]+dt[4]*dt[1]-dt[5]*dt[0])/kt;return[Xt,Kt]}static getAxialAlignedBoundingBox(lt,dt){const kt=this.applyTransform(lt,dt),Xt=this.applyTransform(lt.slice(2,4),dt),Kt=this.applyTransform([lt[0],lt[3]],dt),H=this.applyTransform([lt[2],lt[1]],dt);return[Math.min(kt[0],Xt[0],Kt[0],H[0]),Math.min(kt[1],Xt[1],Kt[1],H[1]),Math.max(kt[0],Xt[0],Kt[0],H[0]),Math.max(kt[1],Xt[1],Kt[1],H[1])]}static inverseTransform(lt){const dt=lt[0]*lt[3]-lt[1]*lt[2];return[lt[3]/dt,-lt[1]/dt,-lt[2]/dt,lt[0]/dt,(lt[2]*lt[5]-lt[4]*lt[3])/dt,(lt[4]*lt[1]-lt[5]*lt[0])/dt]}static singularValueDecompose2dScale(lt){const dt=[lt[0],lt[2],lt[1],lt[3]],kt=lt[0]*dt[0]+lt[1]*dt[2],Xt=lt[0]*dt[1]+lt[1]*dt[3],Kt=lt[2]*dt[0]+lt[3]*dt[2],H=lt[2]*dt[1]+lt[3]*dt[3],xt=(kt+H)/2,Tt=Math.sqrt((kt+H)**2-4*(kt*H-Kt*Xt))/2,Ot=xt+Tt||1,Nt=xt-Tt||1;return[Math.sqrt(Ot),Math.sqrt(Nt)]}static normalizeRect(lt){const dt=lt.slice(0);return lt[0]>lt[2]&&(dt[0]=lt[2],dt[2]=lt[0]),lt[1]>lt[3]&&(dt[1]=lt[3],dt[3]=lt[1]),dt}static intersect(lt,dt){const kt=Math.max(Math.min(lt[0],lt[2]),Math.min(dt[0],dt[2])),Xt=Math.min(Math.max(lt[0],lt[2]),Math.max(dt[0],dt[2]));if(kt>Xt)return null;const Kt=Math.max(Math.min(lt[1],lt[3]),Math.min(dt[1],dt[3])),H=Math.min(Math.max(lt[1],lt[3]),Math.max(dt[1],dt[3]));return Kt>H?null:[kt,Kt,Xt,H]}static bezierBoundingBox(lt,dt,kt,Xt,Kt,H,xt,Tt){const Ot=[],Nt=[[],[]];let Ft,z,O,J,ht,mt,Et,Pt;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(z=6*lt-12*kt+6*Kt,Ft=-3*lt+9*kt-9*Kt+3*xt,O=3*kt-3*lt):(z=6*dt-12*Xt+6*H,Ft=-3*dt+9*Xt-9*H+3*Tt,O=3*Xt-3*dt),Math.abs(Ft)<1e-12){if(Math.abs(z)<1e-12)continue;J=-O/z,0<J&&J<1&&Ot.push(J);continue}Et=z*z-4*O*Ft,Pt=Math.sqrt(Et),!(Et<0)&&(ht=(-z+Pt)/(2*Ft),0<ht&&ht<1&&Ot.push(ht),mt=(-z-Pt)/(2*Ft),0<mt&&mt<1&&Ot.push(mt))}let jt=Ot.length,It;const Rt=jt;for(;jt--;)J=Ot[jt],It=1-J,Nt[0][jt]=It*It*It*lt+3*It*It*J*kt+3*It*J*J*Kt+J*J*J*xt,Nt[1][jt]=It*It*It*dt+3*It*It*J*Xt+3*It*J*J*H+J*J*J*Tt;return Nt[0][Rt]=lt,Nt[1][Rt]=dt,Nt[0][Rt+1]=xt,Nt[1][Rt+1]=Tt,Nt[0].length=Nt[1].length=Rt+2,[Math.min(...Nt[0]),Math.min(...Nt[1]),Math.max(...Nt[0]),Math.max(...Nt[1])]}}e.Util=Z;const ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(At){if(At[0]>="ï"){let dt;if(At[0]==="þ"&&At[1]==="ÿ"?dt="utf-16be":At[0]==="ÿ"&&At[1]==="þ"?dt="utf-16le":At[0]==="ï"&&At[1]==="»"&&At[2]==="¿"&&(dt="utf-8"),dt)try{const kt=new TextDecoder(dt,{fatal:!0}),Xt=ft(At);return kt.decode(Xt)}catch(kt){V(`stringToPDFString: "${kt}".`)}}const lt=[];for(let dt=0,kt=At.length;dt<kt;dt++){const Xt=ot[At.charCodeAt(dt)];lt.push(Xt?String.fromCharCode(Xt):At.charAt(dt))}return lt.join("")}function St(At){return decodeURIComponent(escape(At))}function rt(At){return unescape(encodeURIComponent(At))}function q(At){return typeof At=="object"&&(At==null?void 0:At.byteLength)!==void 0}function wt(At,lt){if(At.length!==lt.length)return!1;for(let dt=0,kt=At.length;dt<kt;dt++)if(At[dt]!==lt[dt])return!1;return!0}function Ct(At=new Date){return[At.getUTCFullYear().toString(),(At.getUTCMonth()+1).toString().padStart(2,"0"),At.getUTCDate().toString().padStart(2,"0"),At.getUTCHours().toString().padStart(2,"0"),At.getUTCMinutes().toString().padStart(2,"0"),At.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){ct(this,qt,!1);this.promise=new Promise((lt,dt)=>{this.resolve=kt=>{ut(this,qt,!0),lt(kt)},this.reject=kt=>{ut(this,qt,!0),dt(kt)}})}get settled(){return s(this,qt)}}qt=new WeakMap,e.PromiseCapability=Bt;let zt=null,Wt=null;function Dt(At){return zt||(zt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wt=new Map([["ﬅ","ſt"]])),At.replaceAll(zt,(lt,dt,kt)=>dt?dt.normalize("NFKC"):Wt.get(kt))}function Mt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const At=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(At);else for(let lt=0;lt<32;lt++)At[lt]=Math.floor(Math.random()*255);return pt(At)}const Gt="pdfjs_internal_id_";e.AnnotationPrefix=Gt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,i,n,r,oe,ye,N,v,b,p,k,I,A,g,w,_e,h,x,Le,E,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(a){if(typeof a=="string"||a instanceof URL?a={url:a}:(0,_util.isArrayBuffer)(a)&&(a={data:a}),typeof a!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!a.url&&!a.data&&!a.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const u=new PDFDocumentLoadingTask,{docId:m}=u,j=a.url?getUrlProp(a.url):null,d=a.data?getDataProp(a.data):null,T=a.httpHeaders||null,L=a.withCredentials===!0,K=a.password??null,G=a.range instanceof PDFDataRangeTransport?a.range:null,Y=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=a.worker instanceof PDFWorker?a.worker:null;const st=a.verbosity,D=typeof a.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(a.docBaseUrl)?a.docBaseUrl:null,X=typeof a.cMapUrl=="string"?a.cMapUrl:null,it=a.cMapPacked!==!1,M=a.CMapReaderFactory||DefaultCMapReaderFactory,l=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,c=a.StandardFontDataFactory||DefaultStandardFontDataFactory,P=a.stopAtErrors!==!0,$=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,B=a.isEvalSupported!==!1,W=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!_util.isNodeJS,Q=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,at=typeof a.disableFontFace=="boolean"?a.disableFontFace:_util.isNodeJS,pt=a.fontExtraProperties===!0,ft=a.enableXfa===!0,bt=a.ownerDocument||globalThis.document,vt=a.disableRange===!0,yt=a.disableStream===!0,et=a.disableAutoFetch===!0,tt=a.pdfBug===!0,R=G?G.length:a.length??NaN,U=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!_util.isNodeJS&&!at,Z=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:M===_display_utils.DOMCMapReaderFactory&&c===_display_utils.DOMStandardFontDataFactory&&X&&l&&(0,_display_utils.isValidFetchUrl)(X,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(l,document.baseURI),ot=a.canvasFactory||new DefaultCanvasFactory({ownerDocument:bt}),gt=a.filterFactory||new DefaultFilterFactory({docId:m,ownerDocument:bt}),St=null;(0,_util.setVerbosityLevel)(st);const rt={canvasFactory:ot,filterFactory:gt};if(Z||(rt.cMapReaderFactory=new M({baseUrl:X,isCompressed:it}),rt.standardFontDataFactory=new c({baseUrl:l})),!V){const Ct={verbosity:st,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ct.port?PDFWorker.fromPort(Ct):new PDFWorker(Ct),u._worker=V}const q={docId:m,apiVersion:"3.11.174",data:d,password:K,disableAutoFetch:et,rangeChunkSize:Y,length:R,docBaseUrl:D,enableXfa:ft,evaluatorOptions:{maxImageSize:$,disableFontFace:at,ignoreErrors:P,isEvalSupported:B,isOffscreenCanvasSupported:W,canvasMaxAreaInBytes:Q,fontExtraProperties:pt,useSystemFonts:U,cMapUrl:Z?X:null,standardFontDataUrl:Z?l:null}},wt={ignoreErrors:P,isEvalSupported:B,disableFontFace:at,fontExtraProperties:pt,enableXfa:ft,ownerDocument:bt,disableAutoFetch:et,pdfBug:tt,styleElement:St};return V.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const Ct=_fetchDocument(V,q),Bt=new Promise(function(zt){let Wt;G?Wt=new _transport_stream.PDFDataTransportStream({length:R,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:vt,disableStream:yt},G):d||(Wt=(Mt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Mt):(0,_display_utils.isValidFetchUrl)(Mt.url)?new _displayFetch_stream.PDFFetchStream(Mt):new _displayNetwork.PDFNetworkStream(Mt))({url:j,length:R,httpHeaders:T,withCredentials:L,rangeChunkSize:Y,disableRange:vt,disableStream:yt})),zt(Wt)});return Promise.all([Ct,Bt]).then(function([zt,Wt]){if(u.destroyed)throw new Error("Loading aborted");const Dt=new _message_handler.MessageHandler(m,zt,V.port),Mt=new WorkerTransport(Dt,u,Wt,wt,rt);u._transport=Mt,Dt.send("Ready",null)})}).catch(u._capability.reject),u}async function _fetchDocument(a,u){if(a.destroyed)throw new Error("Worker was destroyed");const m=await a.messageHandler.sendWithPromise("GetDocRequest",u,u.data?[u.data.buffer]:null);if(a.destroyed)throw new Error("Worker was destroyed");return m}function getUrlProp(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(_util.isNodeJS&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(a){if(_util.isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return(0,_util.stringToBytes)(a);if(typeof a=="object"&&!isNaN(a==null?void 0:a.length)||(0,_util.isArrayBuffer)(a))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${pe(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var u,m,j;this.destroyed=!0;try{(u=this._worker)!=null&&u.port&&(this._worker._pendingDestroy=!0),await((m=this._transport)==null?void 0:m.destroy())}catch(d){throw(j=this._worker)!=null&&j.port&&delete this._worker._pendingDestroy,d}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,ct(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,m,j=!1,d=null){this.length=u,this.initialData=m,this.progressiveDone=j,this.contentDispositionFilename=d,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,m){for(const j of this._rangeListeners)j(u,m)}onDataProgress(u,m){this._readyCapability.promise.then(()=>{for(const j of this._progressListeners)j(u,m)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const m of this._progressiveReadListeners)m(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,m){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,m){this._pdfInfo=u,this._transport=m,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(j=>{if(!j)return j;const d=[];for(const T in j)d.push(...j[T]);return d}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(u,m,j,d=!1){ct(this,r);ct(this,i,null);ct(this,n,!1);this._pageIndex=u,this._pageInfo=m,this._transport=j,this._stats=d?new _display_utils.StatTimer:null,this._pdfBug=d,this.commonObjs=j.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:m=this.rotate,offsetX:j=0,offsetY:d=0,dontFlip:T=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:m,offsetX:j,offsetY:d,dontFlip:T})}getAnnotations({intent:u="display"}={}){const m=this._transport.getRenderingIntent(u);return this._transport.getAnnotations(this._pageIndex,m.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var u;return((u=this._transport._htmlForXfa)==null?void 0:u.children[this._pageIndex])||null}render({canvasContext:u,viewport:m,intent:j="display",annotationMode:d=_util.AnnotationMode.ENABLE,transform:T=null,background:L=null,optionalContentConfigPromise:K=null,annotationCanvasMap:G=null,pageColors:Y=null,printAnnotationStorage:V=null}){var c,P;(c=this._stats)==null||c.time("Overall");const st=this._transport.getRenderingIntent(j,d,V);ut(this,n,!1),nt(this,r,ye).call(this),K||(K=this._transport.getOptionalContentConfig());let D=this._intentStates.get(st.cacheKey);D||(D=Object.create(null),this._intentStates.set(st.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const X=!!(st.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=new _util.PromiseCapability,D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(st));const it=$=>{var B,W;D.renderTasks.delete(M),(this._maybeCleanupAfterRender||X)&&ut(this,n,!0),nt(this,r,oe).call(this,!X),$?(M.capability.reject($),this._abortOperatorList({intentState:D,reason:$ instanceof Error?$:new Error($)})):M.capability.resolve(),(B=this._stats)==null||B.timeEnd("Rendering"),(W=this._stats)==null||W.timeEnd("Overall")},M=new InternalRenderTask({callback:it,params:{canvasContext:u,viewport:m,transform:T,background:L},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:Y});(D.renderTasks||(D.renderTasks=new Set)).add(M);const l=M.task;return Promise.all([D.displayReadyCapability.promise,K]).then(([$,B])=>{var W;if(this.destroyed){it();return}(W=this._stats)==null||W.time("Rendering"),M.initializeGraphics({transparency:$,optionalContentConfig:B}),M.operatorListChanged()}).catch(it),l}getOperatorList({intent:u="display",annotationMode:m=_util.AnnotationMode.ENABLE,printAnnotationStorage:j=null}={}){var G;function d(){L.operatorList.lastChunk&&(L.opListReadCapability.resolve(L.operatorList),L.renderTasks.delete(K))}const T=this._transport.getRenderingIntent(u,m,j,!0);let L=this._intentStates.get(T.cacheKey);L||(L=Object.create(null),this._intentStates.set(T.cacheKey,L));let K;return L.opListReadCapability||(K=Object.create(null),K.operatorListChanged=d,L.opListReadCapability=new _util.PromiseCapability,(L.renderTasks||(L.renderTasks=new Set)).add(K),L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(T)),L.opListReadCapability.promise}streamTextContent({includeMarkedContent:u=!1,disableNormalization:m=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:u===!0,disableNormalization:m===!0},{highWaterMark:100,size(d){return d.items.length}})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(j=>_xfa_text.XfaText.textContent(j));const m=this.streamTextContent(u);return new Promise(function(j,d){function T(){L.read().then(function({value:G,done:Y}){if(Y){j(K);return}Object.assign(K.styles,G.styles),K.items.push(...G.items),T()},d)}const L=m.getReader(),K={items:[],styles:Object.create(null)};T()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const m of this._intentStates.values())if(this._abortOperatorList({intentState:m,reason:new Error("Page was destroyed."),force:!0}),!m.opListReadCapability)for(const j of m.renderTasks)u.push(j.completed),j.cancel();return this.objs.clear(),ut(this,n,!1),nt(this,r,ye).call(this),Promise.all(u)}cleanup(u=!1){ut(this,n,!0);const m=nt(this,r,oe).call(this,!1);return u&&m&&this._stats&&(this._stats=new _display_utils.StatTimer),m}_startRenderPage(u,m){var d,T;const j=this._intentStates.get(m);j&&((d=this._stats)==null||d.timeEnd("Page Request"),(T=j.displayReadyCapability)==null||T.resolve(u))}_renderPageChunk(u,m){for(let j=0,d=u.length;j<d;j++)m.operatorList.fnArray.push(u.fnArray[j]),m.operatorList.argsArray.push(u.argsArray[j]);m.operatorList.lastChunk=u.lastChunk,m.operatorList.separateAnnots=u.separateAnnots;for(const j of m.renderTasks)j.operatorListChanged();u.lastChunk&&nt(this,r,oe).call(this,!0)}_pumpOperatorList({renderingIntent:u,cacheKey:m,annotationStorageSerializable:j}){const{map:d,transfers:T}=j,K=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:m,annotationStorage:d},T).getReader(),G=this._intentStates.get(m);G.streamReader=K;const Y=()=>{K.read().then(({value:V,done:st})=>{if(st){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,G),Y())},V=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const st of G.renderTasks)st.operatorListChanged();nt(this,r,oe).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(V);else if(G.opListReadCapability)G.opListReadCapability.reject(V);else throw V}})};Y()}_abortOperatorList({intentState:u,reason:m,force:j=!1}){if(u.streamReader){if(u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null),!j){if(u.renderTasks.size>0)return;if(m instanceof _display_utils.RenderingCancelledException){let d=RENDERING_CANCELLED_TIMEOUT;m.extraDelay>0&&m.extraDelay<1e3&&(d+=m.extraDelay),u.streamReaderCancelTimeout=setTimeout(()=>{u.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:u,reason:m,force:!0})},d);return}}if(u.streamReader.cancel(new _util.AbortException(m.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[d,T]of this._intentStates)if(T===u){this._intentStates.delete(d);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,n=new WeakMap,r=new WeakSet,oe=function(u=!1){if(nt(this,r,ye).call(this),!s(this,n)||this.destroyed)return!1;if(u)return ut(this,i,setTimeout(()=>{ut(this,i,null),nt(this,r,oe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:m,operatorList:j}of this._intentStates.values())if(m.size>0||!j.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ut(this,n,!1),!0},ye=function(){s(this,i)&&(clearTimeout(s(this,i)),ut(this,i,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ct(this,N,new Set);ct(this,v,Promise.resolve())}postMessage(u,m){const j={data:structuredClone(u,m?{transfer:m}:null)};s(this,v).then(()=>{for(const d of s(this,N))d.call(this,j)})}addEventListener(u,m){s(this,N).add(m)}removeEventListener(u,m){s(this,N).delete(m)}terminate(){s(this,N).clear()}}N=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const a=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;a&&(PDFWorkerUtil.fallbackWorkerSrc=a.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,u){let m;try{if(m=new URL(a),!m.origin||m.origin==="null")return!1}catch{return!1}const j=new URL(u,m);return m.origin===j.origin},PDFWorkerUtil.createCDNWrapper=function(a){const u=`importScripts("${a}");`;return URL.createObjectURL(new Blob([u]))}}const _PDFWorker=class _PDFWorker{constructor({name:a=null,port:u=null,verbosity:m=(0,_util.getVerbosityLevel)()}={}){var j;if(this.name=a,this.destroyed=!1,this.verbosity=m,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,u){if((j=s(_PDFWorker,p))!=null&&j.has(u))throw new Error("Cannot use more than one PDFWorker per port.");(s(_PDFWorker,p)||ut(_PDFWorker,p,new WeakMap)).set(u,this),this._initializeFromPort(u);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));const u=new Worker(a),m=new _message_handler.MessageHandler("main","worker",u),j=()=>{u.removeEventListener("error",d),m.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},d=()=>{this._webWorker||j()};u.addEventListener("error",d),m.on("test",L=>{if(u.removeEventListener("error",d),this.destroyed){j();return}L?(this._messageHandler=m,this._port=u,this._webWorker=u,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),m.destroy(),u.terminate())}),m.on("ready",L=>{if(u.removeEventListener("error",d),this.destroyed){j();return}try{T()}catch{this._setupFakeWorker()}});const T=()=>{const L=new Uint8Array;m.send("test",L,[L.buffer])};T();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const u=new LoopbackPort;this._port=u;const m=`fake${PDFWorkerUtil.fakeWorkerId++}`,j=new _message_handler.MessageHandler(m+"_worker",m,u);a.setup(j,u);const d=new _message_handler.MessageHandler(m,m+"_worker",u);this._messageHandler=d,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){var a;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(a=s(_PDFWorker,p))==null||a.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){var m;if(!(a!=null&&a.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const u=(m=s(this,p))==null?void 0:m.get(a.port);if(u){if(u._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return u}return new _PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var a;try{return((a=globalThis.pdfjsWorker)==null?void 0:a.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};p=new WeakMap,ct(_PDFWorker,p);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(u,m,j,d,T){ct(this,w);ct(this,k,new Map);ct(this,I,new Map);ct(this,A,new Map);ct(this,g,null);this.messageHandler=u,this.loadingTask=m,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:d.ownerDocument,styleElement:d.styleElement}),this._params=d,this.canvasFactory=T.canvasFactory,this.filterFactory=T.filterFactory,this.cMapReaderFactory=T.cMapReaderFactory,this.standardFontDataFactory=T.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=j,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(u,m=_util.AnnotationMode.ENABLE,j=null,d=!1){let T=_util.RenderingIntentFlag.DISPLAY,L=_annotation_storage.SerializableEmpty;switch(u){case"any":T=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":T=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(m){case _util.AnnotationMode.DISABLE:T+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:T+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:T+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,L=(T&_util.RenderingIntentFlag.PRINT&&j instanceof _annotation_storage.PrintAnnotationStorage?j:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${m}`)}return d&&(T+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:T,cacheKey:`${T}_${L.hash}`,annotationStorageSerializable:L}}destroy(){var j;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(j=s(this,g))==null||j.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const d of s(this,I).values())u.push(d._destroy());s(this,I).clear(),s(this,A).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const m=this.messageHandler.sendWithPromise("Terminate",null);return u.push(m),Promise.all(u).then(()=>{var d;this.commonObjs.clear(),this.fontLoader.clear(),s(this,k).clear(),this.filterFactory.destroy(),(d=this._networkStream)==null||d.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:m}=this;u.on("GetReader",(j,d)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=T=>{this._lastProgress={loaded:T.loaded,total:T.total}},d.onPull=()=>{this._fullReader.read().then(function({value:T,done:L}){if(L){d.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{d.error(T)})},d.onCancel=T=>{this._fullReader.cancel(T),d.ready.catch(L=>{if(!this.destroyed)throw L})}}),u.on("ReaderHeadersReady",j=>{const d=new _util.PromiseCapability,T=this._fullReader;return T.headersReady.then(()=>{var L;(!T.isStreamingSupported||!T.isRangeSupported)&&(this._lastProgress&&((L=m.onProgress)==null||L.call(m,this._lastProgress)),T.onProgress=K=>{var G;(G=m.onProgress)==null||G.call(m,{loaded:K.loaded,total:K.total})}),d.resolve({isStreamingSupported:T.isStreamingSupported,isRangeSupported:T.isRangeSupported,contentLength:T.contentLength})},d.reject),d.promise}),u.on("GetRangeReader",(j,d)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const T=this._networkStream.getRangeReader(j.begin,j.end);if(!T){d.close();return}d.onPull=()=>{T.read().then(function({value:L,done:K}){if(K){d.close();return}(0,_util.assert)(L instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(L),1,[L])}).catch(L=>{d.error(L)})},d.onCancel=L=>{T.cancel(L),d.ready.catch(K=>{if(!this.destroyed)throw K})}}),u.on("GetDoc",({pdfInfo:j})=>{this._numPages=j.numPages,this._htmlForXfa=j.htmlForXfa,delete j.htmlForXfa,m._capability.resolve(new PDFDocumentProxy(j,this))}),u.on("DocException",function(j){let d;switch(j.name){case"PasswordException":d=new _util.PasswordException(j.message,j.code);break;case"InvalidPDFException":d=new _util.InvalidPDFException(j.message);break;case"MissingPDFException":d=new _util.MissingPDFException(j.message);break;case"UnexpectedResponseException":d=new _util.UnexpectedResponseException(j.message,j.status);break;case"UnknownErrorException":d=new _util.UnknownErrorException(j.message,j.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}m._capability.reject(d)}),u.on("PasswordRequest",j=>{if(ut(this,g,new _util.PromiseCapability),m.onPassword){const d=T=>{T instanceof Error?s(this,g).reject(T):s(this,g).resolve({password:T})};try{m.onPassword(d,j.code)}catch(T){s(this,g).reject(T)}}else s(this,g).reject(new _util.PasswordException(j.message,j.code));return s(this,g).promise}),u.on("DataLoaded",j=>{var d;(d=m.onProgress)==null||d.call(m,{loaded:j.length,total:j.length}),this.downloadInfoCapability.resolve(j)}),u.on("StartRenderPage",j=>{if(this.destroyed)return;s(this,I).get(j.pageIndex)._startRenderPage(j.transparency,j.cacheKey)}),u.on("commonobj",([j,d,T])=>{var L;if(!this.destroyed&&!this.commonObjs.has(j))switch(d){case"Font":const K=this._params;if("error"in T){const V=T.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(j,V);break}const G=K.pdfBug&&((L=globalThis.FontInspector)!=null&&L.enabled)?(V,st)=>globalThis.FontInspector.fontAdded(V,st):null,Y=new _font_loader.FontFaceObject(T,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,inspectFont:G});this.fontLoader.bind(Y).catch(V=>u.sendWithPromise("FontFallback",{id:j})).finally(()=>{!K.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(j,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(j,T);break;default:throw new Error(`Got unknown common object type ${d}`)}}),u.on("obj",([j,d,T,L])=>{var G;if(this.destroyed)return;const K=s(this,I).get(d);if(!K.objs.has(j))switch(T){case"Image":if(K.objs.resolve(j,L),L){let Y;if(L.bitmap){const{width:V,height:st}=L;Y=V*st*4}else Y=((G=L.data)==null?void 0:G.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(K._maybeCleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(j,L);break;default:throw new Error(`Got unknown object type ${T}`)}}),u.on("DocProgress",j=>{var d;this.destroyed||(d=m.onProgress)==null||d.call(m,{loaded:j.loaded,total:j.total})}),u.on("FetchBuiltInCMap",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(j):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(j):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var j;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:u,transfers:m}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:u,filename:((j=this._fullReader)==null?void 0:j.filename)??null},m).finally(()=>{this.annotationStorage.resetModified()})}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const m=u-1,j=s(this,A).get(m);if(j)return j;const d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:m}).then(T=>{if(this.destroyed)throw new Error("Transport destroyed");const L=new PDFPageProxy(m,T,this,this._params.pdfBug);return s(this,I).set(m,L),L});return s(this,A).set(m,d),d}getPageIndex(u){return typeof u!="object"||u===null||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,m){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:m})}getFieldObjects(){return nt(this,w,_e).call(this,"GetFieldObjects")}hasJSActions(){return nt(this,w,_e).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return typeof u!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return nt(this,w,_e).call(this,"GetDocJSActions")}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const u="GetMetadata",m=s(this,k).get(u);if(m)return m;const j=this.messageHandler.sendWithPromise(u,null).then(d=>{var T,L;return{info:d[0],metadata:d[1]?new _metadata.Metadata(d[1]):null,contentDispositionFilename:((T=this._fullReader)==null?void 0:T.filename)??null,contentLength:((L=this._fullReader)==null?void 0:L.contentLength)??null}});return s(this,k).set(u,j),j}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(u=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const m of s(this,I).values())if(!m.cleanup())throw new Error(`startCleanup: Page ${m.pageNumber} is currently rendering.`);this.commonObjs.clear(),u||this.fontLoader.clear(),s(this,k).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:u,enableXfa:m}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u,enableXfa:m})}}k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakSet,_e=function(u,m=null){const j=s(this,k).get(u);if(j)return j;const d=this.messageHandler.sendWithPromise(u,m);return s(this,k).set(u,d),d};class PDFObjects{constructor(){ct(this,x);ct(this,h,Object.create(null))}get(u,m=null){if(m){const d=nt(this,x,Le).call(this,u);return d.capability.promise.then(()=>m(d.data)),null}const j=s(this,h)[u];if(!(j!=null&&j.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${u}.`);return j.data}has(u){const m=s(this,h)[u];return(m==null?void 0:m.capability.settled)||!1}resolve(u,m=null){const j=nt(this,x,Le).call(this,u);j.data=m,j.capability.resolve()}clear(){var u;for(const m in s(this,h)){const{data:j}=s(this,h)[m];(u=j==null?void 0:j.bitmap)==null||u.close()}ut(this,h,Object.create(null))}}h=new WeakMap,x=new WeakSet,Le=function(u){var m;return(m=s(this,h))[u]||(m[u]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(u){ct(this,E,null);ut(this,E,u),this.onContinue=null}get promise(){return s(this,E).capability.promise}cancel(u=0){s(this,E).cancel(null,u)}get separateAnnots(){const{separateAnnots:u}=s(this,E).operatorList;if(!u)return!1;const{annotationCanvasMap:m}=s(this,E);return u.form||u.canvas&&(m==null?void 0:m.size)>0}}E=new WeakMap,exports.RenderTask=RenderTask;const f=class f{constructor({callback:u,params:m,objs:j,commonObjs:d,annotationCanvasMap:T,operatorList:L,pageIndex:K,canvasFactory:G,filterFactory:Y,useRequestAnimationFrame:V=!1,pdfBug:st=!1,pageColors:D=null}){this.callback=u,this.params=m,this.objs=j,this.commonObjs=d,this.annotationCanvasMap=T,this.operatorListIdx=null,this.operatorList=L,this._pageIndex=K,this.canvasFactory=G,this.filterFactory=Y,this._pdfBug=st,this.pageColors=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=m.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:m}){var K,G;if(this.cancelled)return;if(this._canvas){if(s(f,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s(f,o).add(this._canvas)}this._pdfBug&&((K=globalThis.StepperManager)!=null&&K.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:j,viewport:d,transform:T,background:L}=this.params;this.gfx=new _canvas.CanvasGraphics(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:m},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:T,viewport:d,transparency:u,background:L}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(u=null,m=0){var j;this.running=!1,this.cancelled=!0,(j=this.gfx)==null||j.endDrawing(),s(f,o).delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,m))}operatorListChanged(){var u;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(u=this.stepper)==null||u.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s(f,o).delete(this._canvas),this.callback())))}};o=new WeakMap,ct(f,o,new WeakSet);let InternalRenderTask=f;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,i)=>{var b,p,k,xn,A;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=i(1),r=i(4),S=i(8);const C=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=C;class N{constructor(){ct(this,k);ct(this,b,!1);ct(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(w,y){const h=s(this,p).get(w);return h===void 0?y:Object.assign(y,h)}getRawValue(w){return s(this,p).get(w)}remove(w){if(s(this,p).delete(w),s(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const y of s(this,p).values())if(y instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(w,y){const h=s(this,p).get(w);let x=!1;if(h!==void 0)for(const[F,E]of Object.entries(y))h[F]!==E&&(x=!0,h[F]=E);else x=!0,s(this,p).set(w,y);x&&nt(this,k,xn).call(this),y instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(y.constructor._type)}has(w){return s(this,p).has(w)}getAll(){return s(this,p).size>0?(0,n.objectFromMap)(s(this,p)):null}setAll(w){for(const[y,h]of Object.entries(w))this.setValue(y,h)}get size(){return s(this,p).size}resetModified(){s(this,b)&&(ut(this,b,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new v(this)}get serializable(){if(s(this,p).size===0)return C;const w=new Map,y=new S.MurmurHash3_64,h=[],x=Object.create(null);let F=!1;for(const[E,o]of s(this,p)){const f=o instanceof r.AnnotationEditor?o.serialize(!1,x):o;f&&(w.set(E,f),y.update(`${E}:${JSON.stringify(f)}`),F||(F=!!f.bitmap))}if(F)for(const E of w.values())E.bitmap&&h.push(E.bitmap);return w.size>0?{map:w,hash:y.hexdigest(),transfers:h}:C}}b=new WeakMap,p=new WeakMap,k=new WeakSet,xn=function(){s(this,b)||(ut(this,b,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=N;class v extends N{constructor(y){super();ct(this,A);const{map:h,hash:x,transfers:F}=y.serializable,E=structuredClone(h,F?{transfer:F}:null);ut(this,A,{map:E,hash:x,transfers:F})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return s(this,A)}}A=new WeakMap,e.PrintAnnotationStorage=v},(t,e,i)=>{var v,b,p,k,I,A,g,w,y,h,x,F,E,o,f,Oe,je,m,$e,Ne,bn,yn,_n,Be,An;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=i(5),r=i(1),S=i(6);const V=class V{constructor(D){ct(this,f);ct(this,v,"");ct(this,b,!1);ct(this,p,null);ct(this,k,null);ct(this,I,null);ct(this,A,!1);ct(this,g,null);ct(this,w,this.focusin.bind(this));ct(this,y,this.focusout.bind(this));ct(this,h,!1);ct(this,x,!1);ct(this,F,!1);Qt(this,"_initialOptions",Object.create(null));Qt(this,"_uiManager",null);Qt(this,"_focusEventsAllowed",!0);Qt(this,"_l10nPromise",null);ct(this,E,!1);ct(this,o,V._zIndex++);this.constructor===V&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=D.parent,this.id=D.id,this.width=this.height=null,this.pageIndex=D.parent.pageIndex,this.name=D.name,this.div=null,this._uiManager=D.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=D.isCentered,this._structTreeParentId=null;const{rotation:X,rawDims:{pageWidth:it,pageHeight:M,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[it,M],this.pageTranslation=[l,c];const[P,$]=this.parentDimensions;this.x=D.x/P,this.y=D.y/$,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(D){const X=new N({id:D.parent.getNextId(),parent:D.parent,uiManager:D._uiManager});X.annotationElementId=D.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(D,X=null){if(V._l10nPromise||(V._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(M=>[M,D.get(M)]))),X!=null&&X.strings)for(const M of X.strings)V._l10nPromise.set(M,D.get(M));if(V._borderLineWidth!==-1)return;const it=getComputedStyle(document.documentElement);V._borderLineWidth=parseFloat(it.getPropertyValue("--outline-width"))||0}static updateDefaultParams(D,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(D){return!1}static paste(D,X){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return s(this,E)}set _isDraggable(D){var X;ut(this,E,D),(X=this.div)==null||X.classList.toggle("draggable",D)}center(){const[D,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(D*2),this.y+=this.width*D/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(D*2),this.y-=this.width*D/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(D){this._uiManager.addCommands(D)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=s(this,o)}setParent(D){D!==null&&(this.pageIndex=D.pageIndex,this.pageDimensions=D.pageDimensions),this.parent=D}focusin(D){this._focusEventsAllowed&&(s(this,h)?ut(this,h,!1):this.parent.setSelected(this))}focusout(D){var it;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=D.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(D.preventDefault(),(it=this.parent)!=null&&it.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(D,X,it,M){const[l,c]=this.parentDimensions;[it,M]=this.screenToPageTranslation(it,M),this.x=(D+it)/l,this.y=(X+M)/c,this.fixAndSetPosition()}translate(D,X){nt(this,f,Oe).call(this,this.parentDimensions,D,X)}translateInPage(D,X){nt(this,f,Oe).call(this,this.pageDimensions,D,X),this.div.scrollIntoView({block:"nearest"})}drag(D,X){const[it,M]=this.parentDimensions;if(this.x+=D/it,this.y+=X/M,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:B,y:W}=this.div.getBoundingClientRect();this.parent.findNewParent(this,B,W)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[P,$]=nt(this,f,je).call(this);l+=P,c+=$,this.div.style.left=`${(100*l).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[D,X]=this.pageDimensions;let{x:it,y:M,width:l,height:c}=this;switch(l*=D,c*=X,it*=D,M*=X,this.rotation){case 0:it=Math.max(0,Math.min(D-l,it)),M=Math.max(0,Math.min(X-c,M));break;case 90:it=Math.max(0,Math.min(D-c,it)),M=Math.min(X,Math.max(l,M));break;case 180:it=Math.min(D,Math.max(l,it)),M=Math.min(X,Math.max(c,M));break;case 270:it=Math.min(D,Math.max(c,it)),M=Math.max(0,Math.min(X-l,M));break}this.x=it/=D,this.y=M/=X;const[P,$]=nt(this,f,je).call(this);it+=P,M+=$;const{style:B}=this.div;B.left=`${(100*it).toFixed(2)}%`,B.top=`${(100*M).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(D,X){var it;return nt(it=V,m,$e).call(it,D,X,this.parentRotation)}pageTranslationToScreen(D,X){var it;return nt(it=V,m,$e).call(it,D,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:D,pageDimensions:[X,it]}=this,M=X*D,l=it*D;return r.FeatureTest.isCSSRoundSupported?[Math.round(M),Math.round(l)]:[M,l]}setDims(D,X){var l;const[it,M]=this.parentDimensions;this.div.style.width=`${(100*D/it).toFixed(2)}%`,s(this,A)||(this.div.style.height=`${(100*X/M).toFixed(2)}%`),(l=s(this,p))==null||l.classList.toggle("small",D<V.SMALL_EDITOR_SIZE||X<V.SMALL_EDITOR_SIZE)}fixDims(){const{style:D}=this.div,{height:X,width:it}=D,M=it.endsWith("%"),l=!s(this,A)&&X.endsWith("%");if(M&&l)return;const[c,P]=this.parentDimensions;M||(D.width=`${(100*parseFloat(it)/c).toFixed(2)}%`),!s(this,A)&&!l&&(D.height=`${(100*parseFloat(X)/P).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(s(this,p))return;const D=ut(this,p,document.createElement("button"));D.className="altText";const X=await V._l10nPromise.get("editor_alt_text_button_label");D.textContent=X,D.setAttribute("aria-label",X),D.tabIndex="0",D.addEventListener("contextmenu",S.noContextMenu),D.addEventListener("pointerdown",it=>it.stopPropagation()),D.addEventListener("click",it=>{it.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),D.addEventListener("keydown",it=>{it.target===D&&it.key==="Enter"&&(it.preventDefault(),this._uiManager.editAltText(this))}),nt(this,f,Be).call(this),this.div.append(D),V.SMALL_EDITOR_SIZE||(V.SMALL_EDITOR_SIZE=Math.min(128,Math.round(D.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:s(this,v),decorative:s(this,b)}}set altTextData({altText:D,decorative:X}){s(this,v)===D&&s(this,b)===X||(ut(this,v,D),ut(this,b,X),nt(this,f,Be).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",s(this,w)),this.div.addEventListener("focusout",s(this,y));const[D,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/D).toFixed(2)}%`,this.div.style.maxHeight=`${(100*D/X).toFixed(2)}%`);const[it,M]=this.getInitialTranslation();return this.translate(it,M),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(D){const{isMac:X}=r.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&X){D.preventDefault();return}ut(this,h,!0),nt(this,f,An).call(this,D)}moveInDOM(){var D;(D=this.parent)==null||D.moveEditorInDOM(this)}_setParentAndPosition(D,X,it){D.changeParent(this),this.x=X,this.y=it,this.fixAndSetPosition()}getRect(D,X){const it=this.parentScale,[M,l]=this.pageDimensions,[c,P]=this.pageTranslation,$=D/it,B=X/it,W=this.x*M,Q=this.y*l,at=this.width*M,pt=this.height*l;switch(this.rotation){case 0:return[W+$+c,l-Q-B-pt+P,W+$+at+c,l-Q-B+P];case 90:return[W+B+c,l-Q+$+P,W+B+pt+c,l-Q+$+at+P];case 180:return[W-$-at+c,l-Q+B+P,W-$+c,l-Q+B+pt+P];case 270:return[W-B-pt+c,l-Q-$-at+P,W-B+c,l-Q-$+P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(D,X){const[it,M,l,c]=D,P=l-it,$=c-M;switch(this.rotation){case 0:return[it,X-c,P,$];case 90:return[it,X-M,$,P];case 180:return[l,X-M,P,$];case 270:return[l,X-c,$,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ut(this,F,!0)}disableEditMode(){ut(this,F,!1)}isInEditMode(){return s(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var D,X;(D=this.div)==null||D.addEventListener("focusin",s(this,w)),(X=this.div)==null||X.addEventListener("focusout",s(this,y))}serialize(D=!1,X=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(D,X,it){const M=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:it});M.rotation=D.rotation;const[l,c]=M.pageDimensions,[P,$,B,W]=M.getRectInCurrentCoords(D.rect,c);return M.x=P/l,M.y=$/c,M.width=B/l,M.height=W/c,M}remove(){var D;this.div.removeEventListener("focusin",s(this,w)),this.div.removeEventListener("focusout",s(this,y)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(D=s(this,p))==null||D.remove(),ut(this,p,null),ut(this,k,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(nt(this,f,bn).call(this),s(this,g).classList.remove("hidden"))}select(){var D;this.makeResizable(),(D=this.div)==null||D.classList.add("selectedEditor")}unselect(){var D,X,it;(D=s(this,g))==null||D.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(it=this.div)!=null&&it.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(D,X){}disableEditing(){s(this,p)&&(s(this,p).hidden=!0)}enableEditing(){s(this,p)&&(s(this,p).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return s(this,x)}set isEditing(D){ut(this,x,D),this.parent&&(D?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(D,X){ut(this,A,!0);const it=D/X,{style:M}=this.div;M.aspectRatio=it,M.height="auto"}static get MIN_SIZE(){return 16}};v=new WeakMap,b=new WeakMap,p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakMap,x=new WeakMap,F=new WeakMap,E=new WeakMap,o=new WeakMap,f=new WeakSet,Oe=function([D,X],it,M){[it,M]=this.screenToPageTranslation(it,M),this.x+=it/D,this.y+=M/X,this.fixAndSetPosition()},je=function(){const[D,X]=this.parentDimensions,{_borderLineWidth:it}=V,M=it/D,l=it/X;switch(this.rotation){case 90:return[-M,l];case 180:return[M,l];case 270:return[M,-l];default:return[-M,-l]}},m=new WeakSet,$e=function(D,X,it){switch(it){case 90:return[X,-D];case 180:return[-D,-X];case 270:return[-X,D];default:return[D,X]}},Ne=function(D){switch(D){case 90:{const[X,it]=this.pageDimensions;return[0,-X/it,it/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,it]=this.pageDimensions;return[0,X/it,-it/X,0]}default:return[1,0,0,1]}},bn=function(){if(s(this,g))return;ut(this,g,document.createElement("div")),s(this,g).classList.add("resizers");const D=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||D.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of D){const it=document.createElement("div");s(this,g).append(it),it.classList.add("resizer",X),it.addEventListener("pointerdown",nt(this,f,yn).bind(this,X)),it.addEventListener("contextmenu",S.noContextMenu)}this.div.prepend(s(this,g))},yn=function(D,X){X.preventDefault();const{isMac:it}=r.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&it)return;const M=nt(this,f,_n).bind(this,D),l=this._isDraggable;this._isDraggable=!1;const c={passive:!0,capture:!0};window.addEventListener("pointermove",M,c);const P=this.x,$=this.y,B=this.width,W=this.height,Q=this.parent.div.style.cursor,at=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const pt=()=>{this._isDraggable=l,window.removeEventListener("pointerup",pt),window.removeEventListener("blur",pt),window.removeEventListener("pointermove",M,c),this.parent.div.style.cursor=Q,this.div.style.cursor=at;const ft=this.x,bt=this.y,vt=this.width,yt=this.height;ft===P&&bt===$&&vt===B&&yt===W||this.addCommands({cmd:()=>{this.width=vt,this.height=yt,this.x=ft,this.y=bt;const[et,tt]=this.parentDimensions;this.setDims(et*vt,tt*yt),this.fixAndSetPosition()},undo:()=>{this.width=B,this.height=W,this.x=P,this.y=$;const[et,tt]=this.parentDimensions;this.setDims(et*B,tt*W),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",pt),window.addEventListener("blur",pt)},_n=function(D,X){const[it,M]=this.parentDimensions,l=this.x,c=this.y,P=this.width,$=this.height,B=V.MIN_SIZE/it,W=V.MIN_SIZE/M,Q=Dt=>Math.round(Dt*1e4)/1e4,at=nt(this,f,Ne).call(this,this.rotation),pt=(Dt,Mt)=>[at[0]*Dt+at[2]*Mt,at[1]*Dt+at[3]*Mt],ft=nt(this,f,Ne).call(this,360-this.rotation),bt=(Dt,Mt)=>[ft[0]*Dt+ft[2]*Mt,ft[1]*Dt+ft[3]*Mt];let vt,yt,et=!1,tt=!1;switch(D){case"topLeft":et=!0,vt=(Dt,Mt)=>[0,0],yt=(Dt,Mt)=>[Dt,Mt];break;case"topMiddle":vt=(Dt,Mt)=>[Dt/2,0],yt=(Dt,Mt)=>[Dt/2,Mt];break;case"topRight":et=!0,vt=(Dt,Mt)=>[Dt,0],yt=(Dt,Mt)=>[0,Mt];break;case"middleRight":tt=!0,vt=(Dt,Mt)=>[Dt,Mt/2],yt=(Dt,Mt)=>[0,Mt/2];break;case"bottomRight":et=!0,vt=(Dt,Mt)=>[Dt,Mt],yt=(Dt,Mt)=>[0,0];break;case"bottomMiddle":vt=(Dt,Mt)=>[Dt/2,Mt],yt=(Dt,Mt)=>[Dt/2,0];break;case"bottomLeft":et=!0,vt=(Dt,Mt)=>[0,Mt],yt=(Dt,Mt)=>[Dt,0];break;case"middleLeft":tt=!0,vt=(Dt,Mt)=>[0,Mt/2],yt=(Dt,Mt)=>[Dt,Mt/2];break}const R=vt(P,$),U=yt(P,$);let Z=pt(...U);const ot=Q(l+Z[0]),gt=Q(c+Z[1]);let St=1,rt=1,[q,wt]=this.screenToPageTranslation(X.movementX,X.movementY);if([q,wt]=bt(q/it,wt/M),et){const Dt=Math.hypot(P,$);St=rt=Math.max(Math.min(Math.hypot(U[0]-R[0]-q,U[1]-R[1]-wt)/Dt,1/P,1/$),B/P,W/$)}else tt?St=Math.max(B,Math.min(1,Math.abs(U[0]-R[0]-q)))/P:rt=Math.max(W,Math.min(1,Math.abs(U[1]-R[1]-wt)))/$;const Ct=Q(P*St),Bt=Q($*rt);Z=pt(...yt(Ct,Bt));const zt=ot-Z[0],Wt=gt-Z[1];this.width=Ct,this.height=Bt,this.x=zt,this.y=Wt,this.setDims(it*Ct,M*Bt),this.fixAndSetPosition()},Be=async function(){var it;const D=s(this,p);if(!D)return;if(!s(this,v)&&!s(this,b)){D.classList.remove("done"),(it=s(this,k))==null||it.remove();return}V._l10nPromise.get("editor_alt_text_edit_button_label").then(M=>{D.setAttribute("aria-label",M)});let X=s(this,k);if(!X){ut(this,k,X=document.createElement("span")),X.className="tooltip",X.setAttribute("role","tooltip");const M=X.id=`alt-text-tooltip-${this.id}`;D.setAttribute("aria-describedby",M);const l=100;D.addEventListener("mouseenter",()=>{ut(this,I,setTimeout(()=>{ut(this,I,null),s(this,k).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},l))}),D.addEventListener("mouseleave",()=>{var c;clearTimeout(s(this,I)),ut(this,I,null),(c=s(this,k))==null||c.classList.remove("show")})}D.classList.add("done"),X.innerText=s(this,b)?await V._l10nPromise.get("editor_alt_text_decorative_tooltip"):s(this,v),X.parentNode||D.append(X)},An=function(D){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let it,M;X&&(it={passive:!0,capture:!0},M=c=>{const[P,$]=this.screenToPageTranslation(c.movementX,c.movementY);this._uiManager.dragSelectedEditors(P,$)},window.addEventListener("pointermove",M,it));const l=()=>{if(window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),X&&window.removeEventListener("pointermove",M,it),ut(this,h,!1),!this._uiManager.endDragSession()){const{isMac:c}=r.FeatureTest.platform;D.ctrlKey&&!c||D.shiftKey||D.metaKey&&c?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",l),window.addEventListener("blur",l)},ct(V,m),Qt(V,"_borderLineWidth",-1),Qt(V,"_colorManager",new n.ColorManager),Qt(V,"_zIndex",1),Qt(V,"SMALL_EDITOR_SIZE",0);let C=V;e.AnnotationEditor=C;class N extends C{constructor(D){super(D),this.annotationElementId=D.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,i)=>{var A,g,w,y,h,ze,E,o,f,a,u,En,d,T,L,K,G,Y,V,st,D,X,it,M,l,c,P,$,B,W,Q,at,pt,ft,bt,vt,yt,et,tt,R,U,Z,ot,gt,St,rt,q,Sn,Ue,We,Ae,He,Ge,ee,he,Cn,wn,qe,fe,Ve;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=S,e.opacityToHex=C;var n=i(1),r=i(6);function S(Kt,H,xt){for(const Tt of xt)H.addEventListener(Tt,Kt[Tt].bind(Kt))}function C(Kt){return Math.round(Math.min(255,Math.max(1,255*Kt))).toString(16).padStart(2,"0")}class N{constructor(){ct(this,A,0)}getId(){return`${n.AnnotationEditorPrefix}${pe(this,A)._++}`}}A=new WeakMap;const F=class F{constructor(){ct(this,h);ct(this,g,(0,n.getUuid)());ct(this,w,0);ct(this,y,null)}static get _isSVGFittingCanvas(){const H='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Tt=new OffscreenCanvas(1,3).getContext("2d"),Ot=new Image;Ot.src=H;const Nt=Ot.decode().then(()=>(Tt.drawImage(Ot,0,0,1,1,0,0,1,3),new Uint32Array(Tt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",Nt)}async getFromFile(H){const{lastModified:xt,name:Tt,size:Ot,type:Nt}=H;return nt(this,h,ze).call(this,`${xt}_${Tt}_${Ot}_${Nt}`,H)}async getFromUrl(H){return nt(this,h,ze).call(this,H,H)}async getFromId(H){s(this,y)||ut(this,y,new Map);const xt=s(this,y).get(H);return xt?xt.bitmap?(xt.refCounter+=1,xt):xt.file?this.getFromFile(xt.file):this.getFromUrl(xt.url):null}getSvgUrl(H){const xt=s(this,y).get(H);return xt!=null&&xt.isSvg?xt.svgUrl:null}deleteId(H){s(this,y)||ut(this,y,new Map);const xt=s(this,y).get(H);xt&&(xt.refCounter-=1,xt.refCounter===0&&(xt.bitmap=null))}isValidId(H){return H.startsWith(`image_${s(this,g)}_`)}};g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakSet,ze=async function(H,xt){s(this,y)||ut(this,y,new Map);let Tt=s(this,y).get(H);if(Tt===null)return null;if(Tt!=null&&Tt.bitmap)return Tt.refCounter+=1,Tt;try{Tt||(Tt={bitmap:null,id:`image_${s(this,g)}_${pe(this,w)._++}`,refCounter:0,isSvg:!1});let Ot;if(typeof xt=="string"){Tt.url=xt;const Nt=await fetch(xt);if(!Nt.ok)throw new Error(Nt.statusText);Ot=await Nt.blob()}else Ot=Tt.file=xt;if(Ot.type==="image/svg+xml"){const Nt=F._isSVGFittingCanvas,Ft=new FileReader,z=new Image,O=new Promise((J,ht)=>{z.onload=()=>{Tt.bitmap=z,Tt.isSvg=!0,J()},Ft.onload=async()=>{const mt=Tt.svgUrl=Ft.result;z.src=await Nt?`${mt}#svgView(preserveAspectRatio(none))`:mt},z.onerror=Ft.onerror=ht});Ft.readAsDataURL(Ot),await O}else Tt.bitmap=await createImageBitmap(Ot);Tt.refCounter=1}catch(Ot){console.error(Ot),Tt=null}return s(this,y).set(H,Tt),Tt&&s(this,y).set(Tt.id,Tt),Tt};let v=F;class b{constructor(H=128){ct(this,E,[]);ct(this,o,!1);ct(this,f);ct(this,a,-1);ut(this,f,H)}add({cmd:H,undo:xt,mustExec:Tt,type:Ot=NaN,overwriteIfSameType:Nt=!1,keepUndo:Ft=!1}){if(Tt&&H(),s(this,o))return;const z={cmd:H,undo:xt,type:Ot};if(s(this,a)===-1){s(this,E).length>0&&(s(this,E).length=0),ut(this,a,0),s(this,E).push(z);return}if(Nt&&s(this,E)[s(this,a)].type===Ot){Ft&&(z.undo=s(this,E)[s(this,a)].undo),s(this,E)[s(this,a)]=z;return}const O=s(this,a)+1;O===s(this,f)?s(this,E).splice(0,1):(ut(this,a,O),O<s(this,E).length&&s(this,E).splice(O)),s(this,E).push(z)}undo(){s(this,a)!==-1&&(ut(this,o,!0),s(this,E)[s(this,a)].undo(),ut(this,o,!1),ut(this,a,s(this,a)-1))}redo(){s(this,a)<s(this,E).length-1&&(ut(this,a,s(this,a)+1),ut(this,o,!0),s(this,E)[s(this,a)].cmd(),ut(this,o,!1))}hasSomethingToUndo(){return s(this,a)!==-1}hasSomethingToRedo(){return s(this,a)<s(this,E).length-1}destroy(){ut(this,E,null)}}E=new WeakMap,o=new WeakMap,f=new WeakMap,a=new WeakMap,e.CommandManager=b;class p{constructor(H){ct(this,u);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:xt}=n.FeatureTest.platform;for(const[Tt,Ot,Nt={}]of H)for(const Ft of Tt){const z=Ft.startsWith("mac+");xt&&z?(this.callbacks.set(Ft.slice(4),{callback:Ot,options:Nt}),this.allKeys.add(Ft.split("+").at(-1))):!xt&&!z&&(this.callbacks.set(Ft,{callback:Ot,options:Nt}),this.allKeys.add(Ft.split("+").at(-1)))}}exec(H,xt){if(!this.allKeys.has(xt.key))return;const Tt=this.callbacks.get(nt(this,u,En).call(this,xt));if(!Tt)return;const{callback:Ot,options:{bubbles:Nt=!1,args:Ft=[],checker:z=null}}=Tt;z&&!z(H,xt)||(Ot.bind(H,...Ft)(),Nt||(xt.stopPropagation(),xt.preventDefault()))}}u=new WeakSet,En=function(H){H.altKey&&this.buffer.push("alt"),H.ctrlKey&&this.buffer.push("ctrl"),H.metaKey&&this.buffer.push("meta"),H.shiftKey&&this.buffer.push("shift"),this.buffer.push(H.key);const xt=this.buffer.join("+");return this.buffer.length=0,xt},e.KeyboardManager=p;const j=class j{get _colors(){const H=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(H),(0,n.shadow)(this,"_colors",H)}convert(H){const xt=(0,r.getRGB)(H);if(!window.matchMedia("(forced-colors: active)").matches)return xt;for(const[Tt,Ot]of this._colors)if(Ot.every((Nt,Ft)=>Nt===xt[Ft]))return j._colorsMapping.get(Tt);return xt}getHexCode(H){const xt=this._colors.get(H);return xt?n.Util.makeHexColor(...xt):H}};Qt(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let k=j;e.ColorManager=k;const Xt=class Xt{constructor(H,xt,Tt,Ot,Nt,Ft){ct(this,q);ct(this,d,null);ct(this,T,new Map);ct(this,L,new Map);ct(this,K,null);ct(this,G,null);ct(this,Y,new b);ct(this,V,0);ct(this,st,new Set);ct(this,D,null);ct(this,X,null);ct(this,it,new Set);ct(this,M,null);ct(this,l,new N);ct(this,c,!1);ct(this,P,!1);ct(this,$,null);ct(this,B,n.AnnotationEditorType.NONE);ct(this,W,new Set);ct(this,Q,null);ct(this,at,this.blur.bind(this));ct(this,pt,this.focus.bind(this));ct(this,ft,this.copy.bind(this));ct(this,bt,this.cut.bind(this));ct(this,vt,this.paste.bind(this));ct(this,yt,this.keydown.bind(this));ct(this,et,this.onEditingAction.bind(this));ct(this,tt,this.onPageChanging.bind(this));ct(this,R,this.onScaleChanging.bind(this));ct(this,U,this.onRotationChanging.bind(this));ct(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ct(this,ot,[0,0]);ct(this,gt,null);ct(this,St,null);ct(this,rt,null);ut(this,St,H),ut(this,rt,xt),ut(this,K,Tt),this._eventBus=Ot,this._eventBus._on("editingaction",s(this,et)),this._eventBus._on("pagechanging",s(this,tt)),this._eventBus._on("scalechanging",s(this,R)),this._eventBus._on("rotationchanging",s(this,U)),ut(this,G,Nt.annotationStorage),ut(this,M,Nt.filterFactory),ut(this,Q,Ft),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const H=Xt.prototype,xt=Nt=>{const{activeElement:Ft}=document;return Ft&&s(Nt,St).contains(Ft)&&Nt.hasSomethingToControl()},Tt=this.TRANSLATE_SMALL,Ot=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],H.selectAll],[["ctrl+z","mac+meta+z"],H.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],H.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],H.delete],[["Escape","mac+Escape"],H.unselectAll],[["ArrowLeft","mac+ArrowLeft"],H.translateSelectedEditors,{args:[-Tt,0],checker:xt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H.translateSelectedEditors,{args:[-Ot,0],checker:xt}],[["ArrowRight","mac+ArrowRight"],H.translateSelectedEditors,{args:[Tt,0],checker:xt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H.translateSelectedEditors,{args:[Ot,0],checker:xt}],[["ArrowUp","mac+ArrowUp"],H.translateSelectedEditors,{args:[0,-Tt],checker:xt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H.translateSelectedEditors,{args:[0,-Ot],checker:xt}],[["ArrowDown","mac+ArrowDown"],H.translateSelectedEditors,{args:[0,Tt],checker:xt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H.translateSelectedEditors,{args:[0,Ot],checker:xt}]]))}destroy(){nt(this,q,Ae).call(this),nt(this,q,Ue).call(this),this._eventBus._off("editingaction",s(this,et)),this._eventBus._off("pagechanging",s(this,tt)),this._eventBus._off("scalechanging",s(this,R)),this._eventBus._off("rotationchanging",s(this,U));for(const H of s(this,L).values())H.destroy();s(this,L).clear(),s(this,T).clear(),s(this,it).clear(),ut(this,d,null),s(this,W).clear(),s(this,Y).destroy(),s(this,K).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",s(this,Q)?s(this,M).addHCMFilter(s(this,Q).foreground,s(this,Q).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(s(this,St)).direction)}editAltText(H){var xt;(xt=s(this,K))==null||xt.editAltText(this,H)}onPageChanging({pageNumber:H}){ut(this,V,H-1)}focusMainContainer(){s(this,St).focus()}findParent(H,xt){for(const Tt of s(this,L).values()){const{x:Ot,y:Nt,width:Ft,height:z}=Tt.div.getBoundingClientRect();if(H>=Ot&&H<=Ot+Ft&&xt>=Nt&&xt<=Nt+z)return Tt}return null}disableUserSelect(H=!1){s(this,rt).classList.toggle("noUserSelect",H)}addShouldRescale(H){s(this,it).add(H)}removeShouldRescale(H){s(this,it).delete(H)}onScaleChanging({scale:H}){this.commitOrRemove(),this.viewParameters.realScale=H*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const xt of s(this,it))xt.onScaleChanging()}onRotationChanging({pagesRotation:H}){this.commitOrRemove(),this.viewParameters.rotation=H}addToAnnotationStorage(H){!H.isEmpty()&&s(this,G)&&!s(this,G).has(H.id)&&s(this,G).setValue(H.id,H)}blur(){if(!this.hasSelection)return;const{activeElement:H}=document;for(const xt of s(this,W))if(xt.div.contains(H)){ut(this,$,[xt,H]),xt._focusEventsAllowed=!1;break}}focus(){if(!s(this,$))return;const[H,xt]=s(this,$);ut(this,$,null),xt.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),xt.focus()}addEditListeners(){nt(this,q,We).call(this),nt(this,q,He).call(this)}removeEditListeners(){nt(this,q,Ae).call(this),nt(this,q,Ge).call(this)}copy(H){var Tt;if(H.preventDefault(),(Tt=s(this,d))==null||Tt.commitOrRemove(),!this.hasSelection)return;const xt=[];for(const Ot of s(this,W)){const Nt=Ot.serialize(!0);Nt&&xt.push(Nt)}xt.length!==0&&H.clipboardData.setData("application/pdfjs",JSON.stringify(xt))}cut(H){this.copy(H),this.delete()}paste(H){H.preventDefault();const{clipboardData:xt}=H;for(const Nt of xt.items)for(const Ft of s(this,X))if(Ft.isHandlingMimeForPasting(Nt.type)){Ft.paste(Nt,this.currentLayer);return}let Tt=xt.getData("application/pdfjs");if(!Tt)return;try{Tt=JSON.parse(Tt)}catch(Nt){(0,n.warn)(`paste: "${Nt.message}".`);return}if(!Array.isArray(Tt))return;this.unselectAll();const Ot=this.currentLayer;try{const Nt=[];for(const O of Tt){const J=Ot.deserialize(O);if(!J)return;Nt.push(J)}const Ft=()=>{for(const O of Nt)nt(this,q,qe).call(this,O);nt(this,q,Ve).call(this,Nt)},z=()=>{for(const O of Nt)O.remove()};this.addCommands({cmd:Ft,undo:z,mustExec:!0})}catch(Nt){(0,n.warn)(`paste: "${Nt.message}".`)}}keydown(H){var xt;(xt=this.getActive())!=null&&xt.shouldGetKeyboardEvents()||Xt._keyboardManager.exec(this,H)}onEditingAction(H){["undo","redo","delete","selectAll"].includes(H.name)&&this[H.name]()}setEditingState(H){H?(nt(this,q,Sn).call(this),nt(this,q,We).call(this),nt(this,q,He).call(this),nt(this,q,ee).call(this,{isEditing:s(this,B)!==n.AnnotationEditorType.NONE,isEmpty:nt(this,q,fe).call(this),hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),hasSelectedEditor:!1})):(nt(this,q,Ue).call(this),nt(this,q,Ae).call(this),nt(this,q,Ge).call(this),nt(this,q,ee).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(H){if(!s(this,X)){ut(this,X,H);for(const xt of s(this,X))nt(this,q,he).call(this,xt.defaultPropertiesToUpdate)}}getId(){return s(this,l).getId()}get currentLayer(){return s(this,L).get(s(this,V))}getLayer(H){return s(this,L).get(H)}get currentPageIndex(){return s(this,V)}addLayer(H){s(this,L).set(H.pageIndex,H),s(this,c)?H.enable():H.disable()}removeLayer(H){s(this,L).delete(H.pageIndex)}updateMode(H,xt=null){if(s(this,B)!==H){if(ut(this,B,H),H===n.AnnotationEditorType.NONE){this.setEditingState(!1),nt(this,q,wn).call(this);return}this.setEditingState(!0),nt(this,q,Cn).call(this),this.unselectAll();for(const Tt of s(this,L).values())Tt.updateMode(H);if(xt){for(const Tt of s(this,T).values())if(Tt.annotationElementId===xt){this.setSelected(Tt),Tt.enterInEditMode();break}}}}updateToolbar(H){H!==s(this,B)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:H})}updateParams(H,xt){if(s(this,X)){if(H===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(H);return}for(const Tt of s(this,W))Tt.updateParams(H,xt);for(const Tt of s(this,X))Tt.updateDefaultParams(H,xt)}}enableWaiting(H=!1){if(s(this,P)!==H){ut(this,P,H);for(const xt of s(this,L).values())H?xt.disableClick():xt.enableClick(),xt.div.classList.toggle("waiting",H)}}getEditors(H){const xt=[];for(const Tt of s(this,T).values())Tt.pageIndex===H&&xt.push(Tt);return xt}getEditor(H){return s(this,T).get(H)}addEditor(H){s(this,T).set(H.id,H)}removeEditor(H){var xt;s(this,T).delete(H.id),this.unselect(H),(!H.annotationElementId||!s(this,st).has(H.annotationElementId))&&((xt=s(this,G))==null||xt.remove(H.id))}addDeletedAnnotationElement(H){s(this,st).add(H.annotationElementId),H.deleted=!0}isDeletedAnnotationElement(H){return s(this,st).has(H)}removeDeletedAnnotationElement(H){s(this,st).delete(H.annotationElementId),H.deleted=!1}setActiveEditor(H){s(this,d)!==H&&(ut(this,d,H),H&&nt(this,q,he).call(this,H.propertiesToUpdate))}toggleSelected(H){if(s(this,W).has(H)){s(this,W).delete(H),H.unselect(),nt(this,q,ee).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,W).add(H),H.select(),nt(this,q,he).call(this,H.propertiesToUpdate),nt(this,q,ee).call(this,{hasSelectedEditor:!0})}setSelected(H){for(const xt of s(this,W))xt!==H&&xt.unselect();s(this,W).clear(),s(this,W).add(H),H.select(),nt(this,q,he).call(this,H.propertiesToUpdate),nt(this,q,ee).call(this,{hasSelectedEditor:!0})}isSelected(H){return s(this,W).has(H)}unselect(H){H.unselect(),s(this,W).delete(H),nt(this,q,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return s(this,W).size!==0}undo(){s(this,Y).undo(),nt(this,q,ee).call(this,{hasSomethingToUndo:s(this,Y).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nt(this,q,fe).call(this)})}redo(){s(this,Y).redo(),nt(this,q,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,Y).hasSomethingToRedo(),isEmpty:nt(this,q,fe).call(this)})}addCommands(H){s(this,Y).add(H),nt(this,q,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nt(this,q,fe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const H=[...s(this,W)],xt=()=>{for(const Ot of H)Ot.remove()},Tt=()=>{for(const Ot of H)nt(this,q,qe).call(this,Ot)};this.addCommands({cmd:xt,undo:Tt,mustExec:!0})}commitOrRemove(){var H;(H=s(this,d))==null||H.commitOrRemove()}hasSomethingToControl(){return s(this,d)||this.hasSelection}selectAll(){for(const H of s(this,W))H.commit();nt(this,q,Ve).call(this,s(this,T).values())}unselectAll(){if(s(this,d)){s(this,d).commitOrRemove();return}if(this.hasSelection){for(const H of s(this,W))H.unselect();s(this,W).clear(),nt(this,q,ee).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(H,xt,Tt=!1){if(Tt||this.commitOrRemove(),!this.hasSelection)return;s(this,ot)[0]+=H,s(this,ot)[1]+=xt;const[Ot,Nt]=s(this,ot),Ft=[...s(this,W)],z=1e3;s(this,gt)&&clearTimeout(s(this,gt)),ut(this,gt,setTimeout(()=>{ut(this,gt,null),s(this,ot)[0]=s(this,ot)[1]=0,this.addCommands({cmd:()=>{for(const O of Ft)s(this,T).has(O.id)&&O.translateInPage(Ot,Nt)},undo:()=>{for(const O of Ft)s(this,T).has(O.id)&&O.translateInPage(-Ot,-Nt)},mustExec:!1})},z));for(const O of Ft)O.translateInPage(H,xt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ut(this,D,new Map);for(const H of s(this,W))s(this,D).set(H,{savedX:H.x,savedY:H.y,savedPageIndex:H.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!s(this,D))return!1;this.disableUserSelect(!1);const H=s(this,D);ut(this,D,null);let xt=!1;for(const[{x:Ot,y:Nt,pageIndex:Ft},z]of H)z.newX=Ot,z.newY=Nt,z.newPageIndex=Ft,xt||(xt=Ot!==z.savedX||Nt!==z.savedY||Ft!==z.savedPageIndex);if(!xt)return!1;const Tt=(Ot,Nt,Ft,z)=>{if(s(this,T).has(Ot.id)){const O=s(this,L).get(z);O?Ot._setParentAndPosition(O,Nt,Ft):(Ot.pageIndex=z,Ot.x=Nt,Ot.y=Ft)}};return this.addCommands({cmd:()=>{for(const[Ot,{newX:Nt,newY:Ft,newPageIndex:z}]of H)Tt(Ot,Nt,Ft,z)},undo:()=>{for(const[Ot,{savedX:Nt,savedY:Ft,savedPageIndex:z}]of H)Tt(Ot,Nt,Ft,z)},mustExec:!0}),!0}dragSelectedEditors(H,xt){if(s(this,D))for(const Tt of s(this,D).keys())Tt.drag(H,xt)}rebuild(H){if(H.parent===null){const xt=this.getLayer(H.pageIndex);xt?(xt.changeParent(H),xt.addOrRebuild(H)):(this.addEditor(H),this.addToAnnotationStorage(H),H.rebuild())}else H.parent.addOrRebuild(H)}isActive(H){return s(this,d)===H}getActive(){return s(this,d)}getMode(){return s(this,B)}get imageManager(){return(0,n.shadow)(this,"imageManager",new v)}};d=new WeakMap,T=new WeakMap,L=new WeakMap,K=new WeakMap,G=new WeakMap,Y=new WeakMap,V=new WeakMap,st=new WeakMap,D=new WeakMap,X=new WeakMap,it=new WeakMap,M=new WeakMap,l=new WeakMap,c=new WeakMap,P=new WeakMap,$=new WeakMap,B=new WeakMap,W=new WeakMap,Q=new WeakMap,at=new WeakMap,pt=new WeakMap,ft=new WeakMap,bt=new WeakMap,vt=new WeakMap,yt=new WeakMap,et=new WeakMap,tt=new WeakMap,R=new WeakMap,U=new WeakMap,Z=new WeakMap,ot=new WeakMap,gt=new WeakMap,St=new WeakMap,rt=new WeakMap,q=new WeakSet,Sn=function(){window.addEventListener("focus",s(this,pt)),window.addEventListener("blur",s(this,at))},Ue=function(){window.removeEventListener("focus",s(this,pt)),window.removeEventListener("blur",s(this,at))},We=function(){window.addEventListener("keydown",s(this,yt),{capture:!0})},Ae=function(){window.removeEventListener("keydown",s(this,yt),{capture:!0})},He=function(){document.addEventListener("copy",s(this,ft)),document.addEventListener("cut",s(this,bt)),document.addEventListener("paste",s(this,vt))},Ge=function(){document.removeEventListener("copy",s(this,ft)),document.removeEventListener("cut",s(this,bt)),document.removeEventListener("paste",s(this,vt))},ee=function(H){Object.entries(H).some(([Tt,Ot])=>s(this,Z)[Tt]!==Ot)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,Z),H)})},he=function(H){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:H})},Cn=function(){if(!s(this,c)){ut(this,c,!0);for(const H of s(this,L).values())H.enable()}},wn=function(){if(this.unselectAll(),s(this,c)){ut(this,c,!1);for(const H of s(this,L).values())H.disable()}},qe=function(H){const xt=s(this,L).get(H.pageIndex);xt?xt.addOrRebuild(H):this.addEditor(H)},fe=function(){if(s(this,T).size===0)return!0;if(s(this,T).size===1)for(const H of s(this,T).values())return H.isEmpty();return!1},Ve=function(H){s(this,W).clear();for(const xt of H)xt.isEmpty()||(s(this,W).add(xt),xt.select());nt(this,q,ee).call(this,{hasSelectedEditor:!0})},Qt(Xt,"TRANSLATE_SMALL",1),Qt(Xt,"TRANSLATE_BIG",10);let I=Xt;e.AnnotationEditorUIManager=I},(t,e,i)=>{var V,st,D,X,it,M,l,c,P,$,B,W,le,ce,Xe,Ee,Se,me,ge;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=a,e.getColorValues=T,e.getCurrentTransform=L,e.getCurrentTransformInverse=K,e.getFilenameFromUrl=h,e.getPdfFilenameFromUrl=x,e.getRGB=d,e.getXfaPageViewport=j,e.isDataScheme=w,e.isPdfFile=y,e.isValidFetchUrl=E,e.loadScript=f,e.noContextMenu=o,e.setLayerDimensions=G;var n=i(7),r=i(1);const S="http://www.w3.org/2000/svg",Y=class Y{};Qt(Y,"CSS",96),Qt(Y,"PDF",72),Qt(Y,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF);let C=Y;e.PixelsPerInch=C;class N extends n.BaseFilterFactory{constructor({docId:R,ownerDocument:U=globalThis.document}={}){super();ct(this,W);ct(this,V);ct(this,st);ct(this,D);ct(this,X);ct(this,it);ct(this,M);ct(this,l);ct(this,c);ct(this,P);ct(this,$);ct(this,B,0);ut(this,D,R),ut(this,X,U)}addFilter(R){if(!R)return"none";let U=s(this,W,le).get(R);if(U)return U;let Z,ot,gt,St;if(R.length===1){const Ct=R[0],Bt=new Array(256);for(let zt=0;zt<256;zt++)Bt[zt]=Ct[zt]/255;St=Z=ot=gt=Bt.join(",")}else{const[Ct,Bt,zt]=R,Wt=new Array(256),Dt=new Array(256),Mt=new Array(256);for(let Gt=0;Gt<256;Gt++)Wt[Gt]=Ct[Gt]/255,Dt[Gt]=Bt[Gt]/255,Mt[Gt]=zt[Gt]/255;Z=Wt.join(","),ot=Dt.join(","),gt=Mt.join(","),St=`${Z}${ot}${gt}`}if(U=s(this,W,le).get(St),U)return s(this,W,le).set(R,U),U;const rt=`g_${s(this,D)}_transfer_map_${pe(this,B)._++}`,q=`url(#${rt})`;s(this,W,le).set(R,q),s(this,W,le).set(St,q);const wt=nt(this,W,Ee).call(this,rt);return nt(this,W,me).call(this,Z,ot,gt,wt),q}addHCMFilter(R,U){var Bt;const Z=`${R}-${U}`;if(s(this,M)===Z)return s(this,l);if(ut(this,M,Z),ut(this,l,"none"),(Bt=s(this,it))==null||Bt.remove(),!R||!U)return s(this,l);const ot=nt(this,W,ge).call(this,R);R=r.Util.makeHexColor(...ot);const gt=nt(this,W,ge).call(this,U);if(U=r.Util.makeHexColor(...gt),s(this,W,ce).style.color="",R==="#000000"&&U==="#ffffff"||R===U)return s(this,l);const St=new Array(256);for(let zt=0;zt<=255;zt++){const Wt=zt/255;St[zt]=Wt<=.03928?Wt/12.92:((Wt+.055)/1.055)**2.4}const rt=St.join(","),q=`g_${s(this,D)}_hcm_filter`,wt=ut(this,c,nt(this,W,Ee).call(this,q));nt(this,W,me).call(this,rt,rt,rt,wt),nt(this,W,Xe).call(this,wt);const Ct=(zt,Wt)=>{const Dt=ot[zt]/255,Mt=gt[zt]/255,Gt=new Array(Wt+1);for(let qt=0;qt<=Wt;qt++)Gt[qt]=Dt+qt/Wt*(Mt-Dt);return Gt.join(",")};return nt(this,W,me).call(this,Ct(0,5),Ct(1,5),Ct(2,5),wt),ut(this,l,`url(#${q})`),s(this,l)}addHighlightHCMFilter(R,U,Z,ot){var Mt;const gt=`${R}-${U}-${Z}-${ot}`;if(s(this,P)===gt)return s(this,$);if(ut(this,P,gt),ut(this,$,"none"),(Mt=s(this,c))==null||Mt.remove(),!R||!U)return s(this,$);const[St,rt]=[R,U].map(nt(this,W,ge).bind(this));let q=Math.round(.2126*St[0]+.7152*St[1]+.0722*St[2]),wt=Math.round(.2126*rt[0]+.7152*rt[1]+.0722*rt[2]),[Ct,Bt]=[Z,ot].map(nt(this,W,ge).bind(this));wt<q&&([q,wt,Ct,Bt]=[wt,q,Bt,Ct]),s(this,W,ce).style.color="";const zt=(Gt,qt,At)=>{const lt=new Array(256),dt=(wt-q)/At,kt=Gt/255,Xt=(qt-Gt)/(255*At);let Kt=0;for(let H=0;H<=At;H++){const xt=Math.round(q+H*dt),Tt=kt+H*Xt;for(let Ot=Kt;Ot<=xt;Ot++)lt[Ot]=Tt;Kt=xt+1}for(let H=Kt;H<256;H++)lt[H]=lt[Kt-1];return lt.join(",")},Wt=`g_${s(this,D)}_hcm_highlight_filter`,Dt=ut(this,c,nt(this,W,Ee).call(this,Wt));return nt(this,W,Xe).call(this,Dt),nt(this,W,me).call(this,zt(Ct[0],Bt[0],5),zt(Ct[1],Bt[1],5),zt(Ct[2],Bt[2],5),Dt),ut(this,$,`url(#${Wt})`),s(this,$)}destroy(R=!1){R&&(s(this,l)||s(this,$))||(s(this,st)&&(s(this,st).parentNode.parentNode.remove(),ut(this,st,null)),s(this,V)&&(s(this,V).clear(),ut(this,V,null)),ut(this,B,0))}}V=new WeakMap,st=new WeakMap,D=new WeakMap,X=new WeakMap,it=new WeakMap,M=new WeakMap,l=new WeakMap,c=new WeakMap,P=new WeakMap,$=new WeakMap,B=new WeakMap,W=new WeakSet,le=function(){return s(this,V)||ut(this,V,new Map)},ce=function(){if(!s(this,st)){const R=s(this,X).createElement("div"),{style:U}=R;U.visibility="hidden",U.contain="strict",U.width=U.height=0,U.position="absolute",U.top=U.left=0,U.zIndex=-1;const Z=s(this,X).createElementNS(S,"svg");Z.setAttribute("width",0),Z.setAttribute("height",0),ut(this,st,s(this,X).createElementNS(S,"defs")),R.append(Z),Z.append(s(this,st)),s(this,X).body.append(R)}return s(this,st)},Xe=function(R){const U=s(this,X).createElementNS(S,"feColorMatrix");U.setAttribute("type","matrix"),U.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),R.append(U)},Ee=function(R){const U=s(this,X).createElementNS(S,"filter");return U.setAttribute("color-interpolation-filters","sRGB"),U.setAttribute("id",R),s(this,W,ce).append(U),U},Se=function(R,U,Z){const ot=s(this,X).createElementNS(S,U);ot.setAttribute("type","discrete"),ot.setAttribute("tableValues",Z),R.append(ot)},me=function(R,U,Z,ot){const gt=s(this,X).createElementNS(S,"feComponentTransfer");ot.append(gt),nt(this,W,Se).call(this,gt,"feFuncR",R),nt(this,W,Se).call(this,gt,"feFuncG",U),nt(this,W,Se).call(this,gt,"feFuncB",Z)},ge=function(R){return s(this,W,ce).style.color=R,d(getComputedStyle(s(this,W,ce)).getPropertyValue("color"))},e.DOMFilterFactory=N;class v extends n.BaseCanvasFactory{constructor({ownerDocument:tt=globalThis.document}={}){super(),this._document=tt}_createCanvas(tt,R){const U=this._document.createElement("canvas");return U.width=tt,U.height=R,U}}e.DOMCanvasFactory=v;async function b(et,tt=!1){if(E(et,document.baseURI)){const R=await fetch(et);if(!R.ok)throw new Error(R.statusText);return tt?new Uint8Array(await R.arrayBuffer()):(0,r.stringToBytes)(await R.text())}return new Promise((R,U)=>{const Z=new XMLHttpRequest;Z.open("GET",et,!0),tt&&(Z.responseType="arraybuffer"),Z.onreadystatechange=()=>{if(Z.readyState===XMLHttpRequest.DONE){if(Z.status===200||Z.status===0){let ot;if(tt&&Z.response?ot=new Uint8Array(Z.response):!tt&&Z.responseText&&(ot=(0,r.stringToBytes)(Z.responseText)),ot){R(ot);return}}U(new Error(Z.statusText))}},Z.send(null)})}class p extends n.BaseCMapReaderFactory{_fetchData(tt,R){return b(tt,this.isCompressed).then(U=>({cMapData:U,compressionType:R}))}}e.DOMCMapReaderFactory=p;class k extends n.BaseStandardFontDataFactory{_fetchData(tt){return b(tt,!0)}}e.DOMStandardFontDataFactory=k;class I extends n.BaseSVGFactory{_createSVG(tt){return document.createElementNS(S,tt)}}e.DOMSVGFactory=I;class A{constructor({viewBox:tt,scale:R,rotation:U,offsetX:Z=0,offsetY:ot=0,dontFlip:gt=!1}){this.viewBox=tt,this.scale=R,this.rotation=U,this.offsetX=Z,this.offsetY=ot;const St=(tt[2]+tt[0])/2,rt=(tt[3]+tt[1])/2;let q,wt,Ct,Bt;switch(U%=360,U<0&&(U+=360),U){case 180:q=-1,wt=0,Ct=0,Bt=1;break;case 90:q=0,wt=1,Ct=1,Bt=0;break;case 270:q=0,wt=-1,Ct=-1,Bt=0;break;case 0:q=1,wt=0,Ct=0,Bt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}gt&&(Ct=-Ct,Bt=-Bt);let zt,Wt,Dt,Mt;q===0?(zt=Math.abs(rt-tt[1])*R+Z,Wt=Math.abs(St-tt[0])*R+ot,Dt=(tt[3]-tt[1])*R,Mt=(tt[2]-tt[0])*R):(zt=Math.abs(St-tt[0])*R+Z,Wt=Math.abs(rt-tt[1])*R+ot,Dt=(tt[2]-tt[0])*R,Mt=(tt[3]-tt[1])*R),this.transform=[q*R,wt*R,Ct*R,Bt*R,zt-q*R*St-Ct*R*rt,Wt-wt*R*St-Bt*R*rt],this.width=Dt,this.height=Mt}get rawDims(){const{viewBox:tt}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:tt[2]-tt[0],pageHeight:tt[3]-tt[1],pageX:tt[0],pageY:tt[1]})}clone({scale:tt=this.scale,rotation:R=this.rotation,offsetX:U=this.offsetX,offsetY:Z=this.offsetY,dontFlip:ot=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:tt,rotation:R,offsetX:U,offsetY:Z,dontFlip:ot})}convertToViewportPoint(tt,R){return r.Util.applyTransform([tt,R],this.transform)}convertToViewportRectangle(tt){const R=r.Util.applyTransform([tt[0],tt[1]],this.transform),U=r.Util.applyTransform([tt[2],tt[3]],this.transform);return[R[0],R[1],U[0],U[1]]}convertToPdfPoint(tt,R){return r.Util.applyInverseTransform([tt,R],this.transform)}}e.PageViewport=A;class g extends r.BaseException{constructor(tt,R=0){super(tt,"RenderingCancelledException"),this.extraDelay=R}}e.RenderingCancelledException=g;function w(et){const tt=et.length;let R=0;for(;R<tt&&et[R].trim()==="";)R++;return et.substring(R,R+5).toLowerCase()==="data:"}function y(et){return typeof et=="string"&&/\.pdf$/i.test(et)}function h(et,tt=!1){return tt||([et]=et.split(/[#?]/,1)),et.substring(et.lastIndexOf("/")+1)}function x(et,tt="document.pdf"){if(typeof et!="string")return tt;if(w(et))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tt;const R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,U=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Z=R.exec(et);let ot=U.exec(Z[1])||U.exec(Z[2])||U.exec(Z[3]);if(ot&&(ot=ot[0],ot.includes("%")))try{ot=U.exec(decodeURIComponent(ot))[0]}catch{}return ot||tt}class F{constructor(){Qt(this,"started",Object.create(null));Qt(this,"times",[])}time(tt){tt in this.started&&(0,r.warn)(`Timer is already running for ${tt}`),this.started[tt]=Date.now()}timeEnd(tt){tt in this.started||(0,r.warn)(`Timer has not been started for ${tt}`),this.times.push({name:tt,start:this.started[tt],end:Date.now()}),delete this.started[tt]}toString(){const tt=[];let R=0;for(const{name:U}of this.times)R=Math.max(U.length,R);for(const{name:U,start:Z,end:ot}of this.times)tt.push(`${U.padEnd(R)} ${ot-Z}ms
`);return tt.join("")}}e.StatTimer=F;function E(et,tt){try{const{protocol:R}=tt?new URL(et,tt):new URL(et);return R==="http:"||R==="https:"}catch{return!1}}function o(et){et.preventDefault()}function f(et,tt=!1){return new Promise((R,U)=>{const Z=document.createElement("script");Z.src=et,Z.onload=function(ot){tt&&Z.remove(),R(ot)},Z.onerror=function(){U(new Error(`Cannot load script at: ${Z.src}`))},(document.head||document.documentElement).append(Z)})}function a(et){console.log("Deprecated API usage: "+et)}let u;class m{static toDateObject(tt){if(!tt||typeof tt!="string")return null;u||(u=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const R=u.exec(tt);if(!R)return null;const U=parseInt(R[1],10);let Z=parseInt(R[2],10);Z=Z>=1&&Z<=12?Z-1:0;let ot=parseInt(R[3],10);ot=ot>=1&&ot<=31?ot:1;let gt=parseInt(R[4],10);gt=gt>=0&&gt<=23?gt:0;let St=parseInt(R[5],10);St=St>=0&&St<=59?St:0;let rt=parseInt(R[6],10);rt=rt>=0&&rt<=59?rt:0;const q=R[7]||"Z";let wt=parseInt(R[8],10);wt=wt>=0&&wt<=23?wt:0;let Ct=parseInt(R[9],10)||0;return Ct=Ct>=0&&Ct<=59?Ct:0,q==="-"?(gt+=wt,St+=Ct):q==="+"&&(gt-=wt,St-=Ct),new Date(Date.UTC(U,Z,ot,gt,St,rt))}}e.PDFDateString=m;function j(et,{scale:tt=1,rotation:R=0}){const{width:U,height:Z}=et.attributes.style,ot=[0,0,parseInt(U),parseInt(Z)];return new A({viewBox:ot,scale:tt,rotation:R})}function d(et){if(et.startsWith("#")){const tt=parseInt(et.slice(1),16);return[(tt&16711680)>>16,(tt&65280)>>8,tt&255]}return et.startsWith("rgb(")?et.slice(4,-1).split(",").map(tt=>parseInt(tt)):et.startsWith("rgba(")?et.slice(5,-1).split(",").map(tt=>parseInt(tt)).slice(0,3):((0,r.warn)(`Not a valid color format: "${et}"`),[0,0,0])}function T(et){const tt=document.createElement("span");tt.style.visibility="hidden",document.body.append(tt);for(const R of et.keys()){tt.style.color=R;const U=window.getComputedStyle(tt).color;et.set(R,d(U))}tt.remove()}function L(et){const{a:tt,b:R,c:U,d:Z,e:ot,f:gt}=et.getTransform();return[tt,R,U,Z,ot,gt]}function K(et){const{a:tt,b:R,c:U,d:Z,e:ot,f:gt}=et.getTransform().invertSelf();return[tt,R,U,Z,ot,gt]}function G(et,tt,R=!1,U=!0){if(tt instanceof A){const{pageWidth:Z,pageHeight:ot}=tt.rawDims,{style:gt}=et,St=r.FeatureTest.isCSSRoundSupported,rt=`var(--scale-factor) * ${Z}px`,q=`var(--scale-factor) * ${ot}px`,wt=St?`round(${rt}, 1px)`:`calc(${rt})`,Ct=St?`round(${q}, 1px)`:`calc(${q})`;!R||tt.rotation%180===0?(gt.width=wt,gt.height=Ct):(gt.width=Ct,gt.height=wt)}U&&et.setAttribute("data-main-rotation",tt.rotation)}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=i(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,k){return"none"}addHighlightHCMFilter(p,k,I,A){return"none"}destroy(p=!1){}}e.BaseFilterFactory=r;class S{constructor(){this.constructor===S&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,k){if(p<=0||k<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(p,k);return{canvas:I,context:I.getContext("2d")}}reset(p,k,I){if(!p.canvas)throw new Error("Canvas is not specified");if(k<=0||I<=0)throw new Error("Invalid canvas size");p.canvas.width=k,p.canvas.height=I}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,k){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=S;class C{constructor({baseUrl:p=null,isCompressed:k=!0}){this.constructor===C&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=k}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const k=this.baseUrl+p+(this.isCompressed?".bcmap":""),I=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(k,I).catch(A=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(p,k){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=C;class N{constructor({baseUrl:p=null}){this.constructor===N&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${p}`;return this._fetchData(k).catch(I=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(p){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=N;class v{constructor(){this.constructor===v&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,k,I=!1){if(p<=0||k<=0)throw new Error("Invalid SVG dimensions");const A=this._createSVG("svg:svg");return A.setAttribute("version","1.1"),I||(A.setAttribute("width",`${p}px`),A.setAttribute("height",`${k}px`)),A.setAttribute("preserveAspectRatio","none"),A.setAttribute("viewBox",`0 0 ${p} ${k}`),A}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=v},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,S=4294901760,C=65535;class N{constructor(b){this.h1=b?b&4294967295:r,this.h2=b?b&4294967295:r}update(b){let p,k;if(typeof b=="string"){p=new Uint8Array(b.length*2),k=0;for(let a=0,u=b.length;a<u;a++){const m=b.charCodeAt(a);m<=255?p[k++]=m:(p[k++]=m>>>8,p[k++]=m&255)}}else if((0,n.isArrayBuffer)(b))p=b.slice(),k=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const I=k>>2,A=k-I*4,g=new Uint32Array(p.buffer,0,I);let w=0,y=0,h=this.h1,x=this.h2;const F=3432918353,E=461845907,o=F&C,f=E&C;for(let a=0;a<I;a++)a&1?(w=g[a],w=w*F&S|w*o&C,w=w<<15|w>>>17,w=w*E&S|w*f&C,h^=w,h=h<<13|h>>>19,h=h*5+3864292196):(y=g[a],y=y*F&S|y*o&C,y=y<<15|y>>>17,y=y*E&S|y*f&C,x^=y,x=x<<13|x>>>19,x=x*5+3864292196);switch(w=0,A){case 3:w^=p[I*4+2]<<16;case 2:w^=p[I*4+1]<<8;case 1:w^=p[I*4],w=w*F&S|w*o&C,w=w<<15|w>>>17,w=w*E&S|w*f&C,I&1?h^=w:x^=w}this.h1=h,this.h2=x}hexdigest(){let b=this.h1,p=this.h2;return b^=p>>>1,b=b*3981806797&S|b*36045&C,p=p*4283543511&S|((p<<16|b>>>16)*2950163797&S)>>>16,b^=p>>>1,b=b*444984403&S|b*60499&C,p=p*3301882366&S|((p<<16|b>>>16)*3120437893&S)>>>16,b^=p>>>1,(b>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=N},(t,e,i)=>{var C;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=i(1);class r{constructor({ownerDocument:v=globalThis.document,styleElement:b=null}){ct(this,C,new Set);this._document=v,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(v){this.nativeFontFaces.add(v),this._document.fonts.add(v)}removeNativeFontFace(v){this.nativeFontFaces.delete(v),this._document.fonts.delete(v)}insertRule(v){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const b=this.styleElement.sheet;b.insertRule(v,b.cssRules.length)}clear(){for(const v of this.nativeFontFaces)this._document.fonts.delete(v);this.nativeFontFaces.clear(),s(this,C).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(v){if(!(!v||s(this,C).has(v.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:b,src:p,style:k}=v,I=new FontFace(b,p,k);this.addNativeFontFace(I);try{await I.load(),s(this,C).add(b)}catch{(0,n.warn)(`Cannot load system font: ${v.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(I)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(v){if(v.attached||v.missingFile&&!v.systemFontInfo)return;if(v.attached=!0,v.systemFontInfo){await this.loadSystemFont(v.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=v.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(k){throw(0,n.warn)(`Failed to load font '${p.family}': '${k}'.`),v.disableFontFace=!0,k}}return}const b=v.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const k=this._queueLoadingCallback(p);this._prepareFontLoadEvent(v,k)})}}get isFontLoadingAPISupported(){var b;const v=!!((b=this._document)!=null&&b.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",v)}get isSyncFontLoadingSupported(){let v=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(v=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",v)}_queueLoadingCallback(v){function b(){for((0,n.assert)(!k.done,"completeRequest() cannot be called twice."),k.done=!0;p.length>0&&p[0].done;){const I=p.shift();setTimeout(I.callback,0)}}const{loadingRequests:p}=this,k={done:!1,complete:b,callback:v};return p.push(k),k}get _loadTestFont(){const v=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",v)}_prepareFontLoadEvent(v,b){function p(d,T){return d.charCodeAt(T)<<24|d.charCodeAt(T+1)<<16|d.charCodeAt(T+2)<<8|d.charCodeAt(T+3)&255}function k(d,T,L,K){const G=d.substring(0,T),Y=d.substring(T+L);return G+K+Y}let I,A;const g=this._document.createElement("canvas");g.width=1,g.height=1;const w=g.getContext("2d");let y=0;function h(d,T){if(++y>30){(0,n.warn)("Load test font never loaded."),T();return}if(w.font="30px "+d,w.fillText(".",0,20),w.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,d,T))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=k(F,976,x.length,x);const o=16,f=1482184792;let a=p(F,o);for(I=0,A=x.length-3;I<A;I+=4)a=a-f+p(x,I)|0;I<x.length&&(a=a-f+p(x+"XXX",I)|0),F=k(F,o,4,(0,n.string32)(a));const u=`url(data:font/opentype;base64,${btoa(F)});`,m=`@font-face {font-family:"${x}";src:${u}}`;this.insertRule(m);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const d of[v.loadedName,x]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=d,j.append(T)}this._document.body.append(j),h(x,()=>{j.remove(),b.complete()})}}C=new WeakMap,e.FontLoader=r;class S{constructor(v,{isEvalSupported:b=!0,disableFontFace:p=!1,ignoreErrors:k=!1,inspectFont:I=null}){this.compiledGlyphs=Object.create(null);for(const A in v)this[A]=v[A];this.isEvalSupported=b!==!1,this.disableFontFace=p===!0,this.ignoreErrors=k===!0,this._inspectFont=I}createNativeFontFace(){var b;if(!this.data||this.disableFontFace)return null;let v;if(!this.cssFontInfo)v=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),v=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(b=this._inspectFont)==null||b.call(this,this),v}createFontFaceRule(){var k;if(!this.data||this.disableFontFace)return null;const v=(0,n.bytesToString)(this.data),b=`url(data:${this.mimetype};base64,${btoa(v)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${b}}`;else{let I=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(I+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${I}src:${b}}`}return(k=this._inspectFont)==null||k.call(this,this,b),p}getPathGenerator(v,b){if(this.compiledGlyphs[b]!==void 0)return this.compiledGlyphs[b];let p;try{p=v.get(this.loadedName+"_path_"+b)}catch(k){if(!this.ignoreErrors)throw k;return(0,n.warn)(`getPathGenerator - ignoring character: "${k}".`),this.compiledGlyphs[b]=function(I,A){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const k=[];for(const I of p){const A=I.args!==void 0?I.args.join(","):"";k.push("c.",I.cmd,"(",A,`);
`)}return this.compiledGlyphs[b]=new Function("c","size",k.join(""))}return this.compiledGlyphs[b]=function(k,I){for(const A of p)A.cmd==="scale"&&(A.args=[I,-I]),k[A.cmd].apply(k,A.args)}}}e.FontFaceObject=S},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=i(7);i(1);const r=function(b){return new Promise((p,k)=>{require$$5.readFile(b,(A,g)=>{if(A||!g){k(new Error(A));return}p(new Uint8Array(g))})})};class S extends n.BaseFilterFactory{}e.NodeFilterFactory=S;class C extends n.BaseCanvasFactory{_createCanvas(p,k){return require$$5.createCanvas(p,k)}}e.NodeCanvasFactory=C;class N extends n.BaseCMapReaderFactory{_fetchData(p,k){return r(p).then(I=>({cMapData:I,compressionType:k}))}}e.NodeCMapReaderFactory=N;class v extends n.BaseStandardFontDataFactory{_fetchData(p){return r(p)}}e.NodeStandardFontDataFactory=v},(t,e,i)=>{var st,Ke,Ye;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=i(1),r=i(6),S=i(12),C=i(13);const N=16,v=100,b=4096,p=15,k=10,I=1e3,A=16;function g(M,l){if(M._removeMirroring)throw new Error("Context is already forwarding operations.");M.__originalSave=M.save,M.__originalRestore=M.restore,M.__originalRotate=M.rotate,M.__originalScale=M.scale,M.__originalTranslate=M.translate,M.__originalTransform=M.transform,M.__originalSetTransform=M.setTransform,M.__originalResetTransform=M.resetTransform,M.__originalClip=M.clip,M.__originalMoveTo=M.moveTo,M.__originalLineTo=M.lineTo,M.__originalBezierCurveTo=M.bezierCurveTo,M.__originalRect=M.rect,M.__originalClosePath=M.closePath,M.__originalBeginPath=M.beginPath,M._removeMirroring=()=>{M.save=M.__originalSave,M.restore=M.__originalRestore,M.rotate=M.__originalRotate,M.scale=M.__originalScale,M.translate=M.__originalTranslate,M.transform=M.__originalTransform,M.setTransform=M.__originalSetTransform,M.resetTransform=M.__originalResetTransform,M.clip=M.__originalClip,M.moveTo=M.__originalMoveTo,M.lineTo=M.__originalLineTo,M.bezierCurveTo=M.__originalBezierCurveTo,M.rect=M.__originalRect,M.closePath=M.__originalClosePath,M.beginPath=M.__originalBeginPath,delete M._removeMirroring},M.save=function(){l.save(),this.__originalSave()},M.restore=function(){l.restore(),this.__originalRestore()},M.translate=function(P,$){l.translate(P,$),this.__originalTranslate(P,$)},M.scale=function(P,$){l.scale(P,$),this.__originalScale(P,$)},M.transform=function(P,$,B,W,Q,at){l.transform(P,$,B,W,Q,at),this.__originalTransform(P,$,B,W,Q,at)},M.setTransform=function(P,$,B,W,Q,at){l.setTransform(P,$,B,W,Q,at),this.__originalSetTransform(P,$,B,W,Q,at)},M.resetTransform=function(){l.resetTransform(),this.__originalResetTransform()},M.rotate=function(P){l.rotate(P),this.__originalRotate(P)},M.clip=function(P){l.clip(P),this.__originalClip(P)},M.moveTo=function(c,P){l.moveTo(c,P),this.__originalMoveTo(c,P)},M.lineTo=function(c,P){l.lineTo(c,P),this.__originalLineTo(c,P)},M.bezierCurveTo=function(c,P,$,B,W,Q){l.bezierCurveTo(c,P,$,B,W,Q),this.__originalBezierCurveTo(c,P,$,B,W,Q)},M.rect=function(c,P,$,B){l.rect(c,P,$,B),this.__originalRect(c,P,$,B)},M.closePath=function(){l.closePath(),this.__originalClosePath()},M.beginPath=function(){l.beginPath(),this.__originalBeginPath()}}class w{constructor(l){this.canvasFactory=l,this.cache=Object.create(null)}getCanvas(l,c,P){let $;return this.cache[l]!==void 0?($=this.cache[l],this.canvasFactory.reset($,c,P)):($=this.canvasFactory.create(c,P),this.cache[l]=$),$}delete(l){delete this.cache[l]}clear(){for(const l in this.cache){const c=this.cache[l];this.canvasFactory.destroy(c),delete this.cache[l]}}}function y(M,l,c,P,$,B,W,Q,at,pt){const[ft,bt,vt,yt,et,tt]=(0,r.getCurrentTransform)(M);if(bt===0&&vt===0){const Z=W*ft+et,ot=Math.round(Z),gt=Q*yt+tt,St=Math.round(gt),rt=(W+at)*ft+et,q=Math.abs(Math.round(rt)-ot)||1,wt=(Q+pt)*yt+tt,Ct=Math.abs(Math.round(wt)-St)||1;return M.setTransform(Math.sign(ft),0,0,Math.sign(yt),ot,St),M.drawImage(l,c,P,$,B,0,0,q,Ct),M.setTransform(ft,bt,vt,yt,et,tt),[q,Ct]}if(ft===0&&yt===0){const Z=Q*vt+et,ot=Math.round(Z),gt=W*bt+tt,St=Math.round(gt),rt=(Q+pt)*vt+et,q=Math.abs(Math.round(rt)-ot)||1,wt=(W+at)*bt+tt,Ct=Math.abs(Math.round(wt)-St)||1;return M.setTransform(0,Math.sign(bt),Math.sign(vt),0,ot,St),M.drawImage(l,c,P,$,B,0,0,Ct,q),M.setTransform(ft,bt,vt,yt,et,tt),[Ct,q]}M.drawImage(l,c,P,$,B,W,Q,at,pt);const R=Math.hypot(ft,bt),U=Math.hypot(vt,yt);return[R*at,U*pt]}function h(M){const{width:l,height:c}=M;if(l>I||c>I)return null;const P=1e3,$=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),B=l+1;let W=new Uint8Array(B*(c+1)),Q,at,pt;const ft=l+7&-8;let bt=new Uint8Array(ft*c),vt=0;for(const U of M.data){let Z=128;for(;Z>0;)bt[vt++]=U&Z?0:255,Z>>=1}let yt=0;for(vt=0,bt[vt]!==0&&(W[0]=1,++yt),at=1;at<l;at++)bt[vt]!==bt[vt+1]&&(W[at]=bt[vt]?2:1,++yt),vt++;for(bt[vt]!==0&&(W[at]=2,++yt),Q=1;Q<c;Q++){vt=Q*ft,pt=Q*B,bt[vt-ft]!==bt[vt]&&(W[pt]=bt[vt]?1:8,++yt);let U=(bt[vt]?4:0)+(bt[vt-ft]?8:0);for(at=1;at<l;at++)U=(U>>2)+(bt[vt+1]?4:0)+(bt[vt-ft+1]?8:0),$[U]&&(W[pt+at]=$[U],++yt),vt++;if(bt[vt-ft]!==bt[vt]&&(W[pt+at]=bt[vt]?2:4,++yt),yt>P)return null}for(vt=ft*(c-1),pt=Q*B,bt[vt]!==0&&(W[pt]=8,++yt),at=1;at<l;at++)bt[vt]!==bt[vt+1]&&(W[pt+at]=bt[vt]?4:8,++yt),vt++;if(bt[vt]!==0&&(W[pt+at]=4,++yt),yt>P)return null;const et=new Int32Array([0,B,-1,0,-B,0,0,0,1]),tt=new Path2D;for(Q=0;yt&&Q<=c;Q++){let U=Q*B;const Z=U+l;for(;U<Z&&!W[U];)U++;if(U===Z)continue;tt.moveTo(U%B,Q);const ot=U;let gt=W[U];do{const St=et[gt];do U+=St;while(!W[U]);const rt=W[U];rt!==5&&rt!==10?(gt=rt,W[U]=0):(gt=rt&51*gt>>4,W[U]&=gt>>2|gt<<2),tt.lineTo(U%B,U/B|0),W[U]||--yt}while(ot!==U);--Q}return bt=null,W=null,function(U){U.save(),U.scale(1/l,-1/c),U.translate(0,-c),U.fill(tt),U.beginPath(),U.restore()}}class x{constructor(l,c){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,l,c])}clone(){const l=Object.create(this);return l.clipBox=this.clipBox.slice(),l}setCurrentPoint(l,c){this.x=l,this.y=c}updatePathMinMax(l,c,P){[c,P]=n.Util.applyTransform([c,P],l),this.minX=Math.min(this.minX,c),this.minY=Math.min(this.minY,P),this.maxX=Math.max(this.maxX,c),this.maxY=Math.max(this.maxY,P)}updateRectMinMax(l,c){const P=n.Util.applyTransform(c,l),$=n.Util.applyTransform(c.slice(2),l);this.minX=Math.min(this.minX,P[0],$[0]),this.minY=Math.min(this.minY,P[1],$[1]),this.maxX=Math.max(this.maxX,P[0],$[0]),this.maxY=Math.max(this.maxY,P[1],$[1])}updateScalingPathMinMax(l,c){n.Util.scaleMinMax(l,c),this.minX=Math.min(this.minX,c[0]),this.maxX=Math.max(this.maxX,c[1]),this.minY=Math.min(this.minY,c[2]),this.maxY=Math.max(this.maxY,c[3])}updateCurvePathMinMax(l,c,P,$,B,W,Q,at,pt,ft){const bt=n.Util.bezierBoundingBox(c,P,$,B,W,Q,at,pt);if(ft){ft[0]=Math.min(ft[0],bt[0],bt[2]),ft[1]=Math.max(ft[1],bt[0],bt[2]),ft[2]=Math.min(ft[2],bt[1],bt[3]),ft[3]=Math.max(ft[3],bt[1],bt[3]);return}this.updateRectMinMax(l,bt)}getPathBoundingBox(l=S.PathType.FILL,c=null){const P=[this.minX,this.minY,this.maxX,this.maxY];if(l===S.PathType.STROKE){c||(0,n.unreachable)("Stroke bounding box must include transform.");const $=n.Util.singularValueDecompose2dScale(c),B=$[0]*this.lineWidth/2,W=$[1]*this.lineWidth/2;P[0]-=B,P[1]-=W,P[2]+=B,P[3]+=W}return P}updateClipFromPath(){const l=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(l||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(l){this.clipBox=l,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(l=S.PathType.FILL,c=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(l,c))}}function F(M,l){if(typeof ImageData<"u"&&l instanceof ImageData){M.putImageData(l,0,0);return}const c=l.height,P=l.width,$=c%A,B=(c-$)/A,W=$===0?B:B+1,Q=M.createImageData(P,A);let at=0,pt;const ft=l.data,bt=Q.data;let vt,yt,et,tt;if(l.kind===n.ImageKind.GRAYSCALE_1BPP){const R=ft.byteLength,U=new Uint32Array(bt.buffer,0,bt.byteLength>>2),Z=U.length,ot=P+7>>3,gt=4294967295,St=n.FeatureTest.isLittleEndian?4278190080:255;for(vt=0;vt<W;vt++){for(et=vt<B?A:$,pt=0,yt=0;yt<et;yt++){const rt=R-at;let q=0;const wt=rt>ot?P:rt*8-7,Ct=wt&-8;let Bt=0,zt=0;for(;q<Ct;q+=8)zt=ft[at++],U[pt++]=zt&128?gt:St,U[pt++]=zt&64?gt:St,U[pt++]=zt&32?gt:St,U[pt++]=zt&16?gt:St,U[pt++]=zt&8?gt:St,U[pt++]=zt&4?gt:St,U[pt++]=zt&2?gt:St,U[pt++]=zt&1?gt:St;for(;q<wt;q++)Bt===0&&(zt=ft[at++],Bt=128),U[pt++]=zt&Bt?gt:St,Bt>>=1}for(;pt<Z;)U[pt++]=0;M.putImageData(Q,0,vt*A)}}else if(l.kind===n.ImageKind.RGBA_32BPP){for(yt=0,tt=P*A*4,vt=0;vt<B;vt++)bt.set(ft.subarray(at,at+tt)),at+=tt,M.putImageData(Q,0,yt),yt+=A;vt<W&&(tt=P*$*4,bt.set(ft.subarray(at,at+tt)),M.putImageData(Q,0,yt))}else if(l.kind===n.ImageKind.RGB_24BPP)for(et=A,tt=P*et,vt=0;vt<W;vt++){for(vt>=B&&(et=$,tt=P*et),pt=0,yt=tt;yt--;)bt[pt++]=ft[at++],bt[pt++]=ft[at++],bt[pt++]=ft[at++],bt[pt++]=255;M.putImageData(Q,0,vt*A)}else throw new Error(`bad image kind: ${l.kind}`)}function E(M,l){if(l.bitmap){M.drawImage(l.bitmap,0,0);return}const c=l.height,P=l.width,$=c%A,B=(c-$)/A,W=$===0?B:B+1,Q=M.createImageData(P,A);let at=0;const pt=l.data,ft=Q.data;for(let bt=0;bt<W;bt++){const vt=bt<B?A:$;({srcPos:at}=(0,C.convertBlackAndWhiteToRGBA)({src:pt,srcPos:at,dest:ft,width:P,height:vt,nonBlackColor:0})),M.putImageData(Q,0,bt*A)}}function o(M,l){const c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const P of c)M[P]!==void 0&&(l[P]=M[P]);M.setLineDash!==void 0&&(l.setLineDash(M.getLineDash()),l.lineDashOffset=M.lineDashOffset)}function f(M){if(M.strokeStyle=M.fillStyle="#000000",M.fillRule="nonzero",M.globalAlpha=1,M.lineWidth=1,M.lineCap="butt",M.lineJoin="miter",M.miterLimit=10,M.globalCompositeOperation="source-over",M.font="10px sans-serif",M.setLineDash!==void 0&&(M.setLineDash([]),M.lineDashOffset=0),!n.isNodeJS){const{filter:l}=M;l!=="none"&&l!==""&&(M.filter="none")}}function a(M,l,c,P){const $=M.length;for(let B=3;B<$;B+=4){const W=M[B];if(W===0)M[B-3]=l,M[B-2]=c,M[B-1]=P;else if(W<255){const Q=255-W;M[B-3]=M[B-3]*W+l*Q>>8,M[B-2]=M[B-2]*W+c*Q>>8,M[B-1]=M[B-1]*W+P*Q>>8}}}function u(M,l,c){const P=M.length,$=1/255;for(let B=3;B<P;B+=4){const W=c?c[M[B]]:M[B];l[B]=l[B]*W*$|0}}function m(M,l,c){const P=M.length;for(let $=3;$<P;$+=4){const B=M[$-3]*77+M[$-2]*152+M[$-1]*28;l[$]=c?l[$]*c[B>>8]>>8:l[$]*B>>16}}function j(M,l,c,P,$,B,W,Q,at,pt,ft){const bt=!!B,vt=bt?B[0]:0,yt=bt?B[1]:0,et=bt?B[2]:0,tt=$==="Luminosity"?m:u,U=Math.min(P,Math.ceil(1048576/c));for(let Z=0;Z<P;Z+=U){const ot=Math.min(U,P-Z),gt=M.getImageData(Q-pt,Z+(at-ft),c,ot),St=l.getImageData(Q,Z+at,c,ot);bt&&a(gt.data,vt,yt,et),tt(gt.data,St.data,W),l.putImageData(St,Q,Z+at)}}function d(M,l,c,P){const $=P[0],B=P[1],W=P[2]-$,Q=P[3]-B;W===0||Q===0||(j(l.context,c,W,Q,l.subtype,l.backdrop,l.transferMap,$,B,l.offsetX,l.offsetY),M.save(),M.globalAlpha=1,M.globalCompositeOperation="source-over",M.setTransform(1,0,0,1,0,0),M.drawImage(c.canvas,0,0),M.restore())}function T(M,l){const c=n.Util.singularValueDecompose2dScale(M);c[0]=Math.fround(c[0]),c[1]=Math.fround(c[1]);const P=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return l!==void 0?l:c[0]<=P||c[1]<=P}const L=["butt","round","square"],K=["miter","round","bevel"],G={},Y={},it=class it{constructor(l,c,P,$,B,{optionalContentConfig:W,markedContentStack:Q=null},at,pt){ct(this,st);this.ctx=l,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=c,this.objs=P,this.canvasFactory=$,this.filterFactory=B,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Q||[],this.optionalContentConfig=W,this.cachedCanvases=new w(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=at,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=pt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(l,c=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):c}beginDrawing({transform:l,viewport:c,transparency:P=!1,background:$=null}){const B=this.ctx.canvas.width,W=this.ctx.canvas.height,Q=this.ctx.fillStyle;if(this.ctx.fillStyle=$||"#ffffff",this.ctx.fillRect(0,0,B,W),this.ctx.fillStyle=Q,P){const at=this.cachedCanvases.getCanvas("transparent",B,W);this.compositeCtx=this.ctx,this.transparentCanvas=at.canvas,this.ctx=at.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),l&&(this.ctx.transform(...l),this.outputScaleX=l[0],this.outputScaleY=l[0]),this.ctx.transform(...c.transform),this.viewportScale=c.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(l,c,P,$){const B=l.argsArray,W=l.fnArray;let Q=c||0;const at=B.length;if(at===Q)return Q;const pt=at-Q>k&&typeof P=="function",ft=pt?Date.now()+p:0;let bt=0;const vt=this.commonObjs,yt=this.objs;let et;for(;;){if($!==void 0&&Q===$.nextBreakPoint)return $.breakIt(Q,P),Q;if(et=W[Q],et!==n.OPS.dependency)this[et].apply(this,B[Q]);else for(const tt of B[Q]){const R=tt.startsWith("g_")?vt:yt;if(!R.has(tt))return R.get(tt,P),Q}if(Q++,Q===at)return Q;if(pt&&++bt>k){if(Date.now()>ft)return P(),Q;bt=0}}}endDrawing(){nt(this,st,Ke).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const l of this._cachedBitmapsMap.values()){for(const c of l.values())typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement&&(c.width=c.height=0);l.clear()}this._cachedBitmapsMap.clear(),nt(this,st,Ye).call(this)}_scaleImage(l,c){const P=l.width,$=l.height;let B=Math.max(Math.hypot(c[0],c[1]),1),W=Math.max(Math.hypot(c[2],c[3]),1),Q=P,at=$,pt="prescale1",ft,bt;for(;B>2&&Q>1||W>2&&at>1;){let vt=Q,yt=at;B>2&&Q>1&&(vt=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q/2),B/=Q/vt),W>2&&at>1&&(yt=at>=16384?Math.floor(at/2)-1||1:Math.ceil(at)/2,W/=at/yt),ft=this.cachedCanvases.getCanvas(pt,vt,yt),bt=ft.context,bt.clearRect(0,0,vt,yt),bt.drawImage(l,0,0,Q,at,0,0,vt,yt),l=ft.canvas,Q=vt,at=yt,pt=pt==="prescale1"?"prescale2":"prescale1"}return{img:l,paintWidth:Q,paintHeight:at}}_createMaskCanvas(l){const c=this.ctx,{width:P,height:$}=l,B=this.current.fillColor,W=this.current.patternFill,Q=(0,r.getCurrentTransform)(c);let at,pt,ft,bt;if((l.bitmap||l.data)&&l.count>1){const q=l.bitmap||l.data.buffer;pt=JSON.stringify(W?Q:[Q.slice(0,4),B]),at=this._cachedBitmapsMap.get(q),at||(at=new Map,this._cachedBitmapsMap.set(q,at));const wt=at.get(pt);if(wt&&!W){const Ct=Math.round(Math.min(Q[0],Q[2])+Q[4]),Bt=Math.round(Math.min(Q[1],Q[3])+Q[5]);return{canvas:wt,offsetX:Ct,offsetY:Bt}}ft=wt}ft||(bt=this.cachedCanvases.getCanvas("maskCanvas",P,$),E(bt.context,l));let vt=n.Util.transform(Q,[1/P,0,0,-1/$,0,0]);vt=n.Util.transform(vt,[1,0,0,1,0,-$]);const yt=n.Util.applyTransform([0,0],vt),et=n.Util.applyTransform([P,$],vt),tt=n.Util.normalizeRect([yt[0],yt[1],et[0],et[1]]),R=Math.round(tt[2]-tt[0])||1,U=Math.round(tt[3]-tt[1])||1,Z=this.cachedCanvases.getCanvas("fillCanvas",R,U),ot=Z.context,gt=Math.min(yt[0],et[0]),St=Math.min(yt[1],et[1]);ot.translate(-gt,-St),ot.transform(...vt),ft||(ft=this._scaleImage(bt.canvas,(0,r.getCurrentTransformInverse)(ot)),ft=ft.img,at&&W&&at.set(pt,ft)),ot.imageSmoothingEnabled=T((0,r.getCurrentTransform)(ot),l.interpolate),y(ot,ft,0,0,ft.width,ft.height,0,0,P,$),ot.globalCompositeOperation="source-in";const rt=n.Util.transform((0,r.getCurrentTransformInverse)(ot),[1,0,0,1,-gt,-St]);return ot.fillStyle=W?B.getPattern(c,this,rt,S.PathType.FILL):B,ot.fillRect(0,0,P,$),at&&!W&&(this.cachedCanvases.delete("fillCanvas"),at.set(pt,Z.canvas)),{canvas:Z.canvas,offsetX:Math.round(gt),offsetY:Math.round(St)}}setLineWidth(l){l!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=l,this.ctx.lineWidth=l}setLineCap(l){this.ctx.lineCap=L[l]}setLineJoin(l){this.ctx.lineJoin=K[l]}setMiterLimit(l){this.ctx.miterLimit=l}setDash(l,c){const P=this.ctx;P.setLineDash!==void 0&&(P.setLineDash(l),P.lineDashOffset=c)}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[c,P]of l)switch(c){case"LW":this.setLineWidth(P);break;case"LC":this.setLineCap(P);break;case"LJ":this.setLineJoin(P);break;case"ML":this.setMiterLimit(P);break;case"D":this.setDash(P[0],P[1]);break;case"RI":this.setRenderingIntent(P);break;case"FL":this.setFlatness(P);break;case"Font":this.setFont(P[0],P[1]);break;case"CA":this.current.strokeAlpha=P;break;case"ca":this.current.fillAlpha=P,this.ctx.globalAlpha=P;break;case"BM":this.ctx.globalCompositeOperation=P;break;case"SMask":this.current.activeSMask=P?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(P);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const l=this.inSMaskMode;this.current.activeSMask&&!l?this.beginSMaskMode():!this.current.activeSMask&&l&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const l=this.ctx.canvas.width,c=this.ctx.canvas.height,P="smaskGroupAt"+this.groupLevel,$=this.cachedCanvases.getCanvas(P,l,c);this.suspendedCtx=this.ctx,this.ctx=$.context;const B=this.ctx;B.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,B),g(B,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(l){if(!this.current.activeSMask)return;l?(l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l[2]=Math.ceil(l[2]),l[3]=Math.ceil(l[3])):l=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const c=this.current.activeSMask,P=this.suspendedCtx;d(P,c,this.ctx,l),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const l=this.current;this.stateStack.push(l),this.current=l.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(l,c,P,$,B,W){this.ctx.transform(l,c,P,$,B,W),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(l,c,P){const $=this.ctx,B=this.current;let W=B.x,Q=B.y,at,pt;const ft=(0,r.getCurrentTransform)($),bt=ft[0]===0&&ft[3]===0||ft[1]===0&&ft[2]===0,vt=bt?P.slice(0):null;for(let yt=0,et=0,tt=l.length;yt<tt;yt++)switch(l[yt]|0){case n.OPS.rectangle:W=c[et++],Q=c[et++];const R=c[et++],U=c[et++],Z=W+R,ot=Q+U;$.moveTo(W,Q),R===0||U===0?$.lineTo(Z,ot):($.lineTo(Z,Q),$.lineTo(Z,ot),$.lineTo(W,ot)),bt||B.updateRectMinMax(ft,[W,Q,Z,ot]),$.closePath();break;case n.OPS.moveTo:W=c[et++],Q=c[et++],$.moveTo(W,Q),bt||B.updatePathMinMax(ft,W,Q);break;case n.OPS.lineTo:W=c[et++],Q=c[et++],$.lineTo(W,Q),bt||B.updatePathMinMax(ft,W,Q);break;case n.OPS.curveTo:at=W,pt=Q,W=c[et+4],Q=c[et+5],$.bezierCurveTo(c[et],c[et+1],c[et+2],c[et+3],W,Q),B.updateCurvePathMinMax(ft,at,pt,c[et],c[et+1],c[et+2],c[et+3],W,Q,vt),et+=6;break;case n.OPS.curveTo2:at=W,pt=Q,$.bezierCurveTo(W,Q,c[et],c[et+1],c[et+2],c[et+3]),B.updateCurvePathMinMax(ft,at,pt,W,Q,c[et],c[et+1],c[et+2],c[et+3],vt),W=c[et+2],Q=c[et+3],et+=4;break;case n.OPS.curveTo3:at=W,pt=Q,W=c[et+2],Q=c[et+3],$.bezierCurveTo(c[et],c[et+1],W,Q,W,Q),B.updateCurvePathMinMax(ft,at,pt,c[et],c[et+1],W,Q,W,Q,vt),et+=4;break;case n.OPS.closePath:$.closePath();break}bt&&B.updateScalingPathMinMax(ft,vt),B.setCurrentPoint(W,Q)}closePath(){this.ctx.closePath()}stroke(l=!0){const c=this.ctx,P=this.current.strokeColor;c.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof P=="object"&&(P!=null&&P.getPattern)?(c.save(),c.strokeStyle=P.getPattern(c,this,(0,r.getCurrentTransformInverse)(c),S.PathType.STROKE),this.rescaleAndStroke(!1),c.restore()):this.rescaleAndStroke(!0)),l&&this.consumePath(this.current.getClippedPathBoundingBox()),c.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(l=!0){const c=this.ctx,P=this.current.fillColor,$=this.current.patternFill;let B=!1;$&&(c.save(),c.fillStyle=P.getPattern(c,this,(0,r.getCurrentTransformInverse)(c),S.PathType.FILL),B=!0);const W=this.current.getClippedPathBoundingBox();this.contentVisible&&W!==null&&(this.pendingEOFill?(c.fill("evenodd"),this.pendingEOFill=!1):c.fill()),B&&c.restore(),l&&this.consumePath(W)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const l=this.pendingTextPaths,c=this.ctx;if(l===void 0){c.beginPath();return}c.save(),c.beginPath();for(const P of l)c.setTransform(...P.transform),c.translate(P.x,P.y),P.addToPath(c,P.fontSize);c.restore(),c.clip(),c.beginPath(),delete this.pendingTextPaths}setCharSpacing(l){this.current.charSpacing=l}setWordSpacing(l){this.current.wordSpacing=l}setHScale(l){this.current.textHScale=l/100}setLeading(l){this.current.leading=-l}setFont(l,c){var ft;const P=this.commonObjs.get(l),$=this.current;if(!P)throw new Error(`Can't find font for ${l}`);if($.fontMatrix=P.fontMatrix||n.FONT_IDENTITY_MATRIX,($.fontMatrix[0]===0||$.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+l),c<0?(c=-c,$.fontDirection=-1):$.fontDirection=1,this.current.font=P,this.current.fontSize=c,P.isType3Font)return;const B=P.loadedName||"sans-serif",W=((ft=P.systemFontInfo)==null?void 0:ft.css)||`"${B}", ${P.fallbackName}`;let Q="normal";P.black?Q="900":P.bold&&(Q="bold");const at=P.italic?"italic":"normal";let pt=c;c<N?pt=N:c>v&&(pt=v),this.current.fontSizeScale=c/pt,this.ctx.font=`${at} ${Q} ${pt}px ${W}`}setTextRenderingMode(l){this.current.textRenderingMode=l}setTextRise(l){this.current.textRise=l}moveText(l,c){this.current.x=this.current.lineX+=l,this.current.y=this.current.lineY+=c}setLeadingMoveText(l,c){this.setLeading(-c),this.moveText(l,c)}setTextMatrix(l,c,P,$,B,W){this.current.textMatrix=[l,c,P,$,B,W],this.current.textMatrixScale=Math.hypot(l,c),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(l,c,P,$){const B=this.ctx,W=this.current,Q=W.font,at=W.textRenderingMode,pt=W.fontSize/W.fontSizeScale,ft=at&n.TextRenderingMode.FILL_STROKE_MASK,bt=!!(at&n.TextRenderingMode.ADD_TO_PATH_FLAG),vt=W.patternFill&&!Q.missingFile;let yt;(Q.disableFontFace||bt||vt)&&(yt=Q.getPathGenerator(this.commonObjs,l)),Q.disableFontFace||vt?(B.save(),B.translate(c,P),B.beginPath(),yt(B,pt),$&&B.setTransform(...$),(ft===n.TextRenderingMode.FILL||ft===n.TextRenderingMode.FILL_STROKE)&&B.fill(),(ft===n.TextRenderingMode.STROKE||ft===n.TextRenderingMode.FILL_STROKE)&&B.stroke(),B.restore()):((ft===n.TextRenderingMode.FILL||ft===n.TextRenderingMode.FILL_STROKE)&&B.fillText(l,c,P),(ft===n.TextRenderingMode.STROKE||ft===n.TextRenderingMode.FILL_STROKE)&&B.strokeText(l,c,P)),bt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(B),x:c,y:P,fontSize:pt,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:l}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);l.scale(1.5,1),l.fillText("I",0,10);const c=l.getImageData(0,0,10,10).data;let P=!1;for(let $=3;$<c.length;$+=4)if(c[$]>0&&c[$]<255){P=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",P)}showText(l){const c=this.current,P=c.font;if(P.isType3Font)return this.showType3Text(l);const $=c.fontSize;if($===0)return;const B=this.ctx,W=c.fontSizeScale,Q=c.charSpacing,at=c.wordSpacing,pt=c.fontDirection,ft=c.textHScale*pt,bt=l.length,vt=P.vertical,yt=vt?1:-1,et=P.defaultVMetrics,tt=$*c.fontMatrix[0],R=c.textRenderingMode===n.TextRenderingMode.FILL&&!P.disableFontFace&&!c.patternFill;B.save(),B.transform(...c.textMatrix),B.translate(c.x,c.y+c.textRise),pt>0?B.scale(ft,-1):B.scale(ft,1);let U;if(c.patternFill){B.save();const rt=c.fillColor.getPattern(B,this,(0,r.getCurrentTransformInverse)(B),S.PathType.FILL);U=(0,r.getCurrentTransform)(B),B.restore(),B.fillStyle=rt}let Z=c.lineWidth;const ot=c.textMatrixScale;if(ot===0||Z===0){const rt=c.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(rt===n.TextRenderingMode.STROKE||rt===n.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=ot;if(W!==1&&(B.scale(W,W),Z/=W),B.lineWidth=Z,P.isInvalidPDFjsFont){const rt=[];let q=0;for(const wt of l)rt.push(wt.unicode),q+=wt.width;B.fillText(rt.join(""),0,0),c.x+=q*tt*ft,B.restore(),this.compose();return}let gt=0,St;for(St=0;St<bt;++St){const rt=l[St];if(typeof rt=="number"){gt+=yt*rt*$/1e3;continue}let q=!1;const wt=(rt.isSpace?at:0)+Q,Ct=rt.fontChar,Bt=rt.accent;let zt,Wt,Dt=rt.width;if(vt){const Gt=rt.vmetric||et,qt=-(rt.vmetric?Gt[1]:Dt*.5)*tt,At=Gt[2]*tt;Dt=Gt?-Gt[0]:Dt,zt=qt/W,Wt=(gt+At)/W}else zt=gt/W,Wt=0;if(P.remeasure&&Dt>0){const Gt=B.measureText(Ct).width*1e3/$*W;if(Dt<Gt&&this.isFontSubpixelAAEnabled){const qt=Dt/Gt;q=!0,B.save(),B.scale(qt,1),zt/=qt}else Dt!==Gt&&(zt+=(Dt-Gt)/2e3*$/W)}if(this.contentVisible&&(rt.isInFont||P.missingFile)){if(R&&!Bt)B.fillText(Ct,zt,Wt);else if(this.paintChar(Ct,zt,Wt,U),Bt){const Gt=zt+$*Bt.offset.x/W,qt=Wt-$*Bt.offset.y/W;this.paintChar(Bt.fontChar,Gt,qt,U)}}const Mt=vt?Dt*tt-wt*pt:Dt*tt+wt*pt;gt+=Mt,q&&B.restore()}vt?c.y-=gt:c.x+=gt*ft,B.restore(),this.compose()}showType3Text(l){const c=this.ctx,P=this.current,$=P.font,B=P.fontSize,W=P.fontDirection,Q=$.vertical?1:-1,at=P.charSpacing,pt=P.wordSpacing,ft=P.textHScale*W,bt=P.fontMatrix||n.FONT_IDENTITY_MATRIX,vt=l.length,yt=P.textRenderingMode===n.TextRenderingMode.INVISIBLE;let et,tt,R,U;if(!(yt||B===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,c.save(),c.transform(...P.textMatrix),c.translate(P.x,P.y),c.scale(ft,W),et=0;et<vt;++et){if(tt=l[et],typeof tt=="number"){U=Q*tt*B/1e3,this.ctx.translate(U,0),P.x+=U*ft;continue}const Z=(tt.isSpace?pt:0)+at,ot=$.charProcOperatorList[tt.operatorListId];if(!ot){(0,n.warn)(`Type3 character "${tt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=tt,this.save(),c.scale(B,B),c.transform(...bt),this.executeOperatorList(ot),this.restore()),R=n.Util.applyTransform([tt.width,0],bt)[0]*B+Z,c.translate(R,0),P.x+=R*ft}c.restore(),this.processingType3=null}}setCharWidth(l,c){}setCharWidthAndBounds(l,c,P,$,B,W){this.ctx.rect(P,$,B-P,W-$),this.ctx.clip(),this.endPath()}getColorN_Pattern(l){let c;if(l[0]==="TilingPattern"){const P=l[1],$=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),B={createCanvasGraphics:W=>new it(W,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};c=new S.TilingPattern(l,P,this.ctx,B,$)}else c=this._getPattern(l[1],l[2]);return c}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(l,c,P){const $=n.Util.makeHexColor(l,c,P);this.ctx.strokeStyle=$,this.current.strokeColor=$}setFillRGBColor(l,c,P){const $=n.Util.makeHexColor(l,c,P);this.ctx.fillStyle=$,this.current.fillColor=$,this.current.patternFill=!1}_getPattern(l,c=null){let P;return this.cachedPatterns.has(l)?P=this.cachedPatterns.get(l):(P=(0,S.getShadingPattern)(this.getObject(l)),this.cachedPatterns.set(l,P)),c&&(P.matrix=c),P}shadingFill(l){if(!this.contentVisible)return;const c=this.ctx;this.save();const P=this._getPattern(l);c.fillStyle=P.getPattern(c,this,(0,r.getCurrentTransformInverse)(c),S.PathType.SHADING);const $=(0,r.getCurrentTransformInverse)(c);if($){const{width:B,height:W}=c.canvas,[Q,at,pt,ft]=n.Util.getAxialAlignedBoundingBox([0,0,B,W],$);this.ctx.fillRect(Q,at,pt-Q,ft-at)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(l,c){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(l)&&l.length===6&&this.transform(...l),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),c)){const P=c[2]-c[0],$=c[3]-c[1];this.ctx.rect(c[0],c[1],P,$),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),c),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(l){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const c=this.ctx;l.isolated||(0,n.info)("TODO: Support non-isolated groups."),l.knockout&&(0,n.warn)("Knockout groups not supported.");const P=(0,r.getCurrentTransform)(c);if(l.matrix&&c.transform(...l.matrix),!l.bbox)throw new Error("Bounding box is required.");let $=n.Util.getAxialAlignedBoundingBox(l.bbox,(0,r.getCurrentTransform)(c));const B=[0,0,c.canvas.width,c.canvas.height];$=n.Util.intersect($,B)||[0,0,0,0];const W=Math.floor($[0]),Q=Math.floor($[1]);let at=Math.max(Math.ceil($[2])-W,1),pt=Math.max(Math.ceil($[3])-Q,1),ft=1,bt=1;at>b&&(ft=at/b,at=b),pt>b&&(bt=pt/b,pt=b),this.current.startNewPathAndClipBox([0,0,at,pt]);let vt="groupAt"+this.groupLevel;l.smask&&(vt+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(vt,at,pt),et=yt.context;et.scale(1/ft,1/bt),et.translate(-W,-Q),et.transform(...P),l.smask?this.smaskStack.push({canvas:yt.canvas,context:et,offsetX:W,offsetY:Q,scaleX:ft,scaleY:bt,subtype:l.smask.subtype,backdrop:l.smask.backdrop,transferMap:l.smask.transferMap||null,startTransformInverse:null}):(c.setTransform(1,0,0,1,0,0),c.translate(W,Q),c.scale(ft,bt),c.save()),o(c,et),this.ctx=et,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(c),this.groupLevel++}endGroup(l){if(!this.contentVisible)return;this.groupLevel--;const c=this.ctx,P=this.groupStack.pop();if(this.ctx=P,this.ctx.imageSmoothingEnabled=!1,l.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const $=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...$);const B=n.Util.getAxialAlignedBoundingBox([0,0,c.canvas.width,c.canvas.height],$);this.ctx.drawImage(c.canvas,0,0),this.ctx.restore(),this.compose(B)}}beginAnnotation(l,c,P,$,B){if(nt(this,st,Ke).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(c)&&c.length===4){const W=c[2]-c[0],Q=c[3]-c[1];if(B&&this.annotationCanvasMap){P=P.slice(),P[4]-=c[0],P[5]-=c[1],c=c.slice(),c[0]=c[1]=0,c[2]=W,c[3]=Q;const[at,pt]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:ft}=this,bt=Math.ceil(W*this.outputScaleX*ft),vt=Math.ceil(Q*this.outputScaleY*ft);this.annotationCanvas=this.canvasFactory.create(bt,vt);const{canvas:yt,context:et}=this.annotationCanvas;this.annotationCanvasMap.set(l,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=et,this.ctx.save(),this.ctx.setTransform(at,0,0,-pt,0,Q*pt),f(this.ctx)}else f(this.ctx),this.ctx.rect(c[0],c[1],W,Q),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...P),this.transform(...$)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nt(this,st,Ye).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(l){if(!this.contentVisible)return;const c=l.count;l=this.getObject(l.data,l),l.count=c;const P=this.ctx,$=this.processingType3;if($&&($.compiled===void 0&&($.compiled=h(l)),$.compiled)){$.compiled(P);return}const B=this._createMaskCanvas(l),W=B.canvas;P.save(),P.setTransform(1,0,0,1,0,0),P.drawImage(W,B.offsetX,B.offsetY),P.restore(),this.compose()}paintImageMaskXObjectRepeat(l,c,P=0,$=0,B,W){if(!this.contentVisible)return;l=this.getObject(l.data,l);const Q=this.ctx;Q.save();const at=(0,r.getCurrentTransform)(Q);Q.transform(c,P,$,B,0,0);const pt=this._createMaskCanvas(l);Q.setTransform(1,0,0,1,pt.offsetX-at[4],pt.offsetY-at[5]);for(let ft=0,bt=W.length;ft<bt;ft+=2){const vt=n.Util.transform(at,[c,P,$,B,W[ft],W[ft+1]]),[yt,et]=n.Util.applyTransform([0,0],vt);Q.drawImage(pt.canvas,yt,et)}Q.restore(),this.compose()}paintImageMaskXObjectGroup(l){if(!this.contentVisible)return;const c=this.ctx,P=this.current.fillColor,$=this.current.patternFill;for(const B of l){const{data:W,width:Q,height:at,transform:pt}=B,ft=this.cachedCanvases.getCanvas("maskCanvas",Q,at),bt=ft.context;bt.save();const vt=this.getObject(W,B);E(bt,vt),bt.globalCompositeOperation="source-in",bt.fillStyle=$?P.getPattern(bt,this,(0,r.getCurrentTransformInverse)(c),S.PathType.FILL):P,bt.fillRect(0,0,Q,at),bt.restore(),c.save(),c.transform(...pt),c.scale(1,-1),y(c,ft.canvas,0,0,Q,at,0,-1,1,1),c.restore()}this.compose()}paintImageXObject(l){if(!this.contentVisible)return;const c=this.getObject(l);if(!c){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)}paintImageXObjectRepeat(l,c,P,$){if(!this.contentVisible)return;const B=this.getObject(l);if(!B){(0,n.warn)("Dependent image isn't ready yet");return}const W=B.width,Q=B.height,at=[];for(let pt=0,ft=$.length;pt<ft;pt+=2)at.push({transform:[c,0,0,P,$[pt],$[pt+1]],x:0,y:0,w:W,h:Q});this.paintInlineImageXObjectGroup(B,at)}applyTransferMapsToCanvas(l){return this.current.transferMaps!=="none"&&(l.filter=this.current.transferMaps,l.drawImage(l.canvas,0,0),l.filter="none"),l.canvas}applyTransferMapsToBitmap(l){if(this.current.transferMaps==="none")return l.bitmap;const{bitmap:c,width:P,height:$}=l,B=this.cachedCanvases.getCanvas("inlineImage",P,$),W=B.context;return W.filter=this.current.transferMaps,W.drawImage(c,0,0),W.filter="none",B.canvas}paintInlineImageXObject(l){if(!this.contentVisible)return;const c=l.width,P=l.height,$=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Q}=$;Q!=="none"&&Q!==""&&($.filter="none")}$.scale(1/c,-1/P);let B;if(l.bitmap)B=this.applyTransferMapsToBitmap(l);else if(typeof HTMLElement=="function"&&l instanceof HTMLElement||!l.data)B=l;else{const at=this.cachedCanvases.getCanvas("inlineImage",c,P).context;F(at,l),B=this.applyTransferMapsToCanvas(at)}const W=this._scaleImage(B,(0,r.getCurrentTransformInverse)($));$.imageSmoothingEnabled=T((0,r.getCurrentTransform)($),l.interpolate),y($,W.img,0,0,W.paintWidth,W.paintHeight,0,-P,c,P),this.compose(),this.restore()}paintInlineImageXObjectGroup(l,c){if(!this.contentVisible)return;const P=this.ctx;let $;if(l.bitmap)$=l.bitmap;else{const B=l.width,W=l.height,at=this.cachedCanvases.getCanvas("inlineImage",B,W).context;F(at,l),$=this.applyTransferMapsToCanvas(at)}for(const B of c)P.save(),P.transform(...B.transform),P.scale(1,-1),y(P,$,B.x,B.y,B.w,B.h,0,-1,1,1),P.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(l){}markPointProps(l,c){}beginMarkedContent(l){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(l,c){l==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(c)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(l){const c=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(l);const P=this.ctx;this.pendingClip&&(c||(this.pendingClip===Y?P.clip("evenodd"):P.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),P.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const l=(0,r.getCurrentTransform)(this.ctx);if(l[1]===0&&l[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(l[0]),Math.abs(l[3]));else{const c=Math.abs(l[0]*l[3]-l[2]*l[1]),P=Math.hypot(l[0],l[2]),$=Math.hypot(l[1],l[3]);this._cachedGetSinglePixelWidth=Math.max(P,$)/c}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:l}=this.current,{a:c,b:P,c:$,d:B}=this.ctx.getTransform();let W,Q;if(P===0&&$===0){const at=Math.abs(c),pt=Math.abs(B);if(at===pt)if(l===0)W=Q=1/at;else{const ft=at*l;W=Q=ft<1?1/ft:1}else if(l===0)W=1/at,Q=1/pt;else{const ft=at*l,bt=pt*l;W=ft<1?1/ft:1,Q=bt<1?1/bt:1}}else{const at=Math.abs(c*B-P*$),pt=Math.hypot(c,P),ft=Math.hypot($,B);if(l===0)W=ft/at,Q=pt/at;else{const bt=l*at;W=ft>bt?ft/bt:1,Q=pt>bt?pt/bt:1}}this._cachedScaleForStroking[0]=W,this._cachedScaleForStroking[1]=Q}return this._cachedScaleForStroking}rescaleAndStroke(l){const{ctx:c}=this,{lineWidth:P}=this.current,[$,B]=this.getScaleForStroking();if(c.lineWidth=P||1,$===1&&B===1){c.stroke();return}const W=c.getLineDash();if(l&&c.save(),c.scale($,B),W.length>0){const Q=Math.max($,B);c.setLineDash(W.map(at=>at/Q)),c.lineDashOffset/=Q}c.stroke(),l&&c.restore()}isContentVisible(){for(let l=this.markedContentStack.length-1;l>=0;l--)if(!this.markedContentStack[l].visible)return!1;return!0}};st=new WeakSet,Ke=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ye=function(){if(this.pageColors){const l=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(l!=="none"){const c=this.ctx.filter;this.ctx.filter=l,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=c}}};let V=it;e.CanvasGraphics=V;for(const M in n.OPS)V.prototype[M]!==void 0&&(V.prototype[n.OPS[M]]=V.prototype[M])},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=A;var n=i(1),r=i(6);const S={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=S;function C(h,x){if(!x)return;const F=x[2]-x[0],E=x[3]-x[1],o=new Path2D;o.rect(x[0],x[1],F,E),h.clip(o)}class N{constructor(){this.constructor===N&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class v extends N{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let F;this._type==="axial"?F=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)F.addColorStop(E[0],E[1]);return F}getPattern(x,F,E,o){let f;if(o===S.STROKE||o===S.FILL){const a=F.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(x))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,m=Math.ceil(a[3]-a[1])||1,j=F.cachedCanvases.getCanvas("pattern",u,m,!0),d=j.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),E=n.Util.transform(E,[1,0,0,1,a[0],a[1]]),d.transform(...F.baseTransform),this.matrix&&d.transform(...this.matrix),C(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),f=x.createPattern(j.canvas,"no-repeat");const T=new DOMMatrix(E);f.setTransform(T)}else C(x,this._bbox),f=this._createGradient(x);return f}}function b(h,x,F,E,o,f,a,u){const m=x.coords,j=x.colors,d=h.data,T=h.width*4;let L;m[F+1]>m[E+1]&&(L=F,F=E,E=L,L=f,f=a,a=L),m[E+1]>m[o+1]&&(L=E,E=o,o=L,L=a,a=u,u=L),m[F+1]>m[E+1]&&(L=F,F=E,E=L,L=f,f=a,a=L);const K=(m[F]+x.offsetX)*x.scaleX,G=(m[F+1]+x.offsetY)*x.scaleY,Y=(m[E]+x.offsetX)*x.scaleX,V=(m[E+1]+x.offsetY)*x.scaleY,st=(m[o]+x.offsetX)*x.scaleX,D=(m[o+1]+x.offsetY)*x.scaleY;if(G>=D)return;const X=j[f],it=j[f+1],M=j[f+2],l=j[a],c=j[a+1],P=j[a+2],$=j[u],B=j[u+1],W=j[u+2],Q=Math.round(G),at=Math.round(D);let pt,ft,bt,vt,yt,et,tt,R;for(let U=Q;U<=at;U++){if(U<V){const rt=U<G?0:(G-U)/(G-V);pt=K-(K-Y)*rt,ft=X-(X-l)*rt,bt=it-(it-c)*rt,vt=M-(M-P)*rt}else{let rt;U>D?rt=1:V===D?rt=0:rt=(V-U)/(V-D),pt=Y-(Y-st)*rt,ft=l-(l-$)*rt,bt=c-(c-B)*rt,vt=P-(P-W)*rt}let Z;U<G?Z=0:U>D?Z=1:Z=(G-U)/(G-D),yt=K-(K-st)*Z,et=X-(X-$)*Z,tt=it-(it-B)*Z,R=M-(M-W)*Z;const ot=Math.round(Math.min(pt,yt)),gt=Math.round(Math.max(pt,yt));let St=T*U+ot*4;for(let rt=ot;rt<=gt;rt++)Z=(pt-rt)/(pt-yt),Z<0?Z=0:Z>1&&(Z=1),d[St++]=ft-(ft-et)*Z|0,d[St++]=bt-(bt-tt)*Z|0,d[St++]=vt-(vt-R)*Z|0,d[St++]=255}}function p(h,x,F){const E=x.coords,o=x.colors;let f,a;switch(x.type){case"lattice":const u=x.verticesPerRow,m=Math.floor(E.length/u)-1,j=u-1;for(f=0;f<m;f++){let d=f*u;for(let T=0;T<j;T++,d++)b(h,F,E[d],E[d+1],E[d+u],o[d],o[d+1],o[d+u]),b(h,F,E[d+u+1],E[d+1],E[d+u],o[d+u+1],o[d+1],o[d+u])}break;case"triangles":for(f=0,a=E.length;f<a;f+=3)b(h,F,E[f],E[f+1],E[f+2],o[f],o[f+1],o[f+2]);break;default:throw new Error("illegal figure")}}class k extends N{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,F,E){const u=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-u,d=Math.ceil(this._bounds[3])-m,T=Math.min(Math.ceil(Math.abs(j*x[0]*1.1)),3e3),L=Math.min(Math.ceil(Math.abs(d*x[1]*1.1)),3e3),K=j/T,G=d/L,Y={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-m,scaleX:1/K,scaleY:1/G},V=T+2*2,st=L+2*2,D=E.getCanvas("mesh",V,st,!1),X=D.context,it=X.createImageData(T,L);if(F){const l=it.data;for(let c=0,P=l.length;c<P;c+=4)l[c]=F[0],l[c+1]=F[1],l[c+2]=F[2],l[c+3]=255}for(const l of this._figures)p(it,l,Y);return X.putImageData(it,2,2),{canvas:D.canvas,offsetX:u-2*K,offsetY:m-2*G,scaleX:K,scaleY:G}}getPattern(x,F,E,o){C(x,this._bbox);let f;if(o===S.SHADING)f=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(x));else if(f=n.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const u=n.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*u[0],f[1]*u[1]]}const a=this._createMeshCanvas(f,o===S.SHADING?null:this._background,F.cachedCanvases);return o!==S.SHADING&&(x.setTransform(...F.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(a.offsetX,a.offsetY),x.scale(a.scaleX,a.scaleY),x.createPattern(a.canvas,"no-repeat")}}class I extends N{getPattern(){return"hotpink"}}function A(h){switch(h[0]){case"RadialAxial":return new v(h);case"Mesh":return new k(h);case"Dummy":return new I}throw new Error(`Unknown IR type: ${h[0]}`)}const g={COLORED:1,UNCOLORED:2},y=class y{constructor(x,F,E,o,f){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=F,this.ctx=E,this.canvasGraphicsFactory=o,this.baseTransform=f}createPatternCanvas(x){const F=this.operatorList,E=this.bbox,o=this.xstep,f=this.ystep,a=this.paintType,u=this.tilingType,m=this.color,j=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+u);const d=E[0],T=E[1],L=E[2],K=E[3],G=n.Util.singularValueDecompose2dScale(this.matrix),Y=n.Util.singularValueDecompose2dScale(this.baseTransform),V=[G[0]*Y[0],G[1]*Y[1]],st=this.getSizeAndScale(o,this.ctx.canvas.width,V[0]),D=this.getSizeAndScale(f,this.ctx.canvas.height,V[1]),X=x.cachedCanvases.getCanvas("pattern",st.size,D.size,!0),it=X.context,M=j.createCanvasGraphics(it);M.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(M,a,m);let l=d,c=T,P=L,$=K;return d<0&&(l=0,P+=Math.abs(d)),T<0&&(c=0,$+=Math.abs(T)),it.translate(-(st.scale*l),-(D.scale*c)),M.transform(st.scale,0,0,D.scale,0,0),it.save(),this.clipBbox(M,l,c,P,$),M.baseTransform=(0,r.getCurrentTransform)(M.ctx),M.executeOperatorList(F),M.endDrawing(),{canvas:X.canvas,scaleX:st.scale,scaleY:D.scale,offsetX:l,offsetY:c}}getSizeAndScale(x,F,E){x=Math.abs(x);const o=Math.max(y.MAX_PATTERN_SIZE,F);let f=Math.ceil(x*E);return f>=o?f=o:E=f/x,{scale:E,size:f}}clipBbox(x,F,E,o,f){const a=o-F,u=f-E;x.ctx.rect(F,E,a,u),x.current.updateRectMinMax((0,r.getCurrentTransform)(x.ctx),[F,E,o,f]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,F,E){const o=x.ctx,f=x.current;switch(F){case g.COLORED:const a=this.ctx;o.fillStyle=a.fillStyle,o.strokeStyle=a.strokeStyle,f.fillColor=a.fillStyle,f.strokeColor=a.strokeStyle;break;case g.UNCOLORED:const u=n.Util.makeHexColor(E[0],E[1],E[2]);o.fillStyle=u,o.strokeStyle=u,f.fillColor=u,f.strokeColor=u;break;default:throw new n.FormatError(`Unsupported paint type: ${F}`)}}getPattern(x,F,E,o){let f=E;o!==S.SHADING&&(f=n.Util.transform(f,F.baseTransform),this.matrix&&(f=n.Util.transform(f,this.matrix)));const a=this.createPatternCanvas(F);let u=new DOMMatrix(f);u=u.translate(a.offsetX,a.offsetY),u=u.scale(1/a.scaleX,1/a.scaleY);const m=x.createPattern(a.canvas,"repeat");return m.setTransform(u),m}};Qt(y,"MAX_PATTERN_SIZE",3e3);let w=y;e.TilingPattern=w},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=S,e.convertToRGBA=r,e.grayToRGBA=N;var n=i(1);function r(v){switch(v.kind){case n.ImageKind.GRAYSCALE_1BPP:return S(v);case n.ImageKind.RGB_24BPP:return C(v)}return null}function S({src:v,srcPos:b=0,dest:p,width:k,height:I,nonBlackColor:A=4294967295,inverseDecode:g=!1}){const w=n.FeatureTest.isLittleEndian?4278190080:255,[y,h]=g?[A,w]:[w,A],x=k>>3,F=k&7,E=v.length;p=new Uint32Array(p.buffer);let o=0;for(let f=0;f<I;f++){for(const u=b+x;b<u;b++){const m=b<E?v[b]:255;p[o++]=m&128?h:y,p[o++]=m&64?h:y,p[o++]=m&32?h:y,p[o++]=m&16?h:y,p[o++]=m&8?h:y,p[o++]=m&4?h:y,p[o++]=m&2?h:y,p[o++]=m&1?h:y}if(F===0)continue;const a=b<E?v[b++]:255;for(let u=0;u<F;u++)p[o++]=a&1<<7-u?h:y}return{srcPos:b,destPos:o}}function C({src:v,srcPos:b=0,dest:p,destPos:k=0,width:I,height:A}){let g=0;const w=v.length>>2,y=new Uint32Array(v.buffer,b,w);if(n.FeatureTest.isLittleEndian){for(;g<w-2;g+=3,k+=4){const h=y[g],x=y[g+1],F=y[g+2];p[k]=h|4278190080,p[k+1]=h>>>24|x<<8|4278190080,p[k+2]=x>>>16|F<<16|4278190080,p[k+3]=F>>>8|4278190080}for(let h=g*4,x=v.length;h<x;h+=3)p[k++]=v[h]|v[h+1]<<8|v[h+2]<<16|4278190080}else{for(;g<w-2;g+=3,k+=4){const h=y[g],x=y[g+1],F=y[g+2];p[k]=h|255,p[k+1]=h<<24|x>>>8|255,p[k+2]=x<<16|F>>>16|255,p[k+3]=F<<8|255}for(let h=g*4,x=v.length;h<x;h+=3)p[k++]=v[h]<<24|v[h+1]<<16|v[h+2]<<8|255}return{srcPos:b,destPos:k}}function N(v,b){if(n.FeatureTest.isLittleEndian)for(let p=0,k=v.length;p<k;p++)b[p]=v[p]*65793|4278190080;else for(let p=0,k=v.length;p<k;p++)b[p]=v[p]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(t,e,i)=>{var v,Pn,Tn,Ce;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=i(1);const r={DATA:1,ERROR:2},S={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function C(I){switch(I instanceof Error||typeof I=="object"&&I!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),I.name){case"AbortException":return new n.AbortException(I.message);case"MissingPDFException":return new n.MissingPDFException(I.message);case"PasswordException":return new n.PasswordException(I.message,I.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(I.message,I.status);case"UnknownErrorException":return new n.UnknownErrorException(I.message,I.details);default:return new n.UnknownErrorException(I.message,I.toString())}}class N{constructor(A,g,w){ct(this,v);this.sourceName=A,this.targetName=g,this.comObj=w,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const h=y.data;if(h.targetName!==this.sourceName)return;if(h.stream){nt(this,v,Tn).call(this,h);return}if(h.callback){const F=h.callbackId,E=this.callbackCapabilities[F];if(!E)throw new Error(`Cannot resolve callback ${F}`);if(delete this.callbackCapabilities[F],h.callback===r.DATA)E.resolve(h.data);else if(h.callback===r.ERROR)E.reject(C(h.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[h.action];if(!x)throw new Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){const F=this.sourceName,E=h.sourceName;new Promise(function(o){o(x(h.data))}).then(function(o){w.postMessage({sourceName:F,targetName:E,callback:r.DATA,callbackId:h.callbackId,data:o})},function(o){w.postMessage({sourceName:F,targetName:E,callback:r.ERROR,callbackId:h.callbackId,reason:C(o)})});return}if(h.streamId){nt(this,v,Pn).call(this,h);return}x(h.data)},w.addEventListener("message",this._onComObjOnMessage)}on(A,g){const w=this.actionHandler;if(w[A])throw new Error(`There is already an actionName called "${A}"`);w[A]=g}send(A,g,w){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:g},w)}sendWithPromise(A,g,w){const y=this.callbackId++,h=new n.PromiseCapability;this.callbackCapabilities[y]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:y,data:g},w)}catch(x){h.reject(x)}return h.promise}sendWithStream(A,g,w,y){const h=this.streamId++,x=this.sourceName,F=this.targetName,E=this.comObj;return new ReadableStream({start:o=>{const f=new n.PromiseCapability;return this.streamControllers[h]={controller:o,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},E.postMessage({sourceName:x,targetName:F,action:A,streamId:h,data:g,desiredSize:o.desiredSize},y),f.promise},pull:o=>{const f=new n.PromiseCapability;return this.streamControllers[h].pullCall=f,E.postMessage({sourceName:x,targetName:F,stream:S.PULL,streamId:h,desiredSize:o.desiredSize}),f.promise},cancel:o=>{(0,n.assert)(o instanceof Error,"cancel must have a valid reason");const f=new n.PromiseCapability;return this.streamControllers[h].cancelCall=f,this.streamControllers[h].isClosed=!0,E.postMessage({sourceName:x,targetName:F,stream:S.CANCEL,streamId:h,reason:C(o)}),f.promise}},w)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}v=new WeakSet,Pn=function(A){const g=A.streamId,w=this.sourceName,y=A.sourceName,h=this.comObj,x=this,F=this.actionHandler[A.action],E={enqueue(o,f=1,a){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=f,u>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),h.postMessage({sourceName:w,targetName:y,stream:S.ENQUEUE,streamId:g,chunk:o},a)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:w,targetName:y,stream:S.CLOSE,streamId:g}),delete x.streamSinks[g])},error(o){(0,n.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,h.postMessage({sourceName:w,targetName:y,stream:S.ERROR,streamId:g,reason:C(o)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};E.sinkCapability.resolve(),E.ready=E.sinkCapability.promise,this.streamSinks[g]=E,new Promise(function(o){o(F(A.data,E))}).then(function(){h.postMessage({sourceName:w,targetName:y,stream:S.START_COMPLETE,streamId:g,success:!0})},function(o){h.postMessage({sourceName:w,targetName:y,stream:S.START_COMPLETE,streamId:g,reason:C(o)})})},Tn=function(A){const g=A.streamId,w=this.sourceName,y=A.sourceName,h=this.comObj,x=this.streamControllers[g],F=this.streamSinks[g];switch(A.stream){case S.START_COMPLETE:A.success?x.startCall.resolve():x.startCall.reject(C(A.reason));break;case S.PULL_COMPLETE:A.success?x.pullCall.resolve():x.pullCall.reject(C(A.reason));break;case S.PULL:if(!F){h.postMessage({sourceName:w,targetName:y,stream:S.PULL_COMPLETE,streamId:g,success:!0});break}F.desiredSize<=0&&A.desiredSize>0&&F.sinkCapability.resolve(),F.desiredSize=A.desiredSize,new Promise(function(E){var o;E((o=F.onPull)==null?void 0:o.call(F))}).then(function(){h.postMessage({sourceName:w,targetName:y,stream:S.PULL_COMPLETE,streamId:g,success:!0})},function(E){h.postMessage({sourceName:w,targetName:y,stream:S.PULL_COMPLETE,streamId:g,reason:C(E)})});break;case S.ENQUEUE:if((0,n.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(A.chunk);break;case S.CLOSE:if((0,n.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),nt(this,v,Ce).call(this,x,g);break;case S.ERROR:(0,n.assert)(x,"error should have stream controller"),x.controller.error(C(A.reason)),nt(this,v,Ce).call(this,x,g);break;case S.CANCEL_COMPLETE:A.success?x.cancelCall.resolve():x.cancelCall.reject(C(A.reason)),nt(this,v,Ce).call(this,x,g);break;case S.CANCEL:if(!F)break;new Promise(function(E){var o;E((o=F.onCancel)==null?void 0:o.call(F,C(A.reason)))}).then(function(){h.postMessage({sourceName:w,targetName:y,stream:S.CANCEL_COMPLETE,streamId:g,success:!0})},function(E){h.postMessage({sourceName:w,targetName:y,stream:S.CANCEL_COMPLETE,streamId:g,reason:C(E)})}),F.sinkCapability.reject(C(A.reason)),F.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}},Ce=async function(A,g){var w,y,h;await Promise.allSettled([(w=A.startCall)==null?void 0:w.promise,(y=A.pullCall)==null?void 0:y.promise,(h=A.cancelCall)==null?void 0:h.promise]),delete this.streamControllers[g]},e.MessageHandler=N},(t,e,i)=>{var S,C;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=i(1);class r{constructor({parsedData:v,rawData:b}){ct(this,S);ct(this,C);ut(this,S,v),ut(this,C,b)}getRaw(){return s(this,C)}get(v){return s(this,S).get(v)??null}getAll(){return(0,n.objectFromMap)(s(this,S))}has(v){return s(this,S).has(v)}}S=new WeakMap,C=new WeakMap,e.Metadata=r},(t,e,i)=>{var v,b,p,k,I,A,Je;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=i(1),r=i(8);const S=Symbol("INTERNAL");class C{constructor(y,h){ct(this,v,!0);this.name=y,this.intent=h}get visible(){return s(this,v)}_setVisible(y,h){y!==S&&(0,n.unreachable)("Internal method `_setVisible` called."),ut(this,v,h)}}v=new WeakMap;class N{constructor(y){ct(this,A);ct(this,b,null);ct(this,p,new Map);ct(this,k,null);ct(this,I,null);if(this.name=null,this.creator=null,y!==null){this.name=y.name,this.creator=y.creator,ut(this,I,y.order);for(const h of y.groups)s(this,p).set(h.id,new C(h.name,h.intent));if(y.baseState==="OFF")for(const h of s(this,p).values())h._setVisible(S,!1);for(const h of y.on)s(this,p).get(h)._setVisible(S,!0);for(const h of y.off)s(this,p).get(h)._setVisible(S,!1);ut(this,k,this.getHash())}}isVisible(y){if(s(this,p).size===0)return!0;if(!y)return(0,n.warn)("Optional content group not defined."),!0;if(y.type==="OCG")return s(this,p).has(y.id)?s(this,p).get(y.id).visible:((0,n.warn)(`Optional content group not found: ${y.id}`),!0);if(y.type==="OCMD"){if(y.expression)return nt(this,A,Je).call(this,y.expression);if(!y.policy||y.policy==="AnyOn"){for(const h of y.ids){if(!s(this,p).has(h))return(0,n.warn)(`Optional content group not found: ${h}`),!0;if(s(this,p).get(h).visible)return!0}return!1}else if(y.policy==="AllOn"){for(const h of y.ids){if(!s(this,p).has(h))return(0,n.warn)(`Optional content group not found: ${h}`),!0;if(!s(this,p).get(h).visible)return!1}return!0}else if(y.policy==="AnyOff"){for(const h of y.ids){if(!s(this,p).has(h))return(0,n.warn)(`Optional content group not found: ${h}`),!0;if(!s(this,p).get(h).visible)return!0}return!1}else if(y.policy==="AllOff"){for(const h of y.ids){if(!s(this,p).has(h))return(0,n.warn)(`Optional content group not found: ${h}`),!0;if(s(this,p).get(h).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${y.policy}.`),!0}return(0,n.warn)(`Unknown group type ${y.type}.`),!0}setVisibility(y,h=!0){if(!s(this,p).has(y)){(0,n.warn)(`Optional content group not found: ${y}`);return}s(this,p).get(y)._setVisible(S,!!h),ut(this,b,null)}get hasInitialVisibility(){return s(this,k)===null||this.getHash()===s(this,k)}getOrder(){return s(this,p).size?s(this,I)?s(this,I).slice():[...s(this,p).keys()]:null}getGroups(){return s(this,p).size>0?(0,n.objectFromMap)(s(this,p)):null}getGroup(y){return s(this,p).get(y)||null}getHash(){if(s(this,b)!==null)return s(this,b);const y=new r.MurmurHash3_64;for(const[h,x]of s(this,p))y.update(`${h}:${x.visible}`);return ut(this,b,y.hexdigest())}}b=new WeakMap,p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakSet,Je=function(y){const h=y.length;if(h<2)return!0;const x=y[0];for(let F=1;F<h;F++){const E=y[F];let o;if(Array.isArray(E))o=nt(this,A,Je).call(this,E);else if(s(this,p).has(E))o=s(this,p).get(E).visible;else return(0,n.warn)(`Optional content group not found: ${E}`),!0;switch(x){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return x==="And"},e.OptionalContentConfig=N},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=i(1),r=i(6);class S{constructor({length:b,initialData:p,progressiveDone:k=!1,contentDispositionFilename:I=null,disableRange:A=!1,disableStream:g=!1},w){if((0,n.assert)(w,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=I,(p==null?void 0:p.length)>0){const y=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=w,this._isStreamingSupported=!g,this._isRangeSupported=!A,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,h)=>{this._onReceiveData({begin:y,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((y,h)=>{this._onProgress({loaded:y,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:p}){const k=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const I=this._rangeReaders.some(function(A){return A._begin!==b?!1:(A._enqueue(k),!0)});(0,n.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}_onProgress(b){var p,k,I,A;b.total===void 0?(k=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||k.call(p,{loaded:b.loaded}):(A=(I=this._fullRequestReader)==null?void 0:I.onProgress)==null||A.call(I,{loaded:b.loaded,total:b.total})}_onProgressiveDone(){var b;(b=this._fullRequestReader)==null||b.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const p=this._rangeReaders.indexOf(b);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new C(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,p){if(p<=this._progressiveDataLength)return null;const k=new N(this,b,p);return this._pdfDataRangeTransport.requestDataRange(b,p),this._rangeReaders.push(k),k}cancelAllRequests(b){var p;(p=this._fullRequestReader)==null||p.cancel(b);for(const k of this._rangeReaders.slice(0))k.cancel(b);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=S;class C{constructor(b,p,k=!1,I=null){this._stream=b,this._done=k||!1,this._filename=(0,r.isPdfFile)(I)?I:null,this._queuedChunks=p||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class N{constructor(b,p,k){this._stream=b,this._begin=p,this._end=k,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=i(1),r=i(20);function S(k,I,A){return{method:"GET",headers:k,signal:A.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function C(k){const I=new Headers;for(const A in k){const g=k[A];g!==void 0&&I.append(A,g)}return I}function N(k){return k instanceof Uint8Array?k.buffer:k instanceof ArrayBuffer?k:((0,n.warn)(`getArrayBuffer - unexpected data format: ${k}`),new Uint8Array(k).buffer)}class v{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I;return((I=this._fullRequestReader)==null?void 0:I._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(I,A){if(A<=this._progressiveDataLength)return null;const g=new p(this,I,A);return this._rangeRequestReaders.push(g),g}cancelAllRequests(I){var A;(A=this._fullRequestReader)==null||A.cancel(I);for(const g of this._rangeRequestReaders.slice(0))g.cancel(I)}}e.PDFFetchStream=v;class b{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const A=I.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=new n.PromiseCapability,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=C(this._stream.httpHeaders);const g=A.url;fetch(g,S(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,r.validateResponseStatus)(w.status))throw(0,r.createResponseStatusError)(w.status,g);this._reader=w.body.getReader(),this._headersCapability.resolve();const y=F=>w.headers.get(F),{allowRangeRequests:h,suggestedLength:x}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=x||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(y),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:I,done:A}=await this._reader.read();return A?{value:I,done:A}:(this._loaded+=I.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:N(I),done:!1})}cancel(I){var A;(A=this._reader)==null||A.cancel(I),this._abortController.abort()}}class p{constructor(I,A,g){this._stream=I,this._reader=null,this._loaded=0;const w=I.source;this._withCredentials=w.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!w.disableStream,this._abortController=new AbortController,this._headers=C(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${g-1}`);const y=w.url;fetch(y,S(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,r.validateResponseStatus)(h.status))throw(0,r.createResponseStatusError)(h.status,y);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:I,done:A}=await this._reader.read();return A?{value:I,done:A}:(this._loaded+=I.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:N(I),done:!1})}cancel(I){var A;(A=this._reader)==null||A.cancel(I),this._abortController.abort()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=v,e.extractFilenameFromHeader=N,e.validateRangeRequestCapabilities=C,e.validateResponseStatus=b;var n=i(1),r=i(21),S=i(6);function C({getResponseHeader:p,isHttp:k,rangeChunkSize:I,disableRange:A}){const g={allowRangeRequests:!1,suggestedLength:void 0},w=parseInt(p("Content-Length"),10);return!Number.isInteger(w)||(g.suggestedLength=w,w<=2*I)||A||!k||p("Accept-Ranges")!=="bytes"||(p("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function N(p){const k=p("Content-Disposition");if(k){let I=(0,r.getFilenameFromContentDispositionHeader)(k);if(I.includes("%"))try{I=decodeURIComponent(I)}catch{}if((0,S.isPdfFile)(I))return I}return null}function v(p,k){return p===404||p===0&&k.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+k+'".'):new n.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${k}".`,p)}function b(p){return p===200||p===206}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=r;var n=i(1);function r(S){let C=!0,N=v("filename\\*","i").exec(S);if(N){N=N[1];let w=I(N);return w=unescape(w),w=A(w),w=g(w),p(w)}if(N=k(S),N){const w=g(N);return p(w)}if(N=v("filename","i").exec(S),N){N=N[1];let w=I(N);return w=g(w),p(w)}function v(w,y){return new RegExp("(?:^|;)\\s*"+w+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function b(w,y){if(w){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const h=new TextDecoder(w,{fatal:!0}),x=(0,n.stringToBytes)(y);y=h.decode(x),C=!1}catch{}}return y}function p(w){return C&&/[\x80-\xff]/.test(w)&&(w=b("utf-8",w),C&&(w=b("iso-8859-1",w))),w}function k(w){const y=[];let h;const x=v("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=x.exec(w))!==null;){let[,E,o,f]=h;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[o,f]}const F=[];for(let E=0;E<y.length&&E in y;++E){let[o,f]=y[E];f=I(f),o&&(f=unescape(f),E===0&&(f=A(f))),F.push(f)}return F.join("")}function I(w){if(w.startsWith('"')){const y=w.slice(1).split('\\"');for(let h=0;h<y.length;++h){const x=y[h].indexOf('"');x!==-1&&(y[h]=y[h].slice(0,x),y.length=h+1),y[h]=y[h].replaceAll(/\\(.)/g,"$1")}w=y.join('"')}return w}function A(w){const y=w.indexOf("'");if(y===-1)return w;const h=w.slice(0,y),F=w.slice(y+1).replace(/^[^']*'/,"");return b(h,F)}function g(w){return!w.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(w)?w:w.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,h,x,F){if(x==="q"||x==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,o){return String.fromCharCode(parseInt(o,16))}),b(h,F);try{F=atob(F)}catch{}return b(h,F)})}return""}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=i(1),r=i(20);const S=200,C=206;function N(I){const A=I.response;return typeof A!="string"?A:(0,n.stringToBytes)(A).buffer}class v{constructor(A,g={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,g,w){const y={begin:A,end:g};for(const h in w)y[h]=w[h];return this.request(y)}requestFull(A){return this.request(A)}request(A){const g=new XMLHttpRequest,w=this.currXhrId++,y=this.pendingRequests[w]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const h in this.httpHeaders){const x=this.httpHeaders[h];x!==void 0&&g.setRequestHeader(h,x)}return this.isHttp&&"begin"in A&&"end"in A?(g.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),y.expectedStatus=C):y.expectedStatus=S,g.responseType="arraybuffer",A.onError&&(g.onerror=function(h){A.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,w),g.onprogress=this.onProgress.bind(this,w),y.onHeadersReceived=A.onHeadersReceived,y.onDone=A.onDone,y.onError=A.onError,y.onProgress=A.onProgress,g.send(null),w}onProgress(A,g){var y;const w=this.pendingRequests[A];w&&((y=w.onProgress)==null||y.call(w,g))}onStateChange(A,g){var E,o,f;const w=this.pendingRequests[A];if(!w)return;const y=w.xhr;if(y.readyState>=2&&w.onHeadersReceived&&(w.onHeadersReceived(),delete w.onHeadersReceived),y.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],y.status===0&&this.isHttp){(E=w.onError)==null||E.call(w,y.status);return}const h=y.status||S;if(!(h===S&&w.expectedStatus===C)&&h!==w.expectedStatus){(o=w.onError)==null||o.call(w,y.status);return}const F=N(y);if(h===C){const a=y.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);w.onDone({begin:parseInt(u[1],10),chunk:F})}else F?w.onDone({begin:0,chunk:F}):(f=w.onError)==null||f.call(w,y.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const g=this.pendingRequests[A].xhr;delete this.pendingRequests[A],g.abort()}}class b{constructor(A){this._source=A,this._manager=new v(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const g=this._rangeRequestReaders.indexOf(A);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(A,g){const w=new k(this._manager,A,g);return w.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(w),w}cancelAllRequests(A){var g;(g=this._fullRequestReader)==null||g.cancel(A);for(const w of this._rangeRequestReaders.slice(0))w.cancel(A)}}e.PDFNetworkStream=b;class p{constructor(A,g){this._manager=A;const w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=A.requestFull(w),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,g=this._manager.getRequestXhr(A),w=x=>g.getResponseHeader(x),{allowRangeRequests:y,suggestedLength:h}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});y&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(w),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,r.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){var g;(g=this.onProgress)==null||g.call(this,{loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=new n.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k{constructor(A,g,w){this._manager=A;const y={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(g,w,y),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var A;(A=this.onClosed)==null||A.call(this,this)}_onDone(A){const g=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,r.createResponseStatusError)(A,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const A=new n.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=i(1),r=i(20);const S=/^file:\/\/\/[a-zA-Z]:\//;function C(w){const y=require$$5,h=y.parse(w);return h.protocol==="file:"||h.host?h:/^[a-z]:[/\\]/i.test(w)?y.parse(`file:///${w}`):(h.host||(h.protocol="file:"),h)}class N{constructor(y){this.source=y,this.url=C(y.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new k(this),this._fullRequestReader}getRangeReader(y,h){if(h<=this._progressiveDataLength)return null;const x=this.isFsUrl?new g(this,y,h):new I(this,y,h);return this._rangeRequestReaders.push(x),x}cancelAllRequests(y){var h;(h=this._fullRequestReader)==null||h.cancel(y);for(const x of this._rangeRequestReaders.slice(0))x.cancel(y)}}e.PDFNodeStream=N;class v{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null;const h=y.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=y.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",h=>{this._error(h)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const h=y.source;this._isStreamingSupported=!h.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=y.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",h=>{this._error(h)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(w,y){return{protocol:w.protocol,auth:w.auth,host:w.hostname,port:w.port,path:w.path,method:"GET",headers:y}}class k extends v{constructor(y){super(y);const h=x=>{if(x.statusCode===404){const f=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(x);const F=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:E,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:y.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(F)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(p(this._url,y.httpHeaders),h)}else{const x=require$$5;this._request=x.request(p(this._url,y.httpHeaders),h)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class I extends b{constructor(y,h,x){super(y),this._httpHeaders={};for(const E in y.httpHeaders){const o=y.httpHeaders[E];o!==void 0&&(this._httpHeaders[E]=o)}this._httpHeaders.Range=`bytes=${h}-${x-1}`;const F=E=>{if(E.statusCode===404){const o=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(E)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(p(this._url,this._httpHeaders),F)}else{const E=require$$5;this._request=E.request(p(this._url,this._httpHeaders),F)}this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class A extends v{constructor(y){super(y);let h=decodeURIComponent(this._url.path);S.test(this._url.href)&&(h=h.replace(/^\//,""));const x=require$$5;x.lstat(h,(F,E)=>{if(F){F.code==="ENOENT"&&(F=new n.MissingPDFException(`Missing PDF "${h}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=E.size,this._setReadableStream(x.createReadStream(h)),this._headersCapability.resolve()})}}class g extends b{constructor(y,h,x){super(y);let F=decodeURIComponent(this._url.path);S.test(this._url.href)&&(F=F.replace(/^\//,""));const E=require$$5;this._setReadableStream(E.createReadStream(F,{start:h,end:x-1}))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=i(6),r=i(1);const S={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},C="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/1999/xlink",v=["butt","round","square"],b=["miter","round","bevel"],p=function(E,o="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([E],{type:o}));const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let u=`data:${o};base64,`;for(let m=0,j=E.length;m<j;m+=3){const d=E[m]&255,T=E[m+1]&255,L=E[m+2]&255,K=d>>2,G=(d&3)<<4|T>>4,Y=m+1<j?(T&15)<<2|L>>6:64,V=m+2<j?L&63:64;u+=a[K]+a[G]+a[Y]+a[V]}return u},k=function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,f=new Int32Array(256);for(let L=0;L<256;L++){let K=L;for(let G=0;G<8;G++)K=K&1?3988292384^K>>1&2147483647:K>>1&2147483647;f[L]=K}function a(L,K,G){let Y=-1;for(let V=K;V<G;V++){const st=(Y^L[V])&255,D=f[st];Y=Y>>>8^D}return Y^-1}function u(L,K,G,Y){let V=Y;const st=K.length;G[V]=st>>24&255,G[V+1]=st>>16&255,G[V+2]=st>>8&255,G[V+3]=st&255,V+=4,G[V]=L.charCodeAt(0)&255,G[V+1]=L.charCodeAt(1)&255,G[V+2]=L.charCodeAt(2)&255,G[V+3]=L.charCodeAt(3)&255,V+=4,G.set(K,V),V+=K.length;const D=a(G,Y+4,V);G[V]=D>>24&255,G[V+1]=D>>16&255,G[V+2]=D>>8&255,G[V+3]=D&255}function m(L,K,G){let Y=1,V=0;for(let st=K;st<G;++st)Y=(Y+(L[st]&255))%65521,V=(V+Y)%65521;return V<<16|Y}function j(L){if(!r.isNodeJS)return d(L);try{const K=parseInt(process.versions.node)>=8?L:Buffer.from(L),G=require$$5.deflateSync(K,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(K){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return d(L)}function d(L){let K=L.length;const G=65535,Y=Math.ceil(K/G),V=new Uint8Array(2+K+Y*5+4);let st=0;V[st++]=120,V[st++]=156;let D=0;for(;K>G;)V[st++]=0,V[st++]=255,V[st++]=255,V[st++]=0,V[st++]=0,V.set(L.subarray(D,D+G),st),st+=G,D+=G,K-=G;V[st++]=1,V[st++]=K&255,V[st++]=K>>8&255,V[st++]=~K&65535&255,V[st++]=(~K&65535)>>8&255,V.set(L.subarray(D),st),st+=L.length-D;const X=m(L,0,L.length);return V[st++]=X>>24&255,V[st++]=X>>16&255,V[st++]=X>>8&255,V[st++]=X&255,V}function T(L,K,G,Y){const V=L.width,st=L.height;let D,X,it;const M=L.data;switch(K){case r.ImageKind.GRAYSCALE_1BPP:X=0,D=1,it=V+7>>3;break;case r.ImageKind.RGB_24BPP:X=2,D=8,it=V*3;break;case r.ImageKind.RGBA_32BPP:X=6,D=8,it=V*4;break;default:throw new Error("invalid format")}const l=new Uint8Array((1+it)*st);let c=0,P=0;for(let pt=0;pt<st;++pt)l[c++]=0,l.set(M.subarray(P,P+it),c),P+=it,c+=it;if(K===r.ImageKind.GRAYSCALE_1BPP&&Y){c=0;for(let pt=0;pt<st;pt++){c++;for(let ft=0;ft<it;ft++)l[c++]^=255}}const $=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,V&255,st>>24&255,st>>16&255,st>>8&255,st&255,D,X,0,0,0]),B=j(l),W=E.length+o*3+$.length+B.length,Q=new Uint8Array(W);let at=0;return Q.set(E,at),at+=E.length,u("IHDR",$,Q,at),at+=o+$.length,u("IDATA",B,Q,at),at+=o+B.length,u("IEND",new Uint8Array(0),Q,at),p(Q,"image/png",G)}return function(K,G,Y){const V=K.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:K.kind;return T(K,V,G,Y)}}();class I{constructor(){this.fontSizeScale=1,this.fontWeight=S.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=S.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,f){this.x=o,this.y=f}}function A(E){let o=[];const f=[];for(const a of E){if(a.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),f.push(o),o=o.at(-1).items;continue}a.fn==="restore"?o=f.pop():o.push(a)}return o}function g(E){if(Number.isInteger(E))return E.toString();const o=E.toFixed(10);let f=o.length-1;if(o[f]!=="0")return o;do f--;while(o[f]==="0");return o.substring(0,o[f]==="."?f:f+1)}function w(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${g(E[0])} ${g(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const o=Math.acos(E[0])*180/Math.PI;return`rotate(${g(o)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${g(E[4])} ${g(E[5])})`;return`matrix(${g(E[0])} ${g(E[1])} ${g(E[2])} ${g(E[3])} ${g(E[4])} ${g(E[5])})`}let y=0,h=0,x=0;class F{constructor(o,f,a=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new I,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const u in r.OPS)this._operatorIdMapping[r.OPS[u]]=u}getObject(o,f=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):f}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const f=o.fnArray,a=o.argsArray;for(let u=0,m=f.length;u<m;u++)if(f[u]===r.OPS.dependency)for(const j of a[u]){const d=j.startsWith("g_")?this.commonObjs:this.objs,T=new Promise(L=>{d.get(j,L)});this.current.dependencies.push(T)}return Promise.all(this.current.dependencies)}transform(o,f,a,u,m,j){const d=[o,f,a,u,m,j];this.transformMatrix=r.Util.transform(this.transformMatrix,d),this.tgrp=null}getSVG(o,f){this.viewport=f;const a=this._initialize(f);return this.loadDependencies(o).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),a))}convertOpList(o){const f=this._operatorIdMapping,a=o.argsArray,u=o.fnArray,m=[];for(let j=0,d=u.length;j<d;j++){const T=u[j];m.push({fnId:T,fn:f[T],args:a[j]})}return A(m)}executeOpTree(o){for(const f of o){const a=f.fn,u=f.fnId,m=f.args;switch(u|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(m);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(m[0],m[1]);break;case r.OPS.setFont:this.setFont(m);break;case r.OPS.showText:this.showText(m[0]);break;case r.OPS.showSpacedText:this.showText(m[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(m[0],m[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(m[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(m[0]);break;case r.OPS.setHScale:this.setHScale(m[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case r.OPS.setTextRise:this.setTextRise(m[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(m[0]);break;case r.OPS.setLineWidth:this.setLineWidth(m[0]);break;case r.OPS.setLineJoin:this.setLineJoin(m[0]);break;case r.OPS.setLineCap:this.setLineCap(m[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(m[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(m[0],m[1],m[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(m[0],m[1],m[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(m);break;case r.OPS.setFillColorN:this.setFillColorN(m);break;case r.OPS.shadingFill:this.shadingFill(m[0]);break;case r.OPS.setDash:this.setDash(m[0],m[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(m[0]);break;case r.OPS.setFlatness:this.setFlatness(m[0]);break;case r.OPS.setGState:this.setGState(m[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(m[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(m[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(m[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(m[0],m[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(m[0],m[1],m[2],m[3],m[4],m[5]);break;case r.OPS.constructPath:this.constructPath(m[0],m[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,r.warn)(`Unimplemented operator ${a}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,f,a,u,m,j){const d=this.current;d.textMatrix=d.lineMatrix=[o,f,a,u,m,j],d.textMatrixScale=Math.hypot(o,f),d.x=d.lineX=0,d.y=d.lineY=0,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${g(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",g(-d.y)),d.txtElement=this.svgFactory.createElement("svg:text"),d.txtElement.append(d.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=r.IDENTITY_MATRIX,o.lineMatrix=r.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,f){const a=this.current;a.x=a.lineX+=o,a.y=a.lineY+=f,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${g(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",g(-a.y))}showText(o){const f=this.current,a=f.font,u=f.fontSize;if(u===0)return;const m=f.fontSizeScale,j=f.charSpacing,d=f.wordSpacing,T=f.fontDirection,L=f.textHScale*T,K=a.vertical,G=K?1:-1,Y=a.defaultVMetrics,V=u*f.fontMatrix[0];let st=0;for(const it of o){if(it===null){st+=T*d;continue}else if(typeof it=="number"){st+=G*it*u/1e3;continue}const M=(it.isSpace?d:0)+j,l=it.fontChar;let c,P,$=it.width;if(K){let W;const Q=it.vmetric||Y;W=it.vmetric?Q[1]:$*.5,W=-W*V;const at=Q[2]*V;$=Q?-Q[0]:$,c=W/m,P=(st+at)/m}else c=st/m,P=0;(it.isInFont||a.missingFile)&&(f.xcoords.push(f.x+c),K&&f.ycoords.push(-f.y+P),f.tspan.textContent+=l);const B=K?$*V-M*T:$*V+M*T;st+=B}f.tspan.setAttributeNS(null,"x",f.xcoords.map(g).join(" ")),K?f.tspan.setAttributeNS(null,"y",f.ycoords.map(g).join(" ")):f.tspan.setAttributeNS(null,"y",g(-f.y)),K?f.y-=st:f.x+=st*L,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${g(f.fontSize)}px`),f.fontStyle!==S.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==S.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const D=f.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(D===r.TextRenderingMode.FILL||D===r.TextRenderingMode.FILL_STROKE?(f.fillColor!==S.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?f.tspan.setAttributeNS(null,"fill","transparent"):f.tspan.setAttributeNS(null,"fill","none"),D===r.TextRenderingMode.STROKE||D===r.TextRenderingMode.FILL_STROKE){const it=1/(f.textMatrixScale||1);this._setStrokeAttributes(f.tspan,it)}let X=f.textMatrix;f.textRise!==0&&(X=X.slice(),X[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${w(X)} scale(${g(L)}, -1)`),f.txtElement.setAttributeNS(C,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(o,f){this.setLeading(-f),this.moveText(o,f)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=p(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${f}); }
`}setFont(o){const f=this.current,a=this.commonObjs.get(o[0]);let u=o[1];f.font=a,this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),f.fontMatrix=a.fontMatrix||r.FONT_IDENTITY_MATRIX;let m="normal";a.black?m="900":a.bold&&(m="bold");const j=a.italic?"italic":"normal";u<0?(u=-u,f.fontDirection=-1):f.fontDirection=1,f.fontSize=u,f.fontFamily=a.loadedName,f.fontWeight=m,f.fontStyle=j,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",g(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const o=this.current;o.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((f=o.txtElement)!=null&&f.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=v[o]}setLineJoin(o){this.current.lineJoin=b[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,f,a){this.current.strokeColor=r.Util.makeHexColor(o,f,a)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,f,a){this.current.fillColor=r.Util.makeHexColor(o,f,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:f,height:a}=this.viewport,u=r.Util.inverseTransform(this.transformMatrix),[m,j,d,T]=r.Util.getAxialAlignedBoundingBox([0,0,f,a],u),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",m),L.setAttributeNS(null,"y",j),L.setAttributeNS(null,"width",d-m),L.setAttributeNS(null,"height",T-j),L.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(L)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const f=o[1],a=o[2],u=o[3]||r.IDENTITY_MATRIX,[m,j,d,T]=o[4],L=o[5],K=o[6],G=o[7],Y=`shading${x++}`,[V,st,D,X]=r.Util.normalizeRect([...r.Util.applyTransform([m,j],u),...r.Util.applyTransform([d,T],u)]),[it,M]=r.Util.singularValueDecompose2dScale(u),l=L*it,c=K*M,P=this.svgFactory.createElement("svg:pattern");P.setAttributeNS(null,"id",Y),P.setAttributeNS(null,"patternUnits","userSpaceOnUse"),P.setAttributeNS(null,"width",l),P.setAttributeNS(null,"height",c),P.setAttributeNS(null,"x",`${V}`),P.setAttributeNS(null,"y",`${st}`);const $=this.svg,B=this.transformMatrix,W=this.current.fillColor,Q=this.current.strokeColor,at=this.svgFactory.create(D-V,X-st);if(this.svg=at,this.transformMatrix=u,G===2){const pt=r.Util.makeHexColor(...f);this.current.fillColor=pt,this.current.strokeColor=pt}return this.executeOpTree(this.convertOpList(a)),this.svg=$,this.transformMatrix=B,this.current.fillColor=W,this.current.strokeColor=Q,P.append(at.childNodes[0]),this.defs.append(P),`url(#${Y})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const f=`shading${x++}`,a=o[3];let u;switch(o[1]){case"axial":const m=o[4],j=o[5];u=this.svgFactory.createElement("svg:linearGradient"),u.setAttributeNS(null,"id",f),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"x1",m[0]),u.setAttributeNS(null,"y1",m[1]),u.setAttributeNS(null,"x2",j[0]),u.setAttributeNS(null,"y2",j[1]);break;case"radial":const d=o[4],T=o[5],L=o[6],K=o[7];u=this.svgFactory.createElement("svg:radialGradient"),u.setAttributeNS(null,"id",f),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"cx",T[0]),u.setAttributeNS(null,"cy",T[1]),u.setAttributeNS(null,"r",K),u.setAttributeNS(null,"fx",d[0]),u.setAttributeNS(null,"fy",d[1]),u.setAttributeNS(null,"fr",L);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const m of a){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",m[0]),j.setAttributeNS(null,"stop-color",m[1]),u.append(j)}return this.defs.append(u),`url(#${f})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,f){this.current.dashArray=o,this.current.dashPhase=f}constructPath(o,f){const a=this.current;let u=a.x,m=a.y,j=[],d=0;for(const T of o)switch(T|0){case r.OPS.rectangle:u=f[d++],m=f[d++];const L=f[d++],K=f[d++],G=u+L,Y=m+K;j.push("M",g(u),g(m),"L",g(G),g(m),"L",g(G),g(Y),"L",g(u),g(Y),"Z");break;case r.OPS.moveTo:u=f[d++],m=f[d++],j.push("M",g(u),g(m));break;case r.OPS.lineTo:u=f[d++],m=f[d++],j.push("L",g(u),g(m));break;case r.OPS.curveTo:u=f[d+4],m=f[d+5],j.push("C",g(f[d]),g(f[d+1]),g(f[d+2]),g(f[d+3]),g(u),g(m)),d+=6;break;case r.OPS.curveTo2:j.push("C",g(u),g(m),g(f[d]),g(f[d+1]),g(f[d+2]),g(f[d+3])),u=f[d+2],m=f[d+3],d+=4;break;case r.OPS.curveTo3:u=f[d+2],m=f[d+3],j.push("C",g(f[d]),g(f[d+1]),g(u),g(m),g(u),g(m)),d+=4;break;case r.OPS.closePath:j.push("Z");break}j=j.join(" "),a.path&&o.length>0&&o[0]!==r.OPS.rectangle&&o[0]!==r.OPS.moveTo?j=a.path.getAttributeNS(null,"d")+j:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(a.path)),a.path.setAttributeNS(null,"d",j),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(u,m)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const f=`clippath${y++}`,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",f),a.setAttributeNS(null,"transform",w(this.transformMatrix));const u=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?u.setAttributeNS(null,"clip-rule","evenodd"):u.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,a.append(u),this.defs.append(a),o.activeClipUrl){o.clipGroup=null;for(const m of this.extraStack)m.clipGroup=null;a.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const f=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",f)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[f,a]of o)switch(f){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,r.warn)(`Unimplemented graphic state operator ${f}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,f=1){const a=this.current;let u=a.dashArray;f!==1&&u.length>0&&(u=u.map(function(m){return f*m})),o.setAttributeNS(null,"stroke",a.strokeColor),o.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",g(a.miterLimit)),o.setAttributeNS(null,"stroke-linecap",a.lineCap),o.setAttributeNS(null,"stroke-linejoin",a.lineJoin),o.setAttributeNS(null,"stroke-width",g(f*a.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",u.map(g).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",g(f*a.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const f=this.getObject(o);if(!f){(0,r.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(f)}paintInlineImageXObject(o,f){const a=o.width,u=o.height,m=k(o,this.forceDataSchema,!!f),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",g(a)),j.setAttributeNS(null,"height",g(u)),this.current.element=j,this.clip("nonzero");const d=this.svgFactory.createElement("svg:image");d.setAttributeNS(N,"xlink:href",m),d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y",g(-u)),d.setAttributeNS(null,"width",g(a)+"px"),d.setAttributeNS(null,"height",g(u)+"px"),d.setAttributeNS(null,"transform",`scale(${g(1/a)} ${g(-1/u)})`),f?f.append(d):this._ensureTransformGroup().append(d)}paintImageMaskXObject(o){const f=this.getObject(o.data,o);if(f.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const a=this.current,u=f.width,m=f.height,j=a.fillColor;a.maskId=`mask${h++}`;const d=this.svgFactory.createElement("svg:mask");d.setAttributeNS(null,"id",a.maskId);const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",g(u)),T.setAttributeNS(null,"height",g(m)),T.setAttributeNS(null,"fill",j),T.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(d),this._ensureTransformGroup().append(T),this.paintInlineImageXObject(f,d)}paintFormXObjectBegin(o,f){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),f){const a=f[2]-f[0],u=f[3]-f[1],m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",f[0]),m.setAttributeNS(null,"y",f[1]),m.setAttributeNS(null,"width",g(a)),m.setAttributeNS(null,"height",g(u)),this.current.element=m,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const f=this.svgFactory.create(o.width,o.height),a=this.svgFactory.createElement("svg:defs");f.append(a),this.defs=a;const u=this.svgFactory.createElement("svg:g");return u.setAttributeNS(null,"transform",w(o.transform)),f.append(u),this.svg=u,f}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",w(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=F},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class i{static textContent(r){const S=[],C={items:S,styles:Object.create(null)};function N(v){var k;if(!v)return;let b=null;const p=v.name;if(p==="#text")b=v.value;else if(i.shouldBuildText(p))(k=v==null?void 0:v.attributes)!=null&&k.textContent?b=v.attributes.textContent:v.value&&(b=v.value);else return;if(b!==null&&S.push({str:b}),!!v.children)for(const I of v.children)N(I)}return N(r),C}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}e.XfaText=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=w,e.updateTextLayer=y;var n=i(1),r=i(6);const S=1e5,C=30,N=.8,v=new Map;function b(h,x){let F;if(x&&n.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(h,h).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=h,F=E.getContext("2d",{alpha:!1})}return F}function p(h,x){const F=v.get(h);if(F)return F;const E=b(C,x);E.font=`${C}px ${h}`;const o=E.measureText("");let f=o.fontBoundingBoxAscent,a=Math.abs(o.fontBoundingBoxDescent);if(f){const m=f/(f+a);return v.set(h,m),E.canvas.width=E.canvas.height=0,m}E.strokeStyle="red",E.clearRect(0,0,C,C),E.strokeText("g",0,0);let u=E.getImageData(0,0,C,C).data;a=0;for(let m=u.length-1-3;m>=0;m-=4)if(u[m]>0){a=Math.ceil(m/4/C);break}E.clearRect(0,0,C,C),E.strokeText("A",0,C),u=E.getImageData(0,0,C,C).data,f=0;for(let m=0,j=u.length;m<j;m+=4)if(u[m]>0){f=C-Math.floor(m/4/C);break}if(E.canvas.width=E.canvas.height=0,f){const m=f/(f+a);return v.set(h,m),m}return v.set(h,N),N}function k(h,x,F){const E=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};h._textDivs.push(E);const f=n.Util.transform(h._transform,x.transform);let a=Math.atan2(f[1],f[0]);const u=F[x.fontName];u.vertical&&(a+=Math.PI/2);const m=Math.hypot(f[2],f[3]),j=m*p(u.fontFamily,h._isOffscreenCanvasSupported);let d,T;a===0?(d=f[4],T=f[5]-j):(d=f[4]+j*Math.sin(a),T=f[5]-j*Math.cos(a));const L="calc(var(--scale-factor)*",K=E.style;h._container===h._rootContainer?(K.left=`${(100*d/h._pageWidth).toFixed(2)}%`,K.top=`${(100*T/h._pageHeight).toFixed(2)}%`):(K.left=`${L}${d.toFixed(2)}px)`,K.top=`${L}${T.toFixed(2)}px)`),K.fontSize=`${L}${m.toFixed(2)}px)`,K.fontFamily=u.fontFamily,o.fontSize=m,E.setAttribute("role","presentation"),E.textContent=x.str,E.dir=x.dir,h._fontInspectorEnabled&&(E.dataset.fontName=x.fontName),a!==0&&(o.angle=a*(180/Math.PI));let G=!1;if(x.str.length>1)G=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const Y=Math.abs(x.transform[0]),V=Math.abs(x.transform[3]);Y!==V&&Math.max(Y,V)/Math.min(Y,V)>1.5&&(G=!0)}G&&(o.canvasWidth=u.vertical?x.height:x.width),h._textDivProperties.set(E,o),h._isReadableStream&&h._layoutText(E)}function I(h){const{div:x,scale:F,properties:E,ctx:o,prevFontSize:f,prevFontFamily:a}=h,{style:u}=x;let m="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:j}=u,{canvasWidth:d,fontSize:T}=E;(f!==T||a!==j)&&(o.font=`${T*F}px ${j}`,h.prevFontSize=T,h.prevFontFamily=j);const{width:L}=o.measureText(x.textContent);L>0&&(m=`scaleX(${d*F/L})`)}E.angle!==0&&(m=`rotate(${E.angle}deg) ${m}`),m.length>0&&(u.transform=m)}function A(h){if(h._canceled)return;const x=h._textDivs,F=h._capability;if(x.length>S){F.resolve();return}if(!h._isReadableStream)for(const o of x)h._layoutText(o);F.resolve()}class g{constructor({textContentSource:x,container:F,viewport:E,textDivs:o,textDivProperties:f,textContentItemsStr:a,isOffscreenCanvasSupported:u}){var L;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=o||[],this._textContentItemsStr=a||[],this._isOffscreenCanvasSupported=u,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)!=null&&L.enabled),this._reader=null,this._textDivProperties=f||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,u)};const{pageWidth:m,pageHeight:j,pageX:d,pageY:T}=E.rawDims;this._transform=[1,0,0,-1,-d,T+j],this._pageWidth=m,this._pageHeight=j,(0,r.setLayerDimensions)(F,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(x,F){for(const E of x){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),o.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),k(this,E,F)}}_layoutText(x){const F=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,I(this._layoutTextParams),F.hasText&&this._container.append(x),F.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const x=new n.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:o,done:f})=>{if(f){x.resolve();return}Object.assign(F,o.styles),this._processItems(o.items,F),E()},x.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:o}=this._textContentSource;this._processItems(E,o),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{F=null,A(this)},this._capability.reject)}}e.TextLayerRenderTask=g;function w(h){!h.textContentSource&&(h.textContent||h.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),h.textContentSource=h.textContent||h.textContentStream);const{container:x,viewport:F}=h,E=getComputedStyle(x),o=E.getPropertyValue("visibility"),f=parseFloat(E.getPropertyValue("--scale-factor"));o==="visible"&&(!f||Math.abs(f-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const a=new g(h);return a._render(),a}function y({container:h,viewport:x,textDivs:F,textDivProperties:E,isOffscreenCanvasSupported:o,mustRotate:f=!0,mustRescale:a=!0}){if(f&&(0,r.setLayerDimensions)(h,{rotation:x.rotation}),a){const u=b(0,o),j={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u};for(const d of F)j.properties=E.get(d),j.div=d,I(j)}}},(t,e,i)=>{var p,k,I,A,g,w,y,h,x,F,E,Qe,we,Ze,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=i(1),r=i(4),S=i(28),C=i(33),N=i(6),v=i(34);const m=class m{constructor({uiManager:d,pageIndex:T,div:L,accessibilityManager:K,annotationLayer:G,viewport:Y,l10n:V}){ct(this,E);ct(this,p);ct(this,k,!1);ct(this,I,null);ct(this,A,this.pointerup.bind(this));ct(this,g,this.pointerdown.bind(this));ct(this,w,new Map);ct(this,y,!1);ct(this,h,!1);ct(this,x,!1);ct(this,F);const st=[S.FreeTextEditor,C.InkEditor,v.StampEditor];if(!m._initialized){m._initialized=!0;for(const D of st)D.initialize(V)}d.registerEditorTypes(st),ut(this,F,d),this.pageIndex=T,this.div=L,ut(this,p,K),ut(this,I,G),this.viewport=Y,s(this,F).addLayer(this)}get isEmpty(){return s(this,w).size===0}updateToolbar(d){s(this,F).updateToolbar(d)}updateMode(d=s(this,F).getMode()){nt(this,E,tn).call(this),d===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),d!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",d===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",d===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",d===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(d){if(!d&&s(this,F).getMode()!==n.AnnotationEditorType.INK)return;if(!d){for(const L of s(this,w).values())if(L.isEmpty()){L.setInBackground();return}}nt(this,E,we).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(d){s(this,F).setEditingState(d)}addCommands(d){s(this,F).addCommands(d)}enable(){this.div.style.pointerEvents="auto";const d=new Set;for(const L of s(this,w).values())L.enableEditing(),L.annotationElementId&&d.add(L.annotationElementId);if(!s(this,I))return;const T=s(this,I).getEditableAnnotations();for(const L of T){if(L.hide(),s(this,F).isDeletedAnnotationElement(L.data.id)||d.has(L.data.id))continue;const K=this.deserialize(L);K&&(this.addOrRebuild(K),K.enableEditing())}}disable(){var T;ut(this,x,!0),this.div.style.pointerEvents="none";const d=new Set;for(const L of s(this,w).values()){if(L.disableEditing(),!L.annotationElementId||L.serialize()!==null){d.add(L.annotationElementId);continue}(T=this.getEditableAnnotation(L.annotationElementId))==null||T.show(),L.remove()}if(s(this,I)){const L=s(this,I).getEditableAnnotations();for(const K of L){const{id:G}=K.data;d.has(G)||s(this,F).isDeletedAnnotationElement(G)||K.show()}}nt(this,E,tn).call(this),this.isEmpty&&(this.div.hidden=!0),ut(this,x,!1)}getEditableAnnotation(d){var T;return((T=s(this,I))==null?void 0:T.getEditableAnnotation(d))||null}setActiveEditor(d){s(this,F).getActive()!==d&&s(this,F).setActiveEditor(d)}enableClick(){this.div.addEventListener("pointerdown",s(this,g)),this.div.addEventListener("pointerup",s(this,A))}disableClick(){this.div.removeEventListener("pointerdown",s(this,g)),this.div.removeEventListener("pointerup",s(this,A))}attach(d){s(this,w).set(d.id,d);const{annotationElementId:T}=d;T&&s(this,F).isDeletedAnnotationElement(T)&&s(this,F).removeDeletedAnnotationElement(d)}detach(d){var T;s(this,w).delete(d.id),(T=s(this,p))==null||T.removePointerInTextLayer(d.contentDiv),!s(this,x)&&d.annotationElementId&&s(this,F).addDeletedAnnotationElement(d)}remove(d){this.detach(d),s(this,F).removeEditor(d),d.div.contains(document.activeElement)&&setTimeout(()=>{s(this,F).focusMainContainer()},0),d.div.remove(),d.isAttachedToDOM=!1,s(this,h)||this.addInkEditorIfNeeded(!1)}changeParent(d){var T;d.parent!==this&&(d.annotationElementId&&(s(this,F).addDeletedAnnotationElement(d.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(d),d.annotationElementId=null),this.attach(d),(T=d.parent)==null||T.detach(d),d.setParent(this),d.div&&d.isAttachedToDOM&&(d.div.remove(),this.div.append(d.div)))}add(d){if(this.changeParent(d),s(this,F).addEditor(d),this.attach(d),!d.isAttachedToDOM){const T=d.render();this.div.append(T),d.isAttachedToDOM=!0}d.fixAndSetPosition(),d.onceAdded(),s(this,F).addToAnnotationStorage(d)}moveEditorInDOM(d){var L;if(!d.isAttachedToDOM)return;const{activeElement:T}=document;d.div.contains(T)&&(d._focusEventsAllowed=!1,setTimeout(()=>{d.div.contains(document.activeElement)?d._focusEventsAllowed=!0:(d.div.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),T.focus())},0)),d._structTreeParentId=(L=s(this,p))==null?void 0:L.moveElementInDOM(this.div,d.div,d.contentDiv,!0)}addOrRebuild(d){d.needsToBeRebuilt()?d.rebuild():this.add(d)}addUndoableEditor(d){const T=()=>d._uiManager.rebuild(d),L=()=>{d.remove()};this.addCommands({cmd:T,undo:L,mustExec:!1})}getNextId(){return s(this,F).getId()}pasteEditor(d,T){s(this,F).updateToolbar(d),s(this,F).updateMode(d);const{offsetX:L,offsetY:K}=nt(this,E,Ze).call(this),G=this.getNextId(),Y=nt(this,E,Qe).call(this,{parent:this,id:G,x:L,y:K,uiManager:s(this,F),isCentered:!0,...T});Y&&this.add(Y)}deserialize(d){switch(d.annotationType??d.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return S.FreeTextEditor.deserialize(d,this,s(this,F));case n.AnnotationEditorType.INK:return C.InkEditor.deserialize(d,this,s(this,F));case n.AnnotationEditorType.STAMP:return v.StampEditor.deserialize(d,this,s(this,F))}return null}addNewEditor(){nt(this,E,we).call(this,nt(this,E,Ze).call(this),!0)}setSelected(d){s(this,F).setSelected(d)}toggleSelected(d){s(this,F).toggleSelected(d)}isSelected(d){return s(this,F).isSelected(d)}unselect(d){s(this,F).unselect(d)}pointerup(d){const{isMac:T}=n.FeatureTest.platform;if(!(d.button!==0||d.ctrlKey&&T)&&d.target===this.div&&s(this,y)){if(ut(this,y,!1),!s(this,k)){ut(this,k,!0);return}if(s(this,F).getMode()===n.AnnotationEditorType.STAMP){s(this,F).unselectAll();return}nt(this,E,we).call(this,d,!1)}}pointerdown(d){if(s(this,y)){ut(this,y,!1);return}const{isMac:T}=n.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&T||d.target!==this.div)return;ut(this,y,!0);const L=s(this,F).getActive();ut(this,k,!L||L.isEmpty())}findNewParent(d,T,L){const K=s(this,F).findParent(T,L);return K===null||K===this?!1:(K.changeParent(d),!0)}destroy(){var d,T;((d=s(this,F).getActive())==null?void 0:d.parent)===this&&(s(this,F).commitOrRemove(),s(this,F).setActiveEditor(null));for(const L of s(this,w).values())(T=s(this,p))==null||T.removePointerInTextLayer(L.contentDiv),L.setParent(null),L.isAttachedToDOM=!1,L.div.remove();this.div=null,s(this,w).clear(),s(this,F).removeLayer(this)}render({viewport:d}){this.viewport=d,(0,N.setLayerDimensions)(this.div,d);for(const T of s(this,F).getEditors(this.pageIndex))this.add(T);this.updateMode()}update({viewport:d}){s(this,F).commitOrRemove(),this.viewport=d,(0,N.setLayerDimensions)(this.div,{rotation:d.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:d,pageHeight:T}=this.viewport.rawDims;return[d,T]}};p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakMap,x=new WeakMap,F=new WeakMap,E=new WeakSet,Qe=function(d){switch(s(this,F).getMode()){case n.AnnotationEditorType.FREETEXT:return new S.FreeTextEditor(d);case n.AnnotationEditorType.INK:return new C.InkEditor(d);case n.AnnotationEditorType.STAMP:return new v.StampEditor(d)}return null},we=function(d,T){const L=this.getNextId(),K=nt(this,E,Qe).call(this,{parent:this,id:L,x:d.offsetX,y:d.offsetY,uiManager:s(this,F),isCentered:T});return K&&this.add(K),K},Ze=function(){const{x:d,y:T,width:L,height:K}=this.div.getBoundingClientRect(),G=Math.max(0,d),Y=Math.max(0,T),V=Math.min(window.innerWidth,d+L),st=Math.min(window.innerHeight,T+K),D=(G+V)/2-d,X=(Y+st)/2-T,[it,M]=this.viewport.rotation%180===0?[D,X]:[X,D];return{offsetX:it,offsetY:M}},tn=function(){ut(this,h,!0);for(const d of s(this,w).values())d.isEmpty()&&d.remove();ut(this,h,!1)},Qt(m,"_initialized",!1);let b=m;e.AnnotationEditorLayer=b},(t,e,i)=>{var v,b,p,k,I,A,g,w,y,h,Rn,kn,Dn,ve,en,Fn,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=i(1),r=i(5),S=i(4),C=i(29);const m=class m extends S.AnnotationEditor{constructor(T){super({...T,name:"freeTextEditor"});ct(this,h);ct(this,v,this.editorDivBlur.bind(this));ct(this,b,this.editorDivFocus.bind(this));ct(this,p,this.editorDivInput.bind(this));ct(this,k,this.editorDivKeydown.bind(this));ct(this,I);ct(this,A,"");ct(this,g,`${this.id}-editor`);ct(this,w);ct(this,y,null);ut(this,I,T.color||m._defaultColor||S.AnnotationEditor._defaultLineColor),ut(this,w,T.fontSize||m._defaultFontSize)}static get _keyboardManager(){const T=m.prototype,L=Y=>Y.isEmpty(),K=r.AnnotationEditorUIManager.TRANSLATE_SMALL,G=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],T.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],T._translateEmpty,{args:[-K,0],checker:L}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],T._translateEmpty,{args:[-G,0],checker:L}],[["ArrowRight","mac+ArrowRight"],T._translateEmpty,{args:[K,0],checker:L}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],T._translateEmpty,{args:[G,0],checker:L}],[["ArrowUp","mac+ArrowUp"],T._translateEmpty,{args:[0,-K],checker:L}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],T._translateEmpty,{args:[0,-G],checker:L}],[["ArrowDown","mac+ArrowDown"],T._translateEmpty,{args:[0,K],checker:L}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],T._translateEmpty,{args:[0,G],checker:L}]]))}static initialize(T){S.AnnotationEditor.initialize(T,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const L=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(L.getPropertyValue("--freetext-padding"))}static updateDefaultParams(T,L){switch(T){case n.AnnotationEditorParamsType.FREETEXT_SIZE:m._defaultFontSize=L;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:m._defaultColor=L;break}}updateParams(T,L){switch(T){case n.AnnotationEditorParamsType.FREETEXT_SIZE:nt(this,h,Rn).call(this,L);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:nt(this,h,kn).call(this,L);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,m._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,m._defaultColor||S.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,w)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,I)]]}_translateEmpty(T,L){this._uiManager.translateSelectedEditors(T,L,!0)}getInitialTranslation(){const T=this.parentScale;return[-m._internalPadding*T,-(m._internalPadding+s(this,w))*T]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",s(this,k)),this.editorDiv.addEventListener("focus",s(this,b)),this.editorDiv.addEventListener("blur",s(this,v)),this.editorDiv.addEventListener("input",s(this,p)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",s(this,g)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",s(this,k)),this.editorDiv.removeEventListener("focus",s(this,b)),this.editorDiv.removeEventListener("blur",s(this,v)),this.editorDiv.removeEventListener("input",s(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(T){this._focusEventsAllowed&&(super.focusin(T),T.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var T;if(this.width){nt(this,h,nn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(T=this._initialOptions)!=null&&T.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const T=s(this,A),L=ut(this,A,nt(this,h,Dn).call(this).trimEnd());if(T===L)return;const K=G=>{if(ut(this,A,G),!G){this.remove();return}nt(this,h,en).call(this),this._uiManager.rebuild(this),nt(this,h,ve).call(this)};this.addCommands({cmd:()=>{K(L)},undo:()=>{K(T)},mustExec:!1}),nt(this,h,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(T){this.enterInEditMode()}keydown(T){T.target===this.div&&T.key==="Enter"&&(this.enterInEditMode(),T.preventDefault())}editorDivKeydown(T){m._keyboardManager.exec(this,T)}editorDivFocus(T){this.isEditing=!0}editorDivBlur(T){this.isEditing=!1}editorDivInput(T){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let T,L;this.width&&(T=this.x,L=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",s(this,g)),this.enableEditing(),S.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("aria-label",G)}),S.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(G=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:K}=this.editorDiv;if(K.fontSize=`calc(${s(this,w)}px * var(--scale-factor))`,K.color=s(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,Y]=this.parentDimensions;if(this.annotationElementId){const{position:V}=s(this,y);let[st,D]=this.getInitialTranslation();[st,D]=this.pageTranslationToScreen(st,D);const[X,it]=this.pageDimensions,[M,l]=this.pageTranslation;let c,P;switch(this.rotation){case 0:c=T+(V[0]-M)/X,P=L+this.height-(V[1]-l)/it;break;case 90:c=T+(V[0]-M)/X,P=L-(V[1]-l)/it,[st,D]=[D,-st];break;case 180:c=T-this.width+(V[0]-M)/X,P=L-(V[1]-l)/it,[st,D]=[-st,-D];break;case 270:c=T+(V[0]-M-this.height*it)/X,P=L+(V[1]-l-this.width*X)/it,[st,D]=[-D,st];break}this.setAt(c*G,P*Y,st,D)}else this.setAt(T*G,L*Y,this.width*G,this.height*Y);nt(this,h,en).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(T,L,K){let G=null;if(T instanceof C.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:V,fontColor:st},rect:D,rotation:X,id:it},textContent:M,textPosition:l,parent:{page:{pageNumber:c}}}=T;if(!M||M.length===0)return null;G=T={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(st),fontSize:V,value:M.join(`
`),position:l,pageIndex:c-1,rect:D,rotation:X,id:it,deleted:!1}}const Y=super.deserialize(T,L,K);return ut(Y,w,T.fontSize),ut(Y,I,n.Util.makeHexColor(...T.color)),ut(Y,A,T.value),Y.annotationElementId=T.id||null,ut(Y,y,G),Y}serialize(T=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const L=m._internalPadding*this.parentScale,K=this.getRect(L,L),G=S.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:s(this,I)),Y={annotationType:n.AnnotationEditorType.FREETEXT,color:G,fontSize:s(this,w),value:s(this,A),pageIndex:this.pageIndex,rect:K,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return T?Y:this.annotationElementId&&!nt(this,h,Fn).call(this,Y)?null:(Y.id=this.annotationElementId,Y)}};v=new WeakMap,b=new WeakMap,p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakSet,Rn=function(T){const L=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-s(this,w))*this.parentScale),ut(this,w,G),nt(this,h,ve).call(this)},K=s(this,w);this.addCommands({cmd:()=>{L(T)},undo:()=>{L(K)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kn=function(T){const L=s(this,I);this.addCommands({cmd:()=>{ut(this,I,this.editorDiv.style.color=T)},undo:()=>{ut(this,I,this.editorDiv.style.color=L)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Dn=function(){const T=this.editorDiv.getElementsByTagName("div");if(T.length===0)return this.editorDiv.innerText;const L=[];for(const K of T)L.push(K.innerText.replace(/\r\n?|\n/,""));return L.join(`
`)},ve=function(){const[T,L]=this.parentDimensions;let K;if(this.isAttachedToDOM)K=this.div.getBoundingClientRect();else{const{currentLayer:G,div:Y}=this,V=Y.style.display;Y.style.display="hidden",G.div.append(this.div),K=Y.getBoundingClientRect(),Y.remove(),Y.style.display=V}this.rotation%180===this.parentRotation%180?(this.width=K.width/T,this.height=K.height/L):(this.width=K.height/T,this.height=K.width/L),this.fixAndSetPosition()},en=function(){if(this.editorDiv.replaceChildren(),!!s(this,A))for(const T of s(this,A).split(`
`)){const L=document.createElement("div");L.append(T?document.createTextNode(T):document.createElement("br")),this.editorDiv.append(L)}},Fn=function(T){const{value:L,fontSize:K,color:G,rect:Y,pageIndex:V}=s(this,y);return T.value!==L||T.fontSize!==K||T.rect.some((st,D)=>Math.abs(st-Y[D])>=1)||T.color.some((st,D)=>st!==G[D])||T.pageIndex!==V},nn=function(T=!1){if(!this.annotationElementId)return;if(nt(this,h,ve).call(this),!T&&(this.width===0||this.height===0)){setTimeout(()=>nt(this,h,nn).call(this,!0),0);return}const L=m._internalPadding*this.parentScale;s(this,y).rect=this.getRect(L,L)},Qt(m,"_freeTextDefaultContent",""),Qt(m,"_internalPadding",0),Qt(m,"_defaultColor",null),Qt(m,"_defaultFontSize",10),Qt(m,"_type","freetext");let N=m;e.FreeTextEditor=N},(t,e,i)=>{var P,B,ae,Mn,at,pt,ft,bt,vt,yt,et,tt,R,U,Z,ot,gt,St,rt,q,wt,Ct,In,Pe,sn,rn,Mt,Gt,qt,At,lt,dt,kt,an,Kt,H,xt,Tt,Ln,on;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=i(1),r=i(6),S=i(3),C=i(30),N=i(31),v=i(32);const b=1e3,p=9,k=new WeakSet;function I(Ft){return{width:Ft[2]-Ft[0],height:Ft[3]-Ft[1]}}class A{static create(z){switch(z.data.annotationType){case n.AnnotationType.LINK:return new w(z);case n.AnnotationType.TEXT:return new y(z);case n.AnnotationType.WIDGET:switch(z.data.fieldType){case"Tx":return new x(z);case"Btn":return z.data.radioButton?new o(z):z.data.checkBox?new E(z):new f(z);case"Ch":return new a(z);case"Sig":return new F(z)}return new h(z);case n.AnnotationType.POPUP:return new u(z);case n.AnnotationType.FREETEXT:return new j(z);case n.AnnotationType.LINE:return new d(z);case n.AnnotationType.SQUARE:return new T(z);case n.AnnotationType.CIRCLE:return new L(z);case n.AnnotationType.POLYLINE:return new K(z);case n.AnnotationType.CARET:return new Y(z);case n.AnnotationType.INK:return new V(z);case n.AnnotationType.POLYGON:return new G(z);case n.AnnotationType.HIGHLIGHT:return new st(z);case n.AnnotationType.UNDERLINE:return new D(z);case n.AnnotationType.SQUIGGLY:return new X(z);case n.AnnotationType.STRIKEOUT:return new it(z);case n.AnnotationType.STAMP:return new M(z);case n.AnnotationType.FILEATTACHMENT:return new l(z);default:return new g(z)}}}const $=class ${constructor(z,{isRenderable:O=!1,ignoreBorder:J=!1,createQuadrilaterals:ht=!1}={}){ct(this,P,!1);this.isRenderable=O,this.data=z.data,this.layer=z.layer,this.linkService=z.linkService,this.downloadManager=z.downloadManager,this.imageResourcesPath=z.imageResourcesPath,this.renderForms=z.renderForms,this.svgFactory=z.svgFactory,this.annotationStorage=z.annotationStorage,this.enableScripting=z.enableScripting,this.hasJSActions=z.hasJSActions,this._fieldObjects=z.fieldObjects,this.parent=z.parent,O&&(this.container=this._createContainer(J)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:z,contentsObj:O,richText:J}){return!!(z!=null&&z.str||O!=null&&O.str||J!=null&&J.str)}get hasPopupData(){return $._hasPopupData(this.data)}_createContainer(z){const{data:O,parent:{page:J,viewport:ht}}=this,mt=document.createElement("section");mt.setAttribute("data-annotation-id",O.id),this instanceof h||(mt.tabIndex=b),mt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&mt.setAttribute("aria-haspopup","dialog"),O.noRotate&&mt.classList.add("norotate");const{pageWidth:Et,pageHeight:Pt,pageX:jt,pageY:It}=ht.rawDims;if(!O.rect||this instanceof u){const{rotation:Ut}=O;return!O.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,mt),mt}const{width:Rt,height:Ht}=I(O.rect),Lt=n.Util.normalizeRect([O.rect[0],J.view[3]-O.rect[1]+J.view[1],O.rect[2],J.view[3]-O.rect[3]+J.view[1]]);if(!z&&O.borderStyle.width>0){mt.style.borderWidth=`${O.borderStyle.width}px`;const Ut=O.borderStyle.horizontalCornerRadius,Vt=O.borderStyle.verticalCornerRadius;if(Ut>0||Vt>0){const Jt=`calc(${Ut}px * var(--scale-factor)) / calc(${Vt}px * var(--scale-factor))`;mt.style.borderRadius=Jt}else if(this instanceof o){const Jt=`calc(${Rt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;mt.style.borderRadius=Jt}switch(O.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:mt.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:mt.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:mt.style.borderBottomStyle="solid";break}const Yt=O.borderColor||null;Yt?(ut(this,P,!0),mt.style.borderColor=n.Util.makeHexColor(Yt[0]|0,Yt[1]|0,Yt[2]|0)):mt.style.borderWidth=0}mt.style.left=`${100*(Lt[0]-jt)/Et}%`,mt.style.top=`${100*(Lt[1]-It)/Pt}%`;const{rotation:$t}=O;return O.hasOwnCanvas||$t===0?(mt.style.width=`${100*Rt/Et}%`,mt.style.height=`${100*Ht/Pt}%`):this.setRotation($t,mt),mt}setRotation(z,O=this.container){if(!this.data.rect)return;const{pageWidth:J,pageHeight:ht}=this.parent.viewport.rawDims,{width:mt,height:Et}=I(this.data.rect);let Pt,jt;z%180===0?(Pt=100*mt/J,jt=100*Et/ht):(Pt=100*Et/J,jt=100*mt/ht),O.style.width=`${Pt}%`,O.style.height=`${jt}%`,O.setAttribute("data-main-rotation",(360-z)%360)}get _commonActions(){const z=(O,J,ht)=>{const mt=ht.detail[O],Et=mt[0],Pt=mt.slice(1);ht.target.style[J]=C.ColorConverters[`${Et}_HTML`](Pt),this.annotationStorage.setValue(this.data.id,{[J]:C.ColorConverters[`${Et}_rgb`](Pt)})};return(0,n.shadow)(this,"_commonActions",{display:O=>{const{display:J}=O.detail,ht=J%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:J===1||J===2})},print:O=>{this.annotationStorage.setValue(this.data.id,{noPrint:!O.detail.print})},hidden:O=>{const{hidden:J}=O.detail;this.container.style.visibility=J?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:J,noView:J})},focus:O=>{setTimeout(()=>O.target.focus({preventScroll:!1}),0)},userName:O=>{O.target.title=O.detail.userName},readonly:O=>{O.target.disabled=O.detail.readonly},required:O=>{this._setRequired(O.target,O.detail.required)},bgColor:O=>{z("bgColor","backgroundColor",O)},fillColor:O=>{z("fillColor","backgroundColor",O)},fgColor:O=>{z("fgColor","color",O)},textColor:O=>{z("textColor","color",O)},borderColor:O=>{z("borderColor","borderColor",O)},strokeColor:O=>{z("strokeColor","borderColor",O)},rotation:O=>{const J=O.detail.rotation;this.setRotation(J),this.annotationStorage.setValue(this.data.id,{rotation:J})}})}_dispatchEventFromSandbox(z,O){const J=this._commonActions;for(const ht of Object.keys(O.detail)){const mt=z[ht]||J[ht];mt==null||mt(O)}}_setDefaultPropertiesFromJS(z){if(!this.enableScripting)return;const O=this.annotationStorage.getRawValue(this.data.id);if(!O)return;const J=this._commonActions;for(const[ht,mt]of Object.entries(O)){const Et=J[ht];if(Et){const Pt={detail:{[ht]:mt},target:z};Et(Pt),delete O[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:z}=this.data;if(!z)return;const[O,J,ht,mt]=this.data.rect;if(z.length===1){const[,{x:Vt,y:Yt},{x:Jt,y:te}]=z[0];if(ht===Vt&&mt===Yt&&O===Jt&&J===te)return}const{style:Et}=this.container;let Pt;if(s(this,P)){const{borderColor:Vt,borderWidth:Yt}=Et;Et.borderWidth=0,Pt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Vt}" stroke-width="${Yt}">`],this.container.classList.add("hasBorder")}const jt=ht-O,It=mt-J,{svgFactory:Rt}=this,Ht=Rt.createElement("svg");Ht.classList.add("quadrilateralsContainer"),Ht.setAttribute("width",0),Ht.setAttribute("height",0);const Lt=Rt.createElement("defs");Ht.append(Lt);const $t=Rt.createElement("clipPath"),Ut=`clippath_${this.data.id}`;$t.setAttribute("id",Ut),$t.setAttribute("clipPathUnits","objectBoundingBox"),Lt.append($t);for(const[,{x:Vt,y:Yt},{x:Jt,y:te}]of z){const Zt=Rt.createElement("rect"),ne=(Jt-O)/jt,se=(mt-Yt)/It,re=(Vt-Jt)/jt,gn=(Yt-te)/It;Zt.setAttribute("x",ne),Zt.setAttribute("y",se),Zt.setAttribute("width",re),Zt.setAttribute("height",gn),$t.append(Zt),Pt==null||Pt.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${se}" width="${re}" height="${gn}"/>`)}s(this,P)&&(Pt.push("</g></svg>')"),Et.backgroundImage=Pt.join("")),this.container.append(Ht),this.container.style.clipPath=`url(#${Ut})`}_createPopup(){const{container:z,data:O}=this;z.setAttribute("aria-haspopup","dialog");const J=new u({data:{color:O.color,titleObj:O.titleObj,modificationDate:O.modificationDate,contentsObj:O.contentsObj,richText:O.richText,parentRect:O.rect,borderStyle:0,id:`popup_${O.id}`,rotation:O.rotation},parent:this.parent,elements:[this]});this.parent.div.append(J.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(z,O=null){const J=[];if(this._fieldObjects){const ht=this._fieldObjects[z];if(ht)for(const{page:mt,id:Et,exportValues:Pt}of ht){if(mt===-1||Et===O)continue;const jt=typeof Pt=="string"?Pt:null,It=document.querySelector(`[data-element-id="${Et}"]`);if(It&&!k.has(It)){(0,n.warn)(`_getElementsByName - element not allowed: ${Et}`);continue}J.push({id:Et,exportValue:jt,domElement:It})}return J}for(const ht of document.getElementsByName(z)){const{exportValue:mt}=ht,Et=ht.getAttribute("data-element-id");Et!==O&&k.has(ht)&&J.push({id:Et,exportValue:mt,domElement:ht})}return J}show(){var z;this.container&&(this.container.hidden=!1),(z=this.popup)==null||z.maybeShow()}hide(){var z;this.container&&(this.container.hidden=!0),(z=this.popup)==null||z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const z=this.getElementsToTriggerPopup();if(Array.isArray(z))for(const O of z)O.classList.add("highlightArea");else z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:z,data:{id:O}}=this;this.container.addEventListener("dblclick",()=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("switchannotationeditormode",{source:this,mode:z,editId:O})})}};P=new WeakMap;let g=$;class w extends g{constructor(O,J=null){super(O,{isRenderable:!0,ignoreBorder:!!(J!=null&&J.ignoreBorder),createQuadrilaterals:!0});ct(this,B);this.isTooltipOnly=O.data.isTooltipOnly}render(){const{data:O,linkService:J}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",O.id);let mt=!1;return O.url?(J.addLinkAttributes(ht,O.url,O.newWindow),mt=!0):O.action?(this._bindNamedAction(ht,O.action),mt=!0):O.attachment?(this._bindAttachment(ht,O.attachment),mt=!0):O.setOCGState?(nt(this,B,Mn).call(this,ht,O.setOCGState),mt=!0):O.dest?(this._bindLink(ht,O.dest),mt=!0):(O.actions&&(O.actions.Action||O.actions["Mouse Up"]||O.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,O),mt=!0),O.resetForm?(this._bindResetFormAction(ht,O.resetForm),mt=!0):this.isTooltipOnly&&!mt&&(this._bindLink(ht,""),mt=!0)),this.container.classList.add("linkAnnotation"),mt&&this.container.append(ht),this.container}_bindLink(O,J){O.href=this.linkService.getDestinationHash(J),O.onclick=()=>(J&&this.linkService.goToDestination(J),!1),(J||J==="")&&nt(this,B,ae).call(this)}_bindNamedAction(O,J){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>(this.linkService.executeNamedAction(J),!1),nt(this,B,ae).call(this)}_bindAttachment(O,J){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,J.content,J.filename),!1},nt(this,B,ae).call(this)}_bindJSAction(O,J){O.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const mt of Object.keys(J.actions)){const Et=ht.get(mt);Et&&(O[Et]=()=>{var Pt;return(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J.id,name:mt}}),!1})}O.onclick||(O.onclick=()=>!1),nt(this,B,ae).call(this)}_bindResetFormAction(O,J){const ht=O.onclick;if(ht||(O.href=this.linkService.getAnchorUrl("")),nt(this,B,ae).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(O.onclick=()=>!1);return}O.onclick=()=>{var Ht;ht==null||ht();const{fields:mt,refs:Et,include:Pt}=J,jt=[];if(mt.length!==0||Et.length!==0){const Lt=new Set(Et);for(const $t of mt){const Ut=this._fieldObjects[$t]||[];for(const{id:Vt}of Ut)Lt.add(Vt)}for(const $t of Object.values(this._fieldObjects))for(const Ut of $t)Lt.has(Ut.id)===Pt&&jt.push(Ut)}else for(const Lt of Object.values(this._fieldObjects))jt.push(...Lt);const It=this.annotationStorage,Rt=[];for(const Lt of jt){const{id:$t}=Lt;switch(Rt.push($t),Lt.type){case"text":{const Vt=Lt.defaultValue||"";It.setValue($t,{value:Vt});break}case"checkbox":case"radiobutton":{const Vt=Lt.defaultValue===Lt.exportValues;It.setValue($t,{value:Vt});break}case"combobox":case"listbox":{const Vt=Lt.defaultValue||"";It.setValue($t,{value:Vt});break}default:continue}const Ut=document.querySelector(`[data-element-id="${$t}"]`);if(Ut){if(!k.has(Ut)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${$t}`);continue}}else continue;Ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}B=new WeakSet,ae=function(){this.container.setAttribute("data-internal-link","")},Mn=function(O,J){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>(this.linkService.executeSetOCGState(J),!1),nt(this,B,ae).call(this)};class y extends g{constructor(z){super(z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const z=document.createElement("img");return z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",z.alt="[{{type}} Annotation]",z.dataset.l10nId="text_annotation_type",z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(z),this.container}}class h extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(z){var O;this.data.hasOwnCanvas&&(((O=z.previousSibling)==null?void 0:O.nodeName)==="CANVAS"&&(z.previousSibling.hidden=!0),z.hidden=!1)}_getKeyModifier(z){const{isWin:O,isMac:J}=n.FeatureTest.platform;return O&&z.ctrlKey||J&&z.metaKey}_setEventListener(z,O,J,ht,mt){J.includes("mouse")?z.addEventListener(J,Et=>{var Pt;(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:mt(Et),shift:Et.shiftKey,modifier:this._getKeyModifier(Et)}})}):z.addEventListener(J,Et=>{var Pt;if(J==="blur"){if(!O.focused||!Et.relatedTarget)return;O.focused=!1}else if(J==="focus"){if(O.focused)return;O.focused=!0}mt&&((Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:mt(Et)}}))})}_setEventListeners(z,O,J,ht){var mt,Et,Pt;for(const[jt,It]of J)(It==="Action"||(mt=this.data.actions)!=null&&mt[It])&&((It==="Focus"||It==="Blur")&&(O||(O={focused:!1})),this._setEventListener(z,O,jt,It,ht),It==="Focus"&&!((Et=this.data.actions)!=null&&Et.Blur)?this._setEventListener(z,O,"blur","Blur",null):It==="Blur"&&!((Pt=this.data.actions)!=null&&Pt.Focus)&&this._setEventListener(z,O,"focus","Focus",null))}_setBackgroundColor(z){const O=this.data.backgroundColor||null;z.style.backgroundColor=O===null?"transparent":n.Util.makeHexColor(O[0],O[1],O[2])}_setTextStyle(z){const O=["left","center","right"],{fontColor:J}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||p,mt=z.style;let Et;const Pt=2,jt=It=>Math.round(10*It)/10;if(this.data.multiLine){const It=Math.abs(this.data.rect[3]-this.data.rect[1]-Pt),Rt=Math.round(It/(n.LINE_FACTOR*ht))||1,Ht=It/Rt;Et=Math.min(ht,jt(Ht/n.LINE_FACTOR))}else{const It=Math.abs(this.data.rect[3]-this.data.rect[1]-Pt);Et=Math.min(ht,jt(It/n.LINE_FACTOR))}mt.fontSize=`calc(${Et}px * var(--scale-factor))`,mt.color=n.Util.makeHexColor(J[0],J[1],J[2]),this.data.textAlignment!==null&&(mt.textAlign=O[this.data.textAlignment])}_setRequired(z,O){O?z.setAttribute("required",!0):z.removeAttribute("required"),z.setAttribute("aria-required",O)}}class x extends h{constructor(z){const O=z.renderForms||!z.data.hasAppearance&&!!z.data.fieldValue;super(z,{isRenderable:O})}setPropertyOnSiblings(z,O,J,ht){const mt=this.annotationStorage;for(const Et of this._getElementsByName(z.name,z.id))Et.domElement&&(Et.domElement[O]=J),mt.setValue(Et.id,{[ht]:J})}render(){var ht,mt;const z=this.annotationStorage,O=this.data.id;this.container.classList.add("textWidgetAnnotation");let J=null;if(this.renderForms){const Et=z.getValue(O,{value:this.data.fieldValue});let Pt=Et.value||"";const jt=z.getValue(O,{charLimit:this.data.maxLen}).charLimit;jt&&Pt.length>jt&&(Pt=Pt.slice(0,jt));let It=Et.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join(`
`))||null;It&&this.data.comb&&(It=It.replaceAll(/\s+/g,""));const Rt={userValue:Pt,formattedValue:It,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(J=document.createElement("textarea"),J.textContent=It??Pt,this.data.doNotScroll&&(J.style.overflowY="hidden")):(J=document.createElement("input"),J.type="text",J.setAttribute("value",It??Pt),this.data.doNotScroll&&(J.style.overflowX="hidden")),this.data.hasOwnCanvas&&(J.hidden=!0),k.add(J),J.setAttribute("data-element-id",O),J.disabled=this.data.readOnly,J.name=this.data.fieldName,J.tabIndex=b,this._setRequired(J,this.data.required),jt&&(J.maxLength=jt),J.addEventListener("input",Lt=>{z.setValue(O,{value:Lt.target.value}),this.setPropertyOnSiblings(J,"value",Lt.target.value,"value"),Rt.formattedValue=null}),J.addEventListener("resetform",Lt=>{const $t=this.data.defaultFieldValue??"";J.value=Rt.userValue=$t,Rt.formattedValue=null});let Ht=Lt=>{const{formattedValue:$t}=Rt;$t!=null&&(Lt.target.value=$t),Lt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){J.addEventListener("focus",$t=>{if(Rt.focused)return;const{target:Ut}=$t;Rt.userValue&&(Ut.value=Rt.userValue),Rt.lastCommittedValue=Ut.value,Rt.commitKey=1,Rt.focused=!0}),J.addEventListener("updatefromsandbox",$t=>{this.showElementAndHideCanvas($t.target);const Ut={value(Vt){Rt.userValue=Vt.detail.value??"",z.setValue(O,{value:Rt.userValue.toString()}),Vt.target.value=Rt.userValue},formattedValue(Vt){const{formattedValue:Yt}=Vt.detail;Rt.formattedValue=Yt,Yt!=null&&Vt.target!==document.activeElement&&(Vt.target.value=Yt),z.setValue(O,{formattedValue:Yt})},selRange(Vt){Vt.target.setSelectionRange(...Vt.detail.selRange)},charLimit:Vt=>{var Zt;const{charLimit:Yt}=Vt.detail,{target:Jt}=Vt;if(Yt===0){Jt.removeAttribute("maxLength");return}Jt.setAttribute("maxLength",Yt);let te=Rt.userValue;!te||te.length<=Yt||(te=te.slice(0,Yt),Jt.value=Rt.userValue=te,z.setValue(O,{value:te}),(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:te,willCommit:!0,commitKey:1,selStart:Jt.selectionStart,selEnd:Jt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,$t)}),J.addEventListener("keydown",$t=>{var Yt;Rt.commitKey=1;let Ut=-1;if($t.key==="Escape"?Ut=0:$t.key==="Enter"&&!this.data.multiLine?Ut=2:$t.key==="Tab"&&(Rt.commitKey=3),Ut===-1)return;const{value:Vt}=$t.target;Rt.lastCommittedValue!==Vt&&(Rt.lastCommittedValue=Vt,Rt.userValue=Vt,(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Vt,willCommit:!0,commitKey:Ut,selStart:$t.target.selectionStart,selEnd:$t.target.selectionEnd}}))});const Lt=Ht;Ht=null,J.addEventListener("blur",$t=>{var Vt;if(!Rt.focused||!$t.relatedTarget)return;Rt.focused=!1;const{value:Ut}=$t.target;Rt.userValue=Ut,Rt.lastCommittedValue!==Ut&&((Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Ut,willCommit:!0,commitKey:Rt.commitKey,selStart:$t.target.selectionStart,selEnd:$t.target.selectionEnd}})),Lt($t)}),(mt=this.data.actions)!=null&&mt.Keystroke&&J.addEventListener("beforeinput",$t=>{var se;Rt.lastCommittedValue=null;const{data:Ut,target:Vt}=$t,{value:Yt,selectionStart:Jt,selectionEnd:te}=Vt;let Zt=Jt,ne=te;switch($t.inputType){case"deleteWordBackward":{const re=Yt.substring(0,Jt).match(/\w*[^\w]*$/);re&&(Zt-=re[0].length);break}case"deleteWordForward":{const re=Yt.substring(Jt).match(/^[^\w]*\w*/);re&&(ne+=re[0].length);break}case"deleteContentBackward":Jt===te&&(Zt-=1);break;case"deleteContentForward":Jt===te&&(ne+=1);break}$t.preventDefault(),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Yt,change:Ut||"",willCommit:!1,selStart:Zt,selEnd:ne}})}),this._setEventListeners(J,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$t=>$t.target.value)}if(Ht&&J.addEventListener("blur",Ht),this.data.comb){const $t=(this.data.rect[2]-this.data.rect[0])/jt;J.classList.add("comb"),J.style.letterSpacing=`calc(${$t}px * var(--scale-factor) - 1ch)`}}else J=document.createElement("div"),J.textContent=this.data.fieldValue,J.style.verticalAlign="middle",J.style.display="table-cell";return this._setTextStyle(J),this._setBackgroundColor(J),this._setDefaultPropertiesFromJS(J),this.container.append(J),this.container}}class F extends h{constructor(z){super(z,{isRenderable:!!z.data.hasOwnCanvas})}}class E extends h{constructor(z){super(z,{isRenderable:z.renderForms})}render(){const z=this.annotationStorage,O=this.data,J=O.id;let ht=z.getValue(J,{value:O.exportValue===O.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",z.setValue(J,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const mt=document.createElement("input");return k.add(mt),mt.setAttribute("data-element-id",J),mt.disabled=O.readOnly,this._setRequired(mt,this.data.required),mt.type="checkbox",mt.name=O.fieldName,ht&&mt.setAttribute("checked",!0),mt.setAttribute("exportValue",O.exportValue),mt.tabIndex=b,mt.addEventListener("change",Et=>{const{name:Pt,checked:jt}=Et.target;for(const It of this._getElementsByName(Pt,J)){const Rt=jt&&It.exportValue===O.exportValue;It.domElement&&(It.domElement.checked=Rt),z.setValue(It.id,{value:Rt})}z.setValue(J,{value:jt})}),mt.addEventListener("resetform",Et=>{const Pt=O.defaultFieldValue||"Off";Et.target.checked=Pt===O.exportValue}),this.enableScripting&&this.hasJSActions&&(mt.addEventListener("updatefromsandbox",Et=>{const Pt={value(jt){jt.target.checked=jt.detail.value!=="Off",z.setValue(J,{value:jt.target.checked})}};this._dispatchEventFromSandbox(Pt,Et)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)),this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class o extends h{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const z=this.annotationStorage,O=this.data,J=O.id;let ht=z.getValue(J,{value:O.fieldValue===O.buttonValue}).value;typeof ht=="string"&&(ht=ht!==O.buttonValue,z.setValue(J,{value:ht}));const mt=document.createElement("input");if(k.add(mt),mt.setAttribute("data-element-id",J),mt.disabled=O.readOnly,this._setRequired(mt,this.data.required),mt.type="radio",mt.name=O.fieldName,ht&&mt.setAttribute("checked",!0),mt.tabIndex=b,mt.addEventListener("change",Et=>{const{name:Pt,checked:jt}=Et.target;for(const It of this._getElementsByName(Pt,J))z.setValue(It.id,{value:!1});z.setValue(J,{value:jt})}),mt.addEventListener("resetform",Et=>{const Pt=O.defaultFieldValue;Et.target.checked=Pt!=null&&Pt===O.buttonValue}),this.enableScripting&&this.hasJSActions){const Et=O.buttonValue;mt.addEventListener("updatefromsandbox",Pt=>{const jt={value:It=>{const Rt=Et===It.detail.value;for(const Ht of this._getElementsByName(It.target.name)){const Lt=Rt&&Ht.id===J;Ht.domElement&&(Ht.domElement.checked=Lt),z.setValue(Ht.id,{value:Lt})}}};this._dispatchEventFromSandbox(jt,Pt)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pt=>Pt.target.checked)}return this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class f extends w{constructor(z){super(z,{ignoreBorder:z.data.hasAppearance})}render(){const z=super.render();z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(z.title=this.data.alternativeText);const O=z.lastChild;return this.enableScripting&&this.hasJSActions&&O&&(this._setDefaultPropertiesFromJS(O),O.addEventListener("updatefromsandbox",J=>{this._dispatchEventFromSandbox({},J)})),z}}class a extends h{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const z=this.annotationStorage,O=this.data.id,J=z.getValue(O,{value:this.data.fieldValue}),ht=document.createElement("select");k.add(ht),ht.setAttribute("data-element-id",O),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=b;let mt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Rt=>{const Ht=this.data.defaultFieldValue;for(const Lt of ht.options)Lt.selected=Lt.value===Ht});for(const Rt of this.data.options){const Ht=document.createElement("option");Ht.textContent=Rt.displayValue,Ht.value=Rt.exportValue,J.value.includes(Rt.exportValue)&&(Ht.setAttribute("selected",!0),mt=!1),ht.append(Ht)}let Et=null;if(mt){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),ht.prepend(Rt),Et=()=>{Rt.remove(),ht.removeEventListener("input",Et),Et=null},ht.addEventListener("input",Et)}const Pt=Rt=>{const Ht=Rt?"value":"textContent",{options:Lt,multiple:$t}=ht;return $t?Array.prototype.filter.call(Lt,Ut=>Ut.selected).map(Ut=>Ut[Ht]):Lt.selectedIndex===-1?null:Lt[Lt.selectedIndex][Ht]};let jt=Pt(!1);const It=Rt=>{const Ht=Rt.target.options;return Array.prototype.map.call(Ht,Lt=>({displayValue:Lt.textContent,exportValue:Lt.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Rt=>{const Ht={value(Lt){Et==null||Et();const $t=Lt.detail.value,Ut=new Set(Array.isArray($t)?$t:[$t]);for(const Vt of ht.options)Vt.selected=Ut.has(Vt.value);z.setValue(O,{value:Pt(!0)}),jt=Pt(!1)},multipleSelection(Lt){ht.multiple=!0},remove(Lt){const $t=ht.options,Ut=Lt.detail.remove;$t[Ut].selected=!1,ht.remove(Ut),$t.length>0&&Array.prototype.findIndex.call($t,Yt=>Yt.selected)===-1&&($t[0].selected=!0),z.setValue(O,{value:Pt(!0),items:It(Lt)}),jt=Pt(!1)},clear(Lt){for(;ht.length!==0;)ht.remove(0);z.setValue(O,{value:null,items:[]}),jt=Pt(!1)},insert(Lt){const{index:$t,displayValue:Ut,exportValue:Vt}=Lt.detail.insert,Yt=ht.children[$t],Jt=document.createElement("option");Jt.textContent=Ut,Jt.value=Vt,Yt?Yt.before(Jt):ht.append(Jt),z.setValue(O,{value:Pt(!0),items:It(Lt)}),jt=Pt(!1)},items(Lt){const{items:$t}=Lt.detail;for(;ht.length!==0;)ht.remove(0);for(const Ut of $t){const{displayValue:Vt,exportValue:Yt}=Ut,Jt=document.createElement("option");Jt.textContent=Vt,Jt.value=Yt,ht.append(Jt)}ht.options.length>0&&(ht.options[0].selected=!0),z.setValue(O,{value:Pt(!0),items:It(Lt)}),jt=Pt(!1)},indices(Lt){const $t=new Set(Lt.detail.indices);for(const Ut of Lt.target.options)Ut.selected=$t.has(Ut.index);z.setValue(O,{value:Pt(!0)}),jt=Pt(!1)},editable(Lt){Lt.target.disabled=!Lt.detail.editable}};this._dispatchEventFromSandbox(Ht,Rt)}),ht.addEventListener("input",Rt=>{var Lt;const Ht=Pt(!0);z.setValue(O,{value:Ht}),Rt.preventDefault(),(Lt=this.linkService.eventBus)==null||Lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:jt,changeEx:Ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):ht.addEventListener("input",function(Rt){z.setValue(O,{value:Pt(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class u extends g{constructor(z){const{data:O,elements:J}=z;super(z,{isRenderable:g._hasPopupData(O)}),this.elements=J}render(){this.container.classList.add("popupAnnotation");const z=new m({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),O=[];for(const J of this.elements)J.popup=z,O.push(J.data.id),J.addHighlightArea();return this.container.setAttribute("aria-controls",O.map(J=>`${n.AnnotationPrefix}${J}`).join(",")),this.container}}class m{constructor({container:z,color:O,elements:J,titleObj:ht,modificationDate:mt,contentsObj:Et,richText:Pt,parent:jt,rect:It,parentRect:Rt,open:Ht}){ct(this,Ct);ct(this,at,null);ct(this,pt,nt(this,Ct,In).bind(this));ct(this,ft,nt(this,Ct,rn).bind(this));ct(this,bt,nt(this,Ct,sn).bind(this));ct(this,vt,nt(this,Ct,Pe).bind(this));ct(this,yt,null);ct(this,et,null);ct(this,tt,null);ct(this,R,null);ct(this,U,null);ct(this,Z,null);ct(this,ot,!1);ct(this,gt,null);ct(this,St,null);ct(this,rt,null);ct(this,q,null);ct(this,wt,!1);var $t;ut(this,et,z),ut(this,q,ht),ut(this,tt,Et),ut(this,rt,Pt),ut(this,U,jt),ut(this,yt,O),ut(this,St,It),ut(this,Z,Rt),ut(this,R,J);const Lt=r.PDFDateString.toDateObject(mt);Lt&&ut(this,at,jt.l10n.get("annotation_date_string",{date:Lt.toLocaleDateString(),time:Lt.toLocaleTimeString()})),this.trigger=J.flatMap(Ut=>Ut.getElementsToTriggerPopup());for(const Ut of this.trigger)Ut.addEventListener("click",s(this,vt)),Ut.addEventListener("mouseenter",s(this,bt)),Ut.addEventListener("mouseleave",s(this,ft)),Ut.classList.add("popupTriggerArea");for(const Ut of J)($t=Ut.container)==null||$t.addEventListener("keydown",s(this,pt));s(this,et).hidden=!0,Ht&&nt(this,Ct,Pe).call(this)}render(){if(s(this,gt))return;const{page:{view:z},viewport:{rawDims:{pageWidth:O,pageHeight:J,pageX:ht,pageY:mt}}}=s(this,U),Et=ut(this,gt,document.createElement("div"));if(Et.className="popup",s(this,yt)){const Zt=Et.style.outlineColor=n.Util.makeHexColor(...s(this,yt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Et.style.backgroundColor=`color-mix(in srgb, ${Zt} 30%, white)`:Et.style.backgroundColor=n.Util.makeHexColor(...s(this,yt).map(se=>Math.floor(.7*(255-se)+se)))}const Pt=document.createElement("span");Pt.className="header";const jt=document.createElement("h1");if(Pt.append(jt),{dir:jt.dir,str:jt.textContent}=s(this,q),Et.append(Pt),s(this,at)){const Zt=document.createElement("span");Zt.classList.add("popupDate"),s(this,at).then(ne=>{Zt.textContent=ne}),Pt.append(Zt)}const It=s(this,tt),Rt=s(this,rt);if(Rt!=null&&Rt.str&&(!(It!=null&&It.str)||It.str===Rt.str))v.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:Et}),Et.lastChild.classList.add("richText","popupContent");else{const Zt=this._formatContents(It);Et.append(Zt)}let Ht=!!s(this,Z),Lt=Ht?s(this,Z):s(this,St);for(const Zt of s(this,R))if(!Lt||n.Util.intersect(Zt.data.rect,Lt)!==null){Lt=Zt.data.rect,Ht=!0;break}const $t=n.Util.normalizeRect([Lt[0],z[3]-Lt[1]+z[1],Lt[2],z[3]-Lt[3]+z[1]]),Vt=Ht?Lt[2]-Lt[0]+5:0,Yt=$t[0]+Vt,Jt=$t[1],{style:te}=s(this,et);te.left=`${100*(Yt-ht)/O}%`,te.top=`${100*(Jt-mt)/J}%`,s(this,et).append(Et)}_formatContents({str:z,dir:O}){const J=document.createElement("p");J.classList.add("popupContent"),J.dir=O;const ht=z.split(/(?:\r\n?|\n)/);for(let mt=0,Et=ht.length;mt<Et;++mt){const Pt=ht[mt];J.append(document.createTextNode(Pt)),mt<Et-1&&J.append(document.createElement("br"))}return J}forceHide(){ut(this,wt,this.isVisible),s(this,wt)&&(s(this,et).hidden=!0)}maybeShow(){s(this,wt)&&(ut(this,wt,!1),s(this,et).hidden=!1)}get isVisible(){return s(this,et).hidden===!1}}at=new WeakMap,pt=new WeakMap,ft=new WeakMap,bt=new WeakMap,vt=new WeakMap,yt=new WeakMap,et=new WeakMap,tt=new WeakMap,R=new WeakMap,U=new WeakMap,Z=new WeakMap,ot=new WeakMap,gt=new WeakMap,St=new WeakMap,rt=new WeakMap,q=new WeakMap,wt=new WeakMap,Ct=new WeakSet,In=function(z){z.altKey||z.shiftKey||z.ctrlKey||z.metaKey||(z.key==="Enter"||z.key==="Escape"&&s(this,ot))&&nt(this,Ct,Pe).call(this)},Pe=function(){ut(this,ot,!s(this,ot)),s(this,ot)?(nt(this,Ct,sn).call(this),s(this,et).addEventListener("click",s(this,vt)),s(this,et).addEventListener("keydown",s(this,pt))):(nt(this,Ct,rn).call(this),s(this,et).removeEventListener("click",s(this,vt)),s(this,et).removeEventListener("keydown",s(this,pt)))},sn=function(){s(this,gt)||this.render(),this.isVisible?s(this,ot)&&s(this,et).classList.add("focused"):(s(this,et).hidden=!1,s(this,et).style.zIndex=parseInt(s(this,et).style.zIndex)+1e3)},rn=function(){s(this,et).classList.remove("focused"),!(s(this,ot)||!this.isVisible)&&(s(this,et).hidden=!0,s(this,et).style.zIndex=parseInt(s(this,et).style.zIndex)-1e3)};class j extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=z.data.textContent,this.textPosition=z.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const z=document.createElement("div");z.classList.add("annotationTextContent"),z.setAttribute("role","comment");for(const O of this.textContent){const J=document.createElement("span");J.textContent=O,z.append(J)}this.container.append(z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=j;class d extends g{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0});ct(this,Mt,null)}render(){this.container.classList.add("lineAnnotation");const O=this.data,{width:J,height:ht}=I(O.rect),mt=this.svgFactory.create(J,ht,!0),Et=ut(this,Mt,this.svgFactory.createElement("svg:line"));return Et.setAttribute("x1",O.rect[2]-O.lineCoordinates[0]),Et.setAttribute("y1",O.rect[3]-O.lineCoordinates[1]),Et.setAttribute("x2",O.rect[2]-O.lineCoordinates[2]),Et.setAttribute("y2",O.rect[3]-O.lineCoordinates[3]),Et.setAttribute("stroke-width",O.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!O.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Mt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mt=new WeakMap;class T extends g{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0});ct(this,Gt,null)}render(){this.container.classList.add("squareAnnotation");const O=this.data,{width:J,height:ht}=I(O.rect),mt=this.svgFactory.create(J,ht,!0),Et=O.borderStyle.width,Pt=ut(this,Gt,this.svgFactory.createElement("svg:rect"));return Pt.setAttribute("x",Et/2),Pt.setAttribute("y",Et/2),Pt.setAttribute("width",J-Et),Pt.setAttribute("height",ht-Et),Pt.setAttribute("stroke-width",Et||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),mt.append(Pt),this.container.append(mt),!O.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gt=new WeakMap;class L extends g{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0});ct(this,qt,null)}render(){this.container.classList.add("circleAnnotation");const O=this.data,{width:J,height:ht}=I(O.rect),mt=this.svgFactory.create(J,ht,!0),Et=O.borderStyle.width,Pt=ut(this,qt,this.svgFactory.createElement("svg:ellipse"));return Pt.setAttribute("cx",J/2),Pt.setAttribute("cy",ht/2),Pt.setAttribute("rx",J/2-Et/2),Pt.setAttribute("ry",ht/2-Et/2),Pt.setAttribute("stroke-width",Et||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),mt.append(Pt),this.container.append(mt),!O.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,qt)}addHighlightArea(){this.container.classList.add("highlightArea")}}qt=new WeakMap;class K extends g{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0});ct(this,At,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const O=this.data,{width:J,height:ht}=I(O.rect),mt=this.svgFactory.create(J,ht,!0);let Et=[];for(const jt of O.vertices){const It=jt.x-O.rect[0],Rt=O.rect[3]-jt.y;Et.push(It+","+Rt)}Et=Et.join(" ");const Pt=ut(this,At,this.svgFactory.createElement(this.svgElementName));return Pt.setAttribute("points",Et),Pt.setAttribute("stroke-width",O.borderStyle.width||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),mt.append(Pt),this.container.append(mt),!O.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class G extends K{constructor(z){super(z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class V extends g{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0});ct(this,lt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const O=this.data,{width:J,height:ht}=I(O.rect),mt=this.svgFactory.create(J,ht,!0);for(const Et of O.inkLists){let Pt=[];for(const It of Et){const Rt=It.x-O.rect[0],Ht=O.rect[3]-It.y;Pt.push(`${Rt},${Ht}`)}Pt=Pt.join(" ");const jt=this.svgFactory.createElement(this.svgElementName);s(this,lt).push(jt),jt.setAttribute("points",Pt),jt.setAttribute("stroke-width",O.borderStyle.width||1),jt.setAttribute("stroke","transparent"),jt.setAttribute("fill","transparent"),!O.popupRef&&this.hasPopupData&&this._createPopup(),mt.append(jt)}return this.container.append(mt),this.container}getElementsToTriggerPopup(){return s(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap,e.InkAnnotationElement=V;class st extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class D extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class X extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class it extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class M extends g{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=M;class l extends g{constructor(O){var mt;super(O,{isRenderable:!0});ct(this,kt);ct(this,dt,null);const{filename:J,content:ht}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(J,!0),this.content=ht,(mt=this.linkService.eventBus)==null||mt.dispatch("fileattachmentannotation",{source:this,filename:J,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:O,data:J}=this;let ht;J.hasAppearance||J.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(J.name)?"paperclip":"pushpin"}.svg`,J.fillAlpha&&J.fillAlpha<1&&(ht.style=`filter: opacity(${Math.round(J.fillAlpha*100)}%);`)),ht.addEventListener("dblclick",nt(this,kt,an).bind(this)),ut(this,dt,ht);const{isMac:mt}=n.FeatureTest.platform;return O.addEventListener("keydown",Et=>{Et.key==="Enter"&&(mt?Et.metaKey:Et.ctrlKey)&&nt(this,kt,an).call(this)}),!J.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),O.append(ht),O}getElementsToTriggerPopup(){return s(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap,kt=new WeakSet,an=function(){var O;(O=this.downloadManager)==null||O.openOrDownloadData(this.container,this.content,this.filename)};class c{constructor({div:z,accessibilityManager:O,annotationCanvasMap:J,l10n:ht,page:mt,viewport:Et}){ct(this,Tt);ct(this,Kt,null);ct(this,H,null);ct(this,xt,new Map);this.div=z,ut(this,Kt,O),ut(this,H,J),this.l10n=ht,this.page=mt,this.viewport=Et,this.zIndex=0,this.l10n||(this.l10n=N.NullL10n)}async render(z){const{annotations:O}=z,J=this.div;(0,r.setLayerDimensions)(J,this.viewport);const ht=new Map,mt={data:null,layer:J,linkService:z.linkService,downloadManager:z.downloadManager,imageResourcesPath:z.imageResourcesPath||"",renderForms:z.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:z.annotationStorage||new S.AnnotationStorage,enableScripting:z.enableScripting===!0,hasJSActions:z.hasJSActions,fieldObjects:z.fieldObjects,parent:this,elements:null};for(const Et of O){if(Et.noHTML)continue;const Pt=Et.annotationType===n.AnnotationType.POPUP;if(Pt){const Rt=ht.get(Et.id);if(!Rt)continue;mt.elements=Rt}else{const{width:Rt,height:Ht}=I(Et.rect);if(Rt<=0||Ht<=0)continue}mt.data=Et;const jt=A.create(mt);if(!jt.isRenderable)continue;if(!Pt&&Et.popupRef){const Rt=ht.get(Et.popupRef);Rt?Rt.push(jt):ht.set(Et.popupRef,[jt])}jt.annotationEditorType>0&&s(this,xt).set(jt.data.id,jt);const It=jt.render();Et.hidden&&(It.style.visibility="hidden"),nt(this,Tt,Ln).call(this,It,Et.id)}nt(this,Tt,on).call(this),await this.l10n.translate(J)}update({viewport:z}){const O=this.div;this.viewport=z,(0,r.setLayerDimensions)(O,{rotation:z.rotation}),nt(this,Tt,on).call(this),O.hidden=!1}getEditableAnnotations(){return Array.from(s(this,xt).values())}getEditableAnnotation(z){return s(this,xt).get(z)}}Kt=new WeakMap,H=new WeakMap,xt=new WeakMap,Tt=new WeakSet,Ln=function(z,O){var ht;const J=z.firstChild||z;J.id=`${n.AnnotationPrefix}${O}`,this.div.append(z),(ht=s(this,Kt))==null||ht.moveElementInDOM(this.div,z,J,!1)},on=function(){if(!s(this,H))return;const z=this.div;for(const[O,J]of s(this,H)){const ht=z.querySelector(`[data-annotation-id="${O}"]`);if(!ht)continue;const{firstChild:mt}=ht;mt?mt.nodeName==="CANVAS"?mt.replaceWith(J):mt.before(J):ht.append(J)}s(this,H).clear()},e.AnnotationLayer=c},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function i(S){return Math.floor(Math.max(0,Math.min(1,S))*255).toString(16).padStart(2,"0")}function n(S){return Math.max(0,Math.min(255,255*S))}class r{static CMYK_G([C,N,v,b]){return["G",1-Math.min(1,.3*C+.59*v+.11*N+b)]}static G_CMYK([C]){return["CMYK",0,0,0,1-C]}static G_RGB([C]){return["RGB",C,C,C]}static G_rgb([C]){return C=n(C),[C,C,C]}static G_HTML([C]){const N=i(C);return`#${N}${N}${N}`}static RGB_G([C,N,v]){return["G",.3*C+.59*N+.11*v]}static RGB_rgb(C){return C.map(n)}static RGB_HTML(C){return`#${C.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([C,N,v,b]){return["RGB",1-Math.min(1,C+b),1-Math.min(1,v+b),1-Math.min(1,N+b)]}static CMYK_rgb([C,N,v,b]){return[n(1-Math.min(1,C+b)),n(1-Math.min(1,v+b)),n(1-Math.min(1,N+b))]}static CMYK_HTML(C){const N=this.CMYK_RGB(C).slice(1);return this.RGB_HTML(N)}static RGB_CMYK([C,N,v]){const b=1-C,p=1-N,k=1-v,I=Math.min(b,p,k);return["CMYK",b,p,k,I]}}e.ColorConverters=r},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function n(C,N){switch(C){case"find_match_count":C=`find_match_count[${N.total===1?"one":"other"}]`;break;case"find_match_count_limit":C=`find_match_count_limit[${N.limit===1?"one":"other"}]`;break}return i[C]||""}function r(C,N){return N?C.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(v,b)=>b in N?N[b]:"{{"+b+"}}"):C}const S={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(C,N=null,v=n(C,N)){return r(v,N)},async translate(C){}};e.NullL10n=S},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=i(25);class r{static setupStorage(C,N,v,b,p){const k=b.getValue(N,{value:null});switch(v.name){case"textarea":if(k.value!==null&&(C.textContent=k.value),p==="print")break;C.addEventListener("input",I=>{b.setValue(N,{value:I.target.value})});break;case"input":if(v.attributes.type==="radio"||v.attributes.type==="checkbox"){if(k.value===v.attributes.xfaOn?C.setAttribute("checked",!0):k.value===v.attributes.xfaOff&&C.removeAttribute("checked"),p==="print")break;C.addEventListener("change",I=>{b.setValue(N,{value:I.target.checked?I.target.getAttribute("xfaOn"):I.target.getAttribute("xfaOff")})})}else{if(k.value!==null&&C.setAttribute("value",k.value),p==="print")break;C.addEventListener("input",I=>{b.setValue(N,{value:I.target.value})})}break;case"select":if(k.value!==null){C.setAttribute("value",k.value);for(const I of v.children)I.attributes.value===k.value?I.attributes.selected=!0:I.attributes.hasOwnProperty("selected")&&delete I.attributes.selected}C.addEventListener("input",I=>{const A=I.target.options,g=A.selectedIndex===-1?"":A[A.selectedIndex].value;b.setValue(N,{value:g})});break}}static setAttributes({html:C,element:N,storage:v=null,intent:b,linkService:p}){const{attributes:k}=N,I=C instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${b}`);for(const[A,g]of Object.entries(k))if(g!=null)switch(A){case"class":g.length&&C.setAttribute(A,g.join(" "));break;case"dataId":break;case"id":C.setAttribute("data-element-id",g);break;case"style":Object.assign(C.style,g);break;case"textContent":C.textContent=g;break;default:(!I||A!=="href"&&A!=="newWindow")&&C.setAttribute(A,g)}I&&p.addLinkAttributes(C,k.href,k.newWindow),v&&k.dataId&&this.setupStorage(C,k.dataId,N,v)}static render(C){var w;const N=C.annotationStorage,v=C.linkService,b=C.xfaHtml,p=C.intent||"display",k=document.createElement(b.name);b.attributes&&this.setAttributes({html:k,element:b,intent:p,linkService:v});const I=[[b,-1,k]],A=C.div;if(A.append(k),C.viewport){const y=`matrix(${C.viewport.transform.join(",")})`;A.style.transform=y}p!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const g=[];for(;I.length>0;){const[y,h,x]=I.at(-1);if(h+1===y.children.length){I.pop();continue}const F=y.children[++I.at(-1)[1]];if(F===null)continue;const{name:E}=F;if(E==="#text"){const f=document.createTextNode(F.value);g.push(f),x.append(f);continue}const o=(w=F==null?void 0:F.attributes)!=null&&w.xmlns?document.createElementNS(F.attributes.xmlns,E):document.createElement(E);if(x.append(o),F.attributes&&this.setAttributes({html:o,element:F,storage:N,intent:p,linkService:v}),F.children&&F.children.length>0)I.push([F,-1,o]);else if(F.value){const f=document.createTextNode(F.value);n.XfaText.shouldBuildText(E)&&g.push(f),o.append(f)}}for(const y of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:g}}static update(C){const N=`matrix(${C.viewport.transform.join(",")})`;C.div.style.transform=N,C.div.hidden=!1}}e.XfaLayer=r},(t,e,i)=>{var b,p,k,I,A,g,w,y,h,x,F,E,o,f,a,On,jn,$n,Nn,ln,Bn,cn,zn,Un,Wn,Hn,Gn,ie,dn,Te,Re,de,un,ke,B,qn,pn,Vn,Xn,hn,De,ue;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=i(1),r=i(4),S=i(29),C=i(6),N=i(5);const yt=class yt extends r.AnnotationEditor{constructor(R){super({...R,name:"inkEditor"});ct(this,a);ct(this,b,0);ct(this,p,0);ct(this,k,this.canvasPointermove.bind(this));ct(this,I,this.canvasPointerleave.bind(this));ct(this,A,this.canvasPointerup.bind(this));ct(this,g,this.canvasPointerdown.bind(this));ct(this,w,new Path2D);ct(this,y,!1);ct(this,h,!1);ct(this,x,!1);ct(this,F,null);ct(this,E,0);ct(this,o,0);ct(this,f,null);this.color=R.color||null,this.thickness=R.thickness||null,this.opacity=R.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(R){r.AnnotationEditor.initialize(R,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(R,U){switch(R){case n.AnnotationEditorParamsType.INK_THICKNESS:yt._defaultThickness=U;break;case n.AnnotationEditorParamsType.INK_COLOR:yt._defaultColor=U;break;case n.AnnotationEditorParamsType.INK_OPACITY:yt._defaultOpacity=U/100;break}}updateParams(R,U){switch(R){case n.AnnotationEditorParamsType.INK_THICKNESS:nt(this,a,On).call(this,U);break;case n.AnnotationEditorParamsType.INK_COLOR:nt(this,a,jn).call(this,U);break;case n.AnnotationEditorParamsType.INK_OPACITY:nt(this,a,$n).call(this,U);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,yt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,yt._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(yt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||yt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||yt._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??yt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(nt(this,a,Te).call(this),nt(this,a,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),nt(this,a,de).call(this)),nt(this,a,ue).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,s(this,F).disconnect(),ut(this,F,null),super.remove())}setParent(R){!this.parent&&R?this._uiManager.removeShouldRescale(this):this.parent&&R===null&&this._uiManager.addShouldRescale(this),super.setParent(R)}onScaleChanging(){const[R,U]=this.parentDimensions,Z=this.width*R,ot=this.height*U;this.setDimensions(Z,ot)}enableEditMode(){s(this,y)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",s(this,g)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",s(this,g)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){s(this,y)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ut(this,y,!0),this.div.classList.add("disabled"),nt(this,a,ue).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(R){this._focusEventsAllowed&&(super.focusin(R),this.enableEditMode())}canvasPointerdown(R){R.button!==0||!this.isInEditMode()||s(this,y)||(this.setInForeground(),R.preventDefault(),R.type!=="mouse"&&this.div.focus(),nt(this,a,Bn).call(this,R.offsetX,R.offsetY))}canvasPointermove(R){R.preventDefault(),nt(this,a,cn).call(this,R.offsetX,R.offsetY)}canvasPointerup(R){R.preventDefault(),nt(this,a,dn).call(this,R)}canvasPointerleave(R){nt(this,a,dn).call(this,R)}get isResizable(){return!this.isEmpty()&&s(this,y)}render(){if(this.div)return this.div;let R,U;this.width&&(R=this.x,U=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(rt=>{var q;return(q=this.div)==null?void 0:q.setAttribute("aria-label",rt)});const[Z,ot,gt,St]=nt(this,a,Nn).call(this);if(this.setAt(Z,ot,0,0),this.setDims(gt,St),nt(this,a,Te).call(this),this.width){const[rt,q]=this.parentDimensions;this.setAspectRatio(this.width*rt,this.height*q),this.setAt(R*rt,U*q,this.width*rt,this.height*q),ut(this,x,!0),nt(this,a,de).call(this),this.setDims(this.width*rt,this.height*q),nt(this,a,ie).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return nt(this,a,Re).call(this),this.div}setDimensions(R,U){const Z=Math.round(R),ot=Math.round(U);if(s(this,E)===Z&&s(this,o)===ot)return;ut(this,E,Z),ut(this,o,ot),this.canvas.style.visibility="hidden";const[gt,St]=this.parentDimensions;this.width=R/gt,this.height=U/St,this.fixAndSetPosition(),s(this,y)&&nt(this,a,un).call(this,R,U),nt(this,a,de).call(this),nt(this,a,ie).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(R,U,Z){var Mt,Gt,qt;if(R instanceof S.InkAnnotationElement)return null;const ot=super.deserialize(R,U,Z);ot.thickness=R.thickness,ot.color=n.Util.makeHexColor(...R.color),ot.opacity=R.opacity;const[gt,St]=ot.pageDimensions,rt=ot.width*gt,q=ot.height*St,wt=ot.parentScale,Ct=R.thickness/2;ut(ot,y,!0),ut(ot,E,Math.round(rt)),ut(ot,o,Math.round(q));const{paths:Bt,rect:zt,rotation:Wt}=R;for(let{bezier:At}of Bt){At=nt(Mt=yt,B,Vn).call(Mt,At,zt,Wt);const lt=[];ot.paths.push(lt);let dt=wt*(At[0]-Ct),kt=wt*(At[1]-Ct);for(let Kt=2,H=At.length;Kt<H;Kt+=6){const xt=wt*(At[Kt]-Ct),Tt=wt*(At[Kt+1]-Ct),Ot=wt*(At[Kt+2]-Ct),Nt=wt*(At[Kt+3]-Ct),Ft=wt*(At[Kt+4]-Ct),z=wt*(At[Kt+5]-Ct);lt.push([[dt,kt],[xt,Tt],[Ot,Nt],[Ft,z]]),dt=Ft,kt=z}const Xt=nt(this,B,qn).call(this,lt);ot.bezierPath2D.push(Xt)}const Dt=nt(Gt=ot,a,hn).call(Gt);return ut(ot,p,Math.max(r.AnnotationEditor.MIN_SIZE,Dt[2]-Dt[0])),ut(ot,b,Math.max(r.AnnotationEditor.MIN_SIZE,Dt[3]-Dt[1])),nt(qt=ot,a,un).call(qt,rt,q),ot}serialize(){if(this.isEmpty())return null;const R=this.getRect(0,0),U=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:U,thickness:this.thickness,opacity:this.opacity,paths:nt(this,a,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,R),pageIndex:this.pageIndex,rect:R,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};b=new WeakMap,p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakMap,x=new WeakMap,F=new WeakMap,E=new WeakMap,o=new WeakMap,f=new WeakMap,a=new WeakSet,On=function(R){const U=this.thickness;this.addCommands({cmd:()=>{this.thickness=R,nt(this,a,ue).call(this)},undo:()=>{this.thickness=U,nt(this,a,ue).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},jn=function(R){const U=this.color;this.addCommands({cmd:()=>{this.color=R,nt(this,a,ie).call(this)},undo:()=>{this.color=U,nt(this,a,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$n=function(R){R/=100;const U=this.opacity;this.addCommands({cmd:()=>{this.opacity=R,nt(this,a,ie).call(this)},undo:()=>{this.opacity=U,nt(this,a,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(){const{parentRotation:R,parentDimensions:[U,Z]}=this;switch(R){case 90:return[0,Z,Z,U];case 180:return[U,Z,U,Z];case 270:return[U,0,Z,U];default:return[0,0,U,Z]}},ln=function(){const{ctx:R,color:U,opacity:Z,thickness:ot,parentScale:gt,scaleFactor:St}=this;R.lineWidth=ot*gt/St,R.lineCap="round",R.lineJoin="round",R.miterLimit=10,R.strokeStyle=`${U}${(0,N.opacityToHex)(Z)}`},Bn=function(R,U){this.canvas.addEventListener("contextmenu",C.noContextMenu),this.canvas.addEventListener("pointerleave",s(this,I)),this.canvas.addEventListener("pointermove",s(this,k)),this.canvas.addEventListener("pointerup",s(this,A)),this.canvas.removeEventListener("pointerdown",s(this,g)),this.isEditing=!0,s(this,x)||(ut(this,x,!0),nt(this,a,de).call(this),this.thickness||(this.thickness=yt._defaultThickness),this.color||(this.color=yt._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=yt._defaultOpacity)),this.currentPath.push([R,U]),ut(this,h,!1),nt(this,a,ln).call(this),ut(this,f,()=>{nt(this,a,Wn).call(this),s(this,f)&&window.requestAnimationFrame(s(this,f))}),window.requestAnimationFrame(s(this,f))},cn=function(R,U){const[Z,ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&R===Z&&U===ot)return;const gt=this.currentPath;let St=s(this,w);if(gt.push([R,U]),ut(this,h,!0),gt.length<=2){St.moveTo(...gt[0]),St.lineTo(R,U);return}gt.length===3&&(ut(this,w,St=new Path2D),St.moveTo(...gt[0])),nt(this,a,Hn).call(this,St,...gt.at(-3),...gt.at(-2),R,U)},zn=function(){if(this.currentPath.length===0)return;const R=this.currentPath.at(-1);s(this,w).lineTo(...R)},Un=function(R,U){ut(this,f,null),R=Math.min(Math.max(R,0),this.canvas.width),U=Math.min(Math.max(U,0),this.canvas.height),nt(this,a,cn).call(this,R,U),nt(this,a,zn).call(this);let Z;if(this.currentPath.length!==1)Z=nt(this,a,Gn).call(this);else{const q=[R,U];Z=[[q,q.slice(),q.slice(),q]]}const ot=s(this,w),gt=this.currentPath;this.currentPath=[],ut(this,w,new Path2D);const St=()=>{this.allRawPaths.push(gt),this.paths.push(Z),this.bezierPath2D.push(ot),this.rebuild()},rt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(nt(this,a,Te).call(this),nt(this,a,Re).call(this)),nt(this,a,ue).call(this))};this.addCommands({cmd:St,undo:rt,mustExec:!0})},Wn=function(){if(!s(this,h))return;ut(this,h,!1);const R=Math.ceil(this.thickness*this.parentScale),U=this.currentPath.slice(-3),Z=U.map(St=>St[0]),ot=U.map(St=>St[1]);Math.min(...Z)-R,Math.max(...Z)+R,Math.min(...ot)-R,Math.max(...ot)+R;const{ctx:gt}=this;gt.save(),gt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const St of this.bezierPath2D)gt.stroke(St);gt.stroke(s(this,w)),gt.restore()},Hn=function(R,U,Z,ot,gt,St,rt){const q=(U+ot)/2,wt=(Z+gt)/2,Ct=(ot+St)/2,Bt=(gt+rt)/2;R.bezierCurveTo(q+2*(ot-q)/3,wt+2*(gt-wt)/3,Ct+2*(ot-Ct)/3,Bt+2*(gt-Bt)/3,Ct,Bt)},Gn=function(){const R=this.currentPath;if(R.length<=2)return[[R[0],R[0],R.at(-1),R.at(-1)]];const U=[];let Z,[ot,gt]=R[0];for(Z=1;Z<R.length-2;Z++){const[zt,Wt]=R[Z],[Dt,Mt]=R[Z+1],Gt=(zt+Dt)/2,qt=(Wt+Mt)/2,At=[ot+2*(zt-ot)/3,gt+2*(Wt-gt)/3],lt=[Gt+2*(zt-Gt)/3,qt+2*(Wt-qt)/3];U.push([[ot,gt],At,lt,[Gt,qt]]),[ot,gt]=[Gt,qt]}const[St,rt]=R[Z],[q,wt]=R[Z+1],Ct=[ot+2*(St-ot)/3,gt+2*(rt-gt)/3],Bt=[q+2*(St-q)/3,wt+2*(rt-wt)/3];return U.push([[ot,gt],Ct,Bt,[q,wt]]),U},ie=function(){if(this.isEmpty()){nt(this,a,ke).call(this);return}nt(this,a,ln).call(this);const{canvas:R,ctx:U}=this;U.setTransform(1,0,0,1,0,0),U.clearRect(0,0,R.width,R.height),nt(this,a,ke).call(this);for(const Z of this.bezierPath2D)U.stroke(Z)},dn=function(R){this.canvas.removeEventListener("pointerleave",s(this,I)),this.canvas.removeEventListener("pointermove",s(this,k)),this.canvas.removeEventListener("pointerup",s(this,A)),this.canvas.addEventListener("pointerdown",s(this,g)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",C.noContextMenu)},10),nt(this,a,Un).call(this,R.offsetX,R.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Te=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(R=>{var U;return(U=this.canvas)==null?void 0:U.setAttribute("aria-label",R)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Re=function(){ut(this,F,new ResizeObserver(R=>{const U=R[0].contentRect;U.width&&U.height&&this.setDimensions(U.width,U.height)})),s(this,F).observe(this.div)},de=function(){if(!s(this,x))return;const[R,U]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*R),this.canvas.height=Math.ceil(this.height*U),nt(this,a,ke).call(this)},un=function(R,U){const Z=nt(this,a,De).call(this),ot=(R-Z)/s(this,p),gt=(U-Z)/s(this,b);this.scaleFactor=Math.min(ot,gt)},ke=function(){const R=nt(this,a,De).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+R,this.translationY*this.scaleFactor+R)},B=new WeakSet,qn=function(R){const U=new Path2D;for(let Z=0,ot=R.length;Z<ot;Z++){const[gt,St,rt,q]=R[Z];Z===0&&U.moveTo(...gt),U.bezierCurveTo(St[0],St[1],rt[0],rt[1],q[0],q[1])}return U},pn=function(R,U,Z){const[ot,gt,St,rt]=U;switch(Z){case 0:for(let q=0,wt=R.length;q<wt;q+=2)R[q]+=ot,R[q+1]=rt-R[q+1];break;case 90:for(let q=0,wt=R.length;q<wt;q+=2){const Ct=R[q];R[q]=R[q+1]+ot,R[q+1]=Ct+gt}break;case 180:for(let q=0,wt=R.length;q<wt;q+=2)R[q]=St-R[q],R[q+1]+=gt;break;case 270:for(let q=0,wt=R.length;q<wt;q+=2){const Ct=R[q];R[q]=St-R[q+1],R[q+1]=rt-Ct}break;default:throw new Error("Invalid rotation")}return R},Vn=function(R,U,Z){const[ot,gt,St,rt]=U;switch(Z){case 0:for(let q=0,wt=R.length;q<wt;q+=2)R[q]-=ot,R[q+1]=rt-R[q+1];break;case 90:for(let q=0,wt=R.length;q<wt;q+=2){const Ct=R[q];R[q]=R[q+1]-gt,R[q+1]=Ct-ot}break;case 180:for(let q=0,wt=R.length;q<wt;q+=2)R[q]=St-R[q],R[q+1]-=gt;break;case 270:for(let q=0,wt=R.length;q<wt;q+=2){const Ct=R[q];R[q]=rt-R[q+1],R[q+1]=St-Ct}break;default:throw new Error("Invalid rotation")}return R},Xn=function(R,U,Z,ot){var wt,Ct;const gt=[],St=this.thickness/2,rt=R*U+St,q=R*Z+St;for(const Bt of this.paths){const zt=[],Wt=[];for(let Dt=0,Mt=Bt.length;Dt<Mt;Dt++){const[Gt,qt,At,lt]=Bt[Dt],dt=R*Gt[0]+rt,kt=R*Gt[1]+q,Xt=R*qt[0]+rt,Kt=R*qt[1]+q,H=R*At[0]+rt,xt=R*At[1]+q,Tt=R*lt[0]+rt,Ot=R*lt[1]+q;Dt===0&&(zt.push(dt,kt),Wt.push(dt,kt)),zt.push(Xt,Kt,H,xt,Tt,Ot),Wt.push(Xt,Kt),Dt===Mt-1&&Wt.push(Tt,Ot)}gt.push({bezier:nt(wt=yt,B,pn).call(wt,zt,ot,this.rotation),points:nt(Ct=yt,B,pn).call(Ct,Wt,ot,this.rotation)})}return gt},hn=function(){let R=1/0,U=-1/0,Z=1/0,ot=-1/0;for(const gt of this.paths)for(const[St,rt,q,wt]of gt){const Ct=n.Util.bezierBoundingBox(...St,...rt,...q,...wt);R=Math.min(R,Ct[0]),Z=Math.min(Z,Ct[1]),U=Math.max(U,Ct[2]),ot=Math.max(ot,Ct[3])}return[R,Z,U,ot]},De=function(){return s(this,y)?Math.ceil(this.thickness*this.parentScale):0},ue=function(R=!1){if(this.isEmpty())return;if(!s(this,y)){nt(this,a,ie).call(this);return}const U=nt(this,a,hn).call(this),Z=nt(this,a,De).call(this);ut(this,p,Math.max(r.AnnotationEditor.MIN_SIZE,U[2]-U[0])),ut(this,b,Math.max(r.AnnotationEditor.MIN_SIZE,U[3]-U[1]));const ot=Math.ceil(Z+s(this,p)*this.scaleFactor),gt=Math.ceil(Z+s(this,b)*this.scaleFactor),[St,rt]=this.parentDimensions;this.width=ot/St,this.height=gt/rt,this.setAspectRatio(ot,gt);const q=this.translationX,wt=this.translationY;this.translationX=-U[0],this.translationY=-U[1],nt(this,a,de).call(this),nt(this,a,ie).call(this),ut(this,E,ot),ut(this,o,gt),this.setDims(ot,gt);const Ct=R?Z/this.scaleFactor/2:0;this.translate(q-this.translationX-Ct,wt-this.translationY-Ct)},ct(yt,B),Qt(yt,"_defaultColor",null),Qt(yt,"_defaultOpacity",1),Qt(yt,"_defaultThickness",1),Qt(yt,"_type","ink");let v=yt;e.InkEditor=v},(t,e,i)=>{var v,b,p,k,I,A,g,w,y,h,x,xe,be,Fe,fn,Kn,Yn,mn,Me,Jn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=i(1),r=i(4),S=i(6),C=i(29);const T=class T extends r.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});ct(this,x);ct(this,v,null);ct(this,b,null);ct(this,p,null);ct(this,k,null);ct(this,I,null);ct(this,A,null);ct(this,g,null);ct(this,w,null);ct(this,y,!1);ct(this,h,!1);ut(this,k,G.bitmapUrl),ut(this,I,G.bitmapFile)}static initialize(G){r.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",G.map(Y=>`image/${Y}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,Y){Y.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,Y;s(this,b)&&(ut(this,v,null),this._uiManager.imageManager.deleteId(s(this,b)),(G=s(this,A))==null||G.remove(),ut(this,A,null),(Y=s(this,g))==null||Y.disconnect(),ut(this,g,null)),super.remove()}rebuild(){if(!this.parent){s(this,b)&&nt(this,x,Fe).call(this);return}super.rebuild(),this.div!==null&&(s(this,b)&&nt(this,x,Fe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(s(this,p)||s(this,v)||s(this,k)||s(this,I))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,Y;if(this.width&&(G=this.x,Y=this.y),super.render(),this.div.hidden=!0,s(this,v)?nt(this,x,fn).call(this):nt(this,x,Fe).call(this),this.width){const[V,st]=this.parentDimensions;this.setAt(G*V,Y*st,this.width*V,this.height*st)}return this.div}static deserialize(G,Y,V){if(G instanceof C.StampAnnotationElement)return null;const st=super.deserialize(G,Y,V),{rect:D,bitmapUrl:X,bitmapId:it,isSvg:M,accessibilityData:l}=G;it&&V.imageManager.isValidId(it)?ut(st,b,it):ut(st,k,X),ut(st,y,M);const[c,P]=st.pageDimensions;return st.width=(D[2]-D[0])/c,st.height=(D[3]-D[1])/P,l&&(st.altTextData=l),st}serialize(G=!1,Y=null){if(this.isEmpty())return null;const V={annotationType:n.AnnotationEditorType.STAMP,bitmapId:s(this,b),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:s(this,y),structTreeParentId:this._structTreeParentId};if(G)return V.bitmapUrl=nt(this,x,Me).call(this,!0),V.accessibilityData=this.altTextData,V;const{decorative:st,altText:D}=this.altTextData;if(!st&&D&&(V.accessibilityData={type:"Figure",alt:D}),Y===null)return V;Y.stamps||(Y.stamps=new Map);const X=s(this,y)?(V.rect[2]-V.rect[0])*(V.rect[3]-V.rect[1]):null;if(!Y.stamps.has(s(this,b)))Y.stamps.set(s(this,b),{area:X,serialized:V}),V.bitmap=nt(this,x,Me).call(this,!1);else if(s(this,y)){const it=Y.stamps.get(s(this,b));X>it.area&&(it.area=X,it.serialized.bitmap.close(),it.serialized.bitmap=nt(this,x,Me).call(this,!1))}return V}};v=new WeakMap,b=new WeakMap,p=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,g=new WeakMap,w=new WeakMap,y=new WeakMap,h=new WeakMap,x=new WeakSet,xe=function(G,Y=!1){if(!G){this.remove();return}ut(this,v,G.bitmap),Y||(ut(this,b,G.id),ut(this,y,G.isSvg)),nt(this,x,fn).call(this)},be=function(){ut(this,p,null),this._uiManager.enableWaiting(!1),s(this,A)&&this.div.focus()},Fe=function(){if(s(this,b)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(s(this,b)).then(Y=>nt(this,x,xe).call(this,Y,!0)).finally(()=>nt(this,x,be).call(this));return}if(s(this,k)){const Y=s(this,k);ut(this,k,null),this._uiManager.enableWaiting(!0),ut(this,p,this._uiManager.imageManager.getFromUrl(Y).then(V=>nt(this,x,xe).call(this,V)).finally(()=>nt(this,x,be).call(this)));return}if(s(this,I)){const Y=s(this,I);ut(this,I,null),this._uiManager.enableWaiting(!0),ut(this,p,this._uiManager.imageManager.getFromFile(Y).then(V=>nt(this,x,xe).call(this,V)).finally(()=>nt(this,x,be).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=T.supportedTypesStr,ut(this,p,new Promise(Y=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const V=await this._uiManager.imageManager.getFromFile(G.files[0]);nt(this,x,xe).call(this,V)}Y()}),G.addEventListener("cancel",()=>{this.remove(),Y()})}).finally(()=>nt(this,x,be).call(this))),G.click()},fn=function(){const{div:G}=this;let{width:Y,height:V}=s(this,v);const[st,D]=this.pageDimensions,X=.75;if(this.width)Y=this.width*st,V=this.height*D;else if(Y>X*st||V>X*D){const c=Math.min(X*st/Y,X*D/V);Y*=c,V*=c}const[it,M]=this.parentDimensions;this.setDims(Y*it/st,V*M/D),this._uiManager.enableWaiting(!1);const l=ut(this,A,document.createElement("canvas"));G.append(l),G.hidden=!1,nt(this,x,mn).call(this,Y,V),nt(this,x,Jn).call(this),s(this,h)||(this.parent.addUndoableEditor(this),ut(this,h,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Kn=function(G,Y){var X;const[V,st]=this.parentDimensions;this.width=G/V,this.height=Y/st,this.setDims(G,Y),(X=this._initialOptions)!=null&&X.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,s(this,w)!==null&&clearTimeout(s(this,w)),ut(this,w,setTimeout(()=>{ut(this,w,null),nt(this,x,mn).call(this,G,Y)},200))},Yn=function(G,Y){const{width:V,height:st}=s(this,v);let D=V,X=st,it=s(this,v);for(;D>2*G||X>2*Y;){const M=D,l=X;D>2*G&&(D=D>=16384?Math.floor(D/2)-1:Math.ceil(D/2)),X>2*Y&&(X=X>=16384?Math.floor(X/2)-1:Math.ceil(X/2));const c=new OffscreenCanvas(D,X);c.getContext("2d").drawImage(it,0,0,M,l,0,0,D,X),it=c.transferToImageBitmap()}return it},mn=function(G,Y){G=Math.ceil(G),Y=Math.ceil(Y);const V=s(this,A);if(!V||V.width===G&&V.height===Y)return;V.width=G,V.height=Y;const st=s(this,y)?s(this,v):nt(this,x,Yn).call(this,G,Y),D=V.getContext("2d");D.filter=this._uiManager.hcmFilter,D.drawImage(st,0,0,st.width,st.height,0,0,G,Y)},Me=function(G){if(G){if(s(this,y)){const st=this._uiManager.imageManager.getSvgUrl(s(this,b));if(st)return st}const Y=document.createElement("canvas");return{width:Y.width,height:Y.height}=s(this,v),Y.getContext("2d").drawImage(s(this,v),0,0),Y.toDataURL()}if(s(this,y)){const[Y,V]=this.pageDimensions,st=Math.round(this.width*Y*S.PixelsPerInch.PDF_TO_CSS_UNITS),D=Math.round(this.height*V*S.PixelsPerInch.PDF_TO_CSS_UNITS),X=new OffscreenCanvas(st,D);return X.getContext("2d").drawImage(s(this,v),0,0,s(this,v).width,s(this,v).height,0,0,st,D),X.transferToImageBitmap()}return structuredClone(s(this,v))},Jn=function(){ut(this,g,new ResizeObserver(G=>{const Y=G[0].contentRect;Y.width&&Y.height&&nt(this,x,Kn).call(this,Y.width,Y.height)})),s(this,g).observe(this.div)},Qt(T,"_type","stamp");let N=T;e.StampEditor=N}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return S.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return C.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return N.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return v.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}});var e=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),S=__w_pdfjs_require__(27),C=__w_pdfjs_require__(5),N=__w_pdfjs_require__(29),v=__w_pdfjs_require__(14),b=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(t,e,i){if(i||arguments.length===2)for(var n=0,r=e.length,S;n<r;n++)(S||!(n in e))&&(S||(S=Array.prototype.slice.call(e,0,n)),S[n]=e[n]);return t.concat(S||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(t,e){var i={};return allEvents.forEach(function(n){var r=t[n];r&&(e?i[n]=function(S){return r(S,e(n))}:i[n]=r)}),i}function makeCancellablePromise(t){var e=!1,i=new Promise(function(n,r){t.then(function(S){return!e&&n(S)}).catch(function(S){return!e&&r(S)})});return{promise:i,cancel:function(){e=!0}}}var prefix="Invariant failed";function invariant(t,e){if(!t)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(t,e,i){for(i of t.keys())if(dequal(i,e))return i}function dequal(t,e){var i,n,r;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((n=t.length)===e.length)for(;n--&&dequal(t[n],e[n]););return n===-1}if(i===Set){if(t.size!==e.size)return!1;for(n of t)if(r=n,r&&typeof r=="object"&&(r=find(e,r),!r)||!e.has(r))return!1;return!0}if(i===Map){if(t.size!==e.size)return!1;for(n of t)if(r=n[0],r&&typeof r=="object"&&(r=find(e,r),!r)||!dequal(n[1],e.get(r)))return!1;return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!i||typeof t=="object"){n=0;for(i in t)if(has.call(t,i)&&++n&&!has.call(e,i)||!(i in e)||!dequal(t[i],e[i]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:t,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},t)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(i=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(i):Array.isArray(e)?i(e):e.then(i)}).then(i=>{invariant(Array.isArray(i));const n=i[0];new Promise(r=>{invariant(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(S=>{r(S)}).catch(()=>{invariant(!1)}):typeof n=="number"?r(n):invariant(!1)}).then(r=>{const S=r+1;invariant(this.pdfViewer),invariant(S>=1&&S<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:i,pageIndex:r,pageNumber:S})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const i=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:i,pageNumber:e})}addLinkAttributes(e,i,n){e.href=i,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined$1(t){return typeof t<"u"}function isProvided(t){return isDefined$1(t)&&t!==null}function isString(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant(isBrowser),t instanceof Blob}function isDataURI(t){return isString(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant(isDataURI(t));const[e="",i=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(i):unescape(i)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t&&t.cancel&&t.cancel()}function makePageCallback(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((e,i)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return i(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return i(new Error("Error while reading a file."));const{error:S}=r.target;if(!S)return i(new Error("Error while reading a file."));switch(S.code){case S.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case S.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case S.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},n.readAsArrayBuffer(t)})}function reducer$1(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer$1,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const t={};return allEvents.forEach(e=>{t[e]=PropTypes$1.func}),t})(),isTypedArray=PropTypes$1.oneOfType([PropTypes$1.instanceOf(Int8Array),PropTypes$1.instanceOf(Uint8Array),PropTypes$1.instanceOf(Uint8ClampedArray),PropTypes$1.instanceOf(Int16Array),PropTypes$1.instanceOf(Uint16Array),PropTypes$1.instanceOf(Int32Array),PropTypes$1.instanceOf(Uint32Array),PropTypes$1.instanceOf(Float32Array),PropTypes$1.instanceOf(Float64Array)]),fileTypes=[PropTypes$1.string,PropTypes$1.instanceOf(ArrayBuffer),PropTypes$1.shape({data:PropTypes$1.oneOfType([PropTypes$1.string,PropTypes$1.instanceOf(ArrayBuffer),PropTypes$1.arrayOf(PropTypes$1.number.isRequired),isTypedArray]).isRequired}),PropTypes$1.shape({range:PropTypes$1.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes$1.shape({url:PropTypes$1.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes$1.instanceOf(Blob));const isClassName=PropTypes$1.oneOfType([PropTypes$1.string,PropTypes$1.arrayOf(PropTypes$1.string)]),isFile=PropTypes$1.oneOfType(fileTypes);PropTypes$1.instanceOf(LinkService);PropTypes$1.oneOf(["_self","_blank","_parent","_top"]);PropTypes$1.shape({commonObjs:PropTypes$1.shape({}).isRequired,getAnnotations:PropTypes$1.func.isRequired,getTextContent:PropTypes$1.func.isRequired,getViewport:PropTypes$1.func.isRequired,render:PropTypes$1.func.isRequired});const isPageIndex=function t(e,i,n){const{[i]:r,pageNumber:S,pdf:C}=e;if(!isDefined$1(C))return null;if(isDefined$1(r)){if(typeof r!="number")return new Error(`\`${i}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<0)return new Error(`Expected \`${i}\` to be greater or equal to 0.`);const{numPages:N}=C;if(r+1>N)return new Error(`Expected \`${i}\` to be less or equal to ${N-1}.`)}else if(!isDefined$1(S))return new Error(`\`${i}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function t(e,i,n){const{[i]:r,pageIndex:S,pdf:C}=e;if(!isDefined$1(C))return null;if(isDefined$1(r)){if(typeof r!="number")return new Error(`\`${i}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<1)return new Error(`Expected \`${i}\` to be greater or equal to 1.`);const{numPages:N}=C;if(r>N)return new Error(`Expected \`${i}\` to be less or equal to ${N}.`)}else if(!isDefined$1(S))return new Error(`\`${i}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes$1.oneOfType([PropTypes$1.any,PropTypes$1.oneOf([!1])]),isRef=PropTypes$1.oneOfType([PropTypes$1.func,PropTypes$1.exact({current:PropTypes$1.any})]),isRenderMode=PropTypes$1.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes$1.oneOf([0,90,180,270]);var __awaiter$1=function(t,e,i,n){function r(S){return S instanceof i?S:new i(function(C){C(S)})}return new(i||(i=Promise))(function(S,C){function N(p){try{b(n.next(p))}catch(k){C(k)}}function v(p){try{b(n.throw(p))}catch(k){C(k)}}function b(p){p.done?S(p.value):r(p.value).then(N,v)}b((n=n.apply(t,e||[])).next())})},__rest$1=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(t,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const i=prompt("Enter the password to open this PDF file.");t(i);break}case PasswordResponses.INCORRECT_PASSWORD:{const i=prompt("Invalid password. Please try again.");t(i);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t(e,i){var{children:n,className:r,error:S="Failed to load PDF file.",externalLinkRel:C,externalLinkTarget:N,file:v,inputRef:b,imageResourcesPath:p,loading:k="Loading PDF…",noData:I="No PDF file specified.",onItemClick:A,onLoadError:g,onLoadProgress:w,onLoadSuccess:y,onPassword:h=defaultOnPassword,onSourceError:x,onSourceSuccess:F,options:E,renderMode:o,rotate:f}=e,a=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[u,m]=useResolver(),{value:j,error:d}=u,[T,L]=useResolver(),{value:K,error:G}=T,Y=reactExports.useRef(new LinkService),V=reactExports.useRef([]),st=reactExports.useRef(),D=reactExports.useRef();reactExports.useEffect(()=>{v&&v!==st.current&&isParameterObject(v)&&(warning$1(!dequal(v,st.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),st.current=v)},[v]),reactExports.useEffect(()=>{E&&E!==D.current&&(warning$1(!dequal(E,D.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),D.current=E)},[E]);const X=reactExports.useRef({scrollPageIntoView:et=>{const{dest:tt,pageNumber:R,pageIndex:U=R-1}=et;if(A){A({dest:tt,pageIndex:U,pageNumber:R});return}const Z=V.current[U];if(Z){Z.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${R} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(i,()=>({linkService:Y,pages:V,viewer:X}),[]);function it(){F&&F()}function M(){d&&(warning$1(!1,d.toString()),x&&x(d))}function l(){m({type:"RESET"})}reactExports.useEffect(l,[v,m]);const c=reactExports.useCallback(()=>__awaiter$1(this,void 0,void 0,function*(){if(!v)return null;if(typeof v=="string")return isDataURI(v)?{data:dataURItoByteString(v)}:(displayCORSWarning(),{url:v});if(v instanceof PDFDataRangeTransport)return{range:v};if(isArrayBuffer(v))return{data:v};if(isBrowser&&isBlob(v))return{data:yield loadFromFile(v)};if(invariant(typeof v=="object"),invariant(isParameterObject(v)),"url"in v&&typeof v.url=="string"){if(isDataURI(v.url)){const{url:et}=v,tt=__rest$1(v,["url"]),R=dataURItoByteString(et);return Object.assign({data:R},tt)}displayCORSWarning()}return v}),[v]);reactExports.useEffect(()=>{const et=makeCancellablePromise(c());return et.promise.then(tt=>{m({type:"RESOLVE",value:tt})}).catch(tt=>{m({type:"REJECT",error:tt})}),()=>{cancelRunningTask(et)}},[c,m]),reactExports.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){M();return}it()}},[j]);function P(){K&&(y&&y(K),V.current=new Array(K.numPages),Y.current.setDocument(K))}function $(){G&&(warning$1(!1,G.toString()),g&&g(G))}function B(){L({type:"RESET"})}reactExports.useEffect(B,[L,j]);function W(){if(!j)return;const et=Object.assign(Object.assign({},E),{isEvalSupported:!1}),tt=Object.assign(Object.assign({},j),et),R=pdfjs.getDocument(tt);w&&(R.onProgress=w),h&&(R.onPassword=h);const U=R;return U.promise.then(Z=>{L({type:"RESOLVE",value:Z})}).catch(Z=>{U.destroyed||L({type:"REJECT",error:Z})}),()=>{U.destroy()}}reactExports.useEffect(W,[E,L,j]),reactExports.useEffect(()=>{if(!(typeof K>"u")){if(K===!1){$();return}P()}},[K]);function Q(){Y.current.setViewer(X.current),Y.current.setExternalLinkRel(C),Y.current.setExternalLinkTarget(N)}reactExports.useEffect(Q,[C,N]);function at(et,tt){V.current[et]=tt}function pt(et){delete V.current[et]}const ft=reactExports.useMemo(()=>({imageResourcesPath:p,linkService:Y.current,onItemClick:A,pdf:K,registerPage:at,renderMode:o,rotate:f,unregisterPage:pt}),[p,A,K,o,f]),bt=reactExports.useMemo(()=>makeEventProps(a,()=>K),[a,K]);function vt(){return React.createElement(DocumentContext.Provider,{value:ft},n)}function yt(){return v?K==null?React.createElement(Message,{type:"loading"},typeof k=="function"?k():k):K===!1?React.createElement(Message,{type:"error"},typeof S=="function"?S():S):vt():React.createElement(Message,{type:"no-data"},typeof I=="function"?I():I)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",r),ref:b,style:{"--scale-factor":"1"}},bt),yt())}),isFunctionOrNode$1=PropTypes$1.oneOfType([PropTypes$1.func,PropTypes$1.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes$1.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes$1.string,externalLinkTarget:PropTypes$1.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes$1.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes$1.func,onLoadError:PropTypes$1.func,onLoadProgress:PropTypes$1.func,onLoadSuccess:PropTypes$1.func,onPassword:PropTypes$1.func,onSourceError:PropTypes$1.func,onSourceSuccess:PropTypes$1.func,options:PropTypes$1.shape({canvasFactory:PropTypes$1.any,canvasMaxAreaInBytes:PropTypes$1.number,cMapPacked:PropTypes$1.bool,CMapReaderFactory:PropTypes$1.any,cMapUrl:PropTypes$1.string,disableAutoFetch:PropTypes$1.bool,disableFontFace:PropTypes$1.bool,disableRange:PropTypes$1.bool,disableStream:PropTypes$1.bool,docBaseUrl:PropTypes$1.string,enableXfa:PropTypes$1.bool,filterFactory:PropTypes$1.any,fontExtraProperties:PropTypes$1.bool,httpHeaders:PropTypes$1.object,isEvalSupported:PropTypes$1.bool,isOffscreenCanvasSupported:PropTypes$1.bool,length:PropTypes$1.number,maxImageSize:PropTypes$1.number,ownerDocument:PropTypes$1.any,password:PropTypes$1.string,pdfBug:PropTypes$1.bool,rangeChunkSize:PropTypes$1.number,StandardFontDataFactory:PropTypes$1.any,standardFontDataUrl:PropTypes$1.string,stopAtErrors:PropTypes$1.bool,useSystemFonts:PropTypes$1.bool,useWorkerFetch:PropTypes$1.bool,verbosity:PropTypes$1.number,withCredentials:PropTypes$1.bool,worker:PropTypes$1.any}),rotate:PropTypes$1.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.filter(Boolean);if(i.length<=1){var n=i[0];return n||null}return function(S){i.forEach(function(C){typeof C=="function"?C(S):C&&(C.current=S)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const e={};if(isStructTreeNode(t)){const{role:i}=t,n=i.match(HEADING_PATTERN);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(isPdfRole(i)){const r=PDF_ROLE_TO_HTML_ROLE[i];r&&(e.role=r)}}return e}function getBaseAttributes(t){const e={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[i]=t.children;if(i){const n=getBaseAttributes(i);return Object.assign(Object.assign({},e),n)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function getAttributes(t){return t?Object.assign(Object.assign({},getRoleAttributes(t)),getBaseAttributes(t)):null}function StructTreeItem({className:t,node:e}){const i=reactExports.useMemo(()=>getAttributes(e),[e]),n=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((r,S)=>React.createElement(StructTreeItem,{key:S,node:r})),[e]);return React.createElement("span",Object.assign({className:t},i),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const t=usePageContext();invariant(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:i}=t,[n,r]=useResolver(),{value:S,error:C}=n,{customTextRenderer:N,page:v}=t;function b(){S&&i&&i(S)}function p(){C&&(warning$1(!1,C.toString()),e&&e(C))}function k(){r({type:"RESET"})}reactExports.useEffect(k,[r,v]);function I(){if(N||!v)return;const A=makeCancellablePromise(v.getStructTree()),g=A;return A.promise.then(w=>{r({type:"RESOLVE",value:w})}).catch(w=>{r({type:"REJECT",error:w})}),()=>cancelRunningTask(g)}return reactExports.useEffect(I,[N,v,r]),reactExports.useEffect(()=>{if(S!==void 0){if(S===!1){p();return}b()}},[S]),S?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:S}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(t){const e=usePageContext();invariant(e);const i=Object.assign(Object.assign({},e),t),{_className:n,canvasBackground:r,devicePixelRatio:S=getDevicePixelRatio(),onRenderError:C,onRenderSuccess:N,page:v,renderForms:b,renderTextLayer:p,rotate:k,scale:I}=i,{canvasRef:A}=t;invariant(v);const g=reactExports.useRef(null);function w(){v&&N&&N(makePageCallback(v,I))}function y(o){isCancelException(o)||(warning$1(!1,o.toString()),C&&C(o))}const h=reactExports.useMemo(()=>v.getViewport({scale:I*S,rotation:k}),[S,v,k,I]),x=reactExports.useMemo(()=>v.getViewport({scale:I,rotation:k}),[v,k,I]);function F(){if(!v)return;v.cleanup();const{current:o}=g;if(!o)return;o.width=h.width,o.height=h.height,o.style.width=`${Math.floor(x.width)}px`,o.style.height=`${Math.floor(x.height)}px`,o.style.visibility="hidden";const f={annotationMode:b?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:h};r&&(f.background=r);const a=v.render(f),u=a;return a.promise.then(()=>{o.style.visibility="",w()}).catch(y),()=>cancelRunningTask(u)}reactExports.useEffect(F,[r,g,S,v,b,h,x]);const E=reactExports.useCallback(()=>{const{current:o}=g;o&&(o.width=0,o.height=0)},[g]);return reactExports.useEffect(()=>E,[E]),React.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(A,g),style:{display:"block",userSelect:"none"}},p?React.createElement(StructTree,null):null)}function PageSVG(){const t=usePageContext();invariant(t);const{_className:e,onRenderSuccess:i,onRenderError:n,page:r,rotate:S,scale:C}=t;invariant(r);const[N,v]=useResolver(),{value:b,error:p}=N;function k(){r&&i&&i(makePageCallback(r,C))}function I(){p&&(isCancelException(p)||(warning$1(!1,p.toString()),n&&n(p)))}const A=reactExports.useMemo(()=>r.getViewport({scale:C,rotation:S}),[r,S,C]);function g(){v({type:"RESET"})}reactExports.useEffect(g,[r,v,A]);function w(){if(!r)return;const F=makeCancellablePromise(r.getOperatorList());return F.promise.then(E=>{new pdfjs.SVGGraphics(r.commonObjs,r.objs).getSVG(E,A).then(f=>{if(!(f instanceof SVGElement))throw new Error("getSVG returned unexpected result.");v({type:"RESOLVE",value:f})}).catch(f=>{v({type:"REJECT",error:f})})}).catch(E=>{v({type:"REJECT",error:E})}),()=>cancelRunningTask(F)}reactExports.useEffect(w,[r,v,A]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){I();return}k()}},[b]);function y(F){if(!F||!b)return;F.firstElementChild||F.appendChild(b);const{width:E,height:o}=A;b.setAttribute("width",`${E}`),b.setAttribute("height",`${o}`)}const{width:h,height:x}=A;return React.createElement("div",{className:`${e}__svg`,ref:F=>y(F),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:h,height:x,userSelect:"none"}})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant(t);const{customTextRenderer:e,onGetTextError:i,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:S,page:C,pageIndex:N,pageNumber:v,rotate:b,scale:p}=t;invariant(C);const[k,I]=useResolver(),{value:A,error:g}=k,w=reactExports.useRef(null),y=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function h(){A&&n&&n(A)}function x(){g&&(warning$1(!1,g.toString()),i&&i(g))}function F(){I({type:"RESET"})}reactExports.useEffect(F,[C,I]);function E(){if(!C)return;const d=makeCancellablePromise(C.getTextContent()),T=d;return d.promise.then(L=>{I({type:"RESOLVE",value:L})}).catch(L=>{I({type:"REJECT",error:L})}),()=>cancelRunningTask(T)}reactExports.useEffect(E,[C,I]),reactExports.useEffect(()=>{if(A!==void 0){if(A===!1){x();return}h()}},[A]);const o=reactExports.useCallback(()=>{S&&S()},[S]),f=reactExports.useCallback(d=>{warning$1(!1,d.toString()),r&&r(d)},[r]);function a(){const d=y.current;d&&d.classList.add("active")}function u(){const d=y.current;d&&d.classList.remove("active")}const m=reactExports.useMemo(()=>C.getViewport({scale:p,rotation:b}),[C,b,p]);function j(){if(!C||!A)return;const{current:d}=w;if(!d)return;d.innerHTML="";const T=C.streamTextContent({includeMarkedContent:!0}),L={container:d,textContentSource:T,viewport:m},K=pdfjs.renderTextLayer(L),G=K;return K.promise.then(()=>{const Y=document.createElement("div");Y.className="endOfContent",d.append(Y),y.current=Y;const V=d.querySelectorAll('[role="presentation"]');if(e){let st=0;A.items.forEach((D,X)=>{if(!isTextItem(D))return;const it=V[st];if(!it)return;const M=e(Object.assign({pageIndex:N,pageNumber:v,itemIndex:X},D));it.innerHTML=M,st+=D.str&&D.hasEOL?2:1})}o()}).catch(f),()=>cancelRunningTask(G)}return reactExports.useLayoutEffect(j,[e,f,o,C,N,v,A,m]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:u,onMouseDown:a,ref:w})}function AnnotationLayer(){const t=useDocumentContext(),e=usePageContext();invariant(e);const i=Object.assign(Object.assign({},t),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:S,onGetAnnotationsSuccess:C,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:v,page:b,pdf:p,renderForms:k,rotate:I,scale:A=1}=i;invariant(p),invariant(b),invariant(r);const[g,w]=useResolver(),{value:y,error:h}=g,x=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function F(){y&&C&&C(y)}function E(){h&&(warning$1(!1,h.toString()),S&&S(h))}function o(){w({type:"RESET"})}reactExports.useEffect(o,[w,b]);function f(){if(!b)return;const d=makeCancellablePromise(b.getAnnotations()),T=d;return d.promise.then(L=>{w({type:"RESOLVE",value:L})}).catch(L=>{w({type:"REJECT",error:L})}),()=>{cancelRunningTask(T)}}reactExports.useEffect(f,[w,b,k]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){E();return}F()}},[y]);function a(){v&&v()}function u(d){warning$1(!1,`${d}`),N&&N(d)}const m=reactExports.useMemo(()=>b.getViewport({scale:A,rotation:I}),[b,I,A]);function j(){if(!p||!b||!r||!y)return;const{current:d}=x;if(!d)return;const T=m.clone({dontFlip:!0}),L={accessibilityManager:null,annotationCanvasMap:null,div:d,l10n:null,page:b,viewport:T},K={annotations:y,annotationStorage:p.annotationStorage,div:d,downloadManager:null,imageResourcesPath:n,linkService:r,page:b,renderForms:k,viewport:T};d.innerHTML="";try{new pdfjs.AnnotationLayer(L).render(K),a()}catch(G){u(G)}return()=>{}}return reactExports.useEffect(j,[y,n,r,b,k,m]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:x})}var __rest=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i};const defaultScale=1,Page=function t(e){const i=useDocumentContext(),n=Object.assign(Object.assign({},i),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:S=!0,canvasBackground:C,canvasRef:N,children:v,className:b,customRenderer:p,customTextRenderer:k,devicePixelRatio:I,error:A="Failed to load the page.",height:g,inputRef:w,loading:y="Loading page…",noData:h="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:F,onGetStructTreeError:E,onGetStructTreeSuccess:o,onGetTextError:f,onGetTextSuccess:a,onLoadError:u,onLoadSuccess:m,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:d,onRenderError:T,onRenderSuccess:L,onRenderTextLayerError:K,onRenderTextLayerSuccess:G,pageIndex:Y,pageNumber:V,pdf:st,registerPage:D,renderAnnotationLayer:X=!0,renderForms:it=!1,renderMode:M="canvas",renderTextLayer:l=!0,rotate:c,scale:P=defaultScale,unregisterPage:$,width:B}=n,W=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Q,at]=useResolver(),{value:pt,error:ft}=Q,bt=reactExports.useRef(null);invariant(st);const vt=isProvided(V)?V-1:Y??null,yt=V??(isProvided(Y)?Y+1:null),et=c??(pt?pt.rotate:null),tt=reactExports.useMemo(()=>{if(!pt)return null;let Mt=1;const Gt=P??defaultScale;if(B||g){const qt=pt.getViewport({scale:1,rotation:et});B?Mt=B/qt.width:g&&(Mt=g/qt.height)}return Gt*Mt},[g,pt,et,P,B]);function R(){return()=>{isProvided(vt)&&S&&$&&$(vt)}}reactExports.useEffect(R,[S,st,vt,$]);function U(){if(m){if(!pt||!tt)return;m(makePageCallback(pt,tt))}if(S&&D){if(!isProvided(vt)||!bt.current)return;D(vt,bt.current)}}function Z(){ft&&(warning$1(!1,ft.toString()),u&&u(ft))}function ot(){at({type:"RESET"})}reactExports.useEffect(ot,[at,st,vt]);function gt(){if(!st||!yt)return;const Mt=makeCancellablePromise(st.getPage(yt)),Gt=Mt;return Mt.promise.then(qt=>{at({type:"RESOLVE",value:qt})}).catch(qt=>{at({type:"REJECT",error:qt})}),()=>cancelRunningTask(Gt)}reactExports.useEffect(gt,[at,st,vt,yt,D]),reactExports.useEffect(()=>{if(pt!==void 0){if(pt===!1){Z();return}U()}},[pt,tt]);const St=reactExports.useMemo(()=>pt&&isProvided(vt)&&yt&&isProvided(et)&&isProvided(tt)?{_className:r,canvasBackground:C,customTextRenderer:k,devicePixelRatio:I,onGetAnnotationsError:x,onGetAnnotationsSuccess:F,onGetStructTreeError:E,onGetStructTreeSuccess:o,onGetTextError:f,onGetTextSuccess:a,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:d,onRenderError:T,onRenderSuccess:L,onRenderTextLayerError:K,onRenderTextLayerSuccess:G,page:pt,pageIndex:vt,pageNumber:yt,renderForms:it,renderTextLayer:l,rotate:et,scale:tt}:null,[r,C,k,I,x,F,E,o,f,a,j,d,T,L,K,G,pt,vt,yt,it,l,et,tt]),rt=reactExports.useMemo(()=>makeEventProps(W,()=>pt&&(tt?makePageCallback(pt,tt):void 0)),[W,pt,tt]),q=`${vt}@${tt}/${et}`,wt=`${vt}/${et}`;function Ct(){switch(M){case"custom":return invariant(p),React.createElement(p,{key:`${q}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${wt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${q}_canvas`,canvasRef:N})}}function Bt(){return l?React.createElement(TextLayer,{key:`${q}_text`}):null}function zt(){return X?React.createElement(AnnotationLayer,{key:`${q}_annotations`}):null}function Wt(){return React.createElement(PageContext.Provider,{value:St},Ct(),Bt(),zt(),v)}function Dt(){return yt?st===null||pt===void 0||pt===null?React.createElement(Message,{type:"loading"},typeof y=="function"?y():y):st===!1||pt===!1?React.createElement(Message,{type:"error"},typeof A=="function"?A():A):Wt():React.createElement(Message,{type:"no-data"},typeof h=="function"?h():h)}return React.createElement("div",Object.assign({className:clsx(r,b),"data-page-number":yt,ref:mergeRefs(w,bt),style:{"--scale-factor":`${tt}`,backgroundColor:C||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},rt),Dt())},isFunctionOrNode=PropTypes$1.oneOfType([PropTypes$1.func,PropTypes$1.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes$1.string,canvasRef:isRef,children:PropTypes$1.node,className:isClassName,customRenderer:PropTypes$1.func,customTextRenderer:PropTypes$1.func,devicePixelRatio:PropTypes$1.number,error:isFunctionOrNode,height:PropTypes$1.number,imageResourcesPath:PropTypes$1.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes$1.func,onGetTextSuccess:PropTypes$1.func,onLoadError:PropTypes$1.func,onLoadSuccess:PropTypes$1.func,onRenderError:PropTypes$1.func,onRenderSuccess:PropTypes$1.func,onRenderTextLayerError:PropTypes$1.func,onRenderTextLayerSuccess:PropTypes$1.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes$1.bool,renderForms:PropTypes$1.bool,renderMode:isRenderMode,renderTextLayer:PropTypes$1.bool,rotate:isRotate,scale:PropTypes$1.number,width:PropTypes$1.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";var Close={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1$1=Close.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Close.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const PDFPreview=({open:t,onClose:e,pdfUrl:i,bookTitle:n})=>{const[r,S]=reactExports.useState(null),[C,N]=reactExports.useState(1),[v,b]=reactExports.useState(null),p=({numPages:A})=>{S(A),b(null)},k=A=>{b("Erreur lors du chargement du PDF"),console.error("Error loading PDF:",A)},I=A=>{N(g=>{const w=g+A;return Math.min(Math.max(1,w),r)})};return jsxRuntimeExports.jsxs(Dialog,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:n}),jsxRuntimeExports.jsx(IconButton,{onClick:e,children:jsxRuntimeExports.jsx(default_1$1,{})})]}),jsxRuntimeExports.jsx(DialogContent,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:v?jsxRuntimeExports.jsx(Typography,{color:"error",sx:{mt:2},children:v}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Document,{file:i,onLoadSuccess:p,onLoadError:k,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement du PDF..."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:C,width:window.innerWidth*.7,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement de la page..."})})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(default_1$7,{}),onClick:()=>I(-1),disabled:C<=1,children:"Précédent"}),jsxRuntimeExports.jsxs(Typography,{children:["Page ",C," sur ",r]}),jsxRuntimeExports.jsx(Button,{endIcon:jsxRuntimeExports.jsx(default_1$8,{}),onClick:()=>I(1),disabled:C>=r,children:"Suivant"})]})]})})]})};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function t(n,r,S,C,N,v){if(v!==ReactPropTypesSecret){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return i.PropTypes=i,i};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter(t,e,i,n){function r(S){return S instanceof i?S:new i(function(C){C(S)})}return new(i||(i=Promise))(function(S,C){function N(p){try{b(n.next(p))}catch(k){C(k)}}function v(p){try{b(n.throw(p))}catch(k){C(k)}}function b(p){p.done?S(p.value):r(p.value).then(N,v)}b((n=n.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(t,e,i){const n=withMimeType(t),{webkitRelativePath:r}=t,S=typeof e=="string"?e:typeof r=="string"&&r.length>0?r:`./${t.name}`;return typeof n.path!="string"&&setObjProp(n,"path",S),setObjProp(n,"relativePath",S),n}function withMimeType(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const n=e.split(".").pop().toLowerCase(),r=COMMON_MIME_TYPES.get(n);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}function setObjProp(t,e,i){Object.defineProperty(t,e,{value:i,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(t){return __awaiter(this,void 0,void 0,function*(){return isObject(t)&&isDataTransfer(t.dataTransfer)?getDataTransferFiles(t.dataTransfer,t.type):isChangeEvt(t)?getInputFiles(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?getFsHandleFiles(t):[]})}function isDataTransfer(t){return isObject(t)}function isChangeEvt(t){return isObject(t)&&isObject(t.target)}function isObject(t){return typeof t=="object"&&t!==null}function getInputFiles(t){return fromList(t.target.files).map(e=>toFileWithPath(e))}function getFsHandleFiles(t){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(t.map(i=>i.getFile()))).map(i=>toFileWithPath(i))})}function getDataTransferFiles(t,e){return __awaiter(this,void 0,void 0,function*(){if(t.items){const i=fromList(t.items).filter(r=>r.kind==="file");if(e!=="drop")return i;const n=yield Promise.all(i.map(toFilePromises));return noIgnoredFiles(flatten(n))}return noIgnoredFiles(fromList(t.files).map(i=>toFileWithPath(i)))})}function noIgnoredFiles(t){return t.filter(e=>FILES_TO_IGNORE.indexOf(e.name)===-1)}function fromList(t){if(t===null)return[];const e=[];for(let i=0;i<t.length;i++){const n=t[i];e.push(n)}return e}function toFilePromises(t){if(typeof t.webkitGetAsEntry!="function")return fromDataTransferItem(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?fromDirEntry(e):fromDataTransferItem(t,e)}function flatten(t){return t.reduce((e,i)=>[...e,...Array.isArray(i)?flatten(i):[i]],[])}function fromDataTransferItem(t,e){var i;if(typeof t.getAsFileSystemHandle=="function")return t.getAsFileSystemHandle().then(S=>__awaiter(this,void 0,void 0,function*(){const C=yield S.getFile();return C.handle=S,toFileWithPath(C)}));const n=t.getAsFile();if(!n)return Promise.reject(`${t} is not a File`);const r=toFileWithPath(n,(i=e==null?void 0:e.fullPath)!==null&&i!==void 0?i:void 0);return Promise.resolve(r)}function fromEntry(t){return __awaiter(this,void 0,void 0,function*(){return t.isDirectory?fromDirEntry(t):fromFileEntry(t)})}function fromDirEntry(t){const e=t.createReader();return new Promise((i,n)=>{const r=[];function S(){e.readEntries(C=>__awaiter(this,void 0,void 0,function*(){if(C.length){const N=Promise.all(C.map(fromEntry));r.push(N),S()}else try{const N=yield Promise.all(r);i(N)}catch(N){n(N)}}),C=>{n(C)})}S()})}function fromFileEntry(t){return __awaiter(this,void 0,void 0,function*(){return new Promise((e,i)=>{t.file(n=>{const r=toFileWithPath(n,t.fullPath);e(r)},n=>{i(n)})})})}var _default=function(t,e){if(t&&e){var i=Array.isArray(e)?e:e.split(",");if(i.length===0)return!0;var n=t.name||"",r=(t.type||"").toLowerCase(),S=r.replace(/\/.*$/,"");return i.some(function(C){var N=C.trim().toLowerCase();return N.charAt(0)==="."?n.toLowerCase().endsWith(N):N.endsWith("/*")?S===N.replace(/\/.*$/,""):r===N})}return!0};function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function ownKeys$1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(i),!0).forEach(function(n){_defineProperty$1(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys$1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function _defineProperty$1(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_unsupportedIterableToArray$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray$1(t,e)}}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _iterableToArrayLimit$1(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n=[],r=!0,S=!1,C,N;try{for(i=i.call(t);!(r=(C=i.next()).done)&&(n.push(C.value),!(e&&n.length===e));r=!0);}catch(v){S=!0,N=v}finally{try{!r&&i.return!=null&&i.return()}finally{if(S)throw N}}return n}}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=e.split(","),n=i.length>1?"one of ".concat(i.join(", ")):i[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(n)}},getTooLargeRejectionErr=function t(e){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},getTooSmallRejectionErr=function t(e){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(t,e){var i=t.type==="application/x-moz-file"||accepts(t,e);return[i,i?null:getInvalidTypeRejectionErr(e)]}function fileMatchSize(t,e,i){if(isDefined(t.size))if(isDefined(e)&&isDefined(i)){if(t.size>i)return[!1,getTooLargeRejectionErr(i)];if(t.size<e)return[!1,getTooSmallRejectionErr(e)]}else{if(isDefined(e)&&t.size<e)return[!1,getTooSmallRejectionErr(e)];if(isDefined(i)&&t.size>i)return[!1,getTooLargeRejectionErr(i)]}return[!0,null]}function isDefined(t){return t!=null}function allFilesAccepted(t){var e=t.files,i=t.accept,n=t.minSize,r=t.maxSize,S=t.multiple,C=t.maxFiles,N=t.validator;return!S&&e.length>1||S&&C>=1&&e.length>C?!1:e.every(function(v){var b=fileAccepted(v,i),p=_slicedToArray$1(b,1),k=p[0],I=fileMatchSize(v,n,r),A=_slicedToArray$1(I,1),g=A[0],w=N?N(v):null;return k&&g&&!w})}function isPropagationStopped(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function isEvtWithFiles(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function onDocumentDragOver(t){t.preventDefault()}function isIe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function isEdge(t){return t.indexOf("Edge/")!==-1}function isIeOrEdge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(t)||isEdge(t)}function composeEventHandlers(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){for(var r=arguments.length,S=new Array(r>1?r-1:0),C=1;C<r;C++)S[C-1]=arguments[C];return e.some(function(N){return!isPropagationStopped(n)&&N&&N.apply(void 0,[n].concat(S)),isPropagationStopped(n)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(t){if(isDefined(t)){var e=Object.entries(t).filter(function(i){var n=_slicedToArray$1(i,2),r=n[0],S=n[1],C=!0;return isMIMEType(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),C=!1),(!Array.isArray(S)||!S.every(isExt))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),C=!1),C}).reduce(function(i,n){var r=_slicedToArray$1(n,2),S=r[0],C=r[1];return _objectSpread$1(_objectSpread$1({},i),{},_defineProperty$1({},S,C))},{});return[{description:"Files",accept:e}]}return t}function acceptPropAsAcceptAttr(t){if(isDefined(t))return Object.entries(t).reduce(function(e,i){var n=_slicedToArray$1(i,2),r=n[0],S=n[1];return[].concat(_toConsumableArray$1(e),[r],_toConsumableArray$1(S))},[]).filter(function(e){return isMIMEType(e)||isExt(e)}).join(",")}function isAbort(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function isSecurityError(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function isMIMEType(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function isExt(t){return/^.*\.[\w]+$/.test(t)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _iterableToArrayLimit(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n=[],r=!0,S=!1,C,N;try{for(i=i.call(t);!(r=(C=i.next()).done)&&(n.push(C.value),!(e&&n.length===e));r=!0);}catch(v){S=!0,N=v}finally{try{!r&&i.return!=null&&i.return()}finally{if(S)throw N}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(n){_defineProperty(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _objectWithoutProperties(t,e){if(t==null)return{};var i=_objectWithoutPropertiesLoose(t,e),n,r;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(t);for(r=0;r<S.length;r++)n=S[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var i={},n=Object.keys(t),r,S;for(S=0;S<n.length;S++)r=n[S],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}var Dropzone=reactExports.forwardRef(function(t,e){var i=t.children,n=_objectWithoutProperties(t,_excluded),r=useDropzone(n),S=r.open,C=_objectWithoutProperties(r,_excluded2);return reactExports.useImperativeHandle(e,function(){return{open:S}},[S]),React.createElement(reactExports.Fragment,null,i(_objectSpread(_objectSpread({},C),{},{open:S})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=_objectSpread(_objectSpread({},defaultProps),t),i=e.accept,n=e.disabled,r=e.getFilesFromEvent,S=e.maxSize,C=e.minSize,N=e.multiple,v=e.maxFiles,b=e.onDragEnter,p=e.onDragLeave,k=e.onDragOver,I=e.onDrop,A=e.onDropAccepted,g=e.onDropRejected,w=e.onFileDialogCancel,y=e.onFileDialogOpen,h=e.useFsAccessApi,x=e.autoFocus,F=e.preventDropOnDocument,E=e.noClick,o=e.noKeyboard,f=e.noDrag,a=e.noDragEventsBubbling,u=e.onError,m=e.validator,j=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(i)},[i]),d=reactExports.useMemo(function(){return pickerOptionsFromAccept(i)},[i]),T=reactExports.useMemo(function(){return typeof y=="function"?y:noop},[y]),L=reactExports.useMemo(function(){return typeof w=="function"?w:noop},[w]),K=reactExports.useRef(null),G=reactExports.useRef(null),Y=reactExports.useReducer(reducer,initialState),V=_slicedToArray(Y,2),st=V[0],D=V[1],X=st.isFocused,it=st.isFileDialogActive,M=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&h&&canUseFileSystemAccessAPI()),l=function(){!M.current&&it&&setTimeout(function(){if(G.current){var q=G.current.files;q.length||(D({type:"closeDialog"}),L())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",l,!1),function(){window.removeEventListener("focus",l,!1)}},[G,it,L,M]);var c=reactExports.useRef([]),P=function(q){K.current&&K.current.contains(q.target)||(q.preventDefault(),c.current=[])};reactExports.useEffect(function(){return F&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",P,!1)),function(){F&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",P))}},[K,F]),reactExports.useEffect(function(){return!n&&x&&K.current&&K.current.focus(),function(){}},[K,x,n]);var $=reactExports.useCallback(function(rt){u?u(rt):console.error(rt)},[u]),B=reactExports.useCallback(function(rt){rt.preventDefault(),rt.persist(),Z(rt),c.current=[].concat(_toConsumableArray(c.current),[rt.target]),isEvtWithFiles(rt)&&Promise.resolve(r(rt)).then(function(q){if(!(isPropagationStopped(rt)&&!a)){var wt=q.length,Ct=wt>0&&allFilesAccepted({files:q,accept:j,minSize:C,maxSize:S,multiple:N,maxFiles:v,validator:m}),Bt=wt>0&&!Ct;D({isDragAccept:Ct,isDragReject:Bt,isDragActive:!0,type:"setDraggedFiles"}),b&&b(rt)}}).catch(function(q){return $(q)})},[r,b,$,a,j,C,S,N,v,m]),W=reactExports.useCallback(function(rt){rt.preventDefault(),rt.persist(),Z(rt);var q=isEvtWithFiles(rt);if(q&&rt.dataTransfer)try{rt.dataTransfer.dropEffect="copy"}catch{}return q&&k&&k(rt),!1},[k,a]),Q=reactExports.useCallback(function(rt){rt.preventDefault(),rt.persist(),Z(rt);var q=c.current.filter(function(Ct){return K.current&&K.current.contains(Ct)}),wt=q.indexOf(rt.target);wt!==-1&&q.splice(wt,1),c.current=q,!(q.length>0)&&(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(rt)&&p&&p(rt))},[K,p,a]),at=reactExports.useCallback(function(rt,q){var wt=[],Ct=[];rt.forEach(function(Bt){var zt=fileAccepted(Bt,j),Wt=_slicedToArray(zt,2),Dt=Wt[0],Mt=Wt[1],Gt=fileMatchSize(Bt,C,S),qt=_slicedToArray(Gt,2),At=qt[0],lt=qt[1],dt=m?m(Bt):null;if(Dt&&At&&!dt)wt.push(Bt);else{var kt=[Mt,lt];dt&&(kt=kt.concat(dt)),Ct.push({file:Bt,errors:kt.filter(function(Xt){return Xt})})}}),(!N&&wt.length>1||N&&v>=1&&wt.length>v)&&(wt.forEach(function(Bt){Ct.push({file:Bt,errors:[TOO_MANY_FILES_REJECTION]})}),wt.splice(0)),D({acceptedFiles:wt,fileRejections:Ct,isDragReject:Ct.length>0,type:"setFiles"}),I&&I(wt,Ct,q),Ct.length>0&&g&&g(Ct,q),wt.length>0&&A&&A(wt,q)},[D,N,j,C,S,v,I,A,g,m]),pt=reactExports.useCallback(function(rt){rt.preventDefault(),rt.persist(),Z(rt),c.current=[],isEvtWithFiles(rt)&&Promise.resolve(r(rt)).then(function(q){isPropagationStopped(rt)&&!a||at(q,rt)}).catch(function(q){return $(q)}),D({type:"reset"})},[r,at,$,a]),ft=reactExports.useCallback(function(){if(M.current){D({type:"openDialog"}),T();var rt={multiple:N,types:d};window.showOpenFilePicker(rt).then(function(q){return r(q)}).then(function(q){at(q,null),D({type:"closeDialog"})}).catch(function(q){isAbort(q)?(L(q),D({type:"closeDialog"})):isSecurityError(q)?(M.current=!1,G.current?(G.current.value=null,G.current.click()):$(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):$(q)});return}G.current&&(D({type:"openDialog"}),T(),G.current.value=null,G.current.click())},[D,T,L,h,at,$,d,N]),bt=reactExports.useCallback(function(rt){!K.current||!K.current.isEqualNode(rt.target)||(rt.key===" "||rt.key==="Enter"||rt.keyCode===32||rt.keyCode===13)&&(rt.preventDefault(),ft())},[K,ft]),vt=reactExports.useCallback(function(){D({type:"focus"})},[]),yt=reactExports.useCallback(function(){D({type:"blur"})},[]),et=reactExports.useCallback(function(){E||(isIeOrEdge()?setTimeout(ft,0):ft())},[E,ft]),tt=function(q){return n?null:q},R=function(q){return o?null:tt(q)},U=function(q){return f?null:tt(q)},Z=function(q){a&&q.stopPropagation()},ot=reactExports.useMemo(function(){return function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=rt.refKey,wt=q===void 0?"ref":q,Ct=rt.role,Bt=rt.onKeyDown,zt=rt.onFocus,Wt=rt.onBlur,Dt=rt.onClick,Mt=rt.onDragEnter,Gt=rt.onDragOver,qt=rt.onDragLeave,At=rt.onDrop,lt=_objectWithoutProperties(rt,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:R(composeEventHandlers(Bt,bt)),onFocus:R(composeEventHandlers(zt,vt)),onBlur:R(composeEventHandlers(Wt,yt)),onClick:tt(composeEventHandlers(Dt,et)),onDragEnter:U(composeEventHandlers(Mt,B)),onDragOver:U(composeEventHandlers(Gt,W)),onDragLeave:U(composeEventHandlers(qt,Q)),onDrop:U(composeEventHandlers(At,pt)),role:typeof Ct=="string"&&Ct!==""?Ct:"presentation"},wt,K),!n&&!o?{tabIndex:0}:{}),lt)}},[K,bt,vt,yt,et,B,W,Q,pt,o,f,n]),gt=reactExports.useCallback(function(rt){rt.stopPropagation()},[]),St=reactExports.useMemo(function(){return function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=rt.refKey,wt=q===void 0?"ref":q,Ct=rt.onChange,Bt=rt.onClick,zt=_objectWithoutProperties(rt,_excluded4),Wt=_defineProperty({accept:j,multiple:N,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:tt(composeEventHandlers(Ct,pt)),onClick:tt(composeEventHandlers(Bt,gt)),tabIndex:-1},wt,G);return _objectSpread(_objectSpread({},Wt),zt)}},[G,i,N,pt,n]);return _objectSpread(_objectSpread({},st),{},{isFocused:X&&!n,getRootProps:ot,getInputProps:St,rootRef:K,inputRef:G,open:tt(ft)})}function reducer(t,e){switch(e.type){case"focus":return _objectSpread(_objectSpread({},t),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},t),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return _objectSpread({},initialState);default:return t}}function noop(){}var Delete={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Delete,"__esModule",{value:!0});var default_1=Delete.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Delete.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const DropZone=styled(Box)(({theme:t,isDragActive:e})=>({border:`2px dashed ${e?t.palette.primary.main:t.palette.grey[400]}`,borderRadius:t.shape.borderRadius,padding:t.spacing(4),textAlign:"center",cursor:"pointer",backgroundColor:e?t.palette.action.hover:t.palette.background.paper,"&:hover":{backgroundColor:t.palette.action.hover}})),FileItem=styled(ListItem)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"stretch",padding:t.spacing(1),gap:t.spacing(1),border:`1px solid ${t.palette.divider}`,borderRadius:t.shape.borderRadius,marginBottom:t.spacing(1)})),FileHeader=styled(Box)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"})),PDFUploadDialog=({open:t,onClose:e,onUpload:i})=>{const[n,r]=reactExports.useState([]),[S,C]=reactExports.useState({}),[N,v]=reactExports.useState({}),[b,p]=reactExports.useState(!1),k=reactExports.useCallback(x=>{const F=x.filter(E=>E.type==="application/pdf");F.length!==x.length&&v(E=>({...E,format:"Some files were rejected. Only PDF files are allowed."})),r(E=>{const o=F.filter(f=>!E.some(a=>a.name===f.name));return[...E,...o]})},[]),{getRootProps:I,getInputProps:A,isDragActive:g}=useDropzone({onDrop:k,accept:{"application/pdf":[".pdf"]},multiple:!0}),w=x=>{r(F=>F.filter(E=>E.name!==x)),C(F=>{const E={...F};return delete E[x],E}),v(F=>{const E={...F};return delete E[x],E})},y=async()=>{if(n.length===0||b)return;p(!0),v({});const x=new FormData;n.forEach(F=>{x.append("files",F)});try{const F=await fetch("/api/upload",{method:"POST",body:x}),E=await F.json();if(!F.ok){let o="Upload failed";switch(F.status){case 400:o=E.error||"Invalid request. Please check your files.";break;case 413:o="Files are too large. Please try smaller files.";break;case 415:o="Unsupported file type. Only PDF files are allowed.";break;case 500:o="Server error. Please try again later.";break;default:o=E.error||"Failed to upload files. Please try again."}throw new Error(o)}if(E.errors&&E.errors.length>0&&E.errors.forEach(o=>{v(f=>({...f,[o.filename]:o.error}))}),E.files&&E.files.length>0)i(E.files),h();else throw new Error("No files were successfully processed")}catch(F){v(E=>({...E,general:F.message||"Failed to upload files. Please try again."}))}finally{p(!1)}},h=()=>{b||(r([]),C({}),v({}),e())};return jsxRuntimeExports.jsxs(Dialog,{open:t,onClose:h,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[jsxRuntimeExports.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Upload PDF Files",jsxRuntimeExports.jsx(IconButton,{onClick:h,disabled:b,children:jsxRuntimeExports.jsx(default_1$1,{})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(DropZone,{...I(),isDragActive:g,children:[jsxRuntimeExports.jsx("input",{...A()}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:g?"Drop the PDF files here...":"Drag and drop multiple PDF files here, or click to select files"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"All files will be processed in batch"})]}),N.format&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mt:2},children:N.format}),N.general&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mt:2},children:N.general}),n.length>0&&jsxRuntimeExports.jsx(List,{sx:{mt:2},children:n.map(x=>jsxRuntimeExports.jsxs(FileItem,{children:[jsxRuntimeExports.jsxs(FileHeader,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[b&&jsxRuntimeExports.jsx(CircularProgress,{size:16}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{wordBreak:"break-all"},children:x.name})]}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>w(x.name),disabled:b,children:jsxRuntimeExports.jsx(default_1,{fontSize:"small"})})]}),N[x.name]&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{width:"100%"},children:N[x.name]})]},x.name))})]}),jsxRuntimeExports.jsxs(DialogActions,{sx:{p:2,gap:1},children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[n.length," file(s) selected"]}),jsxRuntimeExports.jsx(Box,{sx:{flex:1}}),jsxRuntimeExports.jsx(Button,{onClick:h,disabled:b,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:y,disabled:n.length===0||b,variant:"contained",children:b?`Uploading ${n.length} files...`:"Upload All"})]})]})},HomePage=()=>{const[t,e]=reactExports.useState([]),[i,n]=reactExports.useState(!0),[r,S]=reactExports.useState(null),[C,N]=reactExports.useState(""),[v,b]=reactExports.useState(!1),[p,k]=reactExports.useState(null),[I,A]=reactExports.useState(!1),g=useTheme$1(),w=useMediaQuery(g.breakpoints.down("sm")),y=useNavigate();reactExports.useEffect(()=>{h();const a=setInterval(()=>{(t||[]).some(u=>(u==null?void 0:u.processing_status)==="processing")&&h()},5e3);return()=>clearInterval(a)},[t]);const h=async()=>{n(!0);try{const a=await fetch("/api/books");if(!a.ok)throw new Error("Failed to fetch books");const u=await a.json();e(u||[])}catch(a){console.error("Error fetching books:",a),S(a.message)}finally{n(!1)}},x=async a=>{try{e(u=>[...u||[],...a]),N(`${a.length} file(s) uploaded successfully`),await h()}catch(u){console.error("Error processing uploaded files:",u),S(`Error processing files: ${u.message}`)}},F=a=>{if(!(a!=null&&a.available)){S("This book is not yet available for reading");return}y(`/reader/${a==null?void 0:a.id}`)},E=a=>{if(!(a!=null&&a.available)){S("This book is not yet available for preview");return}k(a),b(!0)},o=a=>(a==null?void 0:a.processing_status)==="processing"?{progress:(a==null?void 0:a.progress)||0,currentPage:(a==null?void 0:a.current_page)||0,totalPages:(a==null?void 0:a.total_pages)||"?"}:null,f=a=>{if(a!=null&&a.available)return jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$2,{}),label:"Available",color:"success",size:"small",sx:{mb:1}});if((a==null?void 0:a.processing_status)==="processing"){const u=o(a);return jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[jsxRuntimeExports.jsx(CircularProgress,{size:20}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Processing (",(u==null?void 0:u.currentPage)||0,"/",(u==null?void 0:u.totalPages)||"?",")"]})]})}return jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$3,{}),label:(a==null?void 0:a.processing_status)==="failed"?"Processing failed":"Not available",color:"error",size:"small",sx:{mb:1}})};return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:w?"h4":"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:g.palette.primary.main},children:"Digital Library"}),jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:()=>A(!0),startIcon:jsxRuntimeExports.jsx(default_1$6,{}),sx:{mt:2,px:3,py:1.5,borderRadius:2,backgroundColor:g.palette.primary.main,"&:hover":{backgroundColor:g.palette.primary.dark}},children:"Upload PDFs"})]}),r&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:3},onClose:()=>S(null),children:r}),jsxRuntimeExports.jsx(Snackbar,{open:!!C,autoHideDuration:6e3,onClose:()=>N(""),message:C}),i?jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mt:4},children:jsxRuntimeExports.jsx(LinearProgress,{})}):jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:(t||[]).filter(a=>a&&typeof a=="object").map((a,u)=>{var m;return jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:a!=null&&a.available?"translateY(-4px)":"none",boxShadow:a!=null&&a.available?4:1},opacity:a!=null&&a.available?1:.7},children:[jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:a&&a.title||"Untitled Book"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Author: ",(a==null?void 0:a.author)||"Unknown"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Pages: ",(a==null?void 0:a.pages)||"?"]}),f(a),(a==null?void 0:a.processing_status)==="processing"&&jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:((m=o(a))==null?void 0:m.progress)||0,sx:{mt:1}})]}),jsxRuntimeExports.jsxs(CardActions,{sx:{padding:2,justifyContent:"space-between",backgroundColor:g.palette.background.paper,borderTop:1,borderColor:g.palette.divider},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>E(a),disabled:!(a!=null&&a.available),children:"Preview"}),jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$5,{}),onClick:()=>F(a),disabled:!(a!=null&&a.available),children:"Read"})]})]})},(a==null?void 0:a.id)||u)})}),!i&&(!t||t.length===0)&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:"No books in the library"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Start by uploading a PDF"})]}),jsxRuntimeExports.jsx(PDFUploadDialog,{open:I,onClose:()=>A(!1),onUpload:x}),p&&jsxRuntimeExports.jsx(PDFPreview,{open:v,onClose:()=>{b(!1),k(null)},pdfUrl:`/api/books/${p==null?void 0:p.filename}`,bookTitle:p&&p.title||"Untitled Book"})]})};export{HomePage as default};
//# sourceMappingURL=index-sVeN4X5X.js.map
