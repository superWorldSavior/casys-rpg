var Qn=Object.defineProperty;var vn=t=>{throw TypeError(t)};var Zn=(t,e,s)=>e in t?Qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Qe=(t,e,s)=>Zn(t,typeof e!="symbol"?e+"":e,s),Dt=(t,e,s)=>e.has(t)||vn("Cannot "+s);var i=(t,e,s)=>(Dt(t,e,"read from private field"),s?s.call(t):e.get(t)),ce=(t,e,s)=>e.has(t)?vn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),ue=(t,e,s,n)=>(Dt(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),ne=(t,e,s)=>(Dt(t,e,"access private method"),s);var ut=(t,e,s,n)=>({set _(r){ue(t,e,r,s)},get _(){return i(t,e,n)}});import{g as getDefaultExportFromCjs,u as useTheme$1,a as getThemeProps,r as reactExports,b as useEnhancedEffect,f as formatMuiErrorMessage,c as clamp,_ as _extends,h as handleBreakpoints,d as resolveBreakpointValues,e as createUnarySpacing,i as deepmerge,j as getValue,m as mergeBreakpointsInOrder,k as extendSxProp,l as _objectWithoutPropertiesLoose,n as composeClasses,o as generateUtilityClass,p as jsxRuntimeExports,q as clsx,s as styled,t as useThemeProps,v as createTheme,w as useForkRef,x as generateUtilityClasses,y as useDefaultProps,z as capitalize,A as styled$1,B as ButtonBase,C as alpha_1,D as createSvgIcon,P as Paper,E as darken_1,F as lighten_1,G as require$$1,H as ownerDocument,I as useEventCallback,J as useId,K as css,L as keyframes,M as useTimeout,N as emphasize_1,O as useControlled,T as Timeout,Q as useIsFocusVisible,R as interopRequireDefaultExports,S as requireCreateSvgIcon,U as getAugmentedNamespace,V as React$1,W as Box,X as Typography,Y as Button,Z as useNavigate,$ as Container,a0 as ErrorBoundary}from"./index-D4APUC03.js";import{r as resolveComponentProps,m as mergeSlotProps,a as appendOwnerState,P as Portal,u as useSlotProps,b as useTheme$2,F as Fade,M as Modal,B as Backdrop,e as extractEventHandlers,G as Grow,c as useRtl,d as default_1$7,f as default_1$8}from"./NavigateBefore-BqeFc4Sf.js";function _mergeNamespaces(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const y=Object.getOwnPropertyDescriptor(n,r);y&&Object.defineProperty(t,r,y.get?y:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function t(n,r,y,C,O,h){if(h!==ReactPropTypesSecret){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function useMediaQueryOld(t,e,s,n,r){const[y,C]=reactExports.useState(()=>r&&s?s(t).matches:n?n(t).matches:e);return useEnhancedEffect(()=>{let O=!0;if(!s)return;const h=s(t),v=()=>{O&&C(h.matches)};return v(),h.addListener(v),()=>{O=!1,h.removeListener(v)}},[t,s]),y}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(t,e,s,n,r){const y=reactExports.useCallback(()=>e,[e]),C=reactExports.useMemo(()=>{if(r&&s)return()=>s(t).matches;if(n!==null){const{matches:a}=n(t);return()=>a}return y},[y,t,n,r,s]),[O,h]=reactExports.useMemo(()=>{if(s===null)return[y,()=>()=>{}];const a=s(t);return[()=>a.matches,w=>(a.addListener(w),()=>{a.removeListener(w)})]},[y,s,t]);return maybeReactUseSyncExternalStore(h,O,C)}function useMediaQuery(t,e={}){const s=useTheme$1(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:r=!1,matchMedia:y=n?window.matchMedia:null,ssrMatchMedia:C=null,noSsr:O=!1}=getThemeProps({name:"MuiUseMediaQuery",props:e,theme:s});let h=typeof t=="function"?t(s):t;return h=h.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(h,r,y,C,O)}function clampWrapper(t,e=0,s=1){return clamp(t,e,s)}function hexToRgb(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let s=t.match(e);return s&&s[0].length===1&&(s=s.map(n=>n+n)),s?`rgb${s.length===4?"a":""}(${s.map((n,r)=>r<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(t){if(t.type)return t;if(t.charAt(0)==="#")return decomposeColor(hexToRgb(t));const e=t.indexOf("("),s=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error(formatMuiErrorMessage(9,t));let n=t.substring(e+1,t.length-1),r;if(s==="color"){if(n=n.split(" "),r=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error(formatMuiErrorMessage(10,r))}else n=n.split(",");return n=n.map(y=>parseFloat(y)),{type:s,values:n,colorSpace:r}}function recomposeColor(t){const{type:e,colorSpace:s}=t;let{values:n}=t;return e.indexOf("rgb")!==-1?n=n.map((r,y)=>y<3?parseInt(r,10):r):e.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.indexOf("color")!==-1?n=`${s} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function alpha(t,e){return t=decomposeColor(t),e=clampWrapper(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,recomposeColor(t)}const _excluded$h=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme=createTheme(),defaultCreateStyledComponent=styled("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme})}function joinChildren(t,e){const s=reactExports.Children.toArray(t).filter(Boolean);return s.reduce((n,r,y)=>(n.push(r),y<s.length-1&&n.push(reactExports.cloneElement(e,{key:`separator-${y}`})),n),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:e})=>{let s=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:e},resolveBreakpointValues({values:t.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(t.spacing){const n=createUnarySpacing(e),r=Object.keys(e.breakpoints.values).reduce((h,v)=>((typeof t.spacing=="object"&&t.spacing[v]!=null||typeof t.direction=="object"&&t.direction[v]!=null)&&(h[v]=!0),h),{}),y=resolveBreakpointValues({values:t.direction,base:r}),C=resolveBreakpointValues({values:t.spacing,base:r});typeof y=="object"&&Object.keys(y).forEach((h,v,a)=>{if(!y[h]){const k=v>0?y[a[v-1]]:"column";y[h]=k}}),s=deepmerge(s,handleBreakpoints({theme:e},C,(h,v)=>t.useFlexGap?{gap:getValue(n,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(v?y[v]:t.direction)}`]:getValue(n,h)}}))}return s=mergeBreakpointsInOrder(e.breakpoints,s),s};function createStack(t={}){const{createStyledComponent:e=defaultCreateStyledComponent,useThemeProps:s=useThemePropsDefault,componentName:n="MuiStack"}=t,r=()=>composeClasses({root:["root"]},h=>generateUtilityClass(n,h),{}),y=e(style);return reactExports.forwardRef(function(h,v){const a=s(h),w=extendSxProp(a),{component:k="div",direction:b="column",spacing:x=0,divider:P,children:A,className:g,useFlexGap:E=!1}=w,F=_objectWithoutPropertiesLoose(w,_excluded$h),S={direction:b,spacing:x,useFlexGap:E},o=r();return jsxRuntimeExports.jsx(y,_extends({as:k,ownerState:S,ref:v,className:clsx(o.root,g)},F,{children:P?joinChildren(A,P):A}))})}function getUnit(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(t){return parseFloat(t)}const _excluded$g=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_excluded2$2=["component","slots","slotProps"],_excluded3=["component"];function useSlot(t,e){const{className:s,elementType:n,ownerState:r,externalForwardedProps:y,getSlotOwnerState:C,internalForwardedProps:O}=e,h=_objectWithoutPropertiesLoose(e,_excluded$g),{component:v,slots:a={[t]:void 0},slotProps:w={[t]:void 0}}=y,k=_objectWithoutPropertiesLoose(y,_excluded2$2),b=a[t]||n,x=resolveComponentProps(w[t],r),P=mergeSlotProps(_extends({className:s},h,{externalForwardedProps:t==="root"?k:void 0,externalSlotProps:x})),{props:{component:A},internalRef:g}=P,E=_objectWithoutPropertiesLoose(P.props,_excluded3),F=useForkRef(g,x==null?void 0:x.ref,e.ref),S=C?C(E):{},o=_extends({},r,S),p=t==="root"?A||v:A,l=appendOwnerState(b,_extends({},t==="root"&&!v&&!a[t]&&O,t!=="root"&&!a[t]&&O,E,p&&{as:p},{ref:F}),o);return Object.keys(S).forEach(m=>{delete l[m]}),[b,l]}function getAlertUtilityClass(t){return generateUtilityClass("MuiAlert",t)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$f=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$e=t=>{const{classes:e,disabled:s,color:n,edge:r,size:y}=t,C={root:["root",s&&"disabled",n!=="default"&&`color${capitalize(n)}`,r&&`edge${capitalize(r)}`,`size${capitalize(y)}`]};return composeClasses(C,getIconButtonUtilityClass,e)},IconButtonRoot=styled$1(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.color!=="default"&&e[`color${capitalize(s.color)}`],s.edge&&e[`edge${capitalize(s.edge)}`],e[`size${capitalize(s.size)}`]]}})(({theme:t,ownerState:e})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var s;const n=(s=(t.vars||t).palette)==null?void 0:s[e.color];return _extends({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&_extends({color:n==null?void 0:n.main},!e.disableRipple&&{"&:hover":_extends({},n&&{backgroundColor:t.vars?`rgba(${n.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(n.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiIconButton"}),{edge:r=!1,children:y,className:C,color:O="default",disabled:h=!1,disableFocusRipple:v=!1,size:a="medium"}=n,w=_objectWithoutPropertiesLoose(n,_excluded$f),k=_extends({},n,{edge:r,color:O,disabled:h,disableFocusRipple:v,size:a}),b=useUtilityClasses$e(k);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(b.root,C),centerRipple:!0,focusRipple:!v,disabled:h,ref:s},w,{ownerState:k,children:y}))}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$e=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$d=t=>{const{variant:e,color:s,severity:n,classes:r}=t,y={root:["root",`color${capitalize(s||n)}`,`${e}${capitalize(s||n)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(y,getAlertUtilityClass,r)},AlertRoot=styled$1(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],e[`${s.variant}${capitalize(s.color||s.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?darken_1:lighten_1,s=t.palette.mode==="light"?lighten_1:darken_1;return _extends({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${n}StandardBg`]:s(t.palette[n].light,.9),[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${n}Color`]:e(t.palette[n].light,.6),border:`1px solid ${(t.vars||t).palette[n].light}`,[`& .${alertClasses.icon}`]:t.vars?{color:t.vars.palette.Alert[`${n}IconColor`]}:{color:t.palette[n].main}}})),...Object.entries(t.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:_extends({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${n}FilledColor`],backgroundColor:t.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}))]})}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiAlert"}),{action:r,children:y,className:C,closeText:O="Close",color:h,components:v={},componentsProps:a={},icon:w,iconMapping:k=defaultIconMapping,onClose:b,role:x="alert",severity:P="success",slotProps:A={},slots:g={},variant:E="standard"}=n,F=_objectWithoutPropertiesLoose(n,_excluded$e),S=_extends({},n,{color:h,severity:P,variant:E,colorSeverity:h||P}),o=useUtilityClasses$d(S),p={slots:_extends({closeButton:v.CloseButton,closeIcon:v.CloseIcon},g),slotProps:_extends({},a,A)},[l,m]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:p,ownerState:S}),[f,I]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:p,ownerState:S});return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:x,elevation:0,ownerState:S,className:clsx(o.root,C),ref:s},F,{children:[w!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:S,className:o.icon,children:w||k[P]||defaultIconMapping[P]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:S,className:o.message,children:y}),r!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:o.action,children:r}):null,r==null&&b?jsxRuntimeExports.jsx(AlertAction,{ownerState:S,className:o.action,children:jsxRuntimeExports.jsx(l,_extends({size:"small","aria-label":O,title:O,color:"inherit",onClick:b},m,{children:jsxRuntimeExports.jsx(f,_extends({fontSize:"small"},I))}))}):null]}))});var useThemeWithoutDefault={};Object.defineProperty(useThemeWithoutDefault,"__esModule",{value:!0});var default_1$6=useThemeWithoutDefault.default=void 0,React=_interopRequireWildcard(reactExports),_styledEngine=require$$1;function _getRequireWildcardCache(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(n){return n?s:e})(t)}function _interopRequireWildcard(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var s=_getRequireWildcardCache(e);if(s&&s.has(t))return s.get(t);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in t)if(y!=="default"&&Object.prototype.hasOwnProperty.call(t,y)){var C=r?Object.getOwnPropertyDescriptor(t,y):null;C&&(C.get||C.set)?Object.defineProperty(n,y,C):n[y]=t[y]}return n.default=t,s&&s.set(t,n),n}function isObjectEmpty(t){return Object.keys(t).length===0}function useTheme(t=null){const e=React.useContext(_styledEngine.ThemeContext);return!e||isObjectEmpty(e)?t:e}default_1$6=useThemeWithoutDefault.default=useTheme;var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,e){return t.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,e){return t.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function isElement(t){var e=getWindow(t).Element;return t instanceof e||t instanceof Element}function isHTMLElement$1(t){var e=getWindow(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var e=getWindow(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function applyStyles(t){var e=t.state;Object.keys(e.elements).forEach(function(s){var n=e.styles[s]||{},r=e.attributes[s]||{},y=e.elements[s];!isHTMLElement$1(y)||!getNodeName(y)||(Object.assign(y.style,n),Object.keys(r).forEach(function(C){var O=r[C];O===!1?y.removeAttribute(C):y.setAttribute(C,O===!0?"":O)}))})}function effect$2(t){var e=t.state,s={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,s.popper),e.styles=s,e.elements.arrow&&Object.assign(e.elements.arrow.style,s.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],y=e.attributes[n]||{},C=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:s[n]),O=C.reduce(function(h,v){return h[v]="",h},{});!isHTMLElement$1(r)||!getNodeName(r)||(Object.assign(r.style,O),Object.keys(y).forEach(function(h){r.removeAttribute(h)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);var n=t.getBoundingClientRect(),r=1,y=1;e&&isHTMLElement$1(t)&&(r=t.offsetWidth>0&&round$1(n.width)/t.offsetWidth||1,y=t.offsetHeight>0&&round$1(n.height)/t.offsetHeight||1);var C=isElement(t)?getWindow(t):window,O=C.visualViewport,h=!isLayoutViewport()&&s,v=(n.left+(h&&O?O.offsetLeft:0))/r,a=(n.top+(h&&O?O.offsetTop:0))/y,w=n.width/r,k=n.height/y;return{width:w,height:k,top:a,right:v+w,bottom:a+k,left:v,x:v,y:a}}function getLayoutRect(t){var e=getBoundingClientRect(t),s=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-s)<=1&&(s=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:s,height:n}}function contains(t,e){var s=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(s&&isShadowRoot(s)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$1(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var e=/firefox/i.test(getUAString()),s=/Trident/i.test(getUAString());if(s&&isHTMLElement$1(t)){var n=getComputedStyle$1(t);if(n.position==="fixed")return null}var r=getParentNode(t);for(isShadowRoot(r)&&(r=r.host);isHTMLElement$1(r)&&["html","body"].indexOf(getNodeName(r))<0;){var y=getComputedStyle$1(r);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||e&&y.willChange==="filter"||e&&y.filter&&y.filter!=="none")return r;r=r.parentNode}return null}function getOffsetParent(t){for(var e=getWindow(t),s=getTrueOffsetParent(t);s&&isTableElement(s)&&getComputedStyle$1(s).position==="static";)s=getTrueOffsetParent(s);return s&&(getNodeName(s)==="html"||getNodeName(s)==="body"&&getComputedStyle$1(s).position==="static")?e:s||getContainingBlock(t)||e}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,e,s){return max(t,min(e,s))}function withinMaxClamp(t,e,s){var n=within(t,e,s);return n>s?s:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,e){return e.reduce(function(s,n){return s[n]=t,s},{})}var toPaddingObject=function(e,s){return e=typeof e=="function"?e(Object.assign({},s.rects,{placement:s.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(t){var e,s=t.state,n=t.name,r=t.options,y=s.elements.arrow,C=s.modifiersData.popperOffsets,O=getBasePlacement(s.placement),h=getMainAxisFromPlacement(O),v=[left,right].indexOf(O)>=0,a=v?"height":"width";if(!(!y||!C)){var w=toPaddingObject(r.padding,s),k=getLayoutRect(y),b=h==="y"?top:left,x=h==="y"?bottom:right,P=s.rects.reference[a]+s.rects.reference[h]-C[h]-s.rects.popper[a],A=C[h]-s.rects.reference[h],g=getOffsetParent(y),E=g?h==="y"?g.clientHeight||0:g.clientWidth||0:0,F=P/2-A/2,S=w[b],o=E-k[a]-w[x],p=E/2-k[a]/2+F,l=within(S,p,o),m=h;s.modifiersData[n]=(e={},e[m]=l,e.centerOffset=l-p,e)}}function effect$1(t){var e=t.state,s=t.options,n=s.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||contains(e.elements.popper,r)&&(e.elements.arrow=r))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,e){var s=t.x,n=t.y,r=e.devicePixelRatio||1;return{x:round$1(s*r)/r||0,y:round$1(n*r)/r||0}}function mapToStyles(t){var e,s=t.popper,n=t.popperRect,r=t.placement,y=t.variation,C=t.offsets,O=t.position,h=t.gpuAcceleration,v=t.adaptive,a=t.roundOffsets,w=t.isFixed,k=C.x,b=k===void 0?0:k,x=C.y,P=x===void 0?0:x,A=typeof a=="function"?a({x:b,y:P}):{x:b,y:P};b=A.x,P=A.y;var g=C.hasOwnProperty("x"),E=C.hasOwnProperty("y"),F=left,S=top,o=window;if(v){var p=getOffsetParent(s),l="clientHeight",m="clientWidth";if(p===getWindow(s)&&(p=getDocumentElement(s),getComputedStyle$1(p).position!=="static"&&O==="absolute"&&(l="scrollHeight",m="scrollWidth")),p=p,r===top||(r===left||r===right)&&y===end){S=bottom;var f=w&&p===o&&o.visualViewport?o.visualViewport.height:p[l];P-=f-n.height,P*=h?1:-1}if(r===left||(r===top||r===bottom)&&y===end){F=right;var I=w&&p===o&&o.visualViewport?o.visualViewport.width:p[m];b-=I-n.width,b*=h?1:-1}}var c=Object.assign({position:O},v&&unsetSides),R=a===!0?roundOffsetsByDPR({x:b,y:P},getWindow(s)):{x:b,y:P};if(b=R.x,P=R.y,h){var L;return Object.assign({},c,(L={},L[S]=E?"0":"",L[F]=g?"0":"",L.transform=(o.devicePixelRatio||1)<=1?"translate("+b+"px, "+P+"px)":"translate3d("+b+"px, "+P+"px, 0)",L))}return Object.assign({},c,(e={},e[S]=E?P+"px":"",e[F]=g?b+"px":"",e.transform="",e))}function computeStyles(t){var e=t.state,s=t.options,n=s.gpuAcceleration,r=n===void 0?!0:n,y=s.adaptive,C=y===void 0?!0:y,O=s.roundOffsets,h=O===void 0?!0:O,v={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},v,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:C,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},v,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var e=t.state,s=t.instance,n=t.options,r=n.scroll,y=r===void 0?!0:r,C=n.resize,O=C===void 0?!0:C,h=getWindow(e.elements.popper),v=[].concat(e.scrollParents.reference,e.scrollParents.popper);return y&&v.forEach(function(a){a.addEventListener("scroll",s.update,passive)}),O&&h.addEventListener("resize",s.update,passive),function(){y&&v.forEach(function(a){a.removeEventListener("scroll",s.update,passive)}),O&&h.removeEventListener("resize",s.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(t){var e=getWindow(t),s=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:s,scrollTop:n}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,e){var s=getWindow(t),n=getDocumentElement(t),r=s.visualViewport,y=n.clientWidth,C=n.clientHeight,O=0,h=0;if(r){y=r.width,C=r.height;var v=isLayoutViewport();(v||!v&&e==="fixed")&&(O=r.offsetLeft,h=r.offsetTop)}return{width:y,height:C,x:O+getWindowScrollBarX(t),y:h}}function getDocumentRect(t){var e,s=getDocumentElement(t),n=getWindowScroll(t),r=(e=t.ownerDocument)==null?void 0:e.body,y=max(s.scrollWidth,s.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),C=max(s.scrollHeight,s.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),O=-n.scrollLeft+getWindowScrollBarX(t),h=-n.scrollTop;return getComputedStyle$1(r||s).direction==="rtl"&&(O+=max(s.clientWidth,r?r.clientWidth:0)-y),{width:y,height:C,x:O,y:h}}function isScrollParent(t){var e=getComputedStyle$1(t),s=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(s+r+n)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,e){var s;e===void 0&&(e=[]);var n=getScrollParent(t),r=n===((s=t.ownerDocument)==null?void 0:s.body),y=getWindow(n),C=r?[y].concat(y.visualViewport||[],isScrollParent(n)?n:[]):n,O=e.concat(C);return r?O:O.concat(listScrollParents(getParentNode(C)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,e){var s=getBoundingClientRect(t,!1,e==="fixed");return s.top=s.top+t.clientTop,s.left=s.left+t.clientLeft,s.bottom=s.top+t.clientHeight,s.right=s.left+t.clientWidth,s.width=t.clientWidth,s.height=t.clientHeight,s.x=s.left,s.y=s.top,s}function getClientRectFromMixedType(t,e,s){return e===viewport?rectToClientRect(getViewportRect(t,s)):isElement(e)?getInnerBoundingClientRect(e,s):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var e=listScrollParents(getParentNode(t)),s=["absolute","fixed"].indexOf(getComputedStyle$1(t).position)>=0,n=s&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(n)?e.filter(function(r){return isElement(r)&&contains(r,n)&&getNodeName(r)!=="body"}):[]}function getClippingRect(t,e,s,n){var r=e==="clippingParents"?getClippingParents(t):[].concat(e),y=[].concat(r,[s]),C=y[0],O=y.reduce(function(h,v){var a=getClientRectFromMixedType(t,v,n);return h.top=max(a.top,h.top),h.right=min(a.right,h.right),h.bottom=min(a.bottom,h.bottom),h.left=max(a.left,h.left),h},getClientRectFromMixedType(t,C,n));return O.width=O.right-O.left,O.height=O.bottom-O.top,O.x=O.left,O.y=O.top,O}function computeOffsets(t){var e=t.reference,s=t.element,n=t.placement,r=n?getBasePlacement(n):null,y=n?getVariation(n):null,C=e.x+e.width/2-s.width/2,O=e.y+e.height/2-s.height/2,h;switch(r){case top:h={x:C,y:e.y-s.height};break;case bottom:h={x:C,y:e.y+e.height};break;case right:h={x:e.x+e.width,y:O};break;case left:h={x:e.x-s.width,y:O};break;default:h={x:e.x,y:e.y}}var v=r?getMainAxisFromPlacement(r):null;if(v!=null){var a=v==="y"?"height":"width";switch(y){case start:h[v]=h[v]-(e[a]/2-s[a]/2);break;case end:h[v]=h[v]+(e[a]/2-s[a]/2);break}}return h}function detectOverflow(t,e){e===void 0&&(e={});var s=e,n=s.placement,r=n===void 0?t.placement:n,y=s.strategy,C=y===void 0?t.strategy:y,O=s.boundary,h=O===void 0?clippingParents:O,v=s.rootBoundary,a=v===void 0?viewport:v,w=s.elementContext,k=w===void 0?popper:w,b=s.altBoundary,x=b===void 0?!1:b,P=s.padding,A=P===void 0?0:P,g=mergePaddingObject(typeof A!="number"?A:expandToHashMap(A,basePlacements)),E=k===popper?reference:popper,F=t.rects.popper,S=t.elements[x?E:k],o=getClippingRect(isElement(S)?S:S.contextElement||getDocumentElement(t.elements.popper),h,a,C),p=getBoundingClientRect(t.elements.reference),l=computeOffsets({reference:p,element:F,placement:r}),m=rectToClientRect(Object.assign({},F,l)),f=k===popper?m:p,I={top:o.top-f.top+g.top,bottom:f.bottom-o.bottom+g.bottom,left:o.left-f.left+g.left,right:f.right-o.right+g.right},c=t.modifiersData.offset;if(k===popper&&c){var R=c[r];Object.keys(I).forEach(function(L){var Q=[right,bottom].indexOf(L)>=0?1:-1,G=[top,bottom].indexOf(L)>=0?"y":"x";I[L]+=R[G]*Q})}return I}function computeAutoPlacement(t,e){e===void 0&&(e={});var s=e,n=s.placement,r=s.boundary,y=s.rootBoundary,C=s.padding,O=s.flipVariations,h=s.allowedAutoPlacements,v=h===void 0?placements:h,a=getVariation(n),w=a?O?variationPlacements:variationPlacements.filter(function(x){return getVariation(x)===a}):basePlacements,k=w.filter(function(x){return v.indexOf(x)>=0});k.length===0&&(k=w);var b=k.reduce(function(x,P){return x[P]=detectOverflow(t,{placement:P,boundary:r,rootBoundary:y,padding:C})[getBasePlacement(P)],x},{});return Object.keys(b).sort(function(x,P){return b[x]-b[P]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var e=getOppositePlacement(t);return[getOppositeVariationPlacement(t),e,getOppositeVariationPlacement(e)]}function flip(t){var e=t.state,s=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=s.mainAxis,y=r===void 0?!0:r,C=s.altAxis,O=C===void 0?!0:C,h=s.fallbackPlacements,v=s.padding,a=s.boundary,w=s.rootBoundary,k=s.altBoundary,b=s.flipVariations,x=b===void 0?!0:b,P=s.allowedAutoPlacements,A=e.options.placement,g=getBasePlacement(A),E=g===A,F=h||(E||!x?[getOppositePlacement(A)]:getExpandedFallbackPlacements(A)),S=[A].concat(F).reduce(function(u,T){return u.concat(getBasePlacement(T)===auto?computeAutoPlacement(e,{placement:T,boundary:a,rootBoundary:w,padding:v,flipVariations:x,allowedAutoPlacements:P}):T)},[]),o=e.rects.reference,p=e.rects.popper,l=new Map,m=!0,f=S[0],I=0;I<S.length;I++){var c=S[I],R=getBasePlacement(c),L=getVariation(c)===start,Q=[top,bottom].indexOf(R)>=0,G=Q?"width":"height",q=detectOverflow(e,{placement:c,boundary:a,rootBoundary:w,altBoundary:k,padding:v}),V=Q?L?right:left:L?bottom:top;o[G]>p[G]&&(V=getOppositePlacement(V));var se=getOppositePlacement(V),D=[];if(y&&D.push(q[R]<=0),O&&D.push(q[V]<=0,q[se]<=0),D.every(function(u){return u})){f=c,m=!1;break}l.set(c,D)}if(m)for(var X=x?3:1,re=function(T){var $=S.find(function(U){var B=l.get(U);if(B)return B.slice(0,T).every(function(Y){return Y})});if($)return f=$,"break"},N=X;N>0;N--){var d=re(N);if(d==="break")break}e.placement!==f&&(e.modifiersData[n]._skip=!0,e.placement=f,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,e,s){return s===void 0&&(s={x:0,y:0}),{top:t.top-e.height-s.y,right:t.right-e.width+s.x,bottom:t.bottom-e.height+s.y,left:t.left-e.width-s.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(e){return t[e]>=0})}function hide(t){var e=t.state,s=t.name,n=e.rects.reference,r=e.rects.popper,y=e.modifiersData.preventOverflow,C=detectOverflow(e,{elementContext:"reference"}),O=detectOverflow(e,{altBoundary:!0}),h=getSideOffsets(C,n),v=getSideOffsets(O,r,y),a=isAnySideFullyClipped(h),w=isAnySideFullyClipped(v);e.modifiersData[s]={referenceClippingOffsets:h,popperEscapeOffsets:v,isReferenceHidden:a,hasPopperEscaped:w},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":w})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,e,s){var n=getBasePlacement(t),r=[left,top].indexOf(n)>=0?-1:1,y=typeof s=="function"?s(Object.assign({},e,{placement:t})):s,C=y[0],O=y[1];return C=C||0,O=(O||0)*r,[left,right].indexOf(n)>=0?{x:O,y:C}:{x:C,y:O}}function offset(t){var e=t.state,s=t.options,n=t.name,r=s.offset,y=r===void 0?[0,0]:r,C=placements.reduce(function(a,w){return a[w]=distanceAndSkiddingToXY(w,e.rects,y),a},{}),O=C[e.placement],h=O.x,v=O.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=v),e.modifiersData[n]=C}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var e=t.state,s=t.name;e.modifiersData[s]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var e=t.state,s=t.options,n=t.name,r=s.mainAxis,y=r===void 0?!0:r,C=s.altAxis,O=C===void 0?!1:C,h=s.boundary,v=s.rootBoundary,a=s.altBoundary,w=s.padding,k=s.tether,b=k===void 0?!0:k,x=s.tetherOffset,P=x===void 0?0:x,A=detectOverflow(e,{boundary:h,rootBoundary:v,padding:w,altBoundary:a}),g=getBasePlacement(e.placement),E=getVariation(e.placement),F=!E,S=getMainAxisFromPlacement(g),o=getAltAxis(S),p=e.modifiersData.popperOffsets,l=e.rects.reference,m=e.rects.popper,f=typeof P=="function"?P(Object.assign({},e.rects,{placement:e.placement})):P,I=typeof f=="number"?{mainAxis:f,altAxis:f}:Object.assign({mainAxis:0,altAxis:0},f),c=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(p){if(y){var L,Q=S==="y"?top:left,G=S==="y"?bottom:right,q=S==="y"?"height":"width",V=p[S],se=V+A[Q],D=V-A[G],X=b?-m[q]/2:0,re=E===start?l[q]:m[q],N=E===start?-m[q]:-l[q],d=e.elements.arrow,u=b&&d?getLayoutRect(d):{width:0,height:0},T=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),$=T[Q],U=T[G],B=within(0,l[q],u[q]),Y=F?l[q]/2-X-B-$-I.mainAxis:re-B-$-I.mainAxis,ie=F?-l[q]/2+X+B+U+I.mainAxis:N+B+U+I.mainAxis,le=e.elements.arrow&&getOffsetParent(e.elements.arrow),fe=le?S==="y"?le.clientTop||0:le.clientLeft||0:0,be=(L=c==null?void 0:c[S])!=null?L:0,me=V+Y-be-fe,ve=V+ie-be,Z=within(b?min(se,me):se,V,b?max(D,ve):D);p[S]=Z,R[S]=Z-V}if(O){var ee,M=S==="x"?top:left,H=S==="x"?bottom:right,J=p[o],oe=o==="y"?"height":"width",ge=J+A[M],Ae=J-A[H],_e=[top,left].indexOf(g)!==-1,te=(ee=c==null?void 0:c[o])!=null?ee:0,Pe=_e?ge:J-l[oe]-m[oe]-te+I.altAxis,Ce=_e?J+l[oe]+m[oe]-te-I.altAxis:Ae,Ue=b&&_e?withinMaxClamp(Pe,J,Ce):within(b?Pe:ge,J,b?Ce:Ae);p[o]=Ue,R[o]=Ue-J}e.modifiersData[n]=R}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var e=t.getBoundingClientRect(),s=round$1(e.width)/t.offsetWidth||1,n=round$1(e.height)/t.offsetHeight||1;return s!==1||n!==1}function getCompositeRect(t,e,s){s===void 0&&(s=!1);var n=isHTMLElement$1(e),r=isHTMLElement$1(e)&&isElementScaled(e),y=getDocumentElement(e),C=getBoundingClientRect(t,r,s),O={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!s)&&((getNodeName(e)!=="body"||isScrollParent(y))&&(O=getNodeScroll(e)),isHTMLElement$1(e)?(h=getBoundingClientRect(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):y&&(h.x=getWindowScrollBarX(y))),{x:C.left+O.scrollLeft-h.x,y:C.top+O.scrollTop-h.y,width:C.width,height:C.height}}function order(t){var e=new Map,s=new Set,n=[];t.forEach(function(y){e.set(y.name,y)});function r(y){s.add(y.name);var C=[].concat(y.requires||[],y.requiresIfExists||[]);C.forEach(function(O){if(!s.has(O)){var h=e.get(O);h&&r(h)}}),n.push(y)}return t.forEach(function(y){s.has(y.name)||r(y)}),n}function orderModifiers(t){var e=order(t);return modifierPhases.reduce(function(s,n){return s.concat(e.filter(function(r){return r.phase===n}))},[])}function debounce(t){var e;return function(){return e||(e=new Promise(function(s){Promise.resolve().then(function(){e=void 0,s(t())})})),e}}function mergeByName(t){var e=t.reduce(function(s,n){var r=s[n.name];return s[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,s},{});return Object.keys(e).map(function(s){return e[s]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var e=t,s=e.defaultModifiers,n=s===void 0?[]:s,r=e.defaultOptions,y=r===void 0?DEFAULT_OPTIONS:r;return function(O,h,v){v===void 0&&(v=y);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,y),modifiersData:{},elements:{reference:O,popper:h},attributes:{},styles:{}},w=[],k=!1,b={state:a,setOptions:function(g){var E=typeof g=="function"?g(a.options):g;P(),a.options=Object.assign({},y,a.options,E),a.scrollParents={reference:isElement(O)?listScrollParents(O):O.contextElement?listScrollParents(O.contextElement):[],popper:listScrollParents(h)};var F=orderModifiers(mergeByName([].concat(n,a.options.modifiers)));return a.orderedModifiers=F.filter(function(S){return S.enabled}),x(),b.update()},forceUpdate:function(){if(!k){var g=a.elements,E=g.reference,F=g.popper;if(areValidElements(E,F)){a.rects={reference:getCompositeRect(E,getOffsetParent(F),a.options.strategy==="fixed"),popper:getLayoutRect(F)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(I){return a.modifiersData[I.name]=Object.assign({},I.data)});for(var S=0;S<a.orderedModifiers.length;S++){if(a.reset===!0){a.reset=!1,S=-1;continue}var o=a.orderedModifiers[S],p=o.fn,l=o.options,m=l===void 0?{}:l,f=o.name;typeof p=="function"&&(a=p({state:a,options:m,name:f,instance:b})||a)}}}},update:debounce(function(){return new Promise(function(A){b.forceUpdate(),A(a)})}),destroy:function(){P(),k=!0}};if(!areValidElements(O,h))return b;b.setOptions(v).then(function(A){!k&&v.onFirstUpdate&&v.onFirstUpdate(A)});function x(){a.orderedModifiers.forEach(function(A){var g=A.name,E=A.options,F=E===void 0?{}:E,S=A.effect;if(typeof S=="function"){var o=S({state:a,name:g,instance:b,options:F}),p=function(){};w.push(o||p)}})}function P(){w.forEach(function(A){return A()}),w=[]}return b}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$d=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$1=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$c=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getPopperUtilityClass,e)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(e,s){var n;const{anchorEl:r,children:y,direction:C,disablePortal:O,modifiers:h,open:v,placement:a,popperOptions:w,popperRef:k,slotProps:b={},slots:x={},TransitionProps:P}=e,A=_objectWithoutPropertiesLoose(e,_excluded$d),g=reactExports.useRef(null),E=useForkRef(g,s),F=reactExports.useRef(null),S=useForkRef(F,k),o=reactExports.useRef(S);useEnhancedEffect(()=>{o.current=S},[S]),reactExports.useImperativeHandle(k,()=>F.current,[]);const p=flipPlacement(a,C),[l,m]=reactExports.useState(p),[f,I]=reactExports.useState(resolveAnchorEl(r));reactExports.useEffect(()=>{F.current&&F.current.forceUpdate()}),reactExports.useEffect(()=>{r&&I(resolveAnchorEl(r))},[r]),useEnhancedEffect(()=>{if(!f||!v)return;const G=se=>{m(se.placement)};let q=[{name:"preventOverflow",options:{altBoundary:O}},{name:"flip",options:{altBoundary:O}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:se})=>{G(se)}}];h!=null&&(q=q.concat(h)),w&&w.modifiers!=null&&(q=q.concat(w.modifiers));const V=createPopper(f,g.current,_extends({placement:p},w,{modifiers:q}));return o.current(V),()=>{V.destroy(),o.current(null)}},[f,O,h,v,w,p]);const c={placement:l};P!==null&&(c.TransitionProps=P);const R=useUtilityClasses$c(e),L=(n=x.root)!=null?n:"div",Q=useSlotProps({elementType:L,externalSlotProps:b.root,externalForwardedProps:A,additionalProps:{role:"tooltip",ref:E},ownerState:e,className:R.root});return jsxRuntimeExports.jsx(L,_extends({},Q,{children:typeof y=="function"?y(c):y}))}),Popper$1=reactExports.forwardRef(function(e,s){const{anchorEl:n,children:r,container:y,direction:C="ltr",disablePortal:O=!1,keepMounted:h=!1,modifiers:v,open:a,placement:w="bottom",popperOptions:k=defaultPopperOptions,popperRef:b,style:x,transition:P=!1,slotProps:A={},slots:g={}}=e,E=_objectWithoutPropertiesLoose(e,_excluded2$1),[F,S]=reactExports.useState(!0),o=()=>{S(!1)},p=()=>{S(!0)};if(!h&&!a&&(!P||F))return null;let l;if(y)l=y;else if(n){const I=resolveAnchorEl(n);l=I&&isHTMLElement(I)?ownerDocument(I).body:ownerDocument(null).body}const m=!a&&h&&(!P||F)?"none":void 0,f=P?{in:a,onEnter:o,onExited:p}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:O,container:l,children:jsxRuntimeExports.jsx(PopperTooltip,_extends({anchorEl:n,direction:C,disablePortal:O,modifiers:v,ref:s,open:P?!F:a,placement:w,popperOptions:k,popperRef:b,slotProps:A,slots:g},E,{style:_extends({position:"fixed",top:0,left:0,display:m},x),TransitionProps:f,children:r}))})}),_excluded$c=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled$1(Popper$1,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Popper=reactExports.forwardRef(function(e,s){var n;const r=default_1$6(),y=useDefaultProps({props:e,name:"MuiPopper"}),{anchorEl:C,component:O,components:h,componentsProps:v,container:a,disablePortal:w,keepMounted:k,modifiers:b,open:x,placement:P,popperOptions:A,popperRef:g,transition:E,slots:F,slotProps:S}=y,o=_objectWithoutPropertiesLoose(y,_excluded$c),p=(n=F==null?void 0:F.root)!=null?n:h==null?void 0:h.Root,l=_extends({anchorEl:C,container:a,disablePortal:w,keepMounted:k,modifiers:b,open:x,placement:P,popperOptions:A,popperRef:g,transition:E},o);return jsxRuntimeExports.jsx(PopperRoot,_extends({as:O,direction:r==null?void 0:r.direction,slots:{root:p},slotProps:S??v},l,{ref:s}))}),CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(t){return generateUtilityClass("MuiChip",t)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$b=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$b=t=>{const{classes:e,disabled:s,size:n,color:r,iconColor:y,onDelete:C,clickable:O,variant:h}=t,v={root:["root",h,s&&"disabled",`size${capitalize(n)}`,`color${capitalize(r)}`,O&&"clickable",O&&`clickableColor${capitalize(r)}`,C&&"deletable",C&&`deletableColor${capitalize(r)}`,`${h}${capitalize(r)}`],label:["label",`label${capitalize(n)}`],avatar:["avatar",`avatar${capitalize(n)}`,`avatarColor${capitalize(r)}`],icon:["icon",`icon${capitalize(n)}`,`iconColor${capitalize(y)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(n)}`,`deleteIconColor${capitalize(r)}`,`deleteIcon${capitalize(h)}Color${capitalize(r)}`]};return composeClasses(v,getChipUtilityClass,e)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{color:n,iconColor:r,clickable:y,onDelete:C,size:O,variant:h}=s;return[{[`& .${chipClasses.avatar}`]:e.avatar},{[`& .${chipClasses.avatar}`]:e[`avatar${capitalize(O)}`]},{[`& .${chipClasses.avatar}`]:e[`avatarColor${capitalize(n)}`]},{[`& .${chipClasses.icon}`]:e.icon},{[`& .${chipClasses.icon}`]:e[`icon${capitalize(O)}`]},{[`& .${chipClasses.icon}`]:e[`iconColor${capitalize(r)}`]},{[`& .${chipClasses.deleteIcon}`]:e.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(O)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIconColor${capitalize(n)}`]},{[`& .${chipClasses.deleteIcon}`]:e[`deleteIcon${capitalize(h)}Color${capitalize(n)}`]},e.root,e[`size${capitalize(O)}`],e[`color${capitalize(n)}`],y&&e.clickable,y&&n!=="default"&&e[`clickableColor${capitalize(n)})`],C&&e.deletable,C&&n!=="default"&&e[`deletableColor${capitalize(n)}`],e[h],e[`${h}${capitalize(n)}`]]}})(({theme:t,ownerState:e})=>{const s=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:s,fontSize:t.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&_extends({color:t.vars?t.vars.palette.Chip.defaultIconColor:s},e.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:alpha_1(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>_extends({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha_1(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>_extends({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:alpha_1(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:alpha_1(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:s}=t,{size:n}=s;return[e.label,e[`label${capitalize(n)}`]]}})(({ownerState:t})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(t){return t.key==="Backspace"||t.key==="Delete"}const Chip=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiChip"}),{avatar:r,className:y,clickable:C,color:O="default",component:h,deleteIcon:v,disabled:a=!1,icon:w,label:k,onClick:b,onDelete:x,onKeyDown:P,onKeyUp:A,size:g="medium",variant:E="filled",tabIndex:F,skipFocusWhenDisabled:S=!1}=n,o=_objectWithoutPropertiesLoose(n,_excluded$b),p=reactExports.useRef(null),l=useForkRef(p,s),m=D=>{D.stopPropagation(),x&&x(D)},f=D=>{D.currentTarget===D.target&&isDeleteKeyboardEvent(D)&&D.preventDefault(),P&&P(D)},I=D=>{D.currentTarget===D.target&&(x&&isDeleteKeyboardEvent(D)?x(D):D.key==="Escape"&&p.current&&p.current.blur()),A&&A(D)},c=C!==!1&&b?!0:C,R=c||x?ButtonBase:h||"div",L=_extends({},n,{component:R,disabled:a,size:g,color:O,iconColor:reactExports.isValidElement(w)&&w.props.color||O,onDelete:!!x,clickable:c,variant:E}),Q=useUtilityClasses$b(L),G=R===ButtonBase?_extends({component:h||"div",focusVisibleClassName:Q.focusVisible},x&&{disableRipple:!0}):{};let q=null;x&&(q=v&&reactExports.isValidElement(v)?reactExports.cloneElement(v,{className:clsx(v.props.className,Q.deleteIcon),onClick:m}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Q.deleteIcon),onClick:m}));let V=null;r&&reactExports.isValidElement(r)&&(V=reactExports.cloneElement(r,{className:clsx(Q.avatar,r.props.className)}));let se=null;return w&&reactExports.isValidElement(w)&&(se=reactExports.cloneElement(w,{className:clsx(Q.icon,w.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:R,className:clsx(Q.root,y),disabled:c&&a?!0:void 0,onClick:b,onKeyDown:f,onKeyUp:I,ref:l,tabIndex:S&&a?-1:F,ownerState:L},G,o,{children:[V||se,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Q.label),ownerState:L,children:k}),q]}))});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const _excluded$a=["className","raised"],useUtilityClasses$a=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardUtilityClass,e)},CardRoot=styled$1(Paper,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCard"}),{className:r,raised:y=!1}=n,C=_objectWithoutPropertiesLoose(n,_excluded$a),O=_extends({},n,{raised:y}),h=useUtilityClasses$a(O);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(h.root,r),elevation:y?8:void 0,ref:s,ownerState:O},C))});function getCardActionsUtilityClass(t){return generateUtilityClass("MuiCardActions",t)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$9=["disableSpacing","className"],useUtilityClasses$9=t=>{const{classes:e,disableSpacing:s}=t;return composeClasses({root:["root",!s&&"spacing"]},getCardActionsUtilityClass,e)},CardActionsRoot=styled$1("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,!s.disableSpacing&&e.spacing]}})(({ownerState:t})=>_extends({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),CardActions=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:y}=n,C=_objectWithoutPropertiesLoose(n,_excluded$9),O=_extends({},n,{disableSpacing:r}),h=useUtilityClasses$9(O);return jsxRuntimeExports.jsx(CardActionsRoot,_extends({className:clsx(h.root,y),ownerState:O,ref:s},C))});function getCardContentUtilityClass(t){return generateUtilityClass("MuiCardContent",t)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$8=["className","component"],useUtilityClasses$8=t=>{const{classes:e}=t;return composeClasses({root:["root"]},getCardContentUtilityClass,e)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardContent"}),{className:r,component:y="div"}=n,C=_objectWithoutPropertiesLoose(n,_excluded$8),O=_extends({},n,{component:y}),h=useUtilityClasses$8(O);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:y,className:clsx(h.root,r),ownerState:O,ref:s},C))});function getCardMediaUtilityClass(t){return generateUtilityClass("MuiCardMedia",t)}generateUtilityClasses("MuiCardMedia",["root","media","img"]);const _excluded$7=["children","className","component","image","src","style"],useUtilityClasses$7=t=>{const{classes:e,isMediaComponent:s,isImageComponent:n}=t;return composeClasses({root:["root",s&&"media",n&&"img"]},getCardMediaUtilityClass,e)},CardMediaRoot=styled$1("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{isMediaComponent:n,isImageComponent:r}=s;return[e.root,n&&e.media,r&&e.img]}})(({ownerState:t})=>_extends({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),MEDIA_COMPONENTS=["video","audio","picture","iframe","img"],IMAGE_COMPONENTS=["picture","img"],CardMedia=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiCardMedia"}),{children:r,className:y,component:C="div",image:O,src:h,style:v}=n,a=_objectWithoutPropertiesLoose(n,_excluded$7),w=MEDIA_COMPONENTS.indexOf(C)!==-1,k=!w&&O?_extends({backgroundImage:`url("${O}")`},v):v,b=_extends({},n,{component:C,isMediaComponent:w,isImageComponent:IMAGE_COMPONENTS.indexOf(C)!==-1}),x=useUtilityClasses$7(b);return jsxRuntimeExports.jsx(CardMediaRoot,_extends({className:clsx(x.root,y),as:C,role:!w&&O?"img":void 0,ref:s,style:k,ownerState:b,src:w?O||h:void 0},a,{children:r}))});function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:e,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:r,touchEvent:y="onTouchEnd"}=t,C=reactExports.useRef(!1),O=reactExports.useRef(null),h=reactExports.useRef(!1),v=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const a=useForkRef(e.ref,O),w=useEventCallback(x=>{const P=v.current;v.current=!1;const A=ownerDocument(O.current);if(!h.current||!O.current||"clientX"in x&&clickedRootScrollbar(x,A))return;if(C.current){C.current=!1;return}let g;x.composedPath?g=x.composedPath().indexOf(O.current)>-1:g=!A.documentElement.contains(x.target)||O.current.contains(x.target),!g&&(s||!P)&&r(x)}),k=x=>P=>{v.current=!0;const A=e.props[x];A&&A(P)},b={ref:a};return y!==!1&&(b[y]=k(y)),reactExports.useEffect(()=>{if(y!==!1){const x=mapEventPropToEvent(y),P=ownerDocument(O.current),A=()=>{C.current=!0};return P.addEventListener(x,w),P.addEventListener("touchmove",A),()=>{P.removeEventListener(x,w),P.removeEventListener("touchmove",A)}}},[w,y]),n!==!1&&(b[n]=k(n)),reactExports.useEffect(()=>{if(n!==!1){const x=mapEventPropToEvent(n),P=ownerDocument(O.current);return P.addEventListener(x,w),()=>{P.removeEventListener(x,w)}}},[w,n]),jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(e,b)})}function getDialogUtilityClass(t){return generateUtilityClass("MuiDialog",t)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),_excluded$6=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled$1(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),useUtilityClasses$6=t=>{const{classes:e,scroll:s,maxWidth:n,fullWidth:r,fullScreen:y}=t,C={root:["root"],container:["container",`scroll${capitalize(s)}`],paper:["paper",`paperScroll${capitalize(s)}`,`paperWidth${capitalize(String(n))}`,r&&"paperFullWidth",y&&"paperFullScreen"]};return composeClasses(C,getDialogUtilityClass,e)},DialogRoot=styled$1(Modal,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled$1("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.container,e[`scroll${capitalize(s.scroll)}`]]}})(({ownerState:t})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled$1(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.paper,e[`scrollPaper${capitalize(s.scroll)}`],e[`paperWidth${capitalize(String(s.maxWidth))}`],s.fullWidth&&e.paperFullWidth,s.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiDialog"}),r=useTheme$2(),y={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":C,"aria-labelledby":O,BackdropComponent:h,BackdropProps:v,children:a,className:w,disableEscapeKeyDown:k=!1,fullScreen:b=!1,fullWidth:x=!1,maxWidth:P="sm",onBackdropClick:A,onClick:g,onClose:E,open:F,PaperComponent:S=Paper,PaperProps:o={},scroll:p="paper",TransitionComponent:l=Fade,transitionDuration:m=y,TransitionProps:f}=n,I=_objectWithoutPropertiesLoose(n,_excluded$6),c=_extends({},n,{disableEscapeKeyDown:k,fullScreen:b,fullWidth:x,maxWidth:P,scroll:p}),R=useUtilityClasses$6(c),L=reactExports.useRef(),Q=se=>{L.current=se.target===se.currentTarget},G=se=>{g&&g(se),L.current&&(L.current=null,A&&A(se),E&&E(se,"backdropClick"))},q=useId(O),V=reactExports.useMemo(()=>({titleId:q}),[q]);return jsxRuntimeExports.jsx(DialogRoot,_extends({className:clsx(R.root,w),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:m,as:h},v)},disableEscapeKeyDown:k,onClose:E,open:F,ref:s,onClick:G,ownerState:c},I,{children:jsxRuntimeExports.jsx(l,_extends({appear:!0,in:F,timeout:m,role:"presentation"},f,{children:jsxRuntimeExports.jsx(DialogContainer,{className:clsx(R.container),onMouseDown:Q,ownerState:c,children:jsxRuntimeExports.jsx(DialogPaper,_extends({as:S,elevation:24,role:"dialog","aria-describedby":C,"aria-labelledby":q},o,{className:clsx(R.paper,o.className),ownerState:c,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:V,children:a})}))})}))}))});function getDialogContentUtilityClass(t){return generateUtilityClass("MuiDialogContent",t)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),_excluded$5=["className","dividers"],useUtilityClasses$5=t=>{const{classes:e,dividers:s}=t;return composeClasses({root:["root",s&&"dividers"]},getDialogContentUtilityClass,e)},DialogContentRoot=styled$1("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiDialogContent"}),{className:r,dividers:y=!1}=n,C=_objectWithoutPropertiesLoose(n,_excluded$5),O=_extends({},n,{dividers:y}),h=useUtilityClasses$5(O);return jsxRuntimeExports.jsx(DialogContentRoot,_extends({className:clsx(h.root,r),ownerState:O,ref:s},C))}),Stack=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),GridContext=reactExports.createContext();function getGridUtilityClass(t){return generateUtilityClass("MuiGrid",t)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(t=>`spacing-xs-${t}`),...DIRECTIONS.map(t=>`direction-xs-${t}`),...WRAPS.map(t=>`wrap-xs-${t}`),...GRID_SIZES.map(t=>`grid-xs-${t}`),...GRID_SIZES.map(t=>`grid-sm-${t}`),...GRID_SIZES.map(t=>`grid-md-${t}`),...GRID_SIZES.map(t=>`grid-lg-${t}`),...GRID_SIZES.map(t=>`grid-xl-${t}`)]),_excluded$4=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function generateGrid({theme:t,ownerState:e}){let s;return t.breakpoints.keys.reduce((n,r)=>{let y={};if(e[r]&&(s=e[r]),!s)return n;if(s===!0)y={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")y={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const C=resolveBreakpointValues({values:e.columns,breakpoints:t.breakpoints.values}),O=typeof C=="object"?C[r]:C;if(O==null)return n;const h=`${Math.round(s/O*1e8)/1e6}%`;let v={};if(e.container&&e.item&&e.columnSpacing!==0){const a=t.spacing(e.columnSpacing);if(a!=="0px"){const w=`calc(${h} + ${getOffset(a)})`;v={flexBasis:w,maxWidth:w}}}y=_extends({flexBasis:h,flexGrow:0,maxWidth:h},v)}return t.breakpoints.values[r]===0?Object.assign(n,y):n[t.breakpoints.up(r)]=y,n},{})}function generateDirection({theme:t,ownerState:e}){const s=resolveBreakpointValues({values:e.direction,breakpoints:t.breakpoints.values});return handleBreakpoints({theme:t},s,n=>{const r={flexDirection:n};return n.indexOf("column")===0&&(r[`& > .${gridClasses.item}`]={maxWidth:"none"}),r})}function extractZeroValueBreakpointKeys({breakpoints:t,values:e}){let s="";Object.keys(e).forEach(r=>{s===""&&e[r]!==0&&(s=r)});const n=Object.keys(t).sort((r,y)=>t[r]-t[y]);return n.slice(0,n.indexOf(s))}function generateRowGap({theme:t,ownerState:e}){const{container:s,rowSpacing:n}=e;let r={};if(s&&n!==0){const y=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let C;typeof y=="object"&&(C=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:y})),r=handleBreakpoints({theme:t},y,(O,h)=>{var v;const a=t.spacing(O);return a!=="0px"?{marginTop:`-${getOffset(a)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(a)}}:(v=C)!=null&&v.includes(h)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return r}function generateColumnGap({theme:t,ownerState:e}){const{container:s,columnSpacing:n}=e;let r={};if(s&&n!==0){const y=resolveBreakpointValues({values:n,breakpoints:t.breakpoints.values});let C;typeof y=="object"&&(C=extractZeroValueBreakpointKeys({breakpoints:t.breakpoints.values,values:y})),r=handleBreakpoints({theme:t},y,(O,h)=>{var v;const a=t.spacing(O);return a!=="0px"?{width:`calc(100% + ${getOffset(a)})`,marginLeft:`-${getOffset(a)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(a)}}:(v=C)!=null&&v.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return r}function resolveSpacingStyles(t,e,s={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[s[`spacing-xs-${String(t)}`]];const n=[];return e.forEach(r=>{const y=t[r];Number(y)>0&&n.push(s[`spacing-${r}-${String(y)}`])}),n}const GridRoot=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t,{container:n,direction:r,item:y,spacing:C,wrap:O,zeroMinWidth:h,breakpoints:v}=s;let a=[];n&&(a=resolveSpacingStyles(C,v,e));const w=[];return v.forEach(k=>{const b=s[k];b&&w.push(e[`grid-${k}-${String(b)}`])}),[e.root,n&&e.container,y&&e.item,h&&e.zeroMinWidth,...a,r!=="row"&&e[`direction-xs-${String(r)}`],O!=="wrap"&&e[`wrap-xs-${String(O)}`],...w]}})(({ownerState:t})=>_extends({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const s=[];return e.forEach(n=>{const r=t[n];if(Number(r)>0){const y=`spacing-${n}-${String(r)}`;s.push(y)}}),s}const useUtilityClasses$4=t=>{const{classes:e,container:s,direction:n,item:r,spacing:y,wrap:C,zeroMinWidth:O,breakpoints:h}=t;let v=[];s&&(v=resolveSpacingClasses(y,h));const a=[];h.forEach(k=>{const b=t[k];b&&a.push(`grid-${k}-${String(b)}`)});const w={root:["root",s&&"container",r&&"item",O&&"zeroMinWidth",...v,n!=="row"&&`direction-xs-${String(n)}`,C!=="wrap"&&`wrap-xs-${String(C)}`,...a]};return composeClasses(w,getGridUtilityClass,e)},Grid=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiGrid"}),{breakpoints:r}=useTheme$2(),y=extendSxProp(n),{className:C,columns:O,columnSpacing:h,component:v="div",container:a=!1,direction:w="row",item:k=!1,rowSpacing:b,spacing:x=0,wrap:P="wrap",zeroMinWidth:A=!1}=y,g=_objectWithoutPropertiesLoose(y,_excluded$4),E=b||x,F=h||x,S=reactExports.useContext(GridContext),o=a?O||12:S,p={},l=_extends({},g);r.keys.forEach(I=>{g[I]!=null&&(p[I]=g[I],delete l[I])});const m=_extends({},y,{columns:o,container:a,direction:w,item:k,rowSpacing:E,columnSpacing:F,wrap:P,zeroMinWidth:A,spacing:x},p,{breakpoints:r.keys}),f=useUtilityClasses$4(m);return jsxRuntimeExports.jsx(GridContext.Provider,{value:o,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:m,className:clsx(f.root,C),as:v,ref:s},l))})});function getSkeletonUtilityClass(t){return generateUtilityClass("MuiSkeleton",t)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const _excluded$3=["animation","className","component","height","style","variant","width"];let _=t=>t,_t,_t2,_t3,_t4;const useUtilityClasses$3=t=>{const{classes:e,variant:s,animation:n,hasChildren:r,width:y,height:C}=t;return composeClasses({root:["root",s,n,r&&"withChildren",r&&!y&&"fitContent",r&&!C&&"heightAuto"]},getSkeletonUtilityClass,e)},pulseKeyframe=keyframes(_t||(_t=_`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),waveKeyframe=keyframes(_t2||(_t2=_`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),SkeletonRoot=styled$1("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],s.animation!==!1&&e[s.animation],s.hasChildren&&e.withChildren,s.hasChildren&&!s.width&&e.fitContent,s.hasChildren&&!s.height&&e.heightAuto]}})(({theme:t,ownerState:e})=>{const s=getUnit(t.shape.borderRadius)||"px",n=toUnitless(t.shape.borderRadius);return _extends({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:alpha(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em"},e.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${s}/${Math.round(n/.6*10)/10}${s}`,"&:empty:before":{content:'"\\00a0"'}},e.variant==="circular"&&{borderRadius:"50%"},e.variant==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius},e.hasChildren&&{"& > *":{visibility:"hidden"}},e.hasChildren&&!e.width&&{maxWidth:"fit-content"},e.hasChildren&&!e.height&&{height:"auto"})},({ownerState:t})=>t.animation==="pulse"&&css(_t3||(_t3=_`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),pulseKeyframe),({ownerState:t,theme:e})=>t.animation==="wave"&&css(_t4||(_t4=_`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),waveKeyframe,(e.vars||e).palette.action.hover)),Skeleton=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:y,component:C="span",height:O,style:h,variant:v="text",width:a}=n,w=_objectWithoutPropertiesLoose(n,_excluded$3),k=_extends({},n,{animation:r,component:C,variant:v,hasChildren:!!w.children}),b=useUtilityClasses$3(k);return jsxRuntimeExports.jsx(SkeletonRoot,_extends({as:C,ref:s,className:clsx(b.root,y),ownerState:k},w,{style:_extends({width:a,height:O},h)}))});function useSnackbar(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:s=!1,onClose:n,open:r,resumeHideDuration:y}=t,C=useTimeout();reactExports.useEffect(()=>{if(!r)return;function g(E){E.defaultPrevented||(E.key==="Escape"||E.key==="Esc")&&(n==null||n(E,"escapeKeyDown"))}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[r,n]);const O=useEventCallback((g,E)=>{n==null||n(g,E)}),h=useEventCallback(g=>{!n||g==null||C.start(g,()=>{O(null,"timeout")})});reactExports.useEffect(()=>(r&&h(e),C.clear),[r,e,h,C]);const v=g=>{n==null||n(g,"clickaway")},a=C.clear,w=reactExports.useCallback(()=>{e!=null&&h(y??e*.5)},[e,y,h]),k=g=>E=>{const F=g.onBlur;F==null||F(E),w()},b=g=>E=>{const F=g.onFocus;F==null||F(E),a()},x=g=>E=>{const F=g.onMouseEnter;F==null||F(E),a()},P=g=>E=>{const F=g.onMouseLeave;F==null||F(E),w()};return reactExports.useEffect(()=>{if(!s&&r)return window.addEventListener("focus",w),window.addEventListener("blur",a),()=>{window.removeEventListener("focus",w),window.removeEventListener("blur",a)}},[s,r,w,a]),{getRootProps:(g={})=>{const E=_extends({},extractEventHandlers(t),extractEventHandlers(g));return _extends({role:"presentation"},g,E,{onBlur:k(E),onFocus:b(E),onMouseEnter:x(E),onMouseLeave:P(E)})},onClickAway:v}}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$2=["action","className","message","role"],useUtilityClasses$2=t=>{const{classes:e}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,e)},SnackbarContentRoot=styled$1(Paper,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,s=emphasize_1(t.palette.background.default,e);return _extends({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(s),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:s,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled$1("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),SnackbarContentAction=styled$1("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiSnackbarContent"}),{action:r,className:y,message:C,role:O="alert"}=n,h=_objectWithoutPropertiesLoose(n,_excluded$2),v=n,a=useUtilityClasses$2(v);return jsxRuntimeExports.jsxs(SnackbarContentRoot,_extends({role:O,square:!0,elevation:6,className:clsx(a.root,y),ownerState:v,ref:s},h,{children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:a.message,ownerState:v,children:C}),r?jsxRuntimeExports.jsx(SnackbarContentAction,{className:a.action,ownerState:v,children:r}):null]}))});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded$1=["onEnter","onExited"],_excluded2=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses$1=t=>{const{classes:e,anchorOrigin:s}=t,n={root:["root",`anchorOrigin${capitalize(s.vertical)}${capitalize(s.horizontal)}`]};return composeClasses(n,getSnackbarUtilityClass,e)},SnackbarRoot=styled$1("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[`anchorOrigin${capitalize(s.anchorOrigin.vertical)}${capitalize(s.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const s={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:_extends({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&s,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(e,s){const n=useDefaultProps({props:e,name:"MuiSnackbar"}),r=useTheme$2(),y={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:C,anchorOrigin:{vertical:O,horizontal:h}={vertical:"bottom",horizontal:"left"},autoHideDuration:v=null,children:a,className:w,ClickAwayListenerProps:k,ContentProps:b,disableWindowBlurListener:x=!1,message:P,open:A,TransitionComponent:g=Grow,transitionDuration:E=y,TransitionProps:{onEnter:F,onExited:S}={}}=n,o=_objectWithoutPropertiesLoose(n.TransitionProps,_excluded$1),p=_objectWithoutPropertiesLoose(n,_excluded2),l=_extends({},n,{anchorOrigin:{vertical:O,horizontal:h},autoHideDuration:v,disableWindowBlurListener:x,TransitionComponent:g,transitionDuration:E}),m=useUtilityClasses$1(l),{getRootProps:f,onClickAway:I}=useSnackbar(_extends({},l)),[c,R]=reactExports.useState(!0),L=useSlotProps({elementType:SnackbarRoot,getSlotProps:f,externalForwardedProps:p,ownerState:l,additionalProps:{ref:s},className:[m.root,w]}),Q=q=>{R(!0),S&&S(q)},G=(q,V)=>{R(!1),F&&F(q,V)};return!A&&c?null:jsxRuntimeExports.jsx(ClickAwayListener,_extends({onClickAway:I},k,{children:jsxRuntimeExports.jsx(SnackbarRoot,_extends({},L,{children:jsxRuntimeExports.jsx(g,_extends({appear:!0,in:A,timeout:E,direction:O==="top"?"down":"up",onEnter:G,onExited:Q},o,{children:a||jsxRuntimeExports.jsx(SnackbarContent,_extends({message:P,action:C},b))}))}))}))});function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),_excluded=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(t){return Math.round(t*1e5)/1e5}const useUtilityClasses=t=>{const{classes:e,disableInteractive:s,arrow:n,touch:r,placement:y}=t,C={popper:["popper",!s&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",r&&"touch",`tooltipPlacement${capitalize(y.split("-")[0])}`],arrow:["arrow"]};return composeClasses(C,getTooltipUtilityClass,e)},TooltipPopper=styled$1(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.popper,!s.disableInteractive&&e.popperInteractive,s.arrow&&e.popperArrow,!s.open&&e.popperClose]}})(({theme:t,ownerState:e,open:s})=>_extends({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!s&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:_extends({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:_extends({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.tooltip,s.touch&&e.touch,s.arrow&&e.tooltipArrow,e[`tooltipPlacement${capitalize(s.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>_extends({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:alpha_1(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},e.isRtl?_extends({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},e.isRtl?_extends({marginRight:"14px"},e.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:alpha_1(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,e){return(s,...n)=>{e&&e(s,...n),t(s,...n)}}const Tooltip=reactExports.forwardRef(function(e,s){var n,r,y,C,O,h,v,a,w,k,b,x,P,A,g,E,F,S,o;const p=useDefaultProps({props:e,name:"MuiTooltip"}),{arrow:l=!1,children:m,components:f={},componentsProps:I={},describeChild:c=!1,disableFocusListener:R=!1,disableHoverListener:L=!1,disableInteractive:Q=!1,disableTouchListener:G=!1,enterDelay:q=100,enterNextDelay:V=0,enterTouchDelay:se=700,followCursor:D=!1,id:X,leaveDelay:re=0,leaveTouchDelay:N=1500,onClose:d,onOpen:u,open:T,placement:$="bottom",PopperComponent:U,PopperProps:B={},slotProps:Y={},slots:ie={},title:le,TransitionComponent:fe=Grow,TransitionProps:be}=p,me=_objectWithoutPropertiesLoose(p,_excluded),ve=reactExports.isValidElement(m)?m:jsxRuntimeExports.jsx("span",{children:m}),Z=useTheme$2(),ee=useRtl(),[M,H]=reactExports.useState(),[J,oe]=reactExports.useState(null),ge=reactExports.useRef(!1),Ae=Q||D,_e=useTimeout(),te=useTimeout(),Pe=useTimeout(),Ce=useTimeout(),[Ue,$e]=useControlled({controlled:T,default:!1,name:"Tooltip",state:"open"});let He=Ue;const ke=useId(X),Oe=reactExports.useRef(),ze=useEventCallback(()=>{Oe.current!==void 0&&(document.body.style.WebkitUserSelect=Oe.current,Oe.current=void 0),Ce.clear()});reactExports.useEffect(()=>ze,[ze]);const Xe=Ye=>{hystersisTimer.clear(),hystersisOpen=!0,$e(!0),u&&!He&&u(Ye)},Ee=useEventCallback(Ye=>{hystersisTimer.start(800+re,()=>{hystersisOpen=!1}),$e(!1),d&&He&&d(Ye),_e.start(Z.transitions.duration.shortest,()=>{ge.current=!1})}),ae=Ye=>{ge.current&&Ye.type!=="touchstart"||(M&&M.removeAttribute("title"),te.clear(),Pe.clear(),q||hystersisOpen&&V?te.start(hystersisOpen?V:q,()=>{Xe(Ye)}):Xe(Ye))},de=Ye=>{te.clear(),Pe.start(re,()=>{Ee(Ye)})},{isFocusVisibleRef:Me,onBlur:qe,onFocus:Ge,ref:z}=useIsFocusVisible(),[,ye]=reactExports.useState(!1),we=Ye=>{qe(Ye),Me.current===!1&&(ye(!1),de(Ye))},Ie=Ye=>{M||H(Ye.currentTarget),Ge(Ye),Me.current===!0&&(ye(!0),ae(Ye))},je=Ye=>{ge.current=!0;const et=ve.props;et.onTouchStart&&et.onTouchStart(Ye)},Re=Ye=>{je(Ye),Pe.clear(),_e.clear(),ze(),Oe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ce.start(se,()=>{document.body.style.WebkitUserSelect=Oe.current,ae(Ye)})},W=Ye=>{ve.props.onTouchEnd&&ve.props.onTouchEnd(Ye),ze(),Pe.start(N,()=>{Ee(Ye)})};reactExports.useEffect(()=>{if(!He)return;function Ye(et){(et.key==="Escape"||et.key==="Esc")&&Ee(et)}return document.addEventListener("keydown",Ye),()=>{document.removeEventListener("keydown",Ye)}},[Ee,He]);const j=useForkRef(ve.ref,z,H,s);!le&&le!==0&&(He=!1);const K=reactExports.useRef(),he=Ye=>{const et=ve.props;et.onMouseMove&&et.onMouseMove(Ye),cursorPosition={x:Ye.clientX,y:Ye.clientY},K.current&&K.current.update()},pe={},xe=typeof le=="string";c?(pe.title=!He&&xe&&!L?le:null,pe["aria-describedby"]=He?ke:null):(pe["aria-label"]=xe?le:null,pe["aria-labelledby"]=He&&!xe?ke:null);const Se=_extends({},pe,me,ve.props,{className:clsx(me.className,ve.props.className),onTouchStart:je,ref:j},D?{onMouseMove:he}:{}),Fe={};G||(Se.onTouchStart=Re,Se.onTouchEnd=W),L||(Se.onMouseOver=composeEventHandler(ae,Se.onMouseOver),Se.onMouseLeave=composeEventHandler(de,Se.onMouseLeave),Ae||(Fe.onMouseOver=ae,Fe.onMouseLeave=de)),R||(Se.onFocus=composeEventHandler(Ie,Se.onFocus),Se.onBlur=composeEventHandler(we,Se.onBlur),Ae||(Fe.onFocus=Ie,Fe.onBlur=we));const De=reactExports.useMemo(()=>{var Ye;let et=[{name:"arrow",enabled:!!J,options:{element:J,padding:4}}];return(Ye=B.popperOptions)!=null&&Ye.modifiers&&(et=et.concat(B.popperOptions.modifiers)),_extends({},B.popperOptions,{modifiers:et})},[J,B]),Te=_extends({},p,{isRtl:ee,arrow:l,disableInteractive:Ae,placement:$,PopperComponentProp:U,touch:ge.current}),We=useUtilityClasses(Te),Le=(n=(r=ie.popper)!=null?r:f.Popper)!=null?n:TooltipPopper,Ne=(y=(C=(O=ie.transition)!=null?O:f.Transition)!=null?C:fe)!=null?y:Grow,Be=(h=(v=ie.tooltip)!=null?v:f.Tooltip)!=null?h:TooltipTooltip,Ve=(a=(w=ie.arrow)!=null?w:f.Arrow)!=null?a:TooltipArrow,Ke=appendOwnerState(Le,_extends({},B,(k=Y.popper)!=null?k:I.popper,{className:clsx(We.popper,B==null?void 0:B.className,(b=(x=Y.popper)!=null?x:I.popper)==null?void 0:b.className)}),Te),Je=appendOwnerState(Ne,_extends({},be,(P=Y.transition)!=null?P:I.transition),Te),tt=appendOwnerState(Be,_extends({},(A=Y.tooltip)!=null?A:I.tooltip,{className:clsx(We.tooltip,(g=(E=Y.tooltip)!=null?E:I.tooltip)==null?void 0:g.className)}),Te),Ze=appendOwnerState(Ve,_extends({},(F=Y.arrow)!=null?F:I.arrow,{className:clsx(We.arrow,(S=(o=Y.arrow)!=null?o:I.arrow)==null?void 0:S.className)}),Te);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(ve,Se),jsxRuntimeExports.jsx(Le,_extends({as:U??Popper,placement:$,anchorEl:D?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:M,popperRef:K,open:M?He:!1,id:ke,transition:!0},Fe,Ke,{popperOptions:De,children:({TransitionProps:Ye})=>jsxRuntimeExports.jsx(Ne,_extends({timeout:Z.transitions.duration.shorter},Ye,Je,{children:jsxRuntimeExports.jsxs(Be,_extends({},tt,{children:[le,l?jsxRuntimeExports.jsx(Ve,_extends({},Ze,{ref:oe})):null]}))}))}))]})});var CloudUpload={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1$5=CloudUpload.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=CloudUpload.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var MenuBook={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(MenuBook,"__esModule",{value:!0});var default_1$4=MenuBook.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=MenuBook.default=(0,_createSvgIcon$4.default)([(0,_jsxRuntime$4.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,_jsxRuntime$4.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");var Preview={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Preview,"__esModule",{value:!0});var default_1$3=Preview.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=Preview.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var Image$1={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Image$1,"__esModule",{value:!0});var default_1$2=Image$1.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=Image$1.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");var Article={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Article,"__esModule",{value:!0});var default_1$1=Article.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Article.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Xe;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=D,e.bytesToString=le,e.createValidAbsoluteUrl=re,e.getModificationDate=Ce,e.getUuid=Oe,e.getVerbosityLevel=G,e.info=q,e.isArrayBuffer=te,e.isArrayEqual=Pe,e.isNodeJS=void 0,e.normalizeUnicode=ke,e.objectFromMap=ve,e.objectSize=me,e.setVerbosityLevel=Q,e.shadow=N,e.string32=be,e.stringToBytes=fe,e.stringToPDFString=ge,e.stringToUTF8String=Ae,e.unreachable=se,e.utf8StringToString=_e,e.warn=V;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const r=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=r;const y=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=y;const C=1.35;e.LINE_FACTOR=C;const O=.35;e.LINE_DESCENT_FACTOR=O;const h=O/C;e.BASELINE_FACTOR=h;const v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=v;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=a;const w="pdfjs_internal_editor_";e.AnnotationEditorPrefix=w;const k={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=k;const b={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=b;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=x;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=P;const A={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=A;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=g;const E={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=E;const F={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=F;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=S;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=o;const p={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=p;const l={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=l;const m={O:"PageOpen",C:"PageClose"};e.PageActionEventType=m;const f={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=f;const I={NONE:0,BINARY:1};e.CMapCompressionType=I;const c={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=c;const R={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=R;let L=f.WARNINGS;function Q(Ee){Number.isInteger(Ee)&&(L=Ee)}function G(){return L}function q(Ee){L>=f.INFOS&&console.log(`Info: ${Ee}`)}function V(Ee){L>=f.WARNINGS&&console.log(`Warning: ${Ee}`)}function se(Ee){throw new Error(Ee)}function D(Ee,ae){Ee||se(ae)}function X(Ee){switch(Ee==null?void 0:Ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function re(Ee,ae=null,de=null){if(!Ee)return null;try{if(de&&typeof Ee=="string"){if(de.addDefaultProtocol&&Ee.startsWith("www.")){const qe=Ee.match(/\./g);(qe==null?void 0:qe.length)>=2&&(Ee=`http://${Ee}`)}if(de.tryConvertEncoding)try{Ee=Ae(Ee)}catch{}}const Me=ae?new URL(Ee,ae):new URL(Ee);if(X(Me))return Me}catch{}return null}function N(Ee,ae,de,Me=!1){return Object.defineProperty(Ee,ae,{value:de,enumerable:!Me,configurable:!0,writable:!1}),de}const d=function(){function ae(de,Me){this.constructor===ae&&se("Cannot initialize BaseException."),this.message=de,this.name=Me}return ae.prototype=new Error,ae.constructor=ae,ae}();e.BaseException=d;class u extends d{constructor(ae,de){super(ae,"PasswordException"),this.code=de}}e.PasswordException=u;class T extends d{constructor(ae,de){super(ae,"UnknownErrorException"),this.details=de}}e.UnknownErrorException=T;class $ extends d{constructor(ae){super(ae,"InvalidPDFException")}}e.InvalidPDFException=$;class U extends d{constructor(ae){super(ae,"MissingPDFException")}}e.MissingPDFException=U;class B extends d{constructor(ae,de){super(ae,"UnexpectedResponseException"),this.status=de}}e.UnexpectedResponseException=B;class Y extends d{constructor(ae){super(ae,"FormatError")}}e.FormatError=Y;class ie extends d{constructor(ae){super(ae,"AbortException")}}e.AbortException=ie;function le(Ee){(typeof Ee!="object"||(Ee==null?void 0:Ee.length)===void 0)&&se("Invalid argument for bytesToString");const ae=Ee.length,de=8192;if(ae<de)return String.fromCharCode.apply(null,Ee);const Me=[];for(let qe=0;qe<ae;qe+=de){const Ge=Math.min(qe+de,ae),z=Ee.subarray(qe,Ge);Me.push(String.fromCharCode.apply(null,z))}return Me.join("")}function fe(Ee){typeof Ee!="string"&&se("Invalid argument for stringToBytes");const ae=Ee.length,de=new Uint8Array(ae);for(let Me=0;Me<ae;++Me)de[Me]=Ee.charCodeAt(Me)&255;return de}function be(Ee){return String.fromCharCode(Ee>>24&255,Ee>>16&255,Ee>>8&255,Ee&255)}function me(Ee){return Object.keys(Ee).length}function ve(Ee){const ae=Object.create(null);for(const[de,Me]of Ee)ae[de]=Me;return ae}function Z(){const Ee=new Uint8Array(4);return Ee[0]=1,new Uint32Array(Ee.buffer,0,1)[0]===1}function ee(){try{return new Function(""),!0}catch{return!1}}class M{static get isLittleEndian(){return N(this,"isLittleEndian",Z())}static get isEvalSupported(){return N(this,"isEvalSupported",ee())}static get isOffscreenCanvasSupported(){return N(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?N(this,"platform",{isWin:!1,isMac:!1}):N(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ae,de;return N(this,"isCSSRoundSupported",(de=(ae=globalThis.CSS)==null?void 0:ae.supports)==null?void 0:de.call(ae,"width: round(1.5px, 1px)"))}}e.FeatureTest=M;const H=[...Array(256).keys()].map(Ee=>Ee.toString(16).padStart(2,"0"));class J{static makeHexColor(ae,de,Me){return`#${H[ae]}${H[de]}${H[Me]}`}static scaleMinMax(ae,de){let Me;ae[0]?(ae[0]<0&&(Me=de[0],de[0]=de[1],de[1]=Me),de[0]*=ae[0],de[1]*=ae[0],ae[3]<0&&(Me=de[2],de[2]=de[3],de[3]=Me),de[2]*=ae[3],de[3]*=ae[3]):(Me=de[0],de[0]=de[2],de[2]=Me,Me=de[1],de[1]=de[3],de[3]=Me,ae[1]<0&&(Me=de[2],de[2]=de[3],de[3]=Me),de[2]*=ae[1],de[3]*=ae[1],ae[2]<0&&(Me=de[0],de[0]=de[1],de[1]=Me),de[0]*=ae[2],de[1]*=ae[2]),de[0]+=ae[4],de[1]+=ae[4],de[2]+=ae[5],de[3]+=ae[5]}static transform(ae,de){return[ae[0]*de[0]+ae[2]*de[1],ae[1]*de[0]+ae[3]*de[1],ae[0]*de[2]+ae[2]*de[3],ae[1]*de[2]+ae[3]*de[3],ae[0]*de[4]+ae[2]*de[5]+ae[4],ae[1]*de[4]+ae[3]*de[5]+ae[5]]}static applyTransform(ae,de){const Me=ae[0]*de[0]+ae[1]*de[2]+de[4],qe=ae[0]*de[1]+ae[1]*de[3]+de[5];return[Me,qe]}static applyInverseTransform(ae,de){const Me=de[0]*de[3]-de[1]*de[2],qe=(ae[0]*de[3]-ae[1]*de[2]+de[2]*de[5]-de[4]*de[3])/Me,Ge=(-ae[0]*de[1]+ae[1]*de[0]+de[4]*de[1]-de[5]*de[0])/Me;return[qe,Ge]}static getAxialAlignedBoundingBox(ae,de){const Me=this.applyTransform(ae,de),qe=this.applyTransform(ae.slice(2,4),de),Ge=this.applyTransform([ae[0],ae[3]],de),z=this.applyTransform([ae[2],ae[1]],de);return[Math.min(Me[0],qe[0],Ge[0],z[0]),Math.min(Me[1],qe[1],Ge[1],z[1]),Math.max(Me[0],qe[0],Ge[0],z[0]),Math.max(Me[1],qe[1],Ge[1],z[1])]}static inverseTransform(ae){const de=ae[0]*ae[3]-ae[1]*ae[2];return[ae[3]/de,-ae[1]/de,-ae[2]/de,ae[0]/de,(ae[2]*ae[5]-ae[4]*ae[3])/de,(ae[4]*ae[1]-ae[5]*ae[0])/de]}static singularValueDecompose2dScale(ae){const de=[ae[0],ae[2],ae[1],ae[3]],Me=ae[0]*de[0]+ae[1]*de[2],qe=ae[0]*de[1]+ae[1]*de[3],Ge=ae[2]*de[0]+ae[3]*de[2],z=ae[2]*de[1]+ae[3]*de[3],ye=(Me+z)/2,we=Math.sqrt((Me+z)**2-4*(Me*z-Ge*qe))/2,Ie=ye+we||1,je=ye-we||1;return[Math.sqrt(Ie),Math.sqrt(je)]}static normalizeRect(ae){const de=ae.slice(0);return ae[0]>ae[2]&&(de[0]=ae[2],de[2]=ae[0]),ae[1]>ae[3]&&(de[1]=ae[3],de[3]=ae[1]),de}static intersect(ae,de){const Me=Math.max(Math.min(ae[0],ae[2]),Math.min(de[0],de[2])),qe=Math.min(Math.max(ae[0],ae[2]),Math.max(de[0],de[2]));if(Me>qe)return null;const Ge=Math.max(Math.min(ae[1],ae[3]),Math.min(de[1],de[3])),z=Math.min(Math.max(ae[1],ae[3]),Math.max(de[1],de[3]));return Ge>z?null:[Me,Ge,qe,z]}static bezierBoundingBox(ae,de,Me,qe,Ge,z,ye,we){const Ie=[],je=[[],[]];let Re,W,j,K,he,pe,xe,Se;for(let We=0;We<2;++We){if(We===0?(W=6*ae-12*Me+6*Ge,Re=-3*ae+9*Me-9*Ge+3*ye,j=3*Me-3*ae):(W=6*de-12*qe+6*z,Re=-3*de+9*qe-9*z+3*we,j=3*qe-3*de),Math.abs(Re)<1e-12){if(Math.abs(W)<1e-12)continue;K=-j/W,0<K&&K<1&&Ie.push(K);continue}xe=W*W-4*j*Re,Se=Math.sqrt(xe),!(xe<0)&&(he=(-W+Se)/(2*Re),0<he&&he<1&&Ie.push(he),pe=(-W-Se)/(2*Re),0<pe&&pe<1&&Ie.push(pe))}let Fe=Ie.length,De;const Te=Fe;for(;Fe--;)K=Ie[Fe],De=1-K,je[0][Fe]=De*De*De*ae+3*De*De*K*Me+3*De*K*K*Ge+K*K*K*ye,je[1][Fe]=De*De*De*de+3*De*De*K*qe+3*De*K*K*z+K*K*K*we;return je[0][Te]=ae,je[1][Te]=de,je[0][Te+1]=ye,je[1][Te+1]=we,je[0].length=je[1].length=Te+2,[Math.min(...je[0]),Math.min(...je[1]),Math.max(...je[0]),Math.max(...je[1])]}}e.Util=J;const oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ge(Ee){if(Ee[0]>=""){let de;if(Ee[0]===""&&Ee[1]===""?de="utf-16be":Ee[0]===""&&Ee[1]===""?de="utf-16le":Ee[0]===""&&Ee[1]===""&&Ee[2]===""&&(de="utf-8"),de)try{const Me=new TextDecoder(de,{fatal:!0}),qe=fe(Ee);return Me.decode(qe)}catch(Me){V(`stringToPDFString: "${Me}".`)}}const ae=[];for(let de=0,Me=Ee.length;de<Me;de++){const qe=oe[Ee.charCodeAt(de)];ae.push(qe?String.fromCharCode(qe):Ee.charAt(de))}return ae.join("")}function Ae(Ee){return decodeURIComponent(escape(Ee))}function _e(Ee){return unescape(encodeURIComponent(Ee))}function te(Ee){return typeof Ee=="object"&&(Ee==null?void 0:Ee.byteLength)!==void 0}function Pe(Ee,ae){if(Ee.length!==ae.length)return!1;for(let de=0,Me=Ee.length;de<Me;de++)if(Ee[de]!==ae[de])return!1;return!0}function Ce(Ee=new Date){return[Ee.getUTCFullYear().toString(),(Ee.getUTCMonth()+1).toString().padStart(2,"0"),Ee.getUTCDate().toString().padStart(2,"0"),Ee.getUTCHours().toString().padStart(2,"0"),Ee.getUTCMinutes().toString().padStart(2,"0"),Ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ue{constructor(){ce(this,Xe,!1);this.promise=new Promise((ae,de)=>{this.resolve=Me=>{ue(this,Xe,!0),ae(Me)},this.reject=Me=>{ue(this,Xe,!0),de(Me)}})}get settled(){return i(this,Xe)}}Xe=new WeakMap,e.PromiseCapability=Ue;let $e=null,He=null;function ke(Ee){return $e||($e=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,He=new Map([["","t"]])),Ee.replaceAll($e,(ae,de,Me)=>de?de.normalize("NFKC"):He.get(Me))}function Oe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ee);else for(let ae=0;ae<32;ae++)Ee[ae]=Math.floor(Math.random()*255);return le(Ee)}const ze="pdfjs_internal_id_";e.AnnotationPrefix=ze},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,r,ot,bt,O,h,v,a,w,k,b,x,P,xt,g,E,Lt,S,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(l){if(typeof l=="string"||l instanceof URL?l={url:l}:(0,_util.isArrayBuffer)(l)&&(l={data:l}),typeof l!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const m=new PDFDocumentLoadingTask,{docId:f}=m,I=l.url?getUrlProp(l.url):null,c=l.data?getDataProp(l.data):null,R=l.httpHeaders||null,L=l.withCredentials===!0,Q=l.password??null,G=l.range instanceof PDFDataRangeTransport?l.range:null,q=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=l.worker instanceof PDFWorker?l.worker:null;const se=l.verbosity,D=typeof l.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(l.docBaseUrl)?l.docBaseUrl:null,X=typeof l.cMapUrl=="string"?l.cMapUrl:null,re=l.cMapPacked!==!1,N=l.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,u=l.StandardFontDataFactory||DefaultStandardFontDataFactory,T=l.stopAtErrors!==!0,$=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,U=l.isEvalSupported!==!1,B=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!_util.isNodeJS,Y=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ie=typeof l.disableFontFace=="boolean"?l.disableFontFace:_util.isNodeJS,le=l.fontExtraProperties===!0,fe=l.enableXfa===!0,be=l.ownerDocument||globalThis.document,me=l.disableRange===!0,ve=l.disableStream===!0,Z=l.disableAutoFetch===!0,ee=l.pdfBug===!0,M=G?G.length:l.length??NaN,H=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!_util.isNodeJS&&!ie,J=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:N===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&X&&d&&(0,_display_utils.isValidFetchUrl)(X,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),oe=l.canvasFactory||new DefaultCanvasFactory({ownerDocument:be}),ge=l.filterFactory||new DefaultFilterFactory({docId:f,ownerDocument:be}),Ae=null;(0,_util.setVerbosityLevel)(se);const _e={canvasFactory:oe,filterFactory:ge};if(J||(_e.cMapReaderFactory=new N({baseUrl:X,isCompressed:re}),_e.standardFontDataFactory=new u({baseUrl:d})),!V){const Ce={verbosity:se,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ce.port?PDFWorker.fromPort(Ce):new PDFWorker(Ce),m._worker=V}const te={docId:f,apiVersion:"3.11.174",data:c,password:Q,disableAutoFetch:Z,rangeChunkSize:q,length:M,docBaseUrl:D,enableXfa:fe,evaluatorOptions:{maxImageSize:$,disableFontFace:ie,ignoreErrors:T,isEvalSupported:U,isOffscreenCanvasSupported:B,canvasMaxAreaInBytes:Y,fontExtraProperties:le,useSystemFonts:H,cMapUrl:J?X:null,standardFontDataUrl:J?d:null}},Pe={ignoreErrors:T,isEvalSupported:U,disableFontFace:ie,fontExtraProperties:le,enableXfa:fe,ownerDocument:be,disableAutoFetch:Z,pdfBug:ee,styleElement:Ae};return V.promise.then(function(){if(m.destroyed)throw new Error("Loading aborted");const Ce=_fetchDocument(V,te),Ue=new Promise(function($e){let He;G?He=new _transport_stream.PDFDataTransportStream({length:M,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:me,disableStream:ve},G):c||(He=(Oe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Oe):(0,_display_utils.isValidFetchUrl)(Oe.url)?new _displayFetch_stream.PDFFetchStream(Oe):new _displayNetwork.PDFNetworkStream(Oe))({url:I,length:M,httpHeaders:R,withCredentials:L,rangeChunkSize:q,disableRange:me,disableStream:ve})),$e(He)});return Promise.all([Ce,Ue]).then(function([$e,He]){if(m.destroyed)throw new Error("Loading aborted");const ke=new _message_handler.MessageHandler(f,$e,V.port),Oe=new WorkerTransport(ke,m,He,Pe,_e);m._transport=Oe,ke.send("Ready",null)})}).catch(m._capability.reject),m}async function _fetchDocument(l,m){if(l.destroyed)throw new Error("Worker was destroyed");const f=await l.messageHandler.sendWithPromise("GetDocRequest",m,m.data?[m.data.buffer]:null);if(l.destroyed)throw new Error("Worker was destroyed");return f}function getUrlProp(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(_util.isNodeJS&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(_util.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return(0,_util.stringToBytes)(l);if(typeof l=="object"&&!isNaN(l==null?void 0:l.length)||(0,_util.isArrayBuffer)(l))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ut(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var m,f,I;this.destroyed=!0;try{(m=this._worker)!=null&&m.port&&(this._worker._pendingDestroy=!0),await((f=this._transport)==null?void 0:f.destroy())}catch(c){throw(I=this._worker)!=null&&I.port&&delete this._worker._pendingDestroy,c}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,ce(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(m,f,I=!1,c=null){this.length=m,this.initialData=f,this.progressiveDone=I,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(m){this._rangeListeners.push(m)}addProgressListener(m){this._progressListeners.push(m)}addProgressiveReadListener(m){this._progressiveReadListeners.push(m)}addProgressiveDoneListener(m){this._progressiveDoneListeners.push(m)}onDataRange(m,f){for(const I of this._rangeListeners)I(m,f)}onDataProgress(m,f){this._readyCapability.promise.then(()=>{for(const I of this._progressListeners)I(m,f)})}onDataProgressiveRead(m){this._readyCapability.promise.then(()=>{for(const f of this._progressiveReadListeners)f(m)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const m of this._progressiveDoneListeners)m()})}transportReady(){this._readyCapability.resolve()}requestDataRange(m,f){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(m,f){this._pdfInfo=m,this._transport=f,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(I=>{if(!I)return I;const c=[];for(const R in I)c.push(...I[R]);return c}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(m){return this._transport.getPage(m)}getPageIndex(m){return this._transport.getPageIndex(m)}getDestinations(){return this._transport.getDestinations()}getDestination(m){return this._transport.getDestination(m)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(m=!1){return this._transport.startCleanup(m||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(m,f,I,c=!1){ce(this,r);ce(this,s,null);ce(this,n,!1);this._pageIndex=m,this._pageInfo=f,this._transport=I,this._stats=c?new _display_utils.StatTimer:null,this._pdfBug=c,this.commonObjs=I.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:m,rotation:f=this.rotate,offsetX:I=0,offsetY:c=0,dontFlip:R=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:m,rotation:f,offsetX:I,offsetY:c,dontFlip:R})}getAnnotations({intent:m="display"}={}){const f=this._transport.getRenderingIntent(m);return this._transport.getAnnotations(this._pageIndex,f.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var m;return((m=this._transport._htmlForXfa)==null?void 0:m.children[this._pageIndex])||null}render({canvasContext:m,viewport:f,intent:I="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:R=null,background:L=null,optionalContentConfigPromise:Q=null,annotationCanvasMap:G=null,pageColors:q=null,printAnnotationStorage:V=null}){var u,T;(u=this._stats)==null||u.time("Overall");const se=this._transport.getRenderingIntent(I,c,V);ue(this,n,!1),ne(this,r,bt).call(this),Q||(Q=this._transport.getOptionalContentConfig());let D=this._intentStates.get(se.cacheKey);D||(D=Object.create(null),this._intentStates.set(se.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const X=!!(se.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=new _util.PromiseCapability,D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(se));const re=$=>{var U,B;D.renderTasks.delete(N),(this._maybeCleanupAfterRender||X)&&ue(this,n,!0),ne(this,r,ot).call(this,!X),$?(N.capability.reject($),this._abortOperatorList({intentState:D,reason:$ instanceof Error?$:new Error($)})):N.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),(B=this._stats)==null||B.timeEnd("Overall")},N=new InternalRenderTask({callback:re,params:{canvasContext:m,viewport:f,transform:R,background:L},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:q});(D.renderTasks||(D.renderTasks=new Set)).add(N);const d=N.task;return Promise.all([D.displayReadyCapability.promise,Q]).then(([$,U])=>{var B;if(this.destroyed){re();return}(B=this._stats)==null||B.time("Rendering"),N.initializeGraphics({transparency:$,optionalContentConfig:U}),N.operatorListChanged()}).catch(re),d}getOperatorList({intent:m="display",annotationMode:f=_util.AnnotationMode.ENABLE,printAnnotationStorage:I=null}={}){var G;function c(){L.operatorList.lastChunk&&(L.opListReadCapability.resolve(L.operatorList),L.renderTasks.delete(Q))}const R=this._transport.getRenderingIntent(m,f,I,!0);let L=this._intentStates.get(R.cacheKey);L||(L=Object.create(null),this._intentStates.set(R.cacheKey,L));let Q;return L.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=c,L.opListReadCapability=new _util.PromiseCapability,(L.renderTasks||(L.renderTasks=new Set)).add(Q),L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(R)),L.opListReadCapability.promise}streamTextContent({includeMarkedContent:m=!1,disableNormalization:f=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:m===!0,disableNormalization:f===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(m={}){if(this._transport._htmlForXfa)return this.getXfa().then(I=>_xfa_text.XfaText.textContent(I));const f=this.streamTextContent(m);return new Promise(function(I,c){function R(){L.read().then(function({value:G,done:q}){if(q){I(Q);return}Object.assign(Q.styles,G.styles),Q.items.push(...G.items),R()},c)}const L=f.getReader(),Q={items:[],styles:Object.create(null)};R()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const m=[];for(const f of this._intentStates.values())if(this._abortOperatorList({intentState:f,reason:new Error("Page was destroyed."),force:!0}),!f.opListReadCapability)for(const I of f.renderTasks)m.push(I.completed),I.cancel();return this.objs.clear(),ue(this,n,!1),ne(this,r,bt).call(this),Promise.all(m)}cleanup(m=!1){ue(this,n,!0);const f=ne(this,r,ot).call(this,!1);return m&&f&&this._stats&&(this._stats=new _display_utils.StatTimer),f}_startRenderPage(m,f){var c,R;const I=this._intentStates.get(f);I&&((c=this._stats)==null||c.timeEnd("Page Request"),(R=I.displayReadyCapability)==null||R.resolve(m))}_renderPageChunk(m,f){for(let I=0,c=m.length;I<c;I++)f.operatorList.fnArray.push(m.fnArray[I]),f.operatorList.argsArray.push(m.argsArray[I]);f.operatorList.lastChunk=m.lastChunk,f.operatorList.separateAnnots=m.separateAnnots;for(const I of f.renderTasks)I.operatorListChanged();m.lastChunk&&ne(this,r,ot).call(this,!0)}_pumpOperatorList({renderingIntent:m,cacheKey:f,annotationStorageSerializable:I}){const{map:c,transfers:R}=I,Q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:m,cacheKey:f,annotationStorage:c},R).getReader(),G=this._intentStates.get(f);G.streamReader=Q;const q=()=>{Q.read().then(({value:V,done:se})=>{if(se){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,G),q())},V=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const se of G.renderTasks)se.operatorListChanged();ne(this,r,ot).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(V);else if(G.opListReadCapability)G.opListReadCapability.reject(V);else throw V}})};q()}_abortOperatorList({intentState:m,reason:f,force:I=!1}){if(m.streamReader){if(m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null),!I){if(m.renderTasks.size>0)return;if(f instanceof _display_utils.RenderingCancelledException){let c=RENDERING_CANCELLED_TIMEOUT;f.extraDelay>0&&f.extraDelay<1e3&&(c+=f.extraDelay),m.streamReaderCancelTimeout=setTimeout(()=>{m.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:m,reason:f,force:!0})},c);return}}if(m.streamReader.cancel(new _util.AbortException(f.message)).catch(()=>{}),m.streamReader=null,!this._transport.destroyed){for(const[c,R]of this._intentStates)if(R===m){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,r=new WeakSet,ot=function(m=!1){if(ne(this,r,bt).call(this),!i(this,n)||this.destroyed)return!1;if(m)return ue(this,s,setTimeout(()=>{ue(this,s,null),ne(this,r,ot).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:f,operatorList:I}of this._intentStates.values())if(f.size>0||!I.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ue(this,n,!1),!0},bt=function(){i(this,s)&&(clearTimeout(i(this,s)),ue(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ce(this,O,new Set);ce(this,h,Promise.resolve())}postMessage(m,f){const I={data:structuredClone(m,f?{transfer:f}:null)};i(this,h).then(()=>{for(const c of i(this,O))c.call(this,I)})}addEventListener(m,f){i(this,O).add(f)}removeEventListener(m,f){i(this,O).delete(f)}terminate(){i(this,O).clear()}}O=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const l=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;l&&(PDFWorkerUtil.fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(l,m){let f;try{if(f=new URL(l),!f.origin||f.origin==="null")return!1}catch{return!1}const I=new URL(m,f);return f.origin===I.origin},PDFWorkerUtil.createCDNWrapper=function(l){const m=`importScripts("${l}");`;return URL.createObjectURL(new Blob([m]))}}const _PDFWorker=class _PDFWorker{constructor({name:l=null,port:m=null,verbosity:f=(0,_util.getVerbosityLevel)()}={}){var I;if(this.name=l,this.destroyed=!1,this.verbosity=f,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,m){if((I=i(_PDFWorker,a))!=null&&I.has(m))throw new Error("Cannot use more than one PDFWorker per port.");(i(_PDFWorker,a)||ue(_PDFWorker,a,new WeakMap)).set(m,this),this._initializeFromPort(m);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(l){this._port=l,this._messageHandler=new _message_handler.MessageHandler("main","worker",l),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:l}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,l)||(l=PDFWorkerUtil.createCDNWrapper(new URL(l,window.location).href));const m=new Worker(l),f=new _message_handler.MessageHandler("main","worker",m),I=()=>{m.removeEventListener("error",c),f.destroy(),m.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=()=>{this._webWorker||I()};m.addEventListener("error",c),f.on("test",L=>{if(m.removeEventListener("error",c),this.destroyed){I();return}L?(this._messageHandler=f,this._port=m,this._webWorker=m,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),f.destroy(),m.terminate())}),f.on("ready",L=>{if(m.removeEventListener("error",c),this.destroyed){I();return}try{R()}catch{this._setupFakeWorker()}});const R=()=>{const L=new Uint8Array;f.send("test",L,[L.buffer])};R();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(l=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const m=new LoopbackPort;this._port=m;const f=`fake${PDFWorkerUtil.fakeWorkerId++}`,I=new _message_handler.MessageHandler(f+"_worker",f,m);l.setup(I,m);const c=new _message_handler.MessageHandler(f,f+"_worker",m);this._messageHandler=c,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})}).catch(l=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${l.message}".`))})}destroy(){var l;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(l=i(_PDFWorker,a))==null||l.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(l){var f;if(!(l!=null&&l.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const m=(f=i(this,a))==null?void 0:f.get(l.port);if(m){if(m._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return m}return new _PDFWorker(l)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var l;try{return((l=globalThis.pdfjsWorker)==null?void 0:l.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};a=new WeakMap,ce(_PDFWorker,a);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(m,f,I,c,R){ce(this,P);ce(this,w,new Map);ce(this,k,new Map);ce(this,b,new Map);ce(this,x,null);this.messageHandler=m,this.loadingTask=f,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,this.canvasFactory=R.canvasFactory,this.filterFactory=R.filterFactory,this.cMapReaderFactory=R.cMapReaderFactory,this.standardFontDataFactory=R.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=I,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(m,f=_util.AnnotationMode.ENABLE,I=null,c=!1){let R=_util.RenderingIntentFlag.DISPLAY,L=_annotation_storage.SerializableEmpty;switch(m){case"any":R=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":R=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${m}`)}switch(f){case _util.AnnotationMode.DISABLE:R+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:R+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:R+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,L=(R&_util.RenderingIntentFlag.PRINT&&I instanceof _annotation_storage.PrintAnnotationStorage?I:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${f}`)}return c&&(R+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:R,cacheKey:`${R}_${L.hash}`,annotationStorageSerializable:L}}destroy(){var I;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(I=i(this,x))==null||I.reject(new Error("Worker was destroyed during onPassword callback"));const m=[];for(const c of i(this,k).values())m.push(c._destroy());i(this,k).clear(),i(this,b).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const f=this.messageHandler.sendWithPromise("Terminate",null);return m.push(f),Promise.all(m).then(()=>{var c;this.commonObjs.clear(),this.fontLoader.clear(),i(this,w).clear(),this.filterFactory.destroy(),(c=this._networkStream)==null||c.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:m,loadingTask:f}=this;m.on("GetReader",(I,c)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=R=>{this._lastProgress={loaded:R.loaded,total:R.total}},c.onPull=()=>{this._fullReader.read().then(function({value:R,done:L}){if(L){c.close();return}(0,_util.assert)(R instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{c.error(R)})},c.onCancel=R=>{this._fullReader.cancel(R),c.ready.catch(L=>{if(!this.destroyed)throw L})}}),m.on("ReaderHeadersReady",I=>{const c=new _util.PromiseCapability,R=this._fullReader;return R.headersReady.then(()=>{var L;(!R.isStreamingSupported||!R.isRangeSupported)&&(this._lastProgress&&((L=f.onProgress)==null||L.call(f,this._lastProgress)),R.onProgress=Q=>{var G;(G=f.onProgress)==null||G.call(f,{loaded:Q.loaded,total:Q.total})}),c.resolve({isStreamingSupported:R.isStreamingSupported,isRangeSupported:R.isRangeSupported,contentLength:R.contentLength})},c.reject),c.promise}),m.on("GetRangeReader",(I,c)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const R=this._networkStream.getRangeReader(I.begin,I.end);if(!R){c.close();return}c.onPull=()=>{R.read().then(function({value:L,done:Q}){if(Q){c.close();return}(0,_util.assert)(L instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(L),1,[L])}).catch(L=>{c.error(L)})},c.onCancel=L=>{R.cancel(L),c.ready.catch(Q=>{if(!this.destroyed)throw Q})}}),m.on("GetDoc",({pdfInfo:I})=>{this._numPages=I.numPages,this._htmlForXfa=I.htmlForXfa,delete I.htmlForXfa,f._capability.resolve(new PDFDocumentProxy(I,this))}),m.on("DocException",function(I){let c;switch(I.name){case"PasswordException":c=new _util.PasswordException(I.message,I.code);break;case"InvalidPDFException":c=new _util.InvalidPDFException(I.message);break;case"MissingPDFException":c=new _util.MissingPDFException(I.message);break;case"UnexpectedResponseException":c=new _util.UnexpectedResponseException(I.message,I.status);break;case"UnknownErrorException":c=new _util.UnknownErrorException(I.message,I.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}f._capability.reject(c)}),m.on("PasswordRequest",I=>{if(ue(this,x,new _util.PromiseCapability),f.onPassword){const c=R=>{R instanceof Error?i(this,x).reject(R):i(this,x).resolve({password:R})};try{f.onPassword(c,I.code)}catch(R){i(this,x).reject(R)}}else i(this,x).reject(new _util.PasswordException(I.message,I.code));return i(this,x).promise}),m.on("DataLoaded",I=>{var c;(c=f.onProgress)==null||c.call(f,{loaded:I.length,total:I.length}),this.downloadInfoCapability.resolve(I)}),m.on("StartRenderPage",I=>{if(this.destroyed)return;i(this,k).get(I.pageIndex)._startRenderPage(I.transparency,I.cacheKey)}),m.on("commonobj",([I,c,R])=>{var L;if(!this.destroyed&&!this.commonObjs.has(I))switch(c){case"Font":const Q=this._params;if("error"in R){const V=R.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(I,V);break}const G=Q.pdfBug&&((L=globalThis.FontInspector)!=null&&L.enabled)?(V,se)=>globalThis.FontInspector.fontAdded(V,se):null,q=new _font_loader.FontFaceObject(R,{isEvalSupported:Q.isEvalSupported,disableFontFace:Q.disableFontFace,ignoreErrors:Q.ignoreErrors,inspectFont:G});this.fontLoader.bind(q).catch(V=>m.sendWithPromise("FontFallback",{id:I})).finally(()=>{!Q.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(I,q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(I,R);break;default:throw new Error(`Got unknown common object type ${c}`)}}),m.on("obj",([I,c,R,L])=>{var G;if(this.destroyed)return;const Q=i(this,k).get(c);if(!Q.objs.has(I))switch(R){case"Image":if(Q.objs.resolve(I,L),L){let q;if(L.bitmap){const{width:V,height:se}=L;q=V*se*4}else q=((G=L.data)==null?void 0:G.length)||0;q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Q._maybeCleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(I,L);break;default:throw new Error(`Got unknown object type ${R}`)}}),m.on("DocProgress",I=>{var c;this.destroyed||(c=f.onProgress)==null||c.call(f,{loaded:I.loaded,total:I.total})}),m.on("FetchBuiltInCMap",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(I):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),m.on("FetchStandardFontData",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(I):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var I;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:m,transfers:f}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:m,filename:((I=this._fullReader)==null?void 0:I.filename)??null},f).finally(()=>{this.annotationStorage.resetModified()})}getPage(m){if(!Number.isInteger(m)||m<=0||m>this._numPages)return Promise.reject(new Error("Invalid page request."));const f=m-1,I=i(this,b).get(f);if(I)return I;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:f}).then(R=>{if(this.destroyed)throw new Error("Transport destroyed");const L=new PDFPageProxy(f,R,this,this._params.pdfBug);return i(this,k).set(f,L),L});return i(this,b).set(f,c),c}getPageIndex(m){return typeof m!="object"||m===null||!Number.isInteger(m.num)||m.num<0||!Number.isInteger(m.gen)||m.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:m.num,gen:m.gen})}getAnnotations(m,f){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:m,intent:f})}getFieldObjects(){return ne(this,P,xt).call(this,"GetFieldObjects")}hasJSActions(){return ne(this,P,xt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(m){return typeof m!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:m})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ne(this,P,xt).call(this,"GetDocJSActions")}getPageJSActions(m){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:m})}getStructTree(m){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:m})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(m=>new _optional_content_config.OptionalContentConfig(m))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const m="GetMetadata",f=i(this,w).get(m);if(f)return f;const I=this.messageHandler.sendWithPromise(m,null).then(c=>{var R,L;return{info:c[0],metadata:c[1]?new _metadata.Metadata(c[1]):null,contentDispositionFilename:((R=this._fullReader)==null?void 0:R.filename)??null,contentLength:((L=this._fullReader)==null?void 0:L.contentLength)??null}});return i(this,w).set(m,I),I}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(m=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const f of i(this,k).values())if(!f.cleanup())throw new Error(`startCleanup: Page ${f.pageNumber} is currently rendering.`);this.commonObjs.clear(),m||this.fontLoader.clear(),i(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:m,enableXfa:f}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:m,enableXfa:f})}}w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakSet,xt=function(m,f=null){const I=i(this,w).get(m);if(I)return I;const c=this.messageHandler.sendWithPromise(m,f);return i(this,w).set(m,c),c};class PDFObjects{constructor(){ce(this,E);ce(this,g,Object.create(null))}get(m,f=null){if(f){const c=ne(this,E,Lt).call(this,m);return c.capability.promise.then(()=>f(c.data)),null}const I=i(this,g)[m];if(!(I!=null&&I.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${m}.`);return I.data}has(m){const f=i(this,g)[m];return(f==null?void 0:f.capability.settled)||!1}resolve(m,f=null){const I=ne(this,E,Lt).call(this,m);I.data=f,I.capability.resolve()}clear(){var m;for(const f in i(this,g)){const{data:I}=i(this,g)[f];(m=I==null?void 0:I.bitmap)==null||m.close()}ue(this,g,Object.create(null))}}g=new WeakMap,E=new WeakSet,Lt=function(m){var f;return(f=i(this,g))[m]||(f[m]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(m){ce(this,S,null);ue(this,S,m),this.onContinue=null}get promise(){return i(this,S).capability.promise}cancel(m=0){i(this,S).cancel(null,m)}get separateAnnots(){const{separateAnnots:m}=i(this,S).operatorList;if(!m)return!1;const{annotationCanvasMap:f}=i(this,S);return m.form||m.canvas&&(f==null?void 0:f.size)>0}}S=new WeakMap,exports.RenderTask=RenderTask;const p=class p{constructor({callback:m,params:f,objs:I,commonObjs:c,annotationCanvasMap:R,operatorList:L,pageIndex:Q,canvasFactory:G,filterFactory:q,useRequestAnimationFrame:V=!1,pdfBug:se=!1,pageColors:D=null}){this.callback=m,this.params=f,this.objs=I,this.commonObjs=c,this.annotationCanvasMap=R,this.operatorListIdx=null,this.operatorList=L,this._pageIndex=Q,this.canvasFactory=G,this.filterFactory=q,this._pdfBug=se,this.pageColors=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=f.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:m=!1,optionalContentConfig:f}){var Q,G;if(this.cancelled)return;if(this._canvas){if(i(p,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i(p,o).add(this._canvas)}this._pdfBug&&((Q=globalThis.StepperManager)!=null&&Q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:I,viewport:c,transform:R,background:L}=this.params;this.gfx=new _canvas.CanvasGraphics(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:f},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:R,viewport:c,transparency:m,background:L}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(m=null,f=0){var I;this.running=!1,this.cancelled=!0,(I=this.gfx)==null||I.endDrawing(),i(p,o).delete(this._canvas),this.callback(m||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,f))}operatorListChanged(){var m;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(m=this.stepper)==null||m.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i(p,o).delete(this._canvas),this.callback())))}};o=new WeakMap,ce(p,o,new WeakSet);let InternalRenderTask=p;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,s)=>{var v,a,w,yn,b;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),r=s(4),y=s(8);const C=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=C;class O{constructor(){ce(this,w);ce(this,v,!1);ce(this,a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(P,A){const g=i(this,a).get(P);return g===void 0?A:Object.assign(A,g)}getRawValue(P){return i(this,a).get(P)}remove(P){if(i(this,a).delete(P),i(this,a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const A of i(this,a).values())if(A instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(P,A){const g=i(this,a).get(P);let E=!1;if(g!==void 0)for(const[F,S]of Object.entries(A))g[F]!==S&&(E=!0,g[F]=S);else E=!0,i(this,a).set(P,A);E&&ne(this,w,yn).call(this),A instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(A.constructor._type)}has(P){return i(this,a).has(P)}getAll(){return i(this,a).size>0?(0,n.objectFromMap)(i(this,a)):null}setAll(P){for(const[A,g]of Object.entries(P))this.setValue(A,g)}get size(){return i(this,a).size}resetModified(){i(this,v)&&(ue(this,v,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(i(this,a).size===0)return C;const P=new Map,A=new y.MurmurHash3_64,g=[],E=Object.create(null);let F=!1;for(const[S,o]of i(this,a)){const p=o instanceof r.AnnotationEditor?o.serialize(!1,E):o;p&&(P.set(S,p),A.update(`${S}:${JSON.stringify(p)}`),F||(F=!!p.bitmap))}if(F)for(const S of P.values())S.bitmap&&g.push(S.bitmap);return P.size>0?{map:P,hash:A.hexdigest(),transfers:g}:C}}v=new WeakMap,a=new WeakMap,w=new WeakSet,yn=function(){i(this,v)||(ue(this,v,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=O;class h extends O{constructor(A){super();ce(this,b);const{map:g,hash:E,transfers:F}=A.serializable,S=structuredClone(g,F?{transfer:F}:null);ue(this,b,{map:S,hash:E,transfers:F})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return i(this,b)}}b=new WeakMap,e.PrintAnnotationStorage=h},(t,e,s)=>{var h,v,a,w,k,b,x,P,A,g,E,F,S,o,p,It,Nt,f,jt,$t,bn,_n,xn,Bt,An;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),r=s(1),y=s(6);const V=class V{constructor(D){ce(this,p);ce(this,h,"");ce(this,v,!1);ce(this,a,null);ce(this,w,null);ce(this,k,null);ce(this,b,!1);ce(this,x,null);ce(this,P,this.focusin.bind(this));ce(this,A,this.focusout.bind(this));ce(this,g,!1);ce(this,E,!1);ce(this,F,!1);Qe(this,"_initialOptions",Object.create(null));Qe(this,"_uiManager",null);Qe(this,"_focusEventsAllowed",!0);Qe(this,"_l10nPromise",null);ce(this,S,!1);ce(this,o,V._zIndex++);this.constructor===V&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=D.parent,this.id=D.id,this.width=this.height=null,this.pageIndex=D.parent.pageIndex,this.name=D.name,this.div=null,this._uiManager=D.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=D.isCentered,this._structTreeParentId=null;const{rotation:X,rawDims:{pageWidth:re,pageHeight:N,pageX:d,pageY:u}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[re,N],this.pageTranslation=[d,u];const[T,$]=this.parentDimensions;this.x=D.x/T,this.y=D.y/$,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(D){const X=new O({id:D.parent.getNextId(),parent:D.parent,uiManager:D._uiManager});X.annotationElementId=D.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(D,X=null){if(V._l10nPromise||(V._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,D.get(N)]))),X!=null&&X.strings)for(const N of X.strings)V._l10nPromise.set(N,D.get(N));if(V._borderLineWidth!==-1)return;const re=getComputedStyle(document.documentElement);V._borderLineWidth=parseFloat(re.getPropertyValue("--outline-width"))||0}static updateDefaultParams(D,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(D){return!1}static paste(D,X){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return i(this,S)}set _isDraggable(D){var X;ue(this,S,D),(X=this.div)==null||X.classList.toggle("draggable",D)}center(){const[D,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(D*2),this.y+=this.width*D/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(D*2),this.y-=this.width*D/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(D){this._uiManager.addCommands(D)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=i(this,o)}setParent(D){D!==null&&(this.pageIndex=D.pageIndex,this.pageDimensions=D.pageDimensions),this.parent=D}focusin(D){this._focusEventsAllowed&&(i(this,g)?ue(this,g,!1):this.parent.setSelected(this))}focusout(D){var re;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=D.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(D.preventDefault(),(re=this.parent)!=null&&re.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(D,X,re,N){const[d,u]=this.parentDimensions;[re,N]=this.screenToPageTranslation(re,N),this.x=(D+re)/d,this.y=(X+N)/u,this.fixAndSetPosition()}translate(D,X){ne(this,p,It).call(this,this.parentDimensions,D,X)}translateInPage(D,X){ne(this,p,It).call(this,this.pageDimensions,D,X),this.div.scrollIntoView({block:"nearest"})}drag(D,X){const[re,N]=this.parentDimensions;if(this.x+=D/re,this.y+=X/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:U,y:B}=this.div.getBoundingClientRect();this.parent.findNewParent(this,U,B)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:u}=this;const[T,$]=ne(this,p,Nt).call(this);d+=T,u+=$,this.div.style.left=`${(100*d).toFixed(2)}%`,this.div.style.top=`${(100*u).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[D,X]=this.pageDimensions;let{x:re,y:N,width:d,height:u}=this;switch(d*=D,u*=X,re*=D,N*=X,this.rotation){case 0:re=Math.max(0,Math.min(D-d,re)),N=Math.max(0,Math.min(X-u,N));break;case 90:re=Math.max(0,Math.min(D-u,re)),N=Math.min(X,Math.max(d,N));break;case 180:re=Math.min(D,Math.max(d,re)),N=Math.min(X,Math.max(u,N));break;case 270:re=Math.min(D,Math.max(u,re)),N=Math.max(0,Math.min(X-d,N));break}this.x=re/=D,this.y=N/=X;const[T,$]=ne(this,p,Nt).call(this);re+=T,N+=$;const{style:U}=this.div;U.left=`${(100*re).toFixed(2)}%`,U.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(D,X){var re;return ne(re=V,f,jt).call(re,D,X,this.parentRotation)}pageTranslationToScreen(D,X){var re;return ne(re=V,f,jt).call(re,D,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:D,pageDimensions:[X,re]}=this,N=X*D,d=re*D;return r.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(d)]:[N,d]}setDims(D,X){var d;const[re,N]=this.parentDimensions;this.div.style.width=`${(100*D/re).toFixed(2)}%`,i(this,b)||(this.div.style.height=`${(100*X/N).toFixed(2)}%`),(d=i(this,a))==null||d.classList.toggle("small",D<V.SMALL_EDITOR_SIZE||X<V.SMALL_EDITOR_SIZE)}fixDims(){const{style:D}=this.div,{height:X,width:re}=D,N=re.endsWith("%"),d=!i(this,b)&&X.endsWith("%");if(N&&d)return;const[u,T]=this.parentDimensions;N||(D.width=`${(100*parseFloat(re)/u).toFixed(2)}%`),!i(this,b)&&!d&&(D.height=`${(100*parseFloat(X)/T).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(i(this,a))return;const D=ue(this,a,document.createElement("button"));D.className="altText";const X=await V._l10nPromise.get("editor_alt_text_button_label");D.textContent=X,D.setAttribute("aria-label",X),D.tabIndex="0",D.addEventListener("contextmenu",y.noContextMenu),D.addEventListener("pointerdown",re=>re.stopPropagation()),D.addEventListener("click",re=>{re.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),D.addEventListener("keydown",re=>{re.target===D&&re.key==="Enter"&&(re.preventDefault(),this._uiManager.editAltText(this))}),ne(this,p,Bt).call(this),this.div.append(D),V.SMALL_EDITOR_SIZE||(V.SMALL_EDITOR_SIZE=Math.min(128,Math.round(D.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:i(this,h),decorative:i(this,v)}}set altTextData({altText:D,decorative:X}){i(this,h)===D&&i(this,v)===X||(ue(this,h,D),ue(this,v,X),ne(this,p,Bt).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",i(this,P)),this.div.addEventListener("focusout",i(this,A));const[D,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/D).toFixed(2)}%`,this.div.style.maxHeight=`${(100*D/X).toFixed(2)}%`);const[re,N]=this.getInitialTranslation();return this.translate(re,N),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(D){const{isMac:X}=r.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&X){D.preventDefault();return}ue(this,g,!0),ne(this,p,An).call(this,D)}moveInDOM(){var D;(D=this.parent)==null||D.moveEditorInDOM(this)}_setParentAndPosition(D,X,re){D.changeParent(this),this.x=X,this.y=re,this.fixAndSetPosition()}getRect(D,X){const re=this.parentScale,[N,d]=this.pageDimensions,[u,T]=this.pageTranslation,$=D/re,U=X/re,B=this.x*N,Y=this.y*d,ie=this.width*N,le=this.height*d;switch(this.rotation){case 0:return[B+$+u,d-Y-U-le+T,B+$+ie+u,d-Y-U+T];case 90:return[B+U+u,d-Y+$+T,B+U+le+u,d-Y+$+ie+T];case 180:return[B-$-ie+u,d-Y+U+T,B-$+u,d-Y+U+le+T];case 270:return[B-U-le+u,d-Y-$-ie+T,B-U+u,d-Y-$+T];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(D,X){const[re,N,d,u]=D,T=d-re,$=u-N;switch(this.rotation){case 0:return[re,X-u,T,$];case 90:return[re,X-N,$,T];case 180:return[d,X-N,T,$];case 270:return[d,X-u,$,T];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ue(this,F,!0)}disableEditMode(){ue(this,F,!1)}isInEditMode(){return i(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var D,X;(D=this.div)==null||D.addEventListener("focusin",i(this,P)),(X=this.div)==null||X.addEventListener("focusout",i(this,A))}serialize(D=!1,X=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(D,X,re){const N=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:re});N.rotation=D.rotation;const[d,u]=N.pageDimensions,[T,$,U,B]=N.getRectInCurrentCoords(D.rect,u);return N.x=T/d,N.y=$/u,N.width=U/d,N.height=B/u,N}remove(){var D;this.div.removeEventListener("focusin",i(this,P)),this.div.removeEventListener("focusout",i(this,A)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(D=i(this,a))==null||D.remove(),ue(this,a,null),ue(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ne(this,p,bn).call(this),i(this,x).classList.remove("hidden"))}select(){var D;this.makeResizable(),(D=this.div)==null||D.classList.add("selectedEditor")}unselect(){var D,X,re;(D=i(this,x))==null||D.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(re=this.div)!=null&&re.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(D,X){}disableEditing(){i(this,a)&&(i(this,a).hidden=!0)}enableEditing(){i(this,a)&&(i(this,a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return i(this,E)}set isEditing(D){ue(this,E,D),this.parent&&(D?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(D,X){ue(this,b,!0);const re=D/X,{style:N}=this.div;N.aspectRatio=re,N.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,v=new WeakMap,a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakMap,o=new WeakMap,p=new WeakSet,It=function([D,X],re,N){[re,N]=this.screenToPageTranslation(re,N),this.x+=re/D,this.y+=N/X,this.fixAndSetPosition()},Nt=function(){const[D,X]=this.parentDimensions,{_borderLineWidth:re}=V,N=re/D,d=re/X;switch(this.rotation){case 90:return[-N,d];case 180:return[N,d];case 270:return[N,-d];default:return[-N,-d]}},f=new WeakSet,jt=function(D,X,re){switch(re){case 90:return[X,-D];case 180:return[-D,-X];case 270:return[-X,D];default:return[D,X]}},$t=function(D){switch(D){case 90:{const[X,re]=this.pageDimensions;return[0,-X/re,re/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,re]=this.pageDimensions;return[0,X/re,-re/X,0]}default:return[1,0,0,1]}},bn=function(){if(i(this,x))return;ue(this,x,document.createElement("div")),i(this,x).classList.add("resizers");const D=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||D.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of D){const re=document.createElement("div");i(this,x).append(re),re.classList.add("resizer",X),re.addEventListener("pointerdown",ne(this,p,_n).bind(this,X)),re.addEventListener("contextmenu",y.noContextMenu)}this.div.prepend(i(this,x))},_n=function(D,X){X.preventDefault();const{isMac:re}=r.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&re)return;const N=ne(this,p,xn).bind(this,D),d=this._isDraggable;this._isDraggable=!1;const u={passive:!0,capture:!0};window.addEventListener("pointermove",N,u);const T=this.x,$=this.y,U=this.width,B=this.height,Y=this.parent.div.style.cursor,ie=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const le=()=>{this._isDraggable=d,window.removeEventListener("pointerup",le),window.removeEventListener("blur",le),window.removeEventListener("pointermove",N,u),this.parent.div.style.cursor=Y,this.div.style.cursor=ie;const fe=this.x,be=this.y,me=this.width,ve=this.height;fe===T&&be===$&&me===U&&ve===B||this.addCommands({cmd:()=>{this.width=me,this.height=ve,this.x=fe,this.y=be;const[Z,ee]=this.parentDimensions;this.setDims(Z*me,ee*ve),this.fixAndSetPosition()},undo:()=>{this.width=U,this.height=B,this.x=T,this.y=$;const[Z,ee]=this.parentDimensions;this.setDims(Z*U,ee*B),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",le),window.addEventListener("blur",le)},xn=function(D,X){const[re,N]=this.parentDimensions,d=this.x,u=this.y,T=this.width,$=this.height,U=V.MIN_SIZE/re,B=V.MIN_SIZE/N,Y=ke=>Math.round(ke*1e4)/1e4,ie=ne(this,p,$t).call(this,this.rotation),le=(ke,Oe)=>[ie[0]*ke+ie[2]*Oe,ie[1]*ke+ie[3]*Oe],fe=ne(this,p,$t).call(this,360-this.rotation),be=(ke,Oe)=>[fe[0]*ke+fe[2]*Oe,fe[1]*ke+fe[3]*Oe];let me,ve,Z=!1,ee=!1;switch(D){case"topLeft":Z=!0,me=(ke,Oe)=>[0,0],ve=(ke,Oe)=>[ke,Oe];break;case"topMiddle":me=(ke,Oe)=>[ke/2,0],ve=(ke,Oe)=>[ke/2,Oe];break;case"topRight":Z=!0,me=(ke,Oe)=>[ke,0],ve=(ke,Oe)=>[0,Oe];break;case"middleRight":ee=!0,me=(ke,Oe)=>[ke,Oe/2],ve=(ke,Oe)=>[0,Oe/2];break;case"bottomRight":Z=!0,me=(ke,Oe)=>[ke,Oe],ve=(ke,Oe)=>[0,0];break;case"bottomMiddle":me=(ke,Oe)=>[ke/2,Oe],ve=(ke,Oe)=>[ke/2,0];break;case"bottomLeft":Z=!0,me=(ke,Oe)=>[0,Oe],ve=(ke,Oe)=>[ke,0];break;case"middleLeft":ee=!0,me=(ke,Oe)=>[0,Oe/2],ve=(ke,Oe)=>[ke,Oe/2];break}const M=me(T,$),H=ve(T,$);let J=le(...H);const oe=Y(d+J[0]),ge=Y(u+J[1]);let Ae=1,_e=1,[te,Pe]=this.screenToPageTranslation(X.movementX,X.movementY);if([te,Pe]=be(te/re,Pe/N),Z){const ke=Math.hypot(T,$);Ae=_e=Math.max(Math.min(Math.hypot(H[0]-M[0]-te,H[1]-M[1]-Pe)/ke,1/T,1/$),U/T,B/$)}else ee?Ae=Math.max(U,Math.min(1,Math.abs(H[0]-M[0]-te)))/T:_e=Math.max(B,Math.min(1,Math.abs(H[1]-M[1]-Pe)))/$;const Ce=Y(T*Ae),Ue=Y($*_e);J=le(...ve(Ce,Ue));const $e=oe-J[0],He=ge-J[1];this.width=Ce,this.height=Ue,this.x=$e,this.y=He,this.setDims(re*Ce,N*Ue),this.fixAndSetPosition()},Bt=async function(){var re;const D=i(this,a);if(!D)return;if(!i(this,h)&&!i(this,v)){D.classList.remove("done"),(re=i(this,w))==null||re.remove();return}V._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{D.setAttribute("aria-label",N)});let X=i(this,w);if(!X){ue(this,w,X=document.createElement("span")),X.className="tooltip",X.setAttribute("role","tooltip");const N=X.id=`alt-text-tooltip-${this.id}`;D.setAttribute("aria-describedby",N);const d=100;D.addEventListener("mouseenter",()=>{ue(this,k,setTimeout(()=>{ue(this,k,null),i(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},d))}),D.addEventListener("mouseleave",()=>{var u;clearTimeout(i(this,k)),ue(this,k,null),(u=i(this,w))==null||u.classList.remove("show")})}D.classList.add("done"),X.innerText=i(this,v)?await V._l10nPromise.get("editor_alt_text_decorative_tooltip"):i(this,h),X.parentNode||D.append(X)},An=function(D){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let re,N;X&&(re={passive:!0,capture:!0},N=u=>{const[T,$]=this.screenToPageTranslation(u.movementX,u.movementY);this._uiManager.dragSelectedEditors(T,$)},window.addEventListener("pointermove",N,re));const d=()=>{if(window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),X&&window.removeEventListener("pointermove",N,re),ue(this,g,!1),!this._uiManager.endDragSession()){const{isMac:u}=r.FeatureTest.platform;D.ctrlKey&&!u||D.shiftKey||D.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",d),window.addEventListener("blur",d)},ce(V,f),Qe(V,"_borderLineWidth",-1),Qe(V,"_colorManager",new n.ColorManager),Qe(V,"_zIndex",1),Qe(V,"SMALL_EDITOR_SIZE",0);let C=V;e.AnnotationEditor=C;class O extends C{constructor(D){super(D),this.annotationElementId=D.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var b,x,P,A,g,Ut,S,o,p,l,m,En,c,R,L,Q,G,q,V,se,D,X,re,N,d,u,T,$,U,B,Y,ie,le,fe,be,me,ve,Z,ee,M,H,J,oe,ge,Ae,_e,te,Sn,Wt,Ht,At,zt,Vt,nt,ht,Cn,Pn,Gt,pt,qt;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=y,e.opacityToHex=C;var n=s(1),r=s(6);function y(Ge,z,ye){for(const we of ye)z.addEventListener(we,Ge[we].bind(Ge))}function C(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class O{constructor(){ce(this,b,0)}getId(){return`${n.AnnotationEditorPrefix}${ut(this,b)._++}`}}b=new WeakMap;const F=class F{constructor(){ce(this,g);ce(this,x,(0,n.getUuid)());ce(this,P,0);ce(this,A,null)}static get _isSVGFittingCanvas(){const z='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',we=new OffscreenCanvas(1,3).getContext("2d"),Ie=new Image;Ie.src=z;const je=Ie.decode().then(()=>(we.drawImage(Ie,0,0,1,1,0,0,1,3),new Uint32Array(we.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",je)}async getFromFile(z){const{lastModified:ye,name:we,size:Ie,type:je}=z;return ne(this,g,Ut).call(this,`${ye}_${we}_${Ie}_${je}`,z)}async getFromUrl(z){return ne(this,g,Ut).call(this,z,z)}async getFromId(z){i(this,A)||ue(this,A,new Map);const ye=i(this,A).get(z);return ye?ye.bitmap?(ye.refCounter+=1,ye):ye.file?this.getFromFile(ye.file):this.getFromUrl(ye.url):null}getSvgUrl(z){const ye=i(this,A).get(z);return ye!=null&&ye.isSvg?ye.svgUrl:null}deleteId(z){i(this,A)||ue(this,A,new Map);const ye=i(this,A).get(z);ye&&(ye.refCounter-=1,ye.refCounter===0&&(ye.bitmap=null))}isValidId(z){return z.startsWith(`image_${i(this,x)}_`)}};x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakSet,Ut=async function(z,ye){i(this,A)||ue(this,A,new Map);let we=i(this,A).get(z);if(we===null)return null;if(we!=null&&we.bitmap)return we.refCounter+=1,we;try{we||(we={bitmap:null,id:`image_${i(this,x)}_${ut(this,P)._++}`,refCounter:0,isSvg:!1});let Ie;if(typeof ye=="string"){we.url=ye;const je=await fetch(ye);if(!je.ok)throw new Error(je.statusText);Ie=await je.blob()}else Ie=we.file=ye;if(Ie.type==="image/svg+xml"){const je=F._isSVGFittingCanvas,Re=new FileReader,W=new Image,j=new Promise((K,he)=>{W.onload=()=>{we.bitmap=W,we.isSvg=!0,K()},Re.onload=async()=>{const pe=we.svgUrl=Re.result;W.src=await je?`${pe}#svgView(preserveAspectRatio(none))`:pe},W.onerror=Re.onerror=he});Re.readAsDataURL(Ie),await j}else we.bitmap=await createImageBitmap(Ie);we.refCounter=1}catch(Ie){console.error(Ie),we=null}return i(this,A).set(z,we),we&&i(this,A).set(we.id,we),we};let h=F;class v{constructor(z=128){ce(this,S,[]);ce(this,o,!1);ce(this,p);ce(this,l,-1);ue(this,p,z)}add({cmd:z,undo:ye,mustExec:we,type:Ie=NaN,overwriteIfSameType:je=!1,keepUndo:Re=!1}){if(we&&z(),i(this,o))return;const W={cmd:z,undo:ye,type:Ie};if(i(this,l)===-1){i(this,S).length>0&&(i(this,S).length=0),ue(this,l,0),i(this,S).push(W);return}if(je&&i(this,S)[i(this,l)].type===Ie){Re&&(W.undo=i(this,S)[i(this,l)].undo),i(this,S)[i(this,l)]=W;return}const j=i(this,l)+1;j===i(this,p)?i(this,S).splice(0,1):(ue(this,l,j),j<i(this,S).length&&i(this,S).splice(j)),i(this,S).push(W)}undo(){i(this,l)!==-1&&(ue(this,o,!0),i(this,S)[i(this,l)].undo(),ue(this,o,!1),ue(this,l,i(this,l)-1))}redo(){i(this,l)<i(this,S).length-1&&(ue(this,l,i(this,l)+1),ue(this,o,!0),i(this,S)[i(this,l)].cmd(),ue(this,o,!1))}hasSomethingToUndo(){return i(this,l)!==-1}hasSomethingToRedo(){return i(this,l)<i(this,S).length-1}destroy(){ue(this,S,null)}}S=new WeakMap,o=new WeakMap,p=new WeakMap,l=new WeakMap,e.CommandManager=v;class a{constructor(z){ce(this,m);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ye}=n.FeatureTest.platform;for(const[we,Ie,je={}]of z)for(const Re of we){const W=Re.startsWith("mac+");ye&&W?(this.callbacks.set(Re.slice(4),{callback:Ie,options:je}),this.allKeys.add(Re.split("+").at(-1))):!ye&&!W&&(this.callbacks.set(Re,{callback:Ie,options:je}),this.allKeys.add(Re.split("+").at(-1)))}}exec(z,ye){if(!this.allKeys.has(ye.key))return;const we=this.callbacks.get(ne(this,m,En).call(this,ye));if(!we)return;const{callback:Ie,options:{bubbles:je=!1,args:Re=[],checker:W=null}}=we;W&&!W(z,ye)||(Ie.bind(z,...Re)(),je||(ye.stopPropagation(),ye.preventDefault()))}}m=new WeakSet,En=function(z){z.altKey&&this.buffer.push("alt"),z.ctrlKey&&this.buffer.push("ctrl"),z.metaKey&&this.buffer.push("meta"),z.shiftKey&&this.buffer.push("shift"),this.buffer.push(z.key);const ye=this.buffer.join("+");return this.buffer.length=0,ye},e.KeyboardManager=a;const I=class I{get _colors(){const z=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(z),(0,n.shadow)(this,"_colors",z)}convert(z){const ye=(0,r.getRGB)(z);if(!window.matchMedia("(forced-colors: active)").matches)return ye;for(const[we,Ie]of this._colors)if(Ie.every((je,Re)=>je===ye[Re]))return I._colorsMapping.get(we);return ye}getHexCode(z){const ye=this._colors.get(z);return ye?n.Util.makeHexColor(...ye):z}};Qe(I,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=I;e.ColorManager=w;const qe=class qe{constructor(z,ye,we,Ie,je,Re){ce(this,te);ce(this,c,null);ce(this,R,new Map);ce(this,L,new Map);ce(this,Q,null);ce(this,G,null);ce(this,q,new v);ce(this,V,0);ce(this,se,new Set);ce(this,D,null);ce(this,X,null);ce(this,re,new Set);ce(this,N,null);ce(this,d,new O);ce(this,u,!1);ce(this,T,!1);ce(this,$,null);ce(this,U,n.AnnotationEditorType.NONE);ce(this,B,new Set);ce(this,Y,null);ce(this,ie,this.blur.bind(this));ce(this,le,this.focus.bind(this));ce(this,fe,this.copy.bind(this));ce(this,be,this.cut.bind(this));ce(this,me,this.paste.bind(this));ce(this,ve,this.keydown.bind(this));ce(this,Z,this.onEditingAction.bind(this));ce(this,ee,this.onPageChanging.bind(this));ce(this,M,this.onScaleChanging.bind(this));ce(this,H,this.onRotationChanging.bind(this));ce(this,J,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ce(this,oe,[0,0]);ce(this,ge,null);ce(this,Ae,null);ce(this,_e,null);ue(this,Ae,z),ue(this,_e,ye),ue(this,Q,we),this._eventBus=Ie,this._eventBus._on("editingaction",i(this,Z)),this._eventBus._on("pagechanging",i(this,ee)),this._eventBus._on("scalechanging",i(this,M)),this._eventBus._on("rotationchanging",i(this,H)),ue(this,G,je.annotationStorage),ue(this,N,je.filterFactory),ue(this,Y,Re),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const z=qe.prototype,ye=je=>{const{activeElement:Re}=document;return Re&&i(je,Ae).contains(Re)&&je.hasSomethingToControl()},we=this.TRANSLATE_SMALL,Ie=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],z.selectAll],[["ctrl+z","mac+meta+z"],z.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],z.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],z.delete],[["Escape","mac+Escape"],z.unselectAll],[["ArrowLeft","mac+ArrowLeft"],z.translateSelectedEditors,{args:[-we,0],checker:ye}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],z.translateSelectedEditors,{args:[-Ie,0],checker:ye}],[["ArrowRight","mac+ArrowRight"],z.translateSelectedEditors,{args:[we,0],checker:ye}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],z.translateSelectedEditors,{args:[Ie,0],checker:ye}],[["ArrowUp","mac+ArrowUp"],z.translateSelectedEditors,{args:[0,-we],checker:ye}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],z.translateSelectedEditors,{args:[0,-Ie],checker:ye}],[["ArrowDown","mac+ArrowDown"],z.translateSelectedEditors,{args:[0,we],checker:ye}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],z.translateSelectedEditors,{args:[0,Ie],checker:ye}]]))}destroy(){ne(this,te,At).call(this),ne(this,te,Wt).call(this),this._eventBus._off("editingaction",i(this,Z)),this._eventBus._off("pagechanging",i(this,ee)),this._eventBus._off("scalechanging",i(this,M)),this._eventBus._off("rotationchanging",i(this,H));for(const z of i(this,L).values())z.destroy();i(this,L).clear(),i(this,R).clear(),i(this,re).clear(),ue(this,c,null),i(this,B).clear(),i(this,q).destroy(),i(this,Q).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",i(this,Y)?i(this,N).addHCMFilter(i(this,Y).foreground,i(this,Y).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(i(this,Ae)).direction)}editAltText(z){var ye;(ye=i(this,Q))==null||ye.editAltText(this,z)}onPageChanging({pageNumber:z}){ue(this,V,z-1)}focusMainContainer(){i(this,Ae).focus()}findParent(z,ye){for(const we of i(this,L).values()){const{x:Ie,y:je,width:Re,height:W}=we.div.getBoundingClientRect();if(z>=Ie&&z<=Ie+Re&&ye>=je&&ye<=je+W)return we}return null}disableUserSelect(z=!1){i(this,_e).classList.toggle("noUserSelect",z)}addShouldRescale(z){i(this,re).add(z)}removeShouldRescale(z){i(this,re).delete(z)}onScaleChanging({scale:z}){this.commitOrRemove(),this.viewParameters.realScale=z*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ye of i(this,re))ye.onScaleChanging()}onRotationChanging({pagesRotation:z}){this.commitOrRemove(),this.viewParameters.rotation=z}addToAnnotationStorage(z){!z.isEmpty()&&i(this,G)&&!i(this,G).has(z.id)&&i(this,G).setValue(z.id,z)}blur(){if(!this.hasSelection)return;const{activeElement:z}=document;for(const ye of i(this,B))if(ye.div.contains(z)){ue(this,$,[ye,z]),ye._focusEventsAllowed=!1;break}}focus(){if(!i(this,$))return;const[z,ye]=i(this,$);ue(this,$,null),ye.addEventListener("focusin",()=>{z._focusEventsAllowed=!0},{once:!0}),ye.focus()}addEditListeners(){ne(this,te,Ht).call(this),ne(this,te,zt).call(this)}removeEditListeners(){ne(this,te,At).call(this),ne(this,te,Vt).call(this)}copy(z){var we;if(z.preventDefault(),(we=i(this,c))==null||we.commitOrRemove(),!this.hasSelection)return;const ye=[];for(const Ie of i(this,B)){const je=Ie.serialize(!0);je&&ye.push(je)}ye.length!==0&&z.clipboardData.setData("application/pdfjs",JSON.stringify(ye))}cut(z){this.copy(z),this.delete()}paste(z){z.preventDefault();const{clipboardData:ye}=z;for(const je of ye.items)for(const Re of i(this,X))if(Re.isHandlingMimeForPasting(je.type)){Re.paste(je,this.currentLayer);return}let we=ye.getData("application/pdfjs");if(!we)return;try{we=JSON.parse(we)}catch(je){(0,n.warn)(`paste: "${je.message}".`);return}if(!Array.isArray(we))return;this.unselectAll();const Ie=this.currentLayer;try{const je=[];for(const j of we){const K=Ie.deserialize(j);if(!K)return;je.push(K)}const Re=()=>{for(const j of je)ne(this,te,Gt).call(this,j);ne(this,te,qt).call(this,je)},W=()=>{for(const j of je)j.remove()};this.addCommands({cmd:Re,undo:W,mustExec:!0})}catch(je){(0,n.warn)(`paste: "${je.message}".`)}}keydown(z){var ye;(ye=this.getActive())!=null&&ye.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,z)}onEditingAction(z){["undo","redo","delete","selectAll"].includes(z.name)&&this[z.name]()}setEditingState(z){z?(ne(this,te,Sn).call(this),ne(this,te,Ht).call(this),ne(this,te,zt).call(this),ne(this,te,nt).call(this,{isEditing:i(this,U)!==n.AnnotationEditorType.NONE,isEmpty:ne(this,te,pt).call(this),hasSomethingToUndo:i(this,q).hasSomethingToUndo(),hasSomethingToRedo:i(this,q).hasSomethingToRedo(),hasSelectedEditor:!1})):(ne(this,te,Wt).call(this),ne(this,te,At).call(this),ne(this,te,Vt).call(this),ne(this,te,nt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(z){if(!i(this,X)){ue(this,X,z);for(const ye of i(this,X))ne(this,te,ht).call(this,ye.defaultPropertiesToUpdate)}}getId(){return i(this,d).getId()}get currentLayer(){return i(this,L).get(i(this,V))}getLayer(z){return i(this,L).get(z)}get currentPageIndex(){return i(this,V)}addLayer(z){i(this,L).set(z.pageIndex,z),i(this,u)?z.enable():z.disable()}removeLayer(z){i(this,L).delete(z.pageIndex)}updateMode(z,ye=null){if(i(this,U)!==z){if(ue(this,U,z),z===n.AnnotationEditorType.NONE){this.setEditingState(!1),ne(this,te,Pn).call(this);return}this.setEditingState(!0),ne(this,te,Cn).call(this),this.unselectAll();for(const we of i(this,L).values())we.updateMode(z);if(ye){for(const we of i(this,R).values())if(we.annotationElementId===ye){this.setSelected(we),we.enterInEditMode();break}}}}updateToolbar(z){z!==i(this,U)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:z})}updateParams(z,ye){if(i(this,X)){if(z===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(z);return}for(const we of i(this,B))we.updateParams(z,ye);for(const we of i(this,X))we.updateDefaultParams(z,ye)}}enableWaiting(z=!1){if(i(this,T)!==z){ue(this,T,z);for(const ye of i(this,L).values())z?ye.disableClick():ye.enableClick(),ye.div.classList.toggle("waiting",z)}}getEditors(z){const ye=[];for(const we of i(this,R).values())we.pageIndex===z&&ye.push(we);return ye}getEditor(z){return i(this,R).get(z)}addEditor(z){i(this,R).set(z.id,z)}removeEditor(z){var ye;i(this,R).delete(z.id),this.unselect(z),(!z.annotationElementId||!i(this,se).has(z.annotationElementId))&&((ye=i(this,G))==null||ye.remove(z.id))}addDeletedAnnotationElement(z){i(this,se).add(z.annotationElementId),z.deleted=!0}isDeletedAnnotationElement(z){return i(this,se).has(z)}removeDeletedAnnotationElement(z){i(this,se).delete(z.annotationElementId),z.deleted=!1}setActiveEditor(z){i(this,c)!==z&&(ue(this,c,z),z&&ne(this,te,ht).call(this,z.propertiesToUpdate))}toggleSelected(z){if(i(this,B).has(z)){i(this,B).delete(z),z.unselect(),ne(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection});return}i(this,B).add(z),z.select(),ne(this,te,ht).call(this,z.propertiesToUpdate),ne(this,te,nt).call(this,{hasSelectedEditor:!0})}setSelected(z){for(const ye of i(this,B))ye!==z&&ye.unselect();i(this,B).clear(),i(this,B).add(z),z.select(),ne(this,te,ht).call(this,z.propertiesToUpdate),ne(this,te,nt).call(this,{hasSelectedEditor:!0})}isSelected(z){return i(this,B).has(z)}unselect(z){z.unselect(),i(this,B).delete(z),ne(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return i(this,B).size!==0}undo(){i(this,q).undo(),ne(this,te,nt).call(this,{hasSomethingToUndo:i(this,q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ne(this,te,pt).call(this)})}redo(){i(this,q).redo(),ne(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:i(this,q).hasSomethingToRedo(),isEmpty:ne(this,te,pt).call(this)})}addCommands(z){i(this,q).add(z),ne(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ne(this,te,pt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const z=[...i(this,B)],ye=()=>{for(const Ie of z)Ie.remove()},we=()=>{for(const Ie of z)ne(this,te,Gt).call(this,Ie)};this.addCommands({cmd:ye,undo:we,mustExec:!0})}commitOrRemove(){var z;(z=i(this,c))==null||z.commitOrRemove()}hasSomethingToControl(){return i(this,c)||this.hasSelection}selectAll(){for(const z of i(this,B))z.commit();ne(this,te,qt).call(this,i(this,R).values())}unselectAll(){if(i(this,c)){i(this,c).commitOrRemove();return}if(this.hasSelection){for(const z of i(this,B))z.unselect();i(this,B).clear(),ne(this,te,nt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(z,ye,we=!1){if(we||this.commitOrRemove(),!this.hasSelection)return;i(this,oe)[0]+=z,i(this,oe)[1]+=ye;const[Ie,je]=i(this,oe),Re=[...i(this,B)],W=1e3;i(this,ge)&&clearTimeout(i(this,ge)),ue(this,ge,setTimeout(()=>{ue(this,ge,null),i(this,oe)[0]=i(this,oe)[1]=0,this.addCommands({cmd:()=>{for(const j of Re)i(this,R).has(j.id)&&j.translateInPage(Ie,je)},undo:()=>{for(const j of Re)i(this,R).has(j.id)&&j.translateInPage(-Ie,-je)},mustExec:!1})},W));for(const j of Re)j.translateInPage(z,ye)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ue(this,D,new Map);for(const z of i(this,B))i(this,D).set(z,{savedX:z.x,savedY:z.y,savedPageIndex:z.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!i(this,D))return!1;this.disableUserSelect(!1);const z=i(this,D);ue(this,D,null);let ye=!1;for(const[{x:Ie,y:je,pageIndex:Re},W]of z)W.newX=Ie,W.newY=je,W.newPageIndex=Re,ye||(ye=Ie!==W.savedX||je!==W.savedY||Re!==W.savedPageIndex);if(!ye)return!1;const we=(Ie,je,Re,W)=>{if(i(this,R).has(Ie.id)){const j=i(this,L).get(W);j?Ie._setParentAndPosition(j,je,Re):(Ie.pageIndex=W,Ie.x=je,Ie.y=Re)}};return this.addCommands({cmd:()=>{for(const[Ie,{newX:je,newY:Re,newPageIndex:W}]of z)we(Ie,je,Re,W)},undo:()=>{for(const[Ie,{savedX:je,savedY:Re,savedPageIndex:W}]of z)we(Ie,je,Re,W)},mustExec:!0}),!0}dragSelectedEditors(z,ye){if(i(this,D))for(const we of i(this,D).keys())we.drag(z,ye)}rebuild(z){if(z.parent===null){const ye=this.getLayer(z.pageIndex);ye?(ye.changeParent(z),ye.addOrRebuild(z)):(this.addEditor(z),this.addToAnnotationStorage(z),z.rebuild())}else z.parent.addOrRebuild(z)}isActive(z){return i(this,c)===z}getActive(){return i(this,c)}getMode(){return i(this,U)}get imageManager(){return(0,n.shadow)(this,"imageManager",new h)}};c=new WeakMap,R=new WeakMap,L=new WeakMap,Q=new WeakMap,G=new WeakMap,q=new WeakMap,V=new WeakMap,se=new WeakMap,D=new WeakMap,X=new WeakMap,re=new WeakMap,N=new WeakMap,d=new WeakMap,u=new WeakMap,T=new WeakMap,$=new WeakMap,U=new WeakMap,B=new WeakMap,Y=new WeakMap,ie=new WeakMap,le=new WeakMap,fe=new WeakMap,be=new WeakMap,me=new WeakMap,ve=new WeakMap,Z=new WeakMap,ee=new WeakMap,M=new WeakMap,H=new WeakMap,J=new WeakMap,oe=new WeakMap,ge=new WeakMap,Ae=new WeakMap,_e=new WeakMap,te=new WeakSet,Sn=function(){window.addEventListener("focus",i(this,le)),window.addEventListener("blur",i(this,ie))},Wt=function(){window.removeEventListener("focus",i(this,le)),window.removeEventListener("blur",i(this,ie))},Ht=function(){window.addEventListener("keydown",i(this,ve),{capture:!0})},At=function(){window.removeEventListener("keydown",i(this,ve),{capture:!0})},zt=function(){document.addEventListener("copy",i(this,fe)),document.addEventListener("cut",i(this,be)),document.addEventListener("paste",i(this,me))},Vt=function(){document.removeEventListener("copy",i(this,fe)),document.removeEventListener("cut",i(this,be)),document.removeEventListener("paste",i(this,me))},nt=function(z){Object.entries(z).some(([we,Ie])=>i(this,J)[we]!==Ie)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(i(this,J),z)})},ht=function(z){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:z})},Cn=function(){if(!i(this,u)){ue(this,u,!0);for(const z of i(this,L).values())z.enable()}},Pn=function(){if(this.unselectAll(),i(this,u)){ue(this,u,!1);for(const z of i(this,L).values())z.disable()}},Gt=function(z){const ye=i(this,L).get(z.pageIndex);ye?ye.addOrRebuild(z):this.addEditor(z)},pt=function(){if(i(this,R).size===0)return!0;if(i(this,R).size===1)for(const z of i(this,R).values())return z.isEmpty();return!1},qt=function(z){i(this,B).clear();for(const ye of z)ye.isEmpty()||(i(this,B).add(ye),ye.select());ne(this,te,nt).call(this,{hasSelectedEditor:!0})},Qe(qe,"TRANSLATE_SMALL",1),Qe(qe,"TRANSLATE_BIG",10);let k=qe;e.AnnotationEditorUIManager=k},(t,e,s)=>{var V,se,D,X,re,N,d,u,T,$,U,B,at,lt,Xt,Et,St,ft,gt;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=l,e.getColorValues=R,e.getCurrentTransform=L,e.getCurrentTransformInverse=Q,e.getFilenameFromUrl=g,e.getPdfFilenameFromUrl=E,e.getRGB=c,e.getXfaPageViewport=I,e.isDataScheme=P,e.isPdfFile=A,e.isValidFetchUrl=S,e.loadScript=p,e.noContextMenu=o,e.setLayerDimensions=G;var n=s(7),r=s(1);const y="http://www.w3.org/2000/svg",q=class q{};Qe(q,"CSS",96),Qe(q,"PDF",72),Qe(q,"PDF_TO_CSS_UNITS",q.CSS/q.PDF);let C=q;e.PixelsPerInch=C;class O extends n.BaseFilterFactory{constructor({docId:M,ownerDocument:H=globalThis.document}={}){super();ce(this,B);ce(this,V);ce(this,se);ce(this,D);ce(this,X);ce(this,re);ce(this,N);ce(this,d);ce(this,u);ce(this,T);ce(this,$);ce(this,U,0);ue(this,D,M),ue(this,X,H)}addFilter(M){if(!M)return"none";let H=i(this,B,at).get(M);if(H)return H;let J,oe,ge,Ae;if(M.length===1){const Ce=M[0],Ue=new Array(256);for(let $e=0;$e<256;$e++)Ue[$e]=Ce[$e]/255;Ae=J=oe=ge=Ue.join(",")}else{const[Ce,Ue,$e]=M,He=new Array(256),ke=new Array(256),Oe=new Array(256);for(let ze=0;ze<256;ze++)He[ze]=Ce[ze]/255,ke[ze]=Ue[ze]/255,Oe[ze]=$e[ze]/255;J=He.join(","),oe=ke.join(","),ge=Oe.join(","),Ae=`${J}${oe}${ge}`}if(H=i(this,B,at).get(Ae),H)return i(this,B,at).set(M,H),H;const _e=`g_${i(this,D)}_transfer_map_${ut(this,U)._++}`,te=`url(#${_e})`;i(this,B,at).set(M,te),i(this,B,at).set(Ae,te);const Pe=ne(this,B,Et).call(this,_e);return ne(this,B,ft).call(this,J,oe,ge,Pe),te}addHCMFilter(M,H){var Ue;const J=`${M}-${H}`;if(i(this,N)===J)return i(this,d);if(ue(this,N,J),ue(this,d,"none"),(Ue=i(this,re))==null||Ue.remove(),!M||!H)return i(this,d);const oe=ne(this,B,gt).call(this,M);M=r.Util.makeHexColor(...oe);const ge=ne(this,B,gt).call(this,H);if(H=r.Util.makeHexColor(...ge),i(this,B,lt).style.color="",M==="#000000"&&H==="#ffffff"||M===H)return i(this,d);const Ae=new Array(256);for(let $e=0;$e<=255;$e++){const He=$e/255;Ae[$e]=He<=.03928?He/12.92:((He+.055)/1.055)**2.4}const _e=Ae.join(","),te=`g_${i(this,D)}_hcm_filter`,Pe=ue(this,u,ne(this,B,Et).call(this,te));ne(this,B,ft).call(this,_e,_e,_e,Pe),ne(this,B,Xt).call(this,Pe);const Ce=($e,He)=>{const ke=oe[$e]/255,Oe=ge[$e]/255,ze=new Array(He+1);for(let Xe=0;Xe<=He;Xe++)ze[Xe]=ke+Xe/He*(Oe-ke);return ze.join(",")};return ne(this,B,ft).call(this,Ce(0,5),Ce(1,5),Ce(2,5),Pe),ue(this,d,`url(#${te})`),i(this,d)}addHighlightHCMFilter(M,H,J,oe){var Oe;const ge=`${M}-${H}-${J}-${oe}`;if(i(this,T)===ge)return i(this,$);if(ue(this,T,ge),ue(this,$,"none"),(Oe=i(this,u))==null||Oe.remove(),!M||!H)return i(this,$);const[Ae,_e]=[M,H].map(ne(this,B,gt).bind(this));let te=Math.round(.2126*Ae[0]+.7152*Ae[1]+.0722*Ae[2]),Pe=Math.round(.2126*_e[0]+.7152*_e[1]+.0722*_e[2]),[Ce,Ue]=[J,oe].map(ne(this,B,gt).bind(this));Pe<te&&([te,Pe,Ce,Ue]=[Pe,te,Ue,Ce]),i(this,B,lt).style.color="";const $e=(ze,Xe,Ee)=>{const ae=new Array(256),de=(Pe-te)/Ee,Me=ze/255,qe=(Xe-ze)/(255*Ee);let Ge=0;for(let z=0;z<=Ee;z++){const ye=Math.round(te+z*de),we=Me+z*qe;for(let Ie=Ge;Ie<=ye;Ie++)ae[Ie]=we;Ge=ye+1}for(let z=Ge;z<256;z++)ae[z]=ae[Ge-1];return ae.join(",")},He=`g_${i(this,D)}_hcm_highlight_filter`,ke=ue(this,u,ne(this,B,Et).call(this,He));return ne(this,B,Xt).call(this,ke),ne(this,B,ft).call(this,$e(Ce[0],Ue[0],5),$e(Ce[1],Ue[1],5),$e(Ce[2],Ue[2],5),ke),ue(this,$,`url(#${He})`),i(this,$)}destroy(M=!1){M&&(i(this,d)||i(this,$))||(i(this,se)&&(i(this,se).parentNode.parentNode.remove(),ue(this,se,null)),i(this,V)&&(i(this,V).clear(),ue(this,V,null)),ue(this,U,0))}}V=new WeakMap,se=new WeakMap,D=new WeakMap,X=new WeakMap,re=new WeakMap,N=new WeakMap,d=new WeakMap,u=new WeakMap,T=new WeakMap,$=new WeakMap,U=new WeakMap,B=new WeakSet,at=function(){return i(this,V)||ue(this,V,new Map)},lt=function(){if(!i(this,se)){const M=i(this,X).createElement("div"),{style:H}=M;H.visibility="hidden",H.contain="strict",H.width=H.height=0,H.position="absolute",H.top=H.left=0,H.zIndex=-1;const J=i(this,X).createElementNS(y,"svg");J.setAttribute("width",0),J.setAttribute("height",0),ue(this,se,i(this,X).createElementNS(y,"defs")),M.append(J),J.append(i(this,se)),i(this,X).body.append(M)}return i(this,se)},Xt=function(M){const H=i(this,X).createElementNS(y,"feColorMatrix");H.setAttribute("type","matrix"),H.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),M.append(H)},Et=function(M){const H=i(this,X).createElementNS(y,"filter");return H.setAttribute("color-interpolation-filters","sRGB"),H.setAttribute("id",M),i(this,B,lt).append(H),H},St=function(M,H,J){const oe=i(this,X).createElementNS(y,H);oe.setAttribute("type","discrete"),oe.setAttribute("tableValues",J),M.append(oe)},ft=function(M,H,J,oe){const ge=i(this,X).createElementNS(y,"feComponentTransfer");oe.append(ge),ne(this,B,St).call(this,ge,"feFuncR",M),ne(this,B,St).call(this,ge,"feFuncG",H),ne(this,B,St).call(this,ge,"feFuncB",J)},gt=function(M){return i(this,B,lt).style.color=M,c(getComputedStyle(i(this,B,lt)).getPropertyValue("color"))},e.DOMFilterFactory=O;class h extends n.BaseCanvasFactory{constructor({ownerDocument:ee=globalThis.document}={}){super(),this._document=ee}_createCanvas(ee,M){const H=this._document.createElement("canvas");return H.width=ee,H.height=M,H}}e.DOMCanvasFactory=h;async function v(Z,ee=!1){if(S(Z,document.baseURI)){const M=await fetch(Z);if(!M.ok)throw new Error(M.statusText);return ee?new Uint8Array(await M.arrayBuffer()):(0,r.stringToBytes)(await M.text())}return new Promise((M,H)=>{const J=new XMLHttpRequest;J.open("GET",Z,!0),ee&&(J.responseType="arraybuffer"),J.onreadystatechange=()=>{if(J.readyState===XMLHttpRequest.DONE){if(J.status===200||J.status===0){let oe;if(ee&&J.response?oe=new Uint8Array(J.response):!ee&&J.responseText&&(oe=(0,r.stringToBytes)(J.responseText)),oe){M(oe);return}}H(new Error(J.statusText))}},J.send(null)})}class a extends n.BaseCMapReaderFactory{_fetchData(ee,M){return v(ee,this.isCompressed).then(H=>({cMapData:H,compressionType:M}))}}e.DOMCMapReaderFactory=a;class w extends n.BaseStandardFontDataFactory{_fetchData(ee){return v(ee,!0)}}e.DOMStandardFontDataFactory=w;class k extends n.BaseSVGFactory{_createSVG(ee){return document.createElementNS(y,ee)}}e.DOMSVGFactory=k;class b{constructor({viewBox:ee,scale:M,rotation:H,offsetX:J=0,offsetY:oe=0,dontFlip:ge=!1}){this.viewBox=ee,this.scale=M,this.rotation=H,this.offsetX=J,this.offsetY=oe;const Ae=(ee[2]+ee[0])/2,_e=(ee[3]+ee[1])/2;let te,Pe,Ce,Ue;switch(H%=360,H<0&&(H+=360),H){case 180:te=-1,Pe=0,Ce=0,Ue=1;break;case 90:te=0,Pe=1,Ce=1,Ue=0;break;case 270:te=0,Pe=-1,Ce=-1,Ue=0;break;case 0:te=1,Pe=0,Ce=0,Ue=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ge&&(Ce=-Ce,Ue=-Ue);let $e,He,ke,Oe;te===0?($e=Math.abs(_e-ee[1])*M+J,He=Math.abs(Ae-ee[0])*M+oe,ke=(ee[3]-ee[1])*M,Oe=(ee[2]-ee[0])*M):($e=Math.abs(Ae-ee[0])*M+J,He=Math.abs(_e-ee[1])*M+oe,ke=(ee[2]-ee[0])*M,Oe=(ee[3]-ee[1])*M),this.transform=[te*M,Pe*M,Ce*M,Ue*M,$e-te*M*Ae-Ce*M*_e,He-Pe*M*Ae-Ue*M*_e],this.width=ke,this.height=Oe}get rawDims(){const{viewBox:ee}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:ee[2]-ee[0],pageHeight:ee[3]-ee[1],pageX:ee[0],pageY:ee[1]})}clone({scale:ee=this.scale,rotation:M=this.rotation,offsetX:H=this.offsetX,offsetY:J=this.offsetY,dontFlip:oe=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:ee,rotation:M,offsetX:H,offsetY:J,dontFlip:oe})}convertToViewportPoint(ee,M){return r.Util.applyTransform([ee,M],this.transform)}convertToViewportRectangle(ee){const M=r.Util.applyTransform([ee[0],ee[1]],this.transform),H=r.Util.applyTransform([ee[2],ee[3]],this.transform);return[M[0],M[1],H[0],H[1]]}convertToPdfPoint(ee,M){return r.Util.applyInverseTransform([ee,M],this.transform)}}e.PageViewport=b;class x extends r.BaseException{constructor(ee,M=0){super(ee,"RenderingCancelledException"),this.extraDelay=M}}e.RenderingCancelledException=x;function P(Z){const ee=Z.length;let M=0;for(;M<ee&&Z[M].trim()==="";)M++;return Z.substring(M,M+5).toLowerCase()==="data:"}function A(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function g(Z,ee=!1){return ee||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function E(Z,ee="document.pdf"){if(typeof Z!="string")return ee;if(P(Z))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ee;const M=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,H=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,J=M.exec(Z);let oe=H.exec(J[1])||H.exec(J[2])||H.exec(J[3]);if(oe&&(oe=oe[0],oe.includes("%")))try{oe=H.exec(decodeURIComponent(oe))[0]}catch{}return oe||ee}class F{constructor(){Qe(this,"started",Object.create(null));Qe(this,"times",[])}time(ee){ee in this.started&&(0,r.warn)(`Timer is already running for ${ee}`),this.started[ee]=Date.now()}timeEnd(ee){ee in this.started||(0,r.warn)(`Timer has not been started for ${ee}`),this.times.push({name:ee,start:this.started[ee],end:Date.now()}),delete this.started[ee]}toString(){const ee=[];let M=0;for(const{name:H}of this.times)M=Math.max(H.length,M);for(const{name:H,start:J,end:oe}of this.times)ee.push(`${H.padEnd(M)} ${oe-J}ms
`);return ee.join("")}}e.StatTimer=F;function S(Z,ee){try{const{protocol:M}=ee?new URL(Z,ee):new URL(Z);return M==="http:"||M==="https:"}catch{return!1}}function o(Z){Z.preventDefault()}function p(Z,ee=!1){return new Promise((M,H)=>{const J=document.createElement("script");J.src=Z,J.onload=function(oe){ee&&J.remove(),M(oe)},J.onerror=function(){H(new Error(`Cannot load script at: ${J.src}`))},(document.head||document.documentElement).append(J)})}function l(Z){console.log("Deprecated API usage: "+Z)}let m;class f{static toDateObject(ee){if(!ee||typeof ee!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const M=m.exec(ee);if(!M)return null;const H=parseInt(M[1],10);let J=parseInt(M[2],10);J=J>=1&&J<=12?J-1:0;let oe=parseInt(M[3],10);oe=oe>=1&&oe<=31?oe:1;let ge=parseInt(M[4],10);ge=ge>=0&&ge<=23?ge:0;let Ae=parseInt(M[5],10);Ae=Ae>=0&&Ae<=59?Ae:0;let _e=parseInt(M[6],10);_e=_e>=0&&_e<=59?_e:0;const te=M[7]||"Z";let Pe=parseInt(M[8],10);Pe=Pe>=0&&Pe<=23?Pe:0;let Ce=parseInt(M[9],10)||0;return Ce=Ce>=0&&Ce<=59?Ce:0,te==="-"?(ge+=Pe,Ae+=Ce):te==="+"&&(ge-=Pe,Ae-=Ce),new Date(Date.UTC(H,J,oe,ge,Ae,_e))}}e.PDFDateString=f;function I(Z,{scale:ee=1,rotation:M=0}){const{width:H,height:J}=Z.attributes.style,oe=[0,0,parseInt(H),parseInt(J)];return new b({viewBox:oe,scale:ee,rotation:M})}function c(Z){if(Z.startsWith("#")){const ee=parseInt(Z.slice(1),16);return[(ee&16711680)>>16,(ee&65280)>>8,ee&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(ee=>parseInt(ee)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(ee=>parseInt(ee)).slice(0,3):((0,r.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function R(Z){const ee=document.createElement("span");ee.style.visibility="hidden",document.body.append(ee);for(const M of Z.keys()){ee.style.color=M;const H=window.getComputedStyle(ee).color;Z.set(M,c(H))}ee.remove()}function L(Z){const{a:ee,b:M,c:H,d:J,e:oe,f:ge}=Z.getTransform();return[ee,M,H,J,oe,ge]}function Q(Z){const{a:ee,b:M,c:H,d:J,e:oe,f:ge}=Z.getTransform().invertSelf();return[ee,M,H,J,oe,ge]}function G(Z,ee,M=!1,H=!0){if(ee instanceof b){const{pageWidth:J,pageHeight:oe}=ee.rawDims,{style:ge}=Z,Ae=r.FeatureTest.isCSSRoundSupported,_e=`var(--scale-factor) * ${J}px`,te=`var(--scale-factor) * ${oe}px`,Pe=Ae?`round(${_e}, 1px)`:`calc(${_e})`,Ce=Ae?`round(${te}, 1px)`:`calc(${te})`;!M||ee.rotation%180===0?(ge.width=Pe,ge.height=Ce):(ge.width=Ce,ge.height=Pe)}H&&Z.setAttribute("data-main-rotation",ee.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,w){return"none"}addHighlightHCMFilter(a,w,k,b){return"none"}destroy(a=!1){}}e.BaseFilterFactory=r;class y{constructor(){this.constructor===y&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,w){if(a<=0||w<=0)throw new Error("Invalid canvas size");const k=this._createCanvas(a,w);return{canvas:k,context:k.getContext("2d")}}reset(a,w,k){if(!a.canvas)throw new Error("Canvas is not specified");if(w<=0||k<=0)throw new Error("Invalid canvas size");a.canvas.width=w,a.canvas.height=k}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,w){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=y;class C{constructor({baseUrl:a=null,isCompressed:w=!0}){this.constructor===C&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=w}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const w=this.baseUrl+a+(this.isCompressed?".bcmap":""),k=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(w,k).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(a,w){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=C;class O{constructor({baseUrl:a=null}){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${a}`;return this._fetchData(w).catch(k=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(a){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=O;class h{constructor(){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,w,k=!1){if(a<=0||w<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),k||(b.setAttribute("width",`${a}px`),b.setAttribute("height",`${w}px`)),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${a} ${w}`),b}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const r=3285377520,y=4294901760,C=65535;class O{constructor(v){this.h1=v?v&4294967295:r,this.h2=v?v&4294967295:r}update(v){let a,w;if(typeof v=="string"){a=new Uint8Array(v.length*2),w=0;for(let l=0,m=v.length;l<m;l++){const f=v.charCodeAt(l);f<=255?a[w++]=f:(a[w++]=f>>>8,a[w++]=f&255)}}else if((0,n.isArrayBuffer)(v))a=v.slice(),w=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=w>>2,b=w-k*4,x=new Uint32Array(a.buffer,0,k);let P=0,A=0,g=this.h1,E=this.h2;const F=3432918353,S=461845907,o=F&C,p=S&C;for(let l=0;l<k;l++)l&1?(P=x[l],P=P*F&y|P*o&C,P=P<<15|P>>>17,P=P*S&y|P*p&C,g^=P,g=g<<13|g>>>19,g=g*5+3864292196):(A=x[l],A=A*F&y|A*o&C,A=A<<15|A>>>17,A=A*S&y|A*p&C,E^=A,E=E<<13|E>>>19,E=E*5+3864292196);switch(P=0,b){case 3:P^=a[k*4+2]<<16;case 2:P^=a[k*4+1]<<8;case 1:P^=a[k*4],P=P*F&y|P*o&C,P=P<<15|P>>>17,P=P*S&y|P*p&C,k&1?g^=P:E^=P}this.h1=g,this.h2=E}hexdigest(){let v=this.h1,a=this.h2;return v^=a>>>1,v=v*3981806797&y|v*36045&C,a=a*4283543511&y|((a<<16|v>>>16)*2950163797&y)>>>16,v^=a>>>1,v=v*444984403&y|v*60499&C,a=a*3301882366&y|((a<<16|v>>>16)*3120437893&y)>>>16,v^=a>>>1,(v>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=O},(t,e,s)=>{var C;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class r{constructor({ownerDocument:h=globalThis.document,styleElement:v=null}){ce(this,C,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(h,v.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),i(this,C).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||i(this,C).has(h.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:v,src:a,style:w}=h,k=new FontFace(v,a,w);this.addNativeFontFace(k);try{await k.load(),i(this,C).add(v)}catch{(0,n.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(k)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=h.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(w){throw(0,n.warn)(`Failed to load font '${a.family}': '${w}'.`),h.disableFontFace=!0,w}}return}const v=h.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const w=this._queueLoadingCallback(a);this._prepareFontLoadEvent(h,w)})}}get isFontLoadingAPISupported(){var v;const h=!!((v=this._document)!=null&&v.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function v(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;a.length>0&&a[0].done;){const k=a.shift();setTimeout(k.callback,0)}}const{loadingRequests:a}=this,w={done:!1,complete:v,callback:h};return a.push(w),w}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,v){function a(c,R){return c.charCodeAt(R)<<24|c.charCodeAt(R+1)<<16|c.charCodeAt(R+2)<<8|c.charCodeAt(R+3)&255}function w(c,R,L,Q){const G=c.substring(0,R),q=c.substring(R+L);return G+Q+q}let k,b;const x=this._document.createElement("canvas");x.width=1,x.height=1;const P=x.getContext("2d");let A=0;function g(c,R){if(++A>30){(0,n.warn)("Load test font never loaded."),R();return}if(P.font="30px "+c,P.fillText(".",0,20),P.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(g.bind(null,c,R))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=w(F,976,E.length,E);const o=16,p=1482184792;let l=a(F,o);for(k=0,b=E.length-3;k<b;k+=4)l=l-p+a(E,k)|0;k<E.length&&(l=l-p+a(E+"XXX",k)|0),F=w(F,o,4,(0,n.string32)(l));const m=`url(data:font/opentype;base64,${btoa(F)});`,f=`@font-face {font-family:"${E}";src:${m}}`;this.insertRule(f);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const c of[h.loadedName,E]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=c,I.append(R)}this._document.body.append(I),g(E,()=>{I.remove(),v.complete()})}}C=new WeakMap,e.FontLoader=r;class y{constructor(h,{isEvalSupported:v=!0,disableFontFace:a=!1,ignoreErrors:w=!1,inspectFont:k=null}){this.compiledGlyphs=Object.create(null);for(const b in h)this[b]=h[b];this.isEvalSupported=v!==!1,this.disableFontFace=a===!0,this.ignoreErrors=w===!0,this._inspectFont=k}createNativeFontFace(){var v;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(v=this._inspectFont)==null||v.call(this,this),h}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const h=(0,n.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(h)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${v}}`}return(w=this._inspectFont)==null||w.call(this,this,v),a}getPathGenerator(h,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let a;try{a=h.get(this.loadedName+"_path_"+v)}catch(w){if(!this.ignoreErrors)throw w;return(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[v]=function(k,b){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const k of a){const b=k.args!==void 0?k.args.join(","):"";w.push("c.",k.cmd,"(",b,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",w.join(""))}return this.compiledGlyphs[v]=function(w,k){for(const b of a)b.cmd==="scale"&&(b.args=[k,-k]),w[b.cmd].apply(w,b.args)}}}e.FontFaceObject=y},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const r=function(v){return new Promise((a,w)=>{require$$5.readFile(v,(b,x)=>{if(b||!x){w(new Error(b));return}a(new Uint8Array(x))})})};class y extends n.BaseFilterFactory{}e.NodeFilterFactory=y;class C extends n.BaseCanvasFactory{_createCanvas(a,w){return require$$5.createCanvas(a,w)}}e.NodeCanvasFactory=C;class O extends n.BaseCMapReaderFactory{_fetchData(a,w){return r(a).then(k=>({cMapData:k,compressionType:w}))}}e.NodeCMapReaderFactory=O;class h extends n.BaseStandardFontDataFactory{_fetchData(a){return r(a)}}e.NodeStandardFontDataFactory=h},(t,e,s)=>{var se,Yt,Kt;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),r=s(6),y=s(12),C=s(13);const O=16,h=100,v=4096,a=15,w=10,k=1e3,b=16;function x(N,d){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){d.save(),this.__originalSave()},N.restore=function(){d.restore(),this.__originalRestore()},N.translate=function(T,$){d.translate(T,$),this.__originalTranslate(T,$)},N.scale=function(T,$){d.scale(T,$),this.__originalScale(T,$)},N.transform=function(T,$,U,B,Y,ie){d.transform(T,$,U,B,Y,ie),this.__originalTransform(T,$,U,B,Y,ie)},N.setTransform=function(T,$,U,B,Y,ie){d.setTransform(T,$,U,B,Y,ie),this.__originalSetTransform(T,$,U,B,Y,ie)},N.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},N.rotate=function(T){d.rotate(T),this.__originalRotate(T)},N.clip=function(T){d.clip(T),this.__originalClip(T)},N.moveTo=function(u,T){d.moveTo(u,T),this.__originalMoveTo(u,T)},N.lineTo=function(u,T){d.lineTo(u,T),this.__originalLineTo(u,T)},N.bezierCurveTo=function(u,T,$,U,B,Y){d.bezierCurveTo(u,T,$,U,B,Y),this.__originalBezierCurveTo(u,T,$,U,B,Y)},N.rect=function(u,T,$,U){d.rect(u,T,$,U),this.__originalRect(u,T,$,U)},N.closePath=function(){d.closePath(),this.__originalClosePath()},N.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class P{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,u,T){let $;return this.cache[d]!==void 0?($=this.cache[d],this.canvasFactory.reset($,u,T)):($=this.canvasFactory.create(u,T),this.cache[d]=$),$}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const u=this.cache[d];this.canvasFactory.destroy(u),delete this.cache[d]}}}function A(N,d,u,T,$,U,B,Y,ie,le){const[fe,be,me,ve,Z,ee]=(0,r.getCurrentTransform)(N);if(be===0&&me===0){const J=B*fe+Z,oe=Math.round(J),ge=Y*ve+ee,Ae=Math.round(ge),_e=(B+ie)*fe+Z,te=Math.abs(Math.round(_e)-oe)||1,Pe=(Y+le)*ve+ee,Ce=Math.abs(Math.round(Pe)-Ae)||1;return N.setTransform(Math.sign(fe),0,0,Math.sign(ve),oe,Ae),N.drawImage(d,u,T,$,U,0,0,te,Ce),N.setTransform(fe,be,me,ve,Z,ee),[te,Ce]}if(fe===0&&ve===0){const J=Y*me+Z,oe=Math.round(J),ge=B*be+ee,Ae=Math.round(ge),_e=(Y+le)*me+Z,te=Math.abs(Math.round(_e)-oe)||1,Pe=(B+ie)*be+ee,Ce=Math.abs(Math.round(Pe)-Ae)||1;return N.setTransform(0,Math.sign(be),Math.sign(me),0,oe,Ae),N.drawImage(d,u,T,$,U,0,0,Ce,te),N.setTransform(fe,be,me,ve,Z,ee),[Ce,te]}N.drawImage(d,u,T,$,U,B,Y,ie,le);const M=Math.hypot(fe,be),H=Math.hypot(me,ve);return[M*ie,H*le]}function g(N){const{width:d,height:u}=N;if(d>k||u>k)return null;const T=1e3,$=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=d+1;let B=new Uint8Array(U*(u+1)),Y,ie,le;const fe=d+7&-8;let be=new Uint8Array(fe*u),me=0;for(const H of N.data){let J=128;for(;J>0;)be[me++]=H&J?0:255,J>>=1}let ve=0;for(me=0,be[me]!==0&&(B[0]=1,++ve),ie=1;ie<d;ie++)be[me]!==be[me+1]&&(B[ie]=be[me]?2:1,++ve),me++;for(be[me]!==0&&(B[ie]=2,++ve),Y=1;Y<u;Y++){me=Y*fe,le=Y*U,be[me-fe]!==be[me]&&(B[le]=be[me]?1:8,++ve);let H=(be[me]?4:0)+(be[me-fe]?8:0);for(ie=1;ie<d;ie++)H=(H>>2)+(be[me+1]?4:0)+(be[me-fe+1]?8:0),$[H]&&(B[le+ie]=$[H],++ve),me++;if(be[me-fe]!==be[me]&&(B[le+ie]=be[me]?2:4,++ve),ve>T)return null}for(me=fe*(u-1),le=Y*U,be[me]!==0&&(B[le]=8,++ve),ie=1;ie<d;ie++)be[me]!==be[me+1]&&(B[le+ie]=be[me]?4:8,++ve),me++;if(be[me]!==0&&(B[le+ie]=4,++ve),ve>T)return null;const Z=new Int32Array([0,U,-1,0,-U,0,0,0,1]),ee=new Path2D;for(Y=0;ve&&Y<=u;Y++){let H=Y*U;const J=H+d;for(;H<J&&!B[H];)H++;if(H===J)continue;ee.moveTo(H%U,Y);const oe=H;let ge=B[H];do{const Ae=Z[ge];do H+=Ae;while(!B[H]);const _e=B[H];_e!==5&&_e!==10?(ge=_e,B[H]=0):(ge=_e&51*ge>>4,B[H]&=ge>>2|ge<<2),ee.lineTo(H%U,H/U|0),B[H]||--ve}while(oe!==H);--Y}return be=null,B=null,function(H){H.save(),H.scale(1/d,-1/u),H.translate(0,-u),H.fill(ee),H.beginPath(),H.restore()}}class E{constructor(d,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,u])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,u){this.x=d,this.y=u}updatePathMinMax(d,u,T){[u,T]=n.Util.applyTransform([u,T],d),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(d,u){const T=n.Util.applyTransform(u,d),$=n.Util.applyTransform(u.slice(2),d);this.minX=Math.min(this.minX,T[0],$[0]),this.minY=Math.min(this.minY,T[1],$[1]),this.maxX=Math.max(this.maxX,T[0],$[0]),this.maxY=Math.max(this.maxY,T[1],$[1])}updateScalingPathMinMax(d,u){n.Util.scaleMinMax(d,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(d,u,T,$,U,B,Y,ie,le,fe){const be=n.Util.bezierBoundingBox(u,T,$,U,B,Y,ie,le);if(fe){fe[0]=Math.min(fe[0],be[0],be[2]),fe[1]=Math.max(fe[1],be[0],be[2]),fe[2]=Math.min(fe[2],be[1],be[3]),fe[3]=Math.max(fe[3],be[1],be[3]);return}this.updateRectMinMax(d,be)}getPathBoundingBox(d=y.PathType.FILL,u=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(d===y.PathType.STROKE){u||(0,n.unreachable)("Stroke bounding box must include transform.");const $=n.Util.singularValueDecompose2dScale(u),U=$[0]*this.lineWidth/2,B=$[1]*this.lineWidth/2;T[0]-=U,T[1]-=B,T[2]+=U,T[3]+=B}return T}updateClipFromPath(){const d=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=y.PathType.FILL,u=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(d,u))}}function F(N,d){if(typeof ImageData<"u"&&d instanceof ImageData){N.putImageData(d,0,0);return}const u=d.height,T=d.width,$=u%b,U=(u-$)/b,B=$===0?U:U+1,Y=N.createImageData(T,b);let ie=0,le;const fe=d.data,be=Y.data;let me,ve,Z,ee;if(d.kind===n.ImageKind.GRAYSCALE_1BPP){const M=fe.byteLength,H=new Uint32Array(be.buffer,0,be.byteLength>>2),J=H.length,oe=T+7>>3,ge=4294967295,Ae=n.FeatureTest.isLittleEndian?4278190080:255;for(me=0;me<B;me++){for(Z=me<U?b:$,le=0,ve=0;ve<Z;ve++){const _e=M-ie;let te=0;const Pe=_e>oe?T:_e*8-7,Ce=Pe&-8;let Ue=0,$e=0;for(;te<Ce;te+=8)$e=fe[ie++],H[le++]=$e&128?ge:Ae,H[le++]=$e&64?ge:Ae,H[le++]=$e&32?ge:Ae,H[le++]=$e&16?ge:Ae,H[le++]=$e&8?ge:Ae,H[le++]=$e&4?ge:Ae,H[le++]=$e&2?ge:Ae,H[le++]=$e&1?ge:Ae;for(;te<Pe;te++)Ue===0&&($e=fe[ie++],Ue=128),H[le++]=$e&Ue?ge:Ae,Ue>>=1}for(;le<J;)H[le++]=0;N.putImageData(Y,0,me*b)}}else if(d.kind===n.ImageKind.RGBA_32BPP){for(ve=0,ee=T*b*4,me=0;me<U;me++)be.set(fe.subarray(ie,ie+ee)),ie+=ee,N.putImageData(Y,0,ve),ve+=b;me<B&&(ee=T*$*4,be.set(fe.subarray(ie,ie+ee)),N.putImageData(Y,0,ve))}else if(d.kind===n.ImageKind.RGB_24BPP)for(Z=b,ee=T*Z,me=0;me<B;me++){for(me>=U&&(Z=$,ee=T*Z),le=0,ve=ee;ve--;)be[le++]=fe[ie++],be[le++]=fe[ie++],be[le++]=fe[ie++],be[le++]=255;N.putImageData(Y,0,me*b)}else throw new Error(`bad image kind: ${d.kind}`)}function S(N,d){if(d.bitmap){N.drawImage(d.bitmap,0,0);return}const u=d.height,T=d.width,$=u%b,U=(u-$)/b,B=$===0?U:U+1,Y=N.createImageData(T,b);let ie=0;const le=d.data,fe=Y.data;for(let be=0;be<B;be++){const me=be<U?b:$;({srcPos:ie}=(0,C.convertBlackAndWhiteToRGBA)({src:le,srcPos:ie,dest:fe,width:T,height:me,nonBlackColor:0})),N.putImageData(Y,0,be*b)}}function o(N,d){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const T of u)N[T]!==void 0&&(d[T]=N[T]);N.setLineDash!==void 0&&(d.setLineDash(N.getLineDash()),d.lineDashOffset=N.lineDashOffset)}function p(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!n.isNodeJS){const{filter:d}=N;d!=="none"&&d!==""&&(N.filter="none")}}function l(N,d,u,T){const $=N.length;for(let U=3;U<$;U+=4){const B=N[U];if(B===0)N[U-3]=d,N[U-2]=u,N[U-1]=T;else if(B<255){const Y=255-B;N[U-3]=N[U-3]*B+d*Y>>8,N[U-2]=N[U-2]*B+u*Y>>8,N[U-1]=N[U-1]*B+T*Y>>8}}}function m(N,d,u){const T=N.length,$=1/255;for(let U=3;U<T;U+=4){const B=u?u[N[U]]:N[U];d[U]=d[U]*B*$|0}}function f(N,d,u){const T=N.length;for(let $=3;$<T;$+=4){const U=N[$-3]*77+N[$-2]*152+N[$-1]*28;d[$]=u?d[$]*u[U>>8]>>8:d[$]*U>>16}}function I(N,d,u,T,$,U,B,Y,ie,le,fe){const be=!!U,me=be?U[0]:0,ve=be?U[1]:0,Z=be?U[2]:0,ee=$==="Luminosity"?f:m,H=Math.min(T,Math.ceil(1048576/u));for(let J=0;J<T;J+=H){const oe=Math.min(H,T-J),ge=N.getImageData(Y-le,J+(ie-fe),u,oe),Ae=d.getImageData(Y,J+ie,u,oe);be&&l(ge.data,me,ve,Z),ee(ge.data,Ae.data,B),d.putImageData(Ae,Y,J+ie)}}function c(N,d,u,T){const $=T[0],U=T[1],B=T[2]-$,Y=T[3]-U;B===0||Y===0||(I(d.context,u,B,Y,d.subtype,d.backdrop,d.transferMap,$,U,d.offsetX,d.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(u.canvas,0,0),N.restore())}function R(N,d){const u=n.Util.singularValueDecompose2dScale(N);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:u[0]<=T||u[1]<=T}const L=["butt","round","square"],Q=["miter","round","bevel"],G={},q={},re=class re{constructor(d,u,T,$,U,{optionalContentConfig:B,markedContentStack:Y=null},ie,le){ce(this,se);this.ctx=d,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=T,this.canvasFactory=$,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Y||[],this.optionalContentConfig=B,this.cachedCanvases=new P(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ie,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=le,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,u=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):u}beginDrawing({transform:d,viewport:u,transparency:T=!1,background:$=null}){const U=this.ctx.canvas.width,B=this.ctx.canvas.height,Y=this.ctx.fillStyle;if(this.ctx.fillStyle=$||"#ffffff",this.ctx.fillRect(0,0,U,B),this.ctx.fillStyle=Y,T){const ie=this.cachedCanvases.getCanvas("transparent",U,B);this.compositeCtx=this.ctx,this.transparentCanvas=ie.canvas,this.ctx=ie.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),p(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(d,u,T,$){const U=d.argsArray,B=d.fnArray;let Y=u||0;const ie=U.length;if(ie===Y)return Y;const le=ie-Y>w&&typeof T=="function",fe=le?Date.now()+a:0;let be=0;const me=this.commonObjs,ve=this.objs;let Z;for(;;){if($!==void 0&&Y===$.nextBreakPoint)return $.breakIt(Y,T),Y;if(Z=B[Y],Z!==n.OPS.dependency)this[Z].apply(this,U[Y]);else for(const ee of U[Y]){const M=ee.startsWith("g_")?me:ve;if(!M.has(ee))return M.get(ee,T),Y}if(Y++,Y===ie)return Y;if(le&&++be>w){if(Date.now()>fe)return T(),Y;be=0}}}endDrawing(){ne(this,se,Yt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const u of d.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);d.clear()}this._cachedBitmapsMap.clear(),ne(this,se,Kt).call(this)}_scaleImage(d,u){const T=d.width,$=d.height;let U=Math.max(Math.hypot(u[0],u[1]),1),B=Math.max(Math.hypot(u[2],u[3]),1),Y=T,ie=$,le="prescale1",fe,be;for(;U>2&&Y>1||B>2&&ie>1;){let me=Y,ve=ie;U>2&&Y>1&&(me=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y/2),U/=Y/me),B>2&&ie>1&&(ve=ie>=16384?Math.floor(ie/2)-1||1:Math.ceil(ie)/2,B/=ie/ve),fe=this.cachedCanvases.getCanvas(le,me,ve),be=fe.context,be.clearRect(0,0,me,ve),be.drawImage(d,0,0,Y,ie,0,0,me,ve),d=fe.canvas,Y=me,ie=ve,le=le==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:Y,paintHeight:ie}}_createMaskCanvas(d){const u=this.ctx,{width:T,height:$}=d,U=this.current.fillColor,B=this.current.patternFill,Y=(0,r.getCurrentTransform)(u);let ie,le,fe,be;if((d.bitmap||d.data)&&d.count>1){const te=d.bitmap||d.data.buffer;le=JSON.stringify(B?Y:[Y.slice(0,4),U]),ie=this._cachedBitmapsMap.get(te),ie||(ie=new Map,this._cachedBitmapsMap.set(te,ie));const Pe=ie.get(le);if(Pe&&!B){const Ce=Math.round(Math.min(Y[0],Y[2])+Y[4]),Ue=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Pe,offsetX:Ce,offsetY:Ue}}fe=Pe}fe||(be=this.cachedCanvases.getCanvas("maskCanvas",T,$),S(be.context,d));let me=n.Util.transform(Y,[1/T,0,0,-1/$,0,0]);me=n.Util.transform(me,[1,0,0,1,0,-$]);const ve=n.Util.applyTransform([0,0],me),Z=n.Util.applyTransform([T,$],me),ee=n.Util.normalizeRect([ve[0],ve[1],Z[0],Z[1]]),M=Math.round(ee[2]-ee[0])||1,H=Math.round(ee[3]-ee[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",M,H),oe=J.context,ge=Math.min(ve[0],Z[0]),Ae=Math.min(ve[1],Z[1]);oe.translate(-ge,-Ae),oe.transform(...me),fe||(fe=this._scaleImage(be.canvas,(0,r.getCurrentTransformInverse)(oe)),fe=fe.img,ie&&B&&ie.set(le,fe)),oe.imageSmoothingEnabled=R((0,r.getCurrentTransform)(oe),d.interpolate),A(oe,fe,0,0,fe.width,fe.height,0,0,T,$),oe.globalCompositeOperation="source-in";const _e=n.Util.transform((0,r.getCurrentTransformInverse)(oe),[1,0,0,1,-ge,-Ae]);return oe.fillStyle=B?U.getPattern(u,this,_e,y.PathType.FILL):U,oe.fillRect(0,0,T,$),ie&&!B&&(this.cachedCanvases.delete("fillCanvas"),ie.set(le,J.canvas)),{canvas:J.canvas,offsetX:Math.round(ge),offsetY:Math.round(Ae)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=L[d]}setLineJoin(d){this.ctx.lineJoin=Q[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,u){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(d),T.lineDashOffset=u)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[u,T]of d)switch(u){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,u=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,$=this.cachedCanvases.getCanvas(T,d,u);this.suspendedCtx=this.ctx,this.ctx=$.context;const U=this.ctx;U.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,U),x(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,T=this.suspendedCtx;c(T,u,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(d,u,T,$,U,B){this.ctx.transform(d,u,T,$,U,B),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(d,u,T){const $=this.ctx,U=this.current;let B=U.x,Y=U.y,ie,le;const fe=(0,r.getCurrentTransform)($),be=fe[0]===0&&fe[3]===0||fe[1]===0&&fe[2]===0,me=be?T.slice(0):null;for(let ve=0,Z=0,ee=d.length;ve<ee;ve++)switch(d[ve]|0){case n.OPS.rectangle:B=u[Z++],Y=u[Z++];const M=u[Z++],H=u[Z++],J=B+M,oe=Y+H;$.moveTo(B,Y),M===0||H===0?$.lineTo(J,oe):($.lineTo(J,Y),$.lineTo(J,oe),$.lineTo(B,oe)),be||U.updateRectMinMax(fe,[B,Y,J,oe]),$.closePath();break;case n.OPS.moveTo:B=u[Z++],Y=u[Z++],$.moveTo(B,Y),be||U.updatePathMinMax(fe,B,Y);break;case n.OPS.lineTo:B=u[Z++],Y=u[Z++],$.lineTo(B,Y),be||U.updatePathMinMax(fe,B,Y);break;case n.OPS.curveTo:ie=B,le=Y,B=u[Z+4],Y=u[Z+5],$.bezierCurveTo(u[Z],u[Z+1],u[Z+2],u[Z+3],B,Y),U.updateCurvePathMinMax(fe,ie,le,u[Z],u[Z+1],u[Z+2],u[Z+3],B,Y,me),Z+=6;break;case n.OPS.curveTo2:ie=B,le=Y,$.bezierCurveTo(B,Y,u[Z],u[Z+1],u[Z+2],u[Z+3]),U.updateCurvePathMinMax(fe,ie,le,B,Y,u[Z],u[Z+1],u[Z+2],u[Z+3],me),B=u[Z+2],Y=u[Z+3],Z+=4;break;case n.OPS.curveTo3:ie=B,le=Y,B=u[Z+2],Y=u[Z+3],$.bezierCurveTo(u[Z],u[Z+1],B,Y,B,Y),U.updateCurvePathMinMax(fe,ie,le,u[Z],u[Z+1],B,Y,B,Y,me),Z+=4;break;case n.OPS.closePath:$.closePath();break}be&&U.updateScalingPathMinMax(fe,me),U.setCurrentPoint(B,Y)}closePath(){this.ctx.closePath()}stroke(d=!0){const u=this.ctx,T=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&(T!=null&&T.getPattern)?(u.save(),u.strokeStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),y.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const u=this.ctx,T=this.current.fillColor,$=this.current.patternFill;let U=!1;$&&(u.save(),u.fillStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),y.PathType.FILL),U=!0);const B=this.current.getClippedPathBoundingBox();this.contentVisible&&B!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),U&&u.restore(),d&&this.consumePath(B)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=q}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,u=this.ctx;if(d===void 0){u.beginPath();return}u.save(),u.beginPath();for(const T of d)u.setTransform(...T.transform),u.translate(T.x,T.y),T.addToPath(u,T.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,u){var fe;const T=this.commonObjs.get(d),$=this.current;if(!T)throw new Error(`Can't find font for ${d}`);if($.fontMatrix=T.fontMatrix||n.FONT_IDENTITY_MATRIX,($.fontMatrix[0]===0||$.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+d),u<0?(u=-u,$.fontDirection=-1):$.fontDirection=1,this.current.font=T,this.current.fontSize=u,T.isType3Font)return;const U=T.loadedName||"sans-serif",B=((fe=T.systemFontInfo)==null?void 0:fe.css)||`"${U}", ${T.fallbackName}`;let Y="normal";T.black?Y="900":T.bold&&(Y="bold");const ie=T.italic?"italic":"normal";let le=u;u<O?le=O:u>h&&(le=h),this.current.fontSizeScale=u/le,this.ctx.font=`${ie} ${Y} ${le}px ${B}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,u){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=u}setLeadingMoveText(d,u){this.setLeading(-u),this.moveText(d,u)}setTextMatrix(d,u,T,$,U,B){this.current.textMatrix=[d,u,T,$,U,B],this.current.textMatrixScale=Math.hypot(d,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,u,T,$){const U=this.ctx,B=this.current,Y=B.font,ie=B.textRenderingMode,le=B.fontSize/B.fontSizeScale,fe=ie&n.TextRenderingMode.FILL_STROKE_MASK,be=!!(ie&n.TextRenderingMode.ADD_TO_PATH_FLAG),me=B.patternFill&&!Y.missingFile;let ve;(Y.disableFontFace||be||me)&&(ve=Y.getPathGenerator(this.commonObjs,d)),Y.disableFontFace||me?(U.save(),U.translate(u,T),U.beginPath(),ve(U,le),$&&U.setTransform(...$),(fe===n.TextRenderingMode.FILL||fe===n.TextRenderingMode.FILL_STROKE)&&U.fill(),(fe===n.TextRenderingMode.STROKE||fe===n.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((fe===n.TextRenderingMode.FILL||fe===n.TextRenderingMode.FILL_STROKE)&&U.fillText(d,u,T),(fe===n.TextRenderingMode.STROKE||fe===n.TextRenderingMode.FILL_STROKE)&&U.strokeText(d,u,T)),be&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(U),x:u,y:T,fontSize:le,addToPath:ve})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const u=d.getImageData(0,0,10,10).data;let T=!1;for(let $=3;$<u.length;$+=4)if(u[$]>0&&u[$]<255){T=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(d){const u=this.current,T=u.font;if(T.isType3Font)return this.showType3Text(d);const $=u.fontSize;if($===0)return;const U=this.ctx,B=u.fontSizeScale,Y=u.charSpacing,ie=u.wordSpacing,le=u.fontDirection,fe=u.textHScale*le,be=d.length,me=T.vertical,ve=me?1:-1,Z=T.defaultVMetrics,ee=$*u.fontMatrix[0],M=u.textRenderingMode===n.TextRenderingMode.FILL&&!T.disableFontFace&&!u.patternFill;U.save(),U.transform(...u.textMatrix),U.translate(u.x,u.y+u.textRise),le>0?U.scale(fe,-1):U.scale(fe,1);let H;if(u.patternFill){U.save();const _e=u.fillColor.getPattern(U,this,(0,r.getCurrentTransformInverse)(U),y.PathType.FILL);H=(0,r.getCurrentTransform)(U),U.restore(),U.fillStyle=_e}let J=u.lineWidth;const oe=u.textMatrixScale;if(oe===0||J===0){const _e=u.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(_e===n.TextRenderingMode.STROKE||_e===n.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=oe;if(B!==1&&(U.scale(B,B),J/=B),U.lineWidth=J,T.isInvalidPDFjsFont){const _e=[];let te=0;for(const Pe of d)_e.push(Pe.unicode),te+=Pe.width;U.fillText(_e.join(""),0,0),u.x+=te*ee*fe,U.restore(),this.compose();return}let ge=0,Ae;for(Ae=0;Ae<be;++Ae){const _e=d[Ae];if(typeof _e=="number"){ge+=ve*_e*$/1e3;continue}let te=!1;const Pe=(_e.isSpace?ie:0)+Y,Ce=_e.fontChar,Ue=_e.accent;let $e,He,ke=_e.width;if(me){const ze=_e.vmetric||Z,Xe=-(_e.vmetric?ze[1]:ke*.5)*ee,Ee=ze[2]*ee;ke=ze?-ze[0]:ke,$e=Xe/B,He=(ge+Ee)/B}else $e=ge/B,He=0;if(T.remeasure&&ke>0){const ze=U.measureText(Ce).width*1e3/$*B;if(ke<ze&&this.isFontSubpixelAAEnabled){const Xe=ke/ze;te=!0,U.save(),U.scale(Xe,1),$e/=Xe}else ke!==ze&&($e+=(ke-ze)/2e3*$/B)}if(this.contentVisible&&(_e.isInFont||T.missingFile)){if(M&&!Ue)U.fillText(Ce,$e,He);else if(this.paintChar(Ce,$e,He,H),Ue){const ze=$e+$*Ue.offset.x/B,Xe=He-$*Ue.offset.y/B;this.paintChar(Ue.fontChar,ze,Xe,H)}}const Oe=me?ke*ee-Pe*le:ke*ee+Pe*le;ge+=Oe,te&&U.restore()}me?u.y-=ge:u.x+=ge*fe,U.restore(),this.compose()}showType3Text(d){const u=this.ctx,T=this.current,$=T.font,U=T.fontSize,B=T.fontDirection,Y=$.vertical?1:-1,ie=T.charSpacing,le=T.wordSpacing,fe=T.textHScale*B,be=T.fontMatrix||n.FONT_IDENTITY_MATRIX,me=d.length,ve=T.textRenderingMode===n.TextRenderingMode.INVISIBLE;let Z,ee,M,H;if(!(ve||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...T.textMatrix),u.translate(T.x,T.y),u.scale(fe,B),Z=0;Z<me;++Z){if(ee=d[Z],typeof ee=="number"){H=Y*ee*U/1e3,this.ctx.translate(H,0),T.x+=H*fe;continue}const J=(ee.isSpace?le:0)+ie,oe=$.charProcOperatorList[ee.operatorListId];if(!oe){(0,n.warn)(`Type3 character "${ee.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ee,this.save(),u.scale(U,U),u.transform(...be),this.executeOperatorList(oe),this.restore()),M=n.Util.applyTransform([ee.width,0],be)[0]*U+J,u.translate(M,0),T.x+=M*fe}u.restore(),this.processingType3=null}}setCharWidth(d,u){}setCharWidthAndBounds(d,u,T,$,U,B){this.ctx.rect(T,$,U-T,B-$),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let u;if(d[0]==="TilingPattern"){const T=d[1],$=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),U={createCanvasGraphics:B=>new re(B,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};u=new y.TilingPattern(d,T,this.ctx,U,$)}else u=this._getPattern(d[1],d[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,u,T){const $=n.Util.makeHexColor(d,u,T);this.ctx.strokeStyle=$,this.current.strokeColor=$}setFillRGBColor(d,u,T){const $=n.Util.makeHexColor(d,u,T);this.ctx.fillStyle=$,this.current.fillColor=$,this.current.patternFill=!1}_getPattern(d,u=null){let T;return this.cachedPatterns.has(d)?T=this.cachedPatterns.get(d):(T=(0,y.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,T)),u&&(T.matrix=u),T}shadingFill(d){if(!this.contentVisible)return;const u=this.ctx;this.save();const T=this._getPattern(d);u.fillStyle=T.getPattern(u,this,(0,r.getCurrentTransformInverse)(u),y.PathType.SHADING);const $=(0,r.getCurrentTransformInverse)(u);if($){const{width:U,height:B}=u.canvas,[Y,ie,le,fe]=n.Util.getAxialAlignedBoundingBox([0,0,U,B],$);this.ctx.fillRect(Y,ie,le-Y,fe-ie)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),u)){const T=u[2]-u[0],$=u[3]-u[1];this.ctx.rect(u[0],u[1],T,$),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;d.isolated||(0,n.info)("TODO: Support non-isolated groups."),d.knockout&&(0,n.warn)("Knockout groups not supported.");const T=(0,r.getCurrentTransform)(u);if(d.matrix&&u.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let $=n.Util.getAxialAlignedBoundingBox(d.bbox,(0,r.getCurrentTransform)(u));const U=[0,0,u.canvas.width,u.canvas.height];$=n.Util.intersect($,U)||[0,0,0,0];const B=Math.floor($[0]),Y=Math.floor($[1]);let ie=Math.max(Math.ceil($[2])-B,1),le=Math.max(Math.ceil($[3])-Y,1),fe=1,be=1;ie>v&&(fe=ie/v,ie=v),le>v&&(be=le/v,le=v),this.current.startNewPathAndClipBox([0,0,ie,le]);let me="groupAt"+this.groupLevel;d.smask&&(me+="_smask_"+this.smaskCounter++%2);const ve=this.cachedCanvases.getCanvas(me,ie,le),Z=ve.context;Z.scale(1/fe,1/be),Z.translate(-B,-Y),Z.transform(...T),d.smask?this.smaskStack.push({canvas:ve.canvas,context:Z,offsetX:B,offsetY:Y,scaleX:fe,scaleY:be,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(B,Y),u.scale(fe,be),u.save()),o(u,Z),this.ctx=Z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const $=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...$);const U=n.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],$);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(d,u,T,$,U){if(ne(this,se,Yt).call(this),p(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const B=u[2]-u[0],Y=u[3]-u[1];if(U&&this.annotationCanvasMap){T=T.slice(),T[4]-=u[0],T[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=B,u[3]=Y;const[ie,le]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:fe}=this,be=Math.ceil(B*this.outputScaleX*fe),me=Math.ceil(Y*this.outputScaleY*fe);this.annotationCanvas=this.canvasFactory.create(be,me);const{canvas:ve,context:Z}=this.annotationCanvas;this.annotationCanvasMap.set(d,ve),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Z,this.ctx.save(),this.ctx.setTransform(ie,0,0,-le,0,Y*le),p(this.ctx)}else p(this.ctx),this.ctx.rect(u[0],u[1],B,Y),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...$)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ne(this,se,Kt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const u=d.count;d=this.getObject(d.data,d),d.count=u;const T=this.ctx,$=this.processingType3;if($&&($.compiled===void 0&&($.compiled=g(d)),$.compiled)){$.compiled(T);return}const U=this._createMaskCanvas(d),B=U.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(B,U.offsetX,U.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(d,u,T=0,$=0,U,B){if(!this.contentVisible)return;d=this.getObject(d.data,d);const Y=this.ctx;Y.save();const ie=(0,r.getCurrentTransform)(Y);Y.transform(u,T,$,U,0,0);const le=this._createMaskCanvas(d);Y.setTransform(1,0,0,1,le.offsetX-ie[4],le.offsetY-ie[5]);for(let fe=0,be=B.length;fe<be;fe+=2){const me=n.Util.transform(ie,[u,T,$,U,B[fe],B[fe+1]]),[ve,Z]=n.Util.applyTransform([0,0],me);Y.drawImage(le.canvas,ve,Z)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const u=this.ctx,T=this.current.fillColor,$=this.current.patternFill;for(const U of d){const{data:B,width:Y,height:ie,transform:le}=U,fe=this.cachedCanvases.getCanvas("maskCanvas",Y,ie),be=fe.context;be.save();const me=this.getObject(B,U);S(be,me),be.globalCompositeOperation="source-in",be.fillStyle=$?T.getPattern(be,this,(0,r.getCurrentTransformInverse)(u),y.PathType.FILL):T,be.fillRect(0,0,Y,ie),be.restore(),u.save(),u.transform(...le),u.scale(1,-1),A(u,fe.canvas,0,0,Y,ie,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const u=this.getObject(d);if(!u){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(d,u,T,$){if(!this.contentVisible)return;const U=this.getObject(d);if(!U){(0,n.warn)("Dependent image isn't ready yet");return}const B=U.width,Y=U.height,ie=[];for(let le=0,fe=$.length;le<fe;le+=2)ie.push({transform:[u,0,0,T,$[le],$[le+1]],x:0,y:0,w:B,h:Y});this.paintInlineImageXObjectGroup(U,ie)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:u,width:T,height:$}=d,U=this.cachedCanvases.getCanvas("inlineImage",T,$),B=U.context;return B.filter=this.current.transferMaps,B.drawImage(u,0,0),B.filter="none",U.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const u=d.width,T=d.height,$=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Y}=$;Y!=="none"&&Y!==""&&($.filter="none")}$.scale(1/u,-1/T);let U;if(d.bitmap)U=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)U=d;else{const ie=this.cachedCanvases.getCanvas("inlineImage",u,T).context;F(ie,d),U=this.applyTransferMapsToCanvas(ie)}const B=this._scaleImage(U,(0,r.getCurrentTransformInverse)($));$.imageSmoothingEnabled=R((0,r.getCurrentTransform)($),d.interpolate),A($,B.img,0,0,B.paintWidth,B.paintHeight,0,-T,u,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,u){if(!this.contentVisible)return;const T=this.ctx;let $;if(d.bitmap)$=d.bitmap;else{const U=d.width,B=d.height,ie=this.cachedCanvases.getCanvas("inlineImage",U,B).context;F(ie,d),$=this.applyTransferMapsToCanvas(ie)}for(const U of u)T.save(),T.transform(...U.transform),T.scale(1,-1),A(T,$,U.x,U.y,U.w,U.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,u){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,u){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const T=this.ctx;this.pendingClip&&(u||(this.pendingClip===q?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,r.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const u=Math.abs(d[0]*d[3]-d[2]*d[1]),T=Math.hypot(d[0],d[2]),$=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(T,$)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:d}=this.current,{a:u,b:T,c:$,d:U}=this.ctx.getTransform();let B,Y;if(T===0&&$===0){const ie=Math.abs(u),le=Math.abs(U);if(ie===le)if(d===0)B=Y=1/ie;else{const fe=ie*d;B=Y=fe<1?1/fe:1}else if(d===0)B=1/ie,Y=1/le;else{const fe=ie*d,be=le*d;B=fe<1?1/fe:1,Y=be<1?1/be:1}}else{const ie=Math.abs(u*U-T*$),le=Math.hypot(u,T),fe=Math.hypot($,U);if(d===0)B=fe/ie,Y=le/ie;else{const be=d*ie;B=fe>be?fe/be:1,Y=le>be?le/be:1}}this._cachedScaleForStroking[0]=B,this._cachedScaleForStroking[1]=Y}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:u}=this,{lineWidth:T}=this.current,[$,U]=this.getScaleForStroking();if(u.lineWidth=T||1,$===1&&U===1){u.stroke();return}const B=u.getLineDash();if(d&&u.save(),u.scale($,U),B.length>0){const Y=Math.max($,U);u.setLineDash(B.map(ie=>ie/Y)),u.lineDashOffset/=Y}u.stroke(),d&&u.restore()}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};se=new WeakSet,Yt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kt=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const u=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=u}}};let V=re;e.CanvasGraphics=V;for(const N in n.OPS)V.prototype[N]!==void 0&&(V.prototype[n.OPS[N]]=V.prototype[N])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=b;var n=s(1),r=s(6);const y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=y;function C(g,E){if(!E)return;const F=E[2]-E[0],S=E[3]-E[1],o=new Path2D;o.rect(E[0],E[1],F,S),g.clip(o)}class O{constructor(){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class h extends O{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let F;this._type==="axial"?F=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)F.addColorStop(S[0],S[1]);return F}getPattern(E,F,S,o){let p;if(o===y.STROKE||o===y.FILL){const l=F.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(E))||[0,0,0,0],m=Math.ceil(l[2]-l[0])||1,f=Math.ceil(l[3]-l[1])||1,I=F.cachedCanvases.getCanvas("pattern",m,f,!0),c=I.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-l[0],-l[1]),S=n.Util.transform(S,[1,0,0,1,l[0],l[1]]),c.transform(...F.baseTransform),this.matrix&&c.transform(...this.matrix),C(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),p=E.createPattern(I.canvas,"no-repeat");const R=new DOMMatrix(S);p.setTransform(R)}else C(E,this._bbox),p=this._createGradient(E);return p}}function v(g,E,F,S,o,p,l,m){const f=E.coords,I=E.colors,c=g.data,R=g.width*4;let L;f[F+1]>f[S+1]&&(L=F,F=S,S=L,L=p,p=l,l=L),f[S+1]>f[o+1]&&(L=S,S=o,o=L,L=l,l=m,m=L),f[F+1]>f[S+1]&&(L=F,F=S,S=L,L=p,p=l,l=L);const Q=(f[F]+E.offsetX)*E.scaleX,G=(f[F+1]+E.offsetY)*E.scaleY,q=(f[S]+E.offsetX)*E.scaleX,V=(f[S+1]+E.offsetY)*E.scaleY,se=(f[o]+E.offsetX)*E.scaleX,D=(f[o+1]+E.offsetY)*E.scaleY;if(G>=D)return;const X=I[p],re=I[p+1],N=I[p+2],d=I[l],u=I[l+1],T=I[l+2],$=I[m],U=I[m+1],B=I[m+2],Y=Math.round(G),ie=Math.round(D);let le,fe,be,me,ve,Z,ee,M;for(let H=Y;H<=ie;H++){if(H<V){const _e=H<G?0:(G-H)/(G-V);le=Q-(Q-q)*_e,fe=X-(X-d)*_e,be=re-(re-u)*_e,me=N-(N-T)*_e}else{let _e;H>D?_e=1:V===D?_e=0:_e=(V-H)/(V-D),le=q-(q-se)*_e,fe=d-(d-$)*_e,be=u-(u-U)*_e,me=T-(T-B)*_e}let J;H<G?J=0:H>D?J=1:J=(G-H)/(G-D),ve=Q-(Q-se)*J,Z=X-(X-$)*J,ee=re-(re-U)*J,M=N-(N-B)*J;const oe=Math.round(Math.min(le,ve)),ge=Math.round(Math.max(le,ve));let Ae=R*H+oe*4;for(let _e=oe;_e<=ge;_e++)J=(le-_e)/(le-ve),J<0?J=0:J>1&&(J=1),c[Ae++]=fe-(fe-Z)*J|0,c[Ae++]=be-(be-ee)*J|0,c[Ae++]=me-(me-M)*J|0,c[Ae++]=255}}function a(g,E,F){const S=E.coords,o=E.colors;let p,l;switch(E.type){case"lattice":const m=E.verticesPerRow,f=Math.floor(S.length/m)-1,I=m-1;for(p=0;p<f;p++){let c=p*m;for(let R=0;R<I;R++,c++)v(g,F,S[c],S[c+1],S[c+m],o[c],o[c+1],o[c+m]),v(g,F,S[c+m+1],S[c+1],S[c+m],o[c+m+1],o[c+1],o[c+m])}break;case"triangles":for(p=0,l=S.length;p<l;p+=3)v(g,F,S[p],S[p+1],S[p+2],o[p],o[p+1],o[p+2]);break;default:throw new Error("illegal figure")}}class w extends O{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,F,S){const m=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-m,c=Math.ceil(this._bounds[3])-f,R=Math.min(Math.ceil(Math.abs(I*E[0]*1.1)),3e3),L=Math.min(Math.ceil(Math.abs(c*E[1]*1.1)),3e3),Q=I/R,G=c/L,q={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-f,scaleX:1/Q,scaleY:1/G},V=R+2*2,se=L+2*2,D=S.getCanvas("mesh",V,se,!1),X=D.context,re=X.createImageData(R,L);if(F){const d=re.data;for(let u=0,T=d.length;u<T;u+=4)d[u]=F[0],d[u+1]=F[1],d[u+2]=F[2],d[u+3]=255}for(const d of this._figures)a(re,d,q);return X.putImageData(re,2,2),{canvas:D.canvas,offsetX:m-2*Q,offsetY:f-2*G,scaleX:Q,scaleY:G}}getPattern(E,F,S,o){C(E,this._bbox);let p;if(o===y.SHADING)p=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(E));else if(p=n.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const m=n.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*m[0],p[1]*m[1]]}const l=this._createMeshCanvas(p,o===y.SHADING?null:this._background,F.cachedCanvases);return o!==y.SHADING&&(E.setTransform(...F.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(l.offsetX,l.offsetY),E.scale(l.scaleX,l.scaleY),E.createPattern(l.canvas,"no-repeat")}}class k extends O{getPattern(){return"hotpink"}}function b(g){switch(g[0]){case"RadialAxial":return new h(g);case"Mesh":return new w(g);case"Dummy":return new k}throw new Error(`Unknown IR type: ${g[0]}`)}const x={COLORED:1,UNCOLORED:2},A=class A{constructor(E,F,S,o,p){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=F,this.ctx=S,this.canvasGraphicsFactory=o,this.baseTransform=p}createPatternCanvas(E){const F=this.operatorList,S=this.bbox,o=this.xstep,p=this.ystep,l=this.paintType,m=this.tilingType,f=this.color,I=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+m);const c=S[0],R=S[1],L=S[2],Q=S[3],G=n.Util.singularValueDecompose2dScale(this.matrix),q=n.Util.singularValueDecompose2dScale(this.baseTransform),V=[G[0]*q[0],G[1]*q[1]],se=this.getSizeAndScale(o,this.ctx.canvas.width,V[0]),D=this.getSizeAndScale(p,this.ctx.canvas.height,V[1]),X=E.cachedCanvases.getCanvas("pattern",se.size,D.size,!0),re=X.context,N=I.createCanvasGraphics(re);N.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(N,l,f);let d=c,u=R,T=L,$=Q;return c<0&&(d=0,T+=Math.abs(c)),R<0&&(u=0,$+=Math.abs(R)),re.translate(-(se.scale*d),-(D.scale*u)),N.transform(se.scale,0,0,D.scale,0,0),re.save(),this.clipBbox(N,d,u,T,$),N.baseTransform=(0,r.getCurrentTransform)(N.ctx),N.executeOperatorList(F),N.endDrawing(),{canvas:X.canvas,scaleX:se.scale,scaleY:D.scale,offsetX:d,offsetY:u}}getSizeAndScale(E,F,S){E=Math.abs(E);const o=Math.max(A.MAX_PATTERN_SIZE,F);let p=Math.ceil(E*S);return p>=o?p=o:S=p/E,{scale:S,size:p}}clipBbox(E,F,S,o,p){const l=o-F,m=p-S;E.ctx.rect(F,S,l,m),E.current.updateRectMinMax((0,r.getCurrentTransform)(E.ctx),[F,S,o,p]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,F,S){const o=E.ctx,p=E.current;switch(F){case x.COLORED:const l=this.ctx;o.fillStyle=l.fillStyle,o.strokeStyle=l.strokeStyle,p.fillColor=l.fillStyle,p.strokeColor=l.strokeStyle;break;case x.UNCOLORED:const m=n.Util.makeHexColor(S[0],S[1],S[2]);o.fillStyle=m,o.strokeStyle=m,p.fillColor=m,p.strokeColor=m;break;default:throw new n.FormatError(`Unsupported paint type: ${F}`)}}getPattern(E,F,S,o){let p=S;o!==y.SHADING&&(p=n.Util.transform(p,F.baseTransform),this.matrix&&(p=n.Util.transform(p,this.matrix)));const l=this.createPatternCanvas(F);let m=new DOMMatrix(p);m=m.translate(l.offsetX,l.offsetY),m=m.scale(1/l.scaleX,1/l.scaleY);const f=E.createPattern(l.canvas,"repeat");return f.setTransform(m),f}};Qe(A,"MAX_PATTERN_SIZE",3e3);let P=A;e.TilingPattern=P},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=y,e.convertToRGBA=r,e.grayToRGBA=O;var n=s(1);function r(h){switch(h.kind){case n.ImageKind.GRAYSCALE_1BPP:return y(h);case n.ImageKind.RGB_24BPP:return C(h)}return null}function y({src:h,srcPos:v=0,dest:a,width:w,height:k,nonBlackColor:b=4294967295,inverseDecode:x=!1}){const P=n.FeatureTest.isLittleEndian?4278190080:255,[A,g]=x?[b,P]:[P,b],E=w>>3,F=w&7,S=h.length;a=new Uint32Array(a.buffer);let o=0;for(let p=0;p<k;p++){for(const m=v+E;v<m;v++){const f=v<S?h[v]:255;a[o++]=f&128?g:A,a[o++]=f&64?g:A,a[o++]=f&32?g:A,a[o++]=f&16?g:A,a[o++]=f&8?g:A,a[o++]=f&4?g:A,a[o++]=f&2?g:A,a[o++]=f&1?g:A}if(F===0)continue;const l=v<S?h[v++]:255;for(let m=0;m<F;m++)a[o++]=l&1<<7-m?g:A}return{srcPos:v,destPos:o}}function C({src:h,srcPos:v=0,dest:a,destPos:w=0,width:k,height:b}){let x=0;const P=h.length>>2,A=new Uint32Array(h.buffer,v,P);if(n.FeatureTest.isLittleEndian){for(;x<P-2;x+=3,w+=4){const g=A[x],E=A[x+1],F=A[x+2];a[w]=g|4278190080,a[w+1]=g>>>24|E<<8|4278190080,a[w+2]=E>>>16|F<<16|4278190080,a[w+3]=F>>>8|4278190080}for(let g=x*4,E=h.length;g<E;g+=3)a[w++]=h[g]|h[g+1]<<8|h[g+2]<<16|4278190080}else{for(;x<P-2;x+=3,w+=4){const g=A[x],E=A[x+1],F=A[x+2];a[w]=g|255,a[w+1]=g<<24|E>>>8|255,a[w+2]=E<<16|F>>>16|255,a[w+3]=F<<8|255}for(let g=x*4,E=h.length;g<E;g+=3)a[w++]=h[g]<<24|h[g+1]<<16|h[g+2]<<8|255}return{srcPos:v,destPos:w}}function O(h,v){if(n.FeatureTest.isLittleEndian)for(let a=0,w=h.length;a<w;a++)v[a]=h[a]*65793|4278190080;else for(let a=0,w=h.length;a<w;a++)v[a]=h[a]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var h,wn,Tn,Ct;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const r={DATA:1,ERROR:2},y={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function C(k){switch(k instanceof Error||typeof k=="object"&&k!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k.name){case"AbortException":return new n.AbortException(k.message);case"MissingPDFException":return new n.MissingPDFException(k.message);case"PasswordException":return new n.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new n.UnknownErrorException(k.message,k.details);default:return new n.UnknownErrorException(k.message,k.toString())}}class O{constructor(b,x,P){ce(this,h);this.sourceName=b,this.targetName=x,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=A=>{const g=A.data;if(g.targetName!==this.sourceName)return;if(g.stream){ne(this,h,Tn).call(this,g);return}if(g.callback){const F=g.callbackId,S=this.callbackCapabilities[F];if(!S)throw new Error(`Cannot resolve callback ${F}`);if(delete this.callbackCapabilities[F],g.callback===r.DATA)S.resolve(g.data);else if(g.callback===r.ERROR)S.reject(C(g.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[g.action];if(!E)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const F=this.sourceName,S=g.sourceName;new Promise(function(o){o(E(g.data))}).then(function(o){P.postMessage({sourceName:F,targetName:S,callback:r.DATA,callbackId:g.callbackId,data:o})},function(o){P.postMessage({sourceName:F,targetName:S,callback:r.ERROR,callbackId:g.callbackId,reason:C(o)})});return}if(g.streamId){ne(this,h,wn).call(this,g);return}E(g.data)},P.addEventListener("message",this._onComObjOnMessage)}on(b,x){const P=this.actionHandler;if(P[b])throw new Error(`There is already an actionName called "${b}"`);P[b]=x}send(b,x,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:x},P)}sendWithPromise(b,x,P){const A=this.callbackId++,g=new n.PromiseCapability;this.callbackCapabilities[A]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:A,data:x},P)}catch(E){g.reject(E)}return g.promise}sendWithStream(b,x,P,A){const g=this.streamId++,E=this.sourceName,F=this.targetName,S=this.comObj;return new ReadableStream({start:o=>{const p=new n.PromiseCapability;return this.streamControllers[g]={controller:o,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},S.postMessage({sourceName:E,targetName:F,action:b,streamId:g,data:x,desiredSize:o.desiredSize},A),p.promise},pull:o=>{const p=new n.PromiseCapability;return this.streamControllers[g].pullCall=p,S.postMessage({sourceName:E,targetName:F,stream:y.PULL,streamId:g,desiredSize:o.desiredSize}),p.promise},cancel:o=>{(0,n.assert)(o instanceof Error,"cancel must have a valid reason");const p=new n.PromiseCapability;return this.streamControllers[g].cancelCall=p,this.streamControllers[g].isClosed=!0,S.postMessage({sourceName:E,targetName:F,stream:y.CANCEL,streamId:g,reason:C(o)}),p.promise}},P)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,wn=function(b){const x=b.streamId,P=this.sourceName,A=b.sourceName,g=this.comObj,E=this,F=this.actionHandler[b.action],S={enqueue(o,p=1,l){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=p,m>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:P,targetName:A,stream:y.ENQUEUE,streamId:x,chunk:o},l)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:P,targetName:A,stream:y.CLOSE,streamId:x}),delete E.streamSinks[x])},error(o){(0,n.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:P,targetName:A,stream:y.ERROR,streamId:x,reason:C(o)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};S.sinkCapability.resolve(),S.ready=S.sinkCapability.promise,this.streamSinks[x]=S,new Promise(function(o){o(F(b.data,S))}).then(function(){g.postMessage({sourceName:P,targetName:A,stream:y.START_COMPLETE,streamId:x,success:!0})},function(o){g.postMessage({sourceName:P,targetName:A,stream:y.START_COMPLETE,streamId:x,reason:C(o)})})},Tn=function(b){const x=b.streamId,P=this.sourceName,A=b.sourceName,g=this.comObj,E=this.streamControllers[x],F=this.streamSinks[x];switch(b.stream){case y.START_COMPLETE:b.success?E.startCall.resolve():E.startCall.reject(C(b.reason));break;case y.PULL_COMPLETE:b.success?E.pullCall.resolve():E.pullCall.reject(C(b.reason));break;case y.PULL:if(!F){g.postMessage({sourceName:P,targetName:A,stream:y.PULL_COMPLETE,streamId:x,success:!0});break}F.desiredSize<=0&&b.desiredSize>0&&F.sinkCapability.resolve(),F.desiredSize=b.desiredSize,new Promise(function(S){var o;S((o=F.onPull)==null?void 0:o.call(F))}).then(function(){g.postMessage({sourceName:P,targetName:A,stream:y.PULL_COMPLETE,streamId:x,success:!0})},function(S){g.postMessage({sourceName:P,targetName:A,stream:y.PULL_COMPLETE,streamId:x,reason:C(S)})});break;case y.ENQUEUE:if((0,n.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(b.chunk);break;case y.CLOSE:if((0,n.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),ne(this,h,Ct).call(this,E,x);break;case y.ERROR:(0,n.assert)(E,"error should have stream controller"),E.controller.error(C(b.reason)),ne(this,h,Ct).call(this,E,x);break;case y.CANCEL_COMPLETE:b.success?E.cancelCall.resolve():E.cancelCall.reject(C(b.reason)),ne(this,h,Ct).call(this,E,x);break;case y.CANCEL:if(!F)break;new Promise(function(S){var o;S((o=F.onCancel)==null?void 0:o.call(F,C(b.reason)))}).then(function(){g.postMessage({sourceName:P,targetName:A,stream:y.CANCEL_COMPLETE,streamId:x,success:!0})},function(S){g.postMessage({sourceName:P,targetName:A,stream:y.CANCEL_COMPLETE,streamId:x,reason:C(S)})}),F.sinkCapability.reject(C(b.reason)),F.isCancelled=!0,delete this.streamSinks[x];break;default:throw new Error("Unexpected stream case")}},Ct=async function(b,x){var P,A,g;await Promise.allSettled([(P=b.startCall)==null?void 0:P.promise,(A=b.pullCall)==null?void 0:A.promise,(g=b.cancelCall)==null?void 0:g.promise]),delete this.streamControllers[x]},e.MessageHandler=O},(t,e,s)=>{var y,C;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class r{constructor({parsedData:h,rawData:v}){ce(this,y);ce(this,C);ue(this,y,h),ue(this,C,v)}getRaw(){return i(this,C)}get(h){return i(this,y).get(h)??null}getAll(){return(0,n.objectFromMap)(i(this,y))}has(h){return i(this,y).has(h)}}y=new WeakMap,C=new WeakMap,e.Metadata=r},(t,e,s)=>{var h,v,a,w,k,b,Jt;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),r=s(8);const y=Symbol("INTERNAL");class C{constructor(A,g){ce(this,h,!0);this.name=A,this.intent=g}get visible(){return i(this,h)}_setVisible(A,g){A!==y&&(0,n.unreachable)("Internal method `_setVisible` called."),ue(this,h,g)}}h=new WeakMap;class O{constructor(A){ce(this,b);ce(this,v,null);ce(this,a,new Map);ce(this,w,null);ce(this,k,null);if(this.name=null,this.creator=null,A!==null){this.name=A.name,this.creator=A.creator,ue(this,k,A.order);for(const g of A.groups)i(this,a).set(g.id,new C(g.name,g.intent));if(A.baseState==="OFF")for(const g of i(this,a).values())g._setVisible(y,!1);for(const g of A.on)i(this,a).get(g)._setVisible(y,!0);for(const g of A.off)i(this,a).get(g)._setVisible(y,!1);ue(this,w,this.getHash())}}isVisible(A){if(i(this,a).size===0)return!0;if(!A)return(0,n.warn)("Optional content group not defined."),!0;if(A.type==="OCG")return i(this,a).has(A.id)?i(this,a).get(A.id).visible:((0,n.warn)(`Optional content group not found: ${A.id}`),!0);if(A.type==="OCMD"){if(A.expression)return ne(this,b,Jt).call(this,A.expression);if(!A.policy||A.policy==="AnyOn"){for(const g of A.ids){if(!i(this,a).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(i(this,a).get(g).visible)return!0}return!1}else if(A.policy==="AllOn"){for(const g of A.ids){if(!i(this,a).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(!i(this,a).get(g).visible)return!1}return!0}else if(A.policy==="AnyOff"){for(const g of A.ids){if(!i(this,a).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(!i(this,a).get(g).visible)return!0}return!1}else if(A.policy==="AllOff"){for(const g of A.ids){if(!i(this,a).has(g))return(0,n.warn)(`Optional content group not found: ${g}`),!0;if(i(this,a).get(g).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${A.policy}.`),!0}return(0,n.warn)(`Unknown group type ${A.type}.`),!0}setVisibility(A,g=!0){if(!i(this,a).has(A)){(0,n.warn)(`Optional content group not found: ${A}`);return}i(this,a).get(A)._setVisible(y,!!g),ue(this,v,null)}get hasInitialVisibility(){return i(this,w)===null||this.getHash()===i(this,w)}getOrder(){return i(this,a).size?i(this,k)?i(this,k).slice():[...i(this,a).keys()]:null}getGroups(){return i(this,a).size>0?(0,n.objectFromMap)(i(this,a)):null}getGroup(A){return i(this,a).get(A)||null}getHash(){if(i(this,v)!==null)return i(this,v);const A=new r.MurmurHash3_64;for(const[g,E]of i(this,a))A.update(`${g}:${E.visible}`);return ue(this,v,A.hexdigest())}}v=new WeakMap,a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakSet,Jt=function(A){const g=A.length;if(g<2)return!0;const E=A[0];for(let F=1;F<g;F++){const S=A[F];let o;if(Array.isArray(S))o=ne(this,b,Jt).call(this,S);else if(i(this,a).has(S))o=i(this,a).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(E){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return E==="And"},e.OptionalContentConfig=O},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),r=s(6);class y{constructor({length:v,initialData:a,progressiveDone:w=!1,contentDispositionFilename:k=null,disableRange:b=!1,disableStream:x=!1},P){if((0,n.assert)(P,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=k,(a==null?void 0:a.length)>0){const A=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(A)}this._pdfDataRangeTransport=P,this._isStreamingSupported=!x,this._isRangeSupported=!b,this._contentLength=v,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((A,g)=>{this._onReceiveData({begin:A,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((A,g)=>{this._onProgress({loaded:A,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(A=>{this._onReceiveData({chunk:A})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:v,chunk:a}){const w=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(v===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const k=this._rangeReaders.some(function(b){return b._begin!==v?!1:(b._enqueue(w),!0)});(0,n.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){var a,w,k,b;v.total===void 0?(w=(a=this._rangeReaders[0])==null?void 0:a.onProgress)==null||w.call(a,{loaded:v.loaded}):(b=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||b.call(k,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;(v=this._fullRequestReader)==null||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const a=this._rangeReaders.indexOf(v);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new C(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,a){if(a<=this._progressiveDataLength)return null;const w=new O(this,v,a);return this._pdfDataRangeTransport.requestDataRange(v,a),this._rangeReaders.push(w),w}cancelAllRequests(v){var a;(a=this._fullRequestReader)==null||a.cancel(v);for(const w of this._rangeReaders.slice(0))w.cancel(v);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=y;class C{constructor(v,a,w=!1,k=null){this._stream=v,this._done=w||!1,this._filename=(0,r.isPdfFile)(k)?k:null,this._queuedChunks=a||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O{constructor(v,a,w){this._stream=v,this._begin=a,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),r=s(20);function y(w,k,b){return{method:"GET",headers:w,signal:b.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function C(w){const k=new Headers;for(const b in w){const x=w[b];x!==void 0&&k.append(b,x)}return k}function O(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class h{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v(this),this._fullRequestReader}getRangeReader(k,b){if(b<=this._progressiveDataLength)return null;const x=new a(this,k,b);return this._rangeRequestReaders.push(x),x}cancelAllRequests(k){var b;(b=this._fullRequestReader)==null||b.cancel(k);for(const x of this._rangeRequestReaders.slice(0))x.cancel(k)}}e.PDFFetchStream=h;class v{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const b=k.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=new n.PromiseCapability,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=C(this._stream.httpHeaders);const x=b.url;fetch(x,y(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,r.validateResponseStatus)(P.status))throw(0,r.createResponseStatusError)(P.status,x);this._reader=P.body.getReader(),this._headersCapability.resolve();const A=F=>P.headers.get(F),{allowRangeRequests:g,suggestedLength:E}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=E||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(A),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._headersCapability.promise;const{value:k,done:b}=await this._reader.read();return b?{value:k,done:b}:(this._loaded+=k.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:O(k),done:!1})}cancel(k){var b;(b=this._reader)==null||b.cancel(k),this._abortController.abort()}}class a{constructor(k,b,x){this._stream=k,this._reader=null,this._loaded=0;const P=k.source;this._withCredentials=P.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!P.disableStream,this._abortController=new AbortController,this._headers=C(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${x-1}`);const A=P.url;fetch(A,y(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,r.validateResponseStatus)(g.status))throw(0,r.createResponseStatusError)(g.status,A);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._readCapability.promise;const{value:k,done:b}=await this._reader.read();return b?{value:k,done:b}:(this._loaded+=k.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:O(k),done:!1})}cancel(k){var b;(b=this._reader)==null||b.cancel(k),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=O,e.validateRangeRequestCapabilities=C,e.validateResponseStatus=v;var n=s(1),r=s(21),y=s(6);function C({getResponseHeader:a,isHttp:w,rangeChunkSize:k,disableRange:b}){const x={allowRangeRequests:!1,suggestedLength:void 0},P=parseInt(a("Content-Length"),10);return!Number.isInteger(P)||(x.suggestedLength=P,P<=2*k)||b||!w||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(x.allowRangeRequests=!0),x}function O(a){const w=a("Content-Disposition");if(w){let k=(0,r.getFilenameFromContentDispositionHeader)(w);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,y.isPdfFile)(k))return k}return null}function h(a,w){return a===404||a===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${w}".`,a)}function v(a){return a===200||a===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=r;var n=s(1);function r(y){let C=!0,O=h("filename\\*","i").exec(y);if(O){O=O[1];let P=k(O);return P=unescape(P),P=b(P),P=x(P),a(P)}if(O=w(y),O){const P=x(O);return a(P)}if(O=h("filename","i").exec(y),O){O=O[1];let P=k(O);return P=x(P),a(P)}function h(P,A){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function v(P,A){if(P){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const g=new TextDecoder(P,{fatal:!0}),E=(0,n.stringToBytes)(A);A=g.decode(E),C=!1}catch{}}return A}function a(P){return C&&/[\x80-\xff]/.test(P)&&(P=v("utf-8",P),C&&(P=v("iso-8859-1",P))),P}function w(P){const A=[];let g;const E=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=E.exec(P))!==null;){let[,S,o,p]=g;if(S=parseInt(S,10),S in A){if(S===0)break;continue}A[S]=[o,p]}const F=[];for(let S=0;S<A.length&&S in A;++S){let[o,p]=A[S];p=k(p),o&&(p=unescape(p),S===0&&(p=b(p))),F.push(p)}return F.join("")}function k(P){if(P.startsWith('"')){const A=P.slice(1).split('\\"');for(let g=0;g<A.length;++g){const E=A[g].indexOf('"');E!==-1&&(A[g]=A[g].slice(0,E),A.length=g+1),A[g]=A[g].replaceAll(/\\(.)/g,"$1")}P=A.join('"')}return P}function b(P){const A=P.indexOf("'");if(A===-1)return P;const g=P.slice(0,A),F=P.slice(A+1).replace(/^[^']*'/,"");return v(g,F)}function x(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,g,E,F){if(E==="q"||E==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,o){return String.fromCharCode(parseInt(o,16))}),v(g,F);try{F=atob(F)}catch{}return v(g,F)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),r=s(20);const y=200,C=206;function O(k){const b=k.response;return typeof b!="string"?b:(0,n.stringToBytes)(b).buffer}class h{constructor(b,x={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&x.httpHeaders||Object.create(null),this.withCredentials=x.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,x,P){const A={begin:b,end:x};for(const g in P)A[g]=P[g];return this.request(A)}requestFull(b){return this.request(b)}request(b){const x=new XMLHttpRequest,P=this.currXhrId++,A=this.pendingRequests[P]={xhr:x};x.open("GET",this.url),x.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const E=this.httpHeaders[g];E!==void 0&&x.setRequestHeader(g,E)}return this.isHttp&&"begin"in b&&"end"in b?(x.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),A.expectedStatus=C):A.expectedStatus=y,x.responseType="arraybuffer",b.onError&&(x.onerror=function(g){b.onError(x.status)}),x.onreadystatechange=this.onStateChange.bind(this,P),x.onprogress=this.onProgress.bind(this,P),A.onHeadersReceived=b.onHeadersReceived,A.onDone=b.onDone,A.onError=b.onError,A.onProgress=b.onProgress,x.send(null),P}onProgress(b,x){var A;const P=this.pendingRequests[b];P&&((A=P.onProgress)==null||A.call(P,x))}onStateChange(b,x){var S,o,p;const P=this.pendingRequests[b];if(!P)return;const A=P.xhr;if(A.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),A.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],A.status===0&&this.isHttp){(S=P.onError)==null||S.call(P,A.status);return}const g=A.status||y;if(!(g===y&&P.expectedStatus===C)&&g!==P.expectedStatus){(o=P.onError)==null||o.call(P,A.status);return}const F=O(A);if(g===C){const l=A.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);P.onDone({begin:parseInt(m[1],10),chunk:F})}else F?P.onDone({begin:0,chunk:F}):(p=P.onError)==null||p.call(P,A.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const x=this.pendingRequests[b].xhr;delete this.pendingRequests[b],x.abort()}}class v{constructor(b){this._source=b,this._manager=new h(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const x=this._rangeRequestReaders.indexOf(b);x>=0&&this._rangeRequestReaders.splice(x,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(b,x){const P=new w(this._manager,b,x);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(b){var x;(x=this._fullRequestReader)==null||x.cancel(b);for(const P of this._rangeRequestReaders.slice(0))P.cancel(b)}}e.PDFNetworkStream=v;class a{constructor(b,x){this._manager=b;const P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._fullRequestId=b.requestFull(P),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=x.disableRange||!1,this._contentLength=x.length,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,x=this._manager.getRequestXhr(b),P=E=>x.getResponseHeader(E),{allowRangeRequests:A,suggestedLength:g}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});A&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,r.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){var x;(x=this.onProgress)==null||x.call(this,{loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(b,x,P){this._manager=b;const A={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(x,P,A),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var b;(b=this.onClosed)==null||b.call(this,this)}_onDone(b){const x=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunk=x,this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,r.createResponseStatusError)(b,this._url);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){var x;this.isStreamingSupported||(x=this.onProgress)==null||x.call(this,{loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),r=s(20);const y=/^file:\/\/\/[a-zA-Z]:\//;function C(P){const A=require$$5,g=A.parse(P);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(P)?A.parse(`file:///${P}`):(g.host||(g.protocol="file:"),g)}class O{constructor(A){this.source=A,this.url=C(A.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var A;return((A=this._fullRequestReader)==null?void 0:A._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new w(this),this._fullRequestReader}getRangeReader(A,g){if(g<=this._progressiveDataLength)return null;const E=this.isFsUrl?new x(this,A,g):new k(this,A,g);return this._rangeRequestReaders.push(E),E}cancelAllRequests(A){var g;(g=this._fullRequestReader)==null||g.cancel(A);for(const E of this._rangeRequestReaders.slice(0))E.cancel(A)}}e.PDFNodeStream=O;class h{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=A.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=A.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const g=A.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=A.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(P,A){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:A}}class w extends h{constructor(A){super(A);const g=E=>{if(E.statusCode===404){const p=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p,this._headersCapability.reject(p);return}this._headersCapability.resolve(),this._setReadableStream(E);const F=p=>this._readableStream.headers[p.toLowerCase()],{allowRangeRequests:S,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:A.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(F)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(a(this._url,A.httpHeaders),g)}else{const E=require$$5;this._request=E.request(a(this._url,A.httpHeaders),g)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class k extends v{constructor(A,g,E){super(A),this._httpHeaders={};for(const S in A.httpHeaders){const o=A.httpHeaders[S];o!==void 0&&(this._httpHeaders[S]=o)}this._httpHeaders.Range=`bytes=${g}-${E-1}`;const F=S=>{if(S.statusCode===404){const o=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(a(this._url,this._httpHeaders),F)}else{const S=require$$5;this._request=S.request(a(this._url,this._httpHeaders),F)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class b extends h{constructor(A){super(A);let g=decodeURIComponent(this._url.path);y.test(this._url.href)&&(g=g.replace(/^\//,""));const E=require$$5;E.lstat(g,(F,S)=>{if(F){F.code==="ENOENT"&&(F=new n.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=S.size,this._setReadableStream(E.createReadStream(g)),this._headersCapability.resolve()})}}class x extends v{constructor(A,g,E){super(A);let F=decodeURIComponent(this._url.path);y.test(this._url.href)&&(F=F.replace(/^\//,""));const S=require$$5;this._setReadableStream(S.createReadStream(F,{start:g,end:E-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),r=s(1);const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},C="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/1999/xlink",h=["butt","round","square"],v=["miter","round","bevel"],a=function(S,o="",p=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!p)return URL.createObjectURL(new Blob([S],{type:o}));const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m=`data:${o};base64,`;for(let f=0,I=S.length;f<I;f+=3){const c=S[f]&255,R=S[f+1]&255,L=S[f+2]&255,Q=c>>2,G=(c&3)<<4|R>>4,q=f+1<I?(R&15)<<2|L>>6:64,V=f+2<I?L&63:64;m+=l[Q]+l[G]+l[q]+l[V]}return m},w=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,p=new Int32Array(256);for(let L=0;L<256;L++){let Q=L;for(let G=0;G<8;G++)Q=Q&1?3988292384^Q>>1&2147483647:Q>>1&2147483647;p[L]=Q}function l(L,Q,G){let q=-1;for(let V=Q;V<G;V++){const se=(q^L[V])&255,D=p[se];q=q>>>8^D}return q^-1}function m(L,Q,G,q){let V=q;const se=Q.length;G[V]=se>>24&255,G[V+1]=se>>16&255,G[V+2]=se>>8&255,G[V+3]=se&255,V+=4,G[V]=L.charCodeAt(0)&255,G[V+1]=L.charCodeAt(1)&255,G[V+2]=L.charCodeAt(2)&255,G[V+3]=L.charCodeAt(3)&255,V+=4,G.set(Q,V),V+=Q.length;const D=l(G,q+4,V);G[V]=D>>24&255,G[V+1]=D>>16&255,G[V+2]=D>>8&255,G[V+3]=D&255}function f(L,Q,G){let q=1,V=0;for(let se=Q;se<G;++se)q=(q+(L[se]&255))%65521,V=(V+q)%65521;return V<<16|q}function I(L){if(!r.isNodeJS)return c(L);try{const Q=parseInt(process.versions.node)>=8?L:Buffer.from(L),G=require$$5.deflateSync(Q,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(Q){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return c(L)}function c(L){let Q=L.length;const G=65535,q=Math.ceil(Q/G),V=new Uint8Array(2+Q+q*5+4);let se=0;V[se++]=120,V[se++]=156;let D=0;for(;Q>G;)V[se++]=0,V[se++]=255,V[se++]=255,V[se++]=0,V[se++]=0,V.set(L.subarray(D,D+G),se),se+=G,D+=G,Q-=G;V[se++]=1,V[se++]=Q&255,V[se++]=Q>>8&255,V[se++]=~Q&65535&255,V[se++]=(~Q&65535)>>8&255,V.set(L.subarray(D),se),se+=L.length-D;const X=f(L,0,L.length);return V[se++]=X>>24&255,V[se++]=X>>16&255,V[se++]=X>>8&255,V[se++]=X&255,V}function R(L,Q,G,q){const V=L.width,se=L.height;let D,X,re;const N=L.data;switch(Q){case r.ImageKind.GRAYSCALE_1BPP:X=0,D=1,re=V+7>>3;break;case r.ImageKind.RGB_24BPP:X=2,D=8,re=V*3;break;case r.ImageKind.RGBA_32BPP:X=6,D=8,re=V*4;break;default:throw new Error("invalid format")}const d=new Uint8Array((1+re)*se);let u=0,T=0;for(let le=0;le<se;++le)d[u++]=0,d.set(N.subarray(T,T+re),u),T+=re,u+=re;if(Q===r.ImageKind.GRAYSCALE_1BPP&&q){u=0;for(let le=0;le<se;le++){u++;for(let fe=0;fe<re;fe++)d[u++]^=255}}const $=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,V&255,se>>24&255,se>>16&255,se>>8&255,se&255,D,X,0,0,0]),U=I(d),B=S.length+o*3+$.length+U.length,Y=new Uint8Array(B);let ie=0;return Y.set(S,ie),ie+=S.length,m("IHDR",$,Y,ie),ie+=o+$.length,m("IDATA",U,Y,ie),ie+=o+U.length,m("IEND",new Uint8Array(0),Y,ie),a(Y,"image/png",G)}return function(Q,G,q){const V=Q.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:Q.kind;return R(Q,V,G,q)}}();class k{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,p){this.x=o,this.y=p}}function b(S){let o=[];const p=[];for(const l of S){if(l.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),p.push(o),o=o.at(-1).items;continue}l.fn==="restore"?o=p.pop():o.push(l)}return o}function x(S){if(Number.isInteger(S))return S.toString();const o=S.toFixed(10);let p=o.length-1;if(o[p]!=="0")return o;do p--;while(o[p]==="0");return o.substring(0,o[p]==="."?p:p+1)}function P(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${x(S[0])} ${x(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const o=Math.acos(S[0])*180/Math.PI;return`rotate(${x(o)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${x(S[4])} ${x(S[5])})`;return`matrix(${x(S[0])} ${x(S[1])} ${x(S[2])} ${x(S[3])} ${x(S[4])} ${x(S[5])})`}let A=0,g=0,E=0;class F{constructor(o,p,l=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new k,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!l,this._operatorIdMapping=[];for(const m in r.OPS)this._operatorIdMapping[r.OPS[m]]=m}getObject(o,p=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):p}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const p=o.fnArray,l=o.argsArray;for(let m=0,f=p.length;m<f;m++)if(p[m]===r.OPS.dependency)for(const I of l[m]){const c=I.startsWith("g_")?this.commonObjs:this.objs,R=new Promise(L=>{c.get(I,L)});this.current.dependencies.push(R)}return Promise.all(this.current.dependencies)}transform(o,p,l,m,f,I){const c=[o,p,l,m,f,I];this.transformMatrix=r.Util.transform(this.transformMatrix,c),this.tgrp=null}getSVG(o,p){this.viewport=p;const l=this._initialize(p);return this.loadDependencies(o).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),l))}convertOpList(o){const p=this._operatorIdMapping,l=o.argsArray,m=o.fnArray,f=[];for(let I=0,c=m.length;I<c;I++){const R=m[I];f.push({fnId:R,fn:p[R],args:l[I]})}return b(f)}executeOpTree(o){for(const p of o){const l=p.fn,m=p.fnId,f=p.args;switch(m|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(f);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case r.OPS.setFont:this.setFont(f);break;case r.OPS.showText:this.showText(f[0]);break;case r.OPS.showSpacedText:this.showText(f[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(f[0],f[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case r.OPS.setHScale:this.setHScale(f[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case r.OPS.setTextRise:this.setTextRise(f[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case r.OPS.setLineWidth:this.setLineWidth(f[0]);break;case r.OPS.setLineJoin:this.setLineJoin(f[0]);break;case r.OPS.setLineCap:this.setLineCap(f[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case r.OPS.setFillColorN:this.setFillColorN(f);break;case r.OPS.shadingFill:this.shadingFill(f[0]);break;case r.OPS.setDash:this.setDash(f[0],f[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case r.OPS.setFlatness:this.setFlatness(f[0]);break;case r.OPS.setGState:this.setGState(f[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case r.OPS.constructPath:this.constructPath(f[0],f[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,r.warn)(`Unimplemented operator ${l}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,p,l,m,f,I){const c=this.current;c.textMatrix=c.lineMatrix=[o,p,l,m,f,I],c.textMatrixScale=Math.hypot(o,p),c.x=c.lineX=0,c.y=c.lineY=0,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${x(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",x(-c.y)),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtElement.append(c.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=r.IDENTITY_MATRIX,o.lineMatrix=r.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,p){const l=this.current;l.x=l.lineX+=o,l.y=l.lineY+=p,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${x(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",x(-l.y))}showText(o){const p=this.current,l=p.font,m=p.fontSize;if(m===0)return;const f=p.fontSizeScale,I=p.charSpacing,c=p.wordSpacing,R=p.fontDirection,L=p.textHScale*R,Q=l.vertical,G=Q?1:-1,q=l.defaultVMetrics,V=m*p.fontMatrix[0];let se=0;for(const re of o){if(re===null){se+=R*c;continue}else if(typeof re=="number"){se+=G*re*m/1e3;continue}const N=(re.isSpace?c:0)+I,d=re.fontChar;let u,T,$=re.width;if(Q){let B;const Y=re.vmetric||q;B=re.vmetric?Y[1]:$*.5,B=-B*V;const ie=Y[2]*V;$=Y?-Y[0]:$,u=B/f,T=(se+ie)/f}else u=se/f,T=0;(re.isInFont||l.missingFile)&&(p.xcoords.push(p.x+u),Q&&p.ycoords.push(-p.y+T),p.tspan.textContent+=d);const U=Q?$*V-N*R:$*V+N*R;se+=U}p.tspan.setAttributeNS(null,"x",p.xcoords.map(x).join(" ")),Q?p.tspan.setAttributeNS(null,"y",p.ycoords.map(x).join(" ")):p.tspan.setAttributeNS(null,"y",x(-p.y)),Q?p.y-=se:p.x+=se*L,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${x(p.fontSize)}px`),p.fontStyle!==y.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==y.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const D=p.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(D===r.TextRenderingMode.FILL||D===r.TextRenderingMode.FILL_STROKE?(p.fillColor!==y.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),D===r.TextRenderingMode.STROKE||D===r.TextRenderingMode.FILL_STROKE){const re=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,re)}let X=p.textMatrix;p.textRise!==0&&(X=X.slice(),X[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${P(X)} scale(${x(L)}, -1)`),p.txtElement.setAttributeNS(C,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(o,p){this.setLeading(-p),this.moveText(o,p)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=a(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${p}); }
`}setFont(o){const p=this.current,l=this.commonObjs.get(o[0]);let m=o[1];p.font=l,this.embedFonts&&!l.missingFile&&!this.embeddedFonts[l.loadedName]&&(this.addFontStyle(l),this.embeddedFonts[l.loadedName]=l),p.fontMatrix=l.fontMatrix||r.FONT_IDENTITY_MATRIX;let f="normal";l.black?f="900":l.bold&&(f="bold");const I=l.italic?"italic":"normal";m<0?(m=-m,p.fontDirection=-1):p.fontDirection=1,p.fontSize=m,p.fontFamily=l.loadedName,p.fontWeight=f,p.fontStyle=I,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",x(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const o=this.current;o.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=o.txtElement)!=null&&p.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=h[o]}setLineJoin(o){this.current.lineJoin=v[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,p,l){this.current.strokeColor=r.Util.makeHexColor(o,p,l)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,p,l){this.current.fillColor=r.Util.makeHexColor(o,p,l),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:p,height:l}=this.viewport,m=r.Util.inverseTransform(this.transformMatrix),[f,I,c,R]=r.Util.getAxialAlignedBoundingBox([0,0,p,l],m),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",f),L.setAttributeNS(null,"y",I),L.setAttributeNS(null,"width",c-f),L.setAttributeNS(null,"height",R-I),L.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(L)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const p=o[1],l=o[2],m=o[3]||r.IDENTITY_MATRIX,[f,I,c,R]=o[4],L=o[5],Q=o[6],G=o[7],q=`shading${E++}`,[V,se,D,X]=r.Util.normalizeRect([...r.Util.applyTransform([f,I],m),...r.Util.applyTransform([c,R],m)]),[re,N]=r.Util.singularValueDecompose2dScale(m),d=L*re,u=Q*N,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",q),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",d),T.setAttributeNS(null,"height",u),T.setAttributeNS(null,"x",`${V}`),T.setAttributeNS(null,"y",`${se}`);const $=this.svg,U=this.transformMatrix,B=this.current.fillColor,Y=this.current.strokeColor,ie=this.svgFactory.create(D-V,X-se);if(this.svg=ie,this.transformMatrix=m,G===2){const le=r.Util.makeHexColor(...p);this.current.fillColor=le,this.current.strokeColor=le}return this.executeOpTree(this.convertOpList(l)),this.svg=$,this.transformMatrix=U,this.current.fillColor=B,this.current.strokeColor=Y,T.append(ie.childNodes[0]),this.defs.append(T),`url(#${q})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const p=`shading${E++}`,l=o[3];let m;switch(o[1]){case"axial":const f=o[4],I=o[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",p),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",f[0]),m.setAttributeNS(null,"y1",f[1]),m.setAttributeNS(null,"x2",I[0]),m.setAttributeNS(null,"y2",I[1]);break;case"radial":const c=o[4],R=o[5],L=o[6],Q=o[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",p),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",R[0]),m.setAttributeNS(null,"cy",R[1]),m.setAttributeNS(null,"r",Q),m.setAttributeNS(null,"fx",c[0]),m.setAttributeNS(null,"fy",c[1]),m.setAttributeNS(null,"fr",L);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const f of l){const I=this.svgFactory.createElement("svg:stop");I.setAttributeNS(null,"offset",f[0]),I.setAttributeNS(null,"stop-color",f[1]),m.append(I)}return this.defs.append(m),`url(#${p})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,p){this.current.dashArray=o,this.current.dashPhase=p}constructPath(o,p){const l=this.current;let m=l.x,f=l.y,I=[],c=0;for(const R of o)switch(R|0){case r.OPS.rectangle:m=p[c++],f=p[c++];const L=p[c++],Q=p[c++],G=m+L,q=f+Q;I.push("M",x(m),x(f),"L",x(G),x(f),"L",x(G),x(q),"L",x(m),x(q),"Z");break;case r.OPS.moveTo:m=p[c++],f=p[c++],I.push("M",x(m),x(f));break;case r.OPS.lineTo:m=p[c++],f=p[c++],I.push("L",x(m),x(f));break;case r.OPS.curveTo:m=p[c+4],f=p[c+5],I.push("C",x(p[c]),x(p[c+1]),x(p[c+2]),x(p[c+3]),x(m),x(f)),c+=6;break;case r.OPS.curveTo2:I.push("C",x(m),x(f),x(p[c]),x(p[c+1]),x(p[c+2]),x(p[c+3])),m=p[c+2],f=p[c+3],c+=4;break;case r.OPS.curveTo3:m=p[c+2],f=p[c+3],I.push("C",x(p[c]),x(p[c+1]),x(m),x(f),x(m),x(f)),c+=4;break;case r.OPS.closePath:I.push("Z");break}I=I.join(" "),l.path&&o.length>0&&o[0]!==r.OPS.rectangle&&o[0]!==r.OPS.moveTo?I=l.path.getAttributeNS(null,"d")+I:(l.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(l.path)),l.path.setAttributeNS(null,"d",I),l.path.setAttributeNS(null,"fill","none"),l.element=l.path,l.setCurrentPoint(m,f)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const p=`clippath${A++}`,l=this.svgFactory.createElement("svg:clipPath");l.setAttributeNS(null,"id",p),l.setAttributeNS(null,"transform",P(this.transformMatrix));const m=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?m.setAttributeNS(null,"clip-rule","evenodd"):m.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,l.append(m),this.defs.append(l),o.activeClipUrl){o.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;l.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const p=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",p)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[p,l]of o)switch(p){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,r.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,p=1){const l=this.current;let m=l.dashArray;p!==1&&m.length>0&&(m=m.map(function(f){return p*f})),o.setAttributeNS(null,"stroke",l.strokeColor),o.setAttributeNS(null,"stroke-opacity",l.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",x(l.miterLimit)),o.setAttributeNS(null,"stroke-linecap",l.lineCap),o.setAttributeNS(null,"stroke-linejoin",l.lineJoin),o.setAttributeNS(null,"stroke-width",x(p*l.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",m.map(x).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",x(p*l.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const p=this.getObject(o);if(!p){(0,r.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(o,p){const l=o.width,m=o.height,f=w(o,this.forceDataSchema,!!p),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",x(l)),I.setAttributeNS(null,"height",x(m)),this.current.element=I,this.clip("nonzero");const c=this.svgFactory.createElement("svg:image");c.setAttributeNS(O,"xlink:href",f),c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y",x(-m)),c.setAttributeNS(null,"width",x(l)+"px"),c.setAttributeNS(null,"height",x(m)+"px"),c.setAttributeNS(null,"transform",`scale(${x(1/l)} ${x(-1/m)})`),p?p.append(c):this._ensureTransformGroup().append(c)}paintImageMaskXObject(o){const p=this.getObject(o.data,o);if(p.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const l=this.current,m=p.width,f=p.height,I=l.fillColor;l.maskId=`mask${g++}`;const c=this.svgFactory.createElement("svg:mask");c.setAttributeNS(null,"id",l.maskId);const R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",x(m)),R.setAttributeNS(null,"height",x(f)),R.setAttributeNS(null,"fill",I),R.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(c),this._ensureTransformGroup().append(R),this.paintInlineImageXObject(p,c)}paintFormXObjectBegin(o,p){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),p){const l=p[2]-p[0],m=p[3]-p[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",p[0]),f.setAttributeNS(null,"y",p[1]),f.setAttributeNS(null,"width",x(l)),f.setAttributeNS(null,"height",x(m)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const p=this.svgFactory.create(o.width,o.height),l=this.svgFactory.createElement("svg:defs");p.append(l),this.defs=l;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",P(o.transform)),p.append(m),this.svg=m,p}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=F},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(r){const y=[],C={items:y,styles:Object.create(null)};function O(h){var w;if(!h)return;let v=null;const a=h.name;if(a==="#text")v=h.value;else if(s.shouldBuildText(a))(w=h==null?void 0:h.attributes)!=null&&w.textContent?v=h.attributes.textContent:h.value&&(v=h.value);else return;if(v!==null&&y.push({str:v}),!!h.children)for(const k of h.children)O(k)}return O(r),C}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=P,e.updateTextLayer=A;var n=s(1),r=s(6);const y=1e5,C=30,O=.8,h=new Map;function v(g,E){let F;if(E&&n.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=g,F=S.getContext("2d",{alpha:!1})}return F}function a(g,E){const F=h.get(g);if(F)return F;const S=v(C,E);S.font=`${C}px ${g}`;const o=S.measureText("");let p=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(p){const f=p/(p+l);return h.set(g,f),S.canvas.width=S.canvas.height=0,f}S.strokeStyle="red",S.clearRect(0,0,C,C),S.strokeText("g",0,0);let m=S.getImageData(0,0,C,C).data;l=0;for(let f=m.length-1-3;f>=0;f-=4)if(m[f]>0){l=Math.ceil(f/4/C);break}S.clearRect(0,0,C,C),S.strokeText("A",0,C),m=S.getImageData(0,0,C,C).data,p=0;for(let f=0,I=m.length;f<I;f+=4)if(m[f]>0){p=C-Math.floor(f/4/C);break}if(S.canvas.width=S.canvas.height=0,p){const f=p/(p+l);return h.set(g,f),f}return h.set(g,O),O}function w(g,E,F){const S=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};g._textDivs.push(S);const p=n.Util.transform(g._transform,E.transform);let l=Math.atan2(p[1],p[0]);const m=F[E.fontName];m.vertical&&(l+=Math.PI/2);const f=Math.hypot(p[2],p[3]),I=f*a(m.fontFamily,g._isOffscreenCanvasSupported);let c,R;l===0?(c=p[4],R=p[5]-I):(c=p[4]+I*Math.sin(l),R=p[5]-I*Math.cos(l));const L="calc(var(--scale-factor)*",Q=S.style;g._container===g._rootContainer?(Q.left=`${(100*c/g._pageWidth).toFixed(2)}%`,Q.top=`${(100*R/g._pageHeight).toFixed(2)}%`):(Q.left=`${L}${c.toFixed(2)}px)`,Q.top=`${L}${R.toFixed(2)}px)`),Q.fontSize=`${L}${f.toFixed(2)}px)`,Q.fontFamily=m.fontFamily,o.fontSize=f,S.setAttribute("role","presentation"),S.textContent=E.str,S.dir=E.dir,g._fontInspectorEnabled&&(S.dataset.fontName=E.fontName),l!==0&&(o.angle=l*(180/Math.PI));let G=!1;if(E.str.length>1)G=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const q=Math.abs(E.transform[0]),V=Math.abs(E.transform[3]);q!==V&&Math.max(q,V)/Math.min(q,V)>1.5&&(G=!0)}G&&(o.canvasWidth=m.vertical?E.height:E.width),g._textDivProperties.set(S,o),g._isReadableStream&&g._layoutText(S)}function k(g){const{div:E,scale:F,properties:S,ctx:o,prevFontSize:p,prevFontFamily:l}=g,{style:m}=E;let f="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:I}=m,{canvasWidth:c,fontSize:R}=S;(p!==R||l!==I)&&(o.font=`${R*F}px ${I}`,g.prevFontSize=R,g.prevFontFamily=I);const{width:L}=o.measureText(E.textContent);L>0&&(f=`scaleX(${c*F/L})`)}S.angle!==0&&(f=`rotate(${S.angle}deg) ${f}`),f.length>0&&(m.transform=f)}function b(g){if(g._canceled)return;const E=g._textDivs,F=g._capability;if(E.length>y){F.resolve();return}if(!g._isReadableStream)for(const o of E)g._layoutText(o);F.resolve()}class x{constructor({textContentSource:E,container:F,viewport:S,textDivs:o,textDivProperties:p,textContentItemsStr:l,isOffscreenCanvasSupported:m}){var L;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=o||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=m,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)!=null&&L.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,m)};const{pageWidth:f,pageHeight:I,pageX:c,pageY:R}=S.rawDims;this._transform=[1,0,0,-1,-c,R+I],this._pageWidth=f,this._pageHeight=I,(0,r.setLayerDimensions)(F,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(E,F){for(const S of E){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),o.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),w(this,S,F)}}_layoutText(E){const F=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,k(this._layoutTextParams),F.hasText&&this._container.append(E),F.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const E=new n.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:o,done:p})=>{if(p){E.resolve();return}Object.assign(F,o.styles),this._processItems(o.items,F),S()},E.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:o}=this._textContentSource;this._processItems(S,o),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{F=null,b(this)},this._capability.reject)}}e.TextLayerRenderTask=x;function P(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:E,viewport:F}=g,S=getComputedStyle(E),o=S.getPropertyValue("visibility"),p=parseFloat(S.getPropertyValue("--scale-factor"));o==="visible"&&(!p||Math.abs(p-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const l=new x(g);return l._render(),l}function A({container:g,viewport:E,textDivs:F,textDivProperties:S,isOffscreenCanvasSupported:o,mustRotate:p=!0,mustRescale:l=!0}){if(p&&(0,r.setLayerDimensions)(g,{rotation:E.rotation}),l){const m=v(0,o),I={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m};for(const c of F)I.properties=S.get(c),I.div=c,k(I)}}},(t,e,s)=>{var a,w,k,b,x,P,A,g,E,F,S,Qt,Pt,Zt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),r=s(4),y=s(28),C=s(33),O=s(6),h=s(34);const f=class f{constructor({uiManager:c,pageIndex:R,div:L,accessibilityManager:Q,annotationLayer:G,viewport:q,l10n:V}){ce(this,S);ce(this,a);ce(this,w,!1);ce(this,k,null);ce(this,b,this.pointerup.bind(this));ce(this,x,this.pointerdown.bind(this));ce(this,P,new Map);ce(this,A,!1);ce(this,g,!1);ce(this,E,!1);ce(this,F);const se=[y.FreeTextEditor,C.InkEditor,h.StampEditor];if(!f._initialized){f._initialized=!0;for(const D of se)D.initialize(V)}c.registerEditorTypes(se),ue(this,F,c),this.pageIndex=R,this.div=L,ue(this,a,Q),ue(this,k,G),this.viewport=q,i(this,F).addLayer(this)}get isEmpty(){return i(this,P).size===0}updateToolbar(c){i(this,F).updateToolbar(c)}updateMode(c=i(this,F).getMode()){ne(this,S,en).call(this),c===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),c!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",c===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",c===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",c===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(c){if(!c&&i(this,F).getMode()!==n.AnnotationEditorType.INK)return;if(!c){for(const L of i(this,P).values())if(L.isEmpty()){L.setInBackground();return}}ne(this,S,Pt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(c){i(this,F).setEditingState(c)}addCommands(c){i(this,F).addCommands(c)}enable(){this.div.style.pointerEvents="auto";const c=new Set;for(const L of i(this,P).values())L.enableEditing(),L.annotationElementId&&c.add(L.annotationElementId);if(!i(this,k))return;const R=i(this,k).getEditableAnnotations();for(const L of R){if(L.hide(),i(this,F).isDeletedAnnotationElement(L.data.id)||c.has(L.data.id))continue;const Q=this.deserialize(L);Q&&(this.addOrRebuild(Q),Q.enableEditing())}}disable(){var R;ue(this,E,!0),this.div.style.pointerEvents="none";const c=new Set;for(const L of i(this,P).values()){if(L.disableEditing(),!L.annotationElementId||L.serialize()!==null){c.add(L.annotationElementId);continue}(R=this.getEditableAnnotation(L.annotationElementId))==null||R.show(),L.remove()}if(i(this,k)){const L=i(this,k).getEditableAnnotations();for(const Q of L){const{id:G}=Q.data;c.has(G)||i(this,F).isDeletedAnnotationElement(G)||Q.show()}}ne(this,S,en).call(this),this.isEmpty&&(this.div.hidden=!0),ue(this,E,!1)}getEditableAnnotation(c){var R;return((R=i(this,k))==null?void 0:R.getEditableAnnotation(c))||null}setActiveEditor(c){i(this,F).getActive()!==c&&i(this,F).setActiveEditor(c)}enableClick(){this.div.addEventListener("pointerdown",i(this,x)),this.div.addEventListener("pointerup",i(this,b))}disableClick(){this.div.removeEventListener("pointerdown",i(this,x)),this.div.removeEventListener("pointerup",i(this,b))}attach(c){i(this,P).set(c.id,c);const{annotationElementId:R}=c;R&&i(this,F).isDeletedAnnotationElement(R)&&i(this,F).removeDeletedAnnotationElement(c)}detach(c){var R;i(this,P).delete(c.id),(R=i(this,a))==null||R.removePointerInTextLayer(c.contentDiv),!i(this,E)&&c.annotationElementId&&i(this,F).addDeletedAnnotationElement(c)}remove(c){this.detach(c),i(this,F).removeEditor(c),c.div.contains(document.activeElement)&&setTimeout(()=>{i(this,F).focusMainContainer()},0),c.div.remove(),c.isAttachedToDOM=!1,i(this,g)||this.addInkEditorIfNeeded(!1)}changeParent(c){var R;c.parent!==this&&(c.annotationElementId&&(i(this,F).addDeletedAnnotationElement(c.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(c),c.annotationElementId=null),this.attach(c),(R=c.parent)==null||R.detach(c),c.setParent(this),c.div&&c.isAttachedToDOM&&(c.div.remove(),this.div.append(c.div)))}add(c){if(this.changeParent(c),i(this,F).addEditor(c),this.attach(c),!c.isAttachedToDOM){const R=c.render();this.div.append(R),c.isAttachedToDOM=!0}c.fixAndSetPosition(),c.onceAdded(),i(this,F).addToAnnotationStorage(c)}moveEditorInDOM(c){var L;if(!c.isAttachedToDOM)return;const{activeElement:R}=document;c.div.contains(R)&&(c._focusEventsAllowed=!1,setTimeout(()=>{c.div.contains(document.activeElement)?c._focusEventsAllowed=!0:(c.div.addEventListener("focusin",()=>{c._focusEventsAllowed=!0},{once:!0}),R.focus())},0)),c._structTreeParentId=(L=i(this,a))==null?void 0:L.moveElementInDOM(this.div,c.div,c.contentDiv,!0)}addOrRebuild(c){c.needsToBeRebuilt()?c.rebuild():this.add(c)}addUndoableEditor(c){const R=()=>c._uiManager.rebuild(c),L=()=>{c.remove()};this.addCommands({cmd:R,undo:L,mustExec:!1})}getNextId(){return i(this,F).getId()}pasteEditor(c,R){i(this,F).updateToolbar(c),i(this,F).updateMode(c);const{offsetX:L,offsetY:Q}=ne(this,S,Zt).call(this),G=this.getNextId(),q=ne(this,S,Qt).call(this,{parent:this,id:G,x:L,y:Q,uiManager:i(this,F),isCentered:!0,...R});q&&this.add(q)}deserialize(c){switch(c.annotationType??c.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return y.FreeTextEditor.deserialize(c,this,i(this,F));case n.AnnotationEditorType.INK:return C.InkEditor.deserialize(c,this,i(this,F));case n.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(c,this,i(this,F))}return null}addNewEditor(){ne(this,S,Pt).call(this,ne(this,S,Zt).call(this),!0)}setSelected(c){i(this,F).setSelected(c)}toggleSelected(c){i(this,F).toggleSelected(c)}isSelected(c){return i(this,F).isSelected(c)}unselect(c){i(this,F).unselect(c)}pointerup(c){const{isMac:R}=n.FeatureTest.platform;if(!(c.button!==0||c.ctrlKey&&R)&&c.target===this.div&&i(this,A)){if(ue(this,A,!1),!i(this,w)){ue(this,w,!0);return}if(i(this,F).getMode()===n.AnnotationEditorType.STAMP){i(this,F).unselectAll();return}ne(this,S,Pt).call(this,c,!1)}}pointerdown(c){if(i(this,A)){ue(this,A,!1);return}const{isMac:R}=n.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&R||c.target!==this.div)return;ue(this,A,!0);const L=i(this,F).getActive();ue(this,w,!L||L.isEmpty())}findNewParent(c,R,L){const Q=i(this,F).findParent(R,L);return Q===null||Q===this?!1:(Q.changeParent(c),!0)}destroy(){var c,R;((c=i(this,F).getActive())==null?void 0:c.parent)===this&&(i(this,F).commitOrRemove(),i(this,F).setActiveEditor(null));for(const L of i(this,P).values())(R=i(this,a))==null||R.removePointerInTextLayer(L.contentDiv),L.setParent(null),L.isAttachedToDOM=!1,L.div.remove();this.div=null,i(this,P).clear(),i(this,F).removeLayer(this)}render({viewport:c}){this.viewport=c,(0,O.setLayerDimensions)(this.div,c);for(const R of i(this,F).getEditors(this.pageIndex))this.add(R);this.updateMode()}update({viewport:c}){i(this,F).commitOrRemove(),this.viewport=c,(0,O.setLayerDimensions)(this.div,{rotation:c.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:c,pageHeight:R}=this.viewport.rawDims;return[c,R]}};a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakSet,Qt=function(c){switch(i(this,F).getMode()){case n.AnnotationEditorType.FREETEXT:return new y.FreeTextEditor(c);case n.AnnotationEditorType.INK:return new C.InkEditor(c);case n.AnnotationEditorType.STAMP:return new h.StampEditor(c)}return null},Pt=function(c,R){const L=this.getNextId(),Q=ne(this,S,Qt).call(this,{parent:this,id:L,x:c.offsetX,y:c.offsetY,uiManager:i(this,F),isCentered:R});return Q&&this.add(Q),Q},Zt=function(){const{x:c,y:R,width:L,height:Q}=this.div.getBoundingClientRect(),G=Math.max(0,c),q=Math.max(0,R),V=Math.min(window.innerWidth,c+L),se=Math.min(window.innerHeight,R+Q),D=(G+V)/2-c,X=(q+se)/2-R,[re,N]=this.viewport.rotation%180===0?[D,X]:[X,D];return{offsetX:re,offsetY:N}},en=function(){ue(this,g,!0);for(const c of i(this,P).values())c.isEmpty()&&c.remove();ue(this,g,!1)},Qe(f,"_initialized",!1);let v=f;e.AnnotationEditorLayer=v},(t,e,s)=>{var h,v,a,w,k,b,x,P,A,g,Rn,kn,Mn,mt,tn,Fn,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),r=s(5),y=s(4),C=s(29);const f=class f extends y.AnnotationEditor{constructor(R){super({...R,name:"freeTextEditor"});ce(this,g);ce(this,h,this.editorDivBlur.bind(this));ce(this,v,this.editorDivFocus.bind(this));ce(this,a,this.editorDivInput.bind(this));ce(this,w,this.editorDivKeydown.bind(this));ce(this,k);ce(this,b,"");ce(this,x,`${this.id}-editor`);ce(this,P);ce(this,A,null);ue(this,k,R.color||f._defaultColor||y.AnnotationEditor._defaultLineColor),ue(this,P,R.fontSize||f._defaultFontSize)}static get _keyboardManager(){const R=f.prototype,L=q=>q.isEmpty(),Q=r.AnnotationEditorUIManager.TRANSLATE_SMALL,G=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],R.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],R.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],R._translateEmpty,{args:[-Q,0],checker:L}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],R._translateEmpty,{args:[-G,0],checker:L}],[["ArrowRight","mac+ArrowRight"],R._translateEmpty,{args:[Q,0],checker:L}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],R._translateEmpty,{args:[G,0],checker:L}],[["ArrowUp","mac+ArrowUp"],R._translateEmpty,{args:[0,-Q],checker:L}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],R._translateEmpty,{args:[0,-G],checker:L}],[["ArrowDown","mac+ArrowDown"],R._translateEmpty,{args:[0,Q],checker:L}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],R._translateEmpty,{args:[0,G],checker:L}]]))}static initialize(R){y.AnnotationEditor.initialize(R,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const L=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(L.getPropertyValue("--freetext-padding"))}static updateDefaultParams(R,L){switch(R){case n.AnnotationEditorParamsType.FREETEXT_SIZE:f._defaultFontSize=L;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:f._defaultColor=L;break}}updateParams(R,L){switch(R){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ne(this,g,Rn).call(this,L);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ne(this,g,kn).call(this,L);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,f._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,f._defaultColor||y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,i(this,P)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,i(this,k)]]}_translateEmpty(R,L){this._uiManager.translateSelectedEditors(R,L,!0)}getInitialTranslation(){const R=this.parentScale;return[-f._internalPadding*R,-(f._internalPadding+i(this,P))*R]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",i(this,w)),this.editorDiv.addEventListener("focus",i(this,v)),this.editorDiv.addEventListener("blur",i(this,h)),this.editorDiv.addEventListener("input",i(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",i(this,x)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",i(this,w)),this.editorDiv.removeEventListener("focus",i(this,v)),this.editorDiv.removeEventListener("blur",i(this,h)),this.editorDiv.removeEventListener("input",i(this,a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(R){this._focusEventsAllowed&&(super.focusin(R),R.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var R;if(this.width){ne(this,g,nn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(R=this._initialOptions)!=null&&R.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const R=i(this,b),L=ue(this,b,ne(this,g,Mn).call(this).trimEnd());if(R===L)return;const Q=G=>{if(ue(this,b,G),!G){this.remove();return}ne(this,g,tn).call(this),this._uiManager.rebuild(this),ne(this,g,mt).call(this)};this.addCommands({cmd:()=>{Q(L)},undo:()=>{Q(R)},mustExec:!1}),ne(this,g,mt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(R){this.enterInEditMode()}keydown(R){R.target===this.div&&R.key==="Enter"&&(this.enterInEditMode(),R.preventDefault())}editorDivKeydown(R){f._keyboardManager.exec(this,R)}editorDivFocus(R){this.isEditing=!0}editorDivBlur(R){this.isEditing=!1}editorDivInput(R){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let R,L;this.width&&(R=this.x,L=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",i(this,x)),this.enableEditing(),y.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var q;return(q=this.editorDiv)==null?void 0:q.setAttribute("aria-label",G)}),y.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(G=>{var q;return(q=this.editorDiv)==null?void 0:q.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:Q}=this.editorDiv;if(Q.fontSize=`calc(${i(this,P)}px * var(--scale-factor))`,Q.color=i(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,q]=this.parentDimensions;if(this.annotationElementId){const{position:V}=i(this,A);let[se,D]=this.getInitialTranslation();[se,D]=this.pageTranslationToScreen(se,D);const[X,re]=this.pageDimensions,[N,d]=this.pageTranslation;let u,T;switch(this.rotation){case 0:u=R+(V[0]-N)/X,T=L+this.height-(V[1]-d)/re;break;case 90:u=R+(V[0]-N)/X,T=L-(V[1]-d)/re,[se,D]=[D,-se];break;case 180:u=R-this.width+(V[0]-N)/X,T=L-(V[1]-d)/re,[se,D]=[-se,-D];break;case 270:u=R+(V[0]-N-this.height*re)/X,T=L+(V[1]-d-this.width*X)/re,[se,D]=[-D,se];break}this.setAt(u*G,T*q,se,D)}else this.setAt(R*G,L*q,this.width*G,this.height*q);ne(this,g,tn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(R,L,Q){let G=null;if(R instanceof C.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:V,fontColor:se},rect:D,rotation:X,id:re},textContent:N,textPosition:d,parent:{page:{pageNumber:u}}}=R;if(!N||N.length===0)return null;G=R={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(se),fontSize:V,value:N.join(`
`),position:d,pageIndex:u-1,rect:D,rotation:X,id:re,deleted:!1}}const q=super.deserialize(R,L,Q);return ue(q,P,R.fontSize),ue(q,k,n.Util.makeHexColor(...R.color)),ue(q,b,R.value),q.annotationElementId=R.id||null,ue(q,A,G),q}serialize(R=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const L=f._internalPadding*this.parentScale,Q=this.getRect(L,L),G=y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:i(this,k)),q={annotationType:n.AnnotationEditorType.FREETEXT,color:G,fontSize:i(this,P),value:i(this,b),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return R?q:this.annotationElementId&&!ne(this,g,Fn).call(this,q)?null:(q.id=this.annotationElementId,q)}};h=new WeakMap,v=new WeakMap,a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakSet,Rn=function(R){const L=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-i(this,P))*this.parentScale),ue(this,P,G),ne(this,g,mt).call(this)},Q=i(this,P);this.addCommands({cmd:()=>{L(R)},undo:()=>{L(Q)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kn=function(R){const L=i(this,k);this.addCommands({cmd:()=>{ue(this,k,this.editorDiv.style.color=R)},undo:()=>{ue(this,k,this.editorDiv.style.color=L)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=function(){const R=this.editorDiv.getElementsByTagName("div");if(R.length===0)return this.editorDiv.innerText;const L=[];for(const Q of R)L.push(Q.innerText.replace(/\r\n?|\n/,""));return L.join(`
`)},mt=function(){const[R,L]=this.parentDimensions;let Q;if(this.isAttachedToDOM)Q=this.div.getBoundingClientRect();else{const{currentLayer:G,div:q}=this,V=q.style.display;q.style.display="hidden",G.div.append(this.div),Q=q.getBoundingClientRect(),q.remove(),q.style.display=V}this.rotation%180===this.parentRotation%180?(this.width=Q.width/R,this.height=Q.height/L):(this.width=Q.height/R,this.height=Q.width/L),this.fixAndSetPosition()},tn=function(){if(this.editorDiv.replaceChildren(),!!i(this,b))for(const R of i(this,b).split(`
`)){const L=document.createElement("div");L.append(R?document.createTextNode(R):document.createElement("br")),this.editorDiv.append(L)}},Fn=function(R){const{value:L,fontSize:Q,color:G,rect:q,pageIndex:V}=i(this,A);return R.value!==L||R.fontSize!==Q||R.rect.some((se,D)=>Math.abs(se-q[D])>=1)||R.color.some((se,D)=>se!==G[D])||R.pageIndex!==V},nn=function(R=!1){if(!this.annotationElementId)return;if(ne(this,g,mt).call(this),!R&&(this.width===0||this.height===0)){setTimeout(()=>ne(this,g,nn).call(this,!0),0);return}const L=f._internalPadding*this.parentScale;i(this,A).rect=this.getRect(L,L)},Qe(f,"_freeTextDefaultContent",""),Qe(f,"_internalPadding",0),Qe(f,"_defaultColor",null),Qe(f,"_defaultFontSize",10),Qe(f,"_type","freetext");let O=f;e.FreeTextEditor=O},(t,e,s)=>{var T,U,it,On,ie,le,fe,be,me,ve,Z,ee,M,H,J,oe,ge,Ae,_e,te,Pe,Ce,Dn,wt,sn,rn,Oe,ze,Xe,Ee,ae,de,Me,on,Ge,z,ye,we,Ln,an;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),r=s(6),y=s(3),C=s(30),O=s(31),h=s(32);const v=1e3,a=9,w=new WeakSet;function k(Re){return{width:Re[2]-Re[0],height:Re[3]-Re[1]}}class b{static create(W){switch(W.data.annotationType){case n.AnnotationType.LINK:return new P(W);case n.AnnotationType.TEXT:return new A(W);case n.AnnotationType.WIDGET:switch(W.data.fieldType){case"Tx":return new E(W);case"Btn":return W.data.radioButton?new o(W):W.data.checkBox?new S(W):new p(W);case"Ch":return new l(W);case"Sig":return new F(W)}return new g(W);case n.AnnotationType.POPUP:return new m(W);case n.AnnotationType.FREETEXT:return new I(W);case n.AnnotationType.LINE:return new c(W);case n.AnnotationType.SQUARE:return new R(W);case n.AnnotationType.CIRCLE:return new L(W);case n.AnnotationType.POLYLINE:return new Q(W);case n.AnnotationType.CARET:return new q(W);case n.AnnotationType.INK:return new V(W);case n.AnnotationType.POLYGON:return new G(W);case n.AnnotationType.HIGHLIGHT:return new se(W);case n.AnnotationType.UNDERLINE:return new D(W);case n.AnnotationType.SQUIGGLY:return new X(W);case n.AnnotationType.STRIKEOUT:return new re(W);case n.AnnotationType.STAMP:return new N(W);case n.AnnotationType.FILEATTACHMENT:return new d(W);default:return new x(W)}}}const $=class ${constructor(W,{isRenderable:j=!1,ignoreBorder:K=!1,createQuadrilaterals:he=!1}={}){ce(this,T,!1);this.isRenderable=j,this.data=W.data,this.layer=W.layer,this.linkService=W.linkService,this.downloadManager=W.downloadManager,this.imageResourcesPath=W.imageResourcesPath,this.renderForms=W.renderForms,this.svgFactory=W.svgFactory,this.annotationStorage=W.annotationStorage,this.enableScripting=W.enableScripting,this.hasJSActions=W.hasJSActions,this._fieldObjects=W.fieldObjects,this.parent=W.parent,j&&(this.container=this._createContainer(K)),he&&this._createQuadrilaterals()}static _hasPopupData({titleObj:W,contentsObj:j,richText:K}){return!!(W!=null&&W.str||j!=null&&j.str||K!=null&&K.str)}get hasPopupData(){return $._hasPopupData(this.data)}_createContainer(W){const{data:j,parent:{page:K,viewport:he}}=this,pe=document.createElement("section");pe.setAttribute("data-annotation-id",j.id),this instanceof g||(pe.tabIndex=v),pe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pe.setAttribute("aria-haspopup","dialog"),j.noRotate&&pe.classList.add("norotate");const{pageWidth:xe,pageHeight:Se,pageX:Fe,pageY:De}=he.rawDims;if(!j.rect||this instanceof m){const{rotation:Be}=j;return!j.hasOwnCanvas&&Be!==0&&this.setRotation(Be,pe),pe}const{width:Te,height:We}=k(j.rect),Le=n.Util.normalizeRect([j.rect[0],K.view[3]-j.rect[1]+K.view[1],j.rect[2],K.view[3]-j.rect[3]+K.view[1]]);if(!W&&j.borderStyle.width>0){pe.style.borderWidth=`${j.borderStyle.width}px`;const Be=j.borderStyle.horizontalCornerRadius,Ve=j.borderStyle.verticalCornerRadius;if(Be>0||Ve>0){const Je=`calc(${Be}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;pe.style.borderRadius=Je}else if(this instanceof o){const Je=`calc(${Te}px * var(--scale-factor)) / calc(${We}px * var(--scale-factor))`;pe.style.borderRadius=Je}switch(j.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:pe.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:pe.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:pe.style.borderBottomStyle="solid";break}const Ke=j.borderColor||null;Ke?(ue(this,T,!0),pe.style.borderColor=n.Util.makeHexColor(Ke[0]|0,Ke[1]|0,Ke[2]|0)):pe.style.borderWidth=0}pe.style.left=`${100*(Le[0]-Fe)/xe}%`,pe.style.top=`${100*(Le[1]-De)/Se}%`;const{rotation:Ne}=j;return j.hasOwnCanvas||Ne===0?(pe.style.width=`${100*Te/xe}%`,pe.style.height=`${100*We/Se}%`):this.setRotation(Ne,pe),pe}setRotation(W,j=this.container){if(!this.data.rect)return;const{pageWidth:K,pageHeight:he}=this.parent.viewport.rawDims,{width:pe,height:xe}=k(this.data.rect);let Se,Fe;W%180===0?(Se=100*pe/K,Fe=100*xe/he):(Se=100*xe/K,Fe=100*pe/he),j.style.width=`${Se}%`,j.style.height=`${Fe}%`,j.setAttribute("data-main-rotation",(360-W)%360)}get _commonActions(){const W=(j,K,he)=>{const pe=he.detail[j],xe=pe[0],Se=pe.slice(1);he.target.style[K]=C.ColorConverters[`${xe}_HTML`](Se),this.annotationStorage.setValue(this.data.id,{[K]:C.ColorConverters[`${xe}_rgb`](Se)})};return(0,n.shadow)(this,"_commonActions",{display:j=>{const{display:K}=j.detail,he=K%2===1;this.container.style.visibility=he?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:he,noPrint:K===1||K===2})},print:j=>{this.annotationStorage.setValue(this.data.id,{noPrint:!j.detail.print})},hidden:j=>{const{hidden:K}=j.detail;this.container.style.visibility=K?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:K,noView:K})},focus:j=>{setTimeout(()=>j.target.focus({preventScroll:!1}),0)},userName:j=>{j.target.title=j.detail.userName},readonly:j=>{j.target.disabled=j.detail.readonly},required:j=>{this._setRequired(j.target,j.detail.required)},bgColor:j=>{W("bgColor","backgroundColor",j)},fillColor:j=>{W("fillColor","backgroundColor",j)},fgColor:j=>{W("fgColor","color",j)},textColor:j=>{W("textColor","color",j)},borderColor:j=>{W("borderColor","borderColor",j)},strokeColor:j=>{W("strokeColor","borderColor",j)},rotation:j=>{const K=j.detail.rotation;this.setRotation(K),this.annotationStorage.setValue(this.data.id,{rotation:K})}})}_dispatchEventFromSandbox(W,j){const K=this._commonActions;for(const he of Object.keys(j.detail)){const pe=W[he]||K[he];pe==null||pe(j)}}_setDefaultPropertiesFromJS(W){if(!this.enableScripting)return;const j=this.annotationStorage.getRawValue(this.data.id);if(!j)return;const K=this._commonActions;for(const[he,pe]of Object.entries(j)){const xe=K[he];if(xe){const Se={detail:{[he]:pe},target:W};xe(Se),delete j[he]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:W}=this.data;if(!W)return;const[j,K,he,pe]=this.data.rect;if(W.length===1){const[,{x:Ve,y:Ke},{x:Je,y:tt}]=W[0];if(he===Ve&&pe===Ke&&j===Je&&K===tt)return}const{style:xe}=this.container;let Se;if(i(this,T)){const{borderColor:Ve,borderWidth:Ke}=xe;xe.borderWidth=0,Se=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ve}" stroke-width="${Ke}">`],this.container.classList.add("hasBorder")}const Fe=he-j,De=pe-K,{svgFactory:Te}=this,We=Te.createElement("svg");We.classList.add("quadrilateralsContainer"),We.setAttribute("width",0),We.setAttribute("height",0);const Le=Te.createElement("defs");We.append(Le);const Ne=Te.createElement("clipPath"),Be=`clippath_${this.data.id}`;Ne.setAttribute("id",Be),Ne.setAttribute("clipPathUnits","objectBoundingBox"),Le.append(Ne);for(const[,{x:Ve,y:Ke},{x:Je,y:tt}]of W){const Ze=Te.createElement("rect"),Ye=(Je-j)/Fe,et=(pe-Ke)/De,rt=(Ve-Je)/Fe,mn=(Ke-tt)/De;Ze.setAttribute("x",Ye),Ze.setAttribute("y",et),Ze.setAttribute("width",rt),Ze.setAttribute("height",mn),Ne.append(Ze),Se==null||Se.push(`<rect vector-effect="non-scaling-stroke" x="${Ye}" y="${et}" width="${rt}" height="${mn}"/>`)}i(this,T)&&(Se.push("</g></svg>')"),xe.backgroundImage=Se.join("")),this.container.append(We),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:W,data:j}=this;W.setAttribute("aria-haspopup","dialog");const K=new m({data:{color:j.color,titleObj:j.titleObj,modificationDate:j.modificationDate,contentsObj:j.contentsObj,richText:j.richText,parentRect:j.rect,borderStyle:0,id:`popup_${j.id}`,rotation:j.rotation},parent:this.parent,elements:[this]});this.parent.div.append(K.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(W,j=null){const K=[];if(this._fieldObjects){const he=this._fieldObjects[W];if(he)for(const{page:pe,id:xe,exportValues:Se}of he){if(pe===-1||xe===j)continue;const Fe=typeof Se=="string"?Se:null,De=document.querySelector(`[data-element-id="${xe}"]`);if(De&&!w.has(De)){(0,n.warn)(`_getElementsByName - element not allowed: ${xe}`);continue}K.push({id:xe,exportValue:Fe,domElement:De})}return K}for(const he of document.getElementsByName(W)){const{exportValue:pe}=he,xe=he.getAttribute("data-element-id");xe!==j&&w.has(he)&&K.push({id:xe,exportValue:pe,domElement:he})}return K}show(){var W;this.container&&(this.container.hidden=!1),(W=this.popup)==null||W.maybeShow()}hide(){var W;this.container&&(this.container.hidden=!0),(W=this.popup)==null||W.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const W=this.getElementsToTriggerPopup();if(Array.isArray(W))for(const j of W)j.classList.add("highlightArea");else W.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:W,data:{id:j}}=this;this.container.addEventListener("dblclick",()=>{var K;(K=this.linkService.eventBus)==null||K.dispatch("switchannotationeditormode",{source:this,mode:W,editId:j})})}};T=new WeakMap;let x=$;class P extends x{constructor(j,K=null){super(j,{isRenderable:!0,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0});ce(this,U);this.isTooltipOnly=j.data.isTooltipOnly}render(){const{data:j,linkService:K}=this,he=document.createElement("a");he.setAttribute("data-element-id",j.id);let pe=!1;return j.url?(K.addLinkAttributes(he,j.url,j.newWindow),pe=!0):j.action?(this._bindNamedAction(he,j.action),pe=!0):j.attachment?(this._bindAttachment(he,j.attachment),pe=!0):j.setOCGState?(ne(this,U,On).call(this,he,j.setOCGState),pe=!0):j.dest?(this._bindLink(he,j.dest),pe=!0):(j.actions&&(j.actions.Action||j.actions["Mouse Up"]||j.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(he,j),pe=!0),j.resetForm?(this._bindResetFormAction(he,j.resetForm),pe=!0):this.isTooltipOnly&&!pe&&(this._bindLink(he,""),pe=!0)),this.container.classList.add("linkAnnotation"),pe&&this.container.append(he),this.container}_bindLink(j,K){j.href=this.linkService.getDestinationHash(K),j.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&ne(this,U,it).call(this)}_bindNamedAction(j,K){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>(this.linkService.executeNamedAction(K),!1),ne(this,U,it).call(this)}_bindAttachment(j,K){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>{var he;return(he=this.downloadManager)==null||he.openOrDownloadData(this.container,K.content,K.filename),!1},ne(this,U,it).call(this)}_bindJSAction(j,K){j.href=this.linkService.getAnchorUrl("");const he=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pe of Object.keys(K.actions)){const xe=he.get(pe);xe&&(j[xe]=()=>{var Se;return(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:pe}}),!1})}j.onclick||(j.onclick=()=>!1),ne(this,U,it).call(this)}_bindResetFormAction(j,K){const he=j.onclick;if(he||(j.href=this.linkService.getAnchorUrl("")),ne(this,U,it).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),he||(j.onclick=()=>!1);return}j.onclick=()=>{var We;he==null||he();const{fields:pe,refs:xe,include:Se}=K,Fe=[];if(pe.length!==0||xe.length!==0){const Le=new Set(xe);for(const Ne of pe){const Be=this._fieldObjects[Ne]||[];for(const{id:Ve}of Be)Le.add(Ve)}for(const Ne of Object.values(this._fieldObjects))for(const Be of Ne)Le.has(Be.id)===Se&&Fe.push(Be)}else for(const Le of Object.values(this._fieldObjects))Fe.push(...Le);const De=this.annotationStorage,Te=[];for(const Le of Fe){const{id:Ne}=Le;switch(Te.push(Ne),Le.type){case"text":{const Ve=Le.defaultValue||"";De.setValue(Ne,{value:Ve});break}case"checkbox":case"radiobutton":{const Ve=Le.defaultValue===Le.exportValues;De.setValue(Ne,{value:Ve});break}case"combobox":case"listbox":{const Ve=Le.defaultValue||"";De.setValue(Ne,{value:Ve});break}default:continue}const Be=document.querySelector(`[data-element-id="${Ne}"]`);if(Be){if(!w.has(Be)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Ne}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((We=this.linkService.eventBus)==null||We.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Te,name:"ResetForm"}})),!1}}}U=new WeakSet,it=function(){this.container.setAttribute("data-internal-link","")},On=function(j,K){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>(this.linkService.executeSetOCGState(K),!1),ne(this,U,it).call(this)};class A extends x{constructor(W){super(W,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const W=document.createElement("img");return W.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",W.alt="[{{type}} Annotation]",W.dataset.l10nId="text_annotation_type",W.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(W),this.container}}class g extends x{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(W){var j;this.data.hasOwnCanvas&&(((j=W.previousSibling)==null?void 0:j.nodeName)==="CANVAS"&&(W.previousSibling.hidden=!0),W.hidden=!1)}_getKeyModifier(W){const{isWin:j,isMac:K}=n.FeatureTest.platform;return j&&W.ctrlKey||K&&W.metaKey}_setEventListener(W,j,K,he,pe){K.includes("mouse")?W.addEventListener(K,xe=>{var Se;(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:he,value:pe(xe),shift:xe.shiftKey,modifier:this._getKeyModifier(xe)}})}):W.addEventListener(K,xe=>{var Se;if(K==="blur"){if(!j.focused||!xe.relatedTarget)return;j.focused=!1}else if(K==="focus"){if(j.focused)return;j.focused=!0}pe&&((Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:he,value:pe(xe)}}))})}_setEventListeners(W,j,K,he){var pe,xe,Se;for(const[Fe,De]of K)(De==="Action"||(pe=this.data.actions)!=null&&pe[De])&&((De==="Focus"||De==="Blur")&&(j||(j={focused:!1})),this._setEventListener(W,j,Fe,De,he),De==="Focus"&&!((xe=this.data.actions)!=null&&xe.Blur)?this._setEventListener(W,j,"blur","Blur",null):De==="Blur"&&!((Se=this.data.actions)!=null&&Se.Focus)&&this._setEventListener(W,j,"focus","Focus",null))}_setBackgroundColor(W){const j=this.data.backgroundColor||null;W.style.backgroundColor=j===null?"transparent":n.Util.makeHexColor(j[0],j[1],j[2])}_setTextStyle(W){const j=["left","center","right"],{fontColor:K}=this.data.defaultAppearanceData,he=this.data.defaultAppearanceData.fontSize||a,pe=W.style;let xe;const Se=2,Fe=De=>Math.round(10*De)/10;if(this.data.multiLine){const De=Math.abs(this.data.rect[3]-this.data.rect[1]-Se),Te=Math.round(De/(n.LINE_FACTOR*he))||1,We=De/Te;xe=Math.min(he,Fe(We/n.LINE_FACTOR))}else{const De=Math.abs(this.data.rect[3]-this.data.rect[1]-Se);xe=Math.min(he,Fe(De/n.LINE_FACTOR))}pe.fontSize=`calc(${xe}px * var(--scale-factor))`,pe.color=n.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(pe.textAlign=j[this.data.textAlignment])}_setRequired(W,j){j?W.setAttribute("required",!0):W.removeAttribute("required"),W.setAttribute("aria-required",j)}}class E extends g{constructor(W){const j=W.renderForms||!W.data.hasAppearance&&!!W.data.fieldValue;super(W,{isRenderable:j})}setPropertyOnSiblings(W,j,K,he){const pe=this.annotationStorage;for(const xe of this._getElementsByName(W.name,W.id))xe.domElement&&(xe.domElement[j]=K),pe.setValue(xe.id,{[he]:K})}render(){var he,pe;const W=this.annotationStorage,j=this.data.id;this.container.classList.add("textWidgetAnnotation");let K=null;if(this.renderForms){const xe=W.getValue(j,{value:this.data.fieldValue});let Se=xe.value||"";const Fe=W.getValue(j,{charLimit:this.data.maxLen}).charLimit;Fe&&Se.length>Fe&&(Se=Se.slice(0,Fe));let De=xe.formattedValue||((he=this.data.textContent)==null?void 0:he.join(`
`))||null;De&&this.data.comb&&(De=De.replaceAll(/\s+/g,""));const Te={userValue:Se,formattedValue:De,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(K=document.createElement("textarea"),K.textContent=De??Se,this.data.doNotScroll&&(K.style.overflowY="hidden")):(K=document.createElement("input"),K.type="text",K.setAttribute("value",De??Se),this.data.doNotScroll&&(K.style.overflowX="hidden")),this.data.hasOwnCanvas&&(K.hidden=!0),w.add(K),K.setAttribute("data-element-id",j),K.disabled=this.data.readOnly,K.name=this.data.fieldName,K.tabIndex=v,this._setRequired(K,this.data.required),Fe&&(K.maxLength=Fe),K.addEventListener("input",Le=>{W.setValue(j,{value:Le.target.value}),this.setPropertyOnSiblings(K,"value",Le.target.value,"value"),Te.formattedValue=null}),K.addEventListener("resetform",Le=>{const Ne=this.data.defaultFieldValue??"";K.value=Te.userValue=Ne,Te.formattedValue=null});let We=Le=>{const{formattedValue:Ne}=Te;Ne!=null&&(Le.target.value=Ne),Le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){K.addEventListener("focus",Ne=>{if(Te.focused)return;const{target:Be}=Ne;Te.userValue&&(Be.value=Te.userValue),Te.lastCommittedValue=Be.value,Te.commitKey=1,Te.focused=!0}),K.addEventListener("updatefromsandbox",Ne=>{this.showElementAndHideCanvas(Ne.target);const Be={value(Ve){Te.userValue=Ve.detail.value??"",W.setValue(j,{value:Te.userValue.toString()}),Ve.target.value=Te.userValue},formattedValue(Ve){const{formattedValue:Ke}=Ve.detail;Te.formattedValue=Ke,Ke!=null&&Ve.target!==document.activeElement&&(Ve.target.value=Ke),W.setValue(j,{formattedValue:Ke})},selRange(Ve){Ve.target.setSelectionRange(...Ve.detail.selRange)},charLimit:Ve=>{var Ze;const{charLimit:Ke}=Ve.detail,{target:Je}=Ve;if(Ke===0){Je.removeAttribute("maxLength");return}Je.setAttribute("maxLength",Ke);let tt=Te.userValue;!tt||tt.length<=Ke||(tt=tt.slice(0,Ke),Je.value=Te.userValue=tt,W.setValue(j,{value:tt}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:tt,willCommit:!0,commitKey:1,selStart:Je.selectionStart,selEnd:Je.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,Ne)}),K.addEventListener("keydown",Ne=>{var Ke;Te.commitKey=1;let Be=-1;if(Ne.key==="Escape"?Be=0:Ne.key==="Enter"&&!this.data.multiLine?Be=2:Ne.key==="Tab"&&(Te.commitKey=3),Be===-1)return;const{value:Ve}=Ne.target;Te.lastCommittedValue!==Ve&&(Te.lastCommittedValue=Ve,Te.userValue=Ve,(Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Ve,willCommit:!0,commitKey:Be,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}}))});const Le=We;We=null,K.addEventListener("blur",Ne=>{var Ve;if(!Te.focused||!Ne.relatedTarget)return;Te.focused=!1;const{value:Be}=Ne.target;Te.userValue=Be,Te.lastCommittedValue!==Be&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Be,willCommit:!0,commitKey:Te.commitKey,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}})),Le(Ne)}),(pe=this.data.actions)!=null&&pe.Keystroke&&K.addEventListener("beforeinput",Ne=>{var et;Te.lastCommittedValue=null;const{data:Be,target:Ve}=Ne,{value:Ke,selectionStart:Je,selectionEnd:tt}=Ve;let Ze=Je,Ye=tt;switch(Ne.inputType){case"deleteWordBackward":{const rt=Ke.substring(0,Je).match(/\w*[^\w]*$/);rt&&(Ze-=rt[0].length);break}case"deleteWordForward":{const rt=Ke.substring(Je).match(/^[^\w]*\w*/);rt&&(Ye+=rt[0].length);break}case"deleteContentBackward":Je===tt&&(Ze-=1);break;case"deleteContentForward":Je===tt&&(Ye+=1);break}Ne.preventDefault(),(et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Ke,change:Be||"",willCommit:!1,selStart:Ze,selEnd:Ye}})}),this._setEventListeners(K,Te,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ne=>Ne.target.value)}if(We&&K.addEventListener("blur",We),this.data.comb){const Ne=(this.data.rect[2]-this.data.rect[0])/Fe;K.classList.add("comb"),K.style.letterSpacing=`calc(${Ne}px * var(--scale-factor) - 1ch)`}}else K=document.createElement("div"),K.textContent=this.data.fieldValue,K.style.verticalAlign="middle",K.style.display="table-cell";return this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class F extends g{constructor(W){super(W,{isRenderable:!!W.data.hasOwnCanvas})}}class S extends g{constructor(W){super(W,{isRenderable:W.renderForms})}render(){const W=this.annotationStorage,j=this.data,K=j.id;let he=W.getValue(K,{value:j.exportValue===j.fieldValue}).value;typeof he=="string"&&(he=he!=="Off",W.setValue(K,{value:he})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pe=document.createElement("input");return w.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=j.readOnly,this._setRequired(pe,this.data.required),pe.type="checkbox",pe.name=j.fieldName,he&&pe.setAttribute("checked",!0),pe.setAttribute("exportValue",j.exportValue),pe.tabIndex=v,pe.addEventListener("change",xe=>{const{name:Se,checked:Fe}=xe.target;for(const De of this._getElementsByName(Se,K)){const Te=Fe&&De.exportValue===j.exportValue;De.domElement&&(De.domElement.checked=Te),W.setValue(De.id,{value:Te})}W.setValue(K,{value:Fe})}),pe.addEventListener("resetform",xe=>{const Se=j.defaultFieldValue||"Off";xe.target.checked=Se===j.exportValue}),this.enableScripting&&this.hasJSActions&&(pe.addEventListener("updatefromsandbox",xe=>{const Se={value(Fe){Fe.target.checked=Fe.detail.value!=="Off",W.setValue(K,{value:Fe.target.checked})}};this._dispatchEventFromSandbox(Se,xe)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xe=>xe.target.checked)),this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class o extends g{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const W=this.annotationStorage,j=this.data,K=j.id;let he=W.getValue(K,{value:j.fieldValue===j.buttonValue}).value;typeof he=="string"&&(he=he!==j.buttonValue,W.setValue(K,{value:he}));const pe=document.createElement("input");if(w.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=j.readOnly,this._setRequired(pe,this.data.required),pe.type="radio",pe.name=j.fieldName,he&&pe.setAttribute("checked",!0),pe.tabIndex=v,pe.addEventListener("change",xe=>{const{name:Se,checked:Fe}=xe.target;for(const De of this._getElementsByName(Se,K))W.setValue(De.id,{value:!1});W.setValue(K,{value:Fe})}),pe.addEventListener("resetform",xe=>{const Se=j.defaultFieldValue;xe.target.checked=Se!=null&&Se===j.buttonValue}),this.enableScripting&&this.hasJSActions){const xe=j.buttonValue;pe.addEventListener("updatefromsandbox",Se=>{const Fe={value:De=>{const Te=xe===De.detail.value;for(const We of this._getElementsByName(De.target.name)){const Le=Te&&We.id===K;We.domElement&&(We.domElement.checked=Le),W.setValue(We.id,{value:Le})}}};this._dispatchEventFromSandbox(Fe,Se)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)}return this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class p extends P{constructor(W){super(W,{ignoreBorder:W.data.hasAppearance})}render(){const W=super.render();W.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(W.title=this.data.alternativeText);const j=W.lastChild;return this.enableScripting&&this.hasJSActions&&j&&(this._setDefaultPropertiesFromJS(j),j.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({},K)})),W}}class l extends g{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const W=this.annotationStorage,j=this.data.id,K=W.getValue(j,{value:this.data.fieldValue}),he=document.createElement("select");w.add(he),he.setAttribute("data-element-id",j),he.disabled=this.data.readOnly,this._setRequired(he,this.data.required),he.name=this.data.fieldName,he.tabIndex=v;let pe=this.data.combo&&this.data.options.length>0;this.data.combo||(he.size=this.data.options.length,this.data.multiSelect&&(he.multiple=!0)),he.addEventListener("resetform",Te=>{const We=this.data.defaultFieldValue;for(const Le of he.options)Le.selected=Le.value===We});for(const Te of this.data.options){const We=document.createElement("option");We.textContent=Te.displayValue,We.value=Te.exportValue,K.value.includes(Te.exportValue)&&(We.setAttribute("selected",!0),pe=!1),he.append(We)}let xe=null;if(pe){const Te=document.createElement("option");Te.value=" ",Te.setAttribute("hidden",!0),Te.setAttribute("selected",!0),he.prepend(Te),xe=()=>{Te.remove(),he.removeEventListener("input",xe),xe=null},he.addEventListener("input",xe)}const Se=Te=>{const We=Te?"value":"textContent",{options:Le,multiple:Ne}=he;return Ne?Array.prototype.filter.call(Le,Be=>Be.selected).map(Be=>Be[We]):Le.selectedIndex===-1?null:Le[Le.selectedIndex][We]};let Fe=Se(!1);const De=Te=>{const We=Te.target.options;return Array.prototype.map.call(We,Le=>({displayValue:Le.textContent,exportValue:Le.value}))};return this.enableScripting&&this.hasJSActions?(he.addEventListener("updatefromsandbox",Te=>{const We={value(Le){xe==null||xe();const Ne=Le.detail.value,Be=new Set(Array.isArray(Ne)?Ne:[Ne]);for(const Ve of he.options)Ve.selected=Be.has(Ve.value);W.setValue(j,{value:Se(!0)}),Fe=Se(!1)},multipleSelection(Le){he.multiple=!0},remove(Le){const Ne=he.options,Be=Le.detail.remove;Ne[Be].selected=!1,he.remove(Be),Ne.length>0&&Array.prototype.findIndex.call(Ne,Ke=>Ke.selected)===-1&&(Ne[0].selected=!0),W.setValue(j,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},clear(Le){for(;he.length!==0;)he.remove(0);W.setValue(j,{value:null,items:[]}),Fe=Se(!1)},insert(Le){const{index:Ne,displayValue:Be,exportValue:Ve}=Le.detail.insert,Ke=he.children[Ne],Je=document.createElement("option");Je.textContent=Be,Je.value=Ve,Ke?Ke.before(Je):he.append(Je),W.setValue(j,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},items(Le){const{items:Ne}=Le.detail;for(;he.length!==0;)he.remove(0);for(const Be of Ne){const{displayValue:Ve,exportValue:Ke}=Be,Je=document.createElement("option");Je.textContent=Ve,Je.value=Ke,he.append(Je)}he.options.length>0&&(he.options[0].selected=!0),W.setValue(j,{value:Se(!0),items:De(Le)}),Fe=Se(!1)},indices(Le){const Ne=new Set(Le.detail.indices);for(const Be of Le.target.options)Be.selected=Ne.has(Be.index);W.setValue(j,{value:Se(!0)}),Fe=Se(!1)},editable(Le){Le.target.disabled=!Le.detail.editable}};this._dispatchEventFromSandbox(We,Te)}),he.addEventListener("input",Te=>{var Le;const We=Se(!0);W.setValue(j,{value:We}),Te.preventDefault(),(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Fe,changeEx:We,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(he,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Te=>Te.target.value)):he.addEventListener("input",function(Te){W.setValue(j,{value:Se(!0)})}),this.data.combo&&this._setTextStyle(he),this._setBackgroundColor(he),this._setDefaultPropertiesFromJS(he),this.container.append(he),this.container}}class m extends x{constructor(W){const{data:j,elements:K}=W;super(W,{isRenderable:x._hasPopupData(j)}),this.elements=K}render(){this.container.classList.add("popupAnnotation");const W=new f({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),j=[];for(const K of this.elements)K.popup=W,j.push(K.data.id),K.addHighlightArea();return this.container.setAttribute("aria-controls",j.map(K=>`${n.AnnotationPrefix}${K}`).join(",")),this.container}}class f{constructor({container:W,color:j,elements:K,titleObj:he,modificationDate:pe,contentsObj:xe,richText:Se,parent:Fe,rect:De,parentRect:Te,open:We}){ce(this,Ce);ce(this,ie,null);ce(this,le,ne(this,Ce,Dn).bind(this));ce(this,fe,ne(this,Ce,rn).bind(this));ce(this,be,ne(this,Ce,sn).bind(this));ce(this,me,ne(this,Ce,wt).bind(this));ce(this,ve,null);ce(this,Z,null);ce(this,ee,null);ce(this,M,null);ce(this,H,null);ce(this,J,null);ce(this,oe,!1);ce(this,ge,null);ce(this,Ae,null);ce(this,_e,null);ce(this,te,null);ce(this,Pe,!1);var Ne;ue(this,Z,W),ue(this,te,he),ue(this,ee,xe),ue(this,_e,Se),ue(this,H,Fe),ue(this,ve,j),ue(this,Ae,De),ue(this,J,Te),ue(this,M,K);const Le=r.PDFDateString.toDateObject(pe);Le&&ue(this,ie,Fe.l10n.get("annotation_date_string",{date:Le.toLocaleDateString(),time:Le.toLocaleTimeString()})),this.trigger=K.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",i(this,me)),Be.addEventListener("mouseenter",i(this,be)),Be.addEventListener("mouseleave",i(this,fe)),Be.classList.add("popupTriggerArea");for(const Be of K)(Ne=Be.container)==null||Ne.addEventListener("keydown",i(this,le));i(this,Z).hidden=!0,We&&ne(this,Ce,wt).call(this)}render(){if(i(this,ge))return;const{page:{view:W},viewport:{rawDims:{pageWidth:j,pageHeight:K,pageX:he,pageY:pe}}}=i(this,H),xe=ue(this,ge,document.createElement("div"));if(xe.className="popup",i(this,ve)){const Ze=xe.style.outlineColor=n.Util.makeHexColor(...i(this,ve));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?xe.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:xe.style.backgroundColor=n.Util.makeHexColor(...i(this,ve).map(et=>Math.floor(.7*(255-et)+et)))}const Se=document.createElement("span");Se.className="header";const Fe=document.createElement("h1");if(Se.append(Fe),{dir:Fe.dir,str:Fe.textContent}=i(this,te),xe.append(Se),i(this,ie)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),i(this,ie).then(Ye=>{Ze.textContent=Ye}),Se.append(Ze)}const De=i(this,ee),Te=i(this,_e);if(Te!=null&&Te.str&&(!(De!=null&&De.str)||De.str===Te.str))h.XfaLayer.render({xfaHtml:Te.html,intent:"richText",div:xe}),xe.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(De);xe.append(Ze)}let We=!!i(this,J),Le=We?i(this,J):i(this,Ae);for(const Ze of i(this,M))if(!Le||n.Util.intersect(Ze.data.rect,Le)!==null){Le=Ze.data.rect,We=!0;break}const Ne=n.Util.normalizeRect([Le[0],W[3]-Le[1]+W[1],Le[2],W[3]-Le[3]+W[1]]),Ve=We?Le[2]-Le[0]+5:0,Ke=Ne[0]+Ve,Je=Ne[1],{style:tt}=i(this,Z);tt.left=`${100*(Ke-he)/j}%`,tt.top=`${100*(Je-pe)/K}%`,i(this,Z).append(xe)}_formatContents({str:W,dir:j}){const K=document.createElement("p");K.classList.add("popupContent"),K.dir=j;const he=W.split(/(?:\r\n?|\n)/);for(let pe=0,xe=he.length;pe<xe;++pe){const Se=he[pe];K.append(document.createTextNode(Se)),pe<xe-1&&K.append(document.createElement("br"))}return K}forceHide(){ue(this,Pe,this.isVisible),i(this,Pe)&&(i(this,Z).hidden=!0)}maybeShow(){i(this,Pe)&&(ue(this,Pe,!1),i(this,Z).hidden=!1)}get isVisible(){return i(this,Z).hidden===!1}}ie=new WeakMap,le=new WeakMap,fe=new WeakMap,be=new WeakMap,me=new WeakMap,ve=new WeakMap,Z=new WeakMap,ee=new WeakMap,M=new WeakMap,H=new WeakMap,J=new WeakMap,oe=new WeakMap,ge=new WeakMap,Ae=new WeakMap,_e=new WeakMap,te=new WeakMap,Pe=new WeakMap,Ce=new WeakSet,Dn=function(W){W.altKey||W.shiftKey||W.ctrlKey||W.metaKey||(W.key==="Enter"||W.key==="Escape"&&i(this,oe))&&ne(this,Ce,wt).call(this)},wt=function(){ue(this,oe,!i(this,oe)),i(this,oe)?(ne(this,Ce,sn).call(this),i(this,Z).addEventListener("click",i(this,me)),i(this,Z).addEventListener("keydown",i(this,le))):(ne(this,Ce,rn).call(this),i(this,Z).removeEventListener("click",i(this,me)),i(this,Z).removeEventListener("keydown",i(this,le)))},sn=function(){i(this,ge)||this.render(),this.isVisible?i(this,oe)&&i(this,Z).classList.add("focused"):(i(this,Z).hidden=!1,i(this,Z).style.zIndex=parseInt(i(this,Z).style.zIndex)+1e3)},rn=function(){i(this,Z).classList.remove("focused"),!(i(this,oe)||!this.isVisible)&&(i(this,Z).hidden=!0,i(this,Z).style.zIndex=parseInt(i(this,Z).style.zIndex)-1e3)};class I extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0}),this.textContent=W.data.textContent,this.textPosition=W.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const W=document.createElement("div");W.classList.add("annotationTextContent"),W.setAttribute("role","comment");for(const j of this.textContent){const K=document.createElement("span");K.textContent=j,W.append(K)}this.container.append(W)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=I;class c extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});ce(this,Oe,null)}render(){this.container.classList.add("lineAnnotation");const j=this.data,{width:K,height:he}=k(j.rect),pe=this.svgFactory.create(K,he,!0),xe=ue(this,Oe,this.svgFactory.createElement("svg:line"));return xe.setAttribute("x1",j.rect[2]-j.lineCoordinates[0]),xe.setAttribute("y1",j.rect[3]-j.lineCoordinates[1]),xe.setAttribute("x2",j.rect[2]-j.lineCoordinates[2]),xe.setAttribute("y2",j.rect[3]-j.lineCoordinates[3]),xe.setAttribute("stroke-width",j.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),pe.append(xe),this.container.append(pe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Oe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oe=new WeakMap;class R extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});ce(this,ze,null)}render(){this.container.classList.add("squareAnnotation");const j=this.data,{width:K,height:he}=k(j.rect),pe=this.svgFactory.create(K,he,!0),xe=j.borderStyle.width,Se=ue(this,ze,this.svgFactory.createElement("svg:rect"));return Se.setAttribute("x",xe/2),Se.setAttribute("y",xe/2),Se.setAttribute("width",K-xe),Se.setAttribute("height",he-xe),Se.setAttribute("stroke-width",xe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,ze)}addHighlightArea(){this.container.classList.add("highlightArea")}}ze=new WeakMap;class L extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});ce(this,Xe,null)}render(){this.container.classList.add("circleAnnotation");const j=this.data,{width:K,height:he}=k(j.rect),pe=this.svgFactory.create(K,he,!0),xe=j.borderStyle.width,Se=ue(this,Xe,this.svgFactory.createElement("svg:ellipse"));return Se.setAttribute("cx",K/2),Se.setAttribute("cy",he/2),Se.setAttribute("rx",K/2-xe/2),Se.setAttribute("ry",he/2-xe/2),Se.setAttribute("stroke-width",xe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class Q extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});ce(this,Ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const j=this.data,{width:K,height:he}=k(j.rect),pe=this.svgFactory.create(K,he,!0);let xe=[];for(const Fe of j.vertices){const De=Fe.x-j.rect[0],Te=j.rect[3]-Fe.y;xe.push(De+","+Te)}xe=xe.join(" ");const Se=ue(this,Ee,this.svgFactory.createElement(this.svgElementName));return Se.setAttribute("points",xe),Se.setAttribute("stroke-width",j.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),pe.append(Se),this.container.append(pe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class G extends Q{constructor(W){super(W),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class V extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});ce(this,ae,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const j=this.data,{width:K,height:he}=k(j.rect),pe=this.svgFactory.create(K,he,!0);for(const xe of j.inkLists){let Se=[];for(const De of xe){const Te=De.x-j.rect[0],We=j.rect[3]-De.y;Se.push(`${Te},${We}`)}Se=Se.join(" ");const Fe=this.svgFactory.createElement(this.svgElementName);i(this,ae).push(Fe),Fe.setAttribute("points",Se),Fe.setAttribute("stroke-width",j.borderStyle.width||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),!j.popupRef&&this.hasPopupData&&this._createPopup(),pe.append(Fe)}return this.container.append(pe),this.container}getElementsToTriggerPopup(){return i(this,ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}ae=new WeakMap,e.InkAnnotationElement=V;class se extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class D extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class X extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class re extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N extends x{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=N;class d extends x{constructor(j){var pe;super(j,{isRenderable:!0});ce(this,Me);ce(this,de,null);const{filename:K,content:he}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(K,!0),this.content=he,(pe=this.linkService.eventBus)==null||pe.dispatch("fileattachmentannotation",{source:this,filename:K,content:he})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:j,data:K}=this;let he;K.hasAppearance||K.fillAlpha===0?he=document.createElement("div"):(he=document.createElement("img"),he.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(K.name)?"paperclip":"pushpin"}.svg`,K.fillAlpha&&K.fillAlpha<1&&(he.style=`filter: opacity(${Math.round(K.fillAlpha*100)}%);`)),he.addEventListener("dblclick",ne(this,Me,on).bind(this)),ue(this,de,he);const{isMac:pe}=n.FeatureTest.platform;return j.addEventListener("keydown",xe=>{xe.key==="Enter"&&(pe?xe.metaKey:xe.ctrlKey)&&ne(this,Me,on).call(this)}),!K.popupRef&&this.hasPopupData?this._createPopup():he.classList.add("popupTriggerArea"),j.append(he),j}getElementsToTriggerPopup(){return i(this,de)}addHighlightArea(){this.container.classList.add("highlightArea")}}de=new WeakMap,Me=new WeakSet,on=function(){var j;(j=this.downloadManager)==null||j.openOrDownloadData(this.container,this.content,this.filename)};class u{constructor({div:W,accessibilityManager:j,annotationCanvasMap:K,l10n:he,page:pe,viewport:xe}){ce(this,we);ce(this,Ge,null);ce(this,z,null);ce(this,ye,new Map);this.div=W,ue(this,Ge,j),ue(this,z,K),this.l10n=he,this.page=pe,this.viewport=xe,this.zIndex=0,this.l10n||(this.l10n=O.NullL10n)}async render(W){const{annotations:j}=W,K=this.div;(0,r.setLayerDimensions)(K,this.viewport);const he=new Map,pe={data:null,layer:K,linkService:W.linkService,downloadManager:W.downloadManager,imageResourcesPath:W.imageResourcesPath||"",renderForms:W.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:W.annotationStorage||new y.AnnotationStorage,enableScripting:W.enableScripting===!0,hasJSActions:W.hasJSActions,fieldObjects:W.fieldObjects,parent:this,elements:null};for(const xe of j){if(xe.noHTML)continue;const Se=xe.annotationType===n.AnnotationType.POPUP;if(Se){const Te=he.get(xe.id);if(!Te)continue;pe.elements=Te}else{const{width:Te,height:We}=k(xe.rect);if(Te<=0||We<=0)continue}pe.data=xe;const Fe=b.create(pe);if(!Fe.isRenderable)continue;if(!Se&&xe.popupRef){const Te=he.get(xe.popupRef);Te?Te.push(Fe):he.set(xe.popupRef,[Fe])}Fe.annotationEditorType>0&&i(this,ye).set(Fe.data.id,Fe);const De=Fe.render();xe.hidden&&(De.style.visibility="hidden"),ne(this,we,Ln).call(this,De,xe.id)}ne(this,we,an).call(this),await this.l10n.translate(K)}update({viewport:W}){const j=this.div;this.viewport=W,(0,r.setLayerDimensions)(j,{rotation:W.rotation}),ne(this,we,an).call(this),j.hidden=!1}getEditableAnnotations(){return Array.from(i(this,ye).values())}getEditableAnnotation(W){return i(this,ye).get(W)}}Ge=new WeakMap,z=new WeakMap,ye=new WeakMap,we=new WeakSet,Ln=function(W,j){var he;const K=W.firstChild||W;K.id=`${n.AnnotationPrefix}${j}`,this.div.append(W),(he=i(this,Ge))==null||he.moveElementInDOM(this.div,W,K,!1)},an=function(){if(!i(this,z))return;const W=this.div;for(const[j,K]of i(this,z)){const he=W.querySelector(`[data-annotation-id="${j}"]`);if(!he)continue;const{firstChild:pe}=he;pe?pe.nodeName==="CANVAS"?pe.replaceWith(K):pe.before(K):he.append(K)}i(this,z).clear()},e.AnnotationLayer=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(y){return Math.floor(Math.max(0,Math.min(1,y))*255).toString(16).padStart(2,"0")}function n(y){return Math.max(0,Math.min(255,255*y))}class r{static CMYK_G([C,O,h,v]){return["G",1-Math.min(1,.3*C+.59*h+.11*O+v)]}static G_CMYK([C]){return["CMYK",0,0,0,1-C]}static G_RGB([C]){return["RGB",C,C,C]}static G_rgb([C]){return C=n(C),[C,C,C]}static G_HTML([C]){const O=s(C);return`#${O}${O}${O}`}static RGB_G([C,O,h]){return["G",.3*C+.59*O+.11*h]}static RGB_rgb(C){return C.map(n)}static RGB_HTML(C){return`#${C.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([C,O,h,v]){return["RGB",1-Math.min(1,C+v),1-Math.min(1,h+v),1-Math.min(1,O+v)]}static CMYK_rgb([C,O,h,v]){return[n(1-Math.min(1,C+v)),n(1-Math.min(1,h+v)),n(1-Math.min(1,O+v))]}static CMYK_HTML(C){const O=this.CMYK_RGB(C).slice(1);return this.RGB_HTML(O)}static RGB_CMYK([C,O,h]){const v=1-C,a=1-O,w=1-h,k=Math.min(v,a,w);return["CMYK",v,a,w,k]}}e.ColorConverters=r},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(C,O){switch(C){case"find_match_count":C=`find_match_count[${O.total===1?"one":"other"}]`;break;case"find_match_count_limit":C=`find_match_count_limit[${O.limit===1?"one":"other"}]`;break}return s[C]||""}function r(C,O){return O?C.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,v)=>v in O?O[v]:"{{"+v+"}}"):C}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(C,O=null,h=n(C,O)){return r(h,O)},async translate(C){}};e.NullL10n=y},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class r{static setupStorage(C,O,h,v,a){const w=v.getValue(O,{value:null});switch(h.name){case"textarea":if(w.value!==null&&(C.textContent=w.value),a==="print")break;C.addEventListener("input",k=>{v.setValue(O,{value:k.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(w.value===h.attributes.xfaOn?C.setAttribute("checked",!0):w.value===h.attributes.xfaOff&&C.removeAttribute("checked"),a==="print")break;C.addEventListener("change",k=>{v.setValue(O,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&C.setAttribute("value",w.value),a==="print")break;C.addEventListener("input",k=>{v.setValue(O,{value:k.target.value})})}break;case"select":if(w.value!==null){C.setAttribute("value",w.value);for(const k of h.children)k.attributes.value===w.value?k.attributes.selected=!0:k.attributes.hasOwnProperty("selected")&&delete k.attributes.selected}C.addEventListener("input",k=>{const b=k.target.options,x=b.selectedIndex===-1?"":b[b.selectedIndex].value;v.setValue(O,{value:x})});break}}static setAttributes({html:C,element:O,storage:h=null,intent:v,linkService:a}){const{attributes:w}=O,k=C instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${v}`);for(const[b,x]of Object.entries(w))if(x!=null)switch(b){case"class":x.length&&C.setAttribute(b,x.join(" "));break;case"dataId":break;case"id":C.setAttribute("data-element-id",x);break;case"style":Object.assign(C.style,x);break;case"textContent":C.textContent=x;break;default:(!k||b!=="href"&&b!=="newWindow")&&C.setAttribute(b,x)}k&&a.addLinkAttributes(C,w.href,w.newWindow),h&&w.dataId&&this.setupStorage(C,w.dataId,O,h)}static render(C){var P;const O=C.annotationStorage,h=C.linkService,v=C.xfaHtml,a=C.intent||"display",w=document.createElement(v.name);v.attributes&&this.setAttributes({html:w,element:v,intent:a,linkService:h});const k=[[v,-1,w]],b=C.div;if(b.append(w),C.viewport){const A=`matrix(${C.viewport.transform.join(",")})`;b.style.transform=A}a!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const x=[];for(;k.length>0;){const[A,g,E]=k.at(-1);if(g+1===A.children.length){k.pop();continue}const F=A.children[++k.at(-1)[1]];if(F===null)continue;const{name:S}=F;if(S==="#text"){const p=document.createTextNode(F.value);x.push(p),E.append(p);continue}const o=(P=F==null?void 0:F.attributes)!=null&&P.xmlns?document.createElementNS(F.attributes.xmlns,S):document.createElement(S);if(E.append(o),F.attributes&&this.setAttributes({html:o,element:F,storage:O,intent:a,linkService:h}),F.children&&F.children.length>0)k.push([F,-1,o]);else if(F.value){const p=document.createTextNode(F.value);n.XfaText.shouldBuildText(S)&&x.push(p),o.append(p)}}for(const A of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:x}}static update(C){const O=`matrix(${C.viewport.transform.join(",")})`;C.div.style.transform=O,C.div.hidden=!1}}e.XfaLayer=r},(t,e,s)=>{var v,a,w,k,b,x,P,A,g,E,F,S,o,p,l,In,Nn,jn,$n,ln,Bn,cn,Un,Wn,Hn,zn,Vn,st,dn,Tt,Rt,ct,un,kt,U,Gn,hn,qn,Xn,pn,Mt,dt;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),r=s(4),y=s(29),C=s(6),O=s(5);const ve=class ve extends r.AnnotationEditor{constructor(M){super({...M,name:"inkEditor"});ce(this,l);ce(this,v,0);ce(this,a,0);ce(this,w,this.canvasPointermove.bind(this));ce(this,k,this.canvasPointerleave.bind(this));ce(this,b,this.canvasPointerup.bind(this));ce(this,x,this.canvasPointerdown.bind(this));ce(this,P,new Path2D);ce(this,A,!1);ce(this,g,!1);ce(this,E,!1);ce(this,F,null);ce(this,S,0);ce(this,o,0);ce(this,p,null);this.color=M.color||null,this.thickness=M.thickness||null,this.opacity=M.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(M){r.AnnotationEditor.initialize(M,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(M,H){switch(M){case n.AnnotationEditorParamsType.INK_THICKNESS:ve._defaultThickness=H;break;case n.AnnotationEditorParamsType.INK_COLOR:ve._defaultColor=H;break;case n.AnnotationEditorParamsType.INK_OPACITY:ve._defaultOpacity=H/100;break}}updateParams(M,H){switch(M){case n.AnnotationEditorParamsType.INK_THICKNESS:ne(this,l,In).call(this,H);break;case n.AnnotationEditorParamsType.INK_COLOR:ne(this,l,Nn).call(this,H);break;case n.AnnotationEditorParamsType.INK_OPACITY:ne(this,l,jn).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ve._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ve._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ve._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ve._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ve._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ve._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ne(this,l,Tt).call(this),ne(this,l,Rt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ne(this,l,ct).call(this)),ne(this,l,dt).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,i(this,F).disconnect(),ue(this,F,null),super.remove())}setParent(M){!this.parent&&M?this._uiManager.removeShouldRescale(this):this.parent&&M===null&&this._uiManager.addShouldRescale(this),super.setParent(M)}onScaleChanging(){const[M,H]=this.parentDimensions,J=this.width*M,oe=this.height*H;this.setDimensions(J,oe)}enableEditMode(){i(this,A)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",i(this,x)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",i(this,x)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){i(this,A)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ue(this,A,!0),this.div.classList.add("disabled"),ne(this,l,dt).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(M){this._focusEventsAllowed&&(super.focusin(M),this.enableEditMode())}canvasPointerdown(M){M.button!==0||!this.isInEditMode()||i(this,A)||(this.setInForeground(),M.preventDefault(),M.type!=="mouse"&&this.div.focus(),ne(this,l,Bn).call(this,M.offsetX,M.offsetY))}canvasPointermove(M){M.preventDefault(),ne(this,l,cn).call(this,M.offsetX,M.offsetY)}canvasPointerup(M){M.preventDefault(),ne(this,l,dn).call(this,M)}canvasPointerleave(M){ne(this,l,dn).call(this,M)}get isResizable(){return!this.isEmpty()&&i(this,A)}render(){if(this.div)return this.div;let M,H;this.width&&(M=this.x,H=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(_e=>{var te;return(te=this.div)==null?void 0:te.setAttribute("aria-label",_e)});const[J,oe,ge,Ae]=ne(this,l,$n).call(this);if(this.setAt(J,oe,0,0),this.setDims(ge,Ae),ne(this,l,Tt).call(this),this.width){const[_e,te]=this.parentDimensions;this.setAspectRatio(this.width*_e,this.height*te),this.setAt(M*_e,H*te,this.width*_e,this.height*te),ue(this,E,!0),ne(this,l,ct).call(this),this.setDims(this.width*_e,this.height*te),ne(this,l,st).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ne(this,l,Rt).call(this),this.div}setDimensions(M,H){const J=Math.round(M),oe=Math.round(H);if(i(this,S)===J&&i(this,o)===oe)return;ue(this,S,J),ue(this,o,oe),this.canvas.style.visibility="hidden";const[ge,Ae]=this.parentDimensions;this.width=M/ge,this.height=H/Ae,this.fixAndSetPosition(),i(this,A)&&ne(this,l,un).call(this,M,H),ne(this,l,ct).call(this),ne(this,l,st).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(M,H,J){var Oe,ze,Xe;if(M instanceof y.InkAnnotationElement)return null;const oe=super.deserialize(M,H,J);oe.thickness=M.thickness,oe.color=n.Util.makeHexColor(...M.color),oe.opacity=M.opacity;const[ge,Ae]=oe.pageDimensions,_e=oe.width*ge,te=oe.height*Ae,Pe=oe.parentScale,Ce=M.thickness/2;ue(oe,A,!0),ue(oe,S,Math.round(_e)),ue(oe,o,Math.round(te));const{paths:Ue,rect:$e,rotation:He}=M;for(let{bezier:Ee}of Ue){Ee=ne(Oe=ve,U,qn).call(Oe,Ee,$e,He);const ae=[];oe.paths.push(ae);let de=Pe*(Ee[0]-Ce),Me=Pe*(Ee[1]-Ce);for(let Ge=2,z=Ee.length;Ge<z;Ge+=6){const ye=Pe*(Ee[Ge]-Ce),we=Pe*(Ee[Ge+1]-Ce),Ie=Pe*(Ee[Ge+2]-Ce),je=Pe*(Ee[Ge+3]-Ce),Re=Pe*(Ee[Ge+4]-Ce),W=Pe*(Ee[Ge+5]-Ce);ae.push([[de,Me],[ye,we],[Ie,je],[Re,W]]),de=Re,Me=W}const qe=ne(this,U,Gn).call(this,ae);oe.bezierPath2D.push(qe)}const ke=ne(ze=oe,l,pn).call(ze);return ue(oe,a,Math.max(r.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),ue(oe,v,Math.max(r.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),ne(Xe=oe,l,un).call(Xe,_e,te),oe}serialize(){if(this.isEmpty())return null;const M=this.getRect(0,0),H=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:H,thickness:this.thickness,opacity:this.opacity,paths:ne(this,l,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,M),pageIndex:this.pageIndex,rect:M,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};v=new WeakMap,a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakMap,E=new WeakMap,F=new WeakMap,S=new WeakMap,o=new WeakMap,p=new WeakMap,l=new WeakSet,In=function(M){const H=this.thickness;this.addCommands({cmd:()=>{this.thickness=M,ne(this,l,dt).call(this)},undo:()=>{this.thickness=H,ne(this,l,dt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(M){const H=this.color;this.addCommands({cmd:()=>{this.color=M,ne(this,l,st).call(this)},undo:()=>{this.color=H,ne(this,l,st).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jn=function(M){M/=100;const H=this.opacity;this.addCommands({cmd:()=>{this.opacity=M,ne(this,l,st).call(this)},undo:()=>{this.opacity=H,ne(this,l,st).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$n=function(){const{parentRotation:M,parentDimensions:[H,J]}=this;switch(M){case 90:return[0,J,J,H];case 180:return[H,J,H,J];case 270:return[H,0,J,H];default:return[0,0,H,J]}},ln=function(){const{ctx:M,color:H,opacity:J,thickness:oe,parentScale:ge,scaleFactor:Ae}=this;M.lineWidth=oe*ge/Ae,M.lineCap="round",M.lineJoin="round",M.miterLimit=10,M.strokeStyle=`${H}${(0,O.opacityToHex)(J)}`},Bn=function(M,H){this.canvas.addEventListener("contextmenu",C.noContextMenu),this.canvas.addEventListener("pointerleave",i(this,k)),this.canvas.addEventListener("pointermove",i(this,w)),this.canvas.addEventListener("pointerup",i(this,b)),this.canvas.removeEventListener("pointerdown",i(this,x)),this.isEditing=!0,i(this,E)||(ue(this,E,!0),ne(this,l,ct).call(this),this.thickness||(this.thickness=ve._defaultThickness),this.color||(this.color=ve._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ve._defaultOpacity)),this.currentPath.push([M,H]),ue(this,g,!1),ne(this,l,ln).call(this),ue(this,p,()=>{ne(this,l,Hn).call(this),i(this,p)&&window.requestAnimationFrame(i(this,p))}),window.requestAnimationFrame(i(this,p))},cn=function(M,H){const[J,oe]=this.currentPath.at(-1);if(this.currentPath.length>1&&M===J&&H===oe)return;const ge=this.currentPath;let Ae=i(this,P);if(ge.push([M,H]),ue(this,g,!0),ge.length<=2){Ae.moveTo(...ge[0]),Ae.lineTo(M,H);return}ge.length===3&&(ue(this,P,Ae=new Path2D),Ae.moveTo(...ge[0])),ne(this,l,zn).call(this,Ae,...ge.at(-3),...ge.at(-2),M,H)},Un=function(){if(this.currentPath.length===0)return;const M=this.currentPath.at(-1);i(this,P).lineTo(...M)},Wn=function(M,H){ue(this,p,null),M=Math.min(Math.max(M,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height),ne(this,l,cn).call(this,M,H),ne(this,l,Un).call(this);let J;if(this.currentPath.length!==1)J=ne(this,l,Vn).call(this);else{const te=[M,H];J=[[te,te.slice(),te.slice(),te]]}const oe=i(this,P),ge=this.currentPath;this.currentPath=[],ue(this,P,new Path2D);const Ae=()=>{this.allRawPaths.push(ge),this.paths.push(J),this.bezierPath2D.push(oe),this.rebuild()},_e=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ne(this,l,Tt).call(this),ne(this,l,Rt).call(this)),ne(this,l,dt).call(this))};this.addCommands({cmd:Ae,undo:_e,mustExec:!0})},Hn=function(){if(!i(this,g))return;ue(this,g,!1);const M=Math.ceil(this.thickness*this.parentScale),H=this.currentPath.slice(-3),J=H.map(Ae=>Ae[0]),oe=H.map(Ae=>Ae[1]);Math.min(...J)-M,Math.max(...J)+M,Math.min(...oe)-M,Math.max(...oe)+M;const{ctx:ge}=this;ge.save(),ge.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ae of this.bezierPath2D)ge.stroke(Ae);ge.stroke(i(this,P)),ge.restore()},zn=function(M,H,J,oe,ge,Ae,_e){const te=(H+oe)/2,Pe=(J+ge)/2,Ce=(oe+Ae)/2,Ue=(ge+_e)/2;M.bezierCurveTo(te+2*(oe-te)/3,Pe+2*(ge-Pe)/3,Ce+2*(oe-Ce)/3,Ue+2*(ge-Ue)/3,Ce,Ue)},Vn=function(){const M=this.currentPath;if(M.length<=2)return[[M[0],M[0],M.at(-1),M.at(-1)]];const H=[];let J,[oe,ge]=M[0];for(J=1;J<M.length-2;J++){const[$e,He]=M[J],[ke,Oe]=M[J+1],ze=($e+ke)/2,Xe=(He+Oe)/2,Ee=[oe+2*($e-oe)/3,ge+2*(He-ge)/3],ae=[ze+2*($e-ze)/3,Xe+2*(He-Xe)/3];H.push([[oe,ge],Ee,ae,[ze,Xe]]),[oe,ge]=[ze,Xe]}const[Ae,_e]=M[J],[te,Pe]=M[J+1],Ce=[oe+2*(Ae-oe)/3,ge+2*(_e-ge)/3],Ue=[te+2*(Ae-te)/3,Pe+2*(_e-Pe)/3];return H.push([[oe,ge],Ce,Ue,[te,Pe]]),H},st=function(){if(this.isEmpty()){ne(this,l,kt).call(this);return}ne(this,l,ln).call(this);const{canvas:M,ctx:H}=this;H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,M.width,M.height),ne(this,l,kt).call(this);for(const J of this.bezierPath2D)H.stroke(J)},dn=function(M){this.canvas.removeEventListener("pointerleave",i(this,k)),this.canvas.removeEventListener("pointermove",i(this,w)),this.canvas.removeEventListener("pointerup",i(this,b)),this.canvas.addEventListener("pointerdown",i(this,x)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",C.noContextMenu)},10),ne(this,l,Wn).call(this,M.offsetX,M.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Tt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(M=>{var H;return(H=this.canvas)==null?void 0:H.setAttribute("aria-label",M)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Rt=function(){ue(this,F,new ResizeObserver(M=>{const H=M[0].contentRect;H.width&&H.height&&this.setDimensions(H.width,H.height)})),i(this,F).observe(this.div)},ct=function(){if(!i(this,E))return;const[M,H]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*M),this.canvas.height=Math.ceil(this.height*H),ne(this,l,kt).call(this)},un=function(M,H){const J=ne(this,l,Mt).call(this),oe=(M-J)/i(this,a),ge=(H-J)/i(this,v);this.scaleFactor=Math.min(oe,ge)},kt=function(){const M=ne(this,l,Mt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+M,this.translationY*this.scaleFactor+M)},U=new WeakSet,Gn=function(M){const H=new Path2D;for(let J=0,oe=M.length;J<oe;J++){const[ge,Ae,_e,te]=M[J];J===0&&H.moveTo(...ge),H.bezierCurveTo(Ae[0],Ae[1],_e[0],_e[1],te[0],te[1])}return H},hn=function(M,H,J){const[oe,ge,Ae,_e]=H;switch(J){case 0:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]+=oe,M[te+1]=_e-M[te+1];break;case 90:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=M[te+1]+oe,M[te+1]=Ce+ge}break;case 180:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]=Ae-M[te],M[te+1]+=ge;break;case 270:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=Ae-M[te+1],M[te+1]=_e-Ce}break;default:throw new Error("Invalid rotation")}return M},qn=function(M,H,J){const[oe,ge,Ae,_e]=H;switch(J){case 0:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]-=oe,M[te+1]=_e-M[te+1];break;case 90:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=M[te+1]-ge,M[te+1]=Ce-oe}break;case 180:for(let te=0,Pe=M.length;te<Pe;te+=2)M[te]=Ae-M[te],M[te+1]-=ge;break;case 270:for(let te=0,Pe=M.length;te<Pe;te+=2){const Ce=M[te];M[te]=_e-M[te+1],M[te+1]=Ae-Ce}break;default:throw new Error("Invalid rotation")}return M},Xn=function(M,H,J,oe){var Pe,Ce;const ge=[],Ae=this.thickness/2,_e=M*H+Ae,te=M*J+Ae;for(const Ue of this.paths){const $e=[],He=[];for(let ke=0,Oe=Ue.length;ke<Oe;ke++){const[ze,Xe,Ee,ae]=Ue[ke],de=M*ze[0]+_e,Me=M*ze[1]+te,qe=M*Xe[0]+_e,Ge=M*Xe[1]+te,z=M*Ee[0]+_e,ye=M*Ee[1]+te,we=M*ae[0]+_e,Ie=M*ae[1]+te;ke===0&&($e.push(de,Me),He.push(de,Me)),$e.push(qe,Ge,z,ye,we,Ie),He.push(qe,Ge),ke===Oe-1&&He.push(we,Ie)}ge.push({bezier:ne(Pe=ve,U,hn).call(Pe,$e,oe,this.rotation),points:ne(Ce=ve,U,hn).call(Ce,He,oe,this.rotation)})}return ge},pn=function(){let M=1/0,H=-1/0,J=1/0,oe=-1/0;for(const ge of this.paths)for(const[Ae,_e,te,Pe]of ge){const Ce=n.Util.bezierBoundingBox(...Ae,..._e,...te,...Pe);M=Math.min(M,Ce[0]),J=Math.min(J,Ce[1]),H=Math.max(H,Ce[2]),oe=Math.max(oe,Ce[3])}return[M,J,H,oe]},Mt=function(){return i(this,A)?Math.ceil(this.thickness*this.parentScale):0},dt=function(M=!1){if(this.isEmpty())return;if(!i(this,A)){ne(this,l,st).call(this);return}const H=ne(this,l,pn).call(this),J=ne(this,l,Mt).call(this);ue(this,a,Math.max(r.AnnotationEditor.MIN_SIZE,H[2]-H[0])),ue(this,v,Math.max(r.AnnotationEditor.MIN_SIZE,H[3]-H[1]));const oe=Math.ceil(J+i(this,a)*this.scaleFactor),ge=Math.ceil(J+i(this,v)*this.scaleFactor),[Ae,_e]=this.parentDimensions;this.width=oe/Ae,this.height=ge/_e,this.setAspectRatio(oe,ge);const te=this.translationX,Pe=this.translationY;this.translationX=-H[0],this.translationY=-H[1],ne(this,l,ct).call(this),ne(this,l,st).call(this),ue(this,S,oe),ue(this,o,ge),this.setDims(oe,ge);const Ce=M?J/this.scaleFactor/2:0;this.translate(te-this.translationX-Ce,Pe-this.translationY-Ce)},ce(ve,U),Qe(ve,"_defaultColor",null),Qe(ve,"_defaultOpacity",1),Qe(ve,"_defaultThickness",1),Qe(ve,"_type","ink");let h=ve;e.InkEditor=h},(t,e,s)=>{var h,v,a,w,k,b,x,P,A,g,E,vt,yt,Ft,fn,Yn,Kn,gn,Ot,Jn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),r=s(4),y=s(6),C=s(29);const R=class R extends r.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});ce(this,E);ce(this,h,null);ce(this,v,null);ce(this,a,null);ce(this,w,null);ce(this,k,null);ce(this,b,null);ce(this,x,null);ce(this,P,null);ce(this,A,!1);ce(this,g,!1);ue(this,w,G.bitmapUrl),ue(this,k,G.bitmapFile)}static initialize(G){r.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",G.map(q=>`image/${q}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,q){q.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,q;i(this,v)&&(ue(this,h,null),this._uiManager.imageManager.deleteId(i(this,v)),(G=i(this,b))==null||G.remove(),ue(this,b,null),(q=i(this,x))==null||q.disconnect(),ue(this,x,null)),super.remove()}rebuild(){if(!this.parent){i(this,v)&&ne(this,E,Ft).call(this);return}super.rebuild(),this.div!==null&&(i(this,v)&&ne(this,E,Ft).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(i(this,a)||i(this,h)||i(this,w)||i(this,k))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,q;if(this.width&&(G=this.x,q=this.y),super.render(),this.div.hidden=!0,i(this,h)?ne(this,E,fn).call(this):ne(this,E,Ft).call(this),this.width){const[V,se]=this.parentDimensions;this.setAt(G*V,q*se,this.width*V,this.height*se)}return this.div}static deserialize(G,q,V){if(G instanceof C.StampAnnotationElement)return null;const se=super.deserialize(G,q,V),{rect:D,bitmapUrl:X,bitmapId:re,isSvg:N,accessibilityData:d}=G;re&&V.imageManager.isValidId(re)?ue(se,v,re):ue(se,w,X),ue(se,A,N);const[u,T]=se.pageDimensions;return se.width=(D[2]-D[0])/u,se.height=(D[3]-D[1])/T,d&&(se.altTextData=d),se}serialize(G=!1,q=null){if(this.isEmpty())return null;const V={annotationType:n.AnnotationEditorType.STAMP,bitmapId:i(this,v),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:i(this,A),structTreeParentId:this._structTreeParentId};if(G)return V.bitmapUrl=ne(this,E,Ot).call(this,!0),V.accessibilityData=this.altTextData,V;const{decorative:se,altText:D}=this.altTextData;if(!se&&D&&(V.accessibilityData={type:"Figure",alt:D}),q===null)return V;q.stamps||(q.stamps=new Map);const X=i(this,A)?(V.rect[2]-V.rect[0])*(V.rect[3]-V.rect[1]):null;if(!q.stamps.has(i(this,v)))q.stamps.set(i(this,v),{area:X,serialized:V}),V.bitmap=ne(this,E,Ot).call(this,!1);else if(i(this,A)){const re=q.stamps.get(i(this,v));X>re.area&&(re.area=X,re.serialized.bitmap.close(),re.serialized.bitmap=ne(this,E,Ot).call(this,!1))}return V}};h=new WeakMap,v=new WeakMap,a=new WeakMap,w=new WeakMap,k=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,A=new WeakMap,g=new WeakMap,E=new WeakSet,vt=function(G,q=!1){if(!G){this.remove();return}ue(this,h,G.bitmap),q||(ue(this,v,G.id),ue(this,A,G.isSvg)),ne(this,E,fn).call(this)},yt=function(){ue(this,a,null),this._uiManager.enableWaiting(!1),i(this,b)&&this.div.focus()},Ft=function(){if(i(this,v)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(i(this,v)).then(q=>ne(this,E,vt).call(this,q,!0)).finally(()=>ne(this,E,yt).call(this));return}if(i(this,w)){const q=i(this,w);ue(this,w,null),this._uiManager.enableWaiting(!0),ue(this,a,this._uiManager.imageManager.getFromUrl(q).then(V=>ne(this,E,vt).call(this,V)).finally(()=>ne(this,E,yt).call(this)));return}if(i(this,k)){const q=i(this,k);ue(this,k,null),this._uiManager.enableWaiting(!0),ue(this,a,this._uiManager.imageManager.getFromFile(q).then(V=>ne(this,E,vt).call(this,V)).finally(()=>ne(this,E,yt).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=R.supportedTypesStr,ue(this,a,new Promise(q=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const V=await this._uiManager.imageManager.getFromFile(G.files[0]);ne(this,E,vt).call(this,V)}q()}),G.addEventListener("cancel",()=>{this.remove(),q()})}).finally(()=>ne(this,E,yt).call(this))),G.click()},fn=function(){const{div:G}=this;let{width:q,height:V}=i(this,h);const[se,D]=this.pageDimensions,X=.75;if(this.width)q=this.width*se,V=this.height*D;else if(q>X*se||V>X*D){const u=Math.min(X*se/q,X*D/V);q*=u,V*=u}const[re,N]=this.parentDimensions;this.setDims(q*re/se,V*N/D),this._uiManager.enableWaiting(!1);const d=ue(this,b,document.createElement("canvas"));G.append(d),G.hidden=!1,ne(this,E,gn).call(this,q,V),ne(this,E,Jn).call(this),i(this,g)||(this.parent.addUndoableEditor(this),ue(this,g,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Yn=function(G,q){var X;const[V,se]=this.parentDimensions;this.width=G/V,this.height=q/se,this.setDims(G,q),(X=this._initialOptions)!=null&&X.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,i(this,P)!==null&&clearTimeout(i(this,P)),ue(this,P,setTimeout(()=>{ue(this,P,null),ne(this,E,gn).call(this,G,q)},200))},Kn=function(G,q){const{width:V,height:se}=i(this,h);let D=V,X=se,re=i(this,h);for(;D>2*G||X>2*q;){const N=D,d=X;D>2*G&&(D=D>=16384?Math.floor(D/2)-1:Math.ceil(D/2)),X>2*q&&(X=X>=16384?Math.floor(X/2)-1:Math.ceil(X/2));const u=new OffscreenCanvas(D,X);u.getContext("2d").drawImage(re,0,0,N,d,0,0,D,X),re=u.transferToImageBitmap()}return re},gn=function(G,q){G=Math.ceil(G),q=Math.ceil(q);const V=i(this,b);if(!V||V.width===G&&V.height===q)return;V.width=G,V.height=q;const se=i(this,A)?i(this,h):ne(this,E,Kn).call(this,G,q),D=V.getContext("2d");D.filter=this._uiManager.hcmFilter,D.drawImage(se,0,0,se.width,se.height,0,0,G,q)},Ot=function(G){if(G){if(i(this,A)){const se=this._uiManager.imageManager.getSvgUrl(i(this,v));if(se)return se}const q=document.createElement("canvas");return{width:q.width,height:q.height}=i(this,h),q.getContext("2d").drawImage(i(this,h),0,0),q.toDataURL()}if(i(this,A)){const[q,V]=this.pageDimensions,se=Math.round(this.width*q*y.PixelsPerInch.PDF_TO_CSS_UNITS),D=Math.round(this.height*V*y.PixelsPerInch.PDF_TO_CSS_UNITS),X=new OffscreenCanvas(se,D);return X.getContext("2d").drawImage(i(this,h),0,0,i(this,h).width,i(this,h).height,0,0,se,D),X.transferToImageBitmap()}return structuredClone(i(this,h))},Jn=function(){ue(this,x,new ResizeObserver(G=>{const q=G[0].contentRect;q.width&&q.height&&ne(this,E,Yn).call(this,q.width,q.height)})),i(this,x).observe(this.div)},Qe(R,"_type","stamp");let O=R;e.StampEditor=O}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return y.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return C.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),y=__w_pdfjs_require__(27),C=__w_pdfjs_require__(5),O=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),v=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(t,e,s){if(s||arguments.length===2)for(var n=0,r=e.length,y;n<r;n++)(y||!(n in e))&&(y||(y=Array.prototype.slice.call(e,0,n)),y[n]=e[n]);return t.concat(y||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(t,e){var s={};return allEvents.forEach(function(n){var r=t[n];r&&(e?s[n]=function(y){return r(y,e(n))}:s[n]=r)}),s}function makeCancellablePromise(t){var e=!1,s=new Promise(function(n,r){t.then(function(y){return!e&&n(y)}).catch(function(y){return!e&&r(y)})});return{promise:s,cancel:function(){e=!0}}}var prefix="Invariant failed";function invariant(t,e){if(!t)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(t,e,s){for(s of t.keys())if(dequal(s,e))return s}function dequal(t,e){var s,n,r;if(t===e)return!0;if(t&&e&&(s=t.constructor)===e.constructor){if(s===Date)return t.getTime()===e.getTime();if(s===RegExp)return t.toString()===e.toString();if(s===Array){if((n=t.length)===e.length)for(;n--&&dequal(t[n],e[n]););return n===-1}if(s===Set){if(t.size!==e.size)return!1;for(n of t)if(r=n,r&&typeof r=="object"&&(r=find(e,r),!r)||!e.has(r))return!1;return!0}if(s===Map){if(t.size!==e.size)return!1;for(n of t)if(r=n[0],r&&typeof r=="object"&&(r=find(e,r),!r)||!dequal(n[1],e.get(r)))return!1;return!0}if(s===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(s===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!s||typeof t=="object"){n=0;for(s in t)if(has.call(t,s)&&++n&&!has.call(e,s)||!(s in e)||!dequal(t[s],e[s]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:t,type:e}){return React$1.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},t)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(s=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(s):Array.isArray(e)?s(e):e.then(s)}).then(s=>{invariant(Array.isArray(s));const n=s[0];new Promise(r=>{invariant(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(y=>{r(y)}).catch(()=>{invariant(!1)}):typeof n=="number"?r(n):invariant(!1)}).then(r=>{const y=r+1;invariant(this.pdfViewer),invariant(y>=1&&y<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:r,pageNumber:y})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const s=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:e})}addLinkAttributes(e,s,n){e.href=s,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(t){return typeof t<"u"}function isProvided(t){return isDefined(t)&&t!==null}function isString(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant(isBrowser),t instanceof Blob}function isDataURI(t){return isString(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant(isDataURI(t));const[e="",s=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t&&t.cancel&&t.cancel()}function makePageCallback(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return s(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return s(new Error("Error while reading a file."));const{error:y}=r.target;if(!y)return s(new Error("Error while reading a file."));switch(y.code){case y.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case y.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case y.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},n.readAsArrayBuffer(t)})}function reducer(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const t={};return allEvents.forEach(e=>{t[e]=PropTypes.func}),t})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function t(e,s,n){const{[s]:r,pageNumber:y,pdf:C}=e;if(!isDefined(C))return null;if(isDefined(r)){if(typeof r!="number")return new Error(`\`${s}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<0)return new Error(`Expected \`${s}\` to be greater or equal to 0.`);const{numPages:O}=C;if(r+1>O)return new Error(`Expected \`${s}\` to be less or equal to ${O-1}.`)}else if(!isDefined(y))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function t(e,s,n){const{[s]:r,pageIndex:y,pdf:C}=e;if(!isDefined(C))return null;if(isDefined(r)){if(typeof r!="number")return new Error(`\`${s}\` of type \`${typeof r}\` supplied to \`${n}\`, expected \`number\`.`);if(r<1)return new Error(`Expected \`${s}\` to be greater or equal to 1.`);const{numPages:O}=C;if(r>O)return new Error(`Expected \`${s}\` to be less or equal to ${O}.`)}else if(!isDefined(y))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(t,e,s,n){function r(y){return y instanceof s?y:new s(function(C){C(y)})}return new(s||(s=Promise))(function(y,C){function O(a){try{v(n.next(a))}catch(w){C(w)}}function h(a){try{v(n.throw(a))}catch(w){C(w)}}function v(a){a.done?y(a.value):r(a.value).then(O,h)}v((n=n.apply(t,e||[])).next())})},__rest$1=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(t,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");t(s);break}case PasswordResponses.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");t(s);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t(e,s){var{children:n,className:r,error:y="Failed to load PDF file.",externalLinkRel:C,externalLinkTarget:O,file:h,inputRef:v,imageResourcesPath:a,loading:w="Loading PDF",noData:k="No PDF file specified.",onItemClick:b,onLoadError:x,onLoadProgress:P,onLoadSuccess:A,onPassword:g=defaultOnPassword,onSourceError:E,onSourceSuccess:F,options:S,renderMode:o,rotate:p}=e,l=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[m,f]=useResolver(),{value:I,error:c}=m,[R,L]=useResolver(),{value:Q,error:G}=R,q=reactExports.useRef(new LinkService),V=reactExports.useRef([]),se=reactExports.useRef(),D=reactExports.useRef();reactExports.useEffect(()=>{h&&h!==se.current&&isParameterObject(h)&&(warning$1(!dequal(h,se.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),se.current=h)},[h]),reactExports.useEffect(()=>{S&&S!==D.current&&(warning$1(!dequal(S,D.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),D.current=S)},[S]);const X=reactExports.useRef({scrollPageIntoView:Z=>{const{dest:ee,pageNumber:M,pageIndex:H=M-1}=Z;if(b){b({dest:ee,pageIndex:H,pageNumber:M});return}const J=V.current[H];if(J){J.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${M} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:q,pages:V,viewer:X}),[]);function re(){F&&F()}function N(){c&&(warning$1(!1,c.toString()),E&&E(c))}function d(){f({type:"RESET"})}reactExports.useEffect(d,[h,f]);const u=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!h)return null;if(typeof h=="string")return isDataURI(h)?{data:dataURItoByteString(h)}:(displayCORSWarning(),{url:h});if(h instanceof PDFDataRangeTransport)return{range:h};if(isArrayBuffer(h))return{data:h};if(isBrowser&&isBlob(h))return{data:yield loadFromFile(h)};if(invariant(typeof h=="object"),invariant(isParameterObject(h)),"url"in h&&typeof h.url=="string"){if(isDataURI(h.url)){const{url:Z}=h,ee=__rest$1(h,["url"]),M=dataURItoByteString(Z);return Object.assign({data:M},ee)}displayCORSWarning()}return h}),[h]);reactExports.useEffect(()=>{const Z=makeCancellablePromise(u());return Z.promise.then(ee=>{f({type:"RESOLVE",value:ee})}).catch(ee=>{f({type:"REJECT",error:ee})}),()=>{cancelRunningTask(Z)}},[u,f]),reactExports.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){N();return}re()}},[I]);function T(){Q&&(A&&A(Q),V.current=new Array(Q.numPages),q.current.setDocument(Q))}function $(){G&&(warning$1(!1,G.toString()),x&&x(G))}function U(){L({type:"RESET"})}reactExports.useEffect(U,[L,I]);function B(){if(!I)return;const Z=Object.assign(Object.assign({},S),{isEvalSupported:!1}),ee=Object.assign(Object.assign({},I),Z),M=pdfjs.getDocument(ee);P&&(M.onProgress=P),g&&(M.onPassword=g);const H=M;return H.promise.then(J=>{L({type:"RESOLVE",value:J})}).catch(J=>{H.destroyed||L({type:"REJECT",error:J})}),()=>{H.destroy()}}reactExports.useEffect(B,[S,L,I]),reactExports.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){$();return}T()}},[Q]);function Y(){q.current.setViewer(X.current),q.current.setExternalLinkRel(C),q.current.setExternalLinkTarget(O)}reactExports.useEffect(Y,[C,O]);function ie(Z,ee){V.current[Z]=ee}function le(Z){delete V.current[Z]}const fe=reactExports.useMemo(()=>({imageResourcesPath:a,linkService:q.current,onItemClick:b,pdf:Q,registerPage:ie,renderMode:o,rotate:p,unregisterPage:le}),[a,b,Q,o,p]),be=reactExports.useMemo(()=>makeEventProps(l,()=>Q),[l,Q]);function me(){return React$1.createElement(DocumentContext.Provider,{value:fe},n)}function ve(){return h?Q==null?React$1.createElement(Message,{type:"loading"},typeof w=="function"?w():w):Q===!1?React$1.createElement(Message,{type:"error"},typeof y=="function"?y():y):me():React$1.createElement(Message,{type:"no-data"},typeof k=="function"?k():k)}return React$1.createElement("div",Object.assign({className:clsx("react-pdf__Document",r),ref:v,style:{"--scale-factor":"1"}},be),ve())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var s=t.filter(Boolean);if(s.length<=1){var n=s[0];return n||null}return function(y){s.forEach(function(C){typeof C=="function"?C(y):C&&(C.current=y)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const e={};if(isStructTreeNode(t)){const{role:s}=t,n=s.match(HEADING_PATTERN);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(isPdfRole(s)){const r=PDF_ROLE_TO_HTML_ROLE[s];r&&(e.role=r)}}return e}function getBaseAttributes(t){const e={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[s]=t.children;if(s){const n=getBaseAttributes(s);return Object.assign(Object.assign({},e),n)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function getAttributes(t){return t?Object.assign(Object.assign({},getRoleAttributes(t)),getBaseAttributes(t)):null}function StructTreeItem({className:t,node:e}){const s=reactExports.useMemo(()=>getAttributes(e),[e]),n=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((r,y)=>React$1.createElement(StructTreeItem,{key:y,node:r})),[e]);return React$1.createElement("span",Object.assign({className:t},s),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const t=usePageContext();invariant(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:s}=t,[n,r]=useResolver(),{value:y,error:C}=n,{customTextRenderer:O,page:h}=t;function v(){y&&s&&s(y)}function a(){C&&(warning$1(!1,C.toString()),e&&e(C))}function w(){r({type:"RESET"})}reactExports.useEffect(w,[r,h]);function k(){if(O||!h)return;const b=makeCancellablePromise(h.getStructTree()),x=b;return b.promise.then(P=>{r({type:"RESOLVE",value:P})}).catch(P=>{r({type:"REJECT",error:P})}),()=>cancelRunningTask(x)}return reactExports.useEffect(k,[O,h,r]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){a();return}v()}},[y]),y?React$1.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:y}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(t){const e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},e),t),{_className:n,canvasBackground:r,devicePixelRatio:y=getDevicePixelRatio(),onRenderError:C,onRenderSuccess:O,page:h,renderForms:v,renderTextLayer:a,rotate:w,scale:k}=s,{canvasRef:b}=t;invariant(h);const x=reactExports.useRef(null);function P(){h&&O&&O(makePageCallback(h,k))}function A(o){isCancelException(o)||(warning$1(!1,o.toString()),C&&C(o))}const g=reactExports.useMemo(()=>h.getViewport({scale:k*y,rotation:w}),[y,h,w,k]),E=reactExports.useMemo(()=>h.getViewport({scale:k,rotation:w}),[h,w,k]);function F(){if(!h)return;h.cleanup();const{current:o}=x;if(!o)return;o.width=g.width,o.height=g.height,o.style.width=`${Math.floor(E.width)}px`,o.style.height=`${Math.floor(E.height)}px`,o.style.visibility="hidden";const p={annotationMode:v?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:g};r&&(p.background=r);const l=h.render(p),m=l;return l.promise.then(()=>{o.style.visibility="",P()}).catch(A),()=>cancelRunningTask(m)}reactExports.useEffect(F,[r,x,y,h,v,g,E]);const S=reactExports.useCallback(()=>{const{current:o}=x;o&&(o.width=0,o.height=0)},[x]);return reactExports.useEffect(()=>S,[S]),React$1.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(b,x),style:{display:"block",userSelect:"none"}},a?React$1.createElement(StructTree,null):null)}function PageSVG(){const t=usePageContext();invariant(t);const{_className:e,onRenderSuccess:s,onRenderError:n,page:r,rotate:y,scale:C}=t;invariant(r);const[O,h]=useResolver(),{value:v,error:a}=O;function w(){r&&s&&s(makePageCallback(r,C))}function k(){a&&(isCancelException(a)||(warning$1(!1,a.toString()),n&&n(a)))}const b=reactExports.useMemo(()=>r.getViewport({scale:C,rotation:y}),[r,y,C]);function x(){h({type:"RESET"})}reactExports.useEffect(x,[r,h,b]);function P(){if(!r)return;const F=makeCancellablePromise(r.getOperatorList());return F.promise.then(S=>{new pdfjs.SVGGraphics(r.commonObjs,r.objs).getSVG(S,b).then(p=>{if(!(p instanceof SVGElement))throw new Error("getSVG returned unexpected result.");h({type:"RESOLVE",value:p})}).catch(p=>{h({type:"REJECT",error:p})})}).catch(S=>{h({type:"REJECT",error:S})}),()=>cancelRunningTask(F)}reactExports.useEffect(P,[r,h,b]),reactExports.useEffect(()=>{if(v!==void 0){if(v===!1){k();return}w()}},[v]);function A(F){if(!F||!v)return;F.firstElementChild||F.appendChild(v);const{width:S,height:o}=b;v.setAttribute("width",`${S}`),v.setAttribute("height",`${o}`)}const{width:g,height:E}=b;return React$1.createElement("div",{className:`${e}__svg`,ref:F=>A(F),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:g,height:E,userSelect:"none"}})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant(t);const{customTextRenderer:e,onGetTextError:s,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:y,page:C,pageIndex:O,pageNumber:h,rotate:v,scale:a}=t;invariant(C);const[w,k]=useResolver(),{value:b,error:x}=w,P=reactExports.useRef(null),A=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function g(){b&&n&&n(b)}function E(){x&&(warning$1(!1,x.toString()),s&&s(x))}function F(){k({type:"RESET"})}reactExports.useEffect(F,[C,k]);function S(){if(!C)return;const c=makeCancellablePromise(C.getTextContent()),R=c;return c.promise.then(L=>{k({type:"RESOLVE",value:L})}).catch(L=>{k({type:"REJECT",error:L})}),()=>cancelRunningTask(R)}reactExports.useEffect(S,[C,k]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){E();return}g()}},[b]);const o=reactExports.useCallback(()=>{y&&y()},[y]),p=reactExports.useCallback(c=>{warning$1(!1,c.toString()),r&&r(c)},[r]);function l(){const c=A.current;c&&c.classList.add("active")}function m(){const c=A.current;c&&c.classList.remove("active")}const f=reactExports.useMemo(()=>C.getViewport({scale:a,rotation:v}),[C,v,a]);function I(){if(!C||!b)return;const{current:c}=P;if(!c)return;c.innerHTML="";const R=C.streamTextContent({includeMarkedContent:!0}),L={container:c,textContentSource:R,viewport:f},Q=pdfjs.renderTextLayer(L),G=Q;return Q.promise.then(()=>{const q=document.createElement("div");q.className="endOfContent",c.append(q),A.current=q;const V=c.querySelectorAll('[role="presentation"]');if(e){let se=0;b.items.forEach((D,X)=>{if(!isTextItem(D))return;const re=V[se];if(!re)return;const N=e(Object.assign({pageIndex:O,pageNumber:h,itemIndex:X},D));re.innerHTML=N,se+=D.str&&D.hasEOL?2:1})}o()}).catch(p),()=>cancelRunningTask(G)}return reactExports.useLayoutEffect(I,[e,p,o,C,O,h,b,f]),React$1.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:m,onMouseDown:l,ref:P})}function AnnotationLayer(){const t=useDocumentContext(),e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},t),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:y,onGetAnnotationsSuccess:C,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:h,page:v,pdf:a,renderForms:w,rotate:k,scale:b=1}=s;invariant(a),invariant(v),invariant(r);const[x,P]=useResolver(),{value:A,error:g}=x,E=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function F(){A&&C&&C(A)}function S(){g&&(warning$1(!1,g.toString()),y&&y(g))}function o(){P({type:"RESET"})}reactExports.useEffect(o,[P,v]);function p(){if(!v)return;const c=makeCancellablePromise(v.getAnnotations()),R=c;return c.promise.then(L=>{P({type:"RESOLVE",value:L})}).catch(L=>{P({type:"REJECT",error:L})}),()=>{cancelRunningTask(R)}}reactExports.useEffect(p,[P,v,w]),reactExports.useEffect(()=>{if(A!==void 0){if(A===!1){S();return}F()}},[A]);function l(){h&&h()}function m(c){warning$1(!1,`${c}`),O&&O(c)}const f=reactExports.useMemo(()=>v.getViewport({scale:b,rotation:k}),[v,k,b]);function I(){if(!a||!v||!r||!A)return;const{current:c}=E;if(!c)return;const R=f.clone({dontFlip:!0}),L={accessibilityManager:null,annotationCanvasMap:null,div:c,l10n:null,page:v,viewport:R},Q={annotations:A,annotationStorage:a.annotationStorage,div:c,downloadManager:null,imageResourcesPath:n,linkService:r,page:v,renderForms:w,viewport:R};c.innerHTML="";try{new pdfjs.AnnotationLayer(L).render(Q),l()}catch(G){m(G)}return()=>{}}return reactExports.useEffect(I,[A,n,r,v,w,f]),React$1.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:E})}var __rest=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const defaultScale=1,Page=function t(e){const s=useDocumentContext(),n=Object.assign(Object.assign({},s),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:y=!0,canvasBackground:C,canvasRef:O,children:h,className:v,customRenderer:a,customTextRenderer:w,devicePixelRatio:k,error:b="Failed to load the page.",height:x,inputRef:P,loading:A="Loading page",noData:g="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:F,onGetStructTreeError:S,onGetStructTreeSuccess:o,onGetTextError:p,onGetTextSuccess:l,onLoadError:m,onLoadSuccess:f,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:c,onRenderError:R,onRenderSuccess:L,onRenderTextLayerError:Q,onRenderTextLayerSuccess:G,pageIndex:q,pageNumber:V,pdf:se,registerPage:D,renderAnnotationLayer:X=!0,renderForms:re=!1,renderMode:N="canvas",renderTextLayer:d=!0,rotate:u,scale:T=defaultScale,unregisterPage:$,width:U}=n,B=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Y,ie]=useResolver(),{value:le,error:fe}=Y,be=reactExports.useRef(null);invariant(se);const me=isProvided(V)?V-1:q??null,ve=V??(isProvided(q)?q+1:null),Z=u??(le?le.rotate:null),ee=reactExports.useMemo(()=>{if(!le)return null;let Oe=1;const ze=T??defaultScale;if(U||x){const Xe=le.getViewport({scale:1,rotation:Z});U?Oe=U/Xe.width:x&&(Oe=x/Xe.height)}return ze*Oe},[x,le,Z,T,U]);function M(){return()=>{isProvided(me)&&y&&$&&$(me)}}reactExports.useEffect(M,[y,se,me,$]);function H(){if(f){if(!le||!ee)return;f(makePageCallback(le,ee))}if(y&&D){if(!isProvided(me)||!be.current)return;D(me,be.current)}}function J(){fe&&(warning$1(!1,fe.toString()),m&&m(fe))}function oe(){ie({type:"RESET"})}reactExports.useEffect(oe,[ie,se,me]);function ge(){if(!se||!ve)return;const Oe=makeCancellablePromise(se.getPage(ve)),ze=Oe;return Oe.promise.then(Xe=>{ie({type:"RESOLVE",value:Xe})}).catch(Xe=>{ie({type:"REJECT",error:Xe})}),()=>cancelRunningTask(ze)}reactExports.useEffect(ge,[ie,se,me,ve,D]),reactExports.useEffect(()=>{if(le!==void 0){if(le===!1){J();return}H()}},[le,ee]);const Ae=reactExports.useMemo(()=>le&&isProvided(me)&&ve&&isProvided(Z)&&isProvided(ee)?{_className:r,canvasBackground:C,customTextRenderer:w,devicePixelRatio:k,onGetAnnotationsError:E,onGetAnnotationsSuccess:F,onGetStructTreeError:S,onGetStructTreeSuccess:o,onGetTextError:p,onGetTextSuccess:l,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:c,onRenderError:R,onRenderSuccess:L,onRenderTextLayerError:Q,onRenderTextLayerSuccess:G,page:le,pageIndex:me,pageNumber:ve,renderForms:re,renderTextLayer:d,rotate:Z,scale:ee}:null,[r,C,w,k,E,F,S,o,p,l,I,c,R,L,Q,G,le,me,ve,re,d,Z,ee]),_e=reactExports.useMemo(()=>makeEventProps(B,()=>le&&(ee?makePageCallback(le,ee):void 0)),[B,le,ee]),te=`${me}@${ee}/${Z}`,Pe=`${me}/${Z}`;function Ce(){switch(N){case"custom":return invariant(a),React$1.createElement(a,{key:`${te}_custom`});case"none":return null;case"svg":return React$1.createElement(PageSVG,{key:`${Pe}_svg`});case"canvas":default:return React$1.createElement(PageCanvas,{key:`${te}_canvas`,canvasRef:O})}}function Ue(){return d?React$1.createElement(TextLayer,{key:`${te}_text`}):null}function $e(){return X?React$1.createElement(AnnotationLayer,{key:`${te}_annotations`}):null}function He(){return React$1.createElement(PageContext.Provider,{value:Ae},Ce(),Ue(),$e(),h)}function ke(){return ve?se===null||le===void 0||le===null?React$1.createElement(Message,{type:"loading"},typeof A=="function"?A():A):se===!1||le===!1?React$1.createElement(Message,{type:"error"},typeof b=="function"?b():b):He():React$1.createElement(Message,{type:"no-data"},typeof g=="function"?g():g)}return React$1.createElement("div",Object.assign({className:clsx(r,v),"data-page-number":ve,ref:mergeRefs(P,be),style:{"--scale-factor":`${ee}`,backgroundColor:C||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},_e),ke())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";var Close={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1=Close.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Close.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const PDFPreview=({open:t,onClose:e,pdfUrl:s,bookTitle:n})=>{const[r,y]=reactExports.useState(null),[C,O]=reactExports.useState(1),[h,v]=reactExports.useState(null),a=({numPages:b})=>{y(b),v(null)},w=b=>{v("Erreur lors du chargement du PDF"),console.error("Error loading PDF:",b)},k=b=>{O(x=>{const P=x+b;return Math.min(Math.max(1,P),r)})};return jsxRuntimeExports.jsxs(Dialog,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:n}),jsxRuntimeExports.jsx(IconButton,{onClick:e,children:jsxRuntimeExports.jsx(default_1,{})})]}),jsxRuntimeExports.jsx(DialogContent,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:h?jsxRuntimeExports.jsx(Typography,{color:"error",sx:{mt:2},children:h}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Document,{file:s,onLoadSuccess:a,onLoadError:w,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement du PDF..."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:C,width:window.innerWidth*.7,loading:jsxRuntimeExports.jsx(Typography,{children:"Chargement de la page..."})})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(default_1$7,{}),onClick:()=>k(-1),disabled:C<=1,children:"Prcdent"}),jsxRuntimeExports.jsxs(Typography,{children:["Page ",C," sur ",r]}),jsxRuntimeExports.jsx(Button,{endIcon:jsxRuntimeExports.jsx(default_1$8,{}),onClick:()=>k(1),disabled:C>=r,children:"Suivant"})]})]})})]})},SkeletonLoader=({count:t=6})=>jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(t)].map((e,s)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:200,animation:"wave",sx:{m:1}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:32,width:"80%",sx:{mb:1}}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:24,width:"60%",sx:{mb:2}}),jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",height:24,width:"40%",sx:{mb:1}}),jsxRuntimeExports.jsx(Box,{sx:{mb:2},children:jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",height:32,width:"100%"})}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",height:32,width:"30%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",height:32,width:"30%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",height:32,width:"30%"})]})]}),jsxRuntimeExports.jsxs(CardActions,{sx:{p:2,justifyContent:"space-between"},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",width:100,height:36}),jsxRuntimeExports.jsx(Skeleton,{variant:"rounded",width:100,height:36})]})]})},`skeleton-${s}`))}),BookGrid=({books:t,onReadBook:e,onPreviewBook:s,theme:n})=>jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:t.map((r,y)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:(r==null?void 0:r.status)==="completed"?"translateY(-4px)":"none",boxShadow:(r==null?void 0:r.status)==="completed"?4:1}},children:[r.cover_image&&jsxRuntimeExports.jsx(CardMedia,{component:"img",height:"200",image:r.cover_image,alt:`Cover for ${r.title}`,sx:{objectFit:"contain",p:1}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:(r==null?void 0:r.title)||"Untitled Book"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Author: ",(r==null?void 0:r.author)||"Unknown"]}),jsxRuntimeExports.jsx(BookStatus,{book:r}),jsxRuntimeExports.jsx(BookProgress,{book:r}),r.error_message&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"error",sx:{mt:1},children:["Error: ",r.error_message]})]}),jsxRuntimeExports.jsxs(CardActions,{sx:{padding:2,justifyContent:"space-between",backgroundColor:n.palette.background.paper,borderTop:1,borderColor:n.palette.divider},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$3,{}),onClick:()=>s(r),disabled:(r==null?void 0:r.status)!=="completed",children:"Preview"}),jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",color:"primary",startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>e(r),disabled:(r==null?void 0:r.status)!=="completed",children:"Read"})]})]})},`book-${(r==null?void 0:r.id)||y}`))}),BookStatus=({book:t})=>t&&jsxRuntimeExports.jsx(Tooltip,{title:`Status: ${t.status}`,children:jsxRuntimeExports.jsx(Chip,{label:t.status,color:t.status==="completed"?"success":"default",size:"small",sx:{mb:1}})}),BookProgress=({book:t})=>t&&jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:1,sx:{mb:1},children:[jsxRuntimeExports.jsx(Tooltip,{title:"Pages",children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$1,{}),label:`${t.current_page||0}/${t.total_pages||0} pages`,size:"small",variant:"outlined"})}),jsxRuntimeExports.jsx(Tooltip,{title:"Images",children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$2,{}),label:`${t.processed_images||0} images`,size:"small",variant:"outlined"})}),t.processed_sections>0&&jsxRuntimeExports.jsx(Tooltip,{title:"Sections",children:jsxRuntimeExports.jsx(Chip,{label:`${t.processed_sections} sections`,size:"small",variant:"outlined"})})]}),HomePage=()=>{const[t,e]=reactExports.useState([]),[s,n]=reactExports.useState(!0),[r,y]=reactExports.useState(!1),[C,O]=reactExports.useState(null),[h,v]=reactExports.useState(""),[a,w]=reactExports.useState(!1),[k,b]=reactExports.useState(null),x=useTheme$2(),P=useMediaQuery(x.breakpoints.down("sm")),A=useNavigate();reactExports.useEffect(()=>{g();const o=setInterval(g,5e3);return()=>clearInterval(o)},[]);const g=async()=>{try{O(null);const o=await fetch("/api/books");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const p=await o.json();if(!p||typeof p!="object")throw new Error("Invalid API response format");const m=(Array.isArray(p.books)?p.books:[]).map((f={})=>({id:f.id||f.filename||"",title:f.title||"Untitled Book",author:f.author||"Unknown",filename:f.filename||"",uploadDate:f.uploadDate,status:f.status||"unknown",current_page:f.current_page||0,total_pages:f.total_pages||0,processed_sections:f.processed_sections||0,processed_images:f.processed_images||0,error_message:f.error_message||null,cover_image:f.cover_image||null,...f}));e(m)}catch(o){console.error("Error fetching books:",o),O(o.message||"Error connecting to server"),e([])}finally{n(!1)}},E=async o=>{const p=o.target.files[0];if(!p)return;if(p.type!=="application/pdf"){O("Please select a valid PDF file");return}const l=new FormData;l.append("pdf_files",p);try{y(!0),O(null);const m=await fetch("/api/books/upload",{method:"POST",body:l}),f=await m.json();if(!m.ok||!f)throw new Error((f==null?void 0:f.message)||"Error uploading PDF");v(f.message||"PDF uploaded successfully"),o.target.value="",g()}catch(m){console.error("Error uploading PDF:",m),O(m.message||"Error uploading file")}finally{y(!1)}},F=o=>{if((o==null?void 0:o.status)!=="completed"){O("This book is not ready for reading yet");return}A(`/reader/${o.filename}`)},S=o=>{if((o==null?void 0:o.status)!=="completed"){O("This book is not ready for preview yet");return}b(o),w(!0)};return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:P?"h4":"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:x.palette.primary.main},children:"Digital Library"}),jsxRuntimeExports.jsx(ErrorBoundary,{fallbackMessage:"Error in file upload component",children:jsxRuntimeExports.jsxs(Button,{variant:"contained",component:"label",startIcon:jsxRuntimeExports.jsx(default_1$5,{}),sx:{mt:2,px:3,py:1.5,borderRadius:2,backgroundColor:x.palette.primary.main,"&:hover":{backgroundColor:x.palette.primary.dark}},disabled:r,children:[r?"Uploading...":"Add PDF Book",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:E})]})})]}),jsxRuntimeExports.jsx(Snackbar,{open:!!h,autoHideDuration:6e3,onClose:()=>v(""),message:h}),C&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:3},onClose:()=>O(null),action:jsxRuntimeExports.jsx(Button,{color:"inherit",size:"small",onClick:()=>window.location.reload(),children:"Retry"}),children:C}),s?jsxRuntimeExports.jsx(ErrorBoundary,{fallbackMessage:"Error displaying skeleton loader",children:jsxRuntimeExports.jsx(SkeletonLoader,{count:6})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Array.isArray(t)&&t.length===0&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:"No books in library"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Start by uploading a PDF"})]}),Array.isArray(t)&&t.length>0&&jsxRuntimeExports.jsx(ErrorBoundary,{fallbackMessage:"Error displaying book grid",children:jsxRuntimeExports.jsx(BookGrid,{books:t,onReadBook:F,onPreviewBook:S,theme:x})})]}),k&&jsxRuntimeExports.jsx(ErrorBoundary,{fallbackMessage:"Error displaying PDF preview",children:jsxRuntimeExports.jsx(PDFPreview,{open:a,onClose:()=>{w(!1),b(null)},pdfUrl:`/api/books/${k.filename}`,bookTitle:k.title})})]})};export{HomePage as default};
//# sourceMappingURL=index-Co1Hdrbs.js.map
