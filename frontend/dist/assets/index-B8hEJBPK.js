import{i as e,j as a,C as s,b as t,d as o,e as r,E as i,p as l}from"./mui-DvUJsNLQ.js";import{r as n}from"./vendor-Dq37Ohfu.js";import{r as d}from"./index-BG7iL5Qi.js";import"./mui-deps-BskQHngj.js";import"./router-B6Hy40oI.js";var u={},p=e;Object.defineProperty(u,"__esModule",{value:!0});var c=u.default=void 0,f=p(d()),m=a;c=u.default=(0,f.default)((0,m.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const j=()=>{const[e,d]=n.useState(!1),[u,p]=n.useState(null),[f,m]=n.useState("");return a.jsx(s,{children:a.jsxs(t,{sx:{mb:4},children:[a.jsx(o,{variant:"h4",gutterBottom:!0,sx:{fontWeight:500,color:"primary.main",mb:3},children:"Profil"}),a.jsx(t,{sx:{mt:4},children:a.jsxs(r,{variant:"contained",color:"primary",component:"label",startIcon:a.jsx(c,{}),disabled:e,children:[e?"Uploading...":"Ajouter un livre",a.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:async e=>{const a=e.target.files[0];if(!a)return;if("application/pdf"!==a.type)return void p("Please select a valid PDF file");const s=new FormData;s.append("pdf_files",a);try{d(!0),p(null);const a=await fetch("/api/books/upload",{method:"POST",body:s});if(!a.ok){const e=await a.json();throw new Error((null==e?void 0:e.message)||`Upload failed: ${a.status}`)}const t=await a.json();m(t.message||"PDF uploaded successfully"),e.target.value=""}catch(t){p(t.message||"Error uploading file")}finally{d(!1)}}})]})}),a.jsx(i,{open:!!f,autoHideDuration:6e3,onClose:()=>m(""),message:f}),u&&a.jsx(l,{severity:"error",sx:{mt:3},onClose:()=>p(null),children:u})]})})};export{j as default};
